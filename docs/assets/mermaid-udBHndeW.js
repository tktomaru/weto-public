const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./markdown-CyFezxPB.js","./markdown-BfC0goYb.css"])))=>i.map(i=>d[i]);
var JU=Object.defineProperty;var tW=(e,t,r)=>t in e?JU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Se=(e,t,r)=>tW(e,typeof t!="symbol"?t+"":t,r);import{g as qh}from"./markdown-CyFezxPB.js";function Oe(e){return function(){return e}}const j_=Math.abs,Gn=Math.atan2,Rs=Math.cos,eW=Math.max,C2=Math.min,Ti=Math.sin,Dn=Math.sqrt,Un=1e-12,Do=Math.PI,j1=Do/2,So=2*Do;function rW(e){return e>1?0:e<-1?Do:Math.acos(e)}function K_(e){return e>=1?j1:e<=-1?-j1:Math.asin(e)}const xT=Math.PI,bT=2*xT,yl=1e-6,nW=bT-yl;function h6(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function iW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return h6;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}let aW=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?h6:iW(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-t,u=i-r,h=s-t,f=o-r,d=h*h+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(d>yl)if(!(Math.abs(f*l-u*h)>yl)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-s,p=i-o,v=l*l+u*u,m=g*g+p*p,y=Math.sqrt(v),b=Math.sqrt(d),T=a*Math.tan((xT-Math.acos((v+d-m)/(2*y*b)))/2),w=T/b,k=T/y;Math.abs(w-1)>yl&&this._append`L${t+w*h},${r+w*f}`,this._append`A${a},${a},0,0,${+(f*g>h*p)},${this._x1=t+k*l},${this._y1=r+k*u}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),u=t+o,h=r+l,f=1^s,d=s?i-a:a-i;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>yl||Math.abs(this._y1-h)>yl)&&this._append`L${u},${h}`,n&&(d<0&&(d=d%bT+bT),d>nW?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=h}`:d>yl&&this._append`A${n},${n},0,${+(d>=xT)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}};function Vm(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new aW(t)}function sW(e){return e.innerRadius}function oW(e){return e.outerRadius}function lW(e){return e.startAngle}function cW(e){return e.endAngle}function uW(e){return e&&e.padAngle}function hW(e,t,r,n,i,a,s,o){var l=r-e,u=n-t,h=s-i,f=o-a,d=f*l-h*u;if(!(d*d<Un))return d=(h*(t-a)-f*(e-i))/d,[e+d*l,t+d*u]}function Yp(e,t,r,n,i,a,s){var o=e-r,l=t-n,u=(s?a:-a)/Dn(o*o+l*l),h=u*l,f=-u*o,d=e+h,g=t+f,p=r+h,v=n+f,m=(d+p)/2,y=(g+v)/2,b=p-d,T=v-g,w=b*b+T*T,k=i-a,S=d*v-p*g,E=(T<0?-1:1)*Dn(eW(0,k*k*w-S*S)),L=(S*T-b*E)/w,A=(-S*b-T*E)/w,R=(S*T+b*E)/w,C=(-S*b+T*E)/w,D=L-m,P=A-y,_=R-m,I=C-y;return D*D+P*P>_*_+I*I&&(L=R,A=C),{cx:L,cy:A,x01:-h,y01:-f,x11:L*(i/k-1),y11:A*(i/k-1)}}function ph(){var e=sW,t=oW,r=Oe(0),n=null,i=lW,a=cW,s=uW,o=null,l=Vm(u);function u(){var h,f,d=+e.apply(this,arguments),g=+t.apply(this,arguments),p=i.apply(this,arguments)-j1,v=a.apply(this,arguments)-j1,m=j_(v-p),y=v>p;if(o||(o=h=l()),g<d&&(f=g,g=d,d=f),!(g>Un))o.moveTo(0,0);else if(m>So-Un)o.moveTo(g*Rs(p),g*Ti(p)),o.arc(0,0,g,p,v,!y),d>Un&&(o.moveTo(d*Rs(v),d*Ti(v)),o.arc(0,0,d,v,p,y));else{var b=p,T=v,w=p,k=v,S=m,E=m,L=s.apply(this,arguments)/2,A=L>Un&&(n?+n.apply(this,arguments):Dn(d*d+g*g)),R=C2(j_(g-d)/2,+r.apply(this,arguments)),C=R,D=R,P,_;if(A>Un){var I=K_(A/d*Ti(L)),M=K_(A/g*Ti(L));(S-=I*2)>Un?(I*=y?1:-1,w+=I,k-=I):(S=0,w=k=(p+v)/2),(E-=M*2)>Un?(M*=y?1:-1,b+=M,T-=M):(E=0,b=T=(p+v)/2)}var O=g*Rs(b),N=g*Ti(b),B=d*Rs(k),z=d*Ti(k);if(R>Un){var F=g*Rs(T),V=g*Ti(T),G=d*Rs(w),Y=d*Ti(w),Q;if(m<Do)if(Q=hW(O,N,G,Y,F,V,B,z)){var K=O-Q[0],it=N-Q[1],ut=F-Q[0],q=V-Q[1],W=1/Ti(rW((K*ut+it*q)/(Dn(K*K+it*it)*Dn(ut*ut+q*q)))/2),H=Dn(Q[0]*Q[0]+Q[1]*Q[1]);C=C2(R,(d-H)/(W-1)),D=C2(R,(g-H)/(W+1))}else C=D=0}E>Un?D>Un?(P=Yp(G,Y,O,N,g,D,y),_=Yp(F,V,B,z,g,D,y),o.moveTo(P.cx+P.x01,P.cy+P.y01),D<R?o.arc(P.cx,P.cy,D,Gn(P.y01,P.x01),Gn(_.y01,_.x01),!y):(o.arc(P.cx,P.cy,D,Gn(P.y01,P.x01),Gn(P.y11,P.x11),!y),o.arc(0,0,g,Gn(P.cy+P.y11,P.cx+P.x11),Gn(_.cy+_.y11,_.cx+_.x11),!y),o.arc(_.cx,_.cy,D,Gn(_.y11,_.x11),Gn(_.y01,_.x01),!y))):(o.moveTo(O,N),o.arc(0,0,g,b,T,!y)):o.moveTo(O,N),!(d>Un)||!(S>Un)?o.lineTo(B,z):C>Un?(P=Yp(B,z,F,V,d,-C,y),_=Yp(O,N,G,Y,d,-C,y),o.lineTo(P.cx+P.x01,P.cy+P.y01),C<R?o.arc(P.cx,P.cy,C,Gn(P.y01,P.x01),Gn(_.y01,_.x01),!y):(o.arc(P.cx,P.cy,C,Gn(P.y01,P.x01),Gn(P.y11,P.x11),!y),o.arc(0,0,d,Gn(P.cy+P.y11,P.cx+P.x11),Gn(_.cy+_.y11,_.cx+_.x11),y),o.arc(_.cx,_.cy,C,Gn(_.y11,_.x11),Gn(_.y01,_.x01),!y))):o.arc(0,0,d,k,w,y)}if(o.closePath(),h)return o=null,h+""||null}return u.centroid=function(){var h=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Do/2;return[Rs(f)*h,Ti(f)*h]},u.innerRadius=function(h){return arguments.length?(e=typeof h=="function"?h:Oe(+h),u):e},u.outerRadius=function(h){return arguments.length?(t=typeof h=="function"?h:Oe(+h),u):t},u.cornerRadius=function(h){return arguments.length?(r=typeof h=="function"?h:Oe(+h),u):r},u.padRadius=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Oe(+h),u):n},u.startAngle=function(h){return arguments.length?(i=typeof h=="function"?h:Oe(+h),u):i},u.endAngle=function(h){return arguments.length?(a=typeof h=="function"?h:Oe(+h),u):a},u.padAngle=function(h){return arguments.length?(s=typeof h=="function"?h:Oe(+h),u):s},u.context=function(h){return arguments.length?(o=h??null,u):o},u}function Gm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function f6(e){this._context=e}f6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ag(e){return new f6(e)}function d6(e){return e[0]}function g6(e){return e[1]}function vh(e,t){var r=Oe(!0),n=null,i=ag,a=null,s=Vm(o);e=typeof e=="function"?e:e===void 0?d6:Oe(e),t=typeof t=="function"?t:t===void 0?g6:Oe(t);function o(l){var u,h=(l=Gm(l)).length,f,d=!1,g;for(n==null&&(a=i(g=s())),u=0;u<=h;++u)!(u<h&&r(f=l[u],u,l))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(f,u,l),+t(f,u,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:Oe(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:Oe(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Oe(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function bRt(e,t,r){var n=null,i=Oe(!0),a=null,s=ag,o=null,l=Vm(u);e=typeof e=="function"?e:e===void 0?d6:Oe(+e),t=typeof t=="function"?t:Oe(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?g6:Oe(+r);function u(f){var d,g,p,v=(f=Gm(f)).length,m,y=!1,b,T=new Array(v),w=new Array(v);for(a==null&&(o=s(b=l())),d=0;d<=v;++d){if(!(d<v&&i(m=f[d],d,f))===y)if(y=!y)g=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=d-1;p>=g;--p)o.point(T[p],w[p]);o.lineEnd(),o.areaEnd()}y&&(T[d]=+e(m,d,f),w[d]=+t(m,d,f),o.point(n?+n(m,d,f):T[d],r?+r(m,d,f):w[d]))}if(b)return o=null,b+""||null}function h(){return vh().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Oe(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Oe(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Oe(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Oe(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Oe(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Oe(+f),u):r},u.lineX0=u.lineY0=function(){return h().x(e).y(t)},u.lineY1=function(){return h().x(e).y(r)},u.lineX1=function(){return h().x(n).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Oe(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}function fW(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function dW(e){return e}function gW(){var e=dW,t=fW,r=null,n=Oe(0),i=Oe(So),a=Oe(0);function s(o){var l,u=(o=Gm(o)).length,h,f,d=0,g=new Array(u),p=new Array(u),v=+n.apply(this,arguments),m=Math.min(So,Math.max(-So,i.apply(this,arguments)-v)),y,b=Math.min(Math.abs(m)/u,a.apply(this,arguments)),T=b*(m<0?-1:1),w;for(l=0;l<u;++l)(w=p[g[l]=l]=+e(o[l],l,o))>0&&(d+=w);for(t!=null?g.sort(function(k,S){return t(p[k],p[S])}):r!=null&&g.sort(function(k,S){return r(o[k],o[S])}),l=0,f=d?(m-u*T)/d:0;l<u;++l,v=y)h=g[l],w=p[h],y=v+(w>0?w*f:0)+T,p[h]={data:o[h],index:l,value:w,startAngle:v,endAngle:y,padAngle:b};return p}return s.value=function(o){return arguments.length?(e=typeof o=="function"?o:Oe(+o),s):e},s.sortValues=function(o){return arguments.length?(t=o,r=null,s):t},s.sort=function(o){return arguments.length?(r=o,t=null,s):r},s.startAngle=function(o){return arguments.length?(n=typeof o=="function"?o:Oe(+o),s):n},s.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Oe(+o),s):i},s.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:Oe(+o),s):a},s}class p6{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function v6(e){return new p6(e,!0)}function m6(e){return new p6(e,!1)}const pW={draw(e,t){const r=Dn(t/Do);e.moveTo(r,0),e.arc(0,0,r,0,So)}},TRt={draw(e,t){const r=Dn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},y6=Dn(1/3),vW=y6*2,wRt={draw(e,t){const r=Dn(t/vW),n=r*y6;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},ERt={draw(e,t){const r=Dn(t),n=-r/2;e.rect(n,n,r,r)}},mW=.8908130915292852,x6=Ti(Do/10)/Ti(7*Do/10),yW=Ti(So/10)*x6,xW=-Rs(So/10)*x6,kRt={draw(e,t){const r=Dn(t*mW),n=yW*r,i=xW*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=So*a/5,o=Rs(s),l=Ti(s);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*i,l*n+o*i)}e.closePath()}},S2=Dn(3),CRt={draw(e,t){const r=-Dn(t/(S2*3));e.moveTo(0,r*2),e.lineTo(-S2*r,-r),e.lineTo(S2*r,-r),e.closePath()}},ea=-.5,ra=Dn(3)/2,TT=1/Dn(12),bW=(TT/2+1)*3,SRt={draw(e,t){const r=Dn(t/bW),n=r/2,i=r*TT,a=n,s=r*TT+r,o=-a,l=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo(ea*n-ra*i,ra*n+ea*i),e.lineTo(ea*a-ra*s,ra*a+ea*s),e.lineTo(ea*o-ra*l,ra*o+ea*l),e.lineTo(ea*n+ra*i,ea*i-ra*n),e.lineTo(ea*a+ra*s,ea*s-ra*a),e.lineTo(ea*o+ra*l,ea*l-ra*o),e.closePath()}};function _Rt(e,t){let r=null,n=Vm(i);e=typeof e=="function"?e:Oe(e||pW),t=typeof t=="function"?t:Oe(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Oe(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Oe(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Mo(){}function K1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Um(e){this._context=e}Um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:K1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:K1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uu(e){return new Um(e)}function b6(e){this._context=e}b6.prototype={areaStart:Mo,areaEnd:Mo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:K1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TW(e){return new b6(e)}function T6(e){this._context=e}T6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:K1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wW(e){return new T6(e)}function w6(e,t){this._basis=new Um(e),this._beta=t}w6.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n=e[0],i=t[0],a=e[r]-n,s=t[r]-i,o=-1,l;++o<=r;)l=o/r,this._basis.point(this._beta*e[o]+(1-this._beta)*(n+l*a),this._beta*t[o]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const EW=function e(t){function r(n){return t===1?new Um(n):new w6(n,t)}return r.beta=function(n){return e(+n)},r}(.85);function Z1(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function yk(e,t){this._context=e,this._k=(1-t)/6}yk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Z1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Z1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E6=function e(t){function r(n){return new yk(n,t)}return r.tension=function(n){return e(+n)},r}(0);function xk(e,t){this._context=e,this._k=(1-t)/6}xk.prototype={areaStart:Mo,areaEnd:Mo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Z1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kW=function e(t){function r(n){return new xk(n,t)}return r.tension=function(n){return e(+n)},r}(0);function bk(e,t){this._context=e,this._k=(1-t)/6}bk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Z1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const CW=function e(t){function r(n){return new bk(n,t)}return r.tension=function(n){return e(+n)},r}(0);function Tk(e,t,r){var n=e._x1,i=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Un){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Un){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*u+e._x1*e._l23_2a-t*e._l12_2a)/h,s=(s*u+e._y1*e._l23_2a-r*e._l12_2a)/h}e._context.bezierCurveTo(n,i,a,s,e._x2,e._y2)}function k6(e,t){this._context=e,this._alpha=t}k6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Tk(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const C6=function e(t){function r(n){return t?new k6(n,t):new yk(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function S6(e,t){this._context=e,this._alpha=t}S6.prototype={areaStart:Mo,areaEnd:Mo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Tk(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const SW=function e(t){function r(n){return t?new S6(n,t):new xk(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function _6(e,t){this._context=e,this._alpha=t}_6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Tk(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _W=function e(t){function r(n){return t?new _6(n,t):new bk(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function A6(e){this._context=e}A6.prototype={areaStart:Mo,areaEnd:Mo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function AW(e){return new A6(e)}function Z_(e){return e<0?-1:1}function Q_(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(Z_(a)+Z_(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function J_(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function _2(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function Q1(e){this._context=e}Q1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_2(this,this._t0,J_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_2(this,J_(this,r=Q_(this,e,t)),r);break;default:_2(this,this._t0,r=Q_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function L6(e){this._context=new R6(e)}(L6.prototype=Object.create(Q1.prototype)).point=function(e,t){Q1.prototype.point.call(this,t,e)};function R6(e){this._context=e}R6.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function I6(e){return new Q1(e)}function N6(e){return new L6(e)}function D6(e){this._context=e}D6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=tA(e),i=tA(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function tA(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function M6(e){return new D6(e)}function Wm(e,t){this._context=e,this._t=t}Wm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function O6(e){return new Wm(e,.5)}function P6(e){return new Wm(e,0)}function B6(e){return new Wm(e,1)}function sg(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,o=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function eA(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function LW(e,t){return e[t]}function RW(e){const t=[];return t.key=e,t}function ARt(){var e=Oe([]),t=eA,r=sg,n=LW;function i(a){var s=Array.from(e.apply(this,arguments),RW),o,l=s.length,u=-1,h;for(const f of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+n(f,s[o].key,u,a)]).data=f;for(o=0,h=Gm(t(s));o<l;++o)s[h[o]].index=o;return r(s,h),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Oe(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Oe(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?eA:typeof a=="function"?a:Oe(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??sg,i):r},i}function LRt(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}sg(e,t)}}function RRt(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}sg(e,t)}}function IRt(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,u=0;o<s;++o){for(var h=e[t[o]],f=h[n][1]||0,d=h[n-1][1]||0,g=(f-d)/2,p=0;p<o;++p){var v=e[t[p]],m=v[n][1]||0,y=v[n-1][1]||0;g+=m-y}l+=f,u+=g*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=u/l)}i[n-1][1]+=i[n-1][0]=r,sg(e,t)}}function _o(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wk(e){let t,r,n;e.length!==2?(t=_o,r=(o,l)=>_o(e(o),l),n=(o,l)=>e(o)-l):(t=e===_o||e===IW?e:NW,r=e,n=e);function i(o,l,u=0,h=o.length){if(u<h){if(t(l,l)!==0)return h;do{const f=u+h>>>1;r(o[f],l)<0?u=f+1:h=f}while(u<h)}return u}function a(o,l,u=0,h=o.length){if(u<h){if(t(l,l)!==0)return h;do{const f=u+h>>>1;r(o[f],l)<=0?u=f+1:h=f}while(u<h)}return u}function s(o,l,u=0,h=o.length){const f=i(o,l,u,h-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function NW(){return 0}function F6(e){return e===null?NaN:+e}function*DW(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const MW=wk(_o),jg=MW.right;wk(F6).center;class rA extends Map{constructor(t,r=BW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(nA(this,t))}has(t){return super.has(nA(this,t))}set(t,r){return super.set(OW(this,t),r)}delete(t){return super.delete(PW(this,t))}}function nA({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function OW({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function PW({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function BW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function FW(e=_o){if(e===_o)return $6;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function $6(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const $W=Math.sqrt(50),zW=Math.sqrt(10),VW=Math.sqrt(2);function J1(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=$W?10:a>=zW?5:a>=VW?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?J1(e,t,r*2):[o,l,u]}function wT(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?J1(t,e,r):J1(e,t,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function ET(e,t,r){return t=+t,e=+e,r=+r,J1(e,t,r)[2]}function kT(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?ET(t,e,r):ET(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function CT(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function ST(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function z6(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?$6:FW(i);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,h=Math.log(l),f=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(r,Math.floor(t-u*f/l+d)),p=Math.min(n,Math.floor(t+(l-u)*f/l+d));z6(e,t,g,p,i)}const a=e[t];let s=r,o=n;for(yf(e,r,t),i(e[n],a)>0&&yf(e,r,n);s<o;){for(yf(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}i(e[r],a)===0?yf(e,r,o):(++o,yf(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function yf(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function GW(e,t,r){if(e=Float64Array.from(DW(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return ST(e);if(t>=1)return CT(e);var n,i=(n-1)*t,a=Math.floor(i),s=CT(z6(e,a).subarray(0,a+1)),o=ST(e.subarray(a+1));return s+(o-s)*(i-a)}}function UW(e,t,r=F6){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return s+(o-s)*(i-a)}}function WW(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function wa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ao(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _T=Symbol("implicit");function Kg(){var e=new rA,t=[],r=[],n=_T;function i(a){let s=e.get(a);if(s===void 0){if(n!==_T)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new rA;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Kg(t,r).unknown(n)},wa.apply(i,arguments),i}function og(){var e=Kg().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,o=!1,l=0,u=0,h=.5;delete e.unknown;function f(){var d=t().length,g=i<n,p=g?i:n,v=g?n:i;a=(v-p)/Math.max(1,d-l+u*2),o&&(a=Math.floor(a)),p+=(v-p-a*(d-l))*h,s=a*(1-l),o&&(p=Math.round(p),s=Math.round(s));var m=WW(d).map(function(y){return p+a*y});return r(g?m.reverse():m)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([n,i]=d,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(d){return[n,i]=d,n=+n,i=+i,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(d){return arguments.length?(o=!!d,f()):o},e.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},e.align=function(d){return arguments.length?(h=Math.max(0,Math.min(1,d)),f()):h},e.copy=function(){return og(t(),[n,i]).round(o).paddingInner(l).paddingOuter(u).align(h)},wa.apply(f(),arguments)}function V6(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return V6(t())},e}function YW(){return V6(og.apply(null,arguments).paddingInner(1))}function Zg(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Ym(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function gc(){}var lg=.7,tv=1/lg,hu="\\s*([+-]?\\d+)\\s*",cg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ss="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HW=/^#([0-9a-f]{3,8})$/,qW=new RegExp(`^rgb\\(${hu},${hu},${hu}\\)$`),XW=new RegExp(`^rgb\\(${ss},${ss},${ss}\\)$`),jW=new RegExp(`^rgba\\(${hu},${hu},${hu},${cg}\\)$`),KW=new RegExp(`^rgba\\(${ss},${ss},${ss},${cg}\\)$`),ZW=new RegExp(`^hsl\\(${cg},${ss},${ss}\\)$`),QW=new RegExp(`^hsla\\(${cg},${ss},${ss},${cg}\\)$`),iA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zg(gc,Ul,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:aA,formatHex:aA,formatHex8:JW,formatHsl:tY,formatRgb:sA,toString:sA});function aA(){return this.rgb().formatHex()}function JW(){return this.rgb().formatHex8()}function tY(){return U6(this).formatHsl()}function sA(){return this.rgb().formatRgb()}function Ul(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=HW.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?oA(t):r===3?new Hn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Hp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Hp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qW.exec(e))?new Hn(t[1],t[2],t[3],1):(t=XW.exec(e))?new Hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jW.exec(e))?Hp(t[1],t[2],t[3],t[4]):(t=KW.exec(e))?Hp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ZW.exec(e))?uA(t[1],t[2]/100,t[3]/100,1):(t=QW.exec(e))?uA(t[1],t[2]/100,t[3]/100,t[4]):iA.hasOwnProperty(e)?oA(iA[e]):e==="transparent"?new Hn(NaN,NaN,NaN,0):null}function oA(e){return new Hn(e>>16&255,e>>8&255,e&255,1)}function Hp(e,t,r,n){return n<=0&&(e=t=r=NaN),new Hn(e,t,r,n)}function G6(e){return e instanceof gc||(e=Ul(e)),e?(e=e.rgb(),new Hn(e.r,e.g,e.b,e.opacity)):new Hn}function AT(e,t,r,n){return arguments.length===1?G6(e):new Hn(e,t,r,n??1)}function Hn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Zg(Hn,AT,Ym(gc,{brighter(e){return e=e==null?tv:Math.pow(tv,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lg:Math.pow(lg,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Hn(zl(this.r),zl(this.g),zl(this.b),ev(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lA,formatHex:lA,formatHex8:eY,formatRgb:cA,toString:cA}));function lA(){return`#${Rl(this.r)}${Rl(this.g)}${Rl(this.b)}`}function eY(){return`#${Rl(this.r)}${Rl(this.g)}${Rl(this.b)}${Rl((isNaN(this.opacity)?1:this.opacity)*255)}`}function cA(){const e=ev(this.opacity);return`${e===1?"rgb(":"rgba("}${zl(this.r)}, ${zl(this.g)}, ${zl(this.b)}${e===1?")":`, ${e})`}`}function ev(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Rl(e){return e=zl(e),(e<16?"0":"")+e.toString(16)}function uA(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Aa(e,t,r,n)}function U6(e){if(e instanceof Aa)return new Aa(e.h,e.s,e.l,e.opacity);if(e instanceof gc||(e=Ul(e)),!e)return new Aa;if(e instanceof Aa)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Aa(s,o,l,e.opacity)}function rY(e,t,r,n){return arguments.length===1?U6(e):new Aa(e,t,r,n??1)}function Aa(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Zg(Aa,rY,Ym(gc,{brighter(e){return e=e==null?tv:Math.pow(tv,e),new Aa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lg:Math.pow(lg,e),new Aa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Hn(A2(e>=240?e-240:e+120,i,n),A2(e,i,n),A2(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Aa(hA(this.h),qp(this.s),qp(this.l),ev(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ev(this.opacity);return`${e===1?"hsl(":"hsla("}${hA(this.h)}, ${qp(this.s)*100}%, ${qp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hA(e){return e=(e||0)%360,e<0?e+360:e}function qp(e){return Math.max(0,Math.min(1,e||0))}function A2(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const nY=Math.PI/180,iY=180/Math.PI,rv=18,W6=.96422,Y6=1,H6=.82521,q6=4/29,fu=6/29,X6=3*fu*fu,aY=fu*fu*fu;function j6(e){if(e instanceof os)return new os(e.l,e.a,e.b,e.opacity);if(e instanceof Ps)return K6(e);e instanceof Hn||(e=G6(e));var t=N2(e.r),r=N2(e.g),n=N2(e.b),i=L2((.2225045*t+.7168786*r+.0606169*n)/Y6),a,s;return t===r&&r===n?a=s=i:(a=L2((.4360747*t+.3850649*r+.1430804*n)/W6),s=L2((.0139322*t+.0971045*r+.7141733*n)/H6)),new os(116*i-16,500*(a-i),200*(i-s),e.opacity)}function sY(e,t,r,n){return arguments.length===1?j6(e):new os(e,t,r,n??1)}function os(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}Zg(os,sY,Ym(gc,{brighter(e){return new os(this.l+rv*(e??1),this.a,this.b,this.opacity)},darker(e){return new os(this.l-rv*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=W6*R2(t),e=Y6*R2(e),r=H6*R2(r),new Hn(I2(3.1338561*t-1.6168667*e-.4906146*r),I2(-.9787684*t+1.9161415*e+.033454*r),I2(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));function L2(e){return e>aY?Math.pow(e,1/3):e/X6+q6}function R2(e){return e>fu?e*e*e:X6*(e-q6)}function I2(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function N2(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function oY(e){if(e instanceof Ps)return new Ps(e.h,e.c,e.l,e.opacity);if(e instanceof os||(e=j6(e)),e.a===0&&e.b===0)return new Ps(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*iY;return new Ps(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function LT(e,t,r,n){return arguments.length===1?oY(e):new Ps(e,t,r,n??1)}function Ps(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}function K6(e){if(isNaN(e.h))return new os(e.l,0,0,e.opacity);var t=e.h*nY;return new os(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Zg(Ps,LT,Ym(gc,{brighter(e){return new Ps(this.h,this.c,this.l+rv*(e??1),this.opacity)},darker(e){return new Ps(this.h,this.c,this.l-rv*(e??1),this.opacity)},rgb(){return K6(this).rgb()}}));const Hm=e=>()=>e;function Z6(e,t){return function(r){return e+r*t}}function lY(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function cY(e,t){var r=t-e;return r?Z6(e,r>180||r<-180?r-360*Math.round(r/360):r):Hm(isNaN(e)?t:e)}function uY(e){return(e=+e)==1?Yd:function(t,r){return r-t?lY(t,r,e):Hm(isNaN(t)?r:t)}}function Yd(e,t){var r=t-e;return r?Z6(e,r):Hm(isNaN(e)?t:e)}const nv=function e(t){var r=uY(t);function n(i,a){var s=r((i=AT(i)).r,(a=AT(a)).r),o=r(i.g,a.g),l=r(i.b,a.b),u=Yd(i.opacity,a.opacity);return function(h){return i.r=s(h),i.g=o(h),i.b=l(h),i.opacity=u(h),i+""}}return n.gamma=e,n}(1);function hY(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function fY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function dY(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=Xh(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function gY(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function _a(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function pY(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Xh(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var RT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,D2=new RegExp(RT.source,"g");function vY(e){return function(){return e}}function mY(e){return function(t){return e(t)+""}}function Q6(e,t){var r=RT.lastIndex=D2.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(n=RT.exec(e))&&(i=D2.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:_a(n,i)})),r=D2.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?mY(l[0].x):vY(t):(t=l.length,function(u){for(var h=0,f;h<t;++h)o[(f=l[h]).i]=f.x(u);return o.join("")})}function Xh(e,t){var r=typeof t,n;return t==null||r==="boolean"?Hm(t):(r==="number"?_a:r==="string"?(n=Ul(t))?(t=n,nv):Q6:t instanceof Ul?nv:t instanceof Date?gY:fY(t)?hY:Array.isArray(t)?dY:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pY:_a)(e,t)}function Ek(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var fA=180/Math.PI,IT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function J6(e,t,r,n,i,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),e*n<t*r&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*fA,skewX:Math.atan(l)*fA,scaleX:s,scaleY:o}}var Xp;function yY(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?IT:J6(t.a,t.b,t.c,t.d,t.e,t.f)}function xY(e){return e==null||(Xp||(Xp=document.createElementNS("http://www.w3.org/2000/svg","g")),Xp.setAttribute("transform",e),!(e=Xp.transform.baseVal.consolidate()))?IT:(e=e.matrix,J6(e.a,e.b,e.c,e.d,e.e,e.f))}function tD(e,t,r,n){function i(u){return u.length?u.pop()+" ":""}function a(u,h,f,d,g,p){if(u!==f||h!==d){var v=g.push("translate(",null,t,null,r);p.push({i:v-4,x:_a(u,f)},{i:v-2,x:_a(h,d)})}else(f||d)&&g.push("translate("+f+t+d+r)}function s(u,h,f,d){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,n)-2,x:_a(u,h)})):h&&f.push(i(f)+"rotate("+h+n)}function o(u,h,f,d){u!==h?d.push({i:f.push(i(f)+"skewX(",null,n)-2,x:_a(u,h)}):h&&f.push(i(f)+"skewX("+h+n)}function l(u,h,f,d,g,p){if(u!==f||h!==d){var v=g.push(i(g)+"scale(",null,",",null,")");p.push({i:v-4,x:_a(u,f)},{i:v-2,x:_a(h,d)})}else(f!==1||d!==1)&&g.push(i(g)+"scale("+f+","+d+")")}return function(u,h){var f=[],d=[];return u=e(u),h=e(h),a(u.translateX,u.translateY,h.translateX,h.translateY,f,d),s(u.rotate,h.rotate,f,d),o(u.skewX,h.skewX,f,d),l(u.scaleX,u.scaleY,h.scaleX,h.scaleY,f,d),u=h=null,function(g){for(var p=-1,v=d.length,m;++p<v;)f[(m=d[p]).i]=m.x(g);return f.join("")}}}var bY=tD(yY,"px, ","px)","deg)"),TY=tD(xY,", ",")",")");function wY(e){return function(t,r){var n=e((t=LT(t)).h,(r=LT(r)).h),i=Yd(t.c,r.c),a=Yd(t.l,r.l),s=Yd(t.opacity,r.opacity);return function(o){return t.h=n(o),t.c=i(o),t.l=a(o),t.opacity=s(o),t+""}}}const EY=wY(cY);function kY(e,t){t===void 0&&(t=e,e=Xh);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function CY(e){return function(){return e}}function iv(e){return+e}var dA=[0,1];function si(e){return e}function NT(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:CY(isNaN(t)?NaN:.5)}function SY(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function _Y(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=NT(i,n),a=r(s,a)):(n=NT(n,i),a=r(a,s)),function(o){return a(n(o))}}function AY(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=NT(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(o){var l=jg(e,o,1,n)-1;return a[l](i[l](o))}}function Qg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function qm(){var e=dA,t=dA,r=Xh,n,i,a,s=si,o,l,u;function h(){var d=Math.min(e.length,t.length);return s!==si&&(s=SY(e[0],e[d-1])),o=d>2?AY:_Y,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?a:(l||(l=o(e.map(n),t,r)))(n(s(d)))}return f.invert=function(d){return s(i((u||(u=o(t,e.map(n),_a)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,iv),h()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),h()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),r=Ek,h()},f.clamp=function(d){return arguments.length?(s=d?!0:si,h()):s!==si},f.interpolate=function(d){return arguments.length?(r=d,h()):r},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,g){return n=d,i=g,h()}}function kk(){return qm()(si,si)}function LY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function av(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function mh(e){return e=av(Math.abs(e)),e?e[1]:NaN}function RY(e,t){return function(r,n){for(var i=r.length,a=[],s=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function IY(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var NY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ug(e){if(!(t=NY.exec(e)))throw new Error("invalid format: "+e);var t;return new Ck({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ug.prototype=Ck.prototype;function Ck(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ck.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function DY(e){t:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break t;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var eD;function MY(e,t){var r=av(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(eD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+av(e,Math.max(0,t+a-1))[0]}function gA(e,t){var r=av(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const pA={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:LY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gA(e*100,t),r:gA,s:MY,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vA(e){return e}var mA=Array.prototype.map,yA=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function OY(e){var t=e.grouping===void 0||e.thousands===void 0?vA:RY(mA.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?vA:IY(mA.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=ug(f);var d=f.fill,g=f.align,p=f.sign,v=f.symbol,m=f.zero,y=f.width,b=f.comma,T=f.precision,w=f.trim,k=f.type;k==="n"?(b=!0,k="g"):pA[k]||(T===void 0&&(T=12),w=!0,k="g"),(m||d==="0"&&g==="=")&&(m=!0,d="0",g="=");var S=v==="$"?r:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=v==="$"?n:/[%p]/.test(k)?s:"",L=pA[k],A=/[defgprs%]/.test(k);T=T===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function R(C){var D=S,P=E,_,I,M;if(k==="c")P=L(C)+P,C="";else{C=+C;var O=C<0||1/C<0;if(C=isNaN(C)?l:L(Math.abs(C),T),w&&(C=DY(C)),O&&+C==0&&p!=="+"&&(O=!1),D=(O?p==="("?p:o:p==="-"||p==="("?"":p)+D,P=(k==="s"?yA[8+eD/3]:"")+P+(O&&p==="("?")":""),A){for(_=-1,I=C.length;++_<I;)if(M=C.charCodeAt(_),48>M||M>57){P=(M===46?i+C.slice(_+1):C.slice(_))+P,C=C.slice(0,_);break}}}b&&!m&&(C=t(C,1/0));var N=D.length+C.length+P.length,B=N<y?new Array(y-N+1).join(d):"";switch(b&&m&&(C=t(B+C,B.length?y-P.length:1/0),B=""),g){case"<":C=D+C+P+B;break;case"=":C=D+B+C+P;break;case"^":C=B.slice(0,N=B.length>>1)+D+C+P+B.slice(N);break;default:C=B+D+C+P;break}return a(C)}return R.toString=function(){return f+""},R}function h(f,d){var g=u((f=ug(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mh(d)/3)))*3,v=Math.pow(10,-p),m=yA[8+p/3];return function(y){return g(v*y)+m}}return{format:u,formatPrefix:h}}var jp,Sk,rD;PY({thousands:",",grouping:[3],currency:["$",""]});function PY(e){return jp=OY(e),Sk=jp.format,rD=jp.formatPrefix,jp}function BY(e){return Math.max(0,-mh(Math.abs(e)))}function FY(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mh(t)/3)))*3-mh(Math.abs(e)))}function $Y(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mh(t)-mh(e))+1}function nD(e,t,r,n){var i=kT(e,t,r),a;switch(n=ug(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=FY(i,s))&&(n.precision=a),rD(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=$Y(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=BY(i))&&(n.precision=a-(n.type==="%")*2);break}}return Sk(n)}function Zo(e){var t=e.domain;return e.ticks=function(r){var n=t();return wT(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return nD(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],o=n[a],l,u,h=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);h-- >0;){if(u=ET(s,o,r),u===l)return n[i]=s,n[a]=o,t(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function Wl(){var e=kk();return e.copy=function(){return Qg(e,Wl())},wa.apply(e,arguments),Zo(e)}function iD(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,iv),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return iD(e).unknown(t)},e=arguments.length?Array.from(e,iv):[0,1],Zo(r)}function aD(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function xA(e){return Math.log(e)}function bA(e){return Math.exp(e)}function zY(e){return-Math.log(-e)}function VY(e){return-Math.exp(-e)}function GY(e){return isFinite(e)?+("1e"+e):e<0?0:e}function UY(e){return e===10?GY:e===Math.E?Math.exp:t=>Math.pow(e,t)}function WY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function TA(e){return(t,r)=>-e(-t,r)}function _k(e){const t=e(xA,bA),r=t.domain;let n=10,i,a;function s(){return i=WY(n),a=UY(n),r()[0]<0?(i=TA(i),a=TA(a),e(zY,VY)):e(xA,bA),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const l=r();let u=l[0],h=l[l.length-1];const f=h<u;f&&([u,h]=[h,u]);let d=i(u),g=i(h),p,v;const m=o==null?10:+o;let y=[];if(!(n%1)&&g-d<m){if(d=Math.floor(d),g=Math.ceil(g),u>0){for(;d<=g;++d)for(p=1;p<n;++p)if(v=d<0?p/a(-d):p*a(d),!(v<u)){if(v>h)break;y.push(v)}}else for(;d<=g;++d)for(p=n-1;p>=1;--p)if(v=d>0?p/a(-d):p*a(d),!(v<u)){if(v>h)break;y.push(v)}y.length*2<m&&(y=wT(u,h,m))}else y=wT(d,g,Math.min(g-d,m)).map(a);return f?y.reverse():y},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=ug(l)).precision==null&&(l.trim=!0),l=Sk(l)),o===1/0)return l;const u=Math.max(1,n*o/t.ticks().length);return h=>{let f=h/a(Math.round(i(h)));return f*n<n-.5&&(f*=n),f<=u?l(h):""}},t.nice=()=>r(aD(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function sD(){const e=_k(qm()).domain([1,10]);return e.copy=()=>Qg(e,sD()).base(e.base()),wa.apply(e,arguments),e}function wA(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function EA(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ak(e){var t=1,r=e(wA(t),EA(t));return r.constant=function(n){return arguments.length?e(wA(t=+n),EA(t)):t},Zo(r)}function oD(){var e=Ak(qm());return e.copy=function(){return Qg(e,oD()).constant(e.constant())},wa.apply(e,arguments)}function kA(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function YY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function HY(e){return e<0?-e*e:e*e}function Lk(e){var t=e(si,si),r=1;function n(){return r===1?e(si,si):r===.5?e(YY,HY):e(kA(r),kA(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Zo(t)}function Rk(){var e=Lk(qm());return e.copy=function(){return Qg(e,Rk()).exponent(e.exponent())},wa.apply(e,arguments),e}function qY(){return Rk.apply(null,arguments).exponent(.5)}function CA(e){return Math.sign(e)*e*e}function XY(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function lD(){var e=kk(),t=[0,1],r=!1,n;function i(a){var s=XY(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(CA(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,iv)).map(CA)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return lD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},wa.apply(i,arguments),Zo(i)}function cD(){var e=[],t=[],r=[],n;function i(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=UW(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:t[jg(r,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(_o),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return cD().domain(e).range(t).unknown(n)},wa.apply(a,arguments)}function uD(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[jg(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return uD().domain([e,t]).range(i).unknown(a)},wa.apply(Zo(s),arguments)}function hD(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[jg(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return hD().domain(e).range(t).unknown(r)},wa.apply(i,arguments)}const M2=new Date,O2=new Date;function fn(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<s);return l},i.filter=a=>fn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(M2.setTime(+a),O2.setTime(+s),e(M2),e(O2),Math.floor(r(M2,O2))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const yh=fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);yh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):yh);yh.range;const Bs=1e3,fa=Bs*60,Fs=fa*60,js=Fs*24,Ik=js*7,SA=js*30,P2=js*365,$s=fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Bs)},(e,t)=>(t-e)/Bs,e=>e.getUTCSeconds());$s.range;const hg=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bs)},(e,t)=>{e.setTime(+e+t*fa)},(e,t)=>(t-e)/fa,e=>e.getMinutes());hg.range;const Nk=fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fa)},(e,t)=>(t-e)/fa,e=>e.getUTCMinutes());Nk.range;const fg=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bs-e.getMinutes()*fa)},(e,t)=>{e.setTime(+e+t*Fs)},(e,t)=>(t-e)/Fs,e=>e.getHours());fg.range;const Dk=fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Fs)},(e,t)=>(t-e)/Fs,e=>e.getUTCHours());Dk.range;const Yl=fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fa)/js,e=>e.getDate()-1);Yl.range;const Xm=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/js,e=>e.getUTCDate()-1);Xm.range;const fD=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/js,e=>Math.floor(e/js));fD.range;function pc(e){return fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*fa)/Ik)}const Jg=pc(0),dg=pc(1),dD=pc(2),gD=pc(3),Hl=pc(4),pD=pc(5),vD=pc(6);Jg.range;dg.range;dD.range;gD.range;Hl.range;pD.range;vD.range;function vc(e){return fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Ik)}const jm=vc(0),sv=vc(1),jY=vc(2),KY=vc(3),xh=vc(4),ZY=vc(5),QY=vc(6);jm.range;sv.range;jY.range;KY.range;xh.range;ZY.range;QY.range;const gg=fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());gg.range;const Mk=fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Mk.range;const Ks=fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ks.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ks.range;const Zs=fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Zs.range;function mD(e,t,r,n,i,a){const s=[[$s,1,Bs],[$s,5,5*Bs],[$s,15,15*Bs],[$s,30,30*Bs],[a,1,fa],[a,5,5*fa],[a,15,15*fa],[a,30,30*fa],[i,1,Fs],[i,3,3*Fs],[i,6,6*Fs],[i,12,12*Fs],[n,1,js],[n,2,2*js],[r,1,Ik],[t,1,SA],[t,3,3*SA],[e,1,P2]];function o(u,h,f){const d=h<u;d&&([u,h]=[h,u]);const g=f&&typeof f.range=="function"?f:l(u,h,f),p=g?g.range(u,+h+1):[];return d?p.reverse():p}function l(u,h,f){const d=Math.abs(h-u)/f,g=wk(([,,m])=>m).right(s,d);if(g===s.length)return e.every(kT(u/P2,h/P2,f));if(g===0)return yh.every(Math.max(kT(u,h,f),1));const[p,v]=s[d/s[g-1][2]<s[g][2]/d?g-1:g];return p.every(v)}return[o,l]}const[JY,tH]=mD(Zs,Mk,jm,fD,Dk,Nk),[eH,rH]=mD(Ks,gg,Jg,Yl,fg,hg);function B2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function F2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xf(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function nH(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,u=bf(i),h=Tf(i),f=bf(a),d=Tf(a),g=bf(s),p=Tf(s),v=bf(o),m=Tf(o),y=bf(l),b=Tf(l),T={a:O,A:N,b:B,B:z,c:null,d:NA,e:NA,f:SH,g:PH,G:FH,H:EH,I:kH,j:CH,L:yD,m:_H,M:AH,p:F,q:V,Q:OA,s:PA,S:LH,u:RH,U:IH,V:NH,w:DH,W:MH,x:null,X:null,y:OH,Y:BH,Z:$H,"%":MA},w={a:G,A:Y,b:Q,B:K,c:null,d:DA,e:DA,f:UH,g:JH,G:eq,H:zH,I:VH,j:GH,L:bD,m:WH,M:YH,p:it,q:ut,Q:OA,s:PA,S:HH,u:qH,U:XH,V:jH,w:KH,W:ZH,x:null,X:null,y:QH,Y:tq,Z:rq,"%":MA},k={a:R,A:C,b:D,B:P,c:_,d:RA,e:RA,f:xH,g:LA,G:AA,H:IA,I:IA,j:pH,L:yH,m:gH,M:vH,p:A,q:dH,Q:TH,s:wH,S:mH,u:lH,U:cH,V:uH,w:oH,W:hH,x:I,X:M,y:LA,Y:AA,Z:fH,"%":bH};T.x=S(r,T),T.X=S(n,T),T.c=S(t,T),w.x=S(r,w),w.X=S(n,w),w.c=S(t,w);function S(q,W){return function(H){var U=[],X=-1,J=0,j=q.length,gt,at,tt;for(H instanceof Date||(H=new Date(+H));++X<j;)q.charCodeAt(X)===37&&(U.push(q.slice(J,X)),(at=_A[gt=q.charAt(++X)])!=null?gt=q.charAt(++X):at=gt==="e"?" ":"0",(tt=W[gt])&&(gt=tt(H,at)),U.push(gt),J=X+1);return U.push(q.slice(J,X)),U.join("")}}function E(q,W){return function(H){var U=xf(1900,void 0,1),X=L(U,q,H+="",0),J,j;if(X!=H.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(W&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(J=F2(xf(U.y,0,1)),j=J.getUTCDay(),J=j>4||j===0?sv.ceil(J):sv(J),J=Xm.offset(J,(U.V-1)*7),U.y=J.getUTCFullYear(),U.m=J.getUTCMonth(),U.d=J.getUTCDate()+(U.w+6)%7):(J=B2(xf(U.y,0,1)),j=J.getDay(),J=j>4||j===0?dg.ceil(J):dg(J),J=Yl.offset(J,(U.V-1)*7),U.y=J.getFullYear(),U.m=J.getMonth(),U.d=J.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),j="Z"in U?F2(xf(U.y,0,1)).getUTCDay():B2(xf(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(j+5)%7:U.w+U.U*7-(j+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,F2(U)):B2(U)}}function L(q,W,H,U){for(var X=0,J=W.length,j=H.length,gt,at;X<J;){if(U>=j)return-1;if(gt=W.charCodeAt(X++),gt===37){if(gt=W.charAt(X++),at=k[gt in _A?W.charAt(X++):gt],!at||(U=at(q,H,U))<0)return-1}else if(gt!=H.charCodeAt(U++))return-1}return U}function A(q,W,H){var U=u.exec(W.slice(H));return U?(q.p=h.get(U[0].toLowerCase()),H+U[0].length):-1}function R(q,W,H){var U=g.exec(W.slice(H));return U?(q.w=p.get(U[0].toLowerCase()),H+U[0].length):-1}function C(q,W,H){var U=f.exec(W.slice(H));return U?(q.w=d.get(U[0].toLowerCase()),H+U[0].length):-1}function D(q,W,H){var U=y.exec(W.slice(H));return U?(q.m=b.get(U[0].toLowerCase()),H+U[0].length):-1}function P(q,W,H){var U=v.exec(W.slice(H));return U?(q.m=m.get(U[0].toLowerCase()),H+U[0].length):-1}function _(q,W,H){return L(q,t,W,H)}function I(q,W,H){return L(q,r,W,H)}function M(q,W,H){return L(q,n,W,H)}function O(q){return s[q.getDay()]}function N(q){return a[q.getDay()]}function B(q){return l[q.getMonth()]}function z(q){return o[q.getMonth()]}function F(q){return i[+(q.getHours()>=12)]}function V(q){return 1+~~(q.getMonth()/3)}function G(q){return s[q.getUTCDay()]}function Y(q){return a[q.getUTCDay()]}function Q(q){return l[q.getUTCMonth()]}function K(q){return o[q.getUTCMonth()]}function it(q){return i[+(q.getUTCHours()>=12)]}function ut(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var W=S(q+="",T);return W.toString=function(){return q},W},parse:function(q){var W=E(q+="",!1);return W.toString=function(){return q},W},utcFormat:function(q){var W=S(q+="",w);return W.toString=function(){return q},W},utcParse:function(q){var W=E(q+="",!0);return W.toString=function(){return q},W}}}var _A={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,iH=/^%/,aH=/[\\^$*+?|[\]().{}]/g;function er(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function sH(e){return e.replace(aH,"\\$&")}function bf(e){return new RegExp("^(?:"+e.map(sH).join("|")+")","i")}function Tf(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function oH(e,t,r){var n=Tn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function lH(e,t,r){var n=Tn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function cH(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function uH(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function hH(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function AA(e,t,r){var n=Tn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function LA(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function fH(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function dH(e,t,r){var n=Tn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function gH(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function RA(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function pH(e,t,r){var n=Tn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function IA(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function vH(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function mH(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function yH(e,t,r){var n=Tn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function xH(e,t,r){var n=Tn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function bH(e,t,r){var n=iH.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function TH(e,t,r){var n=Tn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function wH(e,t,r){var n=Tn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function NA(e,t){return er(e.getDate(),t,2)}function EH(e,t){return er(e.getHours(),t,2)}function kH(e,t){return er(e.getHours()%12||12,t,2)}function CH(e,t){return er(1+Yl.count(Ks(e),e),t,3)}function yD(e,t){return er(e.getMilliseconds(),t,3)}function SH(e,t){return yD(e,t)+"000"}function _H(e,t){return er(e.getMonth()+1,t,2)}function AH(e,t){return er(e.getMinutes(),t,2)}function LH(e,t){return er(e.getSeconds(),t,2)}function RH(e){var t=e.getDay();return t===0?7:t}function IH(e,t){return er(Jg.count(Ks(e)-1,e),t,2)}function xD(e){var t=e.getDay();return t>=4||t===0?Hl(e):Hl.ceil(e)}function NH(e,t){return e=xD(e),er(Hl.count(Ks(e),e)+(Ks(e).getDay()===4),t,2)}function DH(e){return e.getDay()}function MH(e,t){return er(dg.count(Ks(e)-1,e),t,2)}function OH(e,t){return er(e.getFullYear()%100,t,2)}function PH(e,t){return e=xD(e),er(e.getFullYear()%100,t,2)}function BH(e,t){return er(e.getFullYear()%1e4,t,4)}function FH(e,t){var r=e.getDay();return e=r>=4||r===0?Hl(e):Hl.ceil(e),er(e.getFullYear()%1e4,t,4)}function $H(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+er(t/60|0,"0",2)+er(t%60,"0",2)}function DA(e,t){return er(e.getUTCDate(),t,2)}function zH(e,t){return er(e.getUTCHours(),t,2)}function VH(e,t){return er(e.getUTCHours()%12||12,t,2)}function GH(e,t){return er(1+Xm.count(Zs(e),e),t,3)}function bD(e,t){return er(e.getUTCMilliseconds(),t,3)}function UH(e,t){return bD(e,t)+"000"}function WH(e,t){return er(e.getUTCMonth()+1,t,2)}function YH(e,t){return er(e.getUTCMinutes(),t,2)}function HH(e,t){return er(e.getUTCSeconds(),t,2)}function qH(e){var t=e.getUTCDay();return t===0?7:t}function XH(e,t){return er(jm.count(Zs(e)-1,e),t,2)}function TD(e){var t=e.getUTCDay();return t>=4||t===0?xh(e):xh.ceil(e)}function jH(e,t){return e=TD(e),er(xh.count(Zs(e),e)+(Zs(e).getUTCDay()===4),t,2)}function KH(e){return e.getUTCDay()}function ZH(e,t){return er(sv.count(Zs(e)-1,e),t,2)}function QH(e,t){return er(e.getUTCFullYear()%100,t,2)}function JH(e,t){return e=TD(e),er(e.getUTCFullYear()%100,t,2)}function tq(e,t){return er(e.getUTCFullYear()%1e4,t,4)}function eq(e,t){var r=e.getUTCDay();return e=r>=4||r===0?xh(e):xh.ceil(e),er(e.getUTCFullYear()%1e4,t,4)}function rq(){return"+0000"}function MA(){return"%"}function OA(e){return+e}function PA(e){return Math.floor(+e/1e3)}var Fc,ov,wD;nq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nq(e){return Fc=nH(e),ov=Fc.format,Fc.parse,wD=Fc.utcFormat,Fc.utcParse,Fc}function iq(e){return new Date(e)}function aq(e){return e instanceof Date?+e:+new Date(+e)}function Ok(e,t,r,n,i,a,s,o,l,u){var h=kk(),f=h.invert,d=h.domain,g=u(".%L"),p=u(":%S"),v=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),b=u("%b %d"),T=u("%B"),w=u("%Y");function k(S){return(l(S)<S?g:o(S)<S?p:s(S)<S?v:a(S)<S?m:n(S)<S?i(S)<S?y:b:r(S)<S?T:w)(S)}return h.invert=function(S){return new Date(f(S))},h.domain=function(S){return arguments.length?d(Array.from(S,aq)):d().map(iq)},h.ticks=function(S){var E=d();return e(E[0],E[E.length-1],S??10)},h.tickFormat=function(S,E){return E==null?k:u(E)},h.nice=function(S){var E=d();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?d(aD(E,S)):h},h.copy=function(){return Qg(h,Ok(e,t,r,n,i,a,s,o,l,u))},h}function ED(){return wa.apply(Ok(eH,rH,Ks,gg,Jg,Yl,fg,hg,$s,ov).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sq(){return wa.apply(Ok(JY,tH,Zs,Mk,jm,Xm,Dk,Nk,$s,wD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Km(){var e=0,t=1,r,n,i,a,s=si,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function h(f){return function(d){var g,p;return arguments.length?([g,p]=d,s=f(g,p),u):[s(0),s(1)]}}return u.range=h(Xh),u.rangeRound=h(Ek),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,r=f(e),n=f(t),i=r===n?0:1/(n-r),u}}function Qo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function kD(){var e=Zo(Km()(si));return e.copy=function(){return Qo(e,kD())},ao.apply(e,arguments)}function CD(){var e=_k(Km()).domain([1,10]);return e.copy=function(){return Qo(e,CD()).base(e.base())},ao.apply(e,arguments)}function SD(){var e=Ak(Km());return e.copy=function(){return Qo(e,SD()).constant(e.constant())},ao.apply(e,arguments)}function Pk(){var e=Lk(Km());return e.copy=function(){return Qo(e,Pk()).exponent(e.exponent())},ao.apply(e,arguments)}function oq(){return Pk.apply(null,arguments).exponent(.5)}function _D(){var e=[],t=si;function r(n){if(n!=null&&!isNaN(n=+n))return t((jg(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(_o),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>GW(e,a/n))},r.copy=function(){return _D(t).domain(e)},ao.apply(r,arguments)}function Zm(){var e=0,t=.5,r=1,n=1,i,a,s,o,l,u=si,h,f=!1,d;function g(v){return isNaN(v=+v)?d:(v=.5+((v=+h(v))-a)*(n*v<n*a?o:l),u(f?Math.max(0,Math.min(1,v)):v))}g.domain=function(v){return arguments.length?([e,t,r]=v,i=h(e=+e),a=h(t=+t),s=h(r=+r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,g):[e,t,r]},g.clamp=function(v){return arguments.length?(f=!!v,g):f},g.interpolator=function(v){return arguments.length?(u=v,g):u};function p(v){return function(m){var y,b,T;return arguments.length?([y,b,T]=m,u=kY(v,[y,b,T]),g):[u(0),u(.5),u(1)]}}return g.range=p(Xh),g.rangeRound=p(Ek),g.unknown=function(v){return arguments.length?(d=v,g):d},function(v){return h=v,i=v(e),a=v(t),s=v(r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,g}}function AD(){var e=Zo(Zm()(si));return e.copy=function(){return Qo(e,AD())},ao.apply(e,arguments)}function LD(){var e=_k(Zm()).domain([.1,1,10]);return e.copy=function(){return Qo(e,LD()).base(e.base())},ao.apply(e,arguments)}function RD(){var e=Ak(Zm());return e.copy=function(){return Qo(e,RD()).constant(e.constant())},ao.apply(e,arguments)}function Bk(){var e=Lk(Zm());return e.copy=function(){return Qo(e,Bk()).exponent(e.exponent())},ao.apply(e,arguments)}function lq(){return Bk.apply(null,arguments).exponent(.5)}const NRt=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:og,scaleDiverging:AD,scaleDivergingLog:LD,scaleDivergingPow:Bk,scaleDivergingSqrt:lq,scaleDivergingSymlog:RD,scaleIdentity:iD,scaleImplicit:_T,scaleLinear:Wl,scaleLog:sD,scaleOrdinal:Kg,scalePoint:YW,scalePow:Rk,scaleQuantile:cD,scaleQuantize:uD,scaleRadial:lD,scaleSequential:kD,scaleSequentialLog:CD,scaleSequentialPow:Pk,scaleSequentialQuantile:_D,scaleSequentialSqrt:oq,scaleSequentialSymlog:SD,scaleSqrt:qY,scaleSymlog:oD,scaleThreshold:hD,scaleTime:ED,scaleUtc:sq,tickFormat:nD},Symbol.toStringTag,{value:"Module"})),cq="modulepreload",uq=function(e,t){return new URL(e,t).href},BA={},je=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){let s=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=s(r.map(h=>{if(h=uq(h,n),h in BA)return;BA[h]=!0;const f=h.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(!!n)for(let v=o.length-1;v>=0;v--){const m=o[v];if(m.href===h&&(!f||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${d}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":cq,f||(p.as="script"),p.crossOrigin="",p.href=h,u&&p.setAttribute("nonce",u),document.head.appendChild(p),f)return new Promise((v,m)=>{p.addEventListener("load",v),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};var W0={exports:{}},hq=W0.exports,FA;function fq(){return FA||(FA=1,function(e,t){(function(r,n){e.exports=n()})(hq,function(){var r=1e3,n=6e4,i=36e5,a="millisecond",s="second",o="minute",l="hour",u="day",h="week",f="month",d="quarter",g="year",p="date",v="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_){var I=["th","st","nd","rd"],M=_%100;return"["+_+(I[(M-20)%10]||I[M]||I[0])+"]"}},T=function(_,I,M){var O=String(_);return!O||O.length>=I?_:""+Array(I+1-O.length).join(M)+_},w={s:T,z:function(_){var I=-_.utcOffset(),M=Math.abs(I),O=Math.floor(M/60),N=M%60;return(I<=0?"+":"-")+T(O,2,"0")+":"+T(N,2,"0")},m:function _(I,M){if(I.date()<M.date())return-_(M,I);var O=12*(M.year()-I.year())+(M.month()-I.month()),N=I.clone().add(O,f),B=M-N<0,z=I.clone().add(O+(B?-1:1),f);return+(-(O+(M-N)/(B?N-z:z-N))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:f,y:g,w:h,d:u,D:p,h:l,m:o,s,ms:a,Q:d}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},k="en",S={};S[k]=b;var E="$isDayjsObject",L=function(_){return _ instanceof D||!(!_||!_[E])},A=function _(I,M,O){var N;if(!I)return k;if(typeof I=="string"){var B=I.toLowerCase();S[B]&&(N=B),M&&(S[B]=M,N=B);var z=I.split("-");if(!N&&z.length>1)return _(z[0])}else{var F=I.name;S[F]=I,N=F}return!O&&N&&(k=N),N||!O&&k},R=function(_,I){if(L(_))return _.clone();var M=typeof I=="object"?I:{};return M.date=_,M.args=arguments,new D(M)},C=w;C.l=A,C.i=L,C.w=function(_,I){return R(_,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var D=function(){function _(M){this.$L=A(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[E]=!0}var I=_.prototype;return I.parse=function(M){this.$d=function(O){var N=O.date,B=O.utc;if(N===null)return new Date(NaN);if(C.u(N))return new Date;if(N instanceof Date)return new Date(N);if(typeof N=="string"&&!/Z$/i.test(N)){var z=N.match(m);if(z){var F=z[2]-1||0,V=(z[7]||"0").substring(0,3);return B?new Date(Date.UTC(z[1],F,z[3]||1,z[4]||0,z[5]||0,z[6]||0,V)):new Date(z[1],F,z[3]||1,z[4]||0,z[5]||0,z[6]||0,V)}}return new Date(N)}(M),this.init()},I.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},I.$utils=function(){return C},I.isValid=function(){return this.$d.toString()!==v},I.isSame=function(M,O){var N=R(M);return this.startOf(O)<=N&&N<=this.endOf(O)},I.isAfter=function(M,O){return R(M)<this.startOf(O)},I.isBefore=function(M,O){return this.endOf(O)<R(M)},I.$g=function(M,O,N){return C.u(M)?this[O]:this.set(N,M)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(M,O){var N=this,B=!!C.u(O)||O,z=C.p(M),F=function(q,W){var H=C.w(N.$u?Date.UTC(N.$y,W,q):new Date(N.$y,W,q),N);return B?H:H.endOf(u)},V=function(q,W){return C.w(N.toDate()[q].apply(N.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(W)),N)},G=this.$W,Y=this.$M,Q=this.$D,K="set"+(this.$u?"UTC":"");switch(z){case g:return B?F(1,0):F(31,11);case f:return B?F(1,Y):F(0,Y+1);case h:var it=this.$locale().weekStart||0,ut=(G<it?G+7:G)-it;return F(B?Q-ut:Q+(6-ut),Y);case u:case p:return V(K+"Hours",0);case l:return V(K+"Minutes",1);case o:return V(K+"Seconds",2);case s:return V(K+"Milliseconds",3);default:return this.clone()}},I.endOf=function(M){return this.startOf(M,!1)},I.$set=function(M,O){var N,B=C.p(M),z="set"+(this.$u?"UTC":""),F=(N={},N[u]=z+"Date",N[p]=z+"Date",N[f]=z+"Month",N[g]=z+"FullYear",N[l]=z+"Hours",N[o]=z+"Minutes",N[s]=z+"Seconds",N[a]=z+"Milliseconds",N)[B],V=B===u?this.$D+(O-this.$W):O;if(B===f||B===g){var G=this.clone().set(p,1);G.$d[F](V),G.init(),this.$d=G.set(p,Math.min(this.$D,G.daysInMonth())).$d}else F&&this.$d[F](V);return this.init(),this},I.set=function(M,O){return this.clone().$set(M,O)},I.get=function(M){return this[C.p(M)]()},I.add=function(M,O){var N,B=this;M=Number(M);var z=C.p(O),F=function(Y){var Q=R(B);return C.w(Q.date(Q.date()+Math.round(Y*M)),B)};if(z===f)return this.set(f,this.$M+M);if(z===g)return this.set(g,this.$y+M);if(z===u)return F(1);if(z===h)return F(7);var V=(N={},N[o]=n,N[l]=i,N[s]=r,N)[z]||1,G=this.$d.getTime()+M*V;return C.w(G,this)},I.subtract=function(M,O){return this.add(-1*M,O)},I.format=function(M){var O=this,N=this.$locale();if(!this.isValid())return N.invalidDate||v;var B=M||"YYYY-MM-DDTHH:mm:ssZ",z=C.z(this),F=this.$H,V=this.$m,G=this.$M,Y=N.weekdays,Q=N.months,K=N.meridiem,it=function(W,H,U,X){return W&&(W[H]||W(O,B))||U[H].slice(0,X)},ut=function(W){return C.s(F%12||12,W,"0")},q=K||function(W,H,U){var X=W<12?"AM":"PM";return U?X.toLowerCase():X};return B.replace(y,function(W,H){return H||function(U){switch(U){case"YY":return String(O.$y).slice(-2);case"YYYY":return C.s(O.$y,4,"0");case"M":return G+1;case"MM":return C.s(G+1,2,"0");case"MMM":return it(N.monthsShort,G,Q,3);case"MMMM":return it(Q,G);case"D":return O.$D;case"DD":return C.s(O.$D,2,"0");case"d":return String(O.$W);case"dd":return it(N.weekdaysMin,O.$W,Y,2);case"ddd":return it(N.weekdaysShort,O.$W,Y,3);case"dddd":return Y[O.$W];case"H":return String(F);case"HH":return C.s(F,2,"0");case"h":return ut(1);case"hh":return ut(2);case"a":return q(F,V,!0);case"A":return q(F,V,!1);case"m":return String(V);case"mm":return C.s(V,2,"0");case"s":return String(O.$s);case"ss":return C.s(O.$s,2,"0");case"SSS":return C.s(O.$ms,3,"0");case"Z":return z}return null}(W)||z.replace(":","")})},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(M,O,N){var B,z=this,F=C.p(O),V=R(M),G=(V.utcOffset()-this.utcOffset())*n,Y=this-V,Q=function(){return C.m(z,V)};switch(F){case g:B=Q()/12;break;case f:B=Q();break;case d:B=Q()/3;break;case h:B=(Y-G)/6048e5;break;case u:B=(Y-G)/864e5;break;case l:B=Y/i;break;case o:B=Y/n;break;case s:B=Y/r;break;default:B=Y}return N?B:C.a(B)},I.daysInMonth=function(){return this.endOf(f).$D},I.$locale=function(){return S[this.$L]},I.locale=function(M,O){if(!M)return this.$L;var N=this.clone(),B=A(M,O,!0);return B&&(N.$L=B),N},I.clone=function(){return C.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},_}(),P=D.prototype;return R.prototype=P,[["$ms",a],["$s",s],["$m",o],["$H",l],["$W",u],["$M",f],["$y",g],["$D",p]].forEach(function(_){P[_[1]]=function(I){return this.$g(I,_[0],_[1])}}),R.extend=function(_,I){return _.$i||(_(I,D,R),_.$i=!0),R},R.locale=A,R.isDayjs=L,R.unix=function(_){return R(1e3*_)},R.en=S[k],R.Ls=S,R.p={},R})}(W0)),W0.exports}var dq=fq();const qn=qh(dq),Y0={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},n)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const i=r<.5?r*(1+t):r+t-r*t,a=2*r-i;switch(n){case"r":return Y0.hue2rgb(a,i,e+1/3)*255;case"g":return Y0.hue2rgb(a,i,e)*255;case"b":return Y0.hue2rgb(a,i,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},n)=>{e/=255,t/=255,r/=255;const i=Math.max(e,t,r),a=Math.min(e,t,r),s=(i+a)/2;if(n==="l")return s*100;if(i===a)return 0;const o=i-a,l=s>.5?o/(2-i-a):o/(i+a);if(n==="s")return l*100;switch(i){case e:return((t-r)/o+(t<r?6:0))*60;case t:return((r-e)/o+2)*60;case r:return((e-t)/o+4)*60;default:return-1}}},gq={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},pq={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},Ie={channel:Y0,lang:gq,unit:pq},mo={};for(let e=0;e<=255;e++)mo[e]=Ie.unit.dec2hex(e);const Wn={ALL:0,RGB:1,HSL:2};let vq=class{constructor(){this.type=Wn.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=Wn.ALL}is(t){return this.type===t}};class mq{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new vq}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=Wn.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:n,l:i}=t;r===void 0&&(t.h=Ie.channel.rgb2hsl(t,"h")),n===void 0&&(t.s=Ie.channel.rgb2hsl(t,"s")),i===void 0&&(t.l=Ie.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:n,b:i}=t;r===void 0&&(t.r=Ie.channel.hsl2rgb(t,"r")),n===void 0&&(t.g=Ie.channel.hsl2rgb(t,"g")),i===void 0&&(t.b=Ie.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(Wn.HSL)&&r!==void 0?r:(this._ensureHSL(),Ie.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(Wn.HSL)&&r!==void 0?r:(this._ensureHSL(),Ie.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(Wn.HSL)&&r!==void 0?r:(this._ensureHSL(),Ie.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(Wn.RGB)&&r!==void 0?r:(this._ensureRGB(),Ie.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(Wn.RGB)&&r!==void 0?r:(this._ensureRGB(),Ie.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(Wn.RGB)&&r!==void 0?r:(this._ensureRGB(),Ie.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(Wn.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(Wn.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(Wn.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(Wn.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(Wn.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(Wn.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const Qm=new mq({r:0,g:0,b:0,a:0},"transparent"),du={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(du.re);if(!t)return;const r=t[1],n=parseInt(r,16),i=r.length,a=i%4===0,s=i>4,o=s?1:17,l=s?8:4,u=a?0:-1,h=s?255:15;return Qm.set({r:(n>>l*(u+3)&h)*o,g:(n>>l*(u+2)&h)*o,b:(n>>l*(u+1)&h)*o,a:a?(n&h)*o/255:1},e)},stringify:e=>{const{r:t,g:r,b:n,a:i}=e;return i<1?`#${mo[Math.round(t)]}${mo[Math.round(r)]}${mo[Math.round(n)]}${mo[Math.round(i*255)]}`:`#${mo[Math.round(t)]}${mo[Math.round(r)]}${mo[Math.round(n)]}`}},Il={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(Il.hueRe);if(t){const[,r,n]=t;switch(n){case"grad":return Ie.channel.clamp.h(parseFloat(r)*.9);case"rad":return Ie.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return Ie.channel.clamp.h(parseFloat(r)*360)}}return Ie.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(Il.re);if(!r)return;const[,n,i,a,s,o]=r;return Qm.set({h:Il._hue2deg(n),s:Ie.channel.clamp.s(parseFloat(i)),l:Ie.channel.clamp.l(parseFloat(a)),a:s?Ie.channel.clamp.a(o?parseFloat(s)/100:parseFloat(s)):1},e)},stringify:e=>{const{h:t,s:r,l:n,a:i}=e;return i<1?`hsla(${Ie.lang.round(t)}, ${Ie.lang.round(r)}%, ${Ie.lang.round(n)}%, ${i})`:`hsl(${Ie.lang.round(t)}, ${Ie.lang.round(r)}%, ${Ie.lang.round(n)}%)`}},Hd={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=Hd.colors[e];if(t)return du.parse(t)},stringify:e=>{const t=du.stringify(e);for(const r in Hd.colors)if(Hd.colors[r]===t)return r}},Hf={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(Hf.re);if(!r)return;const[,n,i,a,s,o,l,u,h]=r;return Qm.set({r:Ie.channel.clamp.r(i?parseFloat(n)*2.55:parseFloat(n)),g:Ie.channel.clamp.g(s?parseFloat(a)*2.55:parseFloat(a)),b:Ie.channel.clamp.b(l?parseFloat(o)*2.55:parseFloat(o)),a:u?Ie.channel.clamp.a(h?parseFloat(u)/100:parseFloat(u)):1},e)},stringify:e=>{const{r:t,g:r,b:n,a:i}=e;return i<1?`rgba(${Ie.lang.round(t)}, ${Ie.lang.round(r)}, ${Ie.lang.round(n)}, ${Ie.lang.round(i)})`:`rgb(${Ie.lang.round(t)}, ${Ie.lang.round(r)}, ${Ie.lang.round(n)})`}},Fa={format:{keyword:Hd,hex:du,rgb:Hf,rgba:Hf,hsl:Il,hsla:Il},parse:e=>{if(typeof e!="string")return e;const t=du.parse(e)||Hf.parse(e)||Il.parse(e)||Hd.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(Wn.HSL)||e.data.r===void 0?Il.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Hf.stringify(e):du.stringify(e)},ID=(e,t)=>{const r=Fa.parse(e);for(const n in t)r[n]=Ie.channel.clamp[n](t[n]);return Fa.stringify(r)},Ao=(e,t,r=0,n=1)=>{if(typeof e!="number")return ID(e,{a:t});const i=Qm.set({r:Ie.channel.clamp.r(e),g:Ie.channel.clamp.g(t),b:Ie.channel.clamp.b(r),a:Ie.channel.clamp.a(n)});return Fa.stringify(i)},Fk=(e,t)=>Ie.lang.round(Fa.parse(e)[t]),yq=e=>{const{r:t,g:r,b:n}=Fa.parse(e),i=.2126*Ie.channel.toLinear(t)+.7152*Ie.channel.toLinear(r)+.0722*Ie.channel.toLinear(n);return Ie.lang.round(i)},xq=e=>yq(e)>=.5,Jo=e=>!xq(e),ND=(e,t,r)=>{const n=Fa.parse(e),i=n[t],a=Ie.channel.clamp[t](i+r);return i!==a&&(n[t]=a),Fa.stringify(n)},he=(e,t)=>ND(e,"l",t),xe=(e,t)=>ND(e,"l",-t),Ct=(e,t)=>{const r=Fa.parse(e),n={};for(const i in t)t[i]&&(n[i]=r[i]+t[i]);return ID(e,n)},bq=(e,t,r=50)=>{const{r:n,g:i,b:a,a:s}=Fa.parse(e),{r:o,g:l,b:u,a:h}=Fa.parse(t),f=r/100,d=f*2-1,g=s-h,v=((d*g===-1?d:(d+g)/(1+d*g))+1)/2,m=1-v,y=n*v+o*m,b=i*v+l*m,T=a*v+u*m,w=s*f+h*(1-f);return Ao(y,b,T,w)},se=(e,t=100)=>{const r=Fa.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,bq(r,e,t)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:DD,setPrototypeOf:$A,isFrozen:Tq,getPrototypeOf:wq,getOwnPropertyDescriptor:Eq}=Object;let{freeze:di,seal:pa,create:MD}=Object,{apply:DT,construct:MT}=typeof Reflect<"u"&&Reflect;di||(di=function(t){return t});pa||(pa=function(t){return t});DT||(DT=function(t,r,n){return t.apply(r,n)});MT||(MT=function(t,r){return new t(...r)});const Kp=gi(Array.prototype.forEach),kq=gi(Array.prototype.lastIndexOf),zA=gi(Array.prototype.pop),wf=gi(Array.prototype.push),Cq=gi(Array.prototype.splice),H0=gi(String.prototype.toLowerCase),$2=gi(String.prototype.toString),VA=gi(String.prototype.match),Ef=gi(String.prototype.replace),Sq=gi(String.prototype.indexOf),_q=gi(String.prototype.trim),Ca=gi(Object.prototype.hasOwnProperty),ri=gi(RegExp.prototype.test),kf=Aq(TypeError);function gi(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return DT(e,t,n)}}function Aq(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return MT(e,r)}}function Ue(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H0;$A&&$A(e,null);let n=t.length;for(;n--;){let i=t[n];if(typeof i=="string"){const a=r(i);a!==i&&(Tq(t)||(t[n]=a),i=a)}e[i]=!0}return e}function Lq(e){for(let t=0;t<e.length;t++)Ca(e,t)||(e[t]=null);return e}function _s(e){const t=MD(null);for(const[r,n]of DD(e))Ca(e,r)&&(Array.isArray(n)?t[r]=Lq(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=_s(n):t[r]=n);return t}function Cf(e,t){for(;e!==null;){const n=Eq(e,t);if(n){if(n.get)return gi(n.get);if(typeof n.value=="function")return gi(n.value)}e=wq(e)}function r(){return null}return r}const GA=di(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),z2=di(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),V2=di(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Rq=di(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),G2=di(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Iq=di(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),UA=di(["#text"]),WA=di(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),U2=di(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),YA=di(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zp=di(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Nq=pa(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Dq=pa(/<%[\w\W]*|[\w\W]*%>/gm),Mq=pa(/\$\{[\w\W]*/gm),Oq=pa(/^data-[\-\w.\u00B7-\uFFFF]+$/),Pq=pa(/^aria-[\-\w]+$/),OD=pa(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Bq=pa(/^(?:\w+script|data):/i),Fq=pa(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PD=pa(/^html$/i),$q=pa(/^[a-z][.\w]*(-[.\w]+)+$/i);var HA=Object.freeze({__proto__:null,ARIA_ATTR:Pq,ATTR_WHITESPACE:Fq,CUSTOM_ELEMENT:$q,DATA_ATTR:Oq,DOCTYPE_NAME:PD,ERB_EXPR:Dq,IS_ALLOWED_URI:OD,IS_SCRIPT_OR_DATA:Bq,MUSTACHE_EXPR:Nq,TMPLIT_EXPR:Mq});const Sf={element:1,text:3,progressingInstruction:7,comment:8,document:9},zq=function(){return typeof window>"u"?null:window},Vq=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));const a="dompurify"+(n?"#"+n:"");try{return t.createPolicy(a,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},qA=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function BD(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zq();const t=re=>BD(re);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==Sf.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,i=n.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:o,Element:l,NodeFilter:u,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:d,trustedTypes:g}=e,p=l.prototype,v=Cf(p,"cloneNode"),m=Cf(p,"remove"),y=Cf(p,"nextSibling"),b=Cf(p,"childNodes"),T=Cf(p,"parentNode");if(typeof s=="function"){const re=r.createElement("template");re.content&&re.content.ownerDocument&&(r=re.content.ownerDocument)}let w,k="";const{implementation:S,createNodeIterator:E,createDocumentFragment:L,getElementsByTagName:A}=r,{importNode:R}=n;let C=qA();t.isSupported=typeof DD=="function"&&typeof T=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:D,ERB_EXPR:P,TMPLIT_EXPR:_,DATA_ATTR:I,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:O,ATTR_WHITESPACE:N,CUSTOM_ELEMENT:B}=HA;let{IS_ALLOWED_URI:z}=HA,F=null;const V=Ue({},[...GA,...z2,...V2,...G2,...UA]);let G=null;const Y=Ue({},[...WA,...U2,...YA,...Zp]);let Q=Object.seal(MD(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,it=null,ut=!0,q=!0,W=!1,H=!0,U=!1,X=!0,J=!1,j=!1,gt=!1,at=!1,tt=!1,kt=!1,ft=!0,Dt=!1;const Ot="user-content-";let Rt=!0,Tt=!1,At={},bt=null;const wt=Ue({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Nt=null;const ht=Ue({},["audio","video","img","source","image","track"]);let _t=null;const Z=Ue({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),st="http://www.w3.org/1998/Math/MathML",$="http://www.w3.org/2000/svg",nt="http://www.w3.org/1999/xhtml";let rt=nt,ct=!1,ot=null;const vt=Ue({},[st,$,nt],$2);let yt=Ue({},["mi","mo","mn","ms","mtext"]),mt=Ue({},["annotation-xml"]);const Mt=Ue({},["title","style","font","a","script"]);let Yt=null;const Bt=["application/xhtml+xml","text/html"],zt="text/html";let Gt=null,It=null;const Vt=r.createElement("form"),Zt=function(xt){return xt instanceof RegExp||xt instanceof Function},jt=function(){let xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(It&&It===xt)){if((!xt||typeof xt!="object")&&(xt={}),xt=_s(xt),Yt=Bt.indexOf(xt.PARSER_MEDIA_TYPE)===-1?zt:xt.PARSER_MEDIA_TYPE,Gt=Yt==="application/xhtml+xml"?$2:H0,F=Ca(xt,"ALLOWED_TAGS")?Ue({},xt.ALLOWED_TAGS,Gt):V,G=Ca(xt,"ALLOWED_ATTR")?Ue({},xt.ALLOWED_ATTR,Gt):Y,ot=Ca(xt,"ALLOWED_NAMESPACES")?Ue({},xt.ALLOWED_NAMESPACES,$2):vt,_t=Ca(xt,"ADD_URI_SAFE_ATTR")?Ue(_s(Z),xt.ADD_URI_SAFE_ATTR,Gt):Z,Nt=Ca(xt,"ADD_DATA_URI_TAGS")?Ue(_s(ht),xt.ADD_DATA_URI_TAGS,Gt):ht,bt=Ca(xt,"FORBID_CONTENTS")?Ue({},xt.FORBID_CONTENTS,Gt):wt,K=Ca(xt,"FORBID_TAGS")?Ue({},xt.FORBID_TAGS,Gt):_s({}),it=Ca(xt,"FORBID_ATTR")?Ue({},xt.FORBID_ATTR,Gt):_s({}),At=Ca(xt,"USE_PROFILES")?xt.USE_PROFILES:!1,ut=xt.ALLOW_ARIA_ATTR!==!1,q=xt.ALLOW_DATA_ATTR!==!1,W=xt.ALLOW_UNKNOWN_PROTOCOLS||!1,H=xt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,U=xt.SAFE_FOR_TEMPLATES||!1,X=xt.SAFE_FOR_XML!==!1,J=xt.WHOLE_DOCUMENT||!1,at=xt.RETURN_DOM||!1,tt=xt.RETURN_DOM_FRAGMENT||!1,kt=xt.RETURN_TRUSTED_TYPE||!1,gt=xt.FORCE_BODY||!1,ft=xt.SANITIZE_DOM!==!1,Dt=xt.SANITIZE_NAMED_PROPS||!1,Rt=xt.KEEP_CONTENT!==!1,Tt=xt.IN_PLACE||!1,z=xt.ALLOWED_URI_REGEXP||OD,rt=xt.NAMESPACE||nt,yt=xt.MATHML_TEXT_INTEGRATION_POINTS||yt,mt=xt.HTML_INTEGRATION_POINTS||mt,Q=xt.CUSTOM_ELEMENT_HANDLING||{},xt.CUSTOM_ELEMENT_HANDLING&&Zt(xt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Q.tagNameCheck=xt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),xt.CUSTOM_ELEMENT_HANDLING&&Zt(xt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Q.attributeNameCheck=xt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),xt.CUSTOM_ELEMENT_HANDLING&&typeof xt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Q.allowCustomizedBuiltInElements=xt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),U&&(q=!1),tt&&(at=!0),At&&(F=Ue({},UA),G=[],At.html===!0&&(Ue(F,GA),Ue(G,WA)),At.svg===!0&&(Ue(F,z2),Ue(G,U2),Ue(G,Zp)),At.svgFilters===!0&&(Ue(F,V2),Ue(G,U2),Ue(G,Zp)),At.mathMl===!0&&(Ue(F,G2),Ue(G,YA),Ue(G,Zp))),xt.ADD_TAGS&&(F===V&&(F=_s(F)),Ue(F,xt.ADD_TAGS,Gt)),xt.ADD_ATTR&&(G===Y&&(G=_s(G)),Ue(G,xt.ADD_ATTR,Gt)),xt.ADD_URI_SAFE_ATTR&&Ue(_t,xt.ADD_URI_SAFE_ATTR,Gt),xt.FORBID_CONTENTS&&(bt===wt&&(bt=_s(bt)),Ue(bt,xt.FORBID_CONTENTS,Gt)),Rt&&(F["#text"]=!0),J&&Ue(F,["html","head","body"]),F.table&&(Ue(F,["tbody"]),delete K.tbody),xt.TRUSTED_TYPES_POLICY){if(typeof xt.TRUSTED_TYPES_POLICY.createHTML!="function")throw kf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof xt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw kf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=xt.TRUSTED_TYPES_POLICY,k=w.createHTML("")}else w===void 0&&(w=Vq(g,i)),w!==null&&typeof k=="string"&&(k=w.createHTML(""));di&&di(xt),It=xt}},Pt=Ue({},[...z2,...V2,...Rq]),ce=Ue({},[...G2,...Iq]),$t=function(xt){let Wt=T(xt);(!Wt||!Wt.tagName)&&(Wt={namespaceURI:rt,tagName:"template"});const oe=H0(xt.tagName),Be=H0(Wt.tagName);return ot[xt.namespaceURI]?xt.namespaceURI===$?Wt.namespaceURI===nt?oe==="svg":Wt.namespaceURI===st?oe==="svg"&&(Be==="annotation-xml"||yt[Be]):!!Pt[oe]:xt.namespaceURI===st?Wt.namespaceURI===nt?oe==="math":Wt.namespaceURI===$?oe==="math"&&mt[Be]:!!ce[oe]:xt.namespaceURI===nt?Wt.namespaceURI===$&&!mt[Be]||Wt.namespaceURI===st&&!yt[Be]?!1:!ce[oe]&&(Mt[oe]||!Pt[oe]):!!(Yt==="application/xhtml+xml"&&ot[xt.namespaceURI]):!1},Ut=function(xt){wf(t.removed,{element:xt});try{T(xt).removeChild(xt)}catch{m(xt)}},te=function(xt,Wt){try{wf(t.removed,{attribute:Wt.getAttributeNode(xt),from:Wt})}catch{wf(t.removed,{attribute:null,from:Wt})}if(Wt.removeAttribute(xt),xt==="is")if(at||tt)try{Ut(Wt)}catch{}else try{Wt.setAttribute(xt,"")}catch{}},Qt=function(xt){let Wt=null,oe=null;if(gt)xt="<remove></remove>"+xt;else{const vr=VA(xt,/^[\r\n\t ]+/);oe=vr&&vr[0]}Yt==="application/xhtml+xml"&&rt===nt&&(xt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+xt+"</body></html>");const Be=w?w.createHTML(xt):xt;if(rt===nt)try{Wt=new d().parseFromString(Be,Yt)}catch{}if(!Wt||!Wt.documentElement){Wt=S.createDocument(rt,"template",null);try{Wt.documentElement.innerHTML=ct?k:Be}catch{}}const pr=Wt.body||Wt.documentElement;return xt&&oe&&pr.insertBefore(r.createTextNode(oe),pr.childNodes[0]||null),rt===nt?A.call(Wt,J?"html":"body")[0]:J?Wt.documentElement:pr},Jt=function(xt){return E.call(xt.ownerDocument||xt,xt,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},ie=function(xt){return xt instanceof f&&(typeof xt.nodeName!="string"||typeof xt.textContent!="string"||typeof xt.removeChild!="function"||!(xt.attributes instanceof h)||typeof xt.removeAttribute!="function"||typeof xt.setAttribute!="function"||typeof xt.namespaceURI!="string"||typeof xt.insertBefore!="function"||typeof xt.hasChildNodes!="function")},Ge=function(xt){return typeof o=="function"&&xt instanceof o};function pe(re,xt,Wt){Kp(re,oe=>{oe.call(t,xt,Wt,It)})}const He=function(xt){let Wt=null;if(pe(C.beforeSanitizeElements,xt,null),ie(xt))return Ut(xt),!0;const oe=Gt(xt.nodeName);if(pe(C.uponSanitizeElement,xt,{tagName:oe,allowedTags:F}),X&&xt.hasChildNodes()&&!Ge(xt.firstElementChild)&&ri(/<[/\w!]/g,xt.innerHTML)&&ri(/<[/\w!]/g,xt.textContent)||xt.nodeType===Sf.progressingInstruction||X&&xt.nodeType===Sf.comment&&ri(/<[/\w]/g,xt.data))return Ut(xt),!0;if(!F[oe]||K[oe]){if(!K[oe]&&Pe(oe)&&(Q.tagNameCheck instanceof RegExp&&ri(Q.tagNameCheck,oe)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(oe)))return!1;if(Rt&&!bt[oe]){const Be=T(xt)||xt.parentNode,pr=b(xt)||xt.childNodes;if(pr&&Be){const vr=pr.length;for(let ur=vr-1;ur>=0;--ur){const jr=v(pr[ur],!0);jr.__removalCount=(xt.__removalCount||0)+1,Be.insertBefore(jr,y(xt))}}}return Ut(xt),!0}return xt instanceof l&&!$t(xt)||(oe==="noscript"||oe==="noembed"||oe==="noframes")&&ri(/<\/no(script|embed|frames)/i,xt.innerHTML)?(Ut(xt),!0):(U&&xt.nodeType===Sf.text&&(Wt=xt.textContent,Kp([D,P,_],Be=>{Wt=Ef(Wt,Be," ")}),xt.textContent!==Wt&&(wf(t.removed,{element:xt.cloneNode()}),xt.textContent=Wt)),pe(C.afterSanitizeElements,xt,null),!1)},Fe=function(xt,Wt,oe){if(ft&&(Wt==="id"||Wt==="name")&&(oe in r||oe in Vt))return!1;if(!(q&&!it[Wt]&&ri(I,Wt))){if(!(ut&&ri(M,Wt))){if(!G[Wt]||it[Wt]){if(!(Pe(xt)&&(Q.tagNameCheck instanceof RegExp&&ri(Q.tagNameCheck,xt)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(xt))&&(Q.attributeNameCheck instanceof RegExp&&ri(Q.attributeNameCheck,Wt)||Q.attributeNameCheck instanceof Function&&Q.attributeNameCheck(Wt))||Wt==="is"&&Q.allowCustomizedBuiltInElements&&(Q.tagNameCheck instanceof RegExp&&ri(Q.tagNameCheck,oe)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(oe))))return!1}else if(!_t[Wt]){if(!ri(z,Ef(oe,N,""))){if(!((Wt==="src"||Wt==="xlink:href"||Wt==="href")&&xt!=="script"&&Sq(oe,"data:")===0&&Nt[xt])){if(!(W&&!ri(O,Ef(oe,N,"")))){if(oe)return!1}}}}}}return!0},Pe=function(xt){return xt!=="annotation-xml"&&VA(xt,B)},Le=function(xt){pe(C.beforeSanitizeAttributes,xt,null);const{attributes:Wt}=xt;if(!Wt||ie(xt))return;const oe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:G,forceKeepAttr:void 0};let Be=Wt.length;for(;Be--;){const pr=Wt[Be],{name:vr,namespaceURI:ur,value:jr}=pr,Vn=Gt(vr),ei=jr;let qe=vr==="value"?ei:_q(ei);if(oe.attrName=Vn,oe.attrValue=qe,oe.keepAttr=!0,oe.forceKeepAttr=void 0,pe(C.uponSanitizeAttribute,xt,oe),qe=oe.attrValue,Dt&&(Vn==="id"||Vn==="name")&&(te(vr,xt),qe=Ot+qe),X&&ri(/((--!?|])>)|<\/(style|title)/i,qe)){te(vr,xt);continue}if(oe.forceKeepAttr)continue;if(!oe.keepAttr){te(vr,xt);continue}if(!H&&ri(/\/>/i,qe)){te(vr,xt);continue}U&&Kp([D,P,_],le=>{qe=Ef(qe,le," ")});const fe=Gt(xt.nodeName);if(!Fe(fe,Vn,qe)){te(vr,xt);continue}if(w&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!ur)switch(g.getAttributeType(fe,Vn)){case"TrustedHTML":{qe=w.createHTML(qe);break}case"TrustedScriptURL":{qe=w.createScriptURL(qe);break}}if(qe!==ei)try{ur?xt.setAttributeNS(ur,vr,qe):xt.setAttribute(vr,qe),ie(xt)?Ut(xt):zA(t.removed)}catch{te(vr,xt)}}pe(C.afterSanitizeAttributes,xt,null)},_r=function re(xt){let Wt=null;const oe=Jt(xt);for(pe(C.beforeSanitizeShadowDOM,xt,null);Wt=oe.nextNode();)pe(C.uponSanitizeShadowNode,Wt,null),He(Wt),Le(Wt),Wt.content instanceof a&&re(Wt.content);pe(C.afterSanitizeShadowDOM,xt,null)};return t.sanitize=function(re){let xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Wt=null,oe=null,Be=null,pr=null;if(ct=!re,ct&&(re="<!-->"),typeof re!="string"&&!Ge(re))if(typeof re.toString=="function"){if(re=re.toString(),typeof re!="string")throw kf("dirty is not a string, aborting")}else throw kf("toString is not a function");if(!t.isSupported)return re;if(j||jt(xt),t.removed=[],typeof re=="string"&&(Tt=!1),Tt){if(re.nodeName){const jr=Gt(re.nodeName);if(!F[jr]||K[jr])throw kf("root node is forbidden and cannot be sanitized in-place")}}else if(re instanceof o)Wt=Qt("<!---->"),oe=Wt.ownerDocument.importNode(re,!0),oe.nodeType===Sf.element&&oe.nodeName==="BODY"||oe.nodeName==="HTML"?Wt=oe:Wt.appendChild(oe);else{if(!at&&!U&&!J&&re.indexOf("<")===-1)return w&&kt?w.createHTML(re):re;if(Wt=Qt(re),!Wt)return at?null:kt?k:""}Wt&&gt&&Ut(Wt.firstChild);const vr=Jt(Tt?re:Wt);for(;Be=vr.nextNode();)He(Be),Le(Be),Be.content instanceof a&&_r(Be.content);if(Tt)return re;if(at){if(tt)for(pr=L.call(Wt.ownerDocument);Wt.firstChild;)pr.appendChild(Wt.firstChild);else pr=Wt;return(G.shadowroot||G.shadowrootmode)&&(pr=R.call(n,pr,!0)),pr}let ur=J?Wt.outerHTML:Wt.innerHTML;return J&&F["!doctype"]&&Wt.ownerDocument&&Wt.ownerDocument.doctype&&Wt.ownerDocument.doctype.name&&ri(PD,Wt.ownerDocument.doctype.name)&&(ur="<!DOCTYPE "+Wt.ownerDocument.doctype.name+`>
`+ur),U&&Kp([D,P,_],jr=>{ur=Ef(ur,jr," ")}),w&&kt?w.createHTML(ur):ur},t.setConfig=function(){let re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};jt(re),j=!0},t.clearConfig=function(){It=null,j=!1},t.isValidAttribute=function(re,xt,Wt){It||jt({});const oe=Gt(re),Be=Gt(xt);return Fe(oe,Be,Wt)},t.addHook=function(re,xt){typeof xt=="function"&&wf(C[re],xt)},t.removeHook=function(re,xt){if(xt!==void 0){const Wt=kq(C[re],xt);return Wt===-1?void 0:Cq(C[re],Wt,1)[0]}return zA(C[re])},t.removeHooks=function(re){C[re]=[]},t.removeAllHooks=function(){C=qA()},t}var ql=BD();const MRt=Object.freeze(Object.defineProperty({__proto__:null,default:ql},Symbol.toStringTag,{value:"Module"}));var FD=Object.defineProperty,x=(e,t)=>FD(e,"name",{value:t,configurable:!0}),Jm=(e,t)=>{for(var r in t)FD(e,r,{get:t[r],enumerable:!0})},ws={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},et={trace:x((...e)=>{},"trace"),debug:x((...e)=>{},"debug"),info:x((...e)=>{},"info"),warn:x((...e)=>{},"warn"),error:x((...e)=>{},"error"),fatal:x((...e)=>{},"fatal")},$k=x(function(e="fatal"){let t=ws.fatal;typeof e=="string"?e.toLowerCase()in ws&&(t=ws[e]):typeof e=="number"&&(t=e),et.trace=()=>{},et.debug=()=>{},et.info=()=>{},et.warn=()=>{},et.error=()=>{},et.fatal=()=>{},t<=ws.fatal&&(et.fatal=console.error?console.error.bind(console,na("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",na("FATAL"))),t<=ws.error&&(et.error=console.error?console.error.bind(console,na("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",na("ERROR"))),t<=ws.warn&&(et.warn=console.warn?console.warn.bind(console,na("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",na("WARN"))),t<=ws.info&&(et.info=console.info?console.info.bind(console,na("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",na("INFO"))),t<=ws.debug&&(et.debug=console.debug?console.debug.bind(console,na("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",na("DEBUG"))),t<=ws.trace&&(et.trace=console.debug?console.debug.bind(console,na("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",na("TRACE")))},"setLogLevel"),na=x(e=>`%c${qn().format("ss.SSS")} : ${e} : `,"format"),$D=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,qd=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Gq=/\s*%%.*\n/gm,ku,zD=(ku=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},x(ku,"UnknownDiagramError"),ku),bh={},zk=x(function(e,t){e=e.replace($D,"").replace(qd,"").replace(Gq,`
`);for(const[r,{detector:n}]of Object.entries(bh))if(n(e,t))return r;throw new zD(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),VD=x((...e)=>{for(const{id:t,detector:r,loader:n}of e)GD(t,r,n)},"registerLazyLoadedDiagrams"),GD=x((e,t,r)=>{bh[e]&&et.warn(`Detector with key ${e} already exists. Overwriting.`),bh[e]={detector:t,loader:r},et.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),Uq=x(e=>bh[e].loader,"getDiagramLoader"),OT=x((e,t,{depth:r=2,clobber:n=!1}={})=>{const i={depth:r,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(a=>OT(e,a,i)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(a=>{e.includes(a)||e.push(a)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(a=>{typeof t[a]=="object"&&(e[a]===void 0||typeof e[a]=="object")?(e[a]===void 0&&(e[a]=Array.isArray(t[a])?[]:{}),e[a]=OT(e[a],t[a],{depth:r-1,clobber:n})):(n||typeof e[a]!="object"&&typeof t[a]!="object")&&(e[a]=t[a])}),e)},"assignWithDepth"),an=OT,ty="#ffffff",ey="#f2f2f2",oi=x((e,t)=>t?Ct(e,{s:-40,l:10}):Ct(e,{s:-40,l:-10}),"mkBorder"),Cu,Wq=(Cu=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var r,n,i,a,s,o,l,u,h,f,d,g,p,v,m,y,b,T,w,k,S;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Ct(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Ct(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||oi(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||oi(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||oi(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||oi(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||se(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||se(this.tertiaryColor),this.lineColor=this.lineColor||se(this.background),this.arrowheadColor=this.arrowheadColor||se(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?xe(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||xe(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||se(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||he(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||xe(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||xe(this.mainBkg,10)):(this.rowOdd=this.rowOdd||he(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||he(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ct(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ct(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ct(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ct(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ct(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ct(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Ct(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ct(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ct(this.primaryColor,{h:330}),this.darkMode)for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScale"+E]=xe(this["cScale"+E],75);else for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScale"+E]=xe(this["cScale"+E],25);for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScaleInv"+E]=this["cScaleInv"+E]||se(this["cScale"+E]);for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this.darkMode?this["cScalePeer"+E]=this["cScalePeer"+E]||he(this["cScale"+E],10):this["cScalePeer"+E]=this["cScalePeer"+E]||xe(this["cScale"+E],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScaleLabel"+E]=this["cScaleLabel"+E]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let E=0;E<5;E++)this["surface"+E]=this["surface"+E]||Ct(this.mainBkg,{h:180,s:-15,l:t*(5+E*3)}),this["surfacePeer"+E]=this["surfacePeer"+E]||Ct(this.mainBkg,{h:180,s:-15,l:t*(8+E*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Ct(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Ct(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Ct(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Ct(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Ct(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Ct(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Ct(this.primaryColor,{l:-10}),this.pie5=this.pie5||Ct(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Ct(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Ct(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Ct(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Ct(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Ct(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Ct(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Ct(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((r=this.radar)==null?void 0:r.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((a=this.radar)==null?void 0:a.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((u=this.radar)==null?void 0:u.graticuleOpacity)||.3,legendBoxSize:((h=this.radar)==null?void 0:h.legendBoxSize)||12,legendFontSize:((f=this.radar)==null?void 0:f.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ct(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ct(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ct(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ct(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ct(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ct(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Jo(this.quadrant1Fill)?he(this.quadrant1Fill):xe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((g=this.xyChart)==null?void 0:g.titleColor)||this.primaryTextColor,xAxisTitleColor:((p=this.xyChart)==null?void 0:p.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((v=this.xyChart)==null?void 0:v.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((T=this.xyChart)==null?void 0:T.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((w=this.xyChart)==null?void 0:w.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((k=this.xyChart)==null?void 0:k.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((S=this.xyChart)==null?void 0:S.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?xe(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Ct(this.primaryColor,{h:-30}),this.git4=this.git4||Ct(this.primaryColor,{h:-60}),this.git5=this.git5||Ct(this.primaryColor,{h:-90}),this.git6=this.git6||Ct(this.primaryColor,{h:60}),this.git7=this.git7||Ct(this.primaryColor,{h:120}),this.darkMode?(this.git0=he(this.git0,25),this.git1=he(this.git1,25),this.git2=he(this.git2,25),this.git3=he(this.git3,25),this.git4=he(this.git4,25),this.git5=he(this.git5,25),this.git6=he(this.git6,25),this.git7=he(this.git7,25)):(this.git0=xe(this.git0,25),this.git1=xe(this.git1,25),this.git2=xe(this.git2,25),this.git3=xe(this.git3,25),this.git4=xe(this.git4,25),this.git5=xe(this.git5,25),this.git6=xe(this.git6,25),this.git7=xe(this.git7,25)),this.gitInv0=this.gitInv0||se(this.git0),this.gitInv1=this.gitInv1||se(this.git1),this.gitInv2=this.gitInv2||se(this.git2),this.gitInv3=this.gitInv3||se(this.git3),this.gitInv4=this.gitInv4||se(this.git4),this.gitInv5=this.gitInv5||se(this.git5),this.gitInv6=this.gitInv6||se(this.git6),this.gitInv7=this.gitInv7||se(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ty,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ey}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},x(Cu,"Theme"),Cu),Yq=x(e=>{const t=new Wq;return t.calculate(e),t},"getThemeVariables"),Su,Hq=(Su=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=he(this.primaryColor,16),this.tertiaryColor=Ct(this.primaryColor,{h:-160}),this.primaryBorderColor=se(this.background),this.secondaryBorderColor=oi(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oi(this.tertiaryColor,this.darkMode),this.primaryTextColor=se(this.primaryColor),this.secondaryTextColor=se(this.secondaryColor),this.tertiaryTextColor=se(this.tertiaryColor),this.lineColor=se(this.background),this.textColor=se(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=he(se("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=Ao(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=xe("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=xe(this.sectionBkgColor,10),this.taskBorderColor=Ao(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Ao(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||he(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||xe(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,r,n,i,a,s,o,l,u,h,f,d,g,p,v,m,y,b,T,w,k;this.secondBkg=he(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=he(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=he(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ct(this.primaryColor,{h:64}),this.fillType3=Ct(this.secondaryColor,{h:64}),this.fillType4=Ct(this.primaryColor,{h:-64}),this.fillType5=Ct(this.secondaryColor,{h:-64}),this.fillType6=Ct(this.primaryColor,{h:128}),this.fillType7=Ct(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ct(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ct(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ct(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ct(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ct(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ct(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Ct(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ct(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ct(this.primaryColor,{h:330});for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleInv"+S]=this["cScaleInv"+S]||se(this["cScale"+S]);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScalePeer"+S]=this["cScalePeer"+S]||he(this["cScale"+S],10);for(let S=0;S<5;S++)this["surface"+S]=this["surface"+S]||Ct(this.mainBkg,{h:30,s:-30,l:-(-10+S*4)}),this["surfacePeer"+S]=this["surfacePeer"+S]||Ct(this.mainBkg,{h:30,s:-30,l:-(-7+S*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleLabel"+S]=this["cScaleLabel"+S]||this.scaleLabelColor;for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["pie"+S]=this["cScale"+S];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ct(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ct(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ct(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ct(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ct(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ct(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Jo(this.quadrant1Fill)?he(this.quadrant1Fill):xe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((a=this.xyChart)==null?void 0:a.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((s=this.xyChart)==null?void 0:s.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((u=this.xyChart)==null?void 0:u.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((d=this.radar)==null?void 0:d.axisColor)||this.lineColor,axisStrokeWidth:((g=this.radar)==null?void 0:g.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((v=this.radar)==null?void 0:v.curveOpacity)||.5,curveStrokeWidth:((m=this.radar)==null?void 0:m.curveStrokeWidth)||2,graticuleColor:((y=this.radar)==null?void 0:y.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((T=this.radar)==null?void 0:T.graticuleOpacity)||.3,legendBoxSize:((w=this.radar)==null?void 0:w.legendBoxSize)||12,legendFontSize:((k=this.radar)==null?void 0:k.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?xe(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=he(this.secondaryColor,20),this.git1=he(this.pie2||this.secondaryColor,20),this.git2=he(this.pie3||this.tertiaryColor,20),this.git3=he(this.pie4||Ct(this.primaryColor,{h:-30}),20),this.git4=he(this.pie5||Ct(this.primaryColor,{h:-60}),20),this.git5=he(this.pie6||Ct(this.primaryColor,{h:-90}),10),this.git6=he(this.pie7||Ct(this.primaryColor,{h:60}),10),this.git7=he(this.pie8||Ct(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||se(this.git0),this.gitInv1=this.gitInv1||se(this.git1),this.gitInv2=this.gitInv2||se(this.git2),this.gitInv3=this.gitInv3||se(this.git3),this.gitInv4=this.gitInv4||se(this.git4),this.gitInv5=this.gitInv5||se(this.git5),this.gitInv6=this.gitInv6||se(this.git6),this.gitInv7=this.gitInv7||se(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||se(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||se(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||he(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||he(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},x(Su,"Theme"),Su),qq=x(e=>{const t=new Hq;return t.calculate(e),t},"getThemeVariables"),_u,Xq=(_u=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Ct(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Ct(this.primaryColor,{h:-160}),this.primaryBorderColor=oi(this.primaryColor,this.darkMode),this.secondaryBorderColor=oi(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oi(this.tertiaryColor,this.darkMode),this.primaryTextColor=se(this.primaryColor),this.secondaryTextColor=se(this.secondaryColor),this.tertiaryTextColor=se(this.tertiaryColor),this.lineColor=se(this.background),this.textColor=se(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Ao(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,r,n,i,a,s,o,l,u,h,f,d,g,p,v,m,y,b,T,w,k;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ct(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ct(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ct(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ct(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ct(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ct(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Ct(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ct(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ct(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||xe(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||xe(this.tertiaryColor,40);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScale"+S]=xe(this["cScale"+S],10),this["cScalePeer"+S]=this["cScalePeer"+S]||xe(this["cScale"+S],25);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleInv"+S]=this["cScaleInv"+S]||Ct(this["cScale"+S],{h:180});for(let S=0;S<5;S++)this["surface"+S]=this["surface"+S]||Ct(this.mainBkg,{h:30,l:-(5+S*5)}),this["surfacePeer"+S]=this["surfacePeer"+S]||Ct(this.mainBkg,{h:30,l:-(7+S*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||se(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||se(this.labelTextColor);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleLabel"+S]=this["cScaleLabel"+S]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=he(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||he(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||he(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ct(this.primaryColor,{h:64}),this.fillType3=Ct(this.secondaryColor,{h:64}),this.fillType4=Ct(this.primaryColor,{h:-64}),this.fillType5=Ct(this.secondaryColor,{h:-64}),this.fillType6=Ct(this.primaryColor,{h:128}),this.fillType7=Ct(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Ct(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Ct(this.primaryColor,{l:-10}),this.pie5=this.pie5||Ct(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Ct(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Ct(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Ct(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Ct(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Ct(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Ct(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Ct(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ct(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ct(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ct(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ct(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ct(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ct(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Jo(this.quadrant1Fill)?he(this.quadrant1Fill):xe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((n=this.radar)==null?void 0:n.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((a=this.radar)==null?void 0:a.curveStrokeWidth)||2,graticuleColor:((s=this.radar)==null?void 0:s.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((o=this.radar)==null?void 0:o.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((u=this.radar)==null?void 0:u.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((f=this.xyChart)==null?void 0:f.backgroundColor)||this.background,titleColor:((d=this.xyChart)==null?void 0:d.titleColor)||this.primaryTextColor,xAxisTitleColor:((g=this.xyChart)==null?void 0:g.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((v=this.xyChart)==null?void 0:v.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((m=this.xyChart)==null?void 0:m.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((T=this.xyChart)==null?void 0:T.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((w=this.xyChart)==null?void 0:w.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Ct(this.primaryColor,{h:-30}),this.git4=this.git4||Ct(this.primaryColor,{h:-60}),this.git5=this.git5||Ct(this.primaryColor,{h:-90}),this.git6=this.git6||Ct(this.primaryColor,{h:60}),this.git7=this.git7||Ct(this.primaryColor,{h:120}),this.darkMode?(this.git0=he(this.git0,25),this.git1=he(this.git1,25),this.git2=he(this.git2,25),this.git3=he(this.git3,25),this.git4=he(this.git4,25),this.git5=he(this.git5,25),this.git6=he(this.git6,25),this.git7=he(this.git7,25)):(this.git0=xe(this.git0,25),this.git1=xe(this.git1,25),this.git2=xe(this.git2,25),this.git3=xe(this.git3,25),this.git4=xe(this.git4,25),this.git5=xe(this.git5,25),this.git6=xe(this.git6,25),this.git7=xe(this.git7,25)),this.gitInv0=this.gitInv0||xe(se(this.git0),25),this.gitInv1=this.gitInv1||se(this.git1),this.gitInv2=this.gitInv2||se(this.git2),this.gitInv3=this.gitInv3||se(this.git3),this.gitInv4=this.gitInv4||se(this.git4),this.gitInv5=this.gitInv5||se(this.git5),this.gitInv6=this.gitInv6||se(this.git6),this.gitInv7=this.gitInv7||se(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||se(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||se(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ty,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ey}calculate(t){if(Object.keys(this).forEach(n=>{this[n]==="calculated"&&(this[n]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},x(_u,"Theme"),_u),ry=x(e=>{const t=new Xq;return t.calculate(e),t},"getThemeVariables"),Au,jq=(Au=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=he("#cde498",10),this.primaryBorderColor=oi(this.primaryColor,this.darkMode),this.secondaryBorderColor=oi(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oi(this.tertiaryColor,this.darkMode),this.primaryTextColor=se(this.primaryColor),this.secondaryTextColor=se(this.secondaryColor),this.tertiaryTextColor=se(this.primaryColor),this.lineColor=se(this.background),this.textColor=se(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,n,i,a,s,o,l,u,h,f,d,g,p,v,m,y,b,T,w,k;this.actorBorder=xe(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ct(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ct(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ct(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ct(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ct(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ct(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Ct(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ct(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ct(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||xe(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||xe(this.tertiaryColor,40);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScale"+S]=xe(this["cScale"+S],10),this["cScalePeer"+S]=this["cScalePeer"+S]||xe(this["cScale"+S],25);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleInv"+S]=this["cScaleInv"+S]||Ct(this["cScale"+S],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleLabel"+S]=this["cScaleLabel"+S]||this.scaleLabelColor;for(let S=0;S<5;S++)this["surface"+S]=this["surface"+S]||Ct(this.mainBkg,{h:30,s:-30,l:-(5+S*5)}),this["surfacePeer"+S]=this["surfacePeer"+S]||Ct(this.mainBkg,{h:30,s:-30,l:-(8+S*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||he(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||he(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ct(this.primaryColor,{h:64}),this.fillType3=Ct(this.secondaryColor,{h:64}),this.fillType4=Ct(this.primaryColor,{h:-64}),this.fillType5=Ct(this.secondaryColor,{h:-64}),this.fillType6=Ct(this.primaryColor,{h:128}),this.fillType7=Ct(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Ct(this.primaryColor,{l:-30}),this.pie5=this.pie5||Ct(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Ct(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Ct(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Ct(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Ct(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Ct(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Ct(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Ct(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ct(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ct(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ct(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ct(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ct(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ct(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Jo(this.quadrant1Fill)?he(this.quadrant1Fill):xe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((n=this.radar)==null?void 0:n.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((a=this.radar)==null?void 0:a.curveStrokeWidth)||2,graticuleColor:((s=this.radar)==null?void 0:s.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((o=this.radar)==null?void 0:o.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((u=this.radar)==null?void 0:u.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((f=this.xyChart)==null?void 0:f.backgroundColor)||this.background,titleColor:((d=this.xyChart)==null?void 0:d.titleColor)||this.primaryTextColor,xAxisTitleColor:((g=this.xyChart)==null?void 0:g.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((v=this.xyChart)==null?void 0:v.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((m=this.xyChart)==null?void 0:m.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((T=this.xyChart)==null?void 0:T.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((w=this.xyChart)==null?void 0:w.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Ct(this.primaryColor,{h:-30}),this.git4=this.git4||Ct(this.primaryColor,{h:-60}),this.git5=this.git5||Ct(this.primaryColor,{h:-90}),this.git6=this.git6||Ct(this.primaryColor,{h:60}),this.git7=this.git7||Ct(this.primaryColor,{h:120}),this.darkMode?(this.git0=he(this.git0,25),this.git1=he(this.git1,25),this.git2=he(this.git2,25),this.git3=he(this.git3,25),this.git4=he(this.git4,25),this.git5=he(this.git5,25),this.git6=he(this.git6,25),this.git7=he(this.git7,25)):(this.git0=xe(this.git0,25),this.git1=xe(this.git1,25),this.git2=xe(this.git2,25),this.git3=xe(this.git3,25),this.git4=xe(this.git4,25),this.git5=xe(this.git5,25),this.git6=xe(this.git6,25),this.git7=xe(this.git7,25)),this.gitInv0=this.gitInv0||se(this.git0),this.gitInv1=this.gitInv1||se(this.git1),this.gitInv2=this.gitInv2||se(this.git2),this.gitInv3=this.gitInv3||se(this.git3),this.gitInv4=this.gitInv4||se(this.git4),this.gitInv5=this.gitInv5||se(this.git5),this.gitInv6=this.gitInv6||se(this.git6),this.gitInv7=this.gitInv7||se(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||se(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||se(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ty,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ey}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},x(Au,"Theme"),Au),Kq=x(e=>{const t=new jq;return t.calculate(e),t},"getThemeVariables"),Lu,Zq=(Lu=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=he(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Ct(this.primaryColor,{h:-160}),this.primaryBorderColor=oi(this.primaryColor,this.darkMode),this.secondaryBorderColor=oi(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oi(this.tertiaryColor,this.darkMode),this.primaryTextColor=se(this.primaryColor),this.secondaryTextColor=se(this.secondaryColor),this.tertiaryTextColor=se(this.tertiaryColor),this.lineColor=se(this.background),this.textColor=se(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||he(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,n,i,a,s,o,l,u,h,f,d,g,p,v,m,y,b,T,w,k;this.secondBkg=he(this.contrast,55),this.border2=this.contrast,this.actorBorder=he(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleInv"+S]=this["cScaleInv"+S]||se(this["cScale"+S]);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this.darkMode?this["cScalePeer"+S]=this["cScalePeer"+S]||he(this["cScale"+S],10):this["cScalePeer"+S]=this["cScalePeer"+S]||xe(this["cScale"+S],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleLabel"+S]=this["cScaleLabel"+S]||this.scaleLabelColor;for(let S=0;S<5;S++)this["surface"+S]=this["surface"+S]||Ct(this.mainBkg,{l:-(5+S*5)}),this["surfacePeer"+S]=this["surfacePeer"+S]||Ct(this.mainBkg,{l:-(8+S*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=he(this.contrast,30),this.sectionBkgColor2=he(this.contrast,30),this.taskBorderColor=xe(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=he(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=xe(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ct(this.primaryColor,{h:64}),this.fillType3=Ct(this.secondaryColor,{h:64}),this.fillType4=Ct(this.primaryColor,{h:-64}),this.fillType5=Ct(this.secondaryColor,{h:-64}),this.fillType6=Ct(this.primaryColor,{h:128}),this.fillType7=Ct(this.secondaryColor,{h:128});for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["pie"+S]=this["cScale"+S];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ct(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ct(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ct(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ct(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ct(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ct(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Jo(this.quadrant1Fill)?he(this.quadrant1Fill):xe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((a=this.xyChart)==null?void 0:a.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((s=this.xyChart)==null?void 0:s.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((u=this.xyChart)==null?void 0:u.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((d=this.radar)==null?void 0:d.axisColor)||this.lineColor,axisStrokeWidth:((g=this.radar)==null?void 0:g.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((v=this.radar)==null?void 0:v.curveOpacity)||.5,curveStrokeWidth:((m=this.radar)==null?void 0:m.curveStrokeWidth)||2,graticuleColor:((y=this.radar)==null?void 0:y.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((T=this.radar)==null?void 0:T.graticuleOpacity)||.3,legendBoxSize:((w=this.radar)==null?void 0:w.legendBoxSize)||12,legendFontSize:((k=this.radar)==null?void 0:k.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=xe(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Ct(this.primaryColor,{h:-30}),this.git4=this.pie5||Ct(this.primaryColor,{h:-60}),this.git5=this.pie6||Ct(this.primaryColor,{h:-90}),this.git6=this.pie7||Ct(this.primaryColor,{h:60}),this.git7=this.pie8||Ct(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||se(this.git0),this.gitInv1=this.gitInv1||se(this.git1),this.gitInv2=this.gitInv2||se(this.git2),this.gitInv3=this.gitInv3||se(this.git3),this.gitInv4=this.gitInv4||se(this.git4),this.gitInv5=this.gitInv5||se(this.git5),this.gitInv6=this.gitInv6||se(this.git6),this.gitInv7=this.gitInv7||se(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ty,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ey}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},x(Lu,"Theme"),Lu),Qq=x(e=>{const t=new Zq;return t.calculate(e),t},"getThemeVariables"),Hs={base:{getThemeVariables:Yq},dark:{getThemeVariables:qq},default:{getThemeVariables:ry},forest:{getThemeVariables:Kq},neutral:{getThemeVariables:Qq}},Es={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},UD={...Es,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:Hs.default.getThemeVariables(),sequence:{...Es.sequence,messageFont:x(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:x(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:x(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Es.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Es.c4,useWidth:void 0,personFont:x(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),external_personFont:x(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:x(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:x(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:x(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:x(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:x(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:x(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:x(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:x(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:x(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:x(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:x(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:x(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:x(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:x(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:x(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:x(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:x(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:x(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:x(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:x(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Es.pie,useWidth:984},xyChart:{...Es.xyChart,useWidth:void 0},requirement:{...Es.requirement,useWidth:void 0},packet:{...Es.packet},radar:{...Es.radar}},WD=x((e,t="")=>Object.keys(e).reduce((r,n)=>Array.isArray(e[n])?r:typeof e[n]=="object"&&e[n]!==null?[...r,t+n,...WD(e[n],"")]:[...r,t+n],[]),"keyify"),Jq=new Set(WD(UD,"")),Xe=UD,lv=x(e=>{if(et.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>lv(t));return}for(const t of Object.keys(e)){if(et.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!Jq.has(t)||e[t]==null){et.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){et.debug("sanitizing object",t),lv(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const n of r)t.includes(n)&&(et.debug("sanitizing css option",t),e[t]=tX(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r!=null&&r.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}et.debug("After sanitization",e)}},"sanitizeDirective"),tX=x(e=>{let t=0,r=0;for(const n of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?t++:n==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),Th=Object.freeze(Xe),wi=an({},Th),YD,wh=[],Xd=an({},Th),ny=x((e,t)=>{let r=an({},e),n={};for(const i of t)XD(i),n=an(n,i);if(r=an(r,n),n.theme&&n.theme in Hs){const i=an({},YD),a=an(i.themeVariables||{},n.themeVariables);r.theme&&r.theme in Hs&&(r.themeVariables=Hs[r.theme].getThemeVariables(a))}return Xd=r,jD(Xd),Xd},"updateCurrentConfig"),eX=x(e=>(wi=an({},Th),wi=an(wi,e),e.theme&&Hs[e.theme]&&(wi.themeVariables=Hs[e.theme].getThemeVariables(e.themeVariables)),ny(wi,wh),wi),"setSiteConfig"),rX=x(e=>{YD=an({},e)},"saveConfigFromInitialize"),nX=x(e=>(wi=an(wi,e),ny(wi,wh),wi),"updateSiteConfig"),HD=x(()=>an({},wi),"getSiteConfig"),qD=x(e=>(jD(e),an(Xd,e),gr()),"setConfig"),gr=x(()=>an({},Xd),"getConfig"),XD=x(e=>{e&&(["secure",...wi.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(et.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&XD(e[t])}))},"sanitize"),iX=x(e=>{var t;lv(e),e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),wh.push(e),ny(wi,wh)},"addDirective"),cv=x((e=wi)=>{wh=[],ny(e,wh)},"reset"),aX={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},XA={},sX=x(e=>{XA[e]||(et.warn(aX[e]),XA[e]=!0)},"issueWarning"),jD=x(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&sX("LAZY_LOAD_DEPRECATED")},"checkConfig"),jh=/<br\s*\/?>/gi,oX=x(e=>e?QD(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),lX=(()=>{let e=!1;return()=>{e||(KD(),e=!0)}})();function KD(){const e="data-temp-href-target";ql.addHook("beforeSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),ql.addHook("afterSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}x(KD,"setupDompurifyHooks");var ZD=x(e=>(lX(),ql.sanitize(e)),"removeScript"),jA=x((e,t)=>{var r;if(((r=t.flowchart)==null?void 0:r.htmlLabels)!==!1){const n=t.securityLevel;n==="antiscript"||n==="strict"?e=ZD(e):n!=="loose"&&(e=QD(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=fX(e))}return e},"sanitizeMore"),xr=x((e,t)=>e&&(t.dompurifyConfig?e=ql.sanitize(jA(e,t),t.dompurifyConfig).toString():e=ql.sanitize(jA(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),cX=x((e,t)=>typeof e=="string"?xr(e,t):e.flat().map(r=>xr(r,t)),"sanitizeTextOrArray"),uX=x(e=>jh.test(e),"hasBreaks"),hX=x(e=>e.split(jh),"splitBreaks"),fX=x(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),QD=x(e=>e.replace(jh,"#br#"),"breakToPlaceholder"),dX=x(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},"getUrl"),dr=x(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),gX=x(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),pX=x(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),yo=x(function(e){const t=e.split(/(,)/),r=[];for(let n=0;n<t.length;n++){let i=t[n];if(i===","&&n>0&&n+1<t.length){const a=t[n-1],s=t[n+1];vX(a,s)&&(i=a+","+s,n++,r.pop())}r.push(mX(i))}return r.join("")},"parseGenericTypes"),PT=x((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),vX=x((e,t)=>{const r=PT(e,"~"),n=PT(t,"~");return r===1&&n===1},"shouldCombineSets"),mX=x(e=>{const t=PT(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const n=[...e];let i=n.indexOf("~"),a=n.lastIndexOf("~");for(;i!==-1&&a!==-1&&i!==a;)n[i]="<",n[a]=">",i=n.indexOf("~"),a=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")},"processSet"),KA=x(()=>window.MathMLElement!==void 0,"isMathMLSupported"),BT=/\$\$(.*)\$\$/g,Kn=x(e=>{var t;return(((t=e.match(BT))==null?void 0:t.length)??0)>0},"hasKatex"),tp=x(async(e,t)=>{e=await ep(e,t);const r=document.createElement("div");r.innerHTML=e,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const n=document.querySelector("body");n==null||n.insertAdjacentElement("beforeend",r);const i={width:r.clientWidth,height:r.clientHeight};return r.remove(),i},"calculateMathMLDimensions"),ep=x(async(e,t)=>{if(!Kn(e))return e;if(!(KA()||t.legacyMathML||t.forceLegacyMathML))return e.replace(BT,"MathML is unsupported in this environment.");const{default:r}=await je(async()=>{const{default:i}=await import("./markdown-CyFezxPB.js").then(a=>a.k);return{default:i}},__vite__mapDeps([0,1]),import.meta.url),n=t.forceLegacyMathML||!KA()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(jh).map(i=>Kn(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(BT,(i,a)=>r.renderToString(a,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},"renderKatex"),Xt={getRows:oX,sanitizeText:xr,sanitizeTextOrArray:cX,hasBreaks:uX,splitBreaks:hX,lineBreakRegex:jh,removeScript:ZD,getUrl:dX,evaluate:dr,getMax:gX,getMin:pX},yX=x(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),xX=x(function(e,t,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n},"calculateSvgSizeAttrs"),Oi=x(function(e,t,r,n){const i=xX(t,r,n);yX(e,i)},"configureSvgSize"),Kh=x(function(e,t,r,n){const i=t.node().getBBox(),a=i.width,s=i.height;et.info(`SVG bounds: ${a}x${s}`,i);let o=0,l=0;et.info(`Graph bounds: ${o}x${l}`,e),o=a+r*2,l=s+r*2,et.info(`Calculated bounds: ${o}x${l}`),Oi(t,l,o,n);const u=`${i.x-r} ${i.y-r} ${i.width+2*r} ${i.height+2*r}`;t.attr("viewBox",u)},"setupGraphViewbox"),q0={},bX=x((e,t,r)=>{let n="";return e in q0&&q0[e]?n=q0[e](r):et.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${n}

  ${t}
`},"getStyles"),TX=x((e,t)=>{t!==void 0&&(q0[e]=t)},"addStylesForDiagram"),wX=bX,Vk={};Jm(Vk,{clear:()=>dn,getAccDescription:()=>kn,getAccTitle:()=>wn,getDiagramTitle:()=>gn,setAccDescription:()=>En,setAccTitle:()=>cn,setDiagramTitle:()=>Fn});var Gk="",Uk="",Wk="",Yk=x(e=>xr(e,gr()),"sanitizeText"),dn=x(()=>{Gk="",Wk="",Uk=""},"clear"),cn=x(e=>{Gk=Yk(e).replace(/^\s+/g,"")},"setAccTitle"),wn=x(()=>Gk,"getAccTitle"),En=x(e=>{Wk=Yk(e).replace(/\n\s+/g,`
`)},"setAccDescription"),kn=x(()=>Wk,"getAccDescription"),Fn=x(e=>{Uk=Yk(e)},"setDiagramTitle"),gn=x(()=>Uk,"getDiagramTitle"),ZA=et,EX=$k,pt=gr,FT=qD,JD=Th,Hk=x(e=>xr(e,pt()),"sanitizeText"),tM=Kh,kX=x(()=>Vk,"getCommonDb"),uv={},hv=x((e,t,r)=>{var n;uv[e]&&ZA.warn(`Diagram with id ${e} already registered. Overwriting.`),uv[e]=t,r&&GD(e,r),TX(e,t.styles),(n=t.injectUtils)==null||n.call(t,ZA,EX,pt,Hk,tM,kX(),()=>{})},"registerDiagram"),$T=x(e=>{if(e in uv)return uv[e];throw new CX(e)},"getDiagram"),Ru,CX=(Ru=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},x(Ru,"DiagramNotFoundError"),Ru);function qk(e){return typeof e>"u"||e===null}x(qk,"isNothing");function eM(e){return typeof e=="object"&&e!==null}x(eM,"isObject");function rM(e){return Array.isArray(e)?e:qk(e)?[]:[e]}x(rM,"toArray");function nM(e,t){var r,n,i,a;if(t)for(a=Object.keys(t),r=0,n=a.length;r<n;r+=1)i=a[r],e[i]=t[i];return e}x(nM,"extend");function iM(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}x(iM,"repeat");function aM(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}x(aM,"isNegativeZero");var SX=qk,_X=eM,AX=rM,LX=iM,RX=aM,IX=nM,sn={isNothing:SX,isObject:_X,toArray:AX,repeat:LX,isNegativeZero:RX,extend:IX};function Xk(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}x(Xk,"formatError");function Eh(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Xk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}x(Eh,"YAMLException$1");Eh.prototype=Object.create(Error.prototype);Eh.prototype.constructor=Eh;Eh.prototype.toString=x(function(t){return this.name+": "+Xk(this,t)},"toString");var Ci=Eh;function X0(e,t,r,n,i){var a="",s="",o=Math.floor(i/2)-1;return n-t>o&&(a=" ... ",t=n-o+a.length),r-n>o&&(s=" ...",r=n+o-s.length),{str:a+e.slice(t,r).replace(/\t/g,"→")+s,pos:n-t+a.length}}x(X0,"getLine");function j0(e,t){return sn.repeat(" ",t-e.length)+e}x(j0,"padStart");function sM(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],a,s=-1;a=r.exec(e.buffer);)i.push(a.index),n.push(a.index+a[0].length),e.position<=a.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var o="",l,u,h=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+h+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)u=X0(e.buffer,n[s-l],i[s-l],e.position-(n[s]-n[s-l]),f),o=sn.repeat(" ",t.indent)+j0((e.line-l+1).toString(),h)+" | "+u.str+`
`+o;for(u=X0(e.buffer,n[s],i[s],e.position,f),o+=sn.repeat(" ",t.indent)+j0((e.line+1).toString(),h)+" | "+u.str+`
`,o+=sn.repeat("-",t.indent+h+3+u.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=i.length);l++)u=X0(e.buffer,n[s+l],i[s+l],e.position-(n[s]-n[s+l]),f),o+=sn.repeat(" ",t.indent)+j0((e.line+l+1).toString(),h)+" | "+u.str+`
`;return o.replace(/\n$/,"")}x(sM,"makeSnippet");var NX=sM,DX=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],MX=["scalar","sequence","mapping"];function oM(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}x(oM,"compileStyleAliases");function lM(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(DX.indexOf(r)===-1)throw new Ci('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=oM(t.styleAliases||null),MX.indexOf(this.kind)===-1)throw new Ci('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}x(lM,"Type$1");var jn=lM;function zT(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(a,s){a.tag===n.tag&&a.kind===n.kind&&a.multi===n.multi&&(i=s)}),r[i]=n}),r}x(zT,"compileList");function cM(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(x(n,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}x(cM,"compileMap");function fv(e){return this.extend(e)}x(fv,"Schema$1");fv.prototype.extend=x(function(t){var r=[],n=[];if(t instanceof jn)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new Ci("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(a){if(!(a instanceof jn))throw new Ci("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new Ci("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new Ci("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(a){if(!(a instanceof jn))throw new Ci("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(fv.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=zT(i,"implicit"),i.compiledExplicit=zT(i,"explicit"),i.compiledTypeMap=cM(i.compiledImplicit,i.compiledExplicit),i},"extend");var OX=fv,PX=new jn("tag:yaml.org,2002:str",{kind:"scalar",construct:x(function(e){return e!==null?e:""},"construct")}),BX=new jn("tag:yaml.org,2002:seq",{kind:"sequence",construct:x(function(e){return e!==null?e:[]},"construct")}),FX=new jn("tag:yaml.org,2002:map",{kind:"mapping",construct:x(function(e){return e!==null?e:{}},"construct")}),$X=new OX({explicit:[PX,BX,FX]});function uM(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}x(uM,"resolveYamlNull");function hM(){return null}x(hM,"constructYamlNull");function fM(e){return e===null}x(fM,"isNull");var zX=new jn("tag:yaml.org,2002:null",{kind:"scalar",resolve:uM,construct:hM,predicate:fM,represent:{canonical:x(function(){return"~"},"canonical"),lowercase:x(function(){return"null"},"lowercase"),uppercase:x(function(){return"NULL"},"uppercase"),camelcase:x(function(){return"Null"},"camelcase"),empty:x(function(){return""},"empty")},defaultStyle:"lowercase"});function dM(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}x(dM,"resolveYamlBoolean");function gM(e){return e==="true"||e==="True"||e==="TRUE"}x(gM,"constructYamlBoolean");function pM(e){return Object.prototype.toString.call(e)==="[object Boolean]"}x(pM,"isBoolean");var VX=new jn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:dM,construct:gM,predicate:pM,represent:{lowercase:x(function(e){return e?"true":"false"},"lowercase"),uppercase:x(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:x(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function vM(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}x(vM,"isHexCode");function mM(e){return 48<=e&&e<=55}x(mM,"isOctCode");function yM(e){return 48<=e&&e<=57}x(yM,"isDecCode");function xM(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!vM(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!mM(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!yM(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}x(xM,"resolveYamlInteger");function bM(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}x(bM,"constructYamlInteger");function TM(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!sn.isNegativeZero(e)}x(TM,"isInteger");var GX=new jn("tag:yaml.org,2002:int",{kind:"scalar",resolve:xM,construct:bM,predicate:TM,represent:{binary:x(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:x(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:x(function(e){return e.toString(10)},"decimal"),hexadecimal:x(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),UX=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function wM(e){return!(e===null||!UX.test(e)||e[e.length-1]==="_")}x(wM,"resolveYamlFloat");function EM(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}x(EM,"constructYamlFloat");var WX=/^[-+]?[0-9]+e/;function kM(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(sn.isNegativeZero(e))return"-0.0";return r=e.toString(10),WX.test(r)?r.replace("e",".e"):r}x(kM,"representYamlFloat");function CM(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||sn.isNegativeZero(e))}x(CM,"isFloat");var YX=new jn("tag:yaml.org,2002:float",{kind:"scalar",resolve:wM,construct:EM,predicate:CM,represent:kM,defaultStyle:"lowercase"}),SM=$X.extend({implicit:[zX,VX,GX,YX]}),HX=SM,_M=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),AM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function LM(e){return e===null?!1:_M.exec(e)!==null||AM.exec(e)!==null}x(LM,"resolveYamlTimestamp");function RM(e){var t,r,n,i,a,s,o,l=0,u=null,h,f,d;if(t=_M.exec(e),t===null&&(t=AM.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(a=+t[4],s=+t[5],o=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(h=+t[10],f=+(t[11]||0),u=(h*60+f)*6e4,t[9]==="-"&&(u=-u)),d=new Date(Date.UTC(r,n,i,a,s,o,l)),u&&d.setTime(d.getTime()-u),d}x(RM,"constructYamlTimestamp");function IM(e){return e.toISOString()}x(IM,"representYamlTimestamp");var qX=new jn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:LM,construct:RM,instanceOf:Date,represent:IM});function NM(e){return e==="<<"||e===null}x(NM,"resolveYamlMerge");var XX=new jn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:NM}),jk=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function DM(e){if(e===null)return!1;var t,r,n=0,i=e.length,a=jk;for(r=0;r<i;r++)if(t=a.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}x(DM,"resolveYamlBinary");function MM(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,a=jk,s=0,o=[];for(t=0;t<i;t++)t%4===0&&t&&(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)),s=s<<6|a.indexOf(n.charAt(t));return r=i%4*6,r===0?(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)):r===18?(o.push(s>>10&255),o.push(s>>2&255)):r===12&&o.push(s>>4&255),new Uint8Array(o)}x(MM,"constructYamlBinary");function OM(e){var t="",r=0,n,i,a=e.length,s=jk;for(n=0;n<a;n++)n%3===0&&n&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[n];return i=a%3,i===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):i===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):i===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}x(OM,"representYamlBinary");function PM(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}x(PM,"isBinary");var jX=new jn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:DM,construct:MM,predicate:PM,represent:OM}),KX=Object.prototype.hasOwnProperty,ZX=Object.prototype.toString;function BM(e){if(e===null)return!0;var t=[],r,n,i,a,s,o=e;for(r=0,n=o.length;r<n;r+=1){if(i=o[r],s=!1,ZX.call(i)!=="[object Object]")return!1;for(a in i)if(KX.call(i,a))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(a)===-1)t.push(a);else return!1}return!0}x(BM,"resolveYamlOmap");function FM(e){return e!==null?e:[]}x(FM,"constructYamlOmap");var QX=new jn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:BM,construct:FM}),JX=Object.prototype.toString;function $M(e){if(e===null)return!0;var t,r,n,i,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],JX.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;a[t]=[i[0],n[i[0]]]}return!0}x($M,"resolveYamlPairs");function zM(e){if(e===null)return[];var t,r,n,i,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],i=Object.keys(n),a[t]=[i[0],n[i[0]]];return a}x(zM,"constructYamlPairs");var tj=new jn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:$M,construct:zM}),ej=Object.prototype.hasOwnProperty;function VM(e){if(e===null)return!0;var t,r=e;for(t in r)if(ej.call(r,t)&&r[t]!==null)return!1;return!0}x(VM,"resolveYamlSet");function GM(e){return e!==null?e:{}}x(GM,"constructYamlSet");var rj=new jn("tag:yaml.org,2002:set",{kind:"mapping",resolve:VM,construct:GM}),UM=HX.extend({implicit:[qX,XX],explicit:[jX,QX,tj,rj]}),Oo=Object.prototype.hasOwnProperty,dv=1,WM=2,YM=3,gv=4,W2=1,nj=2,QA=3,ij=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,aj=/[\x85\u2028\u2029]/,sj=/[,\[\]\{\}]/,HM=/^(?:!|!!|![a-z\-]+!)$/i,qM=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function VT(e){return Object.prototype.toString.call(e)}x(VT,"_class");function Ra(e){return e===10||e===13}x(Ra,"is_EOL");function Lo(e){return e===9||e===32}x(Lo,"is_WHITE_SPACE");function li(e){return e===9||e===32||e===10||e===13}x(li,"is_WS_OR_EOL");function Nl(e){return e===44||e===91||e===93||e===123||e===125}x(Nl,"is_FLOW_INDICATOR");function XM(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}x(XM,"fromHexCode");function jM(e){return e===120?2:e===117?4:e===85?8:0}x(jM,"escapedHexLen");function KM(e){return 48<=e&&e<=57?e-48:-1}x(KM,"fromDecimalCode");function GT(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}x(GT,"simpleEscapeSequence");function ZM(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}x(ZM,"charFromCodepoint");var QM=new Array(256),JM=new Array(256);for(hl=0;hl<256;hl++)QM[hl]=GT(hl)?1:0,JM[hl]=GT(hl);var hl;function tO(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||UM,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}x(tO,"State$1");function Kk(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=NX(r),new Ci(t,r)}x(Kk,"generateError");function we(e,t){throw Kk(e,t)}x(we,"throwError");function pg(e,t){e.onWarning&&e.onWarning.call(null,Kk(e,t))}x(pg,"throwWarning");var JA={YAML:x(function(t,r,n){var i,a,s;t.version!==null&&we(t,"duplication of %YAML directive"),n.length!==1&&we(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&we(t,"ill-formed argument of the YAML directive"),a=parseInt(i[1],10),s=parseInt(i[2],10),a!==1&&we(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&pg(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:x(function(t,r,n){var i,a;n.length!==2&&we(t,"TAG directive accepts exactly two arguments"),i=n[0],a=n[1],HM.test(i)||we(t,"ill-formed tag handle (first argument) of the TAG directive"),Oo.call(t.tagMap,i)&&we(t,'there is a previously declared suffix for "'+i+'" tag handle'),qM.test(a)||we(t,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch{we(t,"tag prefix is malformed: "+a)}t.tagMap[i]=a},"handleTagDirective")};function qs(e,t,r,n){var i,a,s,o;if(t<r){if(o=e.input.slice(t,r),n)for(i=0,a=o.length;i<a;i+=1)s=o.charCodeAt(i),s===9||32<=s&&s<=1114111||we(e,"expected valid JSON character");else ij.test(o)&&we(e,"the stream contains non-printable characters");e.result+=o}}x(qs,"captureSegment");function UT(e,t,r,n){var i,a,s,o;for(sn.isObject(r)||we(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,o=i.length;s<o;s+=1)a=i[s],Oo.call(t,a)||(t[a]=r[a],n[a]=!0)}x(UT,"mergeMappings");function Dl(e,t,r,n,i,a,s,o,l){var u,h;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,h=i.length;u<h;u+=1)Array.isArray(i[u])&&we(e,"nested arrays are not supported inside keys"),typeof i=="object"&&VT(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&VT(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(u=0,h=a.length;u<h;u+=1)UT(e,t,a[u],r);else UT(e,t,a,r);else!e.json&&!Oo.call(r,i)&&Oo.call(t,i)&&(e.line=s||e.line,e.lineStart=o||e.lineStart,e.position=l||e.position,we(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:a}):t[i]=a,delete r[i];return t}x(Dl,"storeMappingPair");function iy(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):we(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}x(iy,"readLineBreak");function Ur(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Lo(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Ra(i))for(iy(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&pg(e,"deficient indentation"),n}x(Ur,"skipSeparationSpace");function rp(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||li(r)))}x(rp,"testDocumentSeparator");function ay(e,t){t===1?e.result+=" ":t>1&&(e.result+=sn.repeat(`
`,t-1))}x(ay,"writeFoldedLines");function eO(e,t,r){var n,i,a,s,o,l,u,h,f=e.kind,d=e.result,g;if(g=e.input.charCodeAt(e.position),li(g)||Nl(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(i=e.input.charCodeAt(e.position+1),li(i)||r&&Nl(i)))return!1;for(e.kind="scalar",e.result="",a=s=e.position,o=!1;g!==0;){if(g===58){if(i=e.input.charCodeAt(e.position+1),li(i)||r&&Nl(i))break}else if(g===35){if(n=e.input.charCodeAt(e.position-1),li(n))break}else{if(e.position===e.lineStart&&rp(e)||r&&Nl(g))break;if(Ra(g))if(l=e.line,u=e.lineStart,h=e.lineIndent,Ur(e,!1,-1),e.lineIndent>=t){o=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=u,e.lineIndent=h;break}}o&&(qs(e,a,s,!1),ay(e,e.line-l),a=s=e.position,o=!1),Lo(g)||(s=e.position+1),g=e.input.charCodeAt(++e.position)}return qs(e,a,s,!1),e.result?!0:(e.kind=f,e.result=d,!1)}x(eO,"readPlainScalar");function rO(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(qs(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else Ra(r)?(qs(e,n,i,!0),ay(e,Ur(e,!1,t)),n=i=e.position):e.position===e.lineStart&&rp(e)?we(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);we(e,"unexpected end of the stream within a single quoted scalar")}x(rO,"readSingleQuotedScalar");function nO(e,t){var r,n,i,a,s,o;if(o=e.input.charCodeAt(e.position),o!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(o=e.input.charCodeAt(e.position))!==0;){if(o===34)return qs(e,r,e.position,!0),e.position++,!0;if(o===92){if(qs(e,r,e.position,!0),o=e.input.charCodeAt(++e.position),Ra(o))Ur(e,!1,t);else if(o<256&&QM[o])e.result+=JM[o],e.position++;else if((s=jM(o))>0){for(i=s,a=0;i>0;i--)o=e.input.charCodeAt(++e.position),(s=XM(o))>=0?a=(a<<4)+s:we(e,"expected hexadecimal character");e.result+=ZM(a),e.position++}else we(e,"unknown escape sequence");r=n=e.position}else Ra(o)?(qs(e,r,n,!0),ay(e,Ur(e,!1,t)),r=n=e.position):e.position===e.lineStart&&rp(e)?we(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}we(e,"unexpected end of the stream within a double quoted scalar")}x(nO,"readDoubleQuotedScalar");function iO(e,t){var r=!0,n,i,a,s=e.tag,o,l=e.anchor,u,h,f,d,g,p=Object.create(null),v,m,y,b;if(b=e.input.charCodeAt(e.position),b===91)h=93,g=!1,o=[];else if(b===123)h=125,g=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),b=e.input.charCodeAt(++e.position);b!==0;){if(Ur(e,!0,t),b=e.input.charCodeAt(e.position),b===h)return e.position++,e.tag=s,e.anchor=l,e.kind=g?"mapping":"sequence",e.result=o,!0;r?b===44&&we(e,"expected the node content, but found ','"):we(e,"missed comma between flow collection entries"),m=v=y=null,f=d=!1,b===63&&(u=e.input.charCodeAt(e.position+1),li(u)&&(f=d=!0,e.position++,Ur(e,!0,t))),n=e.line,i=e.lineStart,a=e.position,Xl(e,t,dv,!1,!0),m=e.tag,v=e.result,Ur(e,!0,t),b=e.input.charCodeAt(e.position),(d||e.line===n)&&b===58&&(f=!0,b=e.input.charCodeAt(++e.position),Ur(e,!0,t),Xl(e,t,dv,!1,!0),y=e.result),g?Dl(e,o,p,m,v,y,n,i,a):f?o.push(Dl(e,null,p,m,v,y,n,i,a)):o.push(v),Ur(e,!0,t),b=e.input.charCodeAt(e.position),b===44?(r=!0,b=e.input.charCodeAt(++e.position)):r=!1}we(e,"unexpected end of the stream within a flow collection")}x(iO,"readFlowCollection");function aO(e,t){var r,n,i=W2,a=!1,s=!1,o=t,l=0,u=!1,h,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)W2===i?i=f===43?QA:nj:we(e,"repeat of a chomping mode identifier");else if((h=KM(f))>=0)h===0?we(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?we(e,"repeat of an indentation width identifier"):(o=t+h-1,s=!0);else break;if(Lo(f)){do f=e.input.charCodeAt(++e.position);while(Lo(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Ra(f)&&f!==0)}for(;f!==0;){for(iy(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!s||e.lineIndent<o)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>o&&(o=e.lineIndent),Ra(f)){l++;continue}if(e.lineIndent<o){i===QA?e.result+=sn.repeat(`
`,a?1+l:l):i===W2&&a&&(e.result+=`
`);break}for(n?Lo(f)?(u=!0,e.result+=sn.repeat(`
`,a?1+l:l)):u?(u=!1,e.result+=sn.repeat(`
`,l+1)):l===0?a&&(e.result+=" "):e.result+=sn.repeat(`
`,l):e.result+=sn.repeat(`
`,a?1+l:l),a=!0,s=!0,l=0,r=e.position;!Ra(f)&&f!==0;)f=e.input.charCodeAt(++e.position);qs(e,r,e.position,!1)}return!0}x(aO,"readBlockScalar");function WT(e,t){var r,n=e.tag,i=e.anchor,a=[],s,o=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,we(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!li(s))));){if(o=!0,e.position++,Ur(e,!0,-1)&&e.lineIndent<=t){a.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,Xl(e,t,YM,!1,!0),a.push(e.result),Ur(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)we(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return o?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=a,!0):!1}x(WT,"readBlockSequence");function sO(e,t,r){var n,i,a,s,o,l,u=e.tag,h=e.anchor,f={},d=Object.create(null),g=null,p=null,v=null,m=!1,y=!1,b;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),b=e.input.charCodeAt(e.position);b!==0;){if(!m&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,we(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),a=e.line,(b===63||b===58)&&li(n))b===63?(m&&(Dl(e,f,d,g,p,null,s,o,l),g=p=v=null),y=!0,m=!0,i=!0):m?(m=!1,i=!0):we(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,b=n;else{if(s=e.line,o=e.lineStart,l=e.position,!Xl(e,r,WM,!1,!0))break;if(e.line===a){for(b=e.input.charCodeAt(e.position);Lo(b);)b=e.input.charCodeAt(++e.position);if(b===58)b=e.input.charCodeAt(++e.position),li(b)||we(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(Dl(e,f,d,g,p,null,s,o,l),g=p=v=null),y=!0,m=!1,i=!1,g=e.tag,p=e.result;else if(y)we(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=h,!0}else if(y)we(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=h,!0}if((e.line===a||e.lineIndent>t)&&(m&&(s=e.line,o=e.lineStart,l=e.position),Xl(e,t,gv,!0,i)&&(m?p=e.result:v=e.result),m||(Dl(e,f,d,g,p,v,s,o,l),g=p=v=null),Ur(e,!0,-1),b=e.input.charCodeAt(e.position)),(e.line===a||e.lineIndent>t)&&b!==0)we(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&Dl(e,f,d,g,p,null,s,o,l),y&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=f),y}x(sO,"readBlockMapping");function oO(e){var t,r=!1,n=!1,i,a,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&we(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(a=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):we(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!li(s);)s===33&&(n?we(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),HM.test(i)||we(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);a=e.input.slice(t,e.position),sj.test(a)&&we(e,"tag suffix cannot contain flow indicator characters")}a&&!qM.test(a)&&we(e,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch{we(e,"tag name is malformed: "+a)}return r?e.tag=a:Oo.call(e.tagMap,i)?e.tag=e.tagMap[i]+a:i==="!"?e.tag="!"+a:i==="!!"?e.tag="tag:yaml.org,2002:"+a:we(e,'undeclared tag handle "'+i+'"'),!0}x(oO,"readTagProperty");function lO(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&we(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!li(r)&&!Nl(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&we(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}x(lO,"readAnchorProperty");function cO(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!li(n)&&!Nl(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&we(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Oo.call(e.anchorMap,r)||we(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Ur(e,!0,-1),!0}x(cO,"readAlias");function Xl(e,t,r,n,i){var a,s,o,l=1,u=!1,h=!1,f,d,g,p,v,m;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=s=o=gv===r||YM===r,n&&Ur(e,!0,-1)&&(u=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;oO(e)||lO(e);)Ur(e,!0,-1)?(u=!0,o=a,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):o=!1;if(o&&(o=u||i),(l===1||gv===r)&&(dv===r||WM===r?v=t:v=t+1,m=e.position-e.lineStart,l===1?o&&(WT(e,m)||sO(e,m,v))||iO(e,v)?h=!0:(s&&aO(e,v)||rO(e,v)||nO(e,v)?h=!0:cO(e)?(h=!0,(e.tag!==null||e.anchor!==null)&&we(e,"alias node should not have any properties")):eO(e,v,dv===r)&&(h=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(h=o&&WT(e,m))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&we(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,d=e.implicitTypes.length;f<d;f+=1)if(p=e.implicitTypes[f],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Oo.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,g=e.typeMap.multi[e.kind||"fallback"],f=0,d=g.length;f<d;f+=1)if(e.tag.slice(0,g[f].tag.length)===g[f].tag){p=g[f];break}p||we(e,"unknown tag !<"+e.tag+">"),e.result!==null&&p.kind!==e.kind&&we(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):we(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||h}x(Xl,"composeNode");function uO(e){var t=e.position,r,n,i,a=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(Ur(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(a=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!li(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&we(e,"directive name must not be less than one character in length");s!==0;){for(;Lo(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Ra(s));break}if(Ra(s))break;for(r=e.position;s!==0&&!li(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}s!==0&&iy(e),Oo.call(JA,n)?JA[n](e,n,i):pg(e,'unknown document directive "'+n+'"')}if(Ur(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ur(e,!0,-1)):a&&we(e,"directives end mark is expected"),Xl(e,e.lineIndent-1,gv,!1,!0),Ur(e,!0,-1),e.checkLineBreaks&&aj.test(e.input.slice(t,e.position))&&pg(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&rp(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ur(e,!0,-1));return}if(e.position<e.length-1)we(e,"end of the stream or a document separator is expected");else return}x(uO,"readDocument");function Zk(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new tO(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,we(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)uO(r);return r.documents}x(Zk,"loadDocuments");function oj(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=Zk(e,r);if(typeof t!="function")return n;for(var i=0,a=n.length;i<a;i+=1)t(n[i])}x(oj,"loadAll$1");function hO(e,t){var r=Zk(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Ci("expected a single document in the stream, but found more")}}x(hO,"load$1");var lj=hO,cj={load:lj},fO=Object.prototype.toString,dO=Object.prototype.hasOwnProperty,Qk=65279,uj=9,vg=10,hj=13,fj=32,dj=33,gj=34,YT=35,pj=37,vj=38,mj=39,yj=42,gO=44,xj=45,pv=58,bj=61,Tj=62,wj=63,Ej=64,pO=91,vO=93,kj=96,mO=123,Cj=124,yO=125,Jn={};Jn[0]="\\0";Jn[7]="\\a";Jn[8]="\\b";Jn[9]="\\t";Jn[10]="\\n";Jn[11]="\\v";Jn[12]="\\f";Jn[13]="\\r";Jn[27]="\\e";Jn[34]='\\"';Jn[92]="\\\\";Jn[133]="\\N";Jn[160]="\\_";Jn[8232]="\\L";Jn[8233]="\\P";var Sj=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],_j=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function xO(e,t){var r,n,i,a,s,o,l;if(t===null)return{};for(r={},n=Object.keys(t),i=0,a=n.length;i<a;i+=1)s=n[i],o=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&dO.call(l.styleAliases,o)&&(o=l.styleAliases[o]),r[s]=o;return r}x(xO,"compileStyleMap");function bO(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Ci("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+sn.repeat("0",n-t.length)+t}x(bO,"encodeHex");var Aj=1,mg=2;function TO(e){this.schema=e.schema||UM,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=sn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=xO(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?mg:Aj,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}x(TO,"State");function HT(e,t){for(var r=sn.repeat(" ",t),n=0,i=-1,a="",s,o=e.length;n<o;)i=e.indexOf(`
`,n),i===-1?(s=e.slice(n),n=o):(s=e.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(a+=r),a+=s;return a}x(HT,"indentString");function vv(e,t){return`
`+sn.repeat(" ",e.indent*t)}x(vv,"generateNextLine");function wO(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}x(wO,"testImplicitResolving");function yg(e){return e===fj||e===uj}x(yg,"isWhitespace");function kh(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Qk||65536<=e&&e<=1114111}x(kh,"isPrintable");function qT(e){return kh(e)&&e!==Qk&&e!==hj&&e!==vg}x(qT,"isNsCharOrWhitespace");function XT(e,t,r){var n=qT(e),i=n&&!yg(e);return(r?n:n&&e!==gO&&e!==pO&&e!==vO&&e!==mO&&e!==yO)&&e!==YT&&!(t===pv&&!i)||qT(t)&&!yg(t)&&e===YT||t===pv&&i}x(XT,"isPlainSafe");function EO(e){return kh(e)&&e!==Qk&&!yg(e)&&e!==xj&&e!==wj&&e!==pv&&e!==gO&&e!==pO&&e!==vO&&e!==mO&&e!==yO&&e!==YT&&e!==vj&&e!==yj&&e!==dj&&e!==Cj&&e!==bj&&e!==Tj&&e!==mj&&e!==gj&&e!==pj&&e!==Ej&&e!==kj}x(EO,"isPlainSafeFirst");function kO(e){return!yg(e)&&e!==pv}x(kO,"isPlainSafeLast");function nu(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}x(nu,"codePointAt");function Jk(e){var t=/^\n* /;return t.test(e)}x(Jk,"needIndentIndicator");var CO=1,jT=2,SO=3,_O=4,Kc=5;function AO(e,t,r,n,i,a,s,o){var l,u=0,h=null,f=!1,d=!1,g=n!==-1,p=-1,v=EO(nu(e,0))&&kO(nu(e,e.length-1));if(t||s)for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=nu(e,l),!kh(u))return Kc;v=v&&XT(u,h,o),h=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=nu(e,l),u===vg)f=!0,g&&(d=d||l-p-1>n&&e[p+1]!==" ",p=l);else if(!kh(u))return Kc;v=v&&XT(u,h,o),h=u}d=d||g&&l-p-1>n&&e[p+1]!==" "}return!f&&!d?v&&!s&&!i(e)?CO:a===mg?Kc:jT:r>9&&Jk(e)?Kc:s?a===mg?Kc:jT:d?_O:SO}x(AO,"chooseScalarStyle");function LO(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===mg?'""':"''";if(!e.noCompatMode&&(Sj.indexOf(t)!==-1||_j.test(t)))return e.quotingType===mg?'"'+t+'"':"'"+t+"'";var a=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),o=n||e.flowLevel>-1&&r>=e.flowLevel;function l(u){return wO(e,u)}switch(x(l,"testAmbiguity"),AO(t,o,e.indent,s,l,e.quotingType,e.forceQuotes&&!n,i)){case CO:return t;case jT:return"'"+t.replace(/'/g,"''")+"'";case SO:return"|"+KT(t,e.indent)+ZT(HT(t,a));case _O:return">"+KT(t,e.indent)+ZT(HT(RO(t,s),a));case Kc:return'"'+IO(t)+'"';default:throw new Ci("impossible error: invalid scalar style")}}()}x(LO,"writeScalar");function KT(e,t){var r=Jk(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),a=i?"+":n?"":"-";return r+a+`
`}x(KT,"blockHeader");function ZT(e){return e[e.length-1]===`
`?e.slice(0,-1):e}x(ZT,"dropEndingNewline");function RO(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,r.lastIndex=u,QT(e.slice(0,u),t)}(),i=e[0]===`
`||e[0]===" ",a,s;s=r.exec(e);){var o=s[1],l=s[2];a=l[0]===" ",n+=o+(!i&&!a&&l!==""?`
`:"")+QT(l,t),i=a}return n}x(RO,"foldString");function QT(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,a,s=0,o=0,l="";n=r.exec(e);)o=n.index,o-i>t&&(a=s>i?s:o,l+=`
`+e.slice(i,a),i=a+1),s=o;return l+=`
`,e.length-i>t&&s>i?l+=e.slice(i,s)+`
`+e.slice(s+1):l+=e.slice(i),l.slice(1)}x(QT,"foldLine");function IO(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=nu(e,i),n=Jn[r],!n&&kh(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||bO(r);return t}x(IO,"escapeString");function NO(e,t,r){var n="",i=e.tag,a,s,o;for(a=0,s=r.length;a<s;a+=1)o=r[a],e.replacer&&(o=e.replacer.call(r,String(a),o)),(ls(e,t,o,!1,!1)||typeof o>"u"&&ls(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}x(NO,"writeFlowSequence");function JT(e,t,r,n){var i="",a=e.tag,s,o,l;for(s=0,o=r.length;s<o;s+=1)l=r[s],e.replacer&&(l=e.replacer.call(r,String(s),l)),(ls(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&ls(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=vv(e,t)),e.dump&&vg===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=a,e.dump=i||"[]"}x(JT,"writeBlockSequence");function DO(e,t,r){var n="",i=e.tag,a=Object.keys(r),s,o,l,u,h;for(s=0,o=a.length;s<o;s+=1)h="",n!==""&&(h+=", "),e.condenseFlow&&(h+='"'),l=a[s],u=r[l],e.replacer&&(u=e.replacer.call(r,l,u)),ls(e,t,l,!1,!1)&&(e.dump.length>1024&&(h+="? "),h+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ls(e,t,u,!1,!1)&&(h+=e.dump,n+=h));e.tag=i,e.dump="{"+n+"}"}x(DO,"writeFlowMapping");function MO(e,t,r,n){var i="",a=e.tag,s=Object.keys(r),o,l,u,h,f,d;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new Ci("sortKeys must be a boolean or a function");for(o=0,l=s.length;o<l;o+=1)d="",(!n||i!=="")&&(d+=vv(e,t)),u=s[o],h=r[u],e.replacer&&(h=e.replacer.call(r,u,h)),ls(e,t+1,u,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&vg===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,f&&(d+=vv(e,t)),ls(e,t+1,h,!0,f)&&(e.dump&&vg===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,i+=d));e.tag=a,e.dump=i||"{}"}x(MO,"writeBlockMapping");function tw(e,t,r){var n,i,a,s,o,l;for(i=r?e.explicitTypes:e.implicitTypes,a=0,s=i.length;a<s;a+=1)if(o=i[a],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof t=="object"&&t instanceof o.instanceOf)&&(!o.predicate||o.predicate(t))){if(r?o.multi&&o.representName?e.tag=o.representName(t):e.tag=o.tag:e.tag="?",o.represent){if(l=e.styleMap[o.tag]||o.defaultStyle,fO.call(o.represent)==="[object Function]")n=o.represent(t,l);else if(dO.call(o.represent,l))n=o.represent[l](t,l);else throw new Ci("!<"+o.tag+'> tag resolver accepts not "'+l+'" style');e.dump=n}return!0}return!1}x(tw,"detectType");function ls(e,t,r,n,i,a,s){e.tag=null,e.dump=r,tw(e,r,!1)||tw(e,r,!0);var o=fO.call(e.dump),l=n,u;n&&(n=e.flowLevel<0||e.flowLevel>t);var h=o==="[object Object]"||o==="[object Array]",f,d;if(h&&(f=e.duplicates.indexOf(r),d=f!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(i=!1),d&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(h&&d&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),o==="[object Object]")n&&Object.keys(e.dump).length!==0?(MO(e,t,e.dump,i),d&&(e.dump="&ref_"+f+e.dump)):(DO(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if(o==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?JT(e,t-1,e.dump,i):JT(e,t,e.dump,i),d&&(e.dump="&ref_"+f+e.dump)):(NO(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if(o==="[object String]")e.tag!=="?"&&LO(e,e.dump,t,a,l);else{if(o==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Ci("unacceptable kind of an object to dump "+o)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}x(ls,"writeNode");function OO(e,t){var r=[],n=[],i,a;for(mv(e,r,n),i=0,a=n.length;i<a;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(a)}x(OO,"getDuplicateReferences");function mv(e,t,r){var n,i,a;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,a=e.length;i<a;i+=1)mv(e[i],t,r);else for(n=Object.keys(e),i=0,a=n.length;i<a;i+=1)mv(e[n[i]],t,r)}x(mv,"inspectNode");function Lj(e,t){t=t||{};var r=new TO(t);r.noRefs||OO(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ls(r,0,n,!0,!0)?r.dump+`
`:""}x(Lj,"dump$1");function Rj(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}x(Rj,"renamed");var tC=SM,eC=cj.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var ia={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function qf(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=Ar(e),t=Ar(t);const[r,n]=[e.x,e.y],[i,a]=[t.x,t.y],s=i-r,o=a-n;return{angle:Math.atan(o/s),deltaX:s,deltaY:o}}x(qf,"calculateDeltaAndAngle");var Ar=x(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),PO=x(e=>({x:x(function(t,r,n){let i=0;const a=Ar(n[0]).x<Ar(n[n.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(ia,e.arrowTypeStart)){const{angle:g,deltaX:p}=qf(n[0],n[1]);i=ia[e.arrowTypeStart]*Math.cos(g)*(p>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(ia,e.arrowTypeEnd)){const{angle:g,deltaX:p}=qf(n[n.length-1],n[n.length-2]);i=ia[e.arrowTypeEnd]*Math.cos(g)*(p>=0?1:-1)}const s=Math.abs(Ar(t).x-Ar(n[n.length-1]).x),o=Math.abs(Ar(t).y-Ar(n[n.length-1]).y),l=Math.abs(Ar(t).x-Ar(n[0]).x),u=Math.abs(Ar(t).y-Ar(n[0]).y),h=ia[e.arrowTypeStart],f=ia[e.arrowTypeEnd],d=1;if(s<f&&s>0&&o<f){let g=f+d-s;g*=a==="right"?-1:1,i-=g}if(l<h&&l>0&&u<h){let g=h+d-l;g*=a==="right"?-1:1,i+=g}return Ar(t).x+i},"x"),y:x(function(t,r,n){let i=0;const a=Ar(n[0]).y<Ar(n[n.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(ia,e.arrowTypeStart)){const{angle:g,deltaY:p}=qf(n[0],n[1]);i=ia[e.arrowTypeStart]*Math.abs(Math.sin(g))*(p>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(ia,e.arrowTypeEnd)){const{angle:g,deltaY:p}=qf(n[n.length-1],n[n.length-2]);i=ia[e.arrowTypeEnd]*Math.abs(Math.sin(g))*(p>=0?1:-1)}const s=Math.abs(Ar(t).y-Ar(n[n.length-1]).y),o=Math.abs(Ar(t).x-Ar(n[n.length-1]).x),l=Math.abs(Ar(t).y-Ar(n[0]).y),u=Math.abs(Ar(t).x-Ar(n[0]).x),h=ia[e.arrowTypeStart],f=ia[e.arrowTypeEnd],d=1;if(s<f&&s>0&&o<f){let g=f+d-s;g*=a==="up"?-1:1,i-=g}if(l<h&&l>0&&u<h){let g=h+d-l;g*=a==="up"?-1:1,i+=g}return Ar(t).y+i},"y")}),"getLineFunctionsWithOffset"),np=x(({flowchart:e})=>{var i,a;const t=((i=e==null?void 0:e.subGraphTitleMargin)==null?void 0:i.top)??0,r=((a=e==null?void 0:e.subGraphTitleMargin)==null?void 0:a.bottom)??0,n=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:n}},"getSubGraphTitleMargins");const Ij=Object.freeze({left:0,top:0,width:16,height:16}),yv=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),BO=Object.freeze({...Ij,...yv}),Nj=Object.freeze({...BO,body:"",hidden:!1}),Dj=Object.freeze({width:null,height:null}),Mj=Object.freeze({...Dj,...yv}),Oj=(e,t,r,n="")=>{const i=e.split(":");if(e.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;n=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const o=i.pop(),l=i.pop(),u={provider:i.length>0?i[0]:n,prefix:l,name:o};return Y2(u)?u:null}const a=i[0],s=a.split("-");if(s.length>1){const o={provider:n,prefix:s.shift(),name:s.join("-")};return Y2(o)?o:null}if(r&&n===""){const o={provider:n,prefix:"",name:a};return Y2(o,r)?o:null}return null},Y2=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function Pj(e,t){const r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);const n=((e.rotate||0)+(t.rotate||0))%4;return n&&(r.rotate=n),r}function t3(e,t){const r=Pj(e,t);for(const n in Nj)n in yv?n in e&&!(n in r)&&(r[n]=yv[n]):n in t?r[n]=t[n]:n in e&&(r[n]=e[n]);return r}function Bj(e,t){const r=e.icons,n=e.aliases||Object.create(null),i=Object.create(null);function a(s){if(r[s])return i[s]=[];if(!(s in i)){i[s]=null;const o=n[s]&&n[s].parent,l=o&&a(o);l&&(i[s]=[o].concat(l))}return i[s]}return(t||Object.keys(r).concat(Object.keys(n))).forEach(a),i}function e3(e,t,r){const n=e.icons,i=e.aliases||Object.create(null);let a={};function s(o){a=t3(n[o]||i[o],a)}return s(t),r.forEach(s),t3(e,a)}function Fj(e,t){if(e.icons[t])return e3(e,t,[]);const r=Bj(e,[t])[t];return r?e3(e,t,r):null}const $j=/(-?[0-9.]*[0-9]+[0-9.]*)/g,zj=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function r3(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;const n=e.split($j);if(n===null||!n.length)return e;const i=[];let a=n.shift(),s=zj.test(a);for(;;){if(s){const o=parseFloat(a);isNaN(o)?i.push(a):i.push(Math.ceil(o*t*r)/r)}else i.push(a);if(a=n.shift(),a===void 0)return i.join("");s=!s}}function Vj(e,t="defs"){let r="";const n=e.indexOf("<"+t);for(;n>=0;){const i=e.indexOf(">",n),a=e.indexOf("</"+t);if(i===-1||a===-1)break;const s=e.indexOf(">",a);if(s===-1)break;r+=e.slice(i+1,a).trim(),e=e.slice(0,n).trim()+e.slice(s+1)}return{defs:r,content:e}}function Gj(e,t){return e?"<defs>"+e+"</defs>"+t:t}function Uj(e,t,r){const n=Vj(e);return Gj(n.defs,t+n.content+r)}const Wj=e=>e==="unset"||e==="undefined"||e==="none";function Yj(e,t){const r={...BO,...e},n={...Mj,...t},i={left:r.left,top:r.top,width:r.width,height:r.height};let a=r.body;[r,n].forEach(v=>{const m=[],y=v.hFlip,b=v.vFlip;let T=v.rotate;y?b?T+=2:(m.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),m.push("scale(-1 1)"),i.top=i.left=0):b&&(m.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),m.push("scale(1 -1)"),i.top=i.left=0);let w;switch(T<0&&(T-=Math.floor(T/4)*4),T=T%4,T){case 1:w=i.height/2+i.top,m.unshift("rotate(90 "+w.toString()+" "+w.toString()+")");break;case 2:m.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:w=i.width/2+i.left,m.unshift("rotate(-90 "+w.toString()+" "+w.toString()+")");break}T%2===1&&(i.left!==i.top&&(w=i.left,i.left=i.top,i.top=w),i.width!==i.height&&(w=i.width,i.width=i.height,i.height=w)),m.length&&(a=Uj(a,'<g transform="'+m.join(" ")+'">',"</g>"))});const s=n.width,o=n.height,l=i.width,u=i.height;let h,f;s===null?(f=o===null?"1em":o==="auto"?u:o,h=r3(f,l/u)):(h=s==="auto"?l:s,f=o===null?r3(h,u/l):o==="auto"?u:o);const d={},g=(v,m)=>{Wj(m)||(d[v]=m.toString())};g("width",h),g("height",f);const p=[i.left,i.top,l,u];return d.viewBox=p.join(" "),{attributes:d,viewBox:p,body:a}}const Hj=/\sid="(\S+)"/g,qj="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Xj=0;function jj(e,t=qj){const r=[];let n;for(;n=Hj.exec(e);)r.push(n[1]);if(!r.length)return e;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(a=>{const s=typeof t=="function"?t(a):t+(Xj++).toString(),o=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+s+i+"$3")}),e=e.replace(new RegExp(i,"g"),""),e}function Kj(e,t){let r=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in t)r+=" "+n+'="'+t[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}var FO={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},ew=new Map,$O=new Map,zO=x(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(et.debug("Registering icon pack:",t.name),"loader"in t)$O.set(t.name,t.loader);else if("icons"in t)ew.set(t.name,t.icons);else throw et.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),Zj=x(async(e,t)=>{const r=Oj(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const n=r.prefix||t;if(!n)throw new Error(`Icon name must contain a prefix: ${e}`);let i=ew.get(n);if(!i){const s=$O.get(n);if(!s)throw new Error(`Icon set not found: ${r.prefix}`);try{i={...await s(),prefix:n},ew.set(n,i)}catch(o){throw et.error(o),new Error(`Failed to load icon set: ${r.prefix}`)}}const a=Fj(i,r.name);if(!a)throw new Error(`Icon not found: ${e}`);return a},"getRegisteredIconData"),jl=x(async(e,t)=>{let r;try{r=await Zj(e,t==null?void 0:t.fallbackPrefix)}catch(a){et.error(a),r=FO}const n=Yj(r,t);return Kj(jj(n.body),n.attributes)},"getIconSVG"),_f={},Kr={},n3;function Qj(){return n3||(n3=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.BLANK_URL=Kr.relativeFirstCharacters=Kr.whitespaceEscapeCharsRegex=Kr.urlSchemeRegex=Kr.ctrlCharactersRegex=Kr.htmlCtrlEntityRegex=Kr.htmlEntitiesRegex=Kr.invalidProtocolRegex=void 0,Kr.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Kr.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Kr.htmlCtrlEntityRegex=/&(newline|tab);/gi,Kr.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Kr.urlSchemeRegex=/^.+(:|&colon;)/gim,Kr.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Kr.relativeFirstCharacters=[".","/"],Kr.BLANK_URL="about:blank"),Kr}var i3;function Jj(){if(i3)return _f;i3=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.sanitizeUrl=void 0;var e=Qj();function t(s){return e.relativeFirstCharacters.indexOf(s[0])>-1}function r(s){var o=s.replace(e.ctrlCharactersRegex,"");return o.replace(e.htmlEntitiesRegex,function(l,u){return String.fromCharCode(u)})}function n(s){return URL.canParse(s)}function i(s){try{return decodeURIComponent(s)}catch{return s}}function a(s){if(!s)return e.BLANK_URL;var o,l=i(s.trim());do l=r(l).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),l=i(l),o=l.match(e.ctrlCharactersRegex)||l.match(e.htmlEntitiesRegex)||l.match(e.htmlCtrlEntityRegex)||l.match(e.whitespaceEscapeCharsRegex);while(o&&o.length>0);var u=l;if(!u)return e.BLANK_URL;if(t(u))return u;var h=u.trimStart(),f=h.match(e.urlSchemeRegex);if(!f)return u;var d=f[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(d))return e.BLANK_URL;var g=h.replace(/\\/g,"/");if(d==="mailto:"||d.includes("://"))return g;if(d==="http:"||d==="https:"){if(!n(g))return e.BLANK_URL;var p=new URL(g);return p.protocol=p.protocol.toLowerCase(),p.hostname=p.hostname.toLowerCase(),p.toString()}return g}return _f.sanitizeUrl=a,_f}var mc=Jj();function tK(e){return e}var K0=1,H2=2,rw=3,Qp=4,a3=1e-6;function eK(e){return"translate("+e+",0)"}function rK(e){return"translate(0,"+e+")"}function nK(e){return t=>+e(t)}function iK(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function aK(){return!this.__axis}function VO(e,t){var r=[],n=null,i=null,a=6,s=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===K0||e===Qp?-1:1,h=e===Qp||e===H2?"x":"y",f=e===K0||e===rw?eK:rK;function d(g){var p=n??(t.ticks?t.ticks.apply(t,r):t.domain()),v=i??(t.tickFormat?t.tickFormat.apply(t,r):tK),m=Math.max(a,0)+o,y=t.range(),b=+y[0]+l,T=+y[y.length-1]+l,w=(t.bandwidth?iK:nK)(t.copy(),l),k=g.selection?g.selection():g,S=k.selectAll(".domain").data([null]),E=k.selectAll(".tick").data(p,t).order(),L=E.exit(),A=E.enter().append("g").attr("class","tick"),R=E.select("line"),C=E.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(A),R=R.merge(A.append("line").attr("stroke","currentColor").attr(h+"2",u*a)),C=C.merge(A.append("text").attr("fill","currentColor").attr(h,u*m).attr("dy",e===K0?"0em":e===rw?"0.71em":"0.32em")),g!==k&&(S=S.transition(g),E=E.transition(g),R=R.transition(g),C=C.transition(g),L=L.transition(g).attr("opacity",a3).attr("transform",function(D){return isFinite(D=w(D))?f(D+l):this.getAttribute("transform")}),A.attr("opacity",a3).attr("transform",function(D){var P=this.parentNode.__axis;return f((P&&isFinite(P=P(D))?P:w(D))+l)})),L.remove(),S.attr("d",e===Qp||e===H2?s?"M"+u*s+","+b+"H"+l+"V"+T+"H"+u*s:"M"+l+","+b+"V"+T:s?"M"+b+","+u*s+"V"+l+"H"+T+"V"+u*s:"M"+b+","+l+"H"+T),E.attr("opacity",1).attr("transform",function(D){return f(w(D)+l)}),R.attr(h+"2",u*a),C.attr(h,u*m).text(v),k.filter(aK).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===H2?"start":e===Qp?"end":"middle"),k.each(function(){this.__axis=w})}return d.scale=function(g){return arguments.length?(t=g,d):t},d.ticks=function(){return r=Array.from(arguments),d},d.tickArguments=function(g){return arguments.length?(r=g==null?[]:Array.from(g),d):r.slice()},d.tickValues=function(g){return arguments.length?(n=g==null?null:Array.from(g),d):n&&n.slice()},d.tickFormat=function(g){return arguments.length?(i=g,d):i},d.tickSize=function(g){return arguments.length?(a=s=+g,d):a},d.tickSizeInner=function(g){return arguments.length?(a=+g,d):a},d.tickSizeOuter=function(g){return arguments.length?(s=+g,d):s},d.tickPadding=function(g){return arguments.length?(o=+g,d):o},d.offset=function(g){return arguments.length?(l=+g,d):l},d}function sK(e){return VO(K0,e)}function oK(e){return VO(rw,e)}var lK={value:()=>{}};function GO(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Z0(r)}function Z0(e){this._=e}function cK(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Z0.prototype=GO.prototype={constructor:Z0,on:function(e,t){var r=this._,n=cK(e+"",r),i,a=-1,s=n.length;if(arguments.length<2){for(;++a<s;)if((i=(e=n[a]).type)&&(i=uK(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=n[a]).type)r[i]=s3(r[i],e.name,t);else if(t==null)for(i in r)r[i]=s3(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Z0(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,a;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],n=0,i=a.length;n<i;++n)a[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,a=n.length;i<a;++i)n[i].value.apply(t,r)}};function uK(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function s3(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=lK,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var nw="http://www.w3.org/1999/xhtml";const o3={svg:"http://www.w3.org/2000/svg",xhtml:nw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sy(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),o3.hasOwnProperty(t)?{space:o3[t],local:e}:e}function hK(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===nw&&t.documentElement.namespaceURI===nw?t.createElement(e):t.createElementNS(r,e)}}function fK(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function UO(e){var t=sy(e);return(t.local?fK:hK)(t)}function dK(){}function rC(e){return e==null?dK:function(){return this.querySelector(e)}}function gK(e){typeof e!="function"&&(e=rC(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],s=a.length,o=n[i]=new Array(s),l,u,h=0;h<s;++h)(l=a[h])&&(u=e.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),o[h]=u);return new ji(n,this._parents)}function pK(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function vK(){return[]}function WO(e){return e==null?vK:function(){return this.querySelectorAll(e)}}function mK(e){return function(){return pK(e.apply(this,arguments))}}function yK(e){typeof e=="function"?e=mK(e):e=WO(e);for(var t=this._groups,r=t.length,n=[],i=[],a=0;a<r;++a)for(var s=t[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&(n.push(e.call(l,l.__data__,u,s)),i.push(l));return new ji(n,i)}function YO(e){return function(){return this.matches(e)}}function HO(e){return function(t){return t.matches(e)}}var xK=Array.prototype.find;function bK(e){return function(){return xK.call(this.children,e)}}function TK(){return this.firstElementChild}function wK(e){return this.select(e==null?TK:bK(typeof e=="function"?e:HO(e)))}var EK=Array.prototype.filter;function kK(){return Array.from(this.children)}function CK(e){return function(){return EK.call(this.children,e)}}function SK(e){return this.selectAll(e==null?kK:CK(typeof e=="function"?e:HO(e)))}function _K(e){typeof e!="function"&&(e=YO(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],s=a.length,o=n[i]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&o.push(l);return new ji(n,this._parents)}function qO(e){return new Array(e.length)}function AK(){return new ji(this._enter||this._groups.map(qO),this._parents)}function xv(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xv.prototype={constructor:xv,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function LK(e){return function(){return e}}function RK(e,t,r,n,i,a){for(var s=0,o,l=t.length,u=a.length;s<u;++s)(o=t[s])?(o.__data__=a[s],n[s]=o):r[s]=new xv(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function IK(e,t,r,n,i,a,s){var o,l,u=new Map,h=t.length,f=a.length,d=new Array(h),g;for(o=0;o<h;++o)(l=t[o])&&(d[o]=g=s.call(l,l.__data__,o,t)+"",u.has(g)?i[o]=l:u.set(g,l));for(o=0;o<f;++o)g=s.call(e,a[o],o,a)+"",(l=u.get(g))?(n[o]=l,l.__data__=a[o],u.delete(g)):r[o]=new xv(e,a[o]);for(o=0;o<h;++o)(l=t[o])&&u.get(d[o])===l&&(i[o]=l)}function NK(e){return e.__data__}function DK(e,t){if(!arguments.length)return Array.from(this,NK);var r=t?IK:RK,n=this._parents,i=this._groups;typeof e!="function"&&(e=LK(e));for(var a=i.length,s=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var h=n[u],f=i[u],d=f.length,g=MK(e.call(h,h&&h.__data__,u,n)),p=g.length,v=o[u]=new Array(p),m=s[u]=new Array(p),y=l[u]=new Array(d);r(h,f,v,m,y,g,t);for(var b=0,T=0,w,k;b<p;++b)if(w=v[b]){for(b>=T&&(T=b+1);!(k=m[T])&&++T<p;);w._next=k||null}}return s=new ji(s,n),s._enter=o,s._exit=l,s}function MK(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OK(){return new ji(this._exit||this._groups.map(qO),this._parents)}function PK(e,t,r){var n=this.enter(),i=this,a=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?a.remove():r(a),n&&i?n.merge(i).order():i}function BK(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,a=n.length,s=Math.min(i,a),o=new Array(i),l=0;l<s;++l)for(var u=r[l],h=n[l],f=u.length,d=o[l]=new Array(f),g,p=0;p<f;++p)(g=u[p]||h[p])&&(d[p]=g);for(;l<i;++l)o[l]=r[l];return new ji(o,this._parents)}function FK(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,a=n[i],s;--i>=0;)(s=n[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function $K(e){e||(e=zK);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var s=r[a],o=s.length,l=i[a]=new Array(o),u,h=0;h<o;++h)(u=s[h])&&(l[h]=u);l.sort(t)}return new ji(i,this._parents).order()}function zK(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function VK(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function GK(){return Array.from(this)}function UK(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length;i<a;++i){var s=n[i];if(s)return s}return null}function WK(){let e=0;for(const t of this)++e;return e}function YK(){return!this.node()}function HK(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,s=i.length,o;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function qK(e){return function(){this.removeAttribute(e)}}function XK(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jK(e,t){return function(){this.setAttribute(e,t)}}function KK(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ZK(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function QK(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function JK(e,t){var r=sy(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?XK:qK:typeof t=="function"?r.local?QK:ZK:r.local?KK:jK)(r,t))}function XO(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function tZ(e){return function(){this.style.removeProperty(e)}}function eZ(e,t,r){return function(){this.style.setProperty(e,t,r)}}function rZ(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function nZ(e,t,r){return arguments.length>1?this.each((t==null?tZ:typeof t=="function"?rZ:eZ)(e,t,r??"")):Ch(this.node(),e)}function Ch(e,t){return e.style.getPropertyValue(t)||XO(e).getComputedStyle(e,null).getPropertyValue(t)}function iZ(e){return function(){delete this[e]}}function aZ(e,t){return function(){this[e]=t}}function sZ(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function oZ(e,t){return arguments.length>1?this.each((t==null?iZ:typeof t=="function"?sZ:aZ)(e,t)):this.node()[e]}function jO(e){return e.trim().split(/^|\s+/)}function nC(e){return e.classList||new KO(e)}function KO(e){this._node=e,this._names=jO(e.getAttribute("class")||"")}KO.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ZO(e,t){for(var r=nC(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function QO(e,t){for(var r=nC(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function lZ(e){return function(){ZO(this,e)}}function cZ(e){return function(){QO(this,e)}}function uZ(e,t){return function(){(t.apply(this,arguments)?ZO:QO)(this,e)}}function hZ(e,t){var r=jO(e+"");if(arguments.length<2){for(var n=nC(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?uZ:t?lZ:cZ)(r,t))}function fZ(){this.textContent=""}function dZ(e){return function(){this.textContent=e}}function gZ(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function pZ(e){return arguments.length?this.each(e==null?fZ:(typeof e=="function"?gZ:dZ)(e)):this.node().textContent}function vZ(){this.innerHTML=""}function mZ(e){return function(){this.innerHTML=e}}function yZ(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xZ(e){return arguments.length?this.each(e==null?vZ:(typeof e=="function"?yZ:mZ)(e)):this.node().innerHTML}function bZ(){this.nextSibling&&this.parentNode.appendChild(this)}function TZ(){return this.each(bZ)}function wZ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function EZ(){return this.each(wZ)}function kZ(e){var t=typeof e=="function"?e:UO(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function CZ(){return null}function SZ(e,t){var r=typeof e=="function"?e:UO(e),n=t==null?CZ:typeof t=="function"?t:rC(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function _Z(){var e=this.parentNode;e&&e.removeChild(this)}function AZ(){return this.each(_Z)}function LZ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function RZ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function IZ(e){return this.select(e?RZ:LZ)}function NZ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function DZ(e){return function(t){e.call(this,t,this.__data__)}}function MZ(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function OZ(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,a;r<i;++r)a=t[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++n]=a;++n?t.length=n:delete this.__on}}}function PZ(e,t,r){return function(){var n=this.__on,i,a=DZ(t);if(n){for(var s=0,o=n.length;s<o;++s)if((i=n[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=r),i.value=t;return}}this.addEventListener(e.type,a,r),i={type:e.type,name:e.name,value:t,listener:a,options:r},n?n.push(i):this.__on=[i]}}function BZ(e,t,r){var n=MZ(e+""),i,a=n.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,h;l<u;++l)for(i=0,h=o[l];i<a;++i)if((s=n[i]).type===h.type&&s.name===h.name)return h.value}return}for(o=t?PZ:OZ,i=0;i<a;++i)this.each(o(n[i],t,r));return this}function JO(e,t,r){var n=XO(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function FZ(e,t){return function(){return JO(this,e,t)}}function $Z(e,t){return function(){return JO(this,e,t.apply(this,arguments))}}function zZ(e,t){return this.each((typeof t=="function"?$Z:FZ)(e,t))}function*VZ(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length,s;i<a;++i)(s=n[i])&&(yield s)}var tP=[null];function ji(e,t){this._groups=e,this._parents=t}function ip(){return new ji([[document.documentElement]],tP)}function GZ(){return this}ji.prototype=ip.prototype={constructor:ji,select:gK,selectAll:yK,selectChild:wK,selectChildren:SK,filter:_K,data:DK,enter:AK,exit:OK,join:PK,merge:BK,selection:GZ,order:FK,sort:$K,call:VK,nodes:GK,node:UK,size:WK,empty:YK,each:HK,attr:JK,style:nZ,property:oZ,classed:hZ,text:pZ,html:xZ,raise:TZ,lower:EZ,append:kZ,insert:SZ,remove:AZ,clone:IZ,datum:NZ,on:BZ,dispatch:zZ,[Symbol.iterator]:VZ};function qt(e){return typeof e=="string"?new ji([[document.querySelector(e)]],[document.documentElement]):new ji([[e]],tP)}var Sh=0,Xf=0,Af=0,eP=1e3,bv,jf,Tv=0,Kl=0,oy=0,xg=typeof performance=="object"&&performance.now?performance:Date,rP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function iC(){return Kl||(rP(UZ),Kl=xg.now()+oy)}function UZ(){Kl=0}function wv(){this._call=this._time=this._next=null}wv.prototype=nP.prototype={constructor:wv,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?iC():+r)+(t==null?0:+t),!this._next&&jf!==this&&(jf?jf._next=this:bv=this,jf=this),this._call=e,this._time=r,iw()},stop:function(){this._call&&(this._call=null,this._time=1/0,iw())}};function nP(e,t,r){var n=new wv;return n.restart(e,t,r),n}function WZ(){iC(),++Sh;for(var e=bv,t;e;)(t=Kl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Sh}function l3(){Kl=(Tv=xg.now())+oy,Sh=Xf=0;try{WZ()}finally{Sh=0,HZ(),Kl=0}}function YZ(){var e=xg.now(),t=e-Tv;t>eP&&(oy-=t,Tv=e)}function HZ(){for(var e,t=bv,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:bv=r);jf=e,iw(n)}function iw(e){if(!Sh){Xf&&(Xf=clearTimeout(Xf));var t=e-Kl;t>24?(e<1/0&&(Xf=setTimeout(l3,e-xg.now()-oy)),Af&&(Af=clearInterval(Af))):(Af||(Tv=xg.now(),Af=setInterval(YZ,eP)),Sh=1,rP(l3))}}function c3(e,t,r){var n=new wv;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var qZ=GO("start","end","cancel","interrupt"),XZ=[],iP=0,u3=1,aw=2,Q0=3,h3=4,sw=5,J0=6;function ly(e,t,r,n,i,a){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;jZ(e,r,{name:t,index:n,group:i,on:qZ,tween:XZ,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:iP})}function aC(e,t){var r=Ga(e,t);if(r.state>iP)throw new Error("too late; already scheduled");return r}function gs(e,t){var r=Ga(e,t);if(r.state>Q0)throw new Error("too late; already running");return r}function Ga(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function jZ(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=nP(a,0,r.time);function a(u){r.state=u3,r.timer.restart(s,r.delay,r.time),r.delay<=u&&s(u-r.delay)}function s(u){var h,f,d,g;if(r.state!==u3)return l();for(h in n)if(g=n[h],g.name===r.name){if(g.state===Q0)return c3(s);g.state===h3?(g.state=J0,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete n[h]):+h<t&&(g.state=J0,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete n[h])}if(c3(function(){r.state===Q0&&(r.state=h3,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=aw,r.on.call("start",e,e.__data__,r.index,r.group),r.state===aw){for(r.state=Q0,i=new Array(d=r.tween.length),h=0,f=-1;h<d;++h)(g=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(i[++f]=g);i.length=f+1}}function o(u){for(var h=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=sw,1),f=-1,d=i.length;++f<d;)i[f].call(e,h);r.state===sw&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=J0,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function KZ(e,t){var r=e.__transition,n,i,a=!0,s;if(r){t=t==null?null:t+"";for(s in r){if((n=r[s]).name!==t){a=!1;continue}i=n.state>aw&&n.state<sw,n.state=J0,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[s]}a&&delete e.__transition}}function ZZ(e){return this.each(function(){KZ(this,e)})}function QZ(e,t){var r,n;return function(){var i=gs(this,e),a=i.tween;if(a!==r){n=r=a;for(var s=0,o=n.length;s<o;++s)if(n[s].name===t){n=n.slice(),n.splice(s,1);break}}i.tween=n}}function JZ(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var a=gs(this,e),s=a.tween;if(s!==n){i=(n=s).slice();for(var o={name:t,value:r},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=o;break}l===u&&i.push(o)}a.tween=i}}function tQ(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Ga(this.node(),r).tween,i=0,a=n.length,s;i<a;++i)if((s=n[i]).name===e)return s.value;return null}return this.each((t==null?QZ:JZ)(r,e,t))}function sC(e,t,r){var n=e._id;return e.each(function(){var i=gs(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return Ga(i,n).value[t]}}function aP(e,t){var r;return(typeof t=="number"?_a:t instanceof Ul?nv:(r=Ul(t))?(t=r,nv):Q6)(e,t)}function eQ(e){return function(){this.removeAttribute(e)}}function rQ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nQ(e,t,r){var n,i=r+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===n?a:a=t(n=s,r)}}function iQ(e,t,r){var n,i=r+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===n?a:a=t(n=s,r)}}function aQ(e,t,r){var n,i,a;return function(){var s,o=r(this),l;return o==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=o+"",s===l?null:s===n&&l===i?a:(i=l,a=t(n=s,o)))}}function sQ(e,t,r){var n,i,a;return function(){var s,o=r(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=o+"",s===l?null:s===n&&l===i?a:(i=l,a=t(n=s,o)))}}function oQ(e,t){var r=sy(e),n=r==="transform"?TY:aP;return this.attrTween(e,typeof t=="function"?(r.local?sQ:aQ)(r,n,sC(this,"attr."+e,t)):t==null?(r.local?rQ:eQ)(r):(r.local?iQ:nQ)(r,n,t))}function lQ(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function cQ(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function uQ(e,t){var r,n;function i(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&cQ(e,a)),r}return i._value=t,i}function hQ(e,t){var r,n;function i(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&lQ(e,a)),r}return i._value=t,i}function fQ(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=sy(e);return this.tween(r,(n.local?uQ:hQ)(n,t))}function dQ(e,t){return function(){aC(this,e).delay=+t.apply(this,arguments)}}function gQ(e,t){return t=+t,function(){aC(this,e).delay=t}}function pQ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dQ:gQ)(t,e)):Ga(this.node(),t).delay}function vQ(e,t){return function(){gs(this,e).duration=+t.apply(this,arguments)}}function mQ(e,t){return t=+t,function(){gs(this,e).duration=t}}function yQ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vQ:mQ)(t,e)):Ga(this.node(),t).duration}function xQ(e,t){if(typeof t!="function")throw new Error;return function(){gs(this,e).ease=t}}function bQ(e){var t=this._id;return arguments.length?this.each(xQ(t,e)):Ga(this.node(),t).ease}function TQ(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;gs(this,e).ease=r}}function wQ(e){if(typeof e!="function")throw new Error;return this.each(TQ(this._id,e))}function EQ(e){typeof e!="function"&&(e=YO(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],s=a.length,o=n[i]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&o.push(l);return new Qs(n,this._parents,this._name,this._id)}function kQ(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,a=Math.min(n,i),s=new Array(n),o=0;o<a;++o)for(var l=t[o],u=r[o],h=l.length,f=s[o]=new Array(h),d,g=0;g<h;++g)(d=l[g]||u[g])&&(f[g]=d);for(;o<n;++o)s[o]=t[o];return new Qs(s,this._parents,this._name,this._id)}function CQ(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function SQ(e,t,r){var n,i,a=CQ(t)?aC:gs;return function(){var s=a(this,e),o=s.on;o!==n&&(i=(n=o).copy()).on(t,r),s.on=i}}function _Q(e,t){var r=this._id;return arguments.length<2?Ga(this.node(),r).on.on(e):this.each(SQ(r,e,t))}function AQ(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function LQ(){return this.on("end.remove",AQ(this._id))}function RQ(e){var t=this._name,r=this._id;typeof e!="function"&&(e=rC(e));for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s)for(var o=n[s],l=o.length,u=a[s]=new Array(l),h,f,d=0;d<l;++d)(h=o[d])&&(f=e.call(h,h.__data__,d,o))&&("__data__"in h&&(f.__data__=h.__data__),u[d]=f,ly(u[d],t,r,d,u,Ga(h,r)));return new Qs(a,this._parents,t,r)}function IQ(e){var t=this._name,r=this._id;typeof e!="function"&&(e=WO(e));for(var n=this._groups,i=n.length,a=[],s=[],o=0;o<i;++o)for(var l=n[o],u=l.length,h,f=0;f<u;++f)if(h=l[f]){for(var d=e.call(h,h.__data__,f,l),g,p=Ga(h,r),v=0,m=d.length;v<m;++v)(g=d[v])&&ly(g,t,r,v,d,p);a.push(d),s.push(h)}return new Qs(a,s,t,r)}var NQ=ip.prototype.constructor;function DQ(){return new NQ(this._groups,this._parents)}function MQ(e,t){var r,n,i;return function(){var a=Ch(this,e),s=(this.style.removeProperty(e),Ch(this,e));return a===s?null:a===r&&s===n?i:i=t(r=a,n=s)}}function sP(e){return function(){this.style.removeProperty(e)}}function OQ(e,t,r){var n,i=r+"",a;return function(){var s=Ch(this,e);return s===i?null:s===n?a:a=t(n=s,r)}}function PQ(e,t,r){var n,i,a;return function(){var s=Ch(this,e),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),Ch(this,e))),s===l?null:s===n&&l===i?a:(i=l,a=t(n=s,o))}}function BQ(e,t){var r,n,i,a="style."+t,s="end."+a,o;return function(){var l=gs(this,e),u=l.on,h=l.value[a]==null?o||(o=sP(t)):void 0;(u!==r||i!==h)&&(n=(r=u).copy()).on(s,i=h),l.on=n}}function FQ(e,t,r){var n=(e+="")=="transform"?bY:aP;return t==null?this.styleTween(e,MQ(e,n)).on("end.style."+e,sP(e)):typeof t=="function"?this.styleTween(e,PQ(e,n,sC(this,"style."+e,t))).each(BQ(this._id,e)):this.styleTween(e,OQ(e,n,t),r).on("end.style."+e,null)}function $Q(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function zQ(e,t,r){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&$Q(e,s,r)),n}return a._value=t,a}function VQ(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,zQ(e,t,r??""))}function GQ(e){return function(){this.textContent=e}}function UQ(e){return function(){var t=e(this);this.textContent=t??""}}function WQ(e){return this.tween("text",typeof e=="function"?UQ(sC(this,"text",e)):GQ(e==null?"":e+""))}function YQ(e){return function(t){this.textContent=e.call(this,t)}}function HQ(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&YQ(i)),t}return n._value=e,n}function qQ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,HQ(e))}function XQ(){for(var e=this._name,t=this._id,r=oP(),n=this._groups,i=n.length,a=0;a<i;++a)for(var s=n[a],o=s.length,l,u=0;u<o;++u)if(l=s[u]){var h=Ga(l,t);ly(l,e,r,u,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Qs(n,this._parents,e,r)}function jQ(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--i===0&&a()}};r.each(function(){var u=gs(this,n),h=u.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),u.on=t}),i===0&&a()})}var KQ=0;function Qs(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function oP(){return++KQ}var ks=ip.prototype;Qs.prototype={constructor:Qs,select:RQ,selectAll:IQ,selectChild:ks.selectChild,selectChildren:ks.selectChildren,filter:EQ,merge:kQ,selection:DQ,transition:XQ,call:ks.call,nodes:ks.nodes,node:ks.node,size:ks.size,empty:ks.empty,each:ks.each,on:_Q,attr:oQ,attrTween:fQ,style:FQ,styleTween:VQ,text:WQ,textTween:qQ,remove:LQ,tween:tQ,delay:pQ,duration:yQ,ease:bQ,easeVarying:wQ,end:jQ,[Symbol.iterator]:ks[Symbol.iterator]};function ZQ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var QQ={time:null,delay:0,duration:250,ease:ZQ};function JQ(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function tJ(e){var t,r;e instanceof Qs?(t=e._id,e=e._name):(t=oP(),(r=QQ).time=iC(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var s=n[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&ly(l,e,t,u,s,r||JQ(l,t));return new Qs(n,this._parents,e,t)}ip.prototype.interrupt=ZZ;ip.prototype.transition=tJ;function eJ(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const rJ=eJ("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Kf(e,t,r){this.k=e,this.x=t,this.y=r}Kf.prototype={constructor:Kf,scale:function(e){return e===1?this:new Kf(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Kf(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Kf.prototype;var lP=typeof global=="object"&&global&&global.Object===Object&&global,nJ=typeof self=="object"&&self&&self.Object===Object&&self,ps=lP||nJ||Function("return this")(),va=ps.Symbol,cP=Object.prototype,iJ=cP.hasOwnProperty,aJ=cP.toString,Lf=va?va.toStringTag:void 0;function sJ(e){var t=iJ.call(e,Lf),r=e[Lf];try{e[Lf]=void 0;var n=!0}catch{}var i=aJ.call(e);return n&&(t?e[Lf]=r:delete e[Lf]),i}var oJ=Object.prototype,lJ=oJ.toString;function cJ(e){return lJ.call(e)}var uJ="[object Null]",hJ="[object Undefined]",f3=va?va.toStringTag:void 0;function so(e){return e==null?e===void 0?hJ:uJ:f3&&f3 in Object(e)?sJ(e):cJ(e)}function Ri(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var fJ="[object AsyncFunction]",dJ="[object Function]",gJ="[object GeneratorFunction]",pJ="[object Proxy]";function ma(e){if(!Ri(e))return!1;var t=so(e);return t==dJ||t==gJ||t==fJ||t==pJ}var q2=ps["__core-js_shared__"],d3=function(){var e=/[^.]+$/.exec(q2&&q2.keys&&q2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function vJ(e){return!!d3&&d3 in e}var mJ=Function.prototype,yJ=mJ.toString;function yc(e){if(e!=null){try{return yJ.call(e)}catch{}try{return e+""}catch{}}return""}var xJ=/[\\^$.*+?()[\]{}|]/g,bJ=/^\[object .+?Constructor\]$/,TJ=Function.prototype,wJ=Object.prototype,EJ=TJ.toString,kJ=wJ.hasOwnProperty,CJ=RegExp("^"+EJ.call(kJ).replace(xJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SJ(e){if(!Ri(e)||vJ(e))return!1;var t=ma(e)?CJ:bJ;return t.test(yc(e))}function _J(e,t){return e==null?void 0:e[t]}function xc(e,t){var r=_J(e,t);return SJ(r)?r:void 0}var bg=xc(Object,"create");function AJ(){this.__data__=bg?bg(null):{},this.size=0}function LJ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var RJ="__lodash_hash_undefined__",IJ=Object.prototype,NJ=IJ.hasOwnProperty;function DJ(e){var t=this.__data__;if(bg){var r=t[e];return r===RJ?void 0:r}return NJ.call(t,e)?t[e]:void 0}var MJ=Object.prototype,OJ=MJ.hasOwnProperty;function PJ(e){var t=this.__data__;return bg?t[e]!==void 0:OJ.call(t,e)}var BJ="__lodash_hash_undefined__";function FJ(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=bg&&t===void 0?BJ:t,this}function Zl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Zl.prototype.clear=AJ;Zl.prototype.delete=LJ;Zl.prototype.get=DJ;Zl.prototype.has=PJ;Zl.prototype.set=FJ;function $J(){this.__data__=[],this.size=0}function Zh(e,t){return e===t||e!==e&&t!==t}function cy(e,t){for(var r=e.length;r--;)if(Zh(e[r][0],t))return r;return-1}var zJ=Array.prototype,VJ=zJ.splice;function GJ(e){var t=this.__data__,r=cy(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():VJ.call(t,r,1),--this.size,!0}function UJ(e){var t=this.__data__,r=cy(t,e);return r<0?void 0:t[r][1]}function WJ(e){return cy(this.__data__,e)>-1}function YJ(e,t){var r=this.__data__,n=cy(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function oo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}oo.prototype.clear=$J;oo.prototype.delete=GJ;oo.prototype.get=UJ;oo.prototype.has=WJ;oo.prototype.set=YJ;var Tg=xc(ps,"Map");function HJ(){this.size=0,this.__data__={hash:new Zl,map:new(Tg||oo),string:new Zl}}function qJ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function uy(e,t){var r=e.__data__;return qJ(t)?r[typeof t=="string"?"string":"hash"]:r.map}function XJ(e){var t=uy(this,e).delete(e);return this.size-=t?1:0,t}function jJ(e){return uy(this,e).get(e)}function KJ(e){return uy(this,e).has(e)}function ZJ(e,t){var r=uy(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function lo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}lo.prototype.clear=HJ;lo.prototype.delete=XJ;lo.prototype.get=jJ;lo.prototype.has=KJ;lo.prototype.set=ZJ;var QJ="Expected a function";function Qh(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(QJ);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(Qh.Cache||lo),r}Qh.Cache=lo;function JJ(){this.__data__=new oo,this.size=0}function ttt(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function ett(e){return this.__data__.get(e)}function rtt(e){return this.__data__.has(e)}var ntt=200;function itt(e,t){var r=this.__data__;if(r instanceof oo){var n=r.__data__;if(!Tg||n.length<ntt-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new lo(n)}return r.set(e,t),this.size=r.size,this}function Ia(e){var t=this.__data__=new oo(e);this.size=t.size}Ia.prototype.clear=JJ;Ia.prototype.delete=ttt;Ia.prototype.get=ett;Ia.prototype.has=rtt;Ia.prototype.set=itt;var Ev=function(){try{var e=xc(Object,"defineProperty");return e({},"",{}),e}catch{}}();function ap(e,t,r){t=="__proto__"&&Ev?Ev(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ow(e,t,r){(r!==void 0&&!Zh(e[t],r)||r===void 0&&!(t in e))&&ap(e,t,r)}function att(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),o=s.length;o--;){var l=s[++i];if(r(a[l],l,a)===!1)break}return t}}var oC=att(),uP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,g3=uP&&typeof module=="object"&&module&&!module.nodeType&&module,stt=g3&&g3.exports===uP,p3=stt?ps.Buffer:void 0,v3=p3?p3.allocUnsafe:void 0;function hP(e,t){if(t)return e.slice();var r=e.length,n=v3?v3(r):new e.constructor(r);return e.copy(n),n}var kv=ps.Uint8Array;function lC(e){var t=new e.constructor(e.byteLength);return new kv(t).set(new kv(e)),t}function fP(e,t){var r=t?lC(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function dP(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var m3=Object.create,ott=function(){function e(){}return function(t){if(!Ri(t))return{};if(m3)return m3(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function gP(e,t){return function(r){return e(t(r))}}var cC=gP(Object.getPrototypeOf,Object),ltt=Object.prototype;function sp(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ltt;return e===r}function pP(e){return typeof e.constructor=="function"&&!sp(e)?ott(cC(e)):{}}function ya(e){return e!=null&&typeof e=="object"}var ctt="[object Arguments]";function y3(e){return ya(e)&&so(e)==ctt}var vP=Object.prototype,utt=vP.hasOwnProperty,htt=vP.propertyIsEnumerable,_h=y3(function(){return arguments}())?y3:function(e){return ya(e)&&utt.call(e,"callee")&&!htt.call(e,"callee")},We=Array.isArray,ftt=9007199254740991;function uC(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ftt}function vs(e){return e!=null&&uC(e.length)&&!ma(e)}function Cv(e){return ya(e)&&vs(e)}function dtt(){return!1}var mP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,x3=mP&&typeof module=="object"&&module&&!module.nodeType&&module,gtt=x3&&x3.exports===mP,b3=gtt?ps.Buffer:void 0,ptt=b3?b3.isBuffer:void 0,Ah=ptt||dtt,vtt="[object Object]",mtt=Function.prototype,ytt=Object.prototype,yP=mtt.toString,xtt=ytt.hasOwnProperty,btt=yP.call(Object);function Ttt(e){if(!ya(e)||so(e)!=vtt)return!1;var t=cC(e);if(t===null)return!0;var r=xtt.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&yP.call(r)==btt}var wtt="[object Arguments]",Ett="[object Array]",ktt="[object Boolean]",Ctt="[object Date]",Stt="[object Error]",_tt="[object Function]",Att="[object Map]",Ltt="[object Number]",Rtt="[object Object]",Itt="[object RegExp]",Ntt="[object Set]",Dtt="[object String]",Mtt="[object WeakMap]",Ott="[object ArrayBuffer]",Ptt="[object DataView]",Btt="[object Float32Array]",Ftt="[object Float64Array]",$tt="[object Int8Array]",ztt="[object Int16Array]",Vtt="[object Int32Array]",Gtt="[object Uint8Array]",Utt="[object Uint8ClampedArray]",Wtt="[object Uint16Array]",Ytt="[object Uint32Array]",kr={};kr[Btt]=kr[Ftt]=kr[$tt]=kr[ztt]=kr[Vtt]=kr[Gtt]=kr[Utt]=kr[Wtt]=kr[Ytt]=!0;kr[wtt]=kr[Ett]=kr[Ott]=kr[ktt]=kr[Ptt]=kr[Ctt]=kr[Stt]=kr[_tt]=kr[Att]=kr[Ltt]=kr[Rtt]=kr[Itt]=kr[Ntt]=kr[Dtt]=kr[Mtt]=!1;function Htt(e){return ya(e)&&uC(e.length)&&!!kr[so(e)]}function op(e){return function(t){return e(t)}}var xP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jd=xP&&typeof module=="object"&&module&&!module.nodeType&&module,qtt=jd&&jd.exports===xP,X2=qtt&&lP.process,Po=function(){try{var e=jd&&jd.require&&jd.require("util").types;return e||X2&&X2.binding&&X2.binding("util")}catch{}}(),T3=Po&&Po.isTypedArray,hy=T3?op(T3):Htt;function lw(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Xtt=Object.prototype,jtt=Xtt.hasOwnProperty;function lp(e,t,r){var n=e[t];(!(jtt.call(e,t)&&Zh(n,r))||r===void 0&&!(t in e))&&ap(e,t,r)}function Jh(e,t,r,n){var i=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var o=t[a],l=void 0;l===void 0&&(l=e[o]),i?ap(r,o,l):lp(r,o,l)}return r}function Ktt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Ztt=9007199254740991,Qtt=/^(?:0|[1-9]\d*)$/;function fy(e,t){var r=typeof e;return t=t??Ztt,!!t&&(r=="number"||r!="symbol"&&Qtt.test(e))&&e>-1&&e%1==0&&e<t}var Jtt=Object.prototype,tet=Jtt.hasOwnProperty;function bP(e,t){var r=We(e),n=!r&&_h(e),i=!r&&!n&&Ah(e),a=!r&&!n&&!i&&hy(e),s=r||n||i||a,o=s?Ktt(e.length,String):[],l=o.length;for(var u in e)(t||tet.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||fy(u,l)))&&o.push(u);return o}function eet(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var ret=Object.prototype,net=ret.hasOwnProperty;function iet(e){if(!Ri(e))return eet(e);var t=sp(e),r=[];for(var n in e)n=="constructor"&&(t||!net.call(e,n))||r.push(n);return r}function bc(e){return vs(e)?bP(e,!0):iet(e)}function aet(e){return Jh(e,bc(e))}function set(e,t,r,n,i,a,s){var o=lw(e,r),l=lw(t,r),u=s.get(l);if(u){ow(e,r,u);return}var h=a?a(o,l,r+"",e,t,s):void 0,f=h===void 0;if(f){var d=We(l),g=!d&&Ah(l),p=!d&&!g&&hy(l);h=l,d||g||p?We(o)?h=o:Cv(o)?h=dP(o):g?(f=!1,h=hP(l,!0)):p?(f=!1,h=fP(l,!0)):h=[]:Ttt(l)||_h(l)?(h=o,_h(o)?h=aet(o):(!Ri(o)||ma(o))&&(h=pP(l))):f=!1}f&&(s.set(l,h),i(h,l,n,a,s),s.delete(l)),ow(e,r,h)}function TP(e,t,r,n,i){e!==t&&oC(t,function(a,s){if(i||(i=new Ia),Ri(a))set(e,t,s,r,TP,n,i);else{var o=n?n(lw(e,s),a,s+"",e,t,i):void 0;o===void 0&&(o=a),ow(e,s,o)}},bc)}function Js(e){return e}function oet(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var w3=Math.max;function wP(e,t,r){return t=w3(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=w3(n.length-t,0),s=Array(a);++i<a;)s[i]=n[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=n[i];return o[t]=r(s),oet(e,this,o)}}function iu(e){return function(){return e}}var cet=Ev?function(e,t){return Ev(e,"toString",{configurable:!0,enumerable:!1,value:iu(t),writable:!0})}:Js,uet=800,het=16,fet=Date.now;function det(e){var t=0,r=0;return function(){var n=fet(),i=het-(n-r);if(r=n,i>0){if(++t>=uet)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var EP=det(cet);function cp(e,t){return EP(wP(e,t,Js),e+"")}function wg(e,t,r){if(!Ri(r))return!1;var n=typeof t;return(n=="number"?vs(r)&&fy(t,r.length):n=="string"&&t in r)?Zh(r[t],e):!1}function kP(e){return cp(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,s&&wg(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var o=r[n];o&&e(t,o,n,a)}return t})}var Sv=kP(function(e,t,r){TP(e,t,r)}),CP="​",get={curveBasis:uu,curveBasisClosed:TW,curveBasisOpen:wW,curveBumpX:v6,curveBumpY:m6,curveBundle:EW,curveCardinalClosed:kW,curveCardinalOpen:CW,curveCardinal:E6,curveCatmullRomClosed:SW,curveCatmullRomOpen:_W,curveCatmullRom:C6,curveLinear:ag,curveLinearClosed:AW,curveMonotoneX:I6,curveMonotoneY:N6,curveNatural:M6,curveStep:O6,curveStepAfter:B6,curveStepBefore:P6},pet=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,vet=x(function(e,t){const r=SP(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(r)){const s=r.map(o=>o.args);lv(s),n=an(n,[...s])}else n=r.args;if(!n)return;let i=zk(e,t);const a="config";return n[a]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),n[i]=n[a],delete n[a]),n},"detectInit"),SP=x(function(e,t=null){var r,n;try{const i=new RegExp(`[%]{2}(?![{]${pet.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(i,"").replace(/'/gm,'"'),et.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let a;const s=[];for(;(a=qd.exec(e))!==null;)if(a.index===qd.lastIndex&&qd.lastIndex++,a&&!t||t&&((r=a[1])!=null&&r.match(t))||t&&((n=a[2])!=null&&n.match(t))){const o=a[1]?a[1]:a[2],l=a[3]?a[3].trim():a[4]?JSON.parse(a[4].trim()):null;s.push({type:o,args:l})}return s.length===0?{type:e,args:null}:s.length===1?s[0]:s}catch(i){return et.error(`ERROR: ${i.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),met=x(function(e){return e.replace(qd,"")},"removeDirectives"),yet=x(function(e,t){for(const[r,n]of t.entries())if(n.match(e))return r;return-1},"isSubstringInArray");function hC(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return get[r]??t}x(hC,"interpolateToCurve");function _P(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?mc.sanitizeUrl(r):r}x(_P,"formatUrl");var xet=x((e,...t)=>{const r=e.split("."),n=r.length-1,i=r[n];let a=window;for(let s=0;s<n;s++)if(a=a[r[s]],!a){et.error(`Function name: ${e} not found in window`);return}a[i](...t)},"runFunc");function fC(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}x(fC,"distance");function AP(e){let t,r=0;e.forEach(i=>{r+=fC(i,t),t=i});const n=r/2;return dC(e,n)}x(AP,"traverseEdge");function LP(e){return e.length===1?e[0]:AP(e)}x(LP,"calcLabelPosition");var E3=x((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),dC=x((e,t)=>{let r,n=t;for(const i of e){if(r){const a=fC(i,r);if(a===0)return r;if(a<n)n-=a;else{const s=n/a;if(s<=0)return r;if(s>=1)return{x:i.x,y:i.y};if(s>0&&s<1)return{x:E3((1-s)*r.x+s*i.x,5),y:E3((1-s)*r.y+s*i.y,5)}}}r=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),bet=x((e,t,r)=>{et.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const i=dC(t,25),a=e?10:5,s=Math.atan2(t[0].y-i.y,t[0].x-i.x),o={x:0,y:0};return o.x=Math.sin(s)*a+(t[0].x+i.x)/2,o.y=-Math.cos(s)*a+(t[0].y+i.y)/2,o},"calcCardinalityPosition");function RP(e,t,r){const n=structuredClone(r);et.info("our points",n),t!=="start_left"&&t!=="start_right"&&n.reverse();const i=25+e,a=dC(n,i),s=10+e*.5,o=Math.atan2(n[0].y-a.y,n[0].x-a.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(o+Math.PI)*s+(n[0].x+a.x)/2,l.y=-Math.cos(o+Math.PI)*s+(n[0].y+a.y)/2):t==="end_right"?(l.x=Math.sin(o-Math.PI)*s+(n[0].x+a.x)/2-5,l.y=-Math.cos(o-Math.PI)*s+(n[0].y+a.y)/2-5):t==="end_left"?(l.x=Math.sin(o)*s+(n[0].x+a.x)/2-5,l.y=-Math.cos(o)*s+(n[0].y+a.y)/2-5):(l.x=Math.sin(o)*s+(n[0].x+a.x)/2,l.y=-Math.cos(o)*s+(n[0].y+a.y)/2),l}x(RP,"calcTerminalLabelPosition");function gC(e){let t="",r="";for(const n of e)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":t=t+n+";");return{style:t,labelStyle:r}}x(gC,"getStylesFromArray");var k3=0,IP=x(()=>(k3++,"id-"+Math.random().toString(36).substr(2,12)+"-"+k3),"generateId");function NP(e){let t="";const r="0123456789abcdef",n=r.length;for(let i=0;i<e;i++)t+=r.charAt(Math.floor(Math.random()*n));return t}x(NP,"makeRandomHex");var DP=x(e=>NP(e.length),"random"),Tet=x(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),wet=x(function(e,t){const r=t.text.replace(Xt.lineBreakRegex," "),[,n]=tl(t.fontSize),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.style("text-anchor",t.anchor),i.style("font-family",t.fontFamily),i.style("font-size",n),i.style("font-weight",t.fontWeight),i.attr("fill",t.fill),t.class!==void 0&&i.attr("class",t.class);const a=i.append("tspan");return a.attr("x",t.x+t.textMargin*2),a.attr("fill",t.fill),a.text(r),i},"drawSimpleText"),MP=Qh((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),Xt.lineBreakRegex.test(e)))return e;const n=e.split(" ").filter(Boolean),i=[];let a="";return n.forEach((s,o)=>{const l=ui(`${s} `,r),u=ui(a,r);if(l>t){const{hyphenatedStrings:d,remainingWord:g}=Eet(s,t,"-",r);i.push(a,...d),a=g}else u+l>=t?(i.push(a),a=s):a=[a,s].filter(Boolean).join(" ");o+1===n.length&&i.push(a)}),i.filter(s=>s!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),Eet=Qh((e,t,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const i=[...e],a=[];let s="";return i.forEach((o,l)=>{const u=`${s}${o}`;if(ui(u,n)>=t){const f=l+1,d=i.length===f,g=`${u}${r}`;a.push(d?u:g),s=""}else s=u}),{hyphenatedStrings:a,remainingWord:s}},(e,t,r="-",n)=>`${e}${t}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function _v(e,t){return pC(e,t).height}x(_v,"calculateTextHeight");function ui(e,t){return pC(e,t).width}x(ui,"calculateTextWidth");var pC=Qh((e,t)=>{const{fontSize:r=12,fontFamily:n="Arial",fontWeight:i=400}=t;if(!e)return{width:0,height:0};const[,a]=tl(r),s=["sans-serif",n],o=e.split(Xt.lineBreakRegex),l=[],u=qt("body");if(!u.remove)return{width:0,height:0,lineHeight:0};const h=u.append("svg");for(const d of s){let g=0;const p={width:0,height:0,lineHeight:0};for(const v of o){const m=Tet();m.text=v||CP;const y=wet(h,m).style("font-size",a).style("font-weight",i).style("font-family",d),b=(y._groups||y)[0][0].getBBox();if(b.width===0&&b.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,b.width)),g=Math.round(b.height),p.height+=g,p.lineHeight=Math.round(Math.max(p.lineHeight,g))}l.push(p)}h.remove();const f=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[f]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),Iu,ket=(Iu=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},x(Iu,"InitIDGenerator"),Iu),Jp,Cet=x(function(e){return Jp=Jp||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Jp.innerHTML=e,unescape(Jp.textContent)},"entityDecode");function vC(e){return"str"in e}x(vC,"isDetailedError");var _et=x((e,t,r,n)=>{var a;if(!n)return;const i=(a=e.node())==null?void 0:a.getBBox();i&&e.append("text").text(n).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-r).attr("class",t)},"insertTitle"),tl=x(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function xa(e,t){return Sv({},e,t)}x(xa,"cleanAndMerge");var De={assignWithDepth:an,wrapLabel:MP,calculateTextHeight:_v,calculateTextWidth:ui,calculateTextDimensions:pC,cleanAndMerge:xa,detectInit:vet,detectDirective:SP,isSubstringInArray:yet,interpolateToCurve:hC,calcLabelPosition:LP,calcCardinalityPosition:bet,calcTerminalLabelPosition:RP,formatUrl:_P,getStylesFromArray:gC,generateId:IP,random:DP,runFunc:xet,entityDecode:Cet,insertTitle:_et,parseFontSize:tl,InitIDGenerator:ket},Aet=x(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?"ﬂ°°"+n+"¶ß":"ﬂ°"+n+"¶ß"}),t},"encodeEntities"),cs=x(function(e){return e.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),Kd=x((e,t,{counter:r=0,prefix:n,suffix:i},a)=>a||`${n?`${n}_`:""}${e}_${t}_${r}${i?`_${i}`:""}`,"getEdgeId");function hi(e){return e??null}x(hi,"handleUndefinedAttr");function mC(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Tc=mC();function OP(e){Tc=e}var Zd={exec:()=>null};function lr(e,t=""){let r=typeof e=="string"?e:e.source;const n={replace:(i,a)=>{let s=typeof a=="string"?a:a.source;return s=s.replace(ci.caret,"$1"),r=r.replace(i,s),n},getRegex:()=>new RegExp(r,t)};return n}var ci={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Let=/^(?:[ \t]*(?:\n|$))+/,Ret=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Iet=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,up=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Net=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,yC=/(?:[*+-]|\d{1,9}[.)])/,PP=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,BP=lr(PP).replace(/bull/g,yC).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Det=lr(PP).replace(/bull/g,yC).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),xC=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Met=/^[^\n]+/,bC=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Oet=lr(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",bC).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Pet=lr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,yC).getRegex(),dy="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",TC=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Bet=lr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",TC).replace("tag",dy).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),FP=lr(xC).replace("hr",up).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dy).getRegex(),Fet=lr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",FP).getRegex(),wC={blockquote:Fet,code:Ret,def:Oet,fences:Iet,heading:Net,hr:up,html:Bet,lheading:BP,list:Pet,newline:Let,paragraph:FP,table:Zd,text:Met},C3=lr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",up).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dy).getRegex(),$et={...wC,lheading:Det,table:C3,paragraph:lr(xC).replace("hr",up).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",C3).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dy).getRegex()},zet={...wC,html:lr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",TC).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Zd,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:lr(xC).replace("hr",up).replace("heading",` *#{1,6} *[^
]`).replace("lheading",BP).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Vet=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Get=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,$P=/^( {2,}|\\)\n(?!\s*$)/,Uet=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,gy=/[\p{P}\p{S}]/u,EC=/[\s\p{P}\p{S}]/u,zP=/[^\s\p{P}\p{S}]/u,Wet=lr(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,EC).getRegex(),VP=/(?!~)[\p{P}\p{S}]/u,Yet=/(?!~)[\s\p{P}\p{S}]/u,Het=/(?:[^\s\p{P}\p{S}]|~)/u,qet=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,GP=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Xet=lr(GP,"u").replace(/punct/g,gy).getRegex(),jet=lr(GP,"u").replace(/punct/g,VP).getRegex(),UP="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Ket=lr(UP,"gu").replace(/notPunctSpace/g,zP).replace(/punctSpace/g,EC).replace(/punct/g,gy).getRegex(),Zet=lr(UP,"gu").replace(/notPunctSpace/g,Het).replace(/punctSpace/g,Yet).replace(/punct/g,VP).getRegex(),Qet=lr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,zP).replace(/punctSpace/g,EC).replace(/punct/g,gy).getRegex(),Jet=lr(/\\(punct)/,"gu").replace(/punct/g,gy).getRegex(),trt=lr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ert=lr(TC).replace("(?:-->|$)","-->").getRegex(),rrt=lr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ert).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Av=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,nrt=lr(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Av).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),WP=lr(/^!?\[(label)\]\[(ref)\]/).replace("label",Av).replace("ref",bC).getRegex(),YP=lr(/^!?\[(ref)\](?:\[\])?/).replace("ref",bC).getRegex(),irt=lr("reflink|nolink(?!\\()","g").replace("reflink",WP).replace("nolink",YP).getRegex(),kC={_backpedal:Zd,anyPunctuation:Jet,autolink:trt,blockSkip:qet,br:$P,code:Get,del:Zd,emStrongLDelim:Xet,emStrongRDelimAst:Ket,emStrongRDelimUnd:Qet,escape:Vet,link:nrt,nolink:YP,punctuation:Wet,reflink:WP,reflinkSearch:irt,tag:rrt,text:Uet,url:Zd},art={...kC,link:lr(/^!?\[(label)\]\((.*?)\)/).replace("label",Av).getRegex(),reflink:lr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Av).getRegex()},cw={...kC,emStrongRDelimAst:Zet,emStrongLDelim:jet,url:lr(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},srt={...cw,br:lr($P).replace("{2,}","*").getRegex(),text:lr(cw.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},t0={normal:wC,gfm:$et,pedantic:zet},Rf={normal:kC,gfm:cw,breaks:srt,pedantic:art},ort={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},S3=e=>ort[e];function Xa(e,t){if(t){if(ci.escapeTest.test(e))return e.replace(ci.escapeReplace,S3)}else if(ci.escapeTestNoEncode.test(e))return e.replace(ci.escapeReplaceNoEncode,S3);return e}function _3(e){try{e=encodeURI(e).replace(ci.percentDecode,"%")}catch{return null}return e}function A3(e,t){var a;const r=e.replace(ci.findPipe,(s,o,l)=>{let u=!1,h=o;for(;--h>=0&&l[h]==="\\";)u=!u;return u?"|":" |"}),n=r.split(ci.splitPipe);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!((a=n.at(-1))!=null&&a.trim())&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(ci.slashPipe,"|");return n}function If(e,t,r){const n=e.length;if(n===0)return"";let i=0;for(;i<n&&e.charAt(n-i-1)===t;)i++;return e.slice(0,n-i)}function lrt(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}function L3(e,t,r,n,i){const a=t.href,s=t.title||null,o=e[1].replace(i.other.outputLinkReplace,"$1");n.state.inLink=!0;const l={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:a,title:s,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,l}function crt(e,t,r){const n=e.match(r.other.indentCodeCompensation);if(n===null)return t;const i=n[1];return t.split(`
`).map(a=>{const s=a.match(r.other.beginningSpace);if(s===null)return a;const[o]=s;return o.length>=i.length?a.slice(i.length):a}).join(`
`)}var Lv=class{constructor(e){Se(this,"options");Se(this,"rules");Se(this,"lexer");this.options=e||Tc}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:If(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],n=crt(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){const n=If(r,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(r=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:If(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=If(t[0],`
`).split(`
`),n="",i="";const a=[];for(;r.length>0;){let s=!1;const o=[];let l;for(l=0;l<r.length;l++)if(this.rules.other.blockquoteStart.test(r[l]))o.push(r[l]),s=!0;else if(!s)o.push(r[l]);else break;r=r.slice(l);const u=o.join(`
`),h=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${u}`:u,i=i?`${i}
${h}`:h;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,a,!0),this.lexer.state.top=f,r.length===0)break;const d=a.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){const g=d,p=g.raw+`
`+r.join(`
`),v=this.blockquote(p);a[a.length-1]=v,n=n.substring(0,n.length-g.raw.length)+v.raw,i=i.substring(0,i.length-g.text.length)+v.text;break}else if((d==null?void 0:d.type)==="list"){const g=d,p=g.raw+`
`+r.join(`
`),v=this.list(p);a[a.length-1]=v,n=n.substring(0,n.length-d.raw.length)+v.raw,i=i.substring(0,i.length-g.raw.length)+v.raw,r=p.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:a,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const n=r.length>1,i={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");const a=this.rules.other.listItemRegex(r);let s=!1;for(;e;){let l=!1,u="",h="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),d=e.split(`
`,1)[0],g=!f.trim(),p=0;if(this.options.pedantic?(p=2,h=f.trimStart()):g?p=t[1].length+1:(p=t[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,h=f.slice(p),p+=t[1].length),g&&this.rules.other.blankLine.test(d)&&(u+=d+`
`,e=e.substring(d.length+1),l=!0),!l){const y=this.rules.other.nextBulletRegex(p),b=this.rules.other.hrRegex(p),T=this.rules.other.fencesBeginRegex(p),w=this.rules.other.headingBeginRegex(p),k=this.rules.other.htmlBeginRegex(p);for(;e;){const S=e.split(`
`,1)[0];let E;if(d=S,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),E=d):E=d.replace(this.rules.other.tabCharGlobal,"    "),T.test(d)||w.test(d)||k.test(d)||y.test(d)||b.test(d))break;if(E.search(this.rules.other.nonSpaceChar)>=p||!d.trim())h+=`
`+E.slice(p);else{if(g||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||T.test(f)||w.test(f)||b.test(f))break;h+=`
`+d}!g&&!d.trim()&&(g=!0),u+=S+`
`,e=e.substring(S.length+1),f=E.slice(p)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(s=!0));let v=null,m;this.options.gfm&&(v=this.rules.other.listIsTask.exec(h),v&&(m=v[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:u,task:!!v,checked:m,loose:!1,text:h,tokens:[]}),i.raw+=u}const o=i.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const u=i.items[l].tokens.filter(f=>f.type==="space"),h=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));i.loose=h}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:n,title:i}}}table(e){var s;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const r=A3(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(s=t[3])!=null&&s.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(const o of n)this.rules.other.tableAlignRight.test(o)?a.align.push("right"):this.rules.other.tableAlignCenter.test(o)?a.align.push("center"):this.rules.other.tableAlignLeft.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<r.length;o++)a.header.push({text:r[o],tokens:this.lexer.inline(r[o]),header:!0,align:a.align[o]});for(const o of i)a.rows.push(A3(o,a.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:a.align[u]})));return a}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const a=If(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{const a=lrt(t[2],"()");if(a===-2)return;if(a>-1){const o=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let n=t[2],i="";if(this.options.pedantic){const a=this.rules.other.pedanticHrefTitle.exec(n);a&&(n=a[1],i=a[3])}else i=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?n=n.slice(1):n=n.slice(1,-1)),L3(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const n=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[n.toLowerCase()];if(!i){const a=r[0].charAt(0);return{type:"text",raw:a,text:a}}return L3(r,i,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!n||n[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(n[1]||n[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const a=[...n[0]].length-1;let s,o,l=a,u=0;const h=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+a);(n=h.exec(t))!=null;){if(s=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!s)continue;if(o=[...s].length,n[3]||n[4]){l+=o;continue}else if((n[5]||n[6])&&a%3&&!((a+o)%3)){u+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+u);const f=[...n[0]][0].length,d=e.slice(0,a+n.index+f+o);if(Math.min(a,o)%2){const p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}const g=d.slice(2,-2);return{type:"strong",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," ");const n=this.rules.other.nonSpaceChar.test(r),i=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return n&&i&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,n;return t[2]==="@"?(r=t[1],n="mailto:"+r):(r=t[1],n=r),{type:"link",raw:t[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let t;if(t=this.rules.inline.url.exec(e)){let n,i;if(t[2]==="@")n=t[0],i="mailto:"+n;else{let a;do a=t[0],t[0]=((r=this.rules.inline._backpedal.exec(t[0]))==null?void 0:r[0])??"";while(a!==t[0]);n=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},zs=class uw{constructor(t){Se(this,"tokens");Se(this,"options");Se(this,"state");Se(this,"tokenizer");Se(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Tc,this.options.tokenizer=this.options.tokenizer||new Lv,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={other:ci,block:t0.normal,inline:Rf.normal};this.options.pedantic?(r.block=t0.pedantic,r.inline=Rf.pedantic):this.options.gfm&&(r.block=t0.gfm,this.options.breaks?r.inline=Rf.breaks:r.inline=Rf.gfm),this.tokenizer.rules=r}static get rules(){return{block:t0,inline:Rf}}static lex(t,r){return new uw(r).lex(t)}static lexInline(t,r){return new uw(r).inlineTokens(t)}lex(t){t=t.replace(ci.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],n=!1){var i,a,s;for(this.options.pedantic&&(t=t.replace(ci.tabCharGlobal,"    ").replace(ci.spaceLine,""));t;){let o;if((a=(i=this.options.extensions)==null?void 0:i.block)!=null&&a.some(u=>(o=u.call({lexer:this},t,r))?(t=t.substring(o.raw.length),r.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);const u=r.at(-1);o.raw.length===1&&u!==void 0?u.raw+=`
`:r.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);const u=r.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+o.raw,u.text+=`
`+o.text,this.inlineQueue.at(-1).src=u.text):r.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);const u=r.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+o.raw,u.text+=`
`+o.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),r.push(o);continue}let l=t;if((s=this.options.extensions)!=null&&s.startBlock){let u=1/0;const h=t.slice(1);let f;this.options.extensions.startBlock.forEach(d=>{f=d.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(l=t.substring(0,u+1))}if(this.state.top&&(o=this.tokenizer.paragraph(l))){const u=r.at(-1);n&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+o.raw,u.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):r.push(o),n=l.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);const u=r.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+o.raw,u.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):r.push(o);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){var o,l,u;let n=t,i=null;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)h.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,i.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,s="";for(;t;){a||(s=""),a=!1;let h;if((l=(o=this.options.extensions)==null?void 0:o.inline)!=null&&l.some(d=>(h=d.call({lexer:this},t,r))?(t=t.substring(h.raw.length),r.push(h),!0):!1))continue;if(h=this.tokenizer.escape(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.tag(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.link(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(h.raw.length);const d=r.at(-1);h.type==="text"&&(d==null?void 0:d.type)==="text"?(d.raw+=h.raw,d.text+=h.text):r.push(h);continue}if(h=this.tokenizer.emStrong(t,n,s)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.codespan(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.br(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.del(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.autolink(t)){t=t.substring(h.raw.length),r.push(h);continue}if(!this.state.inLink&&(h=this.tokenizer.url(t))){t=t.substring(h.raw.length),r.push(h);continue}let f=t;if((u=this.options.extensions)!=null&&u.startInline){let d=1/0;const g=t.slice(1);let p;this.options.extensions.startInline.forEach(v=>{p=v.call({lexer:this},g),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(f=t.substring(0,d+1))}if(h=this.tokenizer.inlineText(f)){t=t.substring(h.raw.length),h.raw.slice(-1)!=="_"&&(s=h.raw.slice(-1)),a=!0;const d=r.at(-1);(d==null?void 0:d.type)==="text"?(d.raw+=h.raw,d.text+=h.text):r.push(h);continue}if(t){const d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return r}},Rv=class{constructor(e){Se(this,"options");Se(this,"parser");this.options=e||Tc}space(e){return""}code({text:e,lang:t,escaped:r}){var a;const n=(a=(t||"").match(ci.notSpaceStart))==null?void 0:a[0],i=e.replace(ci.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Xa(n)+'">'+(r?i:Xa(i,!0))+`</code></pre>
`:"<pre><code>"+(r?i:Xa(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let n="";for(let s=0;s<e.items.length;s++){const o=e.items[s];n+=this.listitem(o)}const i=t?"ol":"ul",a=t&&r!==1?' start="'+r+'"':"";return"<"+i+a+`>
`+n+"</"+i+`>
`}listitem(e){var r;let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+Xa(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let i=0;i<e.header.length;i++)r+=this.tablecell(e.header[i]);t+=this.tablerow({text:r});let n="";for(let i=0;i<e.rows.length;i++){const a=e.rows[i];r="";for(let s=0;s<a.length;s++)r+=this.tablecell(a[s]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Xa(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const n=this.parser.parseInline(r),i=_3(e);if(i===null)return n;e=i;let a='<a href="'+e+'"';return t&&(a+=' title="'+Xa(t)+'"'),a+=">"+n+"</a>",a}image({href:e,title:t,text:r,tokens:n}){n&&(r=this.parser.parseInline(n,this.parser.textRenderer));const i=_3(e);if(i===null)return Xa(r);e=i;let a=`<img src="${e}" alt="${r}"`;return t&&(a+=` title="${Xa(t)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Xa(e.text)}},CC=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Vs=class hw{constructor(t){Se(this,"options");Se(this,"renderer");Se(this,"textRenderer");this.options=t||Tc,this.options.renderer=this.options.renderer||new Rv,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new CC}static parse(t,r){return new hw(r).parse(t)}static parseInline(t,r){return new hw(r).parseInline(t)}parse(t,r=!0){var i,a;let n="";for(let s=0;s<t.length;s++){const o=t[s];if((a=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&a[o.type]){const u=o,h=this.options.extensions.renderers[u.type].call({parser:this},u);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){n+=h||"";continue}}const l=o;switch(l.type){case"space":{n+=this.renderer.space(l);continue}case"hr":{n+=this.renderer.hr(l);continue}case"heading":{n+=this.renderer.heading(l);continue}case"code":{n+=this.renderer.code(l);continue}case"table":{n+=this.renderer.table(l);continue}case"blockquote":{n+=this.renderer.blockquote(l);continue}case"list":{n+=this.renderer.list(l);continue}case"html":{n+=this.renderer.html(l);continue}case"paragraph":{n+=this.renderer.paragraph(l);continue}case"text":{let u=l,h=this.renderer.text(u);for(;s+1<t.length&&t[s+1].type==="text";)u=t[++s],h+=`
`+this.renderer.text(u);r?n+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):n+=h;continue}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}parseInline(t,r=this.renderer){var i,a;let n="";for(let s=0;s<t.length;s++){const o=t[s];if((a=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&a[o.type]){const u=this.options.extensions.renderers[o.type].call({parser:this},o);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=u||"";continue}}const l=o;switch(l.type){case"escape":{n+=r.text(l);break}case"html":{n+=r.html(l);break}case"link":{n+=r.link(l);break}case"image":{n+=r.image(l);break}case"strong":{n+=r.strong(l);break}case"em":{n+=r.em(l);break}case"codespan":{n+=r.codespan(l);break}case"br":{n+=r.br(l);break}case"del":{n+=r.del(l);break}case"text":{n+=r.text(l);break}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}},yT,t1=(yT=class{constructor(e){Se(this,"options");Se(this,"block");this.options=e||Tc}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?zs.lex:zs.lexInline}provideParser(){return this.block?Vs.parse:Vs.parseInline}},Se(yT,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),yT),urt=class{constructor(...e){Se(this,"defaults",mC());Se(this,"options",this.setOptions);Se(this,"parse",this.parseMarkdown(!0));Se(this,"parseInline",this.parseMarkdown(!1));Se(this,"Parser",Vs);Se(this,"Renderer",Rv);Se(this,"TextRenderer",CC);Se(this,"Lexer",zs);Se(this,"Tokenizer",Lv);Se(this,"Hooks",t1);this.use(...e)}walkTokens(e,t){var n,i;let r=[];for(const a of e)switch(r=r.concat(t.call(this,a)),a.type){case"table":{const s=a;for(const o of s.header)r=r.concat(this.walkTokens(o.tokens,t));for(const o of s.rows)for(const l of o)r=r.concat(this.walkTokens(l.tokens,t));break}case"list":{const s=a;r=r.concat(this.walkTokens(s.items,t));break}default:{const s=a;(i=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&i[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{const l=s[o].flat(1/0);r=r.concat(this.walkTokens(l,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const n={...r};if(n.async=this.defaults.async||n.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const a=t.renderers[i.name];a?t.renderers[i.name]=function(...s){let o=i.renderer.apply(this,s);return o===!1&&(o=a.apply(this,s)),o}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=t[i.level];a?a.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),n.extensions=t),r.renderer){const i=this.defaults.renderer||new Rv(this.defaults);for(const a in r.renderer){if(!(a in i))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const s=a,o=r.renderer[s],l=i[s];i[s]=(...u)=>{let h=o.apply(i,u);return h===!1&&(h=l.apply(i,u)),h||""}}n.renderer=i}if(r.tokenizer){const i=this.defaults.tokenizer||new Lv(this.defaults);for(const a in r.tokenizer){if(!(a in i))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const s=a,o=r.tokenizer[s],l=i[s];i[s]=(...u)=>{let h=o.apply(i,u);return h===!1&&(h=l.apply(i,u)),h}}n.tokenizer=i}if(r.hooks){const i=this.defaults.hooks||new t1;for(const a in r.hooks){if(!(a in i))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const s=a,o=r.hooks[s],l=i[s];t1.passThroughHooks.has(a)?i[s]=u=>{if(this.defaults.async)return Promise.resolve(o.call(i,u)).then(f=>l.call(i,f));const h=o.call(i,u);return l.call(i,h)}:i[s]=(...u)=>{let h=o.apply(i,u);return h===!1&&(h=l.apply(i,u)),h}}n.hooks=i}if(r.walkTokens){const i=this.defaults.walkTokens,a=r.walkTokens;n.walkTokens=function(s){let o=[];return o.push(a.call(this,s)),i&&(o=o.concat(i.call(this,s))),o}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return zs.lex(e,t??this.defaults)}parser(e,t){return Vs.parse(e,t??this.defaults)}parseMarkdown(e){return(r,n)=>{const i={...n},a={...this.defaults,...i},s=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=e);const o=a.hooks?a.hooks.provideLexer():e?zs.lex:zs.lexInline,l=a.hooks?a.hooks.provideParser():e?Vs.parse:Vs.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(r):r).then(u=>o(u,a)).then(u=>a.hooks?a.hooks.processAllTokens(u):u).then(u=>a.walkTokens?Promise.all(this.walkTokens(u,a.walkTokens)).then(()=>u):u).then(u=>l(u,a)).then(u=>a.hooks?a.hooks.postprocess(u):u).catch(s);try{a.hooks&&(r=a.hooks.preprocess(r));let u=o(r,a);a.hooks&&(u=a.hooks.processAllTokens(u)),a.walkTokens&&this.walkTokens(u,a.walkTokens);let h=l(u,a);return a.hooks&&(h=a.hooks.postprocess(h)),h}catch(u){return s(u)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const n="<p>An error occurred:</p><pre>"+Xa(r.message+"",!0)+"</pre>";return t?Promise.resolve(n):n}if(t)return Promise.reject(r);throw r}}},Ql=new urt;function ar(e,t){return Ql.parse(e,t)}ar.options=ar.setOptions=function(e){return Ql.setOptions(e),ar.defaults=Ql.defaults,OP(ar.defaults),ar};ar.getDefaults=mC;ar.defaults=Tc;ar.use=function(...e){return Ql.use(...e),ar.defaults=Ql.defaults,OP(ar.defaults),ar};ar.walkTokens=function(e,t){return Ql.walkTokens(e,t)};ar.parseInline=Ql.parseInline;ar.Parser=Vs;ar.parser=Vs.parse;ar.Renderer=Rv;ar.TextRenderer=CC;ar.Lexer=zs;ar.lexer=zs.lex;ar.Tokenizer=Lv;ar.Hooks=t1;ar.parse=ar;ar.options;ar.setOptions;ar.use;ar.walkTokens;ar.parseInline;Vs.parse;zs.lex;function HP(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from(typeof e=="string"?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(o,l){var u=l.match(/\n([\t ]+|(?!\s).)/g);return u?o.concat(u.map(function(h){var f,d;return(d=(f=h.match(/[\t ]/g))===null||f===void 0?void 0:f.length)!==null&&d!==void 0?d:0})):o},[]);if(i.length){var a=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(o){return o.replace(a,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var s=n[0];return t.forEach(function(o,l){var u=s.match(/(?:^|\n)( *)$/),h=u?u[1]:"",f=o;typeof o=="string"&&o.includes(`
`)&&(f=String(o).split(`
`).map(function(d,g){return g===0?d:""+h+d}).join(`
`)),s+=f+n[l+1]}),s}function qP(e,{markdownAutoWrap:t}){const n=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=HP(n);return t===!1?i.replace(/ /g,"&nbsp;"):i}x(qP,"preprocessMarkdown");function XP(e,t={}){const r=qP(e,t),n=ar.lexer(r),i=[[]];let a=0;function s(o,l="normal"){o.type==="text"?o.text.split(`
`).forEach((h,f)=>{f!==0&&(a++,i.push([])),h.split(" ").forEach(d=>{d=d.replace(/&#39;/g,"'"),d&&i[a].push({content:d,type:l})})}):o.type==="strong"||o.type==="em"?o.tokens.forEach(u=>{s(u,o.type)}):o.type==="html"&&i[a].push({content:o.text,type:"normal"})}return x(s,"processNode"),n.forEach(o=>{var l;o.type==="paragraph"?(l=o.tokens)==null||l.forEach(u=>{s(u)}):o.type==="html"&&i[a].push({content:o.text,type:"normal"})}),i}x(XP,"markdownToLines");function jP(e,{markdownAutoWrap:t}={}){const r=ar.lexer(e);function n(i){var a,s,o;return i.type==="text"?t===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${(a=i.tokens)==null?void 0:a.map(n).join("")}</strong>`:i.type==="em"?`<em>${(s=i.tokens)==null?void 0:s.map(n).join("")}</em>`:i.type==="paragraph"?`<p>${(o=i.tokens)==null?void 0:o.map(n).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:`Unsupported markdown: ${i.type}`}return x(n,"output"),r.map(n).join("")}x(jP,"markdownToHTML");function KP(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}x(KP,"splitTextToChars");function ZP(e,t){const r=KP(t.content);return SC(e,[],r,t.type)}x(ZP,"splitWordToFitWidth");function SC(e,t,r,n){if(r.length===0)return[{content:t.join(""),type:n},{content:"",type:n}];const[i,...a]=r,s=[...t,i];return e([{content:s.join(""),type:n}])?SC(e,s,a,n):(t.length===0&&i&&(t.push(i),r.shift()),[{content:t.join(""),type:n},{content:r.join(""),type:n}])}x(SC,"splitWordToFitWidthRecursion");function QP(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Iv(e,t)}x(QP,"splitLineToFitWidth");function Iv(e,t,r=[],n=[]){if(e.length===0)return n.length>0&&r.push(n),r.length>0?r:[];let i="";e[0].content===" "&&(i=" ",e.shift());const a=e.shift()??{content:" ",type:"normal"},s=[...n];if(i!==""&&s.push({content:i,type:"normal"}),s.push(a),t(s))return Iv(e,t,r,s);if(n.length>0)r.push(n),e.unshift(a);else if(a.content){const[o,l]=ZP(t,a);r.push([o]),l.content&&e.unshift(l)}return Iv(e,t,r)}x(Iv,"splitLineToFitWidthRecursion");function fw(e,t){t&&e.attr("style",t)}x(fw,"applyStyle");async function JP(e,t,r,n,i=!1){const a=e.append("foreignObject");a.attr("width",`${10*r}px`),a.attr("height",`${10*r}px`);const s=a.append("xhtml:div");let o=t.label;t.label&&Kn(t.label)&&(o=await ep(t.label.replace(Xt.lineBreakRegex,`
`),pt()));const l=t.isNode?"nodeLabel":"edgeLabel",u=s.append("span");u.html(o),fw(u,t.labelStyle),u.attr("class",`${l} ${n}`),fw(s,t.labelStyle),s.style("display","table-cell"),s.style("white-space","nowrap"),s.style("line-height","1.5"),s.style("max-width",r+"px"),s.style("text-align","center"),s.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&s.attr("class","labelBkg");let h=s.node().getBoundingClientRect();return h.width===r&&(s.style("display","table"),s.style("white-space","break-spaces"),s.style("width",r+"px"),h=s.node().getBoundingClientRect()),a.node()}x(JP,"addHtmlSpan");function py(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}x(py,"createTspan");function t8(e,t,r){const n=e.append("text"),i=py(n,1,t);vy(i,r);const a=i.node().getComputedTextLength();return n.remove(),a}x(t8,"computeWidthOfText");function e8(e,t,r){var s;const n=e.append("text"),i=py(n,1,t);vy(i,[{content:r,type:"normal"}]);const a=(s=i.node())==null?void 0:s.getBoundingClientRect();return a&&n.remove(),a}x(e8,"computeDimensionOfText");function r8(e,t,r,n=!1){const a=t.append("g"),s=a.insert("rect").attr("class","background").attr("style","stroke: none"),o=a.append("text").attr("y","-10.1");let l=0;for(const u of r){const h=x(d=>t8(a,1.1,d)<=e,"checkWidth"),f=h(u)?[u]:QP(u,h);for(const d of f){const g=py(o,l,1.1);vy(g,d),l++}}if(n){const u=o.node().getBBox(),h=2;return s.attr("x",u.x-h).attr("y",u.y-h).attr("width",u.width+2*h).attr("height",u.height+2*h),a.node()}else return o.node()}x(r8,"createFormattedText");function vy(e,t){e.text(""),t.forEach((r,n)=>{const i=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");n===0?i.text(r.content):i.text(" "+r.content)})}x(vy,"updateTextContentAndStyles");function _C(e){return e.replace(/fa[bklrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)}x(_C,"replaceIconSubstring");var Pi=x(async(e,t="",{style:r="",isTitle:n=!1,classes:i="",useHtmlLabels:a=!0,isNode:s=!0,width:o=200,addSvgBackground:l=!1}={},u)=>{if(et.debug("XYZ createText",t,r,n,i,a,s,"addSvgBackground: ",l),a){const h=jP(t,u),f=_C(cs(h)),d=t.replace(/\\\\/g,"\\"),g={isNode:s,label:Kn(t)?d:f,labelStyle:r.replace("fill:","color:")};return await JP(e,g,o,i,l)}else{const h=t.replace(/<br\s*\/?>/g,"<br/>"),f=XP(h.replace("<br>","<br/>"),u),d=r8(o,e,f,t?l:!1);if(s){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const g=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");qt(d).attr("style",g)}else{const g=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");qt(d).select("rect").attr("style",g.replace(/background:/g,"fill:"));const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");qt(d).select("text").attr("style",p)}return d}},"createText");function j2(e,t,r){if(e&&e.length){const[n,i]=t,a=Math.PI/180*r,s=Math.cos(a),o=Math.sin(a);for(const l of e){const[u,h]=l;l[0]=(u-n)*s-(h-i)*o+n,l[1]=(u-n)*o+(h-i)*s+i}}}function hrt(e,t){return e[0]===t[0]&&e[1]===t[1]}function frt(e,t,r,n=1){const i=r,a=Math.max(t,.1),s=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,o=[0,0];if(i)for(const u of s)j2(u,o,i);const l=function(u,h,f){const d=[];for(const b of u){const T=[...b];hrt(T[0],T[T.length-1])||T.push([T[0][0],T[0][1]]),T.length>2&&d.push(T)}const g=[];h=Math.max(h,.1);const p=[];for(const b of d)for(let T=0;T<b.length-1;T++){const w=b[T],k=b[T+1];if(w[1]!==k[1]){const S=Math.min(w[1],k[1]);p.push({ymin:S,ymax:Math.max(w[1],k[1]),x:S===w[1]?w[0]:k[0],islope:(k[0]-w[0])/(k[1]-w[1])})}}if(p.sort((b,T)=>b.ymin<T.ymin?-1:b.ymin>T.ymin?1:b.x<T.x?-1:b.x>T.x?1:b.ymax===T.ymax?0:(b.ymax-T.ymax)/Math.abs(b.ymax-T.ymax)),!p.length)return g;let v=[],m=p[0].ymin,y=0;for(;v.length||p.length;){if(p.length){let b=-1;for(let T=0;T<p.length&&!(p[T].ymin>m);T++)b=T;p.splice(0,b+1).forEach(T=>{v.push({s:m,edge:T})})}if(v=v.filter(b=>!(b.edge.ymax<=m)),v.sort((b,T)=>b.edge.x===T.edge.x?0:(b.edge.x-T.edge.x)/Math.abs(b.edge.x-T.edge.x)),(f!==1||y%h==0)&&v.length>1)for(let b=0;b<v.length;b+=2){const T=b+1;if(T>=v.length)break;const w=v[b].edge,k=v[T].edge;g.push([[Math.round(w.x),m],[Math.round(k.x),m]])}m+=f,v.forEach(b=>{b.edge.x=b.edge.x+f*b.edge.islope}),y++}return g}(s,a,n);if(i){for(const u of s)j2(u,o,-i);(function(u,h,f){const d=[];u.forEach(g=>d.push(...g)),j2(d,h,f)})(l,o,-i)}return l}function hp(e,t){var r;const n=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=4*t.strokeWidth),i=Math.round(Math.max(i,.1));let a=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(a=i),frt(e,i,n,a||1)}class AC{constructor(t){this.helper=t}fillPolygons(t,r){return this._fillPolygons(t,r)}_fillPolygons(t,r){const n=hp(t,r);return{type:"fillSketch",ops:this.renderLines(n,r)}}renderLines(t,r){const n=[];for(const i of t)n.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],r));return n}}function my(e){const t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}class drt extends AC{fillPolygons(t,r){let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);const i=hp(t,Object.assign({},r,{hachureGap:n})),a=Math.PI/180*r.hachureAngle,s=[],o=.5*n*Math.cos(a),l=.5*n*Math.sin(a);for(const[u,h]of i)my([u,h])&&s.push([[u[0]-o,u[1]+l],[...h]],[[u[0]+o,u[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(s,r)}}}class grt extends AC{fillPolygons(t,r){const n=this._fillPolygons(t,r),i=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),a=this._fillPolygons(t,i);return n.ops=n.ops.concat(a.ops),n}}let prt=class{constructor(t){this.helper=t}fillPolygons(t,r){const n=hp(t,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(n,r)}dotsOnLines(t,r){const n=[];let i=r.hachureGap;i<0&&(i=4*r.strokeWidth),i=Math.max(i,.1);let a=r.fillWeight;a<0&&(a=r.strokeWidth/2);const s=i/4;for(const o of t){const l=my(o),u=l/i,h=Math.ceil(u)-1,f=l-h*i,d=(o[0][0]+o[1][0])/2-i/4,g=Math.min(o[0][1],o[1][1]);for(let p=0;p<h;p++){const v=g+f+p*i,m=d-s+2*Math.random()*s,y=v-s+2*Math.random()*s,b=this.helper.ellipse(m,y,a,a,r);n.push(...b.ops)}}return{type:"fillSketch",ops:n}}},vrt=class{constructor(t){this.helper=t}fillPolygons(t,r){const n=hp(t,r);return{type:"fillSketch",ops:this.dashedLine(n,r)}}dashedLine(t,r){const n=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,i=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,a=[];return t.forEach(s=>{const o=my(s),l=Math.floor(o/(n+i)),u=(o+i-l*(n+i))/2;let h=s[0],f=s[1];h[0]>f[0]&&(h=s[1],f=s[0]);const d=Math.atan((f[1]-h[1])/(f[0]-h[0]));for(let g=0;g<l;g++){const p=g*(n+i),v=p+n,m=[h[0]+p*Math.cos(d)+u*Math.cos(d),h[1]+p*Math.sin(d)+u*Math.sin(d)],y=[h[0]+v*Math.cos(d)+u*Math.cos(d),h[1]+v*Math.sin(d)+u*Math.sin(d)];a.push(...this.helper.doubleLineOps(m[0],m[1],y[0],y[1],r))}}),a}};class mrt{constructor(t){this.helper=t}fillPolygons(t,r){const n=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,i=r.zigzagOffset<0?n:r.zigzagOffset,a=hp(t,r=Object.assign({},r,{hachureGap:n+i}));return{type:"fillSketch",ops:this.zigzagLines(a,i,r)}}zigzagLines(t,r,n){const i=[];return t.forEach(a=>{const s=my(a),o=Math.round(s/(2*r));let l=a[0],u=a[1];l[0]>u[0]&&(l=a[1],u=a[0]);const h=Math.atan((u[1]-l[1])/(u[0]-l[0]));for(let f=0;f<o;f++){const d=2*f*r,g=2*(f+1)*r,p=Math.sqrt(2*Math.pow(r,2)),v=[l[0]+d*Math.cos(h),l[1]+d*Math.sin(h)],m=[l[0]+g*Math.cos(h),l[1]+g*Math.sin(h)],y=[v[0]+p*Math.cos(h+Math.PI/4),v[1]+p*Math.sin(h+Math.PI/4)];i.push(...this.helper.doubleLineOps(v[0],v[1],y[0],y[1],n),...this.helper.doubleLineOps(y[0],y[1],m[0],m[1],n))}}),i}}const bi={};let yrt=class{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}};const xrt=0,K2=1,R3=2,e0={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Z2(e,t){return e.type===t}function LC(e){const t=[],r=function(s){const o=new Array;for(;s!=="";)if(s.match(/^([ \t\r\n,]+)/))s=s.substr(RegExp.$1.length);else if(s.match(/^([aAcChHlLmMqQsStTvVzZ])/))o[o.length]={type:xrt,text:RegExp.$1},s=s.substr(RegExp.$1.length);else{if(!s.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];o[o.length]={type:K2,text:`${parseFloat(RegExp.$1)}`},s=s.substr(RegExp.$1.length)}return o[o.length]={type:R3,text:""},o}(e);let n="BOD",i=0,a=r[i];for(;!Z2(a,R3);){let s=0;const o=[];if(n==="BOD"){if(a.text!=="M"&&a.text!=="m")return LC("M0,0"+e);i++,s=e0[a.text],n=a.text}else Z2(a,K2)?s=e0[n]:(i++,s=e0[a.text],n=a.text);if(!(i+s<r.length))throw new Error("Path data ended short");for(let l=i;l<i+s;l++){const u=r[l];if(!Z2(u,K2))throw new Error("Param not a number: "+n+","+u.text);o[o.length]=+u.text}if(typeof e0[n]!="number")throw new Error("Bad segment: "+n);{const l={key:n,data:o};t.push(l),i+=s,a=r[i],n==="M"&&(n="L"),n==="m"&&(n="l")}}return t}function n8(e){let t=0,r=0,n=0,i=0;const a=[];for(const{key:s,data:o}of e)switch(s){case"M":a.push({key:"M",data:[...o]}),[t,r]=o,[n,i]=o;break;case"m":t+=o[0],r+=o[1],a.push({key:"M",data:[t,r]}),n=t,i=r;break;case"L":a.push({key:"L",data:[...o]}),[t,r]=o;break;case"l":t+=o[0],r+=o[1],a.push({key:"L",data:[t,r]});break;case"C":a.push({key:"C",data:[...o]}),t=o[4],r=o[5];break;case"c":{const l=o.map((u,h)=>h%2?u+r:u+t);a.push({key:"C",data:l}),t=l[4],r=l[5];break}case"Q":a.push({key:"Q",data:[...o]}),t=o[2],r=o[3];break;case"q":{const l=o.map((u,h)=>h%2?u+r:u+t);a.push({key:"Q",data:l}),t=l[2],r=l[3];break}case"A":a.push({key:"A",data:[...o]}),t=o[5],r=o[6];break;case"a":t+=o[5],r+=o[6],a.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],t,r]});break;case"H":a.push({key:"H",data:[...o]}),t=o[0];break;case"h":t+=o[0],a.push({key:"H",data:[t]});break;case"V":a.push({key:"V",data:[...o]}),r=o[0];break;case"v":r+=o[0],a.push({key:"V",data:[r]});break;case"S":a.push({key:"S",data:[...o]}),t=o[2],r=o[3];break;case"s":{const l=o.map((u,h)=>h%2?u+r:u+t);a.push({key:"S",data:l}),t=l[2],r=l[3];break}case"T":a.push({key:"T",data:[...o]}),t=o[0],r=o[1];break;case"t":t+=o[0],r+=o[1],a.push({key:"T",data:[t,r]});break;case"Z":case"z":a.push({key:"Z",data:[]}),t=n,r=i}return a}function i8(e){const t=[];let r="",n=0,i=0,a=0,s=0,o=0,l=0;for(const{key:u,data:h}of e){switch(u){case"M":t.push({key:"M",data:[...h]}),[n,i]=h,[a,s]=h;break;case"C":t.push({key:"C",data:[...h]}),n=h[4],i=h[5],o=h[2],l=h[3];break;case"L":t.push({key:"L",data:[...h]}),[n,i]=h;break;case"H":n=h[0],t.push({key:"L",data:[n,i]});break;case"V":i=h[0],t.push({key:"L",data:[n,i]});break;case"S":{let f=0,d=0;r==="C"||r==="S"?(f=n+(n-o),d=i+(i-l)):(f=n,d=i),t.push({key:"C",data:[f,d,...h]}),o=h[0],l=h[1],n=h[2],i=h[3];break}case"T":{const[f,d]=h;let g=0,p=0;r==="Q"||r==="T"?(g=n+(n-o),p=i+(i-l)):(g=n,p=i);const v=n+2*(g-n)/3,m=i+2*(p-i)/3,y=f+2*(g-f)/3,b=d+2*(p-d)/3;t.push({key:"C",data:[v,m,y,b,f,d]}),o=g,l=p,n=f,i=d;break}case"Q":{const[f,d,g,p]=h,v=n+2*(f-n)/3,m=i+2*(d-i)/3,y=g+2*(f-g)/3,b=p+2*(d-p)/3;t.push({key:"C",data:[v,m,y,b,g,p]}),o=f,l=d,n=g,i=p;break}case"A":{const f=Math.abs(h[0]),d=Math.abs(h[1]),g=h[2],p=h[3],v=h[4],m=h[5],y=h[6];f===0||d===0?(t.push({key:"C",data:[n,i,m,y,m,y]}),n=m,i=y):(n!==m||i!==y)&&(a8(n,i,m,y,f,d,g,p,v).forEach(function(b){t.push({key:"C",data:b})}),n=m,i=y);break}case"Z":t.push({key:"Z",data:[]}),n=a,i=s}r=u}return t}function Nf(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function a8(e,t,r,n,i,a,s,o,l,u){const h=(f=s,Math.PI*f/180);var f;let d=[],g=0,p=0,v=0,m=0;if(u)[g,p,v,m]=u;else{[e,t]=Nf(e,t,-h),[r,n]=Nf(r,n,-h);const P=(e-r)/2,_=(t-n)/2;let I=P*P/(i*i)+_*_/(a*a);I>1&&(I=Math.sqrt(I),i*=I,a*=I);const M=i*i,O=a*a,N=M*O-M*_*_-O*P*P,B=M*_*_+O*P*P,z=(o===l?-1:1)*Math.sqrt(Math.abs(N/B));v=z*i*_/a+(e+r)/2,m=z*-a*P/i+(t+n)/2,g=Math.asin(parseFloat(((t-m)/a).toFixed(9))),p=Math.asin(parseFloat(((n-m)/a).toFixed(9))),e<v&&(g=Math.PI-g),r<v&&(p=Math.PI-p),g<0&&(g=2*Math.PI+g),p<0&&(p=2*Math.PI+p),l&&g>p&&(g-=2*Math.PI),!l&&p>g&&(p-=2*Math.PI)}let y=p-g;if(Math.abs(y)>120*Math.PI/180){const P=p,_=r,I=n;p=l&&p>g?g+120*Math.PI/180*1:g+120*Math.PI/180*-1,d=a8(r=v+i*Math.cos(p),n=m+a*Math.sin(p),_,I,i,a,s,0,l,[p,P,v,m])}y=p-g;const b=Math.cos(g),T=Math.sin(g),w=Math.cos(p),k=Math.sin(p),S=Math.tan(y/4),E=4/3*i*S,L=4/3*a*S,A=[e,t],R=[e+E*T,t-L*b],C=[r+E*k,n-L*w],D=[r,n];if(R[0]=2*A[0]-R[0],R[1]=2*A[1]-R[1],u)return[R,C,D].concat(d);{d=[R,C,D].concat(d);const P=[];for(let _=0;_<d.length;_+=3){const I=Nf(d[_][0],d[_][1],h),M=Nf(d[_+1][0],d[_+1][1],h),O=Nf(d[_+2][0],d[_+2][1],h);P.push([I[0],I[1],M[0],M[1],O[0],O[1]])}return P}}const brt={randOffset:function(e,t){return _e(e,t)},randOffsetWithRange:function(e,t,r){return Nv(e,t,r)},ellipse:function(e,t,r,n,i){const a=o8(r,n,i);return dw(e,t,i,a).opset},doubleLineOps:function(e,t,r,n,i){return Bo(e,t,r,n,i,!0)}};function s8(e,t,r,n,i){return{type:"path",ops:Bo(e,t,r,n,i)}}function e1(e,t,r){const n=(e||[]).length;if(n>2){const i=[];for(let a=0;a<n-1;a++)i.push(...Bo(e[a][0],e[a][1],e[a+1][0],e[a+1][1],r));return t&&i.push(...Bo(e[n-1][0],e[n-1][1],e[0][0],e[0][1],r)),{type:"path",ops:i}}return n===2?s8(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function Trt(e,t,r,n,i){return function(a,s){return e1(a,!0,s)}([[e,t],[e+r,t],[e+r,t+n],[e,t+n]],i)}function I3(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,n=r0(r[0],1*(1+.2*t.roughness),t),i=t.disableMultiStroke?[]:r0(r[0],1.5*(1+.22*t.roughness),M3(t));for(let a=1;a<r.length;a++){const s=r[a];if(s.length){const o=r0(s,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:r0(s,1.5*(1+.22*t.roughness),M3(t));for(const u of o)u.op!=="move"&&n.push(u);for(const u of l)u.op!=="move"&&i.push(u)}}return{type:"path",ops:n.concat(i)}}return{type:"path",ops:[]}}function o8(e,t,r){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*n)),a=2*Math.PI/i;let s=Math.abs(e/2),o=Math.abs(t/2);const l=1-r.curveFitting;return s+=_e(s*l,r),o+=_e(o*l,r),{increment:a,rx:s,ry:o}}function dw(e,t,r,n){const[i,a]=O3(n.increment,e,t,n.rx,n.ry,1,n.increment*Nv(.1,Nv(.4,1,r),r),r);let s=Dv(i,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[o]=O3(n.increment,e,t,n.rx,n.ry,1.5,0,r),l=Dv(o,null,r);s=s.concat(l)}return{estimatedPoints:a,opset:{type:"path",ops:s}}}function N3(e,t,r,n,i,a,s,o,l){const u=e,h=t;let f=Math.abs(r/2),d=Math.abs(n/2);f+=_e(.01*f,l),d+=_e(.01*d,l);let g=i,p=a;for(;g<0;)g+=2*Math.PI,p+=2*Math.PI;p-g>2*Math.PI&&(g=0,p=2*Math.PI);const v=2*Math.PI/l.curveStepCount,m=Math.min(v/2,(p-g)/2),y=P3(m,u,h,f,d,g,p,1,l);if(!l.disableMultiStroke){const b=P3(m,u,h,f,d,g,p,1.5,l);y.push(...b)}return s&&(o?y.push(...Bo(u,h,u+f*Math.cos(g),h+d*Math.sin(g),l),...Bo(u,h,u+f*Math.cos(p),h+d*Math.sin(p),l)):y.push({op:"lineTo",data:[u,h]},{op:"lineTo",data:[u+f*Math.cos(g),h+d*Math.sin(g)]})),{type:"path",ops:y}}function D3(e,t){const r=i8(n8(LC(e))),n=[];let i=[0,0],a=[0,0];for(const{key:s,data:o}of r)switch(s){case"M":a=[o[0],o[1]],i=[o[0],o[1]];break;case"L":n.push(...Bo(a[0],a[1],o[0],o[1],t)),a=[o[0],o[1]];break;case"C":{const[l,u,h,f,d,g]=o;n.push(...wrt(l,u,h,f,d,g,a,t)),a=[d,g];break}case"Z":n.push(...Bo(a[0],a[1],i[0],i[1],t)),a=[i[0],i[1]]}return{type:"path",ops:n}}function Q2(e,t){const r=[];for(const n of e)if(n.length){const i=t.maxRandomnessOffset||0,a=n.length;if(a>2){r.push({op:"move",data:[n[0][0]+_e(i,t),n[0][1]+_e(i,t)]});for(let s=1;s<a;s++)r.push({op:"lineTo",data:[n[s][0]+_e(i,t),n[s][1]+_e(i,t)]})}}return{type:"fillPath",ops:r}}function $c(e,t){return function(r,n){let i=r.fillStyle||"hachure";if(!bi[i])switch(i){case"zigzag":bi[i]||(bi[i]=new drt(n));break;case"cross-hatch":bi[i]||(bi[i]=new grt(n));break;case"dots":bi[i]||(bi[i]=new prt(n));break;case"dashed":bi[i]||(bi[i]=new vrt(n));break;case"zigzag-line":bi[i]||(bi[i]=new mrt(n));break;default:i="hachure",bi[i]||(bi[i]=new AC(n))}return bi[i]}(t,brt).fillPolygons(e,t)}function M3(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function l8(e){return e.randomizer||(e.randomizer=new yrt(e.seed||0)),e.randomizer.next()}function Nv(e,t,r,n=1){return r.roughness*n*(l8(r)*(t-e)+e)}function _e(e,t,r=1){return Nv(-e,e,t,r)}function Bo(e,t,r,n,i,a=!1){const s=a?i.disableMultiStrokeFill:i.disableMultiStroke,o=gw(e,t,r,n,i,!0,!1);if(s)return o;const l=gw(e,t,r,n,i,!0,!0);return o.concat(l)}function gw(e,t,r,n,i,a,s){const o=Math.pow(e-r,2)+Math.pow(t-n,2),l=Math.sqrt(o);let u=1;u=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=i.maxRandomnessOffset||0;h*h*100>o&&(h=l/10);const f=h/2,d=.2+.2*l8(i);let g=i.bowing*i.maxRandomnessOffset*(n-t)/200,p=i.bowing*i.maxRandomnessOffset*(e-r)/200;g=_e(g,i,u),p=_e(p,i,u);const v=[],m=()=>_e(f,i,u),y=()=>_e(h,i,u),b=i.preserveVertices;return s?v.push({op:"move",data:[e+(b?0:m()),t+(b?0:m())]}):v.push({op:"move",data:[e+(b?0:_e(h,i,u)),t+(b?0:_e(h,i,u))]}),s?v.push({op:"bcurveTo",data:[g+e+(r-e)*d+m(),p+t+(n-t)*d+m(),g+e+2*(r-e)*d+m(),p+t+2*(n-t)*d+m(),r+(b?0:m()),n+(b?0:m())]}):v.push({op:"bcurveTo",data:[g+e+(r-e)*d+y(),p+t+(n-t)*d+y(),g+e+2*(r-e)*d+y(),p+t+2*(n-t)*d+y(),r+(b?0:y()),n+(b?0:y())]}),v}function r0(e,t,r){if(!e.length)return[];const n=[];n.push([e[0][0]+_e(t,r),e[0][1]+_e(t,r)]),n.push([e[0][0]+_e(t,r),e[0][1]+_e(t,r)]);for(let i=1;i<e.length;i++)n.push([e[i][0]+_e(t,r),e[i][1]+_e(t,r)]),i===e.length-1&&n.push([e[i][0]+_e(t,r),e[i][1]+_e(t,r)]);return Dv(n,null,r)}function Dv(e,t,r){const n=e.length,i=[];if(n>3){const a=[],s=1-r.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let o=1;o+2<n;o++){const l=e[o];a[0]=[l[0],l[1]],a[1]=[l[0]+(s*e[o+1][0]-s*e[o-1][0])/6,l[1]+(s*e[o+1][1]-s*e[o-1][1])/6],a[2]=[e[o+1][0]+(s*e[o][0]-s*e[o+2][0])/6,e[o+1][1]+(s*e[o][1]-s*e[o+2][1])/6],a[3]=[e[o+1][0],e[o+1][1]],i.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}}else n===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):n===2&&i.push(...gw(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return i}function O3(e,t,r,n,i,a,s,o){const l=[],u=[];if(o.roughness===0){e/=4,u.push([t+n*Math.cos(-e),r+i*Math.sin(-e)]);for(let h=0;h<=2*Math.PI;h+=e){const f=[t+n*Math.cos(h),r+i*Math.sin(h)];l.push(f),u.push(f)}u.push([t+n*Math.cos(0),r+i*Math.sin(0)]),u.push([t+n*Math.cos(e),r+i*Math.sin(e)])}else{const h=_e(.5,o)-Math.PI/2;u.push([_e(a,o)+t+.9*n*Math.cos(h-e),_e(a,o)+r+.9*i*Math.sin(h-e)]);const f=2*Math.PI+h-.01;for(let d=h;d<f;d+=e){const g=[_e(a,o)+t+n*Math.cos(d),_e(a,o)+r+i*Math.sin(d)];l.push(g),u.push(g)}u.push([_e(a,o)+t+n*Math.cos(h+2*Math.PI+.5*s),_e(a,o)+r+i*Math.sin(h+2*Math.PI+.5*s)]),u.push([_e(a,o)+t+.98*n*Math.cos(h+s),_e(a,o)+r+.98*i*Math.sin(h+s)]),u.push([_e(a,o)+t+.9*n*Math.cos(h+.5*s),_e(a,o)+r+.9*i*Math.sin(h+.5*s)])}return[u,l]}function P3(e,t,r,n,i,a,s,o,l){const u=a+_e(.1,l),h=[];h.push([_e(o,l)+t+.9*n*Math.cos(u-e),_e(o,l)+r+.9*i*Math.sin(u-e)]);for(let f=u;f<=s;f+=e)h.push([_e(o,l)+t+n*Math.cos(f),_e(o,l)+r+i*Math.sin(f)]);return h.push([t+n*Math.cos(s),r+i*Math.sin(s)]),h.push([t+n*Math.cos(s),r+i*Math.sin(s)]),Dv(h,null,l)}function wrt(e,t,r,n,i,a,s,o){const l=[],u=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3];let h=[0,0];const f=o.disableMultiStroke?1:2,d=o.preserveVertices;for(let g=0;g<f;g++)g===0?l.push({op:"move",data:[s[0],s[1]]}):l.push({op:"move",data:[s[0]+(d?0:_e(u[0],o)),s[1]+(d?0:_e(u[0],o))]}),h=d?[i,a]:[i+_e(u[g],o),a+_e(u[g],o)],l.push({op:"bcurveTo",data:[e+_e(u[g],o),t+_e(u[g],o),r+_e(u[g],o),n+_e(u[g],o),h[0],h[1]]});return l}function Df(e){return[...e]}function B3(e,t=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const n=[];if(r===3)n.push(Df(e[0]),Df(e[1]),Df(e[2]),Df(e[2]));else{const i=[];i.push(e[0],e[0]);for(let o=1;o<e.length;o++)i.push(e[o]),o===e.length-1&&i.push(e[o]);const a=[],s=1-t;n.push(Df(i[0]));for(let o=1;o+2<i.length;o++){const l=i[o];a[0]=[l[0],l[1]],a[1]=[l[0]+(s*i[o+1][0]-s*i[o-1][0])/6,l[1]+(s*i[o+1][1]-s*i[o-1][1])/6],a[2]=[i[o+1][0]+(s*i[o][0]-s*i[o+2][0])/6,i[o+1][1]+(s*i[o][1]-s*i[o+2][1])/6],a[3]=[i[o+1][0],i[o+1][1]],n.push(a[1],a[2],a[3])}}return n}function r1(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Ert(e,t,r){const n=r1(t,r);if(n===0)return r1(e,t);let i=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/n;return i=Math.max(0,Math.min(1,i)),r1(e,xl(t,r,i))}function xl(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function pw(e,t,r,n){const i=n||[];if(function(o,l){const u=o[l+0],h=o[l+1],f=o[l+2],d=o[l+3];let g=3*h[0]-2*u[0]-d[0];g*=g;let p=3*h[1]-2*u[1]-d[1];p*=p;let v=3*f[0]-2*d[0]-u[0];v*=v;let m=3*f[1]-2*d[1]-u[1];return m*=m,g<v&&(g=v),p<m&&(p=m),g+p}(e,t)<r){const o=e[t+0];i.length?(a=i[i.length-1],s=o,Math.sqrt(r1(a,s))>1&&i.push(o)):i.push(o),i.push(e[t+3])}else{const l=e[t+0],u=e[t+1],h=e[t+2],f=e[t+3],d=xl(l,u,.5),g=xl(u,h,.5),p=xl(h,f,.5),v=xl(d,g,.5),m=xl(g,p,.5),y=xl(v,m,.5);pw([l,d,v,y],0,r,i),pw([y,m,p,f],0,r,i)}var a,s;return i}function krt(e,t){return Mv(e,0,e.length,t)}function Mv(e,t,r,n,i){const a=i||[],s=e[t],o=e[r-1];let l=0,u=1;for(let h=t+1;h<r-1;++h){const f=Ert(e[h],s,o);f>l&&(l=f,u=h)}return Math.sqrt(l)>n?(Mv(e,t,u+1,n,a),Mv(e,u,r,n,a)):(a.length||a.push(s),a.push(o)),a}function J2(e,t=.15,r){const n=[],i=(e.length-1)/3;for(let a=0;a<i;a++)pw(e,3*a,t,n);return r&&r>0?Mv(n,0,n.length,r):n}const Gi="none";class Ov{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,r,n){return{shape:t,sets:r||[],options:n||this.defaultOptions}}line(t,r,n,i,a){const s=this._o(a);return this._d("line",[s8(t,r,n,i,s)],s)}rectangle(t,r,n,i,a){const s=this._o(a),o=[],l=Trt(t,r,n,i,s);if(s.fill){const u=[[t,r],[t+n,r],[t+n,r+i],[t,r+i]];s.fillStyle==="solid"?o.push(Q2([u],s)):o.push($c([u],s))}return s.stroke!==Gi&&o.push(l),this._d("rectangle",o,s)}ellipse(t,r,n,i,a){const s=this._o(a),o=[],l=o8(n,i,s),u=dw(t,r,s,l);if(s.fill)if(s.fillStyle==="solid"){const h=dw(t,r,s,l).opset;h.type="fillPath",o.push(h)}else o.push($c([u.estimatedPoints],s));return s.stroke!==Gi&&o.push(u.opset),this._d("ellipse",o,s)}circle(t,r,n,i){const a=this.ellipse(t,r,n,n,i);return a.shape="circle",a}linearPath(t,r){const n=this._o(r);return this._d("linearPath",[e1(t,!1,n)],n)}arc(t,r,n,i,a,s,o=!1,l){const u=this._o(l),h=[],f=N3(t,r,n,i,a,s,o,!0,u);if(o&&u.fill)if(u.fillStyle==="solid"){const d=Object.assign({},u);d.disableMultiStroke=!0;const g=N3(t,r,n,i,a,s,!0,!1,d);g.type="fillPath",h.push(g)}else h.push(function(d,g,p,v,m,y,b){const T=d,w=g;let k=Math.abs(p/2),S=Math.abs(v/2);k+=_e(.01*k,b),S+=_e(.01*S,b);let E=m,L=y;for(;E<0;)E+=2*Math.PI,L+=2*Math.PI;L-E>2*Math.PI&&(E=0,L=2*Math.PI);const A=(L-E)/b.curveStepCount,R=[];for(let C=E;C<=L;C+=A)R.push([T+k*Math.cos(C),w+S*Math.sin(C)]);return R.push([T+k*Math.cos(L),w+S*Math.sin(L)]),R.push([T,w]),$c([R],b)}(t,r,n,i,a,s,u));return u.stroke!==Gi&&h.push(f),this._d("arc",h,u)}curve(t,r){const n=this._o(r),i=[],a=I3(t,n);if(n.fill&&n.fill!==Gi)if(n.fillStyle==="solid"){const s=I3(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=[],o=t;if(o.length){const l=typeof o[0][0]=="number"?[o]:o;for(const u of l)u.length<3?s.push(...u):u.length===3?s.push(...J2(B3([u[0],u[0],u[1],u[2]]),10,(1+n.roughness)/2)):s.push(...J2(B3(u),10,(1+n.roughness)/2))}s.length&&i.push($c([s],n))}return n.stroke!==Gi&&i.push(a),this._d("curve",i,n)}polygon(t,r){const n=this._o(r),i=[],a=e1(t,!0,n);return n.fill&&(n.fillStyle==="solid"?i.push(Q2([t],n)):i.push($c([t],n))),n.stroke!==Gi&&i.push(a),this._d("polygon",i,n)}path(t,r){const n=this._o(r),i=[];if(!t)return this._d("path",i,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const a=n.fill&&n.fill!=="transparent"&&n.fill!==Gi,s=n.stroke!==Gi,o=!!(n.simplification&&n.simplification<1),l=function(h,f,d){const g=i8(n8(LC(h))),p=[];let v=[],m=[0,0],y=[];const b=()=>{y.length>=4&&v.push(...J2(y,f)),y=[]},T=()=>{b(),v.length&&(p.push(v),v=[])};for(const{key:k,data:S}of g)switch(k){case"M":T(),m=[S[0],S[1]],v.push(m);break;case"L":b(),v.push([S[0],S[1]]);break;case"C":if(!y.length){const E=v.length?v[v.length-1]:m;y.push([E[0],E[1]])}y.push([S[0],S[1]]),y.push([S[2],S[3]]),y.push([S[4],S[5]]);break;case"Z":b(),v.push([m[0],m[1]])}if(T(),!d)return p;const w=[];for(const k of p){const S=krt(k,d);S.length&&w.push(S)}return w}(t,1,o?4-4*(n.simplification||1):(1+n.roughness)/2),u=D3(t,n);if(a)if(n.fillStyle==="solid")if(l.length===1){const h=D3(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else i.push(Q2(l,n));else i.push($c(l,n));return s&&(o?l.forEach(h=>{i.push(e1(h,!1,n))}):i.push(u)),this._d("path",i,n)}opsToPath(t,r){let n="";for(const i of t.ops){const a=typeof r=="number"&&r>=0?i.data.map(s=>+s.toFixed(r)):i.data;switch(i.op){case"move":n+=`M${a[0]} ${a[1]} `;break;case"bcurveTo":n+=`C${a[0]} ${a[1]}, ${a[2]} ${a[3]}, ${a[4]} ${a[5]} `;break;case"lineTo":n+=`L${a[0]} ${a[1]} `}}return n.trim()}toPaths(t){const r=t.sets||[],n=t.options||this.defaultOptions,i=[];for(const a of r){let s=null;switch(a.type){case"path":s={d:this.opsToPath(a),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:Gi};break;case"fillPath":s={d:this.opsToPath(a),stroke:Gi,strokeWidth:0,fill:n.fill||Gi};break;case"fillSketch":s=this.fillSketch(a,n)}s&&i.push(s)}return i}fillSketch(t,r){let n=r.fillWeight;return n<0&&(n=r.strokeWidth/2),{d:this.opsToPath(t),stroke:r.fill||Gi,strokeWidth:n,fill:Gi}}_mergedShape(t){return t.filter((r,n)=>n===0||r.op!=="move")}}class Crt{constructor(t,r){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Ov(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),i=this.ctx,a=t.options.fixedDecimalPlaceDigits;for(const s of r)switch(s.type){case"path":i.save(),i.strokeStyle=n.stroke==="none"?"transparent":n.stroke,i.lineWidth=n.strokeWidth,n.strokeLineDash&&i.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(i.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(i,s,a),i.restore();break;case"fillPath":{i.save(),i.fillStyle=n.fill||"";const o=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,s,a,o),i.restore();break}case"fillSketch":this.fillSketch(i,s,n)}}fillSketch(t,r,n){let i=n.fillWeight;i<0&&(i=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=i,this._drawToContext(t,r,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,r,n,i="nonzero"){t.beginPath();for(const a of r.ops){const s=typeof n=="number"&&n>=0?a.data.map(o=>+o.toFixed(n)):a.data;switch(a.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1])}}r.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,r,n,i,a){const s=this.gen.line(t,r,n,i,a);return this.draw(s),s}rectangle(t,r,n,i,a){const s=this.gen.rectangle(t,r,n,i,a);return this.draw(s),s}ellipse(t,r,n,i,a){const s=this.gen.ellipse(t,r,n,i,a);return this.draw(s),s}circle(t,r,n,i){const a=this.gen.circle(t,r,n,i);return this.draw(a),a}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n),n}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n),n}arc(t,r,n,i,a,s,o=!1,l){const u=this.gen.arc(t,r,n,i,a,s,o,l);return this.draw(u),u}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n),n}path(t,r){const n=this.gen.path(t,r);return this.draw(n),n}}const n0="http://www.w3.org/2000/svg";class Srt{constructor(t,r){this.svg=t,this.gen=new Ov(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,a=i.createElementNS(n0,"g"),s=t.options.fixedDecimalPlaceDigits;for(const o of r){let l=null;switch(o.type){case"path":l=i.createElementNS(n0,"path"),l.setAttribute("d",this.opsToPath(o,s)),l.setAttribute("stroke",n.stroke),l.setAttribute("stroke-width",n.strokeWidth+""),l.setAttribute("fill","none"),n.strokeLineDash&&l.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":l=i.createElementNS(n0,"path"),l.setAttribute("d",this.opsToPath(o,s)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",n.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(i,o,n)}l&&a.appendChild(l)}return a}fillSketch(t,r,n){let i=n.fillWeight;i<0&&(i=n.strokeWidth/2);const a=t.createElementNS(n0,"path");return a.setAttribute("d",this.opsToPath(r,n.fixedDecimalPlaceDigits)),a.setAttribute("stroke",n.fill||""),a.setAttribute("stroke-width",i+""),a.setAttribute("fill","none"),n.fillLineDash&&a.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&a.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),a}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,r){return this.gen.opsToPath(t,r)}line(t,r,n,i,a){const s=this.gen.line(t,r,n,i,a);return this.draw(s)}rectangle(t,r,n,i,a){const s=this.gen.rectangle(t,r,n,i,a);return this.draw(s)}ellipse(t,r,n,i,a){const s=this.gen.ellipse(t,r,n,i,a);return this.draw(s)}circle(t,r,n,i){const a=this.gen.circle(t,r,n,i);return this.draw(a)}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n)}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n)}arc(t,r,n,i,a,s,o=!1,l){const u=this.gen.arc(t,r,n,i,a,s,o,l);return this.draw(u)}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n)}path(t,r){const n=this.gen.path(t,r);return this.draw(n)}}var ve={canvas:(e,t)=>new Crt(e,t),svg:(e,t)=>new Srt(e,t),generator:e=>new Ov(e),newSeed:()=>Ov.newSeed()},Ne=x(async(e,t,r)=>{var f,d;let n;const i=t.useHtmlLabels||dr((f=pt())==null?void 0:f.htmlLabels);r?n=r:n="node default";const a=e.insert("g").attr("class",n).attr("id",t.domId||t.id),s=a.insert("g").attr("class","label").attr("style",hi(t.labelStyle));let o;t.label===void 0?o="":o=typeof t.label=="string"?t.label:t.label[0];const l=await Pi(s,xr(cs(o),pt()),{useHtmlLabels:i,width:t.width||((d=pt().flowchart)==null?void 0:d.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let u=l.getBBox();const h=((t==null?void 0:t.padding)??0)/2;if(i){const g=l.children[0],p=qt(l),v=g.getElementsByTagName("img");if(v){const m=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...v].map(y=>new Promise(b=>{function T(){if(y.style.display="flex",y.style.flexDirection="column",m){const w=pt().fontSize?pt().fontSize:window.getComputedStyle(document.body).fontSize,k=5,[S=Xe.fontSize]=tl(w),E=S*k+"px";y.style.minWidth=E,y.style.maxWidth=E}else y.style.width="100%";b(y)}x(T,"setupImage"),setTimeout(()=>{y.complete&&T()}),y.addEventListener("error",T),y.addEventListener("load",T)})))}u=g.getBoundingClientRect(),p.attr("width",u.width),p.attr("height",u.height)}return i?s.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"):s.attr("transform","translate(0, "+-u.height/2+")"),t.centerLabel&&s.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),s.insert("rect",":first-child"),{shapeSvg:a,bbox:u,halfPadding:h,label:s}},"labelHelper"),tx=x(async(e,t,r)=>{var l,u,h,f,d,g;const n=r.useHtmlLabels||dr((u=(l=pt())==null?void 0:l.flowchart)==null?void 0:u.htmlLabels),i=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),a=await Pi(i,xr(cs(t),pt()),{useHtmlLabels:n,width:r.width||((f=(h=pt())==null?void 0:h.flowchart)==null?void 0:f.wrappingWidth),style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let s=a.getBBox();const o=r.padding/2;if(dr((g=(d=pt())==null?void 0:d.flowchart)==null?void 0:g.htmlLabels)){const p=a.children[0],v=qt(a);s=p.getBoundingClientRect(),v.attr("width",s.width),v.attr("height",s.height)}return n?i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"):i.attr("transform","translate(0, "+-s.height/2+")"),r.centerLabel&&i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:e,bbox:s,halfPadding:o,label:i}},"insertLabel"),be=x((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),Ae=x((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function Ze(e){const t=e.map((r,n)=>`${n===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}x(Ze,"createPathFromPoints");function Fo(e,t,r,n,i,a){const s=[],l=r-e,u=n-t,h=l/a,f=2*Math.PI/h,d=t+u/2;for(let g=0;g<=50;g++){const p=g/50,v=e+p*l,m=d+i*Math.sin(f*(v-e));s.push({x:v,y:m})}return s}x(Fo,"generateFullSineWavePoints");function RC(e,t,r,n,i,a){const s=[],o=i*Math.PI/180,h=(a*Math.PI/180-o)/(n-1);for(let f=0;f<n;f++){const d=o+f*h,g=e+r*Math.cos(d),p=t+r*Math.sin(d);s.push({x:-g,y:-p})}return s}x(RC,"generateCirclePoints");var _rt=x((e,t)=>{var r=e.x,n=e.y,i=t.x-r,a=t.y-n,s=e.width/2,o=e.height/2,l,u;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),l=a===0?0:o*i/a,u=o):(i<0&&(s=-s),l=s,u=i===0?0:s*a/i),{x:r+l,y:n+u}},"intersectRect"),tf=_rt;function c8(e,t){t&&e.attr("style",t)}x(c8,"applyStyle");async function u8(e){const t=qt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div");let n=e.label;e.label&&Kn(e.label)&&(n=await ep(e.label.replace(Xt.lineBreakRegex,`
`),pt()));const i=e.isNode?"nodeLabel":"edgeLabel";return r.html('<span class="'+i+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+n+"</span>"),c8(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}x(u8,"addHtmlLabel");var Art=x(async(e,t,r,n)=>{let i=e||"";if(typeof i=="object"&&(i=i[0]),dr(pt().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),et.info("vertexText"+i);const a={isNode:n,label:cs(i).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await u8(a)}else{const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",t.replace("color:","fill:"));let s=[];typeof i=="string"?s=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?s=i:s=[];for(const o of s){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o.trim(),a.appendChild(l)}return a}},"createLabel"),Ml=Art,co=x((e,t,r,n,i)=>["M",e+i,t,"H",e+r-i,"A",i,i,0,0,1,e+r,t+i,"V",t+n-i,"A",i,i,0,0,1,e+r-i,t+n,"H",e+i,"A",i,i,0,0,1,e,t+n-i,"V",t+i,"A",i,i,0,0,1,e+i,t,"Z"].join(" "),"createRoundedRectPathD"),Lrt=x(e=>{const{handDrawnSeed:t}=pt();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),ef=x(e=>{const t=Rrt([...e.cssCompiledStyles||[],...e.cssStyles||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),Rrt=x(e=>{const t=new Map;return e.forEach(r=>{const[n,i]=r.split(":");t.set(n.trim(),i==null?void 0:i.trim())}),t},"styles2Map"),h8=x(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),Te=x(e=>{const{stylesArray:t}=ef(e),r=[],n=[],i=[],a=[];return t.forEach(s=>{const o=s[0];h8(o)?r.push(s.join(":")+" !important"):(n.push(s.join(":")+" !important"),o.includes("stroke")&&i.push(s.join(":")+" !important"),o==="fill"&&a.push(s.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:n.join(";"),stylesArray:t,borderStyles:i,backgroundStyles:a}},"styles2String"),ye=x((e,t)=>{var l;const{themeVariables:r,handDrawnSeed:n}=pt(),{nodeBorder:i,mainBkg:a}=r,{stylesMap:s}=ef(e);return Object.assign({roughness:.7,fill:s.get("fill")||a,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||i,seed:n,strokeWidth:((l=s.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0]},t)},"userNodeOverrides"),f8=x(async(e,t)=>{et.info("Creating subgraph rect for ",t.id,t);const r=pt(),{themeVariables:n,handDrawnSeed:i}=r,{clusterBkg:a,clusterBorder:s}=n,{labelStyles:o,nodeStyles:l,borderStyles:u,backgroundStyles:h}=Te(t),f=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),d=dr(r.flowchart.htmlLabels),g=f.insert("g").attr("class","cluster-label "),p=await Pi(g,t.label,{style:t.labelStyle,useHtmlLabels:d,isNode:!0});let v=p.getBBox();if(dr(r.flowchart.htmlLabels)){const E=p.children[0],L=qt(p);v=E.getBoundingClientRect(),L.attr("width",v.width),L.attr("height",v.height)}const m=t.width<=v.width+t.padding?v.width+t.padding:t.width;t.width<=v.width+t.padding?t.diff=(m-t.width)/2-t.padding:t.diff=-t.padding;const y=t.height,b=t.x-m/2,T=t.y-y/2;et.trace("Data ",t,JSON.stringify(t));let w;if(t.look==="handDrawn"){const E=ve.svg(f),L=ye(t,{roughness:.7,fill:a,stroke:s,fillWeight:3,seed:i}),A=E.path(co(b,T,m,y,0),L);w=f.insert(()=>(et.debug("Rough node insert CXC",A),A),":first-child"),w.select("path:nth-child(2)").attr("style",u.join(";")),w.select("path").attr("style",h.join(";").replace("fill","stroke"))}else w=f.insert("rect",":first-child"),w.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",b).attr("y",T).attr("width",m).attr("height",y);const{subGraphTitleTopMargin:k}=np(r);if(g.attr("transform",`translate(${t.x-v.width/2}, ${t.y-t.height/2+k})`),o){const E=g.select("span");E&&E.attr("style",o)}const S=w.node().getBBox();return t.offsetX=0,t.width=S.width,t.height=S.height,t.offsetY=v.height-t.padding/2,t.intersect=function(E){return tf(t,E)},{cluster:f,labelBBox:v}},"rect"),Irt=x((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),n=r.insert("rect",":first-child"),i=0*t.padding,a=i/2;n.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-a).attr("y",t.y-t.height/2-a).attr("width",t.width+i).attr("height",t.height+i).attr("fill","none");const s=n.node().getBBox();return t.width=s.width,t.height=s.height,t.intersect=function(o){return tf(t,o)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),Nrt=x(async(e,t)=>{const r=pt(),{themeVariables:n,handDrawnSeed:i}=r,{altBackground:a,compositeBackground:s,compositeTitleBackground:o,nodeBorder:l}=n,u=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),h=u.insert("g",":first-child"),f=u.insert("g").attr("class","cluster-label");let d=u.append("rect");const g=f.node().appendChild(await Ml(t.label,t.labelStyle,void 0,!0));let p=g.getBBox();if(dr(r.flowchart.htmlLabels)){const A=g.children[0],R=qt(g);p=A.getBoundingClientRect(),R.attr("width",p.width),R.attr("height",p.height)}const v=0*t.padding,m=v/2,y=(t.width<=p.width+t.padding?p.width+t.padding:t.width)+v;t.width<=p.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const b=t.height+v,T=t.height+v-p.height-6,w=t.x-y/2,k=t.y-b/2;t.width=y;const S=t.y-t.height/2-m+p.height+2;let E;if(t.look==="handDrawn"){const A=t.cssClasses.includes("statediagram-cluster-alt"),R=ve.svg(u),C=t.rx||t.ry?R.path(co(w,k,y,b,10),{roughness:.7,fill:o,fillStyle:"solid",stroke:l,seed:i}):R.rectangle(w,k,y,b,{seed:i});E=u.insert(()=>C,":first-child");const D=R.rectangle(w,S,y,T,{fill:A?a:s,fillStyle:A?"hachure":"solid",stroke:l,seed:i});E=u.insert(()=>C,":first-child"),d=u.insert(()=>D)}else E=h.insert("rect",":first-child"),E.attr("class","outer").attr("x",w).attr("y",k).attr("width",y).attr("height",b).attr("data-look",t.look),d.attr("class","inner").attr("x",w).attr("y",S).attr("width",y).attr("height",T);f.attr("transform",`translate(${t.x-p.width/2}, ${k+1-(dr(r.flowchart.htmlLabels)?0:3)})`);const L=E.node().getBBox();return t.height=L.height,t.offsetX=0,t.offsetY=p.height-t.padding/2,t.labelBBox=p,t.intersect=function(A){return tf(t,A)},{cluster:u,labelBBox:p}},"roundedWithTitle"),Drt=x(async(e,t)=>{et.info("Creating subgraph rect for ",t.id,t);const r=pt(),{themeVariables:n,handDrawnSeed:i}=r,{clusterBkg:a,clusterBorder:s}=n,{labelStyles:o,nodeStyles:l,borderStyles:u,backgroundStyles:h}=Te(t),f=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),d=dr(r.flowchart.htmlLabels),g=f.insert("g").attr("class","cluster-label "),p=await Pi(g,t.label,{style:t.labelStyle,useHtmlLabels:d,isNode:!0,width:t.width});let v=p.getBBox();if(dr(r.flowchart.htmlLabels)){const E=p.children[0],L=qt(p);v=E.getBoundingClientRect(),L.attr("width",v.width),L.attr("height",v.height)}const m=t.width<=v.width+t.padding?v.width+t.padding:t.width;t.width<=v.width+t.padding?t.diff=(m-t.width)/2-t.padding:t.diff=-t.padding;const y=t.height,b=t.x-m/2,T=t.y-y/2;et.trace("Data ",t,JSON.stringify(t));let w;if(t.look==="handDrawn"){const E=ve.svg(f),L=ye(t,{roughness:.7,fill:a,stroke:s,fillWeight:4,seed:i}),A=E.path(co(b,T,m,y,t.rx),L);w=f.insert(()=>(et.debug("Rough node insert CXC",A),A),":first-child"),w.select("path:nth-child(2)").attr("style",u.join(";")),w.select("path").attr("style",h.join(";").replace("fill","stroke"))}else w=f.insert("rect",":first-child"),w.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",b).attr("y",T).attr("width",m).attr("height",y);const{subGraphTitleTopMargin:k}=np(r);if(g.attr("transform",`translate(${t.x-v.width/2}, ${t.y-t.height/2+k})`),o){const E=g.select("span");E&&E.attr("style",o)}const S=w.node().getBBox();return t.offsetX=0,t.width=S.width,t.height=S.height,t.offsetY=v.height-t.padding/2,t.intersect=function(E){return tf(t,E)},{cluster:f,labelBBox:v}},"kanbanSection"),Mrt=x((e,t)=>{const r=pt(),{themeVariables:n,handDrawnSeed:i}=r,{nodeBorder:a}=n,s=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),o=s.insert("g",":first-child"),l=0*t.padding,u=t.width+l;t.diff=-t.padding;const h=t.height+l,f=t.x-u/2,d=t.y-h/2;t.width=u;let g;if(t.look==="handDrawn"){const m=ve.svg(s).rectangle(f,d,u,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:a,seed:i});g=s.insert(()=>m,":first-child")}else g=o.insert("rect",":first-child"),g.attr("class","divider").attr("x",f).attr("y",d).attr("width",u).attr("height",h).attr("data-look",t.look);const p=g.node().getBBox();return t.height=p.height,t.offsetX=0,t.offsetY=0,t.intersect=function(v){return tf(t,v)},{cluster:s,labelBBox:{}}},"divider"),Ort=f8,Prt={rect:f8,squareRect:Ort,roundedWithTitle:Nrt,noteGroup:Irt,divider:Mrt,kanbanSection:Drt},d8=new Map,IC=x(async(e,t)=>{const r=t.shape||"rect",n=await Prt[r](e,t);return d8.set(t.id,n),n},"insertCluster"),Brt=x(()=>{d8=new Map},"clear");function g8(e,t){return e.intersect(t)}x(g8,"intersectNode");var Frt=g8;function p8(e,t,r,n){var i=e.x,a=e.y,s=i-n.x,o=a-n.y,l=Math.sqrt(t*t*o*o+r*r*s*s),u=Math.abs(t*r*s/l);n.x<i&&(u=-u);var h=Math.abs(t*r*o/l);return n.y<a&&(h=-h),{x:i+u,y:a+h}}x(p8,"intersectEllipse");var v8=p8;function m8(e,t,r){return v8(e,t,t,r)}x(m8,"intersectCircle");var $rt=m8;function y8(e,t,r,n){var i,a,s,o,l,u,h,f,d,g,p,v,m,y,b;if(i=t.y-e.y,s=e.x-t.x,l=t.x*e.y-e.x*t.y,d=i*r.x+s*r.y+l,g=i*n.x+s*n.y+l,!(d!==0&&g!==0&&vw(d,g))&&(a=n.y-r.y,o=r.x-n.x,u=n.x*r.y-r.x*n.y,h=a*e.x+o*e.y+u,f=a*t.x+o*t.y+u,!(h!==0&&f!==0&&vw(h,f))&&(p=i*o-a*s,p!==0)))return v=Math.abs(p/2),m=s*u-o*l,y=m<0?(m-v)/p:(m+v)/p,m=a*l-i*u,b=m<0?(m-v)/p:(m+v)/p,{x:y,y:b}}x(y8,"intersectLine");function vw(e,t){return e*t>0}x(vw,"sameSign");var zrt=y8;function x8(e,t,r){let n=e.x,i=e.y,a=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(h){s=Math.min(s,h.x),o=Math.min(o,h.y)}):(s=Math.min(s,t.x),o=Math.min(o,t.y));let l=n-e.width/2-s,u=i-e.height/2-o;for(let h=0;h<t.length;h++){let f=t[h],d=t[h<t.length-1?h+1:0],g=zrt(e,r,{x:l+f.x,y:u+f.y},{x:l+d.x,y:u+d.y});g&&a.push(g)}return a.length?(a.length>1&&a.sort(function(h,f){let d=h.x-r.x,g=h.y-r.y,p=Math.sqrt(d*d+g*g),v=f.x-r.x,m=f.y-r.y,y=Math.sqrt(v*v+m*m);return p<y?-1:p===y?0:1}),a[0]):e}x(x8,"intersectPolygon");var Vrt=x8,ge={node:Frt,circle:$rt,ellipse:v8,polygon:Vrt,rect:tf};function b8(e,t){const{labelStyles:r}=Te(t);t.labelStyle=r;const n=Ae(t);let i=n;n||(i="anchor");const a=e.insert("g").attr("class",i).attr("id",t.domId||t.id),s=1,{cssStyles:o}=t,l=ve.svg(a),u=ye(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(u.roughness=0);const h=l.circle(0,0,s*2,u),f=a.insert(()=>h,":first-child");return f.attr("class","anchor").attr("style",hi(o)),be(t,f),t.intersect=function(d){return et.info("Circle intersect",t,s,d),ge.circle(t,s,d)},a}x(b8,"anchor");function mw(e,t,r,n,i,a,s){const l=(e+r)/2,u=(t+n)/2,h=Math.atan2(n-t,r-e),f=(r-e)/2,d=(n-t)/2,g=f/i,p=d/a,v=Math.sqrt(g**2+p**2);if(v>1)throw new Error("The given radii are too small to create an arc between the points.");const m=Math.sqrt(1-v**2),y=l+m*a*Math.sin(h)*(s?-1:1),b=u-m*i*Math.cos(h)*(s?-1:1),T=Math.atan2((t-b)/a,(e-y)/i);let k=Math.atan2((n-b)/a,(r-y)/i)-T;s&&k<0&&(k+=2*Math.PI),!s&&k>0&&(k-=2*Math.PI);const S=[];for(let E=0;E<20;E++){const L=E/19,A=T+L*k,R=y+i*Math.cos(A),C=b+a*Math.sin(A);S.push({x:R,y:C})}return S}x(mw,"generateArcPoints");async function T8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=a.width+t.padding+20,o=a.height+t.padding,l=o/2,u=l/(2.5+o/50),{cssStyles:h}=t,f=[{x:s/2,y:-o/2},{x:-s/2,y:-o/2},...mw(-s/2,-o/2,-s/2,o/2,u,l,!1),{x:s/2,y:o/2},...mw(s/2,o/2,s/2,-o/2,u,l,!0)],d=ve.svg(i),g=ye(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=Ze(f),v=d.path(p,g),m=i.insert(()=>v,":first-child");return m.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",n),m.attr("transform",`translate(${u/2}, 0)`),be(t,m),t.intersect=function(y){return ge.polygon(t,f,y)},i}x(T8,"bowTieRect");function uo(e,t,r,n){return e.insert("polygon",":first-child").attr("points",n.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}x(uo,"insertPolygonShape");async function w8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=a.height+t.padding,o=12,l=a.width+t.padding+o,u=0,h=l,f=-s,d=0,g=[{x:u+o,y:f},{x:h,y:f},{x:h,y:d},{x:u,y:d},{x:u,y:f+o},{x:u+o,y:f}];let p;const{cssStyles:v}=t;if(t.look==="handDrawn"){const m=ve.svg(i),y=ye(t,{}),b=Ze(g),T=m.path(b,y);p=i.insert(()=>T,":first-child").attr("transform",`translate(${-l/2}, ${s/2})`),v&&p.attr("style",v)}else p=uo(i,l,s,g);return n&&p.attr("style",n),be(t,p),t.intersect=function(m){return ge.polygon(t,g,m)},i}x(w8,"card");function E8(e,t){const{nodeStyles:r}=Te(t);t.label="";const n=e.insert("g").attr("class",Ae(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,a=Math.max(28,t.width??0),s=[{x:0,y:a/2},{x:a/2,y:0},{x:0,y:-a/2},{x:-a/2,y:0}],o=ve.svg(n),l=ye(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const u=Ze(s),h=o.path(u,l),f=n.insert(()=>h,":first-child");return i&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",i),r&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(d){return ge.polygon(t,s,d)},n}x(E8,"choice");async function k8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,halfPadding:s}=await Ne(e,t,Ae(t)),o=a.width/2+s;let l;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=ve.svg(i),f=ye(t,{}),d=h.circle(0,0,o*2,f);l=i.insert(()=>d,":first-child"),l.attr("class","basic label-container").attr("style",hi(u))}else l=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",n).attr("r",o).attr("cx",0).attr("cy",0);return be(t,l),t.intersect=function(h){return et.info("Circle intersect",t,o,h),ge.circle(t,o,h)},i}x(k8,"circle");function C8(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),n=e*2,i={x:n/2*t,y:n/2*r},a={x:-(n/2)*t,y:n/2*r},s={x:-(n/2)*t,y:-(n/2)*r},o={x:n/2*t,y:-(n/2)*r};return`M ${a.x},${a.y} L ${o.x},${o.y}
                   M ${i.x},${i.y} L ${s.x},${s.y}`}x(C8,"createLine");function S8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r,t.label="";const i=e.insert("g").attr("class",Ae(t)).attr("id",t.domId??t.id),a=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:s}=t,o=ve.svg(i),l=ye(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const u=o.circle(0,0,a*2,l),h=C8(a),f=o.path(h,l),d=i.insert(()=>u,":first-child");return d.insert(()=>f),s&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",s),n&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",n),be(t,d),t.intersect=function(g){return et.info("crossedCircle intersect",t,{radius:a,point:g}),ge.circle(t,a,g)},i}x(S8,"crossedCircle");function As(e,t,r,n=100,i=0,a=180){const s=[],o=i*Math.PI/180,h=(a*Math.PI/180-o)/(n-1);for(let f=0;f<n;f++){const d=o+f*h,g=e+r*Math.cos(d),p=t+r*Math.sin(d);s.push({x:-g,y:-p})}return s}x(As,"generateCirclePoints");async function _8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=a.width+(t.padding??0),l=a.height+(t.padding??0),u=Math.max(5,l*.1),{cssStyles:h}=t,f=[...As(o/2,-l/2,u,30,-90,0),{x:-o/2-u,y:u},...As(o/2+u*2,-u,u,20,-180,-270),...As(o/2+u*2,u,u,20,-90,-180),{x:-o/2-u,y:-l/2},...As(o/2,l/2,u,20,0,90)],d=[{x:o/2,y:-l/2-u},{x:-o/2,y:-l/2-u},...As(o/2,-l/2,u,20,-90,0),{x:-o/2-u,y:-u},...As(o/2+o*.1,-u,u,20,-180,-270),...As(o/2+o*.1,u,u,20,-90,-180),{x:-o/2-u,y:l/2},...As(o/2,l/2,u,20,0,90),{x:-o/2,y:l/2+u},{x:o/2,y:l/2+u}],g=ve.svg(i),p=ye(t,{fill:"none"});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=Ze(f).replace("Z",""),y=g.path(m,p),b=Ze(d),T=g.path(b,{...p}),w=i.insert("g",":first-child");return w.insert(()=>T,":first-child").attr("stroke-opacity",0),w.insert(()=>y,":first-child"),w.attr("class","text"),h&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",n),w.attr("transform",`translate(${u}, 0)`),s.attr("transform",`translate(${-o/2+u-(a.x-(a.left??0))},${-l/2+(t.padding??0)/2-(a.y-(a.top??0))})`),be(t,w),t.intersect=function(k){return ge.polygon(t,d,k)},i}x(_8,"curlyBraceLeft");function Ls(e,t,r,n=100,i=0,a=180){const s=[],o=i*Math.PI/180,h=(a*Math.PI/180-o)/(n-1);for(let f=0;f<n;f++){const d=o+f*h,g=e+r*Math.cos(d),p=t+r*Math.sin(d);s.push({x:g,y:p})}return s}x(Ls,"generateCirclePoints");async function A8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=a.width+(t.padding??0),l=a.height+(t.padding??0),u=Math.max(5,l*.1),{cssStyles:h}=t,f=[...Ls(o/2,-l/2,u,20,-90,0),{x:o/2+u,y:-u},...Ls(o/2+u*2,-u,u,20,-180,-270),...Ls(o/2+u*2,u,u,20,-90,-180),{x:o/2+u,y:l/2},...Ls(o/2,l/2,u,20,0,90)],d=[{x:-o/2,y:-l/2-u},{x:o/2,y:-l/2-u},...Ls(o/2,-l/2,u,20,-90,0),{x:o/2+u,y:-u},...Ls(o/2+u*2,-u,u,20,-180,-270),...Ls(o/2+u*2,u,u,20,-90,-180),{x:o/2+u,y:l/2},...Ls(o/2,l/2,u,20,0,90),{x:o/2,y:l/2+u},{x:-o/2,y:l/2+u}],g=ve.svg(i),p=ye(t,{fill:"none"});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=Ze(f).replace("Z",""),y=g.path(m,p),b=Ze(d),T=g.path(b,{...p}),w=i.insert("g",":first-child");return w.insert(()=>T,":first-child").attr("stroke-opacity",0),w.insert(()=>y,":first-child"),w.attr("class","text"),h&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",n),w.attr("transform",`translate(${-u}, 0)`),s.attr("transform",`translate(${-o/2+(t.padding??0)/2-(a.x-(a.left??0))},${-l/2+(t.padding??0)/2-(a.y-(a.top??0))})`),be(t,w),t.intersect=function(k){return ge.polygon(t,d,k)},i}x(A8,"curlyBraceRight");function An(e,t,r,n=100,i=0,a=180){const s=[],o=i*Math.PI/180,h=(a*Math.PI/180-o)/(n-1);for(let f=0;f<n;f++){const d=o+f*h,g=e+r*Math.cos(d),p=t+r*Math.sin(d);s.push({x:-g,y:-p})}return s}x(An,"generateCirclePoints");async function L8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=a.width+(t.padding??0),l=a.height+(t.padding??0),u=Math.max(5,l*.1),{cssStyles:h}=t,f=[...An(o/2,-l/2,u,30,-90,0),{x:-o/2-u,y:u},...An(o/2+u*2,-u,u,20,-180,-270),...An(o/2+u*2,u,u,20,-90,-180),{x:-o/2-u,y:-l/2},...An(o/2,l/2,u,20,0,90)],d=[...An(-o/2+u+u/2,-l/2,u,20,-90,-180),{x:o/2-u/2,y:u},...An(-o/2-u/2,-u,u,20,0,90),...An(-o/2-u/2,u,u,20,-90,0),{x:o/2-u/2,y:-u},...An(-o/2+u+u/2,l/2,u,30,-180,-270)],g=[{x:o/2,y:-l/2-u},{x:-o/2,y:-l/2-u},...An(o/2,-l/2,u,20,-90,0),{x:-o/2-u,y:-u},...An(o/2+u*2,-u,u,20,-180,-270),...An(o/2+u*2,u,u,20,-90,-180),{x:-o/2-u,y:l/2},...An(o/2,l/2,u,20,0,90),{x:-o/2,y:l/2+u},{x:o/2-u-u/2,y:l/2+u},...An(-o/2+u+u/2,-l/2,u,20,-90,-180),{x:o/2-u/2,y:u},...An(-o/2-u/2,-u,u,20,0,90),...An(-o/2-u/2,u,u,20,-90,0),{x:o/2-u/2,y:-u},...An(-o/2+u+u/2,l/2,u,30,-180,-270)],p=ve.svg(i),v=ye(t,{fill:"none"});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const y=Ze(f).replace("Z",""),b=p.path(y,v),w=Ze(d).replace("Z",""),k=p.path(w,v),S=Ze(g),E=p.path(S,{...v}),L=i.insert("g",":first-child");return L.insert(()=>E,":first-child").attr("stroke-opacity",0),L.insert(()=>b,":first-child"),L.insert(()=>k,":first-child"),L.attr("class","text"),h&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",n),L.attr("transform",`translate(${u-u/4}, 0)`),s.attr("transform",`translate(${-o/2+(t.padding??0)/2-(a.x-(a.left??0))},${-l/2+(t.padding??0)/2-(a.y-(a.top??0))})`),be(t,L),t.intersect=function(A){return ge.polygon(t,g,A)},i}x(L8,"curlyBraces");async function R8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=80,o=20,l=Math.max(s,(a.width+(t.padding??0)*2)*1.25,(t==null?void 0:t.width)??0),u=Math.max(o,a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=u/2,{cssStyles:f}=t,d=ve.svg(i),g=ye(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=l,v=u,m=p-h,y=v/4,b=[{x:m,y:0},{x:y,y:0},{x:0,y:v/2},{x:y,y:v},{x:m,y:v},...RC(-m,-v/2,h,50,270,90)],T=Ze(b),w=d.path(T,g),k=i.insert(()=>w,":first-child");return k.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",n),k.attr("transform",`translate(${-l/2}, ${-u/2})`),be(t,k),t.intersect=function(S){return ge.polygon(t,b,S)},i}x(R8,"curvedTrapezoid");var Grt=x((e,t,r,n,i,a)=>[`M${e},${t+a}`,`a${i},${a} 0,0,0 ${r},0`,`a${i},${a} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${a} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createCylinderPathD"),Urt=x((e,t,r,n,i,a)=>[`M${e},${t+a}`,`M${e+r},${t+a}`,`a${i},${a} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${a} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createOuterCylinderPathD"),Wrt=x((e,t,r,n,i,a)=>[`M${e-r/2},${-n/2}`,`a${i},${a} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function I8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=Math.max(a.width+t.padding,t.width??0),l=o/2,u=l/(2.5+o/50),h=Math.max(a.height+u+t.padding,t.height??0);let f;const{cssStyles:d}=t;if(t.look==="handDrawn"){const g=ve.svg(i),p=Urt(0,0,o,h,l,u),v=Wrt(0,u,o,h,l,u),m=g.path(p,ye(t,{})),y=g.path(v,ye(t,{fill:"none"}));f=i.insert(()=>y,":first-child"),f=i.insert(()=>m,":first-child"),f.attr("class","basic label-container"),d&&f.attr("style",d)}else{const g=Grt(0,0,o,h,l,u);f=i.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",hi(d)).attr("style",n)}return f.attr("label-offset-y",u),f.attr("transform",`translate(${-o/2}, ${-(h/2+u)})`),be(t,f),s.attr("transform",`translate(${-(a.width/2)-(a.x-(a.left??0))}, ${-(a.height/2)+(t.padding??0)/1.5-(a.y-(a.top??0))})`),t.intersect=function(g){const p=ge.rect(t,g),v=p.x-(t.x??0);if(l!=0&&(Math.abs(v)<(t.width??0)/2||Math.abs(v)==(t.width??0)/2&&Math.abs(p.y-(t.y??0))>(t.height??0)/2-u)){let m=u*u*(1-v*v/(l*l));m>0&&(m=Math.sqrt(m)),m=u-m,g.y-(t.y??0)>0&&(m=-m),p.y+=m}return p},i}x(I8,"cylinder");async function N8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=a.width+t.padding,l=a.height+t.padding,u=l*.2,h=-o/2,f=-l/2-u/2,{cssStyles:d}=t,g=ve.svg(i),p=ye(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const v=[{x:h,y:f+u},{x:-h,y:f+u},{x:-h,y:-f},{x:h,y:-f},{x:h,y:f},{x:-h,y:f},{x:-h,y:f+u}],m=g.polygon(v.map(b=>[b.x,b.y]),p),y=i.insert(()=>m,":first-child");return y.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),s.attr("transform",`translate(${h+(t.padding??0)/2-(a.x-(a.left??0))}, ${f+u+(t.padding??0)/2-(a.y-(a.top??0))})`),be(t,y),t.intersect=function(b){return ge.rect(t,b)},i}x(N8,"dividedRectangle");async function D8(e,t){var d,g;const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,halfPadding:s}=await Ne(e,t,Ae(t)),l=a.width/2+s+5,u=a.width/2+s;let h;const{cssStyles:f}=t;if(t.look==="handDrawn"){const p=ve.svg(i),v=ye(t,{roughness:.2,strokeWidth:2.5}),m=ye(t,{roughness:.2,strokeWidth:1.5}),y=p.circle(0,0,l*2,v),b=p.circle(0,0,u*2,m);h=i.insert("g",":first-child"),h.attr("class",hi(t.cssClasses)).attr("style",hi(f)),(d=h.node())==null||d.appendChild(y),(g=h.node())==null||g.appendChild(b)}else{h=i.insert("g",":first-child");const p=h.insert("circle",":first-child"),v=h.insert("circle");h.attr("class","basic label-container").attr("style",n),p.attr("class","outer-circle").attr("style",n).attr("r",l).attr("cx",0).attr("cy",0),v.attr("class","inner-circle").attr("style",n).attr("r",u).attr("cx",0).attr("cy",0)}return be(t,h),t.intersect=function(p){return et.info("DoubleCircle intersect",t,l,p),ge.circle(t,l,p)},i}x(D8,"doublecircle");function M8(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:i}=Te(t);t.label="",t.labelStyle=n;const a=e.insert("g").attr("class",Ae(t)).attr("id",t.domId??t.id),s=7,{cssStyles:o}=t,l=ve.svg(a),{nodeBorder:u}=r,h=ye(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const f=l.circle(0,0,s*2,h),d=a.insert(()=>f,":first-child");return d.selectAll("path").attr("style",`fill: ${u} !important;`),o&&o.length>0&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",o),i&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",i),be(t,d),t.intersect=function(g){return et.info("filledCircle intersect",t,{radius:s,point:g}),ge.circle(t,s,g)},a}x(M8,"filledCircle");async function O8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=a.width+(t.padding??0),l=o+a.height,u=o+a.height,h=[{x:0,y:-l},{x:u,y:-l},{x:u/2,y:0}],{cssStyles:f}=t,d=ve.svg(i),g=ye(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=Ze(h),v=d.path(p,g),m=i.insert(()=>v,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return f&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",n),t.width=o,t.height=l,be(t,m),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-l/2+(t.padding??0)/2+(a.y-(a.top??0))})`),t.intersect=function(y){return et.info("Triangle intersect",t,h,y),ge.polygon(t,h,y)},i}x(O8,"flippedTriangle");function P8(e,t,{dir:r,config:{state:n,themeVariables:i}}){const{nodeStyles:a}=Te(t);t.label="";const s=e.insert("g").attr("class",Ae(t)).attr("id",t.domId??t.id),{cssStyles:o}=t;let l=Math.max(70,(t==null?void 0:t.width)??0),u=Math.max(10,(t==null?void 0:t.height)??0);r==="LR"&&(l=Math.max(10,(t==null?void 0:t.width)??0),u=Math.max(70,(t==null?void 0:t.height)??0));const h=-1*l/2,f=-1*u/2,d=ve.svg(s),g=ye(t,{stroke:i.lineColor,fill:i.lineColor});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=d.rectangle(h,f,l,u,g),v=s.insert(()=>p,":first-child");o&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",o),a&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",a),be(t,v);const m=(n==null?void 0:n.padding)??0;return t.width&&t.height&&(t.width+=m/2||0,t.height+=m/2||0),t.intersect=function(y){return ge.rect(t,y)},s}x(P8,"forkJoin");async function B8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const i=80,a=50,{shapeSvg:s,bbox:o}=await Ne(e,t,Ae(t)),l=Math.max(i,o.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(a,o.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=u/2,{cssStyles:f}=t,d=ve.svg(s),g=ye(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=[{x:-l/2,y:-u/2},{x:l/2-h,y:-u/2},...RC(-l/2+h,0,h,50,90,270),{x:l/2-h,y:u/2},{x:-l/2,y:u/2}],v=Ze(p),m=d.path(v,g),y=s.insert(()=>m,":first-child");return y.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),be(t,y),t.intersect=function(b){return et.info("Pill intersect",t,{radius:h,point:b}),ge.polygon(t,p,b)},s}x(B8,"halfRoundedRectangle");var Yrt=x((e,t,r,n,i)=>[`M${e+i},${t}`,`L${e+r-i},${t}`,`L${e+r},${t-n/2}`,`L${e+r-i},${t-n}`,`L${e+i},${t-n}`,`L${e},${t-n/2}`,"Z"].join(" "),"createHexagonPathD");async function F8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=4,o=a.height+t.padding,l=o/s,u=a.width+2*l+t.padding,h=[{x:l,y:0},{x:u-l,y:0},{x:u,y:-o/2},{x:u-l,y:-o},{x:l,y:-o},{x:0,y:-o/2}];let f;const{cssStyles:d}=t;if(t.look==="handDrawn"){const g=ve.svg(i),p=ye(t,{}),v=Yrt(0,0,u,o,l),m=g.path(v,p);f=i.insert(()=>m,":first-child").attr("transform",`translate(${-u/2}, ${o/2})`),d&&f.attr("style",d)}else f=uo(i,u,o,h);return n&&f.attr("style",n),t.width=u,t.height=o,be(t,f),t.intersect=function(g){return ge.polygon(t,h,g)},i}x(F8,"hexagon");async function $8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.label="",t.labelStyle=r;const{shapeSvg:i}=await Ne(e,t,Ae(t)),a=Math.max(30,(t==null?void 0:t.width)??0),s=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:o}=t,l=ve.svg(i),u=ye(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const h=[{x:0,y:0},{x:a,y:0},{x:0,y:s},{x:a,y:s}],f=Ze(h),d=l.path(f,u),g=i.insert(()=>d,":first-child");return g.attr("class","basic label-container"),o&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",o),n&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",n),g.attr("transform",`translate(${-a/2}, ${-s/2})`),be(t,g),t.intersect=function(p){return et.info("Pill intersect",t,{points:h}),ge.polygon(t,h,p)},i}x($8,"hourglass");async function z8(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Te(t);t.labelStyle=i;const a=t.assetHeight??48,s=t.assetWidth??48,o=Math.max(a,s),l=n==null?void 0:n.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:u,bbox:h,label:f}=await Ne(e,t,"icon-shape default"),d=t.pos==="t",g=o,p=o,{nodeBorder:v}=r,{stylesMap:m}=ef(t),y=-p/2,b=-g/2,T=t.label?8:0,w=ve.svg(u),k=ye(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const S=w.rectangle(y,b,p,g,k),E=Math.max(p,h.width),L=g+h.height+T,A=w.rectangle(-E/2,-L/2,E,L,{...k,fill:"transparent",stroke:"none"}),R=u.insert(()=>S,":first-child"),C=u.insert(()=>A);if(t.icon){const D=u.append("g");D.html(`<g>${await jl(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const P=D.node().getBBox(),_=P.width,I=P.height,M=P.x,O=P.y;D.attr("transform",`translate(${-_/2-M},${d?h.height/2+T/2-I/2-O:-h.height/2-T/2-I/2-O})`),D.attr("style",`color: ${m.get("stroke")??v};`)}return f.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-L/2:L/2-h.height})`),R.attr("transform",`translate(0,${d?h.height/2+T/2:-h.height/2-T/2})`),be(t,C),t.intersect=function(D){if(et.info("iconSquare intersect",t,D),!t.label)return ge.rect(t,D);const P=t.x??0,_=t.y??0,I=t.height??0;let M=[];return d?M=[{x:P-h.width/2,y:_-I/2},{x:P+h.width/2,y:_-I/2},{x:P+h.width/2,y:_-I/2+h.height+T},{x:P+p/2,y:_-I/2+h.height+T},{x:P+p/2,y:_+I/2},{x:P-p/2,y:_+I/2},{x:P-p/2,y:_-I/2+h.height+T},{x:P-h.width/2,y:_-I/2+h.height+T}]:M=[{x:P-p/2,y:_-I/2},{x:P+p/2,y:_-I/2},{x:P+p/2,y:_-I/2+g},{x:P+h.width/2,y:_-I/2+g},{x:P+h.width/2/2,y:_+I/2},{x:P-h.width/2,y:_+I/2},{x:P-h.width/2,y:_-I/2+g},{x:P-p/2,y:_-I/2+g}],ge.polygon(t,M,D)},u}x(z8,"icon");async function V8(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Te(t);t.labelStyle=i;const a=t.assetHeight??48,s=t.assetWidth??48,o=Math.max(a,s),l=n==null?void 0:n.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:u,bbox:h,label:f}=await Ne(e,t,"icon-shape default"),d=20,g=t.label?8:0,p=t.pos==="t",{nodeBorder:v,mainBkg:m}=r,{stylesMap:y}=ef(t),b=ve.svg(u),T=ye(t,{});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const w=y.get("fill");T.stroke=w??m;const k=u.append("g");t.icon&&k.html(`<g>${await jl(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const S=k.node().getBBox(),E=S.width,L=S.height,A=S.x,R=S.y,C=Math.max(E,L)*Math.SQRT2+d*2,D=b.circle(0,0,C,T),P=Math.max(C,h.width),_=C+h.height+g,I=b.rectangle(-P/2,-_/2,P,_,{...T,fill:"transparent",stroke:"none"}),M=u.insert(()=>D,":first-child"),O=u.insert(()=>I);return k.attr("transform",`translate(${-E/2-A},${p?h.height/2+g/2-L/2-R:-h.height/2-g/2-L/2-R})`),k.attr("style",`color: ${y.get("stroke")??v};`),f.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-_/2:_/2-h.height})`),M.attr("transform",`translate(0,${p?h.height/2+g/2:-h.height/2-g/2})`),be(t,O),t.intersect=function(N){return et.info("iconSquare intersect",t,N),ge.rect(t,N)},u}x(V8,"iconCircle");async function G8(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Te(t);t.labelStyle=i;const a=t.assetHeight??48,s=t.assetWidth??48,o=Math.max(a,s),l=n==null?void 0:n.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:u,bbox:h,halfPadding:f,label:d}=await Ne(e,t,"icon-shape default"),g=t.pos==="t",p=o+f*2,v=o+f*2,{nodeBorder:m,mainBkg:y}=r,{stylesMap:b}=ef(t),T=-v/2,w=-p/2,k=t.label?8:0,S=ve.svg(u),E=ye(t,{});t.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const L=b.get("fill");E.stroke=L??y;const A=S.path(co(T,w,v,p,5),E),R=Math.max(v,h.width),C=p+h.height+k,D=S.rectangle(-R/2,-C/2,R,C,{...E,fill:"transparent",stroke:"none"}),P=u.insert(()=>A,":first-child").attr("class","icon-shape2"),_=u.insert(()=>D);if(t.icon){const I=u.append("g");I.html(`<g>${await jl(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const M=I.node().getBBox(),O=M.width,N=M.height,B=M.x,z=M.y;I.attr("transform",`translate(${-O/2-B},${g?h.height/2+k/2-N/2-z:-h.height/2-k/2-N/2-z})`),I.attr("style",`color: ${b.get("stroke")??m};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${g?-C/2:C/2-h.height})`),P.attr("transform",`translate(0,${g?h.height/2+k/2:-h.height/2-k/2})`),be(t,_),t.intersect=function(I){if(et.info("iconSquare intersect",t,I),!t.label)return ge.rect(t,I);const M=t.x??0,O=t.y??0,N=t.height??0;let B=[];return g?B=[{x:M-h.width/2,y:O-N/2},{x:M+h.width/2,y:O-N/2},{x:M+h.width/2,y:O-N/2+h.height+k},{x:M+v/2,y:O-N/2+h.height+k},{x:M+v/2,y:O+N/2},{x:M-v/2,y:O+N/2},{x:M-v/2,y:O-N/2+h.height+k},{x:M-h.width/2,y:O-N/2+h.height+k}]:B=[{x:M-v/2,y:O-N/2},{x:M+v/2,y:O-N/2},{x:M+v/2,y:O-N/2+p},{x:M+h.width/2,y:O-N/2+p},{x:M+h.width/2/2,y:O+N/2},{x:M-h.width/2,y:O+N/2},{x:M-h.width/2,y:O-N/2+p},{x:M-v/2,y:O-N/2+p}],ge.polygon(t,B,I)},u}x(G8,"iconRounded");async function U8(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Te(t);t.labelStyle=i;const a=t.assetHeight??48,s=t.assetWidth??48,o=Math.max(a,s),l=n==null?void 0:n.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:u,bbox:h,halfPadding:f,label:d}=await Ne(e,t,"icon-shape default"),g=t.pos==="t",p=o+f*2,v=o+f*2,{nodeBorder:m,mainBkg:y}=r,{stylesMap:b}=ef(t),T=-v/2,w=-p/2,k=t.label?8:0,S=ve.svg(u),E=ye(t,{});t.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const L=b.get("fill");E.stroke=L??y;const A=S.path(co(T,w,v,p,.1),E),R=Math.max(v,h.width),C=p+h.height+k,D=S.rectangle(-R/2,-C/2,R,C,{...E,fill:"transparent",stroke:"none"}),P=u.insert(()=>A,":first-child"),_=u.insert(()=>D);if(t.icon){const I=u.append("g");I.html(`<g>${await jl(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const M=I.node().getBBox(),O=M.width,N=M.height,B=M.x,z=M.y;I.attr("transform",`translate(${-O/2-B},${g?h.height/2+k/2-N/2-z:-h.height/2-k/2-N/2-z})`),I.attr("style",`color: ${b.get("stroke")??m};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${g?-C/2:C/2-h.height})`),P.attr("transform",`translate(0,${g?h.height/2+k/2:-h.height/2-k/2})`),be(t,_),t.intersect=function(I){if(et.info("iconSquare intersect",t,I),!t.label)return ge.rect(t,I);const M=t.x??0,O=t.y??0,N=t.height??0;let B=[];return g?B=[{x:M-h.width/2,y:O-N/2},{x:M+h.width/2,y:O-N/2},{x:M+h.width/2,y:O-N/2+h.height+k},{x:M+v/2,y:O-N/2+h.height+k},{x:M+v/2,y:O+N/2},{x:M-v/2,y:O+N/2},{x:M-v/2,y:O-N/2+h.height+k},{x:M-h.width/2,y:O-N/2+h.height+k}]:B=[{x:M-v/2,y:O-N/2},{x:M+v/2,y:O-N/2},{x:M+v/2,y:O-N/2+p},{x:M+h.width/2,y:O-N/2+p},{x:M+h.width/2/2,y:O+N/2},{x:M-h.width/2,y:O+N/2},{x:M-h.width/2,y:O-N/2+p},{x:M-v/2,y:O-N/2+p}],ge.polygon(t,B,I)},u}x(U8,"iconSquare");async function W8(e,t,{config:{flowchart:r}}){const n=new Image;n.src=(t==null?void 0:t.img)??"",await n.decode();const i=Number(n.naturalWidth.toString().replace("px","")),a=Number(n.naturalHeight.toString().replace("px",""));t.imageAspectRatio=i/a;const{labelStyles:s}=Te(t);t.labelStyle=s;const o=r==null?void 0:r.wrappingWidth;t.defaultWidth=r==null?void 0:r.wrappingWidth;const l=Math.max(t.label?o??0:0,(t==null?void 0:t.assetWidth)??i),u=t.constraint==="on"&&t!=null&&t.assetHeight?t.assetHeight*t.imageAspectRatio:l,h=t.constraint==="on"?u/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??a;t.width=Math.max(u,o??0);const{shapeSvg:f,bbox:d,label:g}=await Ne(e,t,"image-shape default"),p=t.pos==="t",v=-u/2,m=-h/2,y=t.label?8:0,b=ve.svg(f),T=ye(t,{});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const w=b.rectangle(v,m,u,h,T),k=Math.max(u,d.width),S=h+d.height+y,E=b.rectangle(-k/2,-S/2,k,S,{...T,fill:"none",stroke:"none"}),L=f.insert(()=>w,":first-child"),A=f.insert(()=>E);if(t.img){const R=f.append("image");R.attr("href",t.img),R.attr("width",u),R.attr("height",h),R.attr("preserveAspectRatio","none"),R.attr("transform",`translate(${-u/2},${p?S/2-h:-S/2})`)}return g.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${p?-h/2-d.height/2-y/2:h/2-d.height/2+y/2})`),L.attr("transform",`translate(0,${p?d.height/2+y/2:-d.height/2-y/2})`),be(t,A),t.intersect=function(R){if(et.info("iconSquare intersect",t,R),!t.label)return ge.rect(t,R);const C=t.x??0,D=t.y??0,P=t.height??0;let _=[];return p?_=[{x:C-d.width/2,y:D-P/2},{x:C+d.width/2,y:D-P/2},{x:C+d.width/2,y:D-P/2+d.height+y},{x:C+u/2,y:D-P/2+d.height+y},{x:C+u/2,y:D+P/2},{x:C-u/2,y:D+P/2},{x:C-u/2,y:D-P/2+d.height+y},{x:C-d.width/2,y:D-P/2+d.height+y}]:_=[{x:C-u/2,y:D-P/2},{x:C+u/2,y:D-P/2},{x:C+u/2,y:D-P/2+h},{x:C+d.width/2,y:D-P/2+h},{x:C+d.width/2/2,y:D+P/2},{x:C-d.width/2,y:D+P/2},{x:C-d.width/2,y:D-P/2+h},{x:C-u/2,y:D-P/2+h}],ge.polygon(t,_,R)},f}x(W8,"imageSquare");async function Y8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),o=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:s,y:0},{x:s+3*o/6,y:-o},{x:-3*o/6,y:-o}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const f=ve.svg(i),d=ye(t,{}),g=Ze(l),p=f.path(g,d);u=i.insert(()=>p,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),h&&u.attr("style",h)}else u=uo(i,s,o,l);return n&&u.attr("style",n),t.width=s,t.height=o,be(t,u),t.intersect=function(f){return ge.polygon(t,l,f)},i}x(Y8,"inv_trapezoid");async function fp(e,t,r){const{labelStyles:n,nodeStyles:i}=Te(t);t.labelStyle=n;const{shapeSvg:a,bbox:s}=await Ne(e,t,Ae(t)),o=Math.max(s.width+r.labelPaddingX*2,(t==null?void 0:t.width)||0),l=Math.max(s.height+r.labelPaddingY*2,(t==null?void 0:t.height)||0),u=-o/2,h=-l/2;let f,{rx:d,ry:g}=t;const{cssStyles:p}=t;if(r!=null&&r.rx&&r.ry&&(d=r.rx,g=r.ry),t.look==="handDrawn"){const v=ve.svg(a),m=ye(t,{}),y=d||g?v.path(co(u,h,o,l,d||0),m):v.rectangle(u,h,o,l,m);f=a.insert(()=>y,":first-child"),f.attr("class","basic label-container").attr("style",hi(p))}else f=a.insert("rect",":first-child"),f.attr("class","basic label-container").attr("style",i).attr("rx",hi(d)).attr("ry",hi(g)).attr("x",u).attr("y",h).attr("width",o).attr("height",l);return be(t,f),t.intersect=function(v){return ge.rect(t,v)},a}x(fp,"drawRect");async function H8(e,t){const{shapeSvg:r,bbox:n,label:i}=await Ne(e,t,"label"),a=r.insert("rect",":first-child");return a.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),be(t,a),t.intersect=function(l){return ge.rect(t,l)},r}x(H8,"labelRect");async function q8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=Math.max(a.width+(t.padding??0),(t==null?void 0:t.width)??0),o=Math.max(a.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:s+3*o/6,y:0},{x:s,y:-o},{x:-(3*o)/6,y:-o}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const f=ve.svg(i),d=ye(t,{}),g=Ze(l),p=f.path(g,d);u=i.insert(()=>p,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),h&&u.attr("style",h)}else u=uo(i,s,o,l);return n&&u.attr("style",n),t.width=s,t.height=o,be(t,u),t.intersect=function(f){return ge.polygon(t,l,f)},i}x(q8,"lean_left");async function X8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=Math.max(a.width+(t.padding??0),(t==null?void 0:t.width)??0),o=Math.max(a.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:-3*o/6,y:0},{x:s,y:0},{x:s+3*o/6,y:-o},{x:0,y:-o}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const f=ve.svg(i),d=ye(t,{}),g=Ze(l),p=f.path(g,d);u=i.insert(()=>p,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),h&&u.attr("style",h)}else u=uo(i,s,o,l);return n&&u.attr("style",n),t.width=s,t.height=o,be(t,u),t.intersect=function(f){return ge.polygon(t,l,f)},i}x(X8,"lean_right");function j8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.label="",t.labelStyle=r;const i=e.insert("g").attr("class",Ae(t)).attr("id",t.domId??t.id),{cssStyles:a}=t,s=Math.max(35,(t==null?void 0:t.width)??0),o=Math.max(35,(t==null?void 0:t.height)??0),l=7,u=[{x:s,y:0},{x:0,y:o+l/2},{x:s-2*l,y:o+l/2},{x:0,y:2*o},{x:s,y:o-l/2},{x:2*l,y:o-l/2}],h=ve.svg(i),f=ye(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const d=Ze(u),g=h.path(d,f),p=i.insert(()=>g,":first-child");return a&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",a),n&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",n),p.attr("transform",`translate(-${s/2},${-o})`),be(t,p),t.intersect=function(v){return et.info("lightningBolt intersect",t,v),ge.polygon(t,u,v)},i}x(j8,"lightningBolt");var Hrt=x((e,t,r,n,i,a,s)=>[`M${e},${t+a}`,`a${i},${a} 0,0,0 ${r},0`,`a${i},${a} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${a} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+a+s}`,`a${i},${a} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),qrt=x((e,t,r,n,i,a,s)=>[`M${e},${t+a}`,`M${e+r},${t+a}`,`a${i},${a} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${a} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+a+s}`,`a${i},${a} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),Xrt=x((e,t,r,n,i,a)=>[`M${e-r/2},${-n/2}`,`a${i},${a} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function K8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=Math.max(a.width+(t.padding??0),t.width??0),l=o/2,u=l/(2.5+o/50),h=Math.max(a.height+u+(t.padding??0),t.height??0),f=h*.1;let d;const{cssStyles:g}=t;if(t.look==="handDrawn"){const p=ve.svg(i),v=qrt(0,0,o,h,l,u,f),m=Xrt(0,u,o,h,l,u),y=ye(t,{}),b=p.path(v,y),T=p.path(m,y);i.insert(()=>T,":first-child").attr("class","line"),d=i.insert(()=>b,":first-child"),d.attr("class","basic label-container"),g&&d.attr("style",g)}else{const p=Hrt(0,0,o,h,l,u,f);d=i.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",hi(g)).attr("style",n)}return d.attr("label-offset-y",u),d.attr("transform",`translate(${-o/2}, ${-(h/2+u)})`),be(t,d),s.attr("transform",`translate(${-(a.width/2)-(a.x-(a.left??0))}, ${-(a.height/2)+u-(a.y-(a.top??0))})`),t.intersect=function(p){const v=ge.rect(t,p),m=v.x-(t.x??0);if(l!=0&&(Math.abs(m)<(t.width??0)/2||Math.abs(m)==(t.width??0)/2&&Math.abs(v.y-(t.y??0))>(t.height??0)/2-u)){let y=u*u*(1-m*m/(l*l));y>0&&(y=Math.sqrt(y)),y=u-y,p.y-(t.y??0)>0&&(y=-y),v.y+=y}return v},i}x(K8,"linedCylinder");async function Z8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/4,h=l+u,{cssStyles:f}=t,d=ve.svg(i),g=ye(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=[{x:-o/2-o/2*.1,y:-h/2},{x:-o/2-o/2*.1,y:h/2},...Fo(-o/2-o/2*.1,h/2,o/2+o/2*.1,h/2,u,.8),{x:o/2+o/2*.1,y:-h/2},{x:-o/2-o/2*.1,y:-h/2},{x:-o/2,y:-h/2},{x:-o/2,y:h/2*1.1},{x:-o/2,y:-h/2}],v=d.polygon(p.map(y=>[y.x,y.y]),g),m=i.insert(()=>v,":first-child");return m.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",n),m.attr("transform",`translate(0,${-u/2})`),s.attr("transform",`translate(${-o/2+(t.padding??0)+o/2*.1/2-(a.x-(a.left??0))},${-l/2+(t.padding??0)-u/2-(a.y-(a.top??0))})`),be(t,m),t.intersect=function(y){return ge.polygon(t,p,y)},i}x(Z8,"linedWaveEdgedRect");async function Q8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=5,h=-o/2,f=-l/2,{cssStyles:d}=t,g=ve.svg(i),p=ye(t,{}),v=[{x:h-u,y:f+u},{x:h-u,y:f+l+u},{x:h+o-u,y:f+l+u},{x:h+o-u,y:f+l},{x:h+o,y:f+l},{x:h+o,y:f+l-u},{x:h+o+u,y:f+l-u},{x:h+o+u,y:f-u},{x:h+u,y:f-u},{x:h+u,y:f},{x:h,y:f},{x:h,y:f+u}],m=[{x:h,y:f+u},{x:h+o-u,y:f+u},{x:h+o-u,y:f+l},{x:h+o,y:f+l},{x:h+o,y:f},{x:h,y:f}];t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=Ze(v),b=g.path(y,p),T=Ze(m),w=g.path(T,{...p,fill:"none"}),k=i.insert(()=>w,":first-child");return k.insert(()=>b,":first-child"),k.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),s.attr("transform",`translate(${-(a.width/2)-u-(a.x-(a.left??0))}, ${-(a.height/2)+u-(a.y-(a.top??0))})`),be(t,k),t.intersect=function(S){return ge.polygon(t,v,S)},i}x(Q8,"multiRect");async function J8(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/4,h=l+u,f=-o/2,d=-h/2,g=5,{cssStyles:p}=t,v=Fo(f-g,d+h+g,f+o-g,d+h+g,u,.8),m=v==null?void 0:v[v.length-1],y=[{x:f-g,y:d+g},{x:f-g,y:d+h+g},...v,{x:f+o-g,y:m.y-g},{x:f+o,y:m.y-g},{x:f+o,y:m.y-2*g},{x:f+o+g,y:m.y-2*g},{x:f+o+g,y:d-g},{x:f+g,y:d-g},{x:f+g,y:d},{x:f,y:d},{x:f,y:d+g}],b=[{x:f,y:d+g},{x:f+o-g,y:d+g},{x:f+o-g,y:m.y-g},{x:f+o,y:m.y-g},{x:f+o,y:d},{x:f,y:d}],T=ve.svg(i),w=ye(t,{});t.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const k=Ze(y),S=T.path(k,w),E=Ze(b),L=T.path(E,w),A=i.insert(()=>S,":first-child");return A.insert(()=>L),A.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",n),A.attr("transform",`translate(0,${-u/2})`),s.attr("transform",`translate(${-(a.width/2)-g-(a.x-(a.left??0))}, ${-(a.height/2)+g-u/2-(a.y-(a.top??0))})`),be(t,A),t.intersect=function(R){return ge.polygon(t,y,R)},i}x(J8,"multiWaveEdgedRectangle");async function t7(e,t,{config:{themeVariables:r}}){var y;const{labelStyles:n,nodeStyles:i}=Te(t);t.labelStyle=n,t.useHtmlLabels||((y=gr().flowchart)==null?void 0:y.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:s,bbox:o}=await Ne(e,t,Ae(t)),l=Math.max(o.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(o.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=-l/2,f=-u/2,{cssStyles:d}=t,g=ve.svg(s),p=ye(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const v=g.rectangle(h,f,l,u,p),m=s.insert(()=>v,":first-child");return m.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",d),i&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",i),be(t,m),t.intersect=function(b){return ge.rect(t,b)},s}x(t7,"note");var jrt=x((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function e7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=a.width+t.padding,o=a.height+t.padding,l=s+o,u=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let h;const{cssStyles:f}=t;if(t.look==="handDrawn"){const d=ve.svg(i),g=ye(t,{}),p=jrt(0,0,l),v=d.path(p,g);h=i.insert(()=>v,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`),f&&h.attr("style",f)}else h=uo(i,l,l,u);return n&&h.attr("style",n),be(t,h),t.intersect=function(d){return et.debug(`APA12 Intersect called SPLIT
point:`,d,`
node:
`,t,`
res:`,ge.polygon(t,u,d)),ge.polygon(t,u,d)},i}x(e7,"question");async function r7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=Math.max(a.width+(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(a.height+(t.padding??0),(t==null?void 0:t.height)??0),u=-o/2,h=-l/2,f=h/2,d=[{x:u+f,y:h},{x:u,y:0},{x:u+f,y:-h},{x:-u,y:-h},{x:-u,y:h}],{cssStyles:g}=t,p=ve.svg(i),v=ye(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const m=Ze(d),y=p.path(m,v),b=i.insert(()=>y,":first-child");return b.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",n),b.attr("transform",`translate(${-f/2},0)`),s.attr("transform",`translate(${-f/2-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),be(t,b),t.intersect=function(T){return ge.polygon(t,d,T)},i}x(r7,"rect_left_inv_arrow");async function n7(e,t){var L,A;const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;let i;t.cssClasses?i="node "+t.cssClasses:i="node default";const a=e.insert("g").attr("class",i).attr("id",t.domId||t.id),s=a.insert("g"),o=a.insert("g").attr("class","label").attr("style",n),l=t.description,u=t.label,h=o.node().appendChild(await Ml(u,t.labelStyle,!0,!0));let f={width:0,height:0};if(dr((A=(L=pt())==null?void 0:L.flowchart)==null?void 0:A.htmlLabels)){const R=h.children[0],C=qt(h);f=R.getBoundingClientRect(),C.attr("width",f.width),C.attr("height",f.height)}et.info("Text 2",l);const d=l||[],g=h.getBBox(),p=o.node().appendChild(await Ml(d.join?d.join("<br/>"):d,t.labelStyle,!0,!0)),v=p.children[0],m=qt(p);f=v.getBoundingClientRect(),m.attr("width",f.width),m.attr("height",f.height);const y=(t.padding||0)/2;qt(p).attr("transform","translate( "+(f.width>g.width?0:(g.width-f.width)/2)+", "+(g.height+y+5)+")"),qt(h).attr("transform","translate( "+(f.width<g.width?0:-(g.width-f.width)/2)+", 0)"),f=o.node().getBBox(),o.attr("transform","translate("+-f.width/2+", "+(-f.height/2-y+3)+")");const b=f.width+(t.padding||0),T=f.height+(t.padding||0),w=-f.width/2-y,k=-f.height/2-y;let S,E;if(t.look==="handDrawn"){const R=ve.svg(a),C=ye(t,{}),D=R.path(co(w,k,b,T,t.rx||0),C),P=R.line(-f.width/2-y,-f.height/2-y+g.height+y,f.width/2+y,-f.height/2-y+g.height+y,C);E=a.insert(()=>(et.debug("Rough node insert CXC",D),P),":first-child"),S=a.insert(()=>(et.debug("Rough node insert CXC",D),D),":first-child")}else S=s.insert("rect",":first-child"),E=s.insert("line"),S.attr("class","outer title-state").attr("style",n).attr("x",-f.width/2-y).attr("y",-f.height/2-y).attr("width",f.width+(t.padding||0)).attr("height",f.height+(t.padding||0)),E.attr("class","divider").attr("x1",-f.width/2-y).attr("x2",f.width/2+y).attr("y1",-f.height/2-y+g.height+y).attr("y2",-f.height/2-y+g.height+y);return be(t,S),t.intersect=function(R){return ge.rect(t,R)},a}x(n7,"rectWithTitle");async function i7(e,t){const r={rx:5,ry:5,labelPaddingX:((t==null?void 0:t.padding)||0)*1,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return fp(e,t,r)}x(i7,"roundedRect");async function a7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=(t==null?void 0:t.padding)??0,l=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=-a.width/2-o,f=-a.height/2-o,{cssStyles:d}=t,g=ve.svg(i),p=ye(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const v=[{x:h,y:f},{x:h+l+8,y:f},{x:h+l+8,y:f+u},{x:h-8,y:f+u},{x:h-8,y:f},{x:h,y:f},{x:h,y:f+u}],m=g.polygon(v.map(b=>[b.x,b.y]),p),y=i.insert(()=>m,":first-child");return y.attr("class","basic label-container").attr("style",hi(d)),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),d&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),s.attr("transform",`translate(${-l/2+4+(t.padding??0)-(a.x-(a.left??0))},${-u/2+(t.padding??0)-(a.y-(a.top??0))})`),be(t,y),t.intersect=function(b){return ge.rect(t,b)},i}x(a7,"shadedProcess");async function s7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-o/2,h=-l/2,{cssStyles:f}=t,d=ve.svg(i),g=ye(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=[{x:u,y:h},{x:u,y:h+l},{x:u+o,y:h+l},{x:u+o,y:h-l/2}],v=Ze(p),m=d.path(v,g),y=i.insert(()=>m,":first-child");return y.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),y.attr("transform",`translate(0, ${l/4})`),s.attr("transform",`translate(${-o/2+(t.padding??0)-(a.x-(a.left??0))}, ${-l/4+(t.padding??0)-(a.y-(a.top??0))})`),be(t,y),t.intersect=function(b){return ge.polygon(t,p,b)},i}x(s7,"slopedRect");async function o7(e,t){const r={rx:0,ry:0,labelPaddingX:((t==null?void 0:t.padding)||0)*2,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return fp(e,t,r)}x(o7,"squareRect");async function l7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=a.height+t.padding,o=a.width+s/4+t.padding;let l;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=ve.svg(i),f=ye(t,{}),d=co(-o/2,-s/2,o,s,s/2),g=h.path(d,f);l=i.insert(()=>g,":first-child"),l.attr("class","basic label-container").attr("style",hi(u))}else l=i.insert("rect",":first-child"),l.attr("class","basic label-container").attr("style",n).attr("rx",s/2).attr("ry",s/2).attr("x",-o/2).attr("y",-s/2).attr("width",o).attr("height",s);return be(t,l),t.intersect=function(h){return ge.rect(t,h)},i}x(l7,"stadium");async function c7(e,t){return fp(e,t,{rx:5,ry:5})}x(c7,"state");function u7(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:i}=Te(t);t.labelStyle=n;const{cssStyles:a}=t,{lineColor:s,stateBorder:o,nodeBorder:l}=r,u=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),h=ve.svg(u),f=ye(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const d=h.circle(0,0,14,{...f,stroke:s,strokeWidth:2}),g=o??l,p=h.circle(0,0,5,{...f,fill:g,stroke:g,strokeWidth:2,fillStyle:"solid"}),v=u.insert(()=>d,":first-child");return v.insert(()=>p),a&&v.selectAll("path").attr("style",a),i&&v.selectAll("path").attr("style",i),be(t,v),t.intersect=function(m){return ge.circle(t,7,m)},u}x(u7,"stateEnd");function h7(e,t,{config:{themeVariables:r}}){const{lineColor:n}=r,i=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let a;if(t.look==="handDrawn"){const o=ve.svg(i).circle(0,0,14,Lrt(n));a=i.insert(()=>o),a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else a=i.insert("circle",":first-child"),a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return be(t,a),t.intersect=function(s){return ge.circle(t,7,s)},i}x(h7,"stateStart");async function f7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=((t==null?void 0:t.padding)||0)/2,o=a.width+t.padding,l=a.height+t.padding,u=-a.width/2-s,h=-a.height/2-s,f=[{x:0,y:0},{x:o,y:0},{x:o,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(t.look==="handDrawn"){const d=ve.svg(i),g=ye(t,{}),p=d.rectangle(u-8,h,o+16,l,g),v=d.line(u,h,u,h+l,g),m=d.line(u+o,h,u+o,h+l,g);i.insert(()=>v,":first-child"),i.insert(()=>m,":first-child");const y=i.insert(()=>p,":first-child"),{cssStyles:b}=t;y.attr("class","basic label-container").attr("style",hi(b)),be(t,y)}else{const d=uo(i,o,l,f);n&&d.attr("style",n),be(t,d)}return t.intersect=function(d){return ge.polygon(t,f,d)},i}x(f7,"subroutine");async function d7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),o=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=-s/2,u=-o/2,h=.2*o,f=.2*o,{cssStyles:d}=t,g=ve.svg(i),p=ye(t,{}),v=[{x:l-h/2,y:u},{x:l+s+h/2,y:u},{x:l+s+h/2,y:u+o},{x:l-h/2,y:u+o}],m=[{x:l+s-h/2,y:u+o},{x:l+s+h/2,y:u+o},{x:l+s+h/2,y:u+o-f}];t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=Ze(v),b=g.path(y,p),T=Ze(m),w=g.path(T,{...p,fillStyle:"solid"}),k=i.insert(()=>w,":first-child");return k.insert(()=>b,":first-child"),k.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),be(t,k),t.intersect=function(S){return ge.polygon(t,v,S)},i}x(d7,"taggedRect");async function g7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/4,h=.2*o,f=.2*l,d=l+u,{cssStyles:g}=t,p=ve.svg(i),v=ye(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const m=[{x:-o/2-o/2*.1,y:d/2},...Fo(-o/2-o/2*.1,d/2,o/2+o/2*.1,d/2,u,.8),{x:o/2+o/2*.1,y:-d/2},{x:-o/2-o/2*.1,y:-d/2}],y=-o/2+o/2*.1,b=-d/2-f*.4,T=[{x:y+o-h,y:(b+l)*1.4},{x:y+o,y:b+l-f},{x:y+o,y:(b+l)*.9},...Fo(y+o,(b+l)*1.3,y+o-h,(b+l)*1.5,-l*.03,.5)],w=Ze(m),k=p.path(w,v),S=Ze(T),E=p.path(S,{...v,fillStyle:"solid"}),L=i.insert(()=>E,":first-child");return L.insert(()=>k,":first-child"),L.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",n),L.attr("transform",`translate(0,${-u/2})`),s.attr("transform",`translate(${-o/2+(t.padding??0)-(a.x-(a.left??0))},${-l/2+(t.padding??0)-u/2-(a.y-(a.top??0))})`),be(t,L),t.intersect=function(A){return ge.polygon(t,m,A)},i}x(g7,"taggedWaveEdgedRectangle");async function p7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=Math.max(a.width+t.padding,(t==null?void 0:t.width)||0),o=Math.max(a.height+t.padding,(t==null?void 0:t.height)||0),l=-s/2,u=-o/2,h=i.insert("rect",":first-child");return h.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",l).attr("y",u).attr("width",s).attr("height",o),be(t,h),t.intersect=function(f){return ge.rect(t,f)},i}x(p7,"text");var Krt=x((e,t,r,n,i,a)=>`M${e},${t}
    a${i},${a} 0,0,1 0,${-n}
    l${r},0
    a${i},${a} 0,0,1 0,${n}
    M${r},${-n}
    a${i},${a} 0,0,0 0,${n}
    l${-r},0`,"createCylinderPathD"),Zrt=x((e,t,r,n,i,a)=>[`M${e},${t}`,`M${e+r},${t}`,`a${i},${a} 0,0,0 0,${-n}`,`l${-r},0`,`a${i},${a} 0,0,0 0,${n}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),Qrt=x((e,t,r,n,i,a)=>[`M${e+r/2},${-n/2}`,`a${i},${a} 0,0,0 0,${n}`].join(" "),"createInnerCylinderPathD");async function v7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s,halfPadding:o}=await Ne(e,t,Ae(t)),l=t.look==="neo"?o*2:o,u=a.height+l,h=u/2,f=h/(2.5+u/50),d=a.width+f+l,{cssStyles:g}=t;let p;if(t.look==="handDrawn"){const v=ve.svg(i),m=Zrt(0,0,d,u,f,h),y=Qrt(0,0,d,u,f,h),b=v.path(m,ye(t,{})),T=v.path(y,ye(t,{fill:"none"}));p=i.insert(()=>T,":first-child"),p=i.insert(()=>b,":first-child"),p.attr("class","basic label-container"),g&&p.attr("style",g)}else{const v=Krt(0,0,d,u,f,h);p=i.insert("path",":first-child").attr("d",v).attr("class","basic label-container").attr("style",hi(g)).attr("style",n),p.attr("class","basic label-container"),g&&p.selectAll("path").attr("style",g),n&&p.selectAll("path").attr("style",n)}return p.attr("label-offset-x",f),p.attr("transform",`translate(${-d/2}, ${u/2} )`),s.attr("transform",`translate(${-(a.width/2)-f-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),be(t,p),t.intersect=function(v){const m=ge.rect(t,v),y=m.y-(t.y??0);if(h!=0&&(Math.abs(y)<(t.height??0)/2||Math.abs(y)==(t.height??0)/2&&Math.abs(m.x-(t.x??0))>(t.width??0)/2-f)){let b=f*f*(1-y*y/(h*h));b!=0&&(b=Math.sqrt(Math.abs(b))),b=f-b,v.x-(t.x??0)>0&&(b=-b),m.x+=b}return m},i}x(v7,"tiltedCylinder");async function m7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=a.width+t.padding,o=a.height+t.padding,l=[{x:-3*o/6,y:0},{x:s+3*o/6,y:0},{x:s,y:-o},{x:0,y:-o}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const f=ve.svg(i),d=ye(t,{}),g=Ze(l),p=f.path(g,d);u=i.insert(()=>p,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),h&&u.attr("style",h)}else u=uo(i,s,o,l);return n&&u.attr("style",n),t.width=s,t.height=o,be(t,u),t.intersect=function(f){return ge.polygon(t,l,f)},i}x(m7,"trapezoid");async function y7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=60,o=20,l=Math.max(s,a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(o,a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),{cssStyles:h}=t,f=ve.svg(i),d=ye(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const g=[{x:-l/2*.8,y:-u/2},{x:l/2*.8,y:-u/2},{x:l/2,y:-u/2*.6},{x:l/2,y:u/2},{x:-l/2,y:u/2},{x:-l/2,y:-u/2*.6}],p=Ze(g),v=f.path(p,d),m=i.insert(()=>v,":first-child");return m.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",h),n&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",n),be(t,m),t.intersect=function(y){return ge.polygon(t,g,y)},i}x(y7,"trapezoidalPentagon");async function x7(e,t){var b;const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=dr((b=pt().flowchart)==null?void 0:b.htmlLabels),l=a.width+(t.padding??0),u=l+a.height,h=l+a.height,f=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-u}],{cssStyles:d}=t,g=ve.svg(i),p=ye(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const v=Ze(f),m=g.path(v,p),y=i.insert(()=>m,":first-child").attr("transform",`translate(${-u/2}, ${u/2})`);return d&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",d),n&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),t.width=l,t.height=u,be(t,y),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${u/2-(a.height+(t.padding??0)/(o?2:1)-(a.y-(a.top??0)))})`),t.intersect=function(T){return et.info("Triangle intersect",t,f,T),ge.polygon(t,f,T)},i}x(x7,"triangle");async function b7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/8,h=l+u,{cssStyles:f}=t,g=70-o,p=g>0?g/2:0,v=ve.svg(i),m=ye(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-o/2-p,y:h/2},...Fo(-o/2-p,h/2,o/2+p,h/2,u,.8),{x:o/2+p,y:-h/2},{x:-o/2-p,y:-h/2}],b=Ze(y),T=v.path(b,m),w=i.insert(()=>T,":first-child");return w.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",n),w.attr("transform",`translate(0,${-u/2})`),s.attr("transform",`translate(${-o/2+(t.padding??0)-(a.x-(a.left??0))},${-l/2+(t.padding??0)-u-(a.y-(a.top??0))})`),be(t,w),t.intersect=function(k){return ge.polygon(t,y,k)},i}x(b7,"waveEdgedRectangle");async function T7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a}=await Ne(e,t,Ae(t)),s=100,o=50,l=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=l/u;let f=l,d=u;f>d*h?d=f/h:f=d*h,f=Math.max(f,s),d=Math.max(d,o);const g=Math.min(d*.2,d/4),p=d+g*2,{cssStyles:v}=t,m=ve.svg(i),y=ye(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:-f/2,y:p/2},...Fo(-f/2,p/2,f/2,p/2,g,1),{x:f/2,y:-p/2},...Fo(f/2,-p/2,-f/2,-p/2,g,-1)],T=Ze(b),w=m.path(T,y),k=i.insert(()=>w,":first-child");return k.attr("class","basic label-container"),v&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",v),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),be(t,k),t.intersect=function(S){return ge.polygon(t,b,S)},i}x(T7,"waveRectangle");async function w7(e,t){const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Ne(e,t,Ae(t)),o=Math.max(a.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(a.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=5,h=-o/2,f=-l/2,{cssStyles:d}=t,g=ve.svg(i),p=ye(t,{}),v=[{x:h-u,y:f-u},{x:h-u,y:f+l},{x:h+o,y:f+l},{x:h+o,y:f-u}],m=`M${h-u},${f-u} L${h+o},${f-u} L${h+o},${f+l} L${h-u},${f+l} L${h-u},${f-u}
                M${h-u},${f} L${h+o},${f}
                M${h},${f-u} L${h},${f+l}`;t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=g.path(m,p),b=i.insert(()=>y,":first-child");return b.attr("transform",`translate(${u/2}, ${u/2})`),b.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",n),s.attr("transform",`translate(${-(a.width/2)+u/2-(a.x-(a.left??0))}, ${-(a.height/2)+u/2-(a.y-(a.top??0))})`),be(t,b),t.intersect=function(T){return ge.polygon(t,v,T)},i}x(w7,"windowPane");async function NC(e,t){var B,z,F;const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:V}=gr(),{background:G}=V,Y={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${G}`]};await NC(e,Y)}const n=gr();t.useHtmlLabels=n.htmlLabels;let i=((B=n.er)==null?void 0:B.diagramPadding)??10,a=((z=n.er)==null?void 0:z.entityPadding)??6;const{cssStyles:s}=t,{labelStyles:o}=Te(t);if(r.attributes.length===0&&t.label){const V={rx:0,ry:0,labelPaddingX:i,labelPaddingY:i*1.5};ui(t.label,n)+V.labelPaddingX*2<n.er.minEntityWidth&&(t.width=n.er.minEntityWidth);const G=await fp(e,t,V);if(!dr(n.htmlLabels)){const Y=G.select("text"),Q=(F=Y.node())==null?void 0:F.getBBox();Y.attr("transform",`translate(${-Q.width/2}, 0)`)}return G}n.htmlLabels||(i*=1.25,a*=1.25);let l=Ae(t);l||(l="node default");const u=e.insert("g").attr("class",l).attr("id",t.domId||t.id),h=await Zc(u,t.label??"",n,0,0,["name"],o);h.height+=a;let f=0;const d=[];let g=0,p=0,v=0,m=0,y=!0,b=!0;for(const V of r.attributes){const G=await Zc(u,V.type,n,0,f,["attribute-type"],o);g=Math.max(g,G.width+i);const Y=await Zc(u,V.name,n,0,f,["attribute-name"],o);p=Math.max(p,Y.width+i);const Q=await Zc(u,V.keys.join(),n,0,f,["attribute-keys"],o);v=Math.max(v,Q.width+i);const K=await Zc(u,V.comment,n,0,f,["attribute-comment"],o);m=Math.max(m,K.width+i),f+=Math.max(G.height,Y.height,Q.height,K.height)+a,d.push(f)}d.pop();let T=4;v<=i&&(y=!1,v=0,T--),m<=i&&(b=!1,m=0,T--);const w=u.node().getBBox();if(h.width+i*2-(g+p+v+m)>0){const V=h.width+i*2-(g+p+v+m);g+=V/T,p+=V/T,v>0&&(v+=V/T),m>0&&(m+=V/T)}const k=g+p+v+m,S=ve.svg(u),E=ye(t,{});t.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const L=Math.max(w.width+i*2,(t==null?void 0:t.width)||0,k),A=Math.max(w.height+(d[0]||f)+a,(t==null?void 0:t.height)||0),R=-L/2,C=-A/2;u.selectAll("g:not(:first-child)").each((V,G,Y)=>{const Q=qt(Y[G]),K=Q.attr("transform");let it=0,ut=0;if(K){const W=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(K);W&&(it=parseFloat(W[1]),ut=parseFloat(W[2]),Q.attr("class").includes("attribute-name")?it+=g:Q.attr("class").includes("attribute-keys")?it+=g+p:Q.attr("class").includes("attribute-comment")&&(it+=g+p+v))}Q.attr("transform",`translate(${R+i/2+it}, ${ut+C+h.height+a/2})`)}),u.select(".name").attr("transform","translate("+-h.width/2+", "+(C+a/2)+")");const D=S.rectangle(R,C,L,A,E),P=u.insert(()=>D,":first-child").attr("style",s.join("")),{themeVariables:_}=gr(),{rowEven:I,rowOdd:M,nodeBorder:O}=_;d.push(0);for(const[V,G]of d.entries()){if(V===0&&d.length>1)continue;const Y=V%2===0&&G!==0,Q=S.rectangle(R,h.height+C+G,L,h.height,{...E,fill:Y?I:M,stroke:O});u.insert(()=>Q,"g.label").attr("style",s.join("")).attr("class",`row-rect-${V%2===0?"even":"odd"}`)}let N=S.line(R,h.height+C,L+R,h.height+C,E);u.insert(()=>N).attr("class","divider"),N=S.line(g+R,h.height+C,g+R,A+C,E),u.insert(()=>N).attr("class","divider"),y&&(N=S.line(g+p+R,h.height+C,g+p+R,A+C,E),u.insert(()=>N).attr("class","divider")),b&&(N=S.line(g+p+v+R,h.height+C,g+p+v+R,A+C,E),u.insert(()=>N).attr("class","divider"));for(const V of d)N=S.line(R,h.height+C+V,L+R,h.height+C+V,E),u.insert(()=>N).attr("class","divider");return be(t,P),t.intersect=function(V){return ge.rect(t,V)},u}x(NC,"erBox");async function Zc(e,t,r,n=0,i=0,a=[],s=""){const o=e.insert("g").attr("class",`label ${a.join(" ")}`).attr("transform",`translate(${n}, ${i})`).attr("style",s);t!==yo(t)&&(t=yo(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=o.node().appendChild(await Pi(o,t,{width:ui(t,r)+100,style:s,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let h=l.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let u=l.getBBox();if(dr(r.htmlLabels)){const h=l.children[0];h.style.textAlign="start";const f=qt(l);u=h.getBoundingClientRect(),f.attr("width",u.width),f.attr("height",u.height)}return u}x(Zc,"addText");async function E7(e,t,r,n,i=r.class.padding??12){const a=n?0:3,s=e.insert("g").attr("class",Ae(t)).attr("id",t.domId||t.id);let o=null,l=null,u=null,h=null,f=0,d=0,g=0;if(o=s.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const b=t.annotations[0];await Zf(o,{text:`«${b}»`},0),f=o.node().getBBox().height}l=s.insert("g").attr("class","label-group text"),await Zf(l,t,0,["font-weight: bolder"]);const p=l.node().getBBox();d=p.height,u=s.insert("g").attr("class","members-group text");let v=0;for(const b of t.members){const T=await Zf(u,b,v,[b.parseClassifier()]);v+=T+a}g=u.node().getBBox().height,g<=0&&(g=i/2),h=s.insert("g").attr("class","methods-group text");let m=0;for(const b of t.methods){const T=await Zf(h,b,m,[b.parseClassifier()]);m+=T+a}let y=s.node().getBBox();if(o!==null){const b=o.node().getBBox();o.attr("transform",`translate(${-b.width/2})`)}return l.attr("transform",`translate(${-p.width/2}, ${f})`),y=s.node().getBBox(),u.attr("transform",`translate(0, ${f+d+i*2})`),y=s.node().getBBox(),h.attr("transform",`translate(0, ${f+d+(g?g+i*4:i*2)})`),y=s.node().getBBox(),{shapeSvg:s,bbox:y}}x(E7,"textHelper");async function Zf(e,t,r,n=[]){const i=e.insert("g").attr("class","label").attr("style",n.join("; ")),a=gr();let s="useHtmlLabels"in t?t.useHtmlLabels:dr(a.htmlLabels)??!0,o="";"text"in t?o=t.text:o=t.label,!s&&o.startsWith("\\")&&(o=o.substring(1)),Kn(o)&&(s=!0);const l=await Pi(i,Hk(cs(o)),{width:ui(o,a)+50,classes:"markdown-node-label",useHtmlLabels:s},a);let u,h=1;if(s){const f=l.children[0],d=qt(l);h=f.innerHTML.split("<br>").length,f.innerHTML.includes("</math>")&&(h+=f.innerHTML.split("<mrow>").length-1);const g=f.getElementsByTagName("img");if(g){const p=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(v=>new Promise(m=>{function y(){var b;if(v.style.display="flex",v.style.flexDirection="column",p){const T=((b=a.fontSize)==null?void 0:b.toString())??window.getComputedStyle(document.body).fontSize,k=parseInt(T,10)*5+"px";v.style.minWidth=k,v.style.maxWidth=k}else v.style.width="100%";m(v)}x(y,"setupImage"),setTimeout(()=>{v.complete&&y()}),v.addEventListener("error",y),v.addEventListener("load",y)})))}u=f.getBoundingClientRect(),d.attr("width",u.width),d.attr("height",u.height)}else{n.includes("font-weight: bolder")&&qt(l).selectAll("tspan").attr("font-weight",""),h=l.children.length;const f=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(f.textContent=o[0]+o.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),o[1]===" "&&(f.textContent=f.textContent[0]+" "+f.textContent.substring(1))),f.textContent==="undefined"&&(f.textContent=""),u=l.getBBox()}return i.attr("transform","translate(0,"+(-u.height/(2*h)+r)+")"),u.height}x(Zf,"addText");async function k7(e,t){var A,R;const r=pt(),n=r.class.padding??12,i=n,a=t.useHtmlLabels??dr(r.htmlLabels)??!0,s=t;s.annotations=s.annotations??[],s.members=s.members??[],s.methods=s.methods??[];const{shapeSvg:o,bbox:l}=await E7(e,t,r,a,i),{labelStyles:u,nodeStyles:h}=Te(t);t.labelStyle=u,t.cssStyles=s.styles||"";const f=((A=s.styles)==null?void 0:A.join(";"))||h||"";t.cssStyles||(t.cssStyles=f.replaceAll("!important","").split(";"));const d=s.members.length===0&&s.methods.length===0&&!((R=r.class)!=null&&R.hideEmptyMembersBox),g=ve.svg(o),p=ye(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const v=l.width;let m=l.height;s.members.length===0&&s.methods.length===0?m+=i:s.members.length>0&&s.methods.length===0&&(m+=i*2);const y=-v/2,b=-m/2,T=g.rectangle(y-n,b-n-(d?n:s.members.length===0&&s.methods.length===0?-n/2:0),v+2*n,m+2*n+(d?n*2:s.members.length===0&&s.methods.length===0?-n:0),p),w=o.insert(()=>T,":first-child");w.attr("class","basic label-container");const k=w.node().getBBox();o.selectAll(".text").each((C,D,P)=>{var B;const _=qt(P[D]),I=_.attr("transform");let M=0;if(I){const F=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(I);F&&(M=parseFloat(F[2]))}let O=M+b+n-(d?n:s.members.length===0&&s.methods.length===0?-n/2:0);a||(O-=4);let N=y;(_.attr("class").includes("label-group")||_.attr("class").includes("annotation-group"))&&(N=-((B=_.node())==null?void 0:B.getBBox().width)/2||0,o.selectAll("text").each(function(z,F,V){window.getComputedStyle(V[F]).textAnchor==="middle"&&(N=0)})),_.attr("transform",`translate(${N}, ${O})`)});const S=o.select(".annotation-group").node().getBBox().height-(d?n/2:0)||0,E=o.select(".label-group").node().getBBox().height-(d?n/2:0)||0,L=o.select(".members-group").node().getBBox().height-(d?n/2:0)||0;if(s.members.length>0||s.methods.length>0||d){const C=g.line(k.x,S+E+b+n,k.x+k.width,S+E+b+n,p);o.insert(()=>C).attr("class","divider").attr("style",f)}if(d||s.members.length>0||s.methods.length>0){const C=g.line(k.x,S+E+L+b+i*2+n,k.x+k.width,S+E+L+b+n+i*2,p);o.insert(()=>C).attr("class","divider").attr("style",f)}if(s.look!=="handDrawn"&&o.selectAll("path").attr("style",f),w.select(":nth-child(2)").attr("style",f),o.selectAll(".divider").select("path").attr("style",f),t.labelStyle?o.selectAll("span").attr("style",t.labelStyle):o.selectAll("span").attr("style",f),!a){const C=RegExp(/color\s*:\s*([^;]*)/),D=C.exec(f);if(D){const P=D[0].replace("color","fill");o.selectAll("tspan").attr("style",P)}else if(u){const P=C.exec(u);if(P){const _=P[0].replace("color","fill");o.selectAll("tspan").attr("style",_)}}}return be(t,w),t.intersect=function(C){return ge.rect(t,C)},o}x(k7,"classBox");async function C7(e,t){var S,E;const{labelStyles:r,nodeStyles:n}=Te(t);t.labelStyle=r;const i=t,a=t,s=20,o=20,l="verifyMethod"in t,u=Ae(t),h=e.insert("g").attr("class",u).attr("id",t.domId??t.id);let f;l?f=await ja(h,`&lt;&lt;${i.type}&gt;&gt;`,0,t.labelStyle):f=await ja(h,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let d=f;const g=await ja(h,i.name,d,t.labelStyle+"; font-weight: bold;");if(d+=g+o,l){const L=await ja(h,`${i.requirementId?`Id: ${i.requirementId}`:""}`,d,t.labelStyle);d+=L;const A=await ja(h,`${i.text?`Text: ${i.text}`:""}`,d,t.labelStyle);d+=A;const R=await ja(h,`${i.risk?`Risk: ${i.risk}`:""}`,d,t.labelStyle);d+=R,await ja(h,`${i.verifyMethod?`Verification: ${i.verifyMethod}`:""}`,d,t.labelStyle)}else{const L=await ja(h,`${a.type?`Type: ${a.type}`:""}`,d,t.labelStyle);d+=L,await ja(h,`${a.docRef?`Doc Ref: ${a.docRef}`:""}`,d,t.labelStyle)}const p=(((S=h.node())==null?void 0:S.getBBox().width)??200)+s,v=(((E=h.node())==null?void 0:E.getBBox().height)??200)+s,m=-p/2,y=-v/2,b=ve.svg(h),T=ye(t,{});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const w=b.rectangle(m,y,p,v,T),k=h.insert(()=>w,":first-child");if(k.attr("class","basic label-container").attr("style",n),h.selectAll(".label").each((L,A,R)=>{const C=qt(R[A]),D=C.attr("transform");let P=0,_=0;if(D){const N=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(D);N&&(P=parseFloat(N[1]),_=parseFloat(N[2]))}const I=_-v/2;let M=m+s/2;(A===0||A===1)&&(M=P),C.attr("transform",`translate(${M}, ${I+s})`)}),d>f+g+o){const L=b.line(m,y+f+g+o,m+p,y+f+g+o,T);h.insert(()=>L).attr("style",n)}return be(t,k),t.intersect=function(L){return ge.rect(t,L)},h}x(C7,"requirementBox");async function ja(e,t,r,n=""){if(t==="")return 0;const i=e.insert("g").attr("class","label").attr("style",n),a=pt(),s=a.htmlLabels??!0,o=await Pi(i,Hk(cs(t)),{width:ui(t,a)+50,classes:"markdown-node-label",useHtmlLabels:s,style:n},a);let l;if(s){const u=o.children[0],h=qt(o);l=u.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}else{const u=o.children[0];for(const h of u.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),n&&h.setAttribute("style",n);l=o.getBBox(),l.height+=6}return i.attr("transform",`translate(${-l.width/2},${-l.height/2+r})`),l.height}x(ja,"addText");var Jrt=x(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function S7(e,t,{config:r}){var D,P;const{labelStyles:n,nodeStyles:i}=Te(t);t.labelStyle=n||"";const a=10,s=t.width;t.width=(t.width??200)-10;const{shapeSvg:o,bbox:l,label:u}=await Ne(e,t,Ae(t)),h=t.padding||10;let f="",d;"ticket"in t&&t.ticket&&((D=r==null?void 0:r.kanban)!=null&&D.ticketBaseUrl)&&(f=(P=r==null?void 0:r.kanban)==null?void 0:P.ticketBaseUrl.replace("#TICKET#",t.ticket),d=o.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",f).attr("target","_blank"));const g={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let p,v;d?{label:p,bbox:v}=await tx(d,"ticket"in t&&t.ticket||"",g):{label:p,bbox:v}=await tx(o,"ticket"in t&&t.ticket||"",g);const{label:m,bbox:y}=await tx(o,"assigned"in t&&t.assigned||"",g);t.width=s;const b=10,T=(t==null?void 0:t.width)||0,w=Math.max(v.height,y.height)/2,k=Math.max(l.height+b*2,(t==null?void 0:t.height)||0)+w,S=-T/2,E=-k/2;u.attr("transform","translate("+(h-T/2)+", "+(-w-l.height/2)+")"),p.attr("transform","translate("+(h-T/2)+", "+(-w+l.height/2)+")"),m.attr("transform","translate("+(h+T/2-y.width-2*a)+", "+(-w+l.height/2)+")");let L;const{rx:A,ry:R}=t,{cssStyles:C}=t;if(t.look==="handDrawn"){const _=ve.svg(o),I=ye(t,{}),M=A||R?_.path(co(S,E,T,k,A||0),I):_.rectangle(S,E,T,k,I);L=o.insert(()=>M,":first-child"),L.attr("class","basic label-container").attr("style",C||null)}else{L=o.insert("rect",":first-child"),L.attr("class","basic label-container __APA__").attr("style",i).attr("rx",A??5).attr("ry",R??5).attr("x",S).attr("y",E).attr("width",T).attr("height",k);const _="priority"in t&&t.priority;if(_){const I=o.append("line"),M=S+2,O=E+Math.floor((A??0)/2),N=E+k-Math.floor((A??0)/2);I.attr("x1",M).attr("y1",O).attr("x2",M).attr("y2",N).attr("stroke-width","4").attr("stroke",Jrt(_))}}return be(t,L),t.height=k,t.intersect=function(_){return ge.rect(t,_)},o}x(S7,"kanbanItem");var tnt=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:o7},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:i7},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:l7},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:f7},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:I8},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:k8},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:e7},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:F8},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:X8},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:q8},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:m7},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Y8},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:D8},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:p7},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:w8},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:a7},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:h7},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:u7},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:P8},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:$8},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:_8},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:A8},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:L8},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:j8},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:b7},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:B8},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:v7},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:K8},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:R8},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:N8},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:x7},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:w7},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:M8},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:y7},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:O8},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:s7},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:J8},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Q8},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:T8},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:S8},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:g7},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:d7},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:T7},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:r7},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Z8}],ent=x(()=>{const t=[...Object.entries({state:c7,choice:E8,note:t7,rectWithTitle:n7,labelRect:H8,iconSquare:U8,iconCircle:V8,icon:z8,iconRounded:G8,imageSquare:W8,anchor:b8,kanbanItem:S7,classBox:k7,erBox:NC,requirementBox:C7}),...tnt.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(i=>[i,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),_7=ent();function A7(e){return e in _7}x(A7,"isValidShape");var yy=new Map;async function xy(e,t,r){let n,i;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const a=t.shape?_7[t.shape]:void 0;if(!a)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let s;r.config.securityLevel==="sandbox"?s="_top":t.linkTarget&&(s=t.linkTarget||"_blank"),n=e.insert("svg:a").attr("xlink:href",t.link).attr("target",s??null),i=await a(n,t,r)}else i=await a(e,t,r),n=i;return t.tooltip&&i.attr("title",t.tooltip),yy.set(t.id,n),t.haveCallback&&n.attr("class",n.attr("class")+" clickable"),n}x(xy,"insertNode");var rnt=x((e,t)=>{yy.set(t.id,e)},"setNodeElem"),nnt=x(()=>{yy.clear()},"clear"),yw=x(e=>{const t=yy.get(e.id);et.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,n=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+n-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),n},"positionNode"),int=x((e,t,r,n,i,a)=>{t.arrowTypeStart&&F3(e,"start",t.arrowTypeStart,r,n,i,a),t.arrowTypeEnd&&F3(e,"end",t.arrowTypeEnd,r,n,i,a)},"addEdgeMarkers"),ant={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},F3=x((e,t,r,n,i,a,s)=>{var f;const o=ant[r];if(!o){et.warn(`Unknown arrow type: ${r}`);return}const l=o.type,h=`${i}_${a}-${l}${t==="start"?"Start":"End"}`;if(s&&s.trim()!==""){const d=s.replace(/[^\dA-Za-z]/g,"_"),g=`${h}_${d}`;if(!document.getElementById(g)){const p=document.getElementById(h);if(p){const v=p.cloneNode(!0);v.id=g,v.querySelectorAll("path, circle, line").forEach(y=>{y.setAttribute("stroke",s),o.fill&&y.setAttribute("fill",s)}),(f=p.parentNode)==null||f.appendChild(v)}}e.attr(`marker-${t}`,`url(${n}#${g})`)}else e.attr(`marker-${t}`,`url(${n}#${h})`)},"addEdgeMarker"),Pv=new Map,Rn=new Map,snt=x(()=>{Pv.clear(),Rn.clear()},"clear"),Mf=x(e=>e?e.reduce((r,n)=>r+";"+n,""):"","getLabelStyles"),L7=x(async(e,t)=>{let r=dr(pt().flowchart.htmlLabels);const n=await Pi(e,t.label,{style:Mf(t.labelStyle),useHtmlLabels:r,addSvgBackground:!0,isNode:!1});et.info("abc82",t,t.labelType);const i=e.insert("g").attr("class","edgeLabel"),a=i.insert("g").attr("class","label");a.node().appendChild(n);let s=n.getBBox();if(r){const l=n.children[0],u=qt(n);s=l.getBoundingClientRect(),u.attr("width",s.width),u.attr("height",s.height)}a.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),Pv.set(t.id,i),t.width=s.width,t.height=s.height;let o;if(t.startLabelLeft){const l=await Ml(t.startLabelLeft,Mf(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),h=u.insert("g").attr("class","inner");o=h.node().appendChild(l);const f=l.getBBox();h.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),Rn.get(t.id)||Rn.set(t.id,{}),Rn.get(t.id).startLeft=u,Qf(o,t.startLabelLeft)}if(t.startLabelRight){const l=await Ml(t.startLabelRight,Mf(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),h=u.insert("g").attr("class","inner");o=u.node().appendChild(l),h.node().appendChild(l);const f=l.getBBox();h.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),Rn.get(t.id)||Rn.set(t.id,{}),Rn.get(t.id).startRight=u,Qf(o,t.startLabelRight)}if(t.endLabelLeft){const l=await Ml(t.endLabelLeft,Mf(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),h=u.insert("g").attr("class","inner");o=h.node().appendChild(l);const f=l.getBBox();h.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),u.node().appendChild(l),Rn.get(t.id)||Rn.set(t.id,{}),Rn.get(t.id).endLeft=u,Qf(o,t.endLabelLeft)}if(t.endLabelRight){const l=await Ml(t.endLabelRight,Mf(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),h=u.insert("g").attr("class","inner");o=h.node().appendChild(l);const f=l.getBBox();h.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),u.node().appendChild(l),Rn.get(t.id)||Rn.set(t.id,{}),Rn.get(t.id).endRight=u,Qf(o,t.endLabelRight)}return n},"insertEdgeLabel");function Qf(e,t){pt().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}x(Qf,"setTerminalWidth");var R7=x((e,t)=>{et.debug("Moving label abc88 ",e.id,e.label,Pv.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const n=pt(),{subGraphTitleTotalMargin:i}=np(n);if(e.label){const a=Pv.get(e.id);let s=e.x,o=e.y;if(r){const l=De.calcLabelPosition(r);et.debug("Moving label "+e.label+" from (",s,",",o,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(s=l.x,o=l.y)}a.attr("transform",`translate(${s}, ${o+i/2})`)}if(e.startLabelLeft){const a=Rn.get(e.id).startLeft;let s=e.x,o=e.y;if(r){const l=De.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);s=l.x,o=l.y}a.attr("transform",`translate(${s}, ${o})`)}if(e.startLabelRight){const a=Rn.get(e.id).startRight;let s=e.x,o=e.y;if(r){const l=De.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);s=l.x,o=l.y}a.attr("transform",`translate(${s}, ${o})`)}if(e.endLabelLeft){const a=Rn.get(e.id).endLeft;let s=e.x,o=e.y;if(r){const l=De.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);s=l.x,o=l.y}a.attr("transform",`translate(${s}, ${o})`)}if(e.endLabelRight){const a=Rn.get(e.id).endRight;let s=e.x,o=e.y;if(r){const l=De.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);s=l.x,o=l.y}a.attr("transform",`translate(${s}, ${o})`)}},"positionEdgeLabel"),ont=x((e,t)=>{const r=e.x,n=e.y,i=Math.abs(t.x-r),a=Math.abs(t.y-n),s=e.width/2,o=e.height/2;return i>=s||a>=o},"outsideNode"),lnt=x((e,t,r)=>{et.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const n=e.x,i=e.y,a=Math.abs(n-r.x),s=e.width/2;let o=r.x<t.x?s-a:s+a;const l=e.height/2,u=Math.abs(t.y-r.y),h=Math.abs(t.x-r.x);if(Math.abs(i-t.y)*s>Math.abs(n-t.x)*l){let f=r.y<t.y?t.y-l-i:i-l-t.y;o=h*f/u;const d={x:r.x<t.x?r.x+o:r.x-h+o,y:r.y<t.y?r.y+u-f:r.y-u+f};return o===0&&(d.x=t.x,d.y=t.y),h===0&&(d.x=t.x),u===0&&(d.y=t.y),et.debug(`abc89 top/bottom calc, Q ${u}, q ${f}, R ${h}, r ${o}`,d),d}else{r.x<t.x?o=t.x-s-n:o=n-s-t.x;let f=u*o/h,d=r.x<t.x?r.x+h-o:r.x-h+o,g=r.y<t.y?r.y+f:r.y-f;return et.debug(`sides calc abc89, Q ${u}, q ${f}, R ${h}, r ${o}`,{_x:d,_y:g}),o===0&&(d=t.x,g=t.y),h===0&&(d=t.x),u===0&&(g=t.y),{x:d,y:g}}},"intersection"),$3=x((e,t)=>{et.warn("abc88 cutPathAtIntersect",e,t);let r=[],n=e[0],i=!1;return e.forEach(a=>{if(et.info("abc88 checking point",a,t),!ont(t,a)&&!i){const s=lnt(t,n,a);et.debug("abc88 inside",a,n,s),et.debug("abc88 intersection",s,t);let o=!1;r.forEach(l=>{o=o||l.x===s.x&&l.y===s.y}),r.some(l=>l.x===s.x&&l.y===s.y)?et.warn("abc88 no intersect",s,r):r.push(s),i=!0}else et.warn("abc88 outside",a,n),n=a,i||r.push(a)}),et.debug("returning points",r),r},"cutPathAtIntersect");function I7(e){const t=[],r=[];for(let n=1;n<e.length-1;n++){const i=e[n-1],a=e[n],s=e[n+1];(i.x===a.x&&a.y===s.y&&Math.abs(a.x-s.x)>5&&Math.abs(a.y-i.y)>5||i.y===a.y&&a.x===s.x&&Math.abs(a.x-i.x)>5&&Math.abs(a.y-s.y)>5)&&(t.push(a),r.push(n))}return{cornerPoints:t,cornerPointPositions:r}}x(I7,"extractCornerPoints");var z3=x(function(e,t,r){const n=t.x-e.x,i=t.y-e.y,a=Math.sqrt(n*n+i*i),s=r/a;return{x:t.x-s*n,y:t.y-s*i}},"findAdjacentPoint"),cnt=x(function(e){const{cornerPointPositions:t}=I7(e),r=[];for(let n=0;n<e.length;n++)if(t.includes(n)){const i=e[n-1],a=e[n+1],s=e[n],o=z3(i,s,5),l=z3(a,s,5),u=l.x-o.x,h=l.y-o.y;r.push(o);const f=Math.sqrt(2)*2;let d={x:s.x,y:s.y};if(Math.abs(a.x-i.x)>10&&Math.abs(a.y-i.y)>=10){et.debug("Corner point fixing",Math.abs(a.x-i.x),Math.abs(a.y-i.y));const g=5;s.x===o.x?d={x:u<0?o.x-g+f:o.x+g-f,y:h<0?o.y-f:o.y+f}:d={x:u<0?o.x-f:o.x+f,y:h<0?o.y-g+f:o.y+g-f}}else et.debug("Corner point skipping fixing",Math.abs(a.x-i.x),Math.abs(a.y-i.y));r.push(d,l)}else r.push(e[n]);return r},"fixCorners"),N7=x(function(e,t,r,n,i,a,s){var A;const{handDrawnSeed:o}=pt();let l=t.points,u=!1;const h=i;var f=a;const d=[];for(const R in t.cssCompiledStyles)h8(R)||d.push(t.cssCompiledStyles[R]);f.intersect&&h.intersect&&(l=l.slice(1,t.points.length-1),l.unshift(h.intersect(l[0])),et.debug("Last point APA12",t.start,"-->",t.end,l[l.length-1],f,f.intersect(l[l.length-1])),l.push(f.intersect(l[l.length-1]))),t.toCluster&&(et.info("to cluster abc88",r.get(t.toCluster)),l=$3(t.points,r.get(t.toCluster).node),u=!0),t.fromCluster&&(et.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(l,null,2)),l=$3(l.reverse(),r.get(t.fromCluster).node).reverse(),u=!0);let g=l.filter(R=>!Number.isNaN(R.y));g=cnt(g);let p=uu;switch(p=ag,t.curve){case"linear":p=ag;break;case"basis":p=uu;break;case"cardinal":p=E6;break;case"bumpX":p=v6;break;case"bumpY":p=m6;break;case"catmullRom":p=C6;break;case"monotoneX":p=I6;break;case"monotoneY":p=N6;break;case"natural":p=M6;break;case"step":p=O6;break;case"stepAfter":p=B6;break;case"stepBefore":p=P6;break;default:p=uu}const{x:v,y:m}=PO(t),y=vh().x(v).y(m).curve(p);let b;switch(t.thickness){case"normal":b="edge-thickness-normal";break;case"thick":b="edge-thickness-thick";break;case"invisible":b="edge-thickness-invisible";break;default:b="edge-thickness-normal"}switch(t.pattern){case"solid":b+=" edge-pattern-solid";break;case"dotted":b+=" edge-pattern-dotted";break;case"dashed":b+=" edge-pattern-dashed";break;default:b+=" edge-pattern-solid"}let T,w=y(g);const k=Array.isArray(t.style)?t.style:[t.style];let S=k.find(R=>R==null?void 0:R.startsWith("stroke:"));if(t.look==="handDrawn"){const R=ve.svg(e);Object.assign([],g);const C=R.path(w,{roughness:.3,seed:o});b+=" transition",T=qt(C).select("path").attr("id",t.id).attr("class"," "+b+(t.classes?" "+t.classes:"")).attr("style",k?k.reduce((P,_)=>P+";"+_,""):"");let D=T.attr("d");T.attr("d",D),e.node().appendChild(T.node())}else{const R=d.join(";"),C=k?k.reduce((_,I)=>_+I+";",""):"";let D="";t.animate&&(D=" edge-animation-fast"),t.animation&&(D=" edge-animation-"+t.animation);const P=R?R+";"+C+";":C;T=e.append("path").attr("d",w).attr("id",t.id).attr("class"," "+b+(t.classes?" "+t.classes:"")+(D??"")).attr("style",P),S=(A=P.match(/stroke:([^;]+)/))==null?void 0:A[1]}let E="";(pt().flowchart.arrowMarkerAbsolute||pt().state.arrowMarkerAbsolute)&&(E=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,E=E.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),et.info("arrowTypeStart",t.arrowTypeStart),et.info("arrowTypeEnd",t.arrowTypeEnd),int(T,t,E,s,n,S);let L={};return u&&(L.updatedPath=l),L.originalPath=t.points,L},"insertEdge"),unt=x((e,t,r,n)=>{t.forEach(i=>{Snt[i](e,r,n)})},"insertMarkers"),hnt=x((e,t,r)=>{et.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),fnt=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),dnt=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),gnt=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),pnt=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),vnt=x((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),mnt=x((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),ynt=x((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),xnt=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),bnt=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),Tnt=x((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("d","M9,0 L9,18");const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),wnt=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),Ent=x((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),knt=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),Cnt=x((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");n.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),n.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),n.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),Snt={extension:hnt,composition:fnt,aggregation:dnt,dependency:gnt,lollipop:pnt,point:vnt,circle:mnt,cross:ynt,barb:xnt,only_one:bnt,zero_or_one:Tnt,one_or_more:wnt,zero_or_more:Ent,requirement_arrow:knt,requirement_contains:Cnt},D7=unt,_nt={common:Xt,getConfig:gr,insertCluster:IC,insertEdge:N7,insertEdgeLabel:L7,insertMarkers:D7,insertNode:xy,interpolateToCurve:hC,labelHelper:Ne,log:et,positionEdgeLabel:R7},Eg={},M7=x(e=>{for(const t of e)Eg[t.name]=t},"registerLayoutLoaders"),Ant=x(()=>{M7([{name:"dagre",loader:x(async()=>await je(()=>Promise.resolve().then(()=>Jht),void 0,import.meta.url),"loader")}])},"registerDefaultLayoutLoaders");Ant();var dp=x(async(e,t)=>{if(!(e.layoutAlgorithm in Eg))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=Eg[e.layoutAlgorithm];return(await r.loader()).render(e,t,_nt,{algorithm:r.algorithm})},"render"),by=x((e="",{fallback:t="dagre"}={})=>{if(e in Eg)return e;if(t in Eg)return et.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),xw={name:"mermaid",version:"11.6.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.0.4","@iconify/utils":"^2.1.33","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.13",dompurify:"^3.2.4",katex:"^0.16.9",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^15.0.7",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.2","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",chokidar:"^4.0.3",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.0.2",jison:"^0.4.18","js-base64":"^3.7.7",jsdom:"^26.0.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.2",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.10","type-fest":"^4.35.0",typedoc:"^0.27.8","typedoc-plugin-markdown":"^4.4.2",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.0.2","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},ho=x(e=>{var i;const{securityLevel:t}=pt();let r=qt("body");if(t==="sandbox"){const s=((i=qt(`#i${e}`).node())==null?void 0:i.contentDocument)??document;r=qt(s.body)}return r.select(`#${e}`)},"selectSvgElement"),O7="comm",P7="rule",B7="decl",Lnt="@import",Rnt="@namespace",Int="@keyframes",Nnt="@layer",F7=Math.abs,DC=String.fromCharCode;function $7(e){return e.trim()}function n1(e,t,r){return e.replace(t,r)}function Dnt(e,t,r){return e.indexOf(t,r)}function gu(e,t){return e.charCodeAt(t)|0}function Lh(e,t,r){return e.slice(t,r)}function Qa(e){return e.length}function Mnt(e){return e.length}function i0(e,t){return t.push(e),e}var Ty=1,Rh=1,z7=0,ba=0,Hr=0,rf="";function MC(e,t,r,n,i,a,s,o){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:Ty,column:Rh,length:s,return:"",siblings:o}}function Ont(){return Hr}function Pnt(){return Hr=ba>0?gu(rf,--ba):0,Rh--,Hr===10&&(Rh=1,Ty--),Hr}function Na(){return Hr=ba<z7?gu(rf,ba++):0,Rh++,Hr===10&&(Rh=1,Ty++),Hr}function wo(){return gu(rf,ba)}function i1(){return ba}function wy(e,t){return Lh(rf,e,t)}function kg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Bnt(e){return Ty=Rh=1,z7=Qa(rf=e),ba=0,[]}function Fnt(e){return rf="",e}function ex(e){return $7(wy(ba-1,bw(e===91?e+2:e===40?e+1:e)))}function $nt(e){for(;(Hr=wo())&&Hr<33;)Na();return kg(e)>2||kg(Hr)>3?"":" "}function znt(e,t){for(;--t&&Na()&&!(Hr<48||Hr>102||Hr>57&&Hr<65||Hr>70&&Hr<97););return wy(e,i1()+(t<6&&wo()==32&&Na()==32))}function bw(e){for(;Na();)switch(Hr){case e:return ba;case 34:case 39:e!==34&&e!==39&&bw(Hr);break;case 40:e===41&&bw(e);break;case 92:Na();break}return ba}function Vnt(e,t){for(;Na()&&e+Hr!==57;)if(e+Hr===84&&wo()===47)break;return"/*"+wy(t,ba-1)+"*"+DC(e===47?e:Na())}function Gnt(e){for(;!kg(wo());)Na();return wy(e,ba)}function Unt(e){return Fnt(a1("",null,null,null,[""],e=Bnt(e),0,[0],e))}function a1(e,t,r,n,i,a,s,o,l){for(var u=0,h=0,f=s,d=0,g=0,p=0,v=1,m=1,y=1,b=0,T="",w=i,k=a,S=n,E=T;m;)switch(p=b,b=Na()){case 40:if(p!=108&&gu(E,f-1)==58){Dnt(E+=n1(ex(b),"&","&\f"),"&\f",F7(u?o[u-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:E+=ex(b);break;case 9:case 10:case 13:case 32:E+=$nt(p);break;case 92:E+=znt(i1()-1,7);continue;case 47:switch(wo()){case 42:case 47:i0(Wnt(Vnt(Na(),i1()),t,r,l),l),(kg(p||1)==5||kg(wo()||1)==5)&&Qa(E)&&Lh(E,-1,void 0)!==" "&&(E+=" ");break;default:E+="/"}break;case 123*v:o[u++]=Qa(E)*y;case 125*v:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+h:y==-1&&(E=n1(E,/\f/g,"")),g>0&&(Qa(E)-f||v===0&&p===47)&&i0(g>32?G3(E+";",n,r,f-1,l):G3(n1(E," ","")+";",n,r,f-2,l),l);break;case 59:E+=";";default:if(i0(S=V3(E,t,r,u,h,i,o,T,w=[],k=[],f,a),a),b===123)if(h===0)a1(E,t,S,S,w,a,f,o,k);else{switch(d){case 99:if(gu(E,3)===110)break;case 108:if(gu(E,2)===97)break;default:h=0;case 100:case 109:case 115:}h?a1(e,S,S,n&&i0(V3(e,S,S,0,0,i,o,T,i,w=[],f,k),k),i,k,f,o,n?w:k):a1(E,S,S,S,[""],k,0,o,k)}}u=h=g=0,v=y=1,T=E="",f=s;break;case 58:f=1+Qa(E),g=p;default:if(v<1){if(b==123)--v;else if(b==125&&v++==0&&Pnt()==125)continue}switch(E+=DC(b),b*v){case 38:y=h>0?1:(E+="\f",-1);break;case 44:o[u++]=(Qa(E)-1)*y,y=1;break;case 64:wo()===45&&(E+=ex(Na())),d=wo(),h=f=Qa(T=E+=Gnt(i1())),b++;break;case 45:p===45&&Qa(E)==2&&(v=0)}}return a}function V3(e,t,r,n,i,a,s,o,l,u,h,f){for(var d=i-1,g=i===0?a:[""],p=Mnt(g),v=0,m=0,y=0;v<n;++v)for(var b=0,T=Lh(e,d+1,d=F7(m=s[v])),w=e;b<p;++b)(w=$7(m>0?g[b]+" "+T:n1(T,/&\f/g,g[b])))&&(l[y++]=w);return MC(e,t,r,i===0?P7:o,l,u,h,f)}function Wnt(e,t,r,n){return MC(e,t,r,O7,DC(Ont()),Lh(e,2,-2),0,n)}function G3(e,t,r,n,i){return MC(e,t,r,B7,Lh(e,0,n),Lh(e,n+1,-1),n,i)}function Tw(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function Ynt(e,t,r,n){switch(e.type){case Nnt:if(e.children.length)break;case Lnt:case Rnt:case B7:return e.return=e.return||e.value;case O7:return"";case Int:return e.return=e.value+"{"+Tw(e.children,n)+"}";case P7:if(!Qa(e.value=e.props.join(",")))return""}return Qa(r=Tw(e.children,n))?e.return=e.value+"{"+r+"}":""}var Hnt=gP(Object.keys,Object),qnt=Object.prototype,Xnt=qnt.hasOwnProperty;function V7(e){if(!sp(e))return Hnt(e);var t=[];for(var r in Object(e))Xnt.call(e,r)&&r!="constructor"&&t.push(r);return t}var ww=xc(ps,"DataView"),Ew=xc(ps,"Promise"),pu=xc(ps,"Set"),kw=xc(ps,"WeakMap"),U3="[object Map]",jnt="[object Object]",W3="[object Promise]",Y3="[object Set]",H3="[object WeakMap]",q3="[object DataView]",Knt=yc(ww),Znt=yc(Tg),Qnt=yc(Ew),Jnt=yc(pu),tit=yc(kw),ca=so;(ww&&ca(new ww(new ArrayBuffer(1)))!=q3||Tg&&ca(new Tg)!=U3||Ew&&ca(Ew.resolve())!=W3||pu&&ca(new pu)!=Y3||kw&&ca(new kw)!=H3)&&(ca=function(e){var t=so(e),r=t==jnt?e.constructor:void 0,n=r?yc(r):"";if(n)switch(n){case Knt:return q3;case Znt:return U3;case Qnt:return W3;case Jnt:return Y3;case tit:return H3}return t});var eit="[object Map]",rit="[object Set]",nit=Object.prototype,iit=nit.hasOwnProperty;function rr(e){if(e==null)return!0;if(vs(e)&&(We(e)||typeof e=="string"||typeof e.splice=="function"||Ah(e)||hy(e)||_h(e)))return!e.length;var t=ca(e);if(t==eit||t==rit)return!e.size;if(sp(e))return!V7(e).length;for(var r in e)if(iit.call(e,r))return!1;return!0}var G7="c4",ait=x(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),sit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>Zft);return{diagram:t}},void 0,import.meta.url);return{id:G7,diagram:e}},"loader"),oit={id:G7,detector:ait,loader:sit},lit=oit,U7="flowchart",cit=x((e,t)=>{var r,n;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},"detector"),uit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>sS);return{diagram:t}},void 0,import.meta.url);return{id:U7,diagram:e}},"loader"),hit={id:U7,detector:cit,loader:uit},fit=hit,W7="flowchart-v2",dit=x((e,t)=>{var r,n,i;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"?!1:(((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e))},"detector"),git=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>sS);return{diagram:t}},void 0,import.meta.url);return{id:W7,diagram:e}},"loader"),pit={id:W7,detector:dit,loader:git},vit=pit,Y7="er",mit=x(e=>/^\s*erDiagram/.test(e),"detector"),yit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>mdt);return{diagram:t}},void 0,import.meta.url);return{id:Y7,diagram:e}},"loader"),xit={id:Y7,detector:mit,loader:yit},bit=xit,H7="gitGraph",Tit=x(e=>/^\s*gitGraph/.test(e),"detector"),wit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>myt);return{diagram:t}},void 0,import.meta.url);return{id:H7,diagram:e}},"loader"),Eit={id:H7,detector:Tit,loader:wit},kit=Eit,q7="gantt",Cit=x(e=>/^\s*gantt/.test(e),"detector"),Sit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>b2t);return{diagram:t}},void 0,import.meta.url);return{id:q7,diagram:e}},"loader"),_it={id:q7,detector:Cit,loader:Sit},Ait=_it,X7="info",Lit=x(e=>/^\s*info/.test(e),"detector"),Rit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>A2t);return{diagram:t}},void 0,import.meta.url);return{id:X7,diagram:e}},"loader"),Iit={id:X7,detector:Lit,loader:Rit},j7="pie",Nit=x(e=>/^\s*pie/.test(e),"detector"),Dit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>Y2t);return{diagram:t}},void 0,import.meta.url);return{id:j7,diagram:e}},"loader"),Mit={id:j7,detector:Nit,loader:Dit},K7="quadrantChart",Oit=x(e=>/^\s*quadrantChart/.test(e),"detector"),Pit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>txt);return{diagram:t}},void 0,import.meta.url);return{id:K7,diagram:e}},"loader"),Bit={id:K7,detector:Oit,loader:Pit},Fit=Bit,Z7="xychart",$it=x(e=>/^\s*xychart-beta/.test(e),"detector"),zit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>pxt);return{diagram:t}},void 0,import.meta.url);return{id:Z7,diagram:e}},"loader"),Vit={id:Z7,detector:$it,loader:zit},Git=Vit,Q7="requirement",Uit=x(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),Wit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>wxt);return{diagram:t}},void 0,import.meta.url);return{id:Q7,diagram:e}},"loader"),Yit={id:Q7,detector:Uit,loader:Wit},Hit=Yit,J7="sequence",qit=x(e=>/^\s*sequenceDiagram/.test(e),"detector"),Xit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>abt);return{diagram:t}},void 0,import.meta.url);return{id:J7,diagram:e}},"loader"),jit={id:J7,detector:qit,loader:Xit},Kit=jit,tB="class",Zit=x((e,t)=>{var r;return((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},"detector"),Qit=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>hbt);return{diagram:t}},void 0,import.meta.url);return{id:tB,diagram:e}},"loader"),Jit={id:tB,detector:Zit,loader:Qit},tat=Jit,eB="classDiagram",eat=x((e,t)=>{var r;return/^\s*classDiagram/.test(e)&&((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},"detector"),rat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>dbt);return{diagram:t}},void 0,import.meta.url);return{id:eB,diagram:e}},"loader"),nat={id:eB,detector:eat,loader:rat},iat=nat,rB="state",aat=x((e,t)=>{var r;return((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},"detector"),sat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>lTt);return{diagram:t}},void 0,import.meta.url);return{id:rB,diagram:e}},"loader"),oat={id:rB,detector:aat,loader:sat},lat=oat,nB="stateDiagram",cat=x((e,t)=>{var r;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},"detector"),uat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>uTt);return{diagram:t}},void 0,import.meta.url);return{id:nB,diagram:e}},"loader"),hat={id:nB,detector:cat,loader:uat},fat=hat,iB="journey",dat=x(e=>/^\s*journey/.test(e),"detector"),gat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>NTt);return{diagram:t}},void 0,import.meta.url);return{id:iB,diagram:e}},"loader"),pat={id:iB,detector:dat,loader:gat},vat=pat,mat=x((e,t,r)=>{et.debug(`rendering svg for syntax error
`);const n=ho(t),i=n.append("g");n.attr("viewBox","0 0 2412 512"),Oi(n,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),aB={draw:mat},yat=aB,xat={db:{},renderer:aB,parser:{parse:x(()=>{},"parse")}},bat=xat,sB="flowchart-elk",Tat=x((e,t={})=>{var r;return/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"?(t.layout="elk",!0):!1},"detector"),wat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>sS);return{diagram:t}},void 0,import.meta.url);return{id:sB,diagram:e}},"loader"),Eat={id:sB,detector:Tat,loader:wat},kat=Eat,oB="timeline",Cat=x(e=>/^\s*timeline/.test(e),"detector"),Sat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>twt);return{diagram:t}},void 0,import.meta.url);return{id:oB,diagram:e}},"loader"),_at={id:oB,detector:Cat,loader:Sat},Aat=_at,lB="mindmap",Lat=x(e=>/^\s*mindmap/.test(e),"detector"),Rat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>u3t);return{diagram:t}},void 0,import.meta.url);return{id:lB,diagram:e}},"loader"),Iat={id:lB,detector:Lat,loader:Rat},Nat=Iat,cB="kanban",Dat=x(e=>/^\s*kanban/.test(e),"detector"),Mat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>R3t);return{diagram:t}},void 0,import.meta.url);return{id:cB,diagram:e}},"loader"),Oat={id:cB,detector:Dat,loader:Mat},Pat=Oat,uB="sankey",Bat=x(e=>/^\s*sankey-beta/.test(e),"detector"),Fat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>g4t);return{diagram:t}},void 0,import.meta.url);return{id:uB,diagram:e}},"loader"),$at={id:uB,detector:Bat,loader:Fat},zat=$at,hB="packet",Vat=x(e=>/^\s*packet-beta/.test(e),"detector"),Gat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>R4t);return{diagram:t}},void 0,import.meta.url);return{id:hB,diagram:e}},"loader"),Uat={id:hB,detector:Vat,loader:Gat},fB="radar",Wat=x(e=>/^\s*radar-beta/.test(e),"detector"),Yat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>Z4t);return{diagram:t}},void 0,import.meta.url);return{id:fB,diagram:e}},"loader"),Hat={id:fB,detector:Wat,loader:Yat},dB="block",qat=x(e=>/^\s*block-beta/.test(e),"detector"),Xat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>ELt);return{diagram:t}},void 0,import.meta.url);return{id:dB,diagram:e}},"loader"),jat={id:dB,detector:qat,loader:Xat},Kat=jat,gB="architecture",Zat=x(e=>/^\s*architecture/.test(e),"detector"),Qat=x(async()=>{const{diagram:e}=await je(async()=>{const{diagram:t}=await Promise.resolve().then(()=>uRt);return{diagram:t}},void 0,import.meta.url);return{id:gB,diagram:e}},"loader"),Jat={id:gB,detector:Zat,loader:Qat},tst=Jat,X3=!1,Ey=x(()=>{X3||(X3=!0,hv("error",bat,e=>e.toLowerCase().trim()==="error"),hv("---",{db:{clear:x(()=>{},"clear")},styles:{},renderer:{draw:x(()=>{},"draw")},parser:{parse:x(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:x(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),VD(lit,Pat,iat,tat,bit,Ait,Iit,Mit,Hit,Kit,kat,vit,fit,Nat,Aat,kit,fat,lat,vat,Fit,zat,Uat,Git,Kat,tst,Hat))},"addDiagrams"),est=x(async()=>{et.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(bh).map(async([r,{detector:n,loader:i}])=>{if(i)try{$T(r)}catch{try{const{diagram:a,id:s}=await i();hv(s,a,n)}catch(a){throw et.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete bh[r],a}}}))).filter(r=>r.status==="rejected");if(t.length>0){et.error(`Failed to load ${t.length} external diagrams`);for(const r of t)et.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),rst="graphics-document document";function pB(e,t){e.attr("role",rst),t!==""&&e.attr("aria-roledescription",t)}x(pB,"setA11yDiagramInfo");function vB(e,t,r,n){if(e.insert!==void 0){if(r){const i=`chart-desc-${n}`;e.attr("aria-describedby",i),e.insert("desc",":first-child").attr("id",i).text(r)}if(t){const i=`chart-title-${n}`;e.attr("aria-labelledby",i),e.insert("title",":first-child").attr("id",i).text(t)}}}x(vB,"addSVGa11yTitleDescription");var Gl,Cw=(Gl=class{constructor(t,r,n,i,a){this.type=t,this.text=r,this.db=n,this.parser=i,this.renderer=a}static async fromText(t,r={}){var u,h;const n=gr(),i=zk(t,n);t=Aet(t)+`
`;try{$T(i)}catch{const f=Uq(i);if(!f)throw new zD(`Diagram ${i} not found.`);const{id:d,diagram:g}=await f();hv(d,g)}const{db:a,parser:s,renderer:o,init:l}=$T(i);return s.parser&&(s.parser.yy=a),(u=a.clear)==null||u.call(a),l==null||l(n),r.title&&((h=a.setDiagramTitle)==null||h.call(a,r.title)),await s.parse(t),new Gl(i,t,a,s,o)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},x(Gl,"Diagram"),Gl),j3=[],nst=x(()=>{j3.forEach(e=>{e()}),j3=[]},"attachFunctions"),ist=x(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function mB(e){const t=e.match($D);if(!t)return{text:e,metadata:{}};let r=eC(t[1],{schema:tC})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const n={};return r.displayMode&&(n.displayMode=r.displayMode.toString()),r.title&&(n.title=r.title.toString()),r.config&&(n.config=r.config),{text:e.slice(t[0].length),metadata:n}}x(mB,"extractFrontMatter");var ast=x(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,n)=>"<"+r+n.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),sst=x(e=>{const{text:t,metadata:r}=mB(e),{displayMode:n,title:i,config:a={}}=r;return n&&(a.gantt||(a.gantt={}),a.gantt.displayMode=n),{title:i,config:a,text:t}},"processFrontmatter"),ost=x(e=>{const t=De.detectInit(e)??{},r=De.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:n})=>n==="wrap"):(r==null?void 0:r.type)==="wrap"&&(t.wrap=!0),{text:met(e),directive:t}},"processDirectives");function OC(e){const t=ast(e),r=sst(t),n=ost(r.text),i=xa(r.config,n.directive);return e=ist(n.text),{code:e,title:r.title,config:i}}x(OC,"preprocessDiagram");function yB(e){const t=new TextEncoder().encode(e),r=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(r)}x(yB,"toBase64");var lst=5e4,cst="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",ust="sandbox",hst="loose",fst="http://www.w3.org/2000/svg",dst="http://www.w3.org/1999/xlink",gst="http://www.w3.org/1999/xhtml",pst="100%",vst="100%",mst="border:0;margin:0;",yst="margin:0",xst="allow-top-navigation-by-user-activation allow-popups",bst='The "iframe" tag is not supported by your browser.',Tst=["foreignobject"],wst=["dominant-baseline"];function PC(e){const t=OC(e);return cv(),iX(t.config??{}),t}x(PC,"processAndSetConfigs");async function xB(e,t){Ey();try{const{code:r,config:n}=PC(e);return{diagramType:(await TB(r)).type,config:n}}catch(r){if(t!=null&&t.suppressErrors)return!1;throw r}}x(xB,"parse");var K3=x((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),Est=x((e,t=new Map)=>{var n;let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const o=e.htmlLabels??((n=e.flowchart)==null?void 0:n.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(l=>{rr(l.styles)||o.forEach(u=>{r+=K3(l.id,u,l.styles)}),rr(l.textStyles)||(r+=K3(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(u=>u.replace("color","fill"))))})}return r},"createCssStyles"),kst=x((e,t,r,n)=>{const i=Est(e,r),a=wX(t,i,e.themeVariables);return Tw(Unt(`${n}{${a}}`),Ynt)},"createUserStyles"),Cst=x((e="",t,r)=>{let n=e;return!r&&!t&&(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=cs(n),n=n.replace(/<br>/g,"<br/>"),n},"cleanUpSvgCode"),Sst=x((e="",t)=>{var i,a;const r=(a=(i=t==null?void 0:t.viewBox)==null?void 0:i.baseVal)!=null&&a.height?t.viewBox.baseVal.height+"px":vst,n=yB(`<body style="${yst}">${e}</body>`);return`<iframe style="width:${pst};height:${r};${mst}" src="data:text/html;charset=UTF-8;base64,${n}" sandbox="${xst}">
  ${bst}
</iframe>`},"putIntoIFrame"),Z3=x((e,t,r,n,i)=>{const a=e.append("div");a.attr("id",r),n&&a.attr("style",n);const s=a.append("svg").attr("id",t).attr("width","100%").attr("xmlns",fst);return i&&s.attr("xmlns:xlink",i),s.append("g"),e},"appendDivSvgG");function Sw(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}x(Sw,"sandboxedIframe");var _st=x((e,t,r,n)=>{var i,a,s;(i=e.getElementById(t))==null||i.remove(),(a=e.getElementById(r))==null||a.remove(),(s=e.getElementById(n))==null||s.remove()},"removeExistingElements"),Ast=x(async function(e,t,r){var D,P,_,I,M,O;Ey();const n=PC(t);t=n.code;const i=gr();et.debug(i),t.length>((i==null?void 0:i.maxTextSize)??lst)&&(t=cst);const a="#"+e,s="i"+e,o="#"+s,l="d"+e,u="#"+l,h=x(()=>{const B=qt(d?o:u).node();B&&"remove"in B&&B.remove()},"removeTempElements");let f=qt("body");const d=i.securityLevel===ust,g=i.securityLevel===hst,p=i.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),d){const N=Sw(qt(r),s);f=qt(N.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=qt(r);Z3(f,e,l,`font-family: ${p}`,dst)}else{if(_st(document,e,l,s),d){const N=Sw(qt("body"),s);f=qt(N.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=qt("body");Z3(f,e,l)}let v,m;try{v=await Cw.fromText(t,{title:n.title})}catch(N){if(i.suppressErrorRendering)throw h(),N;v=await Cw.fromText("error"),m=N}const y=f.select(u).node(),b=v.type,T=y.firstChild,w=T.firstChild,k=(P=(D=v.renderer).getClasses)==null?void 0:P.call(D,t,v),S=kst(i,b,k,a),E=document.createElement("style");E.innerHTML=S,T.insertBefore(E,w);try{await v.renderer.draw(t,e,xw.version,v)}catch(N){throw i.suppressErrorRendering?h():yat.draw(t,e,xw.version),N}const L=f.select(`${u} svg`),A=(I=(_=v.db).getAccTitle)==null?void 0:I.call(_),R=(O=(M=v.db).getAccDescription)==null?void 0:O.call(M);wB(b,L,A,R),f.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",gst);let C=f.select(u).node().innerHTML;if(et.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),C=Cst(C,d,dr(i.arrowMarkerAbsolute)),d){const N=f.select(u+" svg").node();C=Sst(C,N)}else g||(C=ql.sanitize(C,{ADD_TAGS:Tst,ADD_ATTR:wst,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(nst(),m)throw m;return h(),{diagramType:b,svg:C,bindFunctions:v.db.bindFunctions}},"render");function bB(e={}){var n;const t=an({},e);t!=null&&t.fontFamily&&!((n=t.themeVariables)!=null&&n.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),rX(t),t!=null&&t.theme&&t.theme in Hs?t.themeVariables=Hs[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Hs.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?eX(t):HD();$k(r.logLevel),Ey()}x(bB,"initialize");var TB=x((e,t={})=>{const{code:r}=OC(e);return Cw.fromText(r,t)},"getDiagramFromText");function wB(e,t,r,n){pB(t,e),vB(t,r,n,t.attr("id"))}x(wB,"addA11yInfo");var Jl=Object.freeze({render:Ast,parse:xB,getDiagramFromText:TB,initialize:bB,getConfig:gr,setConfig:qD,getSiteConfig:HD,updateSiteConfig:nX,reset:x(()=>{cv()},"reset"),globalReset:x(()=>{cv(Th)},"globalReset"),defaultConfig:Th});$k(gr().logLevel);cv(gr());var Lst=x((e,t,r)=>{et.warn(e),vC(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),EB=x(async function(e={querySelector:".mermaid"}){try{await Rst(e)}catch(t){if(vC(t)&&et.error(t.str),Hi.parseError&&Hi.parseError(t),!e.suppressErrors)throw et.error("Use the suppressErrors option to suppress these errors"),t}},"run"),Rst=x(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const n=Jl.getConfig();et.debug(`${e?"":"No "}Callback function found`);let i;if(r)i=r;else if(t)i=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");et.debug(`Found ${i.length} diagrams`),(n==null?void 0:n.startOnLoad)!==void 0&&(et.debug("Start On Load: "+(n==null?void 0:n.startOnLoad)),Jl.updateSiteConfig({startOnLoad:n==null?void 0:n.startOnLoad}));const a=new De.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let s;const o=[];for(const l of Array.from(i)){if(et.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const u=`mermaid-${a.next()}`;s=l.innerHTML,s=HP(De.entityDecode(s)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=De.detectInit(s);h&&et.debug("Detected early reinit: ",h);try{const{svg:f,bindFunctions:d}=await _B(u,s,l);l.innerHTML=f,e&&await e(u),d&&d(l)}catch(f){Lst(f,o,Hi.parseError)}}if(o.length>0)throw o[0]},"runThrowsErrors"),kB=x(function(e){Jl.initialize(e)},"initialize"),Ist=x(async function(e,t,r){et.warn("mermaid.init is deprecated. Please use run instead."),e&&kB(e);const n={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?n.querySelector=t:t&&(t instanceof HTMLElement?n.nodes=[t]:n.nodes=t),await EB(n)},"init"),Nst=x(async(e,{lazyLoad:t=!0}={})=>{Ey(),VD(...e),t===!1&&await est()},"registerExternalDiagrams"),CB=x(function(){if(Hi.startOnLoad){const{startOnLoad:e}=Jl.getConfig();e&&Hi.run().catch(t=>et.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",CB,!1);var Dst=x(function(e){Hi.parseError=e},"setParseErrorHandler"),Bv=[],rx=!1,SB=x(async()=>{if(!rx){for(rx=!0;Bv.length>0;){const e=Bv.shift();if(e)try{await e()}catch(t){et.error("Error executing queue",t)}}rx=!1}},"executeQueue"),Mst=x(async(e,t)=>new Promise((r,n)=>{const i=x(()=>new Promise((a,s)=>{Jl.parse(e,t).then(o=>{a(o),r(o)},o=>{var l;et.error("Error parsing",o),(l=Hi.parseError)==null||l.call(Hi,o),s(o),n(o)})}),"performCall");Bv.push(i),SB().catch(n)}),"parse"),_B=x((e,t,r)=>new Promise((n,i)=>{const a=x(()=>new Promise((s,o)=>{Jl.render(e,t,r).then(l=>{s(l),n(l)},l=>{var u;et.error("Error parsing",l),(u=Hi.parseError)==null||u.call(Hi,l),o(l),i(l)})}),"performCall");Bv.push(a),SB().catch(i)}),"render"),Hi={startOnLoad:!0,mermaidAPI:Jl,parse:Mst,render:_B,init:Ist,run:EB,registerExternalDiagrams:Nst,registerLayoutLoaders:M7,initialize:kB,parseError:void 0,contentLoaded:CB,setParseErrorHandler:Dst,detectType:zk,registerIconPacks:zO},FRt=Hi;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */var Ost="[object Symbol]";function tc(e){return typeof e=="symbol"||ya(e)&&so(e)==Ost}function Vl(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var Q3=va?va.prototype:void 0,J3=Q3?Q3.toString:void 0;function AB(e){if(typeof e=="string")return e;if(We(e))return Vl(e,AB)+"";if(tc(e))return J3?J3.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Pst=/\s/;function Bst(e){for(var t=e.length;t--&&Pst.test(e.charAt(t)););return t}var Fst=/^\s+/;function $st(e){return e&&e.slice(0,Bst(e)+1).replace(Fst,"")}var t4=NaN,zst=/^[-+]0x[0-9a-f]+$/i,Vst=/^0b[01]+$/i,Gst=/^0o[0-7]+$/i,Ust=parseInt;function Wst(e){if(typeof e=="number")return e;if(tc(e))return t4;if(Ri(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ri(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=$st(e);var r=Vst.test(e);return r||Gst.test(e)?Ust(e.slice(2),r?2:8):zst.test(e)?t4:+e}var e4=1/0,Yst=17976931348623157e292;function s1(e){if(!e)return e===0?e:0;if(e=Wst(e),e===e4||e===-e4){var t=e<0?-1:1;return t*Yst}return e===e?e:0}function ky(e){var t=s1(e),r=t%1;return t===t?r?t-r:t:0}function Zr(){}function LB(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function RB(e,t,r,n){for(var i=e.length,a=r+-1;++a<i;)if(t(e[a],a,e))return a;return-1}function Hst(e){return e!==e}function qst(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function BC(e,t,r){return t===t?qst(e,t,r):RB(e,Hst,r)}function IB(e,t){var r=e==null?0:e.length;return!!r&&BC(e,t,0)>-1}function nn(e){return vs(e)?bP(e):V7(e)}var Xst=Object.prototype,jst=Xst.hasOwnProperty,Ki=kP(function(e,t){if(sp(t)||vs(t)){Jh(t,nn(t),e);return}for(var r in t)jst.call(t,r)&&lp(e,r,t[r])}),Kst=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zst=/^\w*$/;function FC(e,t){if(We(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||tc(e)?!0:Zst.test(e)||!Kst.test(e)||t!=null&&e in Object(t)}var Qst=500;function Jst(e){var t=Qh(e,function(n){return r.size===Qst&&r.clear(),n}),r=t.cache;return t}var tot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eot=/\\(\\)?/g,rot=Jst(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(tot,function(r,n,i,a){t.push(i?a.replace(eot,"$1"):n||r)}),t});function NB(e){return e==null?"":AB(e)}function Cy(e,t){return We(e)?e:FC(e,t)?[e]:rot(NB(e))}function gp(e){if(typeof e=="string"||tc(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Sy(e,t){t=Cy(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[gp(t[r++])];return r&&r==n?e:void 0}function not(e,t,r){var n=e==null?void 0:Sy(e,t);return n===void 0?r:n}function $C(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var r4=va?va.isConcatSpreadable:void 0;function iot(e){return We(e)||_h(e)||!!(r4&&e&&e[r4])}function pp(e,t,r,n,i){var a=-1,s=e.length;for(r||(r=iot),i||(i=[]);++a<s;){var o=e[a];r(o)?$C(i,o):n||(i[i.length]=o)}return i}function yn(e){var t=e==null?0:e.length;return t?pp(e):[]}function aot(e){return EP(wP(e,void 0,yn),e+"")}function DB(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}function sot(e,t,r,n){var i=-1,a=e==null?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function oot(e,t){return e&&Jh(t,nn(t),e)}function lot(e,t){return e&&Jh(t,bc(t),e)}function zC(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}function MB(){return[]}var cot=Object.prototype,uot=cot.propertyIsEnumerable,n4=Object.getOwnPropertySymbols,VC=n4?function(e){return e==null?[]:(e=Object(e),zC(n4(e),function(t){return uot.call(e,t)}))}:MB;function hot(e,t){return Jh(e,VC(e),t)}var fot=Object.getOwnPropertySymbols,OB=fot?function(e){for(var t=[];e;)$C(t,VC(e)),e=cC(e);return t}:MB;function dot(e,t){return Jh(e,OB(e),t)}function PB(e,t,r){var n=t(e);return We(e)?n:$C(n,r(e))}function _w(e){return PB(e,nn,VC)}function BB(e){return PB(e,bc,OB)}var got=Object.prototype,pot=got.hasOwnProperty;function vot(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&pot.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function mot(e,t){var r=t?lC(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var yot=/\w*$/;function xot(e){var t=new e.constructor(e.source,yot.exec(e));return t.lastIndex=e.lastIndex,t}var i4=va?va.prototype:void 0,a4=i4?i4.valueOf:void 0;function bot(e){return a4?Object(a4.call(e)):{}}var Tot="[object Boolean]",wot="[object Date]",Eot="[object Map]",kot="[object Number]",Cot="[object RegExp]",Sot="[object Set]",_ot="[object String]",Aot="[object Symbol]",Lot="[object ArrayBuffer]",Rot="[object DataView]",Iot="[object Float32Array]",Not="[object Float64Array]",Dot="[object Int8Array]",Mot="[object Int16Array]",Oot="[object Int32Array]",Pot="[object Uint8Array]",Bot="[object Uint8ClampedArray]",Fot="[object Uint16Array]",$ot="[object Uint32Array]";function zot(e,t,r){var n=e.constructor;switch(t){case Lot:return lC(e);case Tot:case wot:return new n(+e);case Rot:return mot(e,r);case Iot:case Not:case Dot:case Mot:case Oot:case Pot:case Bot:case Fot:case $ot:return fP(e,r);case Eot:return new n;case kot:case _ot:return new n(e);case Cot:return xot(e);case Sot:return new n;case Aot:return bot(e)}}var Vot="[object Map]";function Got(e){return ya(e)&&ca(e)==Vot}var s4=Po&&Po.isMap,Uot=s4?op(s4):Got,Wot="[object Set]";function Yot(e){return ya(e)&&ca(e)==Wot}var o4=Po&&Po.isSet,Hot=o4?op(o4):Yot,qot=1,Xot=2,jot=4,FB="[object Arguments]",Kot="[object Array]",Zot="[object Boolean]",Qot="[object Date]",Jot="[object Error]",$B="[object Function]",tlt="[object GeneratorFunction]",elt="[object Map]",rlt="[object Number]",zB="[object Object]",nlt="[object RegExp]",ilt="[object Set]",alt="[object String]",slt="[object Symbol]",olt="[object WeakMap]",llt="[object ArrayBuffer]",clt="[object DataView]",ult="[object Float32Array]",hlt="[object Float64Array]",flt="[object Int8Array]",dlt="[object Int16Array]",glt="[object Int32Array]",plt="[object Uint8Array]",vlt="[object Uint8ClampedArray]",mlt="[object Uint16Array]",ylt="[object Uint32Array]",wr={};wr[FB]=wr[Kot]=wr[llt]=wr[clt]=wr[Zot]=wr[Qot]=wr[ult]=wr[hlt]=wr[flt]=wr[dlt]=wr[glt]=wr[elt]=wr[rlt]=wr[zB]=wr[nlt]=wr[ilt]=wr[alt]=wr[slt]=wr[plt]=wr[vlt]=wr[mlt]=wr[ylt]=!0;wr[Jot]=wr[$B]=wr[olt]=!1;function Qd(e,t,r,n,i,a){var s,o=t&qot,l=t&Xot,u=t&jot;if(s!==void 0)return s;if(!Ri(e))return e;var h=We(e);if(h){if(s=vot(e),!o)return dP(e,s)}else{var f=ca(e),d=f==$B||f==tlt;if(Ah(e))return hP(e,o);if(f==zB||f==FB||d&&!i){if(s=l||d?{}:pP(e),!o)return l?dot(e,lot(s,e)):hot(e,oot(s,e))}else{if(!wr[f])return i?e:{};s=zot(e,f,o)}}a||(a=new Ia);var g=a.get(e);if(g)return g;a.set(e,s),Hot(e)?e.forEach(function(m){s.add(Qd(m,t,r,m,e,a))}):Uot(e)&&e.forEach(function(m,y){s.set(y,Qd(m,t,r,y,e,a))});var p=u?l?BB:_w:l?bc:nn,v=h?void 0:p(e);return LB(v||e,function(m,y){v&&(y=m,m=e[y]),lp(s,y,Qd(m,t,r,y,e,a))}),s}var xlt=4;function un(e){return Qd(e,xlt)}var blt=1,Tlt=4;function wlt(e){return Qd(e,blt|Tlt)}function vp(e){for(var t=-1,r=e==null?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i}var Elt="__lodash_hash_undefined__";function klt(e){return this.__data__.set(e,Elt),this}function Clt(e){return this.__data__.has(e)}function Ih(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new lo;++t<r;)this.add(e[t])}Ih.prototype.add=Ih.prototype.push=klt;Ih.prototype.has=Clt;function VB(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function GC(e,t){return e.has(t)}var Slt=1,_lt=2;function GB(e,t,r,n,i,a){var s=r&Slt,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(e),h=a.get(t);if(u&&h)return u==t&&h==e;var f=-1,d=!0,g=r&_lt?new Ih:void 0;for(a.set(e,t),a.set(t,e);++f<o;){var p=e[f],v=t[f];if(n)var m=s?n(v,p,f,t,e,a):n(p,v,f,e,t,a);if(m!==void 0){if(m)continue;d=!1;break}if(g){if(!VB(t,function(y,b){if(!GC(g,b)&&(p===y||i(p,y,r,n,a)))return g.push(b)})){d=!1;break}}else if(!(p===v||i(p,v,r,n,a))){d=!1;break}}return a.delete(e),a.delete(t),d}function Alt(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function UC(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Llt=1,Rlt=2,Ilt="[object Boolean]",Nlt="[object Date]",Dlt="[object Error]",Mlt="[object Map]",Olt="[object Number]",Plt="[object RegExp]",Blt="[object Set]",Flt="[object String]",$lt="[object Symbol]",zlt="[object ArrayBuffer]",Vlt="[object DataView]",l4=va?va.prototype:void 0,nx=l4?l4.valueOf:void 0;function Glt(e,t,r,n,i,a,s){switch(r){case Vlt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case zlt:return!(e.byteLength!=t.byteLength||!a(new kv(e),new kv(t)));case Ilt:case Nlt:case Olt:return Zh(+e,+t);case Dlt:return e.name==t.name&&e.message==t.message;case Plt:case Flt:return e==t+"";case Mlt:var o=Alt;case Blt:var l=n&Llt;if(o||(o=UC),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;n|=Rlt,s.set(e,t);var h=GB(o(e),o(t),n,i,a,s);return s.delete(e),h;case $lt:if(nx)return nx.call(e)==nx.call(t)}return!1}var Ult=1,Wlt=Object.prototype,Ylt=Wlt.hasOwnProperty;function Hlt(e,t,r,n,i,a){var s=r&Ult,o=_w(e),l=o.length,u=_w(t),h=u.length;if(l!=h&&!s)return!1;for(var f=l;f--;){var d=o[f];if(!(s?d in t:Ylt.call(t,d)))return!1}var g=a.get(e),p=a.get(t);if(g&&p)return g==t&&p==e;var v=!0;a.set(e,t),a.set(t,e);for(var m=s;++f<l;){d=o[f];var y=e[d],b=t[d];if(n)var T=s?n(b,y,d,t,e,a):n(y,b,d,e,t,a);if(!(T===void 0?y===b||i(y,b,r,n,a):T)){v=!1;break}m||(m=d=="constructor")}if(v&&!m){var w=e.constructor,k=t.constructor;w!=k&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof k=="function"&&k instanceof k)&&(v=!1)}return a.delete(e),a.delete(t),v}var qlt=1,c4="[object Arguments]",u4="[object Array]",a0="[object Object]",Xlt=Object.prototype,h4=Xlt.hasOwnProperty;function jlt(e,t,r,n,i,a){var s=We(e),o=We(t),l=s?u4:ca(e),u=o?u4:ca(t);l=l==c4?a0:l,u=u==c4?a0:u;var h=l==a0,f=u==a0,d=l==u;if(d&&Ah(e)){if(!Ah(t))return!1;s=!0,h=!1}if(d&&!h)return a||(a=new Ia),s||hy(e)?GB(e,t,r,n,i,a):Glt(e,t,l,r,n,i,a);if(!(r&qlt)){var g=h&&h4.call(e,"__wrapped__"),p=f&&h4.call(t,"__wrapped__");if(g||p){var v=g?e.value():e,m=p?t.value():t;return a||(a=new Ia),i(v,m,r,n,a)}}return d?(a||(a=new Ia),Hlt(e,t,r,n,i,a)):!1}function WC(e,t,r,n,i){return e===t?!0:e==null||t==null||!ya(e)&&!ya(t)?e!==e&&t!==t:jlt(e,t,r,n,WC,i)}var Klt=1,Zlt=2;function Qlt(e,t,r,n){var i=r.length,a=i;if(e==null)return!a;for(e=Object(e);i--;){var s=r[i];if(s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=r[i];var o=s[0],l=e[o],u=s[1];if(s[2]){if(l===void 0&&!(o in e))return!1}else{var h=new Ia,f;if(!(f===void 0?WC(u,l,Klt|Zlt,n,h):f))return!1}}return!0}function UB(e){return e===e&&!Ri(e)}function Jlt(e){for(var t=nn(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,UB(i)]}return t}function WB(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function tct(e){var t=Jlt(e);return t.length==1&&t[0][2]?WB(t[0][0],t[0][1]):function(r){return r===e||Qlt(r,e,t)}}function ect(e,t){return e!=null&&t in Object(e)}function YB(e,t,r){t=Cy(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var s=gp(t[n]);if(!(a=e!=null&&r(e,s)))break;e=e[s]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&uC(i)&&fy(s,i)&&(We(e)||_h(e)))}function HB(e,t){return e!=null&&YB(e,t,ect)}var rct=1,nct=2;function ict(e,t){return FC(e)&&UB(t)?WB(gp(e),t):function(r){var n=not(r,e);return n===void 0&&n===t?HB(r,e):WC(t,n,rct|nct)}}function act(e){return function(t){return t==null?void 0:t[e]}}function sct(e){return function(t){return Sy(t,e)}}function oct(e){return FC(e)?act(gp(e)):sct(e)}function Bi(e){return typeof e=="function"?e:e==null?Js:typeof e=="object"?We(e)?ict(e[0],e[1]):tct(e):oct(e)}function lct(e,t,r,n){for(var i=-1,a=e==null?0:e.length;++i<a;){var s=e[i];t(n,s,r(s),e)}return n}function YC(e,t){return e&&oC(e,t,nn)}function cct(e,t){return function(r,n){if(r==null)return r;if(!vs(r))return e(r,n);for(var i=r.length,a=-1,s=Object(r);++a<i&&n(s[a],a,s)!==!1;);return r}}var wc=cct(YC);function uct(e,t,r,n){return wc(e,function(i,a,s){t(n,i,r(i),s)}),n}function hct(e,t){return function(r,n){var i=We(r)?lct:uct,a=t?t():{};return i(r,e,Bi(n),a)}}var qB=Object.prototype,fct=qB.hasOwnProperty,_y=cp(function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&wg(t[0],t[1],i)&&(n=1);++r<n;)for(var a=t[r],s=bc(a),o=-1,l=s.length;++o<l;){var u=s[o],h=e[u];(h===void 0||Zh(h,qB[u])&&!fct.call(e,u))&&(e[u]=a[u])}return e}),dct=200;function gct(e,t,r,n){var i=-1,a=IB,s=!0,o=e.length,l=[],u=t.length;if(!o)return l;t.length>=dct&&(a=GC,s=!1,t=new Ih(t));t:for(;++i<o;){var h=e[i],f=h;if(h=h!==0?h:0,s&&f===f){for(var d=u;d--;)if(t[d]===f)continue t;l.push(h)}else a(t,f,n)||l.push(h)}return l}var Ay=cp(function(e,t){return Cv(e)?gct(e,pp(t,1,Cv,!0)):[]});function us(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function Ln(e,t,r){var n=e==null?0:e.length;return n?(t=t===void 0?1:ky(t),DB(e,t<0?0:t,n)):[]}function Cg(e,t,r){var n=e==null?0:e.length;return n?(t=t===void 0?1:ky(t),t=n-t,DB(e,0,t<0?0:t)):[]}function HC(e){return typeof e=="function"?e:Js}function St(e,t){var r=We(e)?LB:wc;return r(e,HC(t))}function pct(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function vct(e,t){var r=!0;return wc(e,function(n,i,a){return r=!!t(n,i,a),r}),r}function Da(e,t,r){var n=We(e)?pct:vct;return n(e,Bi(t))}function XB(e,t){var r=[];return wc(e,function(n,i,a){t(n,i,a)&&r.push(n)}),r}function Fr(e,t){var r=We(e)?zC:XB;return r(e,Bi(t))}function mct(e){return function(t,r,n){var i=Object(t);if(!vs(t)){var a=Bi(r);t=nn(t),r=function(o){return a(i[o],o,i)}}var s=e(t,r,n);return s>-1?i[a?t[s]:s]:void 0}}var yct=Math.max;function xct(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:ky(r);return i<0&&(i=yct(n+i,0)),RB(e,Bi(t),i)}var to=mct(xct);function $a(e){return e&&e.length?e[0]:void 0}function jB(e,t){var r=-1,n=vs(e)?Array(e.length):[];return wc(e,function(i,a,s){n[++r]=t(i,a,s)}),n}function ee(e,t){var r=We(e)?Vl:jB;return r(e,Bi(t))}function qi(e,t){return pp(ee(e,t))}function bct(e,t){return e==null?e:oC(e,HC(t),bc)}function Tct(e,t){return e&&YC(e,HC(t))}var wct=Object.prototype,Ect=wct.hasOwnProperty,kct=hct(function(e,t,r){Ect.call(e,r)?e[r].push(t):ap(e,r,[t])});function Cct(e,t){return e>t}var Sct=Object.prototype,_ct=Sct.hasOwnProperty;function Act(e,t){return e!=null&&_ct.call(e,t)}function ke(e,t){return e!=null&&YB(e,t,Act)}var Lct="[object String]";function Ii(e){return typeof e=="string"||!We(e)&&ya(e)&&so(e)==Lct}function Rct(e,t){return Vl(t,function(r){return e[r]})}function yr(e){return e==null?[]:Rct(e,nn(e))}var Ict=Math.max;function mi(e,t,r,n){e=vs(e)?e:yr(e),r=r?ky(r):0;var i=e.length;return r<0&&(r=Ict(i+r,0)),Ii(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&BC(e,t,r)>-1}function f4(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=0;return BC(e,t,i)}var Nct="[object RegExp]";function Dct(e){return ya(e)&&so(e)==Nct}var d4=Po&&Po.isRegExp,eo=d4?op(d4):Dct;function sr(e){return e===void 0}function KB(e,t){return e<t}function Ly(e,t){var r={};return t=Bi(t),YC(e,function(n,i,a){ap(r,i,t(n,i,a))}),r}function qC(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],s=t(a);if(s!=null&&(o===void 0?s===s&&!tc(s):r(s,o)))var o=s,l=a}return l}function ec(e){return e&&e.length?qC(e,Js,Cct):void 0}function Nh(e){return e&&e.length?qC(e,Js,KB):void 0}function XC(e,t){return e&&e.length?qC(e,Bi(t),KB):void 0}var Mct="Expected a function";function Oct(e){if(typeof e!="function")throw new TypeError(Mct);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Pct(e,t,r,n){if(!Ri(e))return e;t=Cy(t,e);for(var i=-1,a=t.length,s=a-1,o=e;o!=null&&++i<a;){var l=gp(t[i]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=s){var h=o[l];u=void 0,u===void 0&&(u=Ri(h)?h:fy(t[i+1])?[]:{})}lp(o,l,u),o=o[l]}return e}function ZB(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var s=t[n],o=Sy(e,s);r(o,s)&&Pct(a,Cy(s,e),o)}return a}function Ua(e,t){if(e==null)return{};var r=Vl(BB(e),function(n){return[n]});return t=Bi(t),ZB(e,r,function(n,i){return t(n,i[0])})}function Bct(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}function Fct(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,a=tc(e),s=t!==void 0,o=t===null,l=t===t,u=tc(t);if(!o&&!u&&!a&&e>t||a&&s&&l&&!o&&!u||n&&s&&l||!r&&l||!i)return 1;if(!n&&!a&&!u&&e<t||u&&r&&i&&!n&&!a||o&&r&&i||!s&&i||!l)return-1}return 0}function $ct(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,s=i.length,o=r.length;++n<s;){var l=Fct(i[n],a[n]);if(l){if(n>=o)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}function zct(e,t,r){t.length?t=Vl(t,function(a){return We(a)?function(s){return Sy(s,a.length===1?a[0]:a)}:a}):t=[Js];var n=-1;t=Vl(t,op(Bi));var i=jB(e,function(a,s,o){var l=Vl(t,function(u){return u(a)});return{criteria:l,index:++n,value:a}});return Bct(i,function(a,s){return $ct(a,s,r)})}function Vct(e,t){return ZB(e,t,function(r,n){return HB(e,n)})}var Fv=aot(function(e,t){return e==null?{}:Vct(e,t)}),Gct=Math.ceil,Uct=Math.max;function Wct(e,t,r,n){for(var i=-1,a=Uct(Gct((t-e)/(r||1)),0),s=Array(a);a--;)s[++i]=e,e+=r;return s}function Yct(e){return function(t,r,n){return n&&typeof n!="number"&&wg(t,r,n)&&(r=n=void 0),t=s1(t),r===void 0?(r=t,t=0):r=s1(r),n=n===void 0?t<r?1:-1:s1(n),Wct(t,r,n)}}var Dh=Yct();function Hct(e,t,r,n,i){return i(e,function(a,s,o){r=n?(n=!1,a):t(r,a,s,o)}),r}function Xr(e,t,r){var n=We(e)?sot:Hct,i=arguments.length<3;return n(e,Bi(t),r,i,wc)}function Ry(e,t){var r=We(e)?zC:XB;return r(e,Oct(Bi(t)))}function qct(e,t){var r;return wc(e,function(n,i,a){return r=t(n,i,a),!r}),!!r}function QB(e,t,r){var n=We(e)?VB:qct;return n(e,Bi(t))}var mp=cp(function(e,t){if(e==null)return[];var r=t.length;return r>1&&wg(e,t[0],t[1])?t=[]:r>2&&wg(t[0],t[1],t[2])&&(t=[t[0]]),zct(e,pp(t),[])}),Xct=1/0,jct=pu&&1/UC(new pu([,-0]))[1]==Xct?function(e){return new pu(e)}:Zr,Kct=200;function jC(e,t,r){var n=-1,i=IB,a=e.length,s=!0,o=[],l=o;if(a>=Kct){var u=t?null:jct(e);if(u)return UC(u);s=!1,i=GC,l=new Ih}else l=t?[]:o;t:for(;++n<a;){var h=e[n],f=t?t(h):h;if(h=h!==0?h:0,s&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue t;t&&l.push(f),o.push(h)}else i(l,f,r)||(l!==o&&l.push(f),o.push(h))}return o}var Zct=cp(function(e){return jC(pp(e,1,Cv,!0))});function KC(e){return e&&e.length?jC(e):[]}function Qct(e,t){return e&&e.length?jC(e,Bi(t)):[]}var Jct=0;function ZC(e){var t=++Jct;return NB(e)+t}function tut(e,t,r){for(var n=-1,i=e.length,a=t.length,s={};++n<i;){var o=n<a?t[n]:void 0;r(s,e[n],o)}return s}function eut(e,t){return tut(e||[],t||[],lp)}var rut="\0",fl="\0",g4="";class Fi{constructor(t={}){this._isDirected=Object.prototype.hasOwnProperty.call(t,"directed")?t.directed:!0,this._isMultigraph=Object.prototype.hasOwnProperty.call(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.prototype.hasOwnProperty.call(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=iu(void 0),this._defaultEdgeLabelFn=iu(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[fl]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return ma(t)||(t=iu(t)),this._defaultNodeLabelFn=t,this}nodeCount(){return this._nodeCount}nodes(){return nn(this._nodes)}sources(){var t=this;return Fr(this.nodes(),function(r){return rr(t._in[r])})}sinks(){var t=this;return Fr(this.nodes(),function(r){return rr(t._out[r])})}setNodes(t,r){var n=arguments,i=this;return St(t,function(a){n.length>1?i.setNode(a,r):i.setNode(a)}),this}setNode(t,r){return Object.prototype.hasOwnProperty.call(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=r),this):(this._nodes[t]=arguments.length>1?r:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=fl,this._children[t]={},this._children[fl][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.prototype.hasOwnProperty.call(this._nodes,t)}removeNode(t){if(Object.prototype.hasOwnProperty.call(this._nodes,t)){var r=n=>this.removeEdge(this._edgeObjs[n]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],St(this.children(t),n=>{this.setParent(n)}),delete this._children[t]),St(nn(this._in[t]),r),delete this._in[t],delete this._preds[t],St(nn(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,r){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(sr(r))r=fl;else{r+="";for(var n=r;!sr(n);n=this.parent(n))if(n===t)throw new Error("Setting "+r+" as parent of "+t+" would create a cycle");this.setNode(r)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=r,this._children[r][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var r=this._parent[t];if(r!==fl)return r}}children(t){if(sr(t)&&(t=fl),this._isCompound){var r=this._children[t];if(r)return nn(r)}else{if(t===fl)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var r=this._preds[t];if(r)return nn(r)}successors(t){var r=this._sucs[t];if(r)return nn(r)}neighbors(t){var r=this.predecessors(t);if(r)return Zct(r,this.successors(t))}isLeaf(t){var r;return this.isDirected()?r=this.successors(t):r=this.neighbors(t),r.length===0}filterNodes(t){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var n=this;St(this._nodes,function(s,o){t(o)&&r.setNode(o,s)}),St(this._edgeObjs,function(s){r.hasNode(s.v)&&r.hasNode(s.w)&&r.setEdge(s,n.edge(s))});var i={};function a(s){var o=n.parent(s);return o===void 0||r.hasNode(o)?(i[s]=o,o):o in i?i[o]:a(o)}return this._isCompound&&St(r.nodes(),function(s){r.setParent(s,a(s))}),r}setDefaultEdgeLabel(t){return ma(t)||(t=iu(t)),this._defaultEdgeLabelFn=t,this}edgeCount(){return this._edgeCount}edges(){return yr(this._edgeObjs)}setPath(t,r){var n=this,i=arguments;return Xr(t,function(a,s){return i.length>1?n.setEdge(a,s,r):n.setEdge(a,s),s}),this}setEdge(){var t,r,n,i,a=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(t=s.v,r=s.w,n=s.name,arguments.length===2&&(i=arguments[1],a=!0)):(t=s,r=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),t=""+t,r=""+r,sr(n)||(n=""+n);var o=Jf(this._isDirected,t,r,n);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,o))return a&&(this._edgeLabels[o]=i),this;if(!sr(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(r),this._edgeLabels[o]=a?i:this._defaultEdgeLabelFn(t,r,n);var l=nut(this._isDirected,t,r,n);return t=l.v,r=l.w,Object.freeze(l),this._edgeObjs[o]=l,p4(this._preds[r],t),p4(this._sucs[t],r),this._in[r][o]=l,this._out[t][o]=l,this._edgeCount++,this}edge(t,r,n){var i=arguments.length===1?ix(this._isDirected,arguments[0]):Jf(this._isDirected,t,r,n);return this._edgeLabels[i]}hasEdge(t,r,n){var i=arguments.length===1?ix(this._isDirected,arguments[0]):Jf(this._isDirected,t,r,n);return Object.prototype.hasOwnProperty.call(this._edgeLabels,i)}removeEdge(t,r,n){var i=arguments.length===1?ix(this._isDirected,arguments[0]):Jf(this._isDirected,t,r,n),a=this._edgeObjs[i];return a&&(t=a.v,r=a.w,delete this._edgeLabels[i],delete this._edgeObjs[i],v4(this._preds[r],t),v4(this._sucs[t],r),delete this._in[r][i],delete this._out[t][i],this._edgeCount--),this}inEdges(t,r){var n=this._in[t];if(n){var i=yr(n);return r?Fr(i,function(a){return a.v===r}):i}}outEdges(t,r){var n=this._out[t];if(n){var i=yr(n);return r?Fr(i,function(a){return a.w===r}):i}}nodeEdges(t,r){var n=this.inEdges(t,r);if(n)return n.concat(this.outEdges(t,r))}}Fi.prototype._nodeCount=0;Fi.prototype._edgeCount=0;function p4(e,t){e[t]?e[t]++:e[t]=1}function v4(e,t){--e[t]||delete e[t]}function Jf(e,t,r,n){var i=""+t,a=""+r;if(!e&&i>a){var s=i;i=a,a=s}return i+g4+a+g4+(sr(n)?rut:n)}function nut(e,t,r,n){var i=""+t,a=""+r;if(!e&&i>a){var s=i;i=a,a=s}var o={v:i,w:a};return n&&(o.name=n),o}function ix(e,t){return Jf(e,t.v,t.w,t.name)}class iut{constructor(){var t={};t._next=t._prev=t,this._sentinel=t}dequeue(){var t=this._sentinel,r=t._prev;if(r!==t)return m4(r),r}enqueue(t){var r=this._sentinel;t._prev&&t._next&&m4(t),t._next=r._next,r._next._prev=t,r._next=t,t._prev=r}toString(){for(var t=[],r=this._sentinel,n=r._prev;n!==r;)t.push(JSON.stringify(n,aut)),n=n._prev;return"["+t.join(", ")+"]"}}function m4(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function aut(e,t){if(e!=="_next"&&e!=="_prev")return t}var sut=iu(1);function out(e,t){if(e.nodeCount()<=1)return[];var r=cut(e,t||sut),n=lut(r.graph,r.buckets,r.zeroIdx);return yn(ee(n,function(i){return e.outEdges(i.v,i.w)}))}function lut(e,t,r){for(var n=[],i=t[t.length-1],a=t[0],s;e.nodeCount();){for(;s=a.dequeue();)ax(e,t,r,s);for(;s=i.dequeue();)ax(e,t,r,s);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(s=t[o].dequeue(),s){n=n.concat(ax(e,t,r,s,!0));break}}}return n}function ax(e,t,r,n,i){var a=i?[]:void 0;return St(e.inEdges(n.v),function(s){var o=e.edge(s),l=e.node(s.v);i&&a.push({v:s.v,w:s.w}),l.out-=o,Aw(t,r,l)}),St(e.outEdges(n.v),function(s){var o=e.edge(s),l=s.w,u=e.node(l);u.in-=o,Aw(t,r,u)}),e.removeNode(n.v),a}function cut(e,t){var r=new Fi,n=0,i=0;St(e.nodes(),function(o){r.setNode(o,{v:o,in:0,out:0})}),St(e.edges(),function(o){var l=r.edge(o.v,o.w)||0,u=t(o),h=l+u;r.setEdge(o.v,o.w,h),i=Math.max(i,r.node(o.v).out+=u),n=Math.max(n,r.node(o.w).in+=u)});var a=Dh(i+n+3).map(function(){return new iut}),s=n+1;return St(r.nodes(),function(o){Aw(a,s,r.node(o))}),{graph:r,buckets:a,zeroIdx:s}}function Aw(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}function uut(e){var t=e.graph().acyclicer==="greedy"?out(e,r(e)):hut(e);St(t,function(n){var i=e.edge(n);e.removeEdge(n),i.forwardName=n.name,i.reversed=!0,e.setEdge(n.w,n.v,i,ZC("rev"))});function r(n){return function(i){return n.edge(i).weight}}}function hut(e){var t=[],r={},n={};function i(a){Object.prototype.hasOwnProperty.call(n,a)||(n[a]=!0,r[a]=!0,St(e.outEdges(a),function(s){Object.prototype.hasOwnProperty.call(r,s.w)?t.push(s):i(s.w)}),delete r[a])}return St(e.nodes(),i),t}function fut(e){St(e.edges(),function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})}function nf(e,t,r,n){var i;do i=ZC(n);while(e.hasNode(i));return r.dummy=t,e.setNode(i,r),i}function dut(e){var t=new Fi().setGraph(e.graph());return St(e.nodes(),function(r){t.setNode(r,e.node(r))}),St(e.edges(),function(r){var n=t.edge(r.v,r.w)||{weight:0,minlen:1},i=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),t}function JB(e){var t=new Fi({multigraph:e.isMultigraph()}).setGraph(e.graph());return St(e.nodes(),function(r){e.children(r).length||t.setNode(r,e.node(r))}),St(e.edges(),function(r){t.setEdge(r,e.edge(r))}),t}function y4(e,t){var r=e.x,n=e.y,i=t.x-r,a=t.y-n,s=e.width/2,o=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),l=o*i/a,u=o):(i<0&&(s=-s),l=s,u=s*a/i),{x:r+l,y:n+u}}function Iy(e){var t=ee(Dh(tF(e)+1),function(){return[]});return St(e.nodes(),function(r){var n=e.node(r),i=n.rank;sr(i)||(t[i][n.order]=r)}),t}function gut(e){var t=Nh(ee(e.nodes(),function(r){return e.node(r).rank}));St(e.nodes(),function(r){var n=e.node(r);ke(n,"rank")&&(n.rank-=t)})}function put(e){var t=Nh(ee(e.nodes(),function(a){return e.node(a).rank})),r=[];St(e.nodes(),function(a){var s=e.node(a).rank-t;r[s]||(r[s]=[]),r[s].push(a)});var n=0,i=e.graph().nodeRankFactor;St(r,function(a,s){sr(a)&&s%i!==0?--n:n&&St(a,function(o){e.node(o).rank+=n})})}function x4(e,t,r,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),nf(e,"border",i,t)}function tF(e){return ec(ee(e.nodes(),function(t){var r=e.node(t).rank;if(!sr(r))return r}))}function vut(e,t){var r={lhs:[],rhs:[]};return St(e,function(n){t(n)?r.lhs.push(n):r.rhs.push(n)}),r}function mut(e,t){return t()}function yut(e){function t(r){var n=e.children(r),i=e.node(r);if(n.length&&St(n,t),Object.prototype.hasOwnProperty.call(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)b4(e,"borderLeft","_bl",r,i,a),b4(e,"borderRight","_br",r,i,a)}}St(e.children(),t)}function b4(e,t,r,n,i,a){var s={width:0,height:0,rank:a,borderType:t},o=i[t][a-1],l=nf(e,"border",s,r);i[t][a]=l,e.setParent(l,n),o&&e.setEdge(o,l,{weight:1})}function xut(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&eF(e)}function but(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Tut(e),(t==="lr"||t==="rl")&&(wut(e),eF(e))}function eF(e){St(e.nodes(),function(t){T4(e.node(t))}),St(e.edges(),function(t){T4(e.edge(t))})}function T4(e){var t=e.width;e.width=e.height,e.height=t}function Tut(e){St(e.nodes(),function(t){sx(e.node(t))}),St(e.edges(),function(t){var r=e.edge(t);St(r.points,sx),Object.prototype.hasOwnProperty.call(r,"y")&&sx(r)})}function sx(e){e.y=-e.y}function wut(e){St(e.nodes(),function(t){ox(e.node(t))}),St(e.edges(),function(t){var r=e.edge(t);St(r.points,ox),Object.prototype.hasOwnProperty.call(r,"x")&&ox(r)})}function ox(e){var t=e.x;e.x=e.y,e.y=t}function Eut(e){e.graph().dummyChains=[],St(e.edges(),function(t){kut(e,t)})}function kut(e,t){var r=t.v,n=e.node(r).rank,i=t.w,a=e.node(i).rank,s=t.name,o=e.edge(t),l=o.labelRank;if(a!==n+1){e.removeEdge(t);var u=void 0,h,f;for(f=0,++n;n<a;++f,++n)o.points=[],u={width:0,height:0,edgeLabel:o,edgeObj:t,rank:n},h=nf(e,"edge",u,"_d"),n===l&&(u.width=o.width,u.height=o.height,u.dummy="edge-label",u.labelpos=o.labelpos),e.setEdge(r,h,{weight:o.weight},s),f===0&&e.graph().dummyChains.push(h),r=h;e.setEdge(r,i,{weight:o.weight},s)}}function Cut(e){St(e.graph().dummyChains,function(t){var r=e.node(t),n=r.edgeLabel,i;for(e.setEdge(r.edgeObj,n);r.dummy;)i=e.successors(t)[0],e.removeNode(t),n.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),t=i,r=e.node(t)})}function QC(e){var t={};function r(n){var i=e.node(n);if(Object.prototype.hasOwnProperty.call(t,n))return i.rank;t[n]=!0;var a=Nh(ee(e.outEdges(n),function(s){return r(s.w)-e.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}St(e.sources(),r)}function Sg(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}function rF(e){var t=new Fi({directed:!1}),r=e.nodes()[0],n=e.nodeCount();t.setNode(r,{});for(var i,a;Sut(t,e)<n;)i=_ut(t,e),a=t.hasNode(i.v)?Sg(e,i):-Sg(e,i),Aut(t,e,a);return t}function Sut(e,t){function r(n){St(t.nodeEdges(n),function(i){var a=i.v,s=n===a?i.w:a;!e.hasNode(s)&&!Sg(t,i)&&(e.setNode(s,{}),e.setEdge(n,s,{}),r(s))})}return St(e.nodes(),r),e.nodeCount()}function _ut(e,t){return XC(t.edges(),function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return Sg(t,r)})}function Aut(e,t,r){St(e.nodes(),function(n){t.node(n).rank+=r})}function Lut(){}Lut.prototype=new Error;function nF(e,t,r){We(t)||(t=[t]);var n=(e.isDirected()?e.successors:e.neighbors).bind(e),i=[],a={};return St(t,function(s){if(!e.hasNode(s))throw new Error("Graph does not have node: "+s);iF(e,s,r==="post",a,n,i)}),i}function iF(e,t,r,n,i,a){Object.prototype.hasOwnProperty.call(n,t)||(n[t]=!0,r||a.push(t),St(i(t),function(s){iF(e,s,r,n,i,a)}),r&&a.push(t))}function Rut(e,t){return nF(e,t,"post")}function Iut(e,t){return nF(e,t,"pre")}Ec.initLowLimValues=tS;Ec.initCutValues=JC;Ec.calcCutValue=aF;Ec.leaveEdge=oF;Ec.enterEdge=lF;Ec.exchangeEdges=cF;function Ec(e){e=dut(e),QC(e);var t=rF(e);tS(t),JC(t,e);for(var r,n;r=oF(t);)n=lF(t,e,r),cF(t,e,r,n)}function JC(e,t){var r=Rut(e,e.nodes());r=r.slice(0,r.length-1),St(r,function(n){Nut(e,t,n)})}function Nut(e,t,r){var n=e.node(r),i=n.parent;e.edge(r,i).cutvalue=aF(e,t,r)}function aF(e,t,r){var n=e.node(r),i=n.parent,a=!0,s=t.edge(r,i),o=0;return s||(a=!1,s=t.edge(i,r)),o=s.weight,St(t.nodeEdges(r),function(l){var u=l.v===r,h=u?l.w:l.v;if(h!==i){var f=u===a,d=t.edge(l).weight;if(o+=f?d:-d,Mut(e,r,h)){var g=e.edge(r,h).cutvalue;o+=f?-g:g}}}),o}function tS(e,t){arguments.length<2&&(t=e.nodes()[0]),sF(e,{},1,t)}function sF(e,t,r,n,i){var a=r,s=e.node(n);return t[n]=!0,St(e.neighbors(n),function(o){Object.prototype.hasOwnProperty.call(t,o)||(r=sF(e,t,r,o,n))}),s.low=a,s.lim=r++,i?s.parent=i:delete s.parent,r}function oF(e){return to(e.edges(),function(t){return e.edge(t).cutvalue<0})}function lF(e,t,r){var n=r.v,i=r.w;t.hasEdge(n,i)||(n=r.w,i=r.v);var a=e.node(n),s=e.node(i),o=a,l=!1;a.lim>s.lim&&(o=s,l=!0);var u=Fr(t.edges(),function(h){return l===w4(e,e.node(h.v),o)&&l!==w4(e,e.node(h.w),o)});return XC(u,function(h){return Sg(t,h)})}function cF(e,t,r,n){var i=r.v,a=r.w;e.removeEdge(i,a),e.setEdge(n.v,n.w,{}),tS(e),JC(e,t),Dut(e,t)}function Dut(e,t){var r=to(e.nodes(),function(i){return!t.node(i).parent}),n=Iut(e,r);n=n.slice(1),St(n,function(i){var a=e.node(i).parent,s=t.edge(i,a),o=!1;s||(s=t.edge(a,i),o=!0),t.node(i).rank=t.node(a).rank+(o?s.minlen:-s.minlen)})}function Mut(e,t,r){return e.hasEdge(t,r)}function w4(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}function Out(e){switch(e.graph().ranker){case"network-simplex":E4(e);break;case"tight-tree":But(e);break;case"longest-path":Put(e);break;default:E4(e)}}var Put=QC;function But(e){QC(e),rF(e)}function E4(e){Ec(e)}function Fut(e){var t=nf(e,"root",{},"_root"),r=$ut(e),n=ec(yr(r))-1,i=2*n+1;e.graph().nestingRoot=t,St(e.edges(),function(s){e.edge(s).minlen*=i});var a=zut(e)+1;St(e.children(),function(s){uF(e,t,i,a,n,r,s)}),e.graph().nodeRankFactor=i}function uF(e,t,r,n,i,a,s){var o=e.children(s);if(!o.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:r});return}var l=x4(e,"_bt"),u=x4(e,"_bb"),h=e.node(s);e.setParent(l,s),h.borderTop=l,e.setParent(u,s),h.borderBottom=u,St(o,function(f){uF(e,t,r,n,i,a,f);var d=e.node(f),g=d.borderTop?d.borderTop:f,p=d.borderBottom?d.borderBottom:f,v=d.borderTop?n:2*n,m=g!==p?1:i-a[s]+1;e.setEdge(l,g,{weight:v,minlen:m,nestingEdge:!0}),e.setEdge(p,u,{weight:v,minlen:m,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:i+a[s]})}function $ut(e){var t={};function r(n,i){var a=e.children(n);a&&a.length&&St(a,function(s){r(s,i+1)}),t[n]=i}return St(e.children(),function(n){r(n,1)}),t}function zut(e){return Xr(e.edges(),function(t,r){return t+e.edge(r).weight},0)}function Vut(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,St(e.edges(),function(r){var n=e.edge(r);n.nestingEdge&&e.removeEdge(r)})}function Gut(e,t,r){var n={},i;St(r,function(a){for(var s=e.parent(a),o,l;s;){if(o=e.parent(s),o?(l=n[o],n[o]=s):(l=i,i=s),l&&l!==s){t.setEdge(l,s);return}s=o}})}function Uut(e,t,r){var n=Wut(e),i=new Fi({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return e.node(a)});return St(e.nodes(),function(a){var s=e.node(a),o=e.parent(a);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||n),St(e[r](a),function(l){var u=l.v===a?l.w:l.v,h=i.edge(u,a),f=sr(h)?0:h.weight;i.setEdge(u,a,{weight:e.edge(l).weight+f})}),Object.prototype.hasOwnProperty.call(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),i}function Wut(e){for(var t;e.hasNode(t=ZC("_root")););return t}function Yut(e,t){for(var r=0,n=1;n<t.length;++n)r+=Hut(e,t[n-1],t[n]);return r}function Hut(e,t,r){for(var n=eut(r,ee(r,function(u,h){return h})),i=yn(ee(t,function(u){return mp(ee(e.outEdges(u),function(h){return{pos:n[h.w],weight:e.edge(h).weight}}),"pos")})),a=1;a<r.length;)a<<=1;var s=2*a-1;a-=1;var o=ee(new Array(s),function(){return 0}),l=0;return St(i.forEach(function(u){var h=u.pos+a;o[h]+=u.weight;for(var f=0;h>0;)h%2&&(f+=o[h+1]),h=h-1>>1,o[h]+=u.weight;l+=u.weight*f})),l}function qut(e){var t={},r=Fr(e.nodes(),function(o){return!e.children(o).length}),n=ec(ee(r,function(o){return e.node(o).rank})),i=ee(Dh(n+1),function(){return[]});function a(o){if(!ke(t,o)){t[o]=!0;var l=e.node(o);i[l.rank].push(o),St(e.successors(o),a)}}var s=mp(r,function(o){return e.node(o).rank});return St(s,a),i}function Xut(e,t){return ee(t,function(r){var n=e.inEdges(r);if(n.length){var i=Xr(n,function(a,s){var o=e.edge(s),l=e.node(s.v);return{sum:a.sum+o.weight*l.order,weight:a.weight+o.weight}},{sum:0,weight:0});return{v:r,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:r}})}function jut(e,t){var r={};St(e,function(i,a){var s=r[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};sr(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),St(t.edges(),function(i){var a=r[i.v],s=r[i.w];!sr(a)&&!sr(s)&&(s.indegree++,a.out.push(r[i.w]))});var n=Fr(r,function(i){return!i.indegree});return Kut(n)}function Kut(e){var t=[];function r(a){return function(s){s.merged||(sr(s.barycenter)||sr(a.barycenter)||s.barycenter>=a.barycenter)&&Zut(a,s)}}function n(a){return function(s){s.in.push(a),--s.indegree===0&&e.push(s)}}for(;e.length;){var i=e.pop();t.push(i),St(i.in.reverse(),r(i)),St(i.out,n(i))}return ee(Fr(t,function(a){return!a.merged}),function(a){return Fv(a,["vs","i","barycenter","weight"])})}function Zut(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}function Qut(e,t){var r=vut(e,function(h){return Object.prototype.hasOwnProperty.call(h,"barycenter")}),n=r.lhs,i=mp(r.rhs,function(h){return-h.i}),a=[],s=0,o=0,l=0;n.sort(Jut(!!t)),l=k4(a,i,l),St(n,function(h){l+=h.vs.length,a.push(h.vs),s+=h.barycenter*h.weight,o+=h.weight,l=k4(a,i,l)});var u={vs:yn(a)};return o&&(u.barycenter=s/o,u.weight=o),u}function k4(e,t,r){for(var n;t.length&&(n=us(t)).i<=r;)t.pop(),e.push(n.vs),r++;return r}function Jut(e){return function(t,r){return t.barycenter<r.barycenter?-1:t.barycenter>r.barycenter?1:e?r.i-t.i:t.i-r.i}}function hF(e,t,r,n){var i=e.children(t),a=e.node(t),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,l={};s&&(i=Fr(i,function(p){return p!==s&&p!==o}));var u=Xut(e,i);St(u,function(p){if(e.children(p.v).length){var v=hF(e,p.v,r,n);l[p.v]=v,Object.prototype.hasOwnProperty.call(v,"barycenter")&&eht(p,v)}});var h=jut(u,r);tht(h,l);var f=Qut(h,n);if(s&&(f.vs=yn([s,f.vs,o]),e.predecessors(s).length)){var d=e.node(e.predecessors(s)[0]),g=e.node(e.predecessors(o)[0]);Object.prototype.hasOwnProperty.call(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+d.order+g.order)/(f.weight+2),f.weight+=2}return f}function tht(e,t){St(e,function(r){r.vs=yn(r.vs.map(function(n){return t[n]?t[n].vs:n}))})}function eht(e,t){sr(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}function rht(e){var t=tF(e),r=C4(e,Dh(1,t+1),"inEdges"),n=C4(e,Dh(t-1,-1,-1),"outEdges"),i=qut(e);S4(e,i);for(var a=Number.POSITIVE_INFINITY,s,o=0,l=0;l<4;++o,++l){nht(o%2?r:n,o%4>=2),i=Iy(e);var u=Yut(e,i);u<a&&(l=0,s=wlt(i),a=u)}S4(e,s)}function C4(e,t,r){return ee(t,function(n){return Uut(e,n,r)})}function nht(e,t){var r=new Fi;St(e,function(n){var i=n.graph().root,a=hF(n,i,r,t);St(a.vs,function(s,o){n.node(s).order=o}),Gut(n,r,a.vs)})}function S4(e,t){St(t,function(r){St(r,function(n,i){e.node(n).order=i})})}function iht(e){var t=sht(e);St(e.graph().dummyChains,function(r){for(var n=e.node(r),i=n.edgeObj,a=aht(e,t,i.v,i.w),s=a.path,o=a.lca,l=0,u=s[l],h=!0;r!==i.w;){if(n=e.node(r),h){for(;(u=s[l])!==o&&e.node(u).maxRank<n.rank;)l++;u===o&&(h=!1)}if(!h){for(;l<s.length-1&&e.node(u=s[l+1]).minRank<=n.rank;)l++;u=s[l]}e.setParent(r,u),r=e.successors(r)[0]}})}function aht(e,t,r,n){var i=[],a=[],s=Math.min(t[r].low,t[n].low),o=Math.max(t[r].lim,t[n].lim),l,u;l=r;do l=e.parent(l),i.push(l);while(l&&(t[l].low>s||o>t[l].lim));for(u=l,l=n;(l=e.parent(l))!==u;)a.push(l);return{path:i.concat(a.reverse()),lca:u}}function sht(e){var t={},r=0;function n(i){var a=r;St(e.children(i),n),t[i]={low:a,lim:r++}}return St(e.children(),n),t}function oht(e,t){var r={};function n(i,a){var s=0,o=0,l=i.length,u=us(a);return St(a,function(h,f){var d=cht(e,h),g=d?e.node(d).order:l;(d||h===u)&&(St(a.slice(o,f+1),function(p){St(e.predecessors(p),function(v){var m=e.node(v),y=m.order;(y<s||g<y)&&!(m.dummy&&e.node(p).dummy)&&fF(r,v,p)})}),o=f+1,s=g)}),a}return Xr(t,n),r}function lht(e,t){var r={};function n(a,s,o,l,u){var h;St(Dh(s,o),function(f){h=a[f],e.node(h).dummy&&St(e.predecessors(h),function(d){var g=e.node(d);g.dummy&&(g.order<l||g.order>u)&&fF(r,d,h)})})}function i(a,s){var o=-1,l,u=0;return St(s,function(h,f){if(e.node(h).dummy==="border"){var d=e.predecessors(h);d.length&&(l=e.node(d[0]).order,n(s,u,f,o,l),u=f,o=l)}n(s,u,s.length,l,a.length)}),s}return Xr(t,i),r}function cht(e,t){if(e.node(t).dummy)return to(e.predecessors(t),function(r){return e.node(r).dummy})}function fF(e,t,r){if(t>r){var n=t;t=r,r=n}var i=e[t];i||(e[t]=i={}),i[r]=!0}function uht(e,t,r){if(t>r){var n=t;t=r,r=n}return!!e[t]&&Object.prototype.hasOwnProperty.call(e[t],r)}function hht(e,t,r,n){var i={},a={},s={};return St(t,function(o){St(o,function(l,u){i[l]=l,a[l]=l,s[l]=u})}),St(t,function(o){var l=-1;St(o,function(u){var h=n(u);if(h.length){h=mp(h,function(v){return s[v]});for(var f=(h.length-1)/2,d=Math.floor(f),g=Math.ceil(f);d<=g;++d){var p=h[d];a[u]===u&&l<s[p]&&!uht(r,u,p)&&(a[p]=u,a[u]=i[u]=i[p],l=s[p])}}})}),{root:i,align:a}}function fht(e,t,r,n,i){var a={},s=dht(e,t,r,i),o=i?"borderLeft":"borderRight";function l(f,d){for(var g=s.nodes(),p=g.pop(),v={};p;)v[p]?f(p):(v[p]=!0,g.push(p),g=g.concat(d(p))),p=g.pop()}function u(f){a[f]=s.inEdges(f).reduce(function(d,g){return Math.max(d,a[g.v]+s.edge(g))},0)}function h(f){var d=s.outEdges(f).reduce(function(p,v){return Math.min(p,a[v.w]-s.edge(v))},Number.POSITIVE_INFINITY),g=e.node(f);d!==Number.POSITIVE_INFINITY&&g.borderType!==o&&(a[f]=Math.max(a[f],d))}return l(u,s.predecessors.bind(s)),l(h,s.successors.bind(s)),St(n,function(f){a[f]=a[r[f]]}),a}function dht(e,t,r,n){var i=new Fi,a=e.graph(),s=yht(a.nodesep,a.edgesep,n);return St(t,function(o){var l;St(o,function(u){var h=r[u];if(i.setNode(h),l){var f=r[l],d=i.edge(f,h);i.setEdge(f,h,Math.max(s(e,u,l),d||0))}l=u})}),i}function ght(e,t){return XC(yr(t),function(r){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return bct(r,function(a,s){var o=xht(e,s)/2;n=Math.max(a+o,n),i=Math.min(a-o,i)}),n-i})}function pht(e,t){var r=yr(t),n=Nh(r),i=ec(r);St(["u","d"],function(a){St(["l","r"],function(s){var o=a+s,l=e[o],u;if(l!==t){var h=yr(l);u=s==="l"?n-Nh(h):i-ec(h),u&&(e[o]=Ly(l,function(f){return f+u}))}})})}function vht(e,t){return Ly(e.ul,function(r,n){if(t)return e[t.toLowerCase()][n];var i=mp(ee(e,n));return(i[1]+i[2])/2})}function mht(e){var t=Iy(e),r=Sv(oht(e,t),lht(e,t)),n={},i;St(["u","d"],function(s){i=s==="u"?t:yr(t).reverse(),St(["l","r"],function(o){o==="r"&&(i=ee(i,function(f){return yr(f).reverse()}));var l=(s==="u"?e.predecessors:e.successors).bind(e),u=hht(e,i,r,l),h=fht(e,i,u.root,u.align,o==="r");o==="r"&&(h=Ly(h,function(f){return-f})),n[s+o]=h})});var a=ght(e,n);return pht(n,a),vht(n,e.graph().align)}function yht(e,t,r){return function(n,i,a){var s=n.node(i),o=n.node(a),l=0,u;if(l+=s.width/2,Object.prototype.hasOwnProperty.call(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=r?u:-u),u=0,l+=(s.dummy?t:e)/2,l+=(o.dummy?t:e)/2,l+=o.width/2,Object.prototype.hasOwnProperty.call(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=r?u:-u),u=0,l}}function xht(e,t){return e.node(t).width}function bht(e){e=JB(e),Tht(e),Tct(mht(e),function(t,r){e.node(r).x=t})}function Tht(e){var t=Iy(e),r=e.graph().ranksep,n=0;St(t,function(i){var a=ec(ee(i,function(s){return e.node(s).height}));St(i,function(s){e.node(s).y=n+a/2}),n+=a+r})}function dF(e,t){var r=mut;r("layout",()=>{var n=r("  buildLayoutGraph",()=>Nht(e));r("  runLayout",()=>wht(n,r)),r("  updateInputGraph",()=>Eht(e,n))})}function wht(e,t){t("    makeSpaceForEdgeLabels",()=>Dht(e)),t("    removeSelfEdges",()=>Ght(e)),t("    acyclic",()=>uut(e)),t("    nestingGraph.run",()=>Fut(e)),t("    rank",()=>Out(JB(e))),t("    injectEdgeLabelProxies",()=>Mht(e)),t("    removeEmptyRanks",()=>put(e)),t("    nestingGraph.cleanup",()=>Vut(e)),t("    normalizeRanks",()=>gut(e)),t("    assignRankMinMax",()=>Oht(e)),t("    removeEdgeLabelProxies",()=>Pht(e)),t("    normalize.run",()=>Eut(e)),t("    parentDummyChains",()=>iht(e)),t("    addBorderSegments",()=>yut(e)),t("    order",()=>rht(e)),t("    insertSelfEdges",()=>Uht(e)),t("    adjustCoordinateSystem",()=>xut(e)),t("    position",()=>bht(e)),t("    positionSelfEdges",()=>Wht(e)),t("    removeBorderNodes",()=>Vht(e)),t("    normalize.undo",()=>Cut(e)),t("    fixupEdgeLabelCoords",()=>$ht(e)),t("    undoCoordinateSystem",()=>but(e)),t("    translateGraph",()=>Bht(e)),t("    assignNodeIntersects",()=>Fht(e)),t("    reversePoints",()=>zht(e)),t("    acyclic.undo",()=>fut(e))}function Eht(e,t){St(e.nodes(),function(r){var n=e.node(r),i=t.node(r);n&&(n.x=i.x,n.y=i.y,t.children(r).length&&(n.width=i.width,n.height=i.height))}),St(e.edges(),function(r){var n=e.edge(r),i=t.edge(r);n.points=i.points,Object.prototype.hasOwnProperty.call(i,"x")&&(n.x=i.x,n.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var kht=["nodesep","edgesep","ranksep","marginx","marginy"],Cht={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Sht=["acyclicer","ranker","rankdir","align"],_ht=["width","height"],Aht={width:0,height:0},Lht=["minlen","weight","width","height","labeloffset"],Rht={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Iht=["labelpos"];function Nht(e){var t=new Fi({multigraph:!0,compound:!0}),r=cx(e.graph());return t.setGraph(Sv({},Cht,lx(r,kht),Fv(r,Sht))),St(e.nodes(),function(n){var i=cx(e.node(n));t.setNode(n,_y(lx(i,_ht),Aht)),t.setParent(n,e.parent(n))}),St(e.edges(),function(n){var i=cx(e.edge(n));t.setEdge(n,Sv({},Rht,lx(i,Lht),Fv(i,Iht)))}),t}function Dht(e){var t=e.graph();t.ranksep/=2,St(e.edges(),function(r){var n=e.edge(r);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function Mht(e){St(e.edges(),function(t){var r=e.edge(t);if(r.width&&r.height){var n=e.node(t.v),i=e.node(t.w),a={rank:(i.rank-n.rank)/2+n.rank,e:t};nf(e,"edge-proxy",a,"_ep")}})}function Oht(e){var t=0;St(e.nodes(),function(r){var n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=ec(t,n.maxRank))}),e.graph().maxRank=t}function Pht(e){St(e.nodes(),function(t){var r=e.node(t);r.dummy==="edge-proxy"&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}function Bht(e){var t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,i=0,a=e.graph(),s=a.marginx||0,o=a.marginy||0;function l(u){var h=u.x,f=u.y,d=u.width,g=u.height;t=Math.min(t,h-d/2),r=Math.max(r,h+d/2),n=Math.min(n,f-g/2),i=Math.max(i,f+g/2)}St(e.nodes(),function(u){l(e.node(u))}),St(e.edges(),function(u){var h=e.edge(u);Object.prototype.hasOwnProperty.call(h,"x")&&l(h)}),t-=s,n-=o,St(e.nodes(),function(u){var h=e.node(u);h.x-=t,h.y-=n}),St(e.edges(),function(u){var h=e.edge(u);St(h.points,function(f){f.x-=t,f.y-=n}),Object.prototype.hasOwnProperty.call(h,"x")&&(h.x-=t),Object.prototype.hasOwnProperty.call(h,"y")&&(h.y-=n)}),a.width=r-t+s,a.height=i-n+o}function Fht(e){St(e.edges(),function(t){var r=e.edge(t),n=e.node(t.v),i=e.node(t.w),a,s;r.points?(a=r.points[0],s=r.points[r.points.length-1]):(r.points=[],a=i,s=n),r.points.unshift(y4(n,a)),r.points.push(y4(i,s))})}function $ht(e){St(e.edges(),function(t){var r=e.edge(t);if(Object.prototype.hasOwnProperty.call(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function zht(e){St(e.edges(),function(t){var r=e.edge(t);r.reversed&&r.points.reverse()})}function Vht(e){St(e.nodes(),function(t){if(e.children(t).length){var r=e.node(t),n=e.node(r.borderTop),i=e.node(r.borderBottom),a=e.node(us(r.borderLeft)),s=e.node(us(r.borderRight));r.width=Math.abs(s.x-a.x),r.height=Math.abs(i.y-n.y),r.x=a.x+r.width/2,r.y=n.y+r.height/2}}),St(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function Ght(e){St(e.edges(),function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Uht(e){var t=Iy(e);St(t,function(r){var n=0;St(r,function(i,a){var s=e.node(i);s.order=a+n,St(s.selfEdges,function(o){nf(e,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++n,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function Wht(e){St(e.nodes(),function(t){var r=e.node(t);if(r.dummy==="selfedge"){var n=e.node(r.e.v),i=n.x+n.width/2,a=n.y,s=r.x-i,o=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],r.label.x=r.x,r.label.y=r.y}})}function lx(e,t){return Ly(Fv(e,t),Number)}function cx(e){var t={};return St(e,function(r,n){t[n.toLowerCase()]=r}),t}function rs(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Yht(e),edges:Hht(e)};return sr(e.graph())||(t.value=un(e.graph())),t}function Yht(e){return ee(e.nodes(),function(t){var r=e.node(t),n=e.parent(t),i={v:t};return sr(r)||(i.value=r),sr(n)||(i.parent=n),i})}function Hht(e){return ee(e.edges(),function(t){var r=e.edge(t),n={v:t.v,w:t.w};return sr(t.name)||(n.name=t.name),sr(r)||(n.value=r),n})}var ze=new Map,Ol=new Map,gF=new Map,qht=x(()=>{Ol.clear(),gF.clear(),ze.clear()},"clear"),$v=x((e,t)=>{const r=Ol.get(t)||[];return et.trace("In isDescendant",t," ",e," = ",r.includes(e)),r.includes(e)},"isDescendant"),Xht=x((e,t)=>{const r=Ol.get(t)||[];return et.info("Descendants of ",t," is ",r),et.info("Edge is ",e),e.v===t||e.w===t?!1:r?r.includes(e.v)||$v(e.v,t)||$v(e.w,t)||r.includes(e.w):(et.debug("Tilt, ",t,",not in descendants"),!1)},"edgeInCluster"),pF=x((e,t,r,n)=>{et.warn("Copying children of ",e,"root",n,"data",t.node(e),n);const i=t.children(e)||[];e!==n&&i.push(e),et.warn("Copying (nodes) clusterId",e,"nodes",i),i.forEach(a=>{if(t.children(a).length>0)pF(a,t,r,n);else{const s=t.node(a);et.info("cp ",a," to ",n," with parent ",e),r.setNode(a,s),n!==t.parent(a)&&(et.warn("Setting parent",a,t.parent(a)),r.setParent(a,t.parent(a))),e!==n&&a!==e?(et.debug("Setting parent",a,e),r.setParent(a,e)):(et.info("In copy ",e,"root",n,"data",t.node(e),n),et.debug("Not Setting parent for node=",a,"cluster!==rootId",e!==n,"node!==clusterId",a!==e));const o=t.edges(a);et.debug("Copying Edges",o),o.forEach(l=>{et.info("Edge",l);const u=t.edge(l.v,l.w,l.name);et.info("Edge data",u,n);try{Xht(l,n)?(et.info("Copying as ",l.v,l.w,u,l.name),r.setEdge(l.v,l.w,u,l.name),et.info("newGraph edges ",r.edges(),r.edge(r.edges()[0]))):et.info("Skipping copy of edge ",l.v,"-->",l.w," rootId: ",n," clusterId:",e)}catch(h){et.error(h)}})}et.debug("Removing node",a),t.removeNode(a)})},"copy"),vF=x((e,t)=>{const r=t.children(e);let n=[...r];for(const i of r)gF.set(i,e),n=[...n,...vF(i,t)];return n},"extractDescendants"),jht=x((e,t,r)=>{const n=e.edges().filter(l=>l.v===t||l.w===t),i=e.edges().filter(l=>l.v===r||l.w===r),a=n.map(l=>({v:l.v===t?r:l.v,w:l.w===t?t:l.w})),s=i.map(l=>({v:l.v,w:l.w}));return a.filter(l=>s.some(u=>l.v===u.v&&l.w===u.w))},"findCommonEdges"),_g=x((e,t,r)=>{const n=t.children(e);if(et.trace("Searching children of id ",e,n),n.length<1)return e;let i;for(const a of n){const s=_g(a,t,r),o=jht(t,r,s);if(s)if(o.length>0)i=s;else return s}return i},"findNonClusterChild"),_4=x(e=>!ze.has(e)||!ze.get(e).externalConnections?e:ze.has(e)?ze.get(e).id:e,"getAnchorId"),Kht=x((e,t)=>{if(!e||t>10){et.debug("Opting out, no graph ");return}else et.debug("Opting in, graph ");e.nodes().forEach(function(r){e.children(r).length>0&&(et.warn("Cluster identified",r," Replacement id in edges: ",_g(r,e,r)),Ol.set(r,vF(r,e)),ze.set(r,{id:_g(r,e,r),clusterData:e.node(r)}))}),e.nodes().forEach(function(r){const n=e.children(r),i=e.edges();n.length>0?(et.debug("Cluster identified",r,Ol),i.forEach(a=>{const s=$v(a.v,r),o=$v(a.w,r);s^o&&(et.warn("Edge: ",a," leaves cluster ",r),et.warn("Descendants of XXX ",r,": ",Ol.get(r)),ze.get(r).externalConnections=!0)})):et.debug("Not a cluster ",r,Ol)});for(let r of ze.keys()){const n=ze.get(r).id,i=e.parent(n);i!==r&&ze.has(i)&&!ze.get(i).externalConnections&&(ze.get(r).id=i)}e.edges().forEach(function(r){const n=e.edge(r);et.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(r)),et.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(e.edge(r)));let i=r.v,a=r.w;if(et.warn("Fix XXX",ze,"ids:",r.v,r.w,"Translating: ",ze.get(r.v)," --- ",ze.get(r.w)),ze.get(r.v)||ze.get(r.w)){if(et.warn("Fixing and trying - removing XXX",r.v,r.w,r.name),i=_4(r.v),a=_4(r.w),e.removeEdge(r.v,r.w,r.name),i!==r.v){const s=e.parent(i);ze.get(s).externalConnections=!0,n.fromCluster=r.v}if(a!==r.w){const s=e.parent(a);ze.get(s).externalConnections=!0,n.toCluster=r.w}et.warn("Fix Replacing with XXX",i,a,r.name),e.setEdge(i,a,n,r.name)}}),et.warn("Adjusted Graph",rs(e)),mF(e,0),et.trace(ze)},"adjustClustersAndEdges"),mF=x((e,t)=>{var i,a;if(et.warn("extractor - ",t,rs(e),e.children("D")),t>10){et.error("Bailing out");return}let r=e.nodes(),n=!1;for(const s of r){const o=e.children(s);n=n||o.length>0}if(!n){et.debug("Done, no node has children",e.nodes());return}et.debug("Nodes = ",r,t);for(const s of r)if(et.debug("Extracting node",s,ze,ze.has(s)&&!ze.get(s).externalConnections,!e.parent(s),e.node(s),e.children("D")," Depth ",t),!ze.has(s))et.debug("Not a cluster",s,t);else if(!ze.get(s).externalConnections&&e.children(s)&&e.children(s).length>0){et.warn("Cluster without external connections, without a parent and with children",s,t);let l=e.graph().rankdir==="TB"?"LR":"TB";(a=(i=ze.get(s))==null?void 0:i.clusterData)!=null&&a.dir&&(l=ze.get(s).clusterData.dir,et.warn("Fixing dir",ze.get(s).clusterData.dir,l));const u=new Fi({multigraph:!0,compound:!0}).setGraph({rankdir:l,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});et.warn("Old graph before copy",rs(e)),pF(s,e,u,s),e.setNode(s,{clusterNode:!0,id:s,clusterData:ze.get(s).clusterData,label:ze.get(s).label,graph:u}),et.warn("New graph after copy node: (",s,")",rs(u)),et.debug("Old graph after copy",rs(e))}else et.warn("Cluster ** ",s," **not meeting the criteria !externalConnections:",!ze.get(s).externalConnections," no parent: ",!e.parent(s)," children ",e.children(s)&&e.children(s).length>0,e.children("D"),t),et.debug(ze);r=e.nodes(),et.warn("New list of nodes",r);for(const s of r){const o=e.node(s);et.warn(" Now next level",s,o),o!=null&&o.clusterNode&&mF(o.graph,t+1)}},"extractor"),yF=x((e,t)=>{if(t.length===0)return[];let r=Object.assign([],t);return t.forEach(n=>{const i=e.children(n),a=yF(e,i);r=[...r,...a]}),r},"sorter"),Zht=x(e=>yF(e,e.children()),"sortNodesByHierarchy"),xF=x(async(e,t,r,n,i,a)=>{et.warn("Graph in recursive render:XAX",rs(t),i);const s=t.graph().rankdir;et.trace("Dir in recursive render - dir:",s);const o=e.insert("g").attr("class","root");t.nodes()?et.info("Recursive render XXX",t.nodes()):et.info("No nodes found for",t),t.edges().length>0&&et.info("Recursive edges",t.edge(t.edges()[0]));const l=o.insert("g").attr("class","clusters"),u=o.insert("g").attr("class","edgePaths"),h=o.insert("g").attr("class","edgeLabels"),f=o.insert("g").attr("class","nodes");await Promise.all(t.nodes().map(async function(v){const m=t.node(v);if(i!==void 0){const y=JSON.parse(JSON.stringify(i.clusterData));et.trace(`Setting data for parent cluster XXX
 Node.id = `,v,`
 data=`,y.height,`
Parent cluster`,i.height),t.setNode(i.id,y),t.parent(v)||(et.trace("Setting parent",v,i.id),t.setParent(v,i.id,y))}if(et.info("(Insert) Node XXX"+v+": "+JSON.stringify(t.node(v))),m!=null&&m.clusterNode){et.info("Cluster identified XBX",v,m.width,t.node(v));const{ranksep:y,nodesep:b}=t.graph();m.graph.setGraph({...m.graph.graph(),ranksep:y+25,nodesep:b});const T=await xF(f,m.graph,r,n,t.node(v),a),w=T.elem;be(m,w),m.diff=T.diff||0,et.info("New compound node after recursive render XAX",v,"width",m.width,"height",m.height),rnt(w,m)}else t.children(v).length>0?(et.trace("Cluster - the non recursive path XBX",v,m.id,m,m.width,"Graph:",t),et.trace(_g(m.id,t)),ze.set(m.id,{id:_g(m.id,t),node:m})):(et.trace("Node - the non recursive path XAX",v,f,t.node(v),s),await xy(f,t.node(v),{config:a,dir:s}))})),await x(async()=>{const v=t.edges().map(async function(m){const y=t.edge(m.v,m.w,m.name);et.info("Edge "+m.v+" -> "+m.w+": "+JSON.stringify(m)),et.info("Edge "+m.v+" -> "+m.w+": ",m," ",JSON.stringify(t.edge(m))),et.info("Fix",ze,"ids:",m.v,m.w,"Translating: ",ze.get(m.v),ze.get(m.w)),await L7(h,y)});await Promise.all(v)},"processEdges")(),et.info("Graph before layout:",JSON.stringify(rs(t))),et.info("############################################# XXX"),et.info("###                Layout                 ### XXX"),et.info("############################################# XXX"),dF(t),et.info("Graph after layout:",JSON.stringify(rs(t)));let g=0,{subGraphTitleTotalMargin:p}=np(a);return await Promise.all(Zht(t).map(async function(v){var y;const m=t.node(v);if(et.info("Position XBX => "+v+": ("+m.x,","+m.y,") width: ",m.width," height: ",m.height),m!=null&&m.clusterNode)m.y+=p,et.info("A tainted cluster node XBX1",v,m.id,m.width,m.height,m.x,m.y,t.parent(v)),ze.get(m.id).node=m,yw(m);else if(t.children(v).length>0){et.info("A pure cluster node XBX1",v,m.id,m.x,m.y,m.width,m.height,t.parent(v)),m.height+=p,t.node(m.parentId);const b=(m==null?void 0:m.padding)/2||0,T=((y=m==null?void 0:m.labelBBox)==null?void 0:y.height)||0,w=T-b||0;et.debug("OffsetY",w,"labelHeight",T,"halfPadding",b),await IC(l,m),ze.get(m.id).node=m}else{const b=t.node(m.parentId);m.y+=p/2,et.info("A regular node XBX1 - using the padding",m.id,"parent",m.parentId,m.width,m.height,m.x,m.y,"offsetY",m.offsetY,"parent",b,b==null?void 0:b.offsetY,m),yw(m)}})),t.edges().forEach(function(v){const m=t.edge(v);et.info("Edge "+v.v+" -> "+v.w+": "+JSON.stringify(m),m),m.points.forEach(w=>w.y+=p/2);const y=t.node(v.v);var b=t.node(v.w);const T=N7(u,m,ze,r,y,b,n);R7(m,T)}),t.nodes().forEach(function(v){const m=t.node(v);et.info(v,m.type,m.diff),m.isGroup&&(g=m.diff)}),et.warn("Returning from recursive render XAX",o,g),{elem:o,diff:g}},"recursiveRender"),Qht=x(async(e,t)=>{var a,s,o,l,u,h;const r=new Fi({multigraph:!0,compound:!0}).setGraph({rankdir:e.direction,nodesep:((a=e.config)==null?void 0:a.nodeSpacing)||((o=(s=e.config)==null?void 0:s.flowchart)==null?void 0:o.nodeSpacing)||e.nodeSpacing,ranksep:((l=e.config)==null?void 0:l.rankSpacing)||((h=(u=e.config)==null?void 0:u.flowchart)==null?void 0:h.rankSpacing)||e.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),n=t.select("g");D7(n,e.markers,e.type,e.diagramId),nnt(),snt(),Brt(),qht(),e.nodes.forEach(f=>{r.setNode(f.id,{...f}),f.parentId&&r.setParent(f.id,f.parentId)}),et.debug("Edges:",e.edges),e.edges.forEach(f=>{if(f.start===f.end){const d=f.start,g=d+"---"+d+"---1",p=d+"---"+d+"---2",v=r.node(d);r.setNode(g,{domId:g,id:g,parentId:v.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),r.setParent(g,v.parentId),r.setNode(p,{domId:p,id:p,parentId:v.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),r.setParent(p,v.parentId);const m=structuredClone(f),y=structuredClone(f),b=structuredClone(f);m.label="",m.arrowTypeEnd="none",m.id=d+"-cyclic-special-1",y.arrowTypeStart="none",y.arrowTypeEnd="none",y.id=d+"-cyclic-special-mid",b.label="",v.isGroup&&(m.fromCluster=d,b.toCluster=d),b.id=d+"-cyclic-special-2",b.arrowTypeStart="none",r.setEdge(d,g,m,d+"-cyclic-special-0"),r.setEdge(g,p,y,d+"-cyclic-special-1"),r.setEdge(p,d,b,d+"-cyc<lic-special-2")}else r.setEdge(f.start,f.end,{...f},f.id)}),et.warn("Graph at first:",JSON.stringify(rs(r))),Kht(r),et.warn("Graph after XAX:",JSON.stringify(rs(r)));const i=pt();await xF(n,r,e.type,e.diagramId,void 0,i)},"render");const Jht=Object.freeze(Object.defineProperty({__proto__:null,render:Qht},Symbol.toStringTag,{value:"Module"}));var Ny=x((e,t)=>{const r=e.append("rect");if(r.attr("x",t.x),r.attr("y",t.y),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("width",t.width),r.attr("height",t.height),t.name&&r.attr("name",t.name),t.rx&&r.attr("rx",t.rx),t.ry&&r.attr("ry",t.ry),t.attrs!==void 0)for(const n in t.attrs)r.attr(n,t.attrs[n]);return t.class&&r.attr("class",t.class),r},"drawRect"),bF=x((e,t)=>{const r={x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,stroke:t.stroke,class:"rect"};Ny(e,r).lower()},"drawBackgroundRect"),tft=x((e,t)=>{const r=t.text.replace(jh," "),n=e.append("text");n.attr("x",t.x),n.attr("y",t.y),n.attr("class","legend"),n.style("text-anchor",t.anchor),t.class&&n.attr("class",t.class);const i=n.append("tspan");return i.attr("x",t.x+t.textMargin*2),i.text(r),n},"drawText"),eft=x((e,t,r,n)=>{const i=e.append("image");i.attr("x",t),i.attr("y",r);const a=mc.sanitizeUrl(n);i.attr("xlink:href",a)},"drawImage"),rft=x((e,t,r,n)=>{const i=e.append("use");i.attr("x",t),i.attr("y",r);const a=mc.sanitizeUrl(n);i.attr("xlink:href",`#${a}`)},"drawEmbeddedImage"),kc=x(()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),"getNoteRect"),eS=x(()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0}),"getTextObj"),zv=function(){var e=x(function(Rt,Tt,At,bt){for(At=At||{},bt=Rt.length;bt--;At[Rt[bt]]=Tt);return At},"o"),t=[1,24],r=[1,25],n=[1,26],i=[1,27],a=[1,28],s=[1,63],o=[1,64],l=[1,65],u=[1,66],h=[1,67],f=[1,68],d=[1,69],g=[1,29],p=[1,30],v=[1,31],m=[1,32],y=[1,33],b=[1,34],T=[1,35],w=[1,36],k=[1,37],S=[1,38],E=[1,39],L=[1,40],A=[1,41],R=[1,42],C=[1,43],D=[1,44],P=[1,45],_=[1,46],I=[1,47],M=[1,48],O=[1,50],N=[1,51],B=[1,52],z=[1,53],F=[1,54],V=[1,55],G=[1,56],Y=[1,57],Q=[1,58],K=[1,59],it=[1,60],ut=[14,42],q=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],W=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],H=[1,82],U=[1,83],X=[1,84],J=[1,85],j=[12,14,42],gt=[12,14,33,42],at=[12,14,33,42,76,77,79,80],tt=[12,33],kt=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],ft={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:x(function(Tt,At,bt,wt,Nt,ht,_t){var Z=ht.length-1;switch(Nt){case 3:wt.setDirection("TB");break;case 4:wt.setDirection("BT");break;case 5:wt.setDirection("RL");break;case 6:wt.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:wt.setC4Type(ht[Z-3]);break;case 19:wt.setTitle(ht[Z].substring(6)),this.$=ht[Z].substring(6);break;case 20:wt.setAccDescription(ht[Z].substring(15)),this.$=ht[Z].substring(15);break;case 21:this.$=ht[Z].trim(),wt.setTitle(this.$);break;case 22:case 23:this.$=ht[Z].trim(),wt.setAccDescription(this.$);break;case 28:ht[Z].splice(2,0,"ENTERPRISE"),wt.addPersonOrSystemBoundary(...ht[Z]),this.$=ht[Z];break;case 29:ht[Z].splice(2,0,"SYSTEM"),wt.addPersonOrSystemBoundary(...ht[Z]),this.$=ht[Z];break;case 30:wt.addPersonOrSystemBoundary(...ht[Z]),this.$=ht[Z];break;case 31:ht[Z].splice(2,0,"CONTAINER"),wt.addContainerBoundary(...ht[Z]),this.$=ht[Z];break;case 32:wt.addDeploymentNode("node",...ht[Z]),this.$=ht[Z];break;case 33:wt.addDeploymentNode("nodeL",...ht[Z]),this.$=ht[Z];break;case 34:wt.addDeploymentNode("nodeR",...ht[Z]),this.$=ht[Z];break;case 35:wt.popBoundaryParseStack();break;case 39:wt.addPersonOrSystem("person",...ht[Z]),this.$=ht[Z];break;case 40:wt.addPersonOrSystem("external_person",...ht[Z]),this.$=ht[Z];break;case 41:wt.addPersonOrSystem("system",...ht[Z]),this.$=ht[Z];break;case 42:wt.addPersonOrSystem("system_db",...ht[Z]),this.$=ht[Z];break;case 43:wt.addPersonOrSystem("system_queue",...ht[Z]),this.$=ht[Z];break;case 44:wt.addPersonOrSystem("external_system",...ht[Z]),this.$=ht[Z];break;case 45:wt.addPersonOrSystem("external_system_db",...ht[Z]),this.$=ht[Z];break;case 46:wt.addPersonOrSystem("external_system_queue",...ht[Z]),this.$=ht[Z];break;case 47:wt.addContainer("container",...ht[Z]),this.$=ht[Z];break;case 48:wt.addContainer("container_db",...ht[Z]),this.$=ht[Z];break;case 49:wt.addContainer("container_queue",...ht[Z]),this.$=ht[Z];break;case 50:wt.addContainer("external_container",...ht[Z]),this.$=ht[Z];break;case 51:wt.addContainer("external_container_db",...ht[Z]),this.$=ht[Z];break;case 52:wt.addContainer("external_container_queue",...ht[Z]),this.$=ht[Z];break;case 53:wt.addComponent("component",...ht[Z]),this.$=ht[Z];break;case 54:wt.addComponent("component_db",...ht[Z]),this.$=ht[Z];break;case 55:wt.addComponent("component_queue",...ht[Z]),this.$=ht[Z];break;case 56:wt.addComponent("external_component",...ht[Z]),this.$=ht[Z];break;case 57:wt.addComponent("external_component_db",...ht[Z]),this.$=ht[Z];break;case 58:wt.addComponent("external_component_queue",...ht[Z]),this.$=ht[Z];break;case 60:wt.addRel("rel",...ht[Z]),this.$=ht[Z];break;case 61:wt.addRel("birel",...ht[Z]),this.$=ht[Z];break;case 62:wt.addRel("rel_u",...ht[Z]),this.$=ht[Z];break;case 63:wt.addRel("rel_d",...ht[Z]),this.$=ht[Z];break;case 64:wt.addRel("rel_l",...ht[Z]),this.$=ht[Z];break;case 65:wt.addRel("rel_r",...ht[Z]),this.$=ht[Z];break;case 66:wt.addRel("rel_b",...ht[Z]),this.$=ht[Z];break;case 67:ht[Z].splice(0,1),wt.addRel("rel",...ht[Z]),this.$=ht[Z];break;case 68:wt.updateElStyle("update_el_style",...ht[Z]),this.$=ht[Z];break;case 69:wt.updateRelStyle("update_rel_style",...ht[Z]),this.$=ht[Z];break;case 70:wt.updateLayoutConfig("update_layout_config",...ht[Z]),this.$=ht[Z];break;case 71:this.$=[ht[Z]];break;case 72:ht[Z].unshift(ht[Z-1]),this.$=ht[Z];break;case 73:case 75:this.$=ht[Z].trim();break;case 74:let st={};st[ht[Z-1].trim()]=ht[Z].trim(),this.$=st;break;case 76:this.$="";break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:t,23:r,24:n,26:i,28:a,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:f,41:d,43:23,44:g,45:p,46:v,47:m,48:y,49:b,50:T,51:w,52:k,53:S,54:E,55:L,56:A,57:R,58:C,59:D,60:P,61:_,62:I,63:M,64:O,65:N,66:B,67:z,68:F,69:V,70:G,71:Y,72:Q,73:K,74:it},{13:70,19:20,20:21,21:22,22:t,23:r,24:n,26:i,28:a,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:f,41:d,43:23,44:g,45:p,46:v,47:m,48:y,49:b,50:T,51:w,52:k,53:S,54:E,55:L,56:A,57:R,58:C,59:D,60:P,61:_,62:I,63:M,64:O,65:N,66:B,67:z,68:F,69:V,70:G,71:Y,72:Q,73:K,74:it},{13:71,19:20,20:21,21:22,22:t,23:r,24:n,26:i,28:a,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:f,41:d,43:23,44:g,45:p,46:v,47:m,48:y,49:b,50:T,51:w,52:k,53:S,54:E,55:L,56:A,57:R,58:C,59:D,60:P,61:_,62:I,63:M,64:O,65:N,66:B,67:z,68:F,69:V,70:G,71:Y,72:Q,73:K,74:it},{13:72,19:20,20:21,21:22,22:t,23:r,24:n,26:i,28:a,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:f,41:d,43:23,44:g,45:p,46:v,47:m,48:y,49:b,50:T,51:w,52:k,53:S,54:E,55:L,56:A,57:R,58:C,59:D,60:P,61:_,62:I,63:M,64:O,65:N,66:B,67:z,68:F,69:V,70:G,71:Y,72:Q,73:K,74:it},{13:73,19:20,20:21,21:22,22:t,23:r,24:n,26:i,28:a,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:f,41:d,43:23,44:g,45:p,46:v,47:m,48:y,49:b,50:T,51:w,52:k,53:S,54:E,55:L,56:A,57:R,58:C,59:D,60:P,61:_,62:I,63:M,64:O,65:N,66:B,67:z,68:F,69:V,70:G,71:Y,72:Q,73:K,74:it},{14:[1,74]},e(ut,[2,13],{43:23,29:49,30:61,32:62,20:75,34:s,36:o,37:l,38:u,39:h,40:f,41:d,44:g,45:p,46:v,47:m,48:y,49:b,50:T,51:w,52:k,53:S,54:E,55:L,56:A,57:R,58:C,59:D,60:P,61:_,62:I,63:M,64:O,65:N,66:B,67:z,68:F,69:V,70:G,71:Y,72:Q,73:K,74:it}),e(ut,[2,14]),e(q,[2,16],{12:[1,76]}),e(ut,[2,36],{12:[1,77]}),e(W,[2,19]),e(W,[2,20]),{25:[1,78]},{27:[1,79]},e(W,[2,23]),{35:80,75:81,76:H,77:U,79:X,80:J},{35:86,75:81,76:H,77:U,79:X,80:J},{35:87,75:81,76:H,77:U,79:X,80:J},{35:88,75:81,76:H,77:U,79:X,80:J},{35:89,75:81,76:H,77:U,79:X,80:J},{35:90,75:81,76:H,77:U,79:X,80:J},{35:91,75:81,76:H,77:U,79:X,80:J},{35:92,75:81,76:H,77:U,79:X,80:J},{35:93,75:81,76:H,77:U,79:X,80:J},{35:94,75:81,76:H,77:U,79:X,80:J},{35:95,75:81,76:H,77:U,79:X,80:J},{35:96,75:81,76:H,77:U,79:X,80:J},{35:97,75:81,76:H,77:U,79:X,80:J},{35:98,75:81,76:H,77:U,79:X,80:J},{35:99,75:81,76:H,77:U,79:X,80:J},{35:100,75:81,76:H,77:U,79:X,80:J},{35:101,75:81,76:H,77:U,79:X,80:J},{35:102,75:81,76:H,77:U,79:X,80:J},{35:103,75:81,76:H,77:U,79:X,80:J},{35:104,75:81,76:H,77:U,79:X,80:J},e(j,[2,59]),{35:105,75:81,76:H,77:U,79:X,80:J},{35:106,75:81,76:H,77:U,79:X,80:J},{35:107,75:81,76:H,77:U,79:X,80:J},{35:108,75:81,76:H,77:U,79:X,80:J},{35:109,75:81,76:H,77:U,79:X,80:J},{35:110,75:81,76:H,77:U,79:X,80:J},{35:111,75:81,76:H,77:U,79:X,80:J},{35:112,75:81,76:H,77:U,79:X,80:J},{35:113,75:81,76:H,77:U,79:X,80:J},{35:114,75:81,76:H,77:U,79:X,80:J},{35:115,75:81,76:H,77:U,79:X,80:J},{20:116,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:f,41:d,43:23,44:g,45:p,46:v,47:m,48:y,49:b,50:T,51:w,52:k,53:S,54:E,55:L,56:A,57:R,58:C,59:D,60:P,61:_,62:I,63:M,64:O,65:N,66:B,67:z,68:F,69:V,70:G,71:Y,72:Q,73:K,74:it},{12:[1,118],33:[1,117]},{35:119,75:81,76:H,77:U,79:X,80:J},{35:120,75:81,76:H,77:U,79:X,80:J},{35:121,75:81,76:H,77:U,79:X,80:J},{35:122,75:81,76:H,77:U,79:X,80:J},{35:123,75:81,76:H,77:U,79:X,80:J},{35:124,75:81,76:H,77:U,79:X,80:J},{35:125,75:81,76:H,77:U,79:X,80:J},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},e(ut,[2,15]),e(q,[2,17],{21:22,19:130,22:t,23:r,24:n,26:i,28:a}),e(ut,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:t,23:r,24:n,26:i,28:a,34:s,36:o,37:l,38:u,39:h,40:f,41:d,44:g,45:p,46:v,47:m,48:y,49:b,50:T,51:w,52:k,53:S,54:E,55:L,56:A,57:R,58:C,59:D,60:P,61:_,62:I,63:M,64:O,65:N,66:B,67:z,68:F,69:V,70:G,71:Y,72:Q,73:K,74:it}),e(W,[2,21]),e(W,[2,22]),e(j,[2,39]),e(gt,[2,71],{75:81,35:132,76:H,77:U,79:X,80:J}),e(at,[2,73]),{78:[1,133]},e(at,[2,75]),e(at,[2,76]),e(j,[2,40]),e(j,[2,41]),e(j,[2,42]),e(j,[2,43]),e(j,[2,44]),e(j,[2,45]),e(j,[2,46]),e(j,[2,47]),e(j,[2,48]),e(j,[2,49]),e(j,[2,50]),e(j,[2,51]),e(j,[2,52]),e(j,[2,53]),e(j,[2,54]),e(j,[2,55]),e(j,[2,56]),e(j,[2,57]),e(j,[2,58]),e(j,[2,60]),e(j,[2,61]),e(j,[2,62]),e(j,[2,63]),e(j,[2,64]),e(j,[2,65]),e(j,[2,66]),e(j,[2,67]),e(j,[2,68]),e(j,[2,69]),e(j,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},e(tt,[2,28]),e(tt,[2,29]),e(tt,[2,30]),e(tt,[2,31]),e(tt,[2,32]),e(tt,[2,33]),e(tt,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},e(q,[2,18]),e(ut,[2,38]),e(gt,[2,72]),e(at,[2,74]),e(j,[2,24]),e(j,[2,35]),e(kt,[2,25]),e(kt,[2,26],{12:[1,138]}),e(kt,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:x(function(Tt,At){if(At.recoverable)this.trace(Tt);else{var bt=new Error(Tt);throw bt.hash=At,bt}},"parseError"),parse:x(function(Tt){var At=this,bt=[0],wt=[],Nt=[null],ht=[],_t=this.table,Z="",st=0,$=0,nt=2,rt=1,ct=ht.slice.call(arguments,1),ot=Object.create(this.lexer),vt={yy:{}};for(var yt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,yt)&&(vt.yy[yt]=this.yy[yt]);ot.setInput(Tt,vt.yy),vt.yy.lexer=ot,vt.yy.parser=this,typeof ot.yylloc>"u"&&(ot.yylloc={});var mt=ot.yylloc;ht.push(mt);var Mt=ot.options&&ot.options.ranges;typeof vt.yy.parseError=="function"?this.parseError=vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Yt(te){bt.length=bt.length-2*te,Nt.length=Nt.length-te,ht.length=ht.length-te}x(Yt,"popStack");function Bt(){var te;return te=wt.pop()||ot.lex()||rt,typeof te!="number"&&(te instanceof Array&&(wt=te,te=wt.pop()),te=At.symbols_[te]||te),te}x(Bt,"lex");for(var zt,Gt,It,Vt,Zt={},jt,Pt,ce,$t;;){if(Gt=bt[bt.length-1],this.defaultActions[Gt]?It=this.defaultActions[Gt]:((zt===null||typeof zt>"u")&&(zt=Bt()),It=_t[Gt]&&_t[Gt][zt]),typeof It>"u"||!It.length||!It[0]){var Ut="";$t=[];for(jt in _t[Gt])this.terminals_[jt]&&jt>nt&&$t.push("'"+this.terminals_[jt]+"'");ot.showPosition?Ut="Parse error on line "+(st+1)+`:
`+ot.showPosition()+`
Expecting `+$t.join(", ")+", got '"+(this.terminals_[zt]||zt)+"'":Ut="Parse error on line "+(st+1)+": Unexpected "+(zt==rt?"end of input":"'"+(this.terminals_[zt]||zt)+"'"),this.parseError(Ut,{text:ot.match,token:this.terminals_[zt]||zt,line:ot.yylineno,loc:mt,expected:$t})}if(It[0]instanceof Array&&It.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Gt+", token: "+zt);switch(It[0]){case 1:bt.push(zt),Nt.push(ot.yytext),ht.push(ot.yylloc),bt.push(It[1]),zt=null,$=ot.yyleng,Z=ot.yytext,st=ot.yylineno,mt=ot.yylloc;break;case 2:if(Pt=this.productions_[It[1]][1],Zt.$=Nt[Nt.length-Pt],Zt._$={first_line:ht[ht.length-(Pt||1)].first_line,last_line:ht[ht.length-1].last_line,first_column:ht[ht.length-(Pt||1)].first_column,last_column:ht[ht.length-1].last_column},Mt&&(Zt._$.range=[ht[ht.length-(Pt||1)].range[0],ht[ht.length-1].range[1]]),Vt=this.performAction.apply(Zt,[Z,$,st,vt.yy,It[1],Nt,ht].concat(ct)),typeof Vt<"u")return Vt;Pt&&(bt=bt.slice(0,-1*Pt*2),Nt=Nt.slice(0,-1*Pt),ht=ht.slice(0,-1*Pt)),bt.push(this.productions_[It[1]][0]),Nt.push(Zt.$),ht.push(Zt._$),ce=_t[bt[bt.length-2]][bt[bt.length-1]],bt.push(ce);break;case 3:return!0}}return!0},"parse")},Dt=function(){var Rt={EOF:1,parseError:x(function(At,bt){if(this.yy.parser)this.yy.parser.parseError(At,bt);else throw new Error(At)},"parseError"),setInput:x(function(Tt,At){return this.yy=At||this.yy||{},this._input=Tt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var Tt=this._input[0];this.yytext+=Tt,this.yyleng++,this.offset++,this.match+=Tt,this.matched+=Tt;var At=Tt.match(/(?:\r\n?|\n).*/g);return At?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Tt},"input"),unput:x(function(Tt){var At=Tt.length,bt=Tt.split(/(?:\r\n?|\n)/g);this._input=Tt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-At),this.offset-=At;var wt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),bt.length-1&&(this.yylineno-=bt.length-1);var Nt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:bt?(bt.length===wt.length?this.yylloc.first_column:0)+wt[wt.length-bt.length].length-bt[0].length:this.yylloc.first_column-At},this.options.ranges&&(this.yylloc.range=[Nt[0],Nt[0]+this.yyleng-At]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(Tt){this.unput(this.match.slice(Tt))},"less"),pastInput:x(function(){var Tt=this.matched.substr(0,this.matched.length-this.match.length);return(Tt.length>20?"...":"")+Tt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var Tt=this.match;return Tt.length<20&&(Tt+=this._input.substr(0,20-Tt.length)),(Tt.substr(0,20)+(Tt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var Tt=this.pastInput(),At=new Array(Tt.length+1).join("-");return Tt+this.upcomingInput()+`
`+At+"^"},"showPosition"),test_match:x(function(Tt,At){var bt,wt,Nt;if(this.options.backtrack_lexer&&(Nt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Nt.yylloc.range=this.yylloc.range.slice(0))),wt=Tt[0].match(/(?:\r\n?|\n).*/g),wt&&(this.yylineno+=wt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:wt?wt[wt.length-1].length-wt[wt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Tt[0].length},this.yytext+=Tt[0],this.match+=Tt[0],this.matches=Tt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Tt[0].length),this.matched+=Tt[0],bt=this.performAction.call(this,this.yy,this,At,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),bt)return bt;if(this._backtrack){for(var ht in Nt)this[ht]=Nt[ht];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Tt,At,bt,wt;this._more||(this.yytext="",this.match="");for(var Nt=this._currentRules(),ht=0;ht<Nt.length;ht++)if(bt=this._input.match(this.rules[Nt[ht]]),bt&&(!At||bt[0].length>At[0].length)){if(At=bt,wt=ht,this.options.backtrack_lexer){if(Tt=this.test_match(bt,Nt[ht]),Tt!==!1)return Tt;if(this._backtrack){At=!1;continue}else return!1}else if(!this.options.flex)break}return At?(Tt=this.test_match(At,Nt[wt]),Tt!==!1?Tt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var At=this.next();return At||this.lex()},"lex"),begin:x(function(At){this.conditionStack.push(At)},"begin"),popState:x(function(){var At=this.conditionStack.length-1;return At>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(At){return At=this.conditionStack.length-1-Math.abs(At||0),At>=0?this.conditionStack[At]:"INITIAL"},"topState"),pushState:x(function(At){this.begin(At)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:x(function(At,bt,wt,Nt){switch(wt){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:break;case 14:c;break;case 15:return 12;case 16:break;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:return this.begin("node"),39;case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:return this.begin("rel_u"),66;case 53:return this.begin("rel_u"),66;case 54:return this.begin("rel_d"),67;case 55:return this.begin("rel_d"),67;case 56:return this.begin("rel_l"),68;case 57:return this.begin("rel_l"),68;case 58:return this.begin("rel_r"),69;case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:this.popState(),this.popState();break;case 69:return 80;case 70:break;case 71:return 80;case 72:this.begin("string");break;case 73:this.popState();break;case 74:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 79:this.popState(),this.popState();break;case 80:return"STR";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return Rt}();ft.lexer=Dt;function Ot(){this.yy={}}return x(Ot,"Parser"),Ot.prototype=ft,ft.Parser=Ot,new Ot}();zv.parser=zv;var nft=zv,za=[],Ro=[""],fi="global",Ma="",hs=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Ag=[],rS="",nS=!1,Vv=4,Gv=2,TF,ift=x(function(){return TF},"getC4Type"),aft=x(function(e){TF=xr(e,pt())},"setC4Type"),sft=x(function(e,t,r,n,i,a,s,o,l){if(e==null||t===void 0||t===null||r===void 0||r===null||n===void 0||n===null)return;let u={};const h=Ag.find(f=>f.from===t&&f.to===r);if(h?u=h:Ag.push(u),u.type=e,u.from=t,u.to=r,u.label={text:n},i==null)u.techn={text:""};else if(typeof i=="object"){let[f,d]=Object.entries(i)[0];u[f]={text:d}}else u.techn={text:i};if(a==null)u.descr={text:""};else if(typeof a=="object"){let[f,d]=Object.entries(a)[0];u[f]={text:d}}else u.descr={text:a};if(typeof s=="object"){let[f,d]=Object.entries(s)[0];u[f]=d}else u.sprite=s;if(typeof o=="object"){let[f,d]=Object.entries(o)[0];u[f]=d}else u.tags=o;if(typeof l=="object"){let[f,d]=Object.entries(l)[0];u[f]=d}else u.link=l;u.wrap=el()},"addRel"),oft=x(function(e,t,r,n,i,a,s){if(t===null||r===null)return;let o={};const l=za.find(u=>u.alias===t);if(l&&t===l.alias?o=l:(o.alias=t,za.push(o)),r==null?o.label={text:""}:o.label={text:r},n==null)o.descr={text:""};else if(typeof n=="object"){let[u,h]=Object.entries(n)[0];o[u]={text:h}}else o.descr={text:n};if(typeof i=="object"){let[u,h]=Object.entries(i)[0];o[u]=h}else o.sprite=i;if(typeof a=="object"){let[u,h]=Object.entries(a)[0];o[u]=h}else o.tags=a;if(typeof s=="object"){let[u,h]=Object.entries(s)[0];o[u]=h}else o.link=s;o.typeC4Shape={text:e},o.parentBoundary=fi,o.wrap=el()},"addPersonOrSystem"),lft=x(function(e,t,r,n,i,a,s,o){if(t===null||r===null)return;let l={};const u=za.find(h=>h.alias===t);if(u&&t===u.alias?l=u:(l.alias=t,za.push(l)),r==null?l.label={text:""}:l.label={text:r},n==null)l.techn={text:""};else if(typeof n=="object"){let[h,f]=Object.entries(n)[0];l[h]={text:f}}else l.techn={text:n};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,f]=Object.entries(i)[0];l[h]={text:f}}else l.descr={text:i};if(typeof a=="object"){let[h,f]=Object.entries(a)[0];l[h]=f}else l.sprite=a;if(typeof s=="object"){let[h,f]=Object.entries(s)[0];l[h]=f}else l.tags=s;if(typeof o=="object"){let[h,f]=Object.entries(o)[0];l[h]=f}else l.link=o;l.wrap=el(),l.typeC4Shape={text:e},l.parentBoundary=fi},"addContainer"),cft=x(function(e,t,r,n,i,a,s,o){if(t===null||r===null)return;let l={};const u=za.find(h=>h.alias===t);if(u&&t===u.alias?l=u:(l.alias=t,za.push(l)),r==null?l.label={text:""}:l.label={text:r},n==null)l.techn={text:""};else if(typeof n=="object"){let[h,f]=Object.entries(n)[0];l[h]={text:f}}else l.techn={text:n};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,f]=Object.entries(i)[0];l[h]={text:f}}else l.descr={text:i};if(typeof a=="object"){let[h,f]=Object.entries(a)[0];l[h]=f}else l.sprite=a;if(typeof s=="object"){let[h,f]=Object.entries(s)[0];l[h]=f}else l.tags=s;if(typeof o=="object"){let[h,f]=Object.entries(o)[0];l[h]=f}else l.link=o;l.wrap=el(),l.typeC4Shape={text:e},l.parentBoundary=fi},"addComponent"),uft=x(function(e,t,r,n,i){if(e===null||t===null)return;let a={};const s=hs.find(o=>o.alias===e);if(s&&e===s.alias?a=s:(a.alias=e,hs.push(a)),t==null?a.label={text:""}:a.label={text:t},r==null)a.type={text:"system"};else if(typeof r=="object"){let[o,l]=Object.entries(r)[0];a[o]={text:l}}else a.type={text:r};if(typeof n=="object"){let[o,l]=Object.entries(n)[0];a[o]=l}else a.tags=n;if(typeof i=="object"){let[o,l]=Object.entries(i)[0];a[o]=l}else a.link=i;a.parentBoundary=fi,a.wrap=el(),Ma=fi,fi=e,Ro.push(Ma)},"addPersonOrSystemBoundary"),hft=x(function(e,t,r,n,i){if(e===null||t===null)return;let a={};const s=hs.find(o=>o.alias===e);if(s&&e===s.alias?a=s:(a.alias=e,hs.push(a)),t==null?a.label={text:""}:a.label={text:t},r==null)a.type={text:"container"};else if(typeof r=="object"){let[o,l]=Object.entries(r)[0];a[o]={text:l}}else a.type={text:r};if(typeof n=="object"){let[o,l]=Object.entries(n)[0];a[o]=l}else a.tags=n;if(typeof i=="object"){let[o,l]=Object.entries(i)[0];a[o]=l}else a.link=i;a.parentBoundary=fi,a.wrap=el(),Ma=fi,fi=e,Ro.push(Ma)},"addContainerBoundary"),fft=x(function(e,t,r,n,i,a,s,o){if(t===null||r===null)return;let l={};const u=hs.find(h=>h.alias===t);if(u&&t===u.alias?l=u:(l.alias=t,hs.push(l)),r==null?l.label={text:""}:l.label={text:r},n==null)l.type={text:"node"};else if(typeof n=="object"){let[h,f]=Object.entries(n)[0];l[h]={text:f}}else l.type={text:n};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,f]=Object.entries(i)[0];l[h]={text:f}}else l.descr={text:i};if(typeof s=="object"){let[h,f]=Object.entries(s)[0];l[h]=f}else l.tags=s;if(typeof o=="object"){let[h,f]=Object.entries(o)[0];l[h]=f}else l.link=o;l.nodeType=e,l.parentBoundary=fi,l.wrap=el(),Ma=fi,fi=t,Ro.push(Ma)},"addDeploymentNode"),dft=x(function(){fi=Ma,Ro.pop(),Ma=Ro.pop(),Ro.push(Ma)},"popBoundaryParseStack"),gft=x(function(e,t,r,n,i,a,s,o,l,u,h){let f=za.find(d=>d.alias===t);if(!(f===void 0&&(f=hs.find(d=>d.alias===t),f===void 0))){if(r!=null)if(typeof r=="object"){let[d,g]=Object.entries(r)[0];f[d]=g}else f.bgColor=r;if(n!=null)if(typeof n=="object"){let[d,g]=Object.entries(n)[0];f[d]=g}else f.fontColor=n;if(i!=null)if(typeof i=="object"){let[d,g]=Object.entries(i)[0];f[d]=g}else f.borderColor=i;if(a!=null)if(typeof a=="object"){let[d,g]=Object.entries(a)[0];f[d]=g}else f.shadowing=a;if(s!=null)if(typeof s=="object"){let[d,g]=Object.entries(s)[0];f[d]=g}else f.shape=s;if(o!=null)if(typeof o=="object"){let[d,g]=Object.entries(o)[0];f[d]=g}else f.sprite=o;if(l!=null)if(typeof l=="object"){let[d,g]=Object.entries(l)[0];f[d]=g}else f.techn=l;if(u!=null)if(typeof u=="object"){let[d,g]=Object.entries(u)[0];f[d]=g}else f.legendText=u;if(h!=null)if(typeof h=="object"){let[d,g]=Object.entries(h)[0];f[d]=g}else f.legendSprite=h}},"updateElStyle"),pft=x(function(e,t,r,n,i,a,s){const o=Ag.find(l=>l.from===t&&l.to===r);if(o!==void 0){if(n!=null)if(typeof n=="object"){let[l,u]=Object.entries(n)[0];o[l]=u}else o.textColor=n;if(i!=null)if(typeof i=="object"){let[l,u]=Object.entries(i)[0];o[l]=u}else o.lineColor=i;if(a!=null)if(typeof a=="object"){let[l,u]=Object.entries(a)[0];o[l]=parseInt(u)}else o.offsetX=parseInt(a);if(s!=null)if(typeof s=="object"){let[l,u]=Object.entries(s)[0];o[l]=parseInt(u)}else o.offsetY=parseInt(s)}},"updateRelStyle"),vft=x(function(e,t,r){let n=Vv,i=Gv;if(typeof t=="object"){const a=Object.values(t)[0];n=parseInt(a)}else n=parseInt(t);if(typeof r=="object"){const a=Object.values(r)[0];i=parseInt(a)}else i=parseInt(r);n>=1&&(Vv=n),i>=1&&(Gv=i)},"updateLayoutConfig"),mft=x(function(){return Vv},"getC4ShapeInRow"),yft=x(function(){return Gv},"getC4BoundaryInRow"),xft=x(function(){return fi},"getCurrentBoundaryParse"),bft=x(function(){return Ma},"getParentBoundaryParse"),wF=x(function(e){return e==null?za:za.filter(t=>t.parentBoundary===e)},"getC4ShapeArray"),Tft=x(function(e){return za.find(t=>t.alias===e)},"getC4Shape"),wft=x(function(e){return Object.keys(wF(e))},"getC4ShapeKeys"),EF=x(function(e){return e==null?hs:hs.filter(t=>t.parentBoundary===e)},"getBoundaries"),Eft=EF,kft=x(function(){return Ag},"getRels"),Cft=x(function(){return rS},"getTitle"),Sft=x(function(e){nS=e},"setWrap"),el=x(function(){return nS},"autoWrap"),_ft=x(function(){za=[],hs=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Ma="",fi="global",Ro=[""],Ag=[],Ro=[""],rS="",nS=!1,Vv=4,Gv=2},"clear"),Aft={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},Lft={FILLED:0,OPEN:1},Rft={LEFTOF:0,RIGHTOF:1,OVER:2},Ift=x(function(e){rS=xr(e,pt())},"setTitle"),Lw={addPersonOrSystem:oft,addPersonOrSystemBoundary:uft,addContainer:lft,addContainerBoundary:hft,addComponent:cft,addDeploymentNode:fft,popBoundaryParseStack:dft,addRel:sft,updateElStyle:gft,updateRelStyle:pft,updateLayoutConfig:vft,autoWrap:el,setWrap:Sft,getC4ShapeArray:wF,getC4Shape:Tft,getC4ShapeKeys:wft,getBoundaries:EF,getBoundarys:Eft,getCurrentBoundaryParse:xft,getParentBoundaryParse:bft,getRels:kft,getTitle:Cft,getC4Type:ift,getC4ShapeInRow:mft,getC4BoundaryInRow:yft,setAccTitle:cn,getAccTitle:wn,getAccDescription:kn,setAccDescription:En,getConfig:x(()=>pt().c4,"getConfig"),clear:_ft,LINETYPE:Aft,ARROWTYPE:Lft,PLACEMENT:Rft,setTitle:Ift,setC4Type:aft},iS=x(function(e,t){return Ny(e,t)},"drawRect"),kF=x(function(e,t,r,n,i,a){const s=e.append("image");s.attr("width",t),s.attr("height",r),s.attr("x",n),s.attr("y",i);let o=a.startsWith("data:image/png;base64")?a:mc.sanitizeUrl(a);s.attr("xlink:href",o)},"drawImage"),Nft=x((e,t,r)=>{const n=e.append("g");let i=0;for(let a of t){let s=a.textColor?a.textColor:"#444444",o=a.lineColor?a.lineColor:"#444444",l=a.offsetX?parseInt(a.offsetX):0,u=a.offsetY?parseInt(a.offsetY):0,h="";if(i===0){let d=n.append("line");d.attr("x1",a.startPoint.x),d.attr("y1",a.startPoint.y),d.attr("x2",a.endPoint.x),d.attr("y2",a.endPoint.y),d.attr("stroke-width","1"),d.attr("stroke",o),d.style("fill","none"),a.type!=="rel_b"&&d.attr("marker-end","url("+h+"#arrowhead)"),(a.type==="birel"||a.type==="rel_b")&&d.attr("marker-start","url("+h+"#arrowend)"),i=-1}else{let d=n.append("path");d.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",a.startPoint.x).replaceAll("starty",a.startPoint.y).replaceAll("controlx",a.startPoint.x+(a.endPoint.x-a.startPoint.x)/2-(a.endPoint.x-a.startPoint.x)/4).replaceAll("controly",a.startPoint.y+(a.endPoint.y-a.startPoint.y)/2).replaceAll("stopx",a.endPoint.x).replaceAll("stopy",a.endPoint.y)),a.type!=="rel_b"&&d.attr("marker-end","url("+h+"#arrowhead)"),(a.type==="birel"||a.type==="rel_b")&&d.attr("marker-start","url("+h+"#arrowend)")}let f=r.messageFont();Gs(r)(a.label.text,n,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+l,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+u,a.label.width,a.label.height,{fill:s},f),a.techn&&a.techn.text!==""&&(f=r.messageFont(),Gs(r)("["+a.techn.text+"]",n,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+l,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+r.messageFontSize+5+u,Math.max(a.label.width,a.techn.width),a.techn.height,{fill:s,"font-style":"italic"},f))}},"drawRels"),Dft=x(function(e,t,r){const n=e.append("g");let i=t.bgColor?t.bgColor:"none",a=t.borderColor?t.borderColor:"#444444",s=t.fontColor?t.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};t.nodeType&&(o={"stroke-width":1});let l={x:t.x,y:t.y,fill:i,stroke:a,width:t.width,height:t.height,rx:2.5,ry:2.5,attrs:o};iS(n,l);let u=r.boundaryFont();u.fontWeight="bold",u.fontSize=u.fontSize+2,u.fontColor=s,Gs(r)(t.label.text,n,t.x,t.y+t.label.Y,t.width,t.height,{fill:"#444444"},u),t.type&&t.type.text!==""&&(u=r.boundaryFont(),u.fontColor=s,Gs(r)(t.type.text,n,t.x,t.y+t.type.Y,t.width,t.height,{fill:"#444444"},u)),t.descr&&t.descr.text!==""&&(u=r.boundaryFont(),u.fontSize=u.fontSize-2,u.fontColor=s,Gs(r)(t.descr.text,n,t.x,t.y+t.descr.Y,t.width,t.height,{fill:"#444444"},u))},"drawBoundary"),Mft=x(function(e,t,r){var f;let n=t.bgColor?t.bgColor:r[t.typeC4Shape.text+"_bg_color"],i=t.borderColor?t.borderColor:r[t.typeC4Shape.text+"_border_color"],a=t.fontColor?t.fontColor:"#FFFFFF",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(t.typeC4Shape.text){case"person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const o=e.append("g");o.attr("class","person-man");const l=kc();switch(t.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":l.x=t.x,l.y=t.y,l.fill=n,l.width=t.width,l.height=t.height,l.stroke=i,l.rx=2.5,l.ry=2.5,l.attrs={"stroke-width":.5},iS(o,l);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":o.append("path").attr("fill",n).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2).replaceAll("height",t.height)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":o.append("path").attr("fill",n).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("width",t.width).replaceAll("half",t.height/2)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",t.x+t.width).replaceAll("starty",t.y).replaceAll("half",t.height/2));break}let u=Uft(r,t.typeC4Shape.text);switch(o.append("text").attr("fill",a).attr("font-family",u.fontFamily).attr("font-size",u.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",t.typeC4Shape.width).attr("x",t.x+t.width/2-t.typeC4Shape.width/2).attr("y",t.y+t.typeC4Shape.Y).text("<<"+t.typeC4Shape.text+">>"),t.typeC4Shape.text){case"person":case"external_person":kF(o,48,48,t.x+t.width/2-24,t.y+t.image.Y,s);break}let h=r[t.typeC4Shape.text+"Font"]();return h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=a,Gs(r)(t.label.text,o,t.x,t.y+t.label.Y,t.width,t.height,{fill:a},h),h=r[t.typeC4Shape.text+"Font"](),h.fontColor=a,t.techn&&((f=t.techn)==null?void 0:f.text)!==""?Gs(r)(t.techn.text,o,t.x,t.y+t.techn.Y,t.width,t.height,{fill:a,"font-style":"italic"},h):t.type&&t.type.text!==""&&Gs(r)(t.type.text,o,t.x,t.y+t.type.Y,t.width,t.height,{fill:a,"font-style":"italic"},h),t.descr&&t.descr.text!==""&&(h=r.personFont(),h.fontColor=a,Gs(r)(t.descr.text,o,t.x,t.y+t.descr.Y,t.width,t.height,{fill:a},h)),t.height},"drawC4Shape"),Oft=x(function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),Pft=x(function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),Bft=x(function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),Fft=x(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},"insertArrowHead"),$ft=x(function(e){e.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},"insertArrowEnd"),zft=x(function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),Vft=x(function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertDynamicNumber"),Gft=x(function(e){const r=e.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);r.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),r.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},"insertArrowCrossHead"),Uft=x((e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),"getC4ShapeFont"),Gs=function(){function e(i,a,s,o,l,u,h){const f=a.append("text").attr("x",s+l/2).attr("y",o+u/2+5).style("text-anchor","middle").text(i);n(f,h)}x(e,"byText");function t(i,a,s,o,l,u,h,f){const{fontSize:d,fontFamily:g,fontWeight:p}=f,v=i.split(Xt.lineBreakRegex);for(let m=0;m<v.length;m++){const y=m*d-d*(v.length-1)/2,b=a.append("text").attr("x",s+l/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",d).style("font-weight",p).style("font-family",g);b.append("tspan").attr("dy",y).text(v[m]).attr("alignment-baseline","mathematical"),n(b,h)}}x(t,"byTspan");function r(i,a,s,o,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",s).attr("y",o).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),t(i,d,s,o,l,u,h,f),n(p,h)}x(r,"byFo");function n(i,a){for(const s in a)a.hasOwnProperty(s)&&i.attr(s,a[s])}return x(n,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?e:t}}(),Ja={drawRect:iS,drawBoundary:Dft,drawC4Shape:Mft,drawRels:Nft,drawImage:kF,insertArrowHead:Fft,insertArrowEnd:$ft,insertArrowFilledHead:zft,insertDynamicNumber:Vft,insertArrowCrossHead:Gft,insertDatabaseIcon:Oft,insertComputerIcon:Pft,insertClockIcon:Bft},Uv=0,Wv=0,CF=4,Rw=2;zv.yy=Lw;var me={},Nu,SF=(Nu=class{constructor(t){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,Iw(t.db.getConfig())}setData(t,r,n,i){this.nextData.startx=this.data.startx=t,this.nextData.stopx=this.data.stopx=r,this.nextData.starty=this.data.starty=n,this.nextData.stopy=this.data.stopy=i}updateVal(t,r,n,i){t[r]===void 0?t[r]=n:t[r]=i(n,t[r])}insert(t){this.nextData.cnt=this.nextData.cnt+1;let r=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+t.margin:this.nextData.stopx+t.margin*2,n=r+t.width,i=this.nextData.starty+t.margin*2,a=i+t.height;(r>=this.data.widthLimit||n>=this.data.widthLimit||this.nextData.cnt>CF)&&(r=this.nextData.startx+t.margin+me.nextLinePaddingX,i=this.nextData.stopy+t.margin*2,this.nextData.stopx=n=r+t.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=a=i+t.height,this.nextData.cnt=1),t.x=r,t.y=i,this.updateVal(this.data,"startx",r,Math.min),this.updateVal(this.data,"starty",i,Math.min),this.updateVal(this.data,"stopx",n,Math.max),this.updateVal(this.data,"stopy",a,Math.max),this.updateVal(this.nextData,"startx",r,Math.min),this.updateVal(this.nextData,"starty",i,Math.min),this.updateVal(this.nextData,"stopx",n,Math.max),this.updateVal(this.nextData,"stopy",a,Math.max)}init(t){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},Iw(t.db.getConfig())}bumpLastMargin(t){this.data.stopx+=t,this.data.stopy+=t}},x(Nu,"Bounds"),Nu),Iw=x(function(e){an(me,e),e.fontFamily&&(me.personFontFamily=me.systemFontFamily=me.messageFontFamily=e.fontFamily),e.fontSize&&(me.personFontSize=me.systemFontSize=me.messageFontSize=e.fontSize),e.fontWeight&&(me.personFontWeight=me.systemFontWeight=me.messageFontWeight=e.fontWeight)},"setConf"),Of=x((e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),"c4ShapeFont"),o1=x(e=>({fontFamily:e.boundaryFontFamily,fontSize:e.boundaryFontSize,fontWeight:e.boundaryFontWeight}),"boundaryFont"),Wft=x(e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),"messageFont");function da(e,t,r,n,i){if(!t[e].width)if(r)t[e].text=MP(t[e].text,i,n),t[e].textLines=t[e].text.split(Xt.lineBreakRegex).length,t[e].width=i,t[e].height=_v(t[e].text,n);else{let a=t[e].text.split(Xt.lineBreakRegex);t[e].textLines=a.length;let s=0;t[e].height=0,t[e].width=0;for(const o of a)t[e].width=Math.max(ui(o,n),t[e].width),s=_v(o,n),t[e].height=t[e].height+s}}x(da,"calcC4ShapeTextWH");var _F=x(function(e,t,r){t.x=r.data.startx,t.y=r.data.starty,t.width=r.data.stopx-r.data.startx,t.height=r.data.stopy-r.data.starty,t.label.y=me.c4ShapeMargin-35;let n=t.wrap&&me.wrap,i=o1(me);i.fontSize=i.fontSize+2,i.fontWeight="bold";let a=ui(t.label.text,i);da("label",t,n,i,a),Ja.drawBoundary(e,t,me)},"drawBoundary"),AF=x(function(e,t,r,n){let i=0;for(const a of n){i=0;const s=r[a];let o=Of(me,s.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,s.typeC4Shape.width=ui("«"+s.typeC4Shape.text+"»",o),s.typeC4Shape.height=o.fontSize+2,s.typeC4Shape.Y=me.c4ShapePadding,i=s.typeC4Shape.Y+s.typeC4Shape.height-4,s.image={width:0,height:0,Y:0},s.typeC4Shape.text){case"person":case"external_person":s.image.width=48,s.image.height=48,s.image.Y=i,i=s.image.Y+s.image.height;break}s.sprite&&(s.image.width=48,s.image.height=48,s.image.Y=i,i=s.image.Y+s.image.height);let l=s.wrap&&me.wrap,u=me.width-me.c4ShapePadding*2,h=Of(me,s.typeC4Shape.text);if(h.fontSize=h.fontSize+2,h.fontWeight="bold",da("label",s,l,h,u),s.label.Y=i+8,i=s.label.Y+s.label.height,s.type&&s.type.text!==""){s.type.text="["+s.type.text+"]";let g=Of(me,s.typeC4Shape.text);da("type",s,l,g,u),s.type.Y=i+5,i=s.type.Y+s.type.height}else if(s.techn&&s.techn.text!==""){s.techn.text="["+s.techn.text+"]";let g=Of(me,s.techn.text);da("techn",s,l,g,u),s.techn.Y=i+5,i=s.techn.Y+s.techn.height}let f=i,d=s.label.width;if(s.descr&&s.descr.text!==""){let g=Of(me,s.typeC4Shape.text);da("descr",s,l,g,u),s.descr.Y=i+20,i=s.descr.Y+s.descr.height,d=Math.max(s.label.width,s.descr.width),f=i-s.descr.textLines*5}d=d+me.c4ShapePadding,s.width=Math.max(s.width||me.width,d,me.width),s.height=Math.max(s.height||me.height,f,me.height),s.margin=s.margin||me.c4ShapeMargin,e.insert(s),Ja.drawC4Shape(t,s,me)}e.bumpLastMargin(me.c4ShapeMargin)},"drawC4ShapeArray"),Du,aa=(Du=class{constructor(t,r){this.x=t,this.y=r}},x(Du,"Point"),Du),A4=x(function(e,t){let r=e.x,n=e.y,i=t.x,a=t.y,s=r+e.width/2,o=n+e.height/2,l=Math.abs(r-i),u=Math.abs(n-a),h=u/l,f=e.height/e.width,d=null;return n==a&&r<i?d=new aa(r+e.width,o):n==a&&r>i?d=new aa(r,o):r==i&&n<a?d=new aa(s,n+e.height):r==i&&n>a&&(d=new aa(s,n)),r>i&&n<a?f>=h?d=new aa(r,o+h*e.width/2):d=new aa(s-l/u*e.height/2,n+e.height):r<i&&n<a?f>=h?d=new aa(r+e.width,o+h*e.width/2):d=new aa(s+l/u*e.height/2,n+e.height):r<i&&n>a?f>=h?d=new aa(r+e.width,o-h*e.width/2):d=new aa(s+e.height/2*l/u,n):r>i&&n>a&&(f>=h?d=new aa(r,o-e.width/2*h):d=new aa(s-e.height/2*l/u,n)),d},"getIntersectPoint"),Yft=x(function(e,t){let r={x:0,y:0};r.x=t.x+t.width/2,r.y=t.y+t.height/2;let n=A4(e,r);r.x=e.x+e.width/2,r.y=e.y+e.height/2;let i=A4(t,r);return{startPoint:n,endPoint:i}},"getIntersectPoints"),Hft=x(function(e,t,r,n){let i=0;for(let a of t){i=i+1;let s=a.wrap&&me.wrap,o=Wft(me);n.db.getC4Type()==="C4Dynamic"&&(a.label.text=i+": "+a.label.text);let u=ui(a.label.text,o);da("label",a,s,o,u),a.techn&&a.techn.text!==""&&(u=ui(a.techn.text,o),da("techn",a,s,o,u)),a.descr&&a.descr.text!==""&&(u=ui(a.descr.text,o),da("descr",a,s,o,u));let h=r(a.from),f=r(a.to),d=Yft(h,f);a.startPoint=d.startPoint,a.endPoint=d.endPoint}Ja.drawRels(e,t,me)},"drawRels");function aS(e,t,r,n,i){let a=new SF(i);a.data.widthLimit=r.data.widthLimit/Math.min(Rw,n.length);for(let[s,o]of n.entries()){let l=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=l,l=o.image.Y+o.image.height);let u=o.wrap&&me.wrap,h=o1(me);if(h.fontSize=h.fontSize+2,h.fontWeight="bold",da("label",o,u,h,a.data.widthLimit),o.label.Y=l+8,l=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let p=o1(me);da("type",o,u,p,a.data.widthLimit),o.type.Y=l+5,l=o.type.Y+o.type.height}if(o.descr&&o.descr.text!==""){let p=o1(me);p.fontSize=p.fontSize-2,da("descr",o,u,p,a.data.widthLimit),o.descr.Y=l+20,l=o.descr.Y+o.descr.height}if(s==0||s%Rw===0){let p=r.data.startx+me.diagramMarginX,v=r.data.stopy+me.diagramMarginY+l;a.setData(p,p,v,v)}else{let p=a.data.stopx!==a.data.startx?a.data.stopx+me.diagramMarginX:a.data.startx,v=a.data.starty;a.setData(p,p,v,v)}a.name=o.alias;let f=i.db.getC4ShapeArray(o.alias),d=i.db.getC4ShapeKeys(o.alias);d.length>0&&AF(a,e,f,d),t=o.alias;let g=i.db.getBoundarys(t);g.length>0&&aS(e,t,a,g,i),o.alias!=="global"&&_F(e,o,a),r.data.stopy=Math.max(a.data.stopy+me.c4ShapeMargin,r.data.stopy),r.data.stopx=Math.max(a.data.stopx+me.c4ShapeMargin,r.data.stopx),Uv=Math.max(Uv,r.data.stopx),Wv=Math.max(Wv,r.data.stopy)}}x(aS,"drawInsideBoundary");var qft=x(function(e,t,r,n){me=pt().c4;const i=pt().securityLevel;let a;i==="sandbox"&&(a=qt("#i"+t));const s=qt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body");let o=n.db;n.db.setWrap(me.wrap),CF=o.getC4ShapeInRow(),Rw=o.getC4BoundaryInRow(),et.debug(`C:${JSON.stringify(me,null,2)}`);const l=i==="sandbox"?s.select(`[id="${t}"]`):qt(`[id="${t}"]`);Ja.insertComputerIcon(l),Ja.insertDatabaseIcon(l),Ja.insertClockIcon(l);let u=new SF(n);u.setData(me.diagramMarginX,me.diagramMarginX,me.diagramMarginY,me.diagramMarginY),u.data.widthLimit=screen.availWidth,Uv=me.diagramMarginX,Wv=me.diagramMarginY;const h=n.db.getTitle();let f=n.db.getBoundarys("");aS(l,"",u,f,n),Ja.insertArrowHead(l),Ja.insertArrowEnd(l),Ja.insertArrowCrossHead(l),Ja.insertArrowFilledHead(l),Hft(l,n.db.getRels(),n.db.getC4Shape,n),u.data.stopx=Uv,u.data.stopy=Wv;const d=u.data;let p=d.stopy-d.starty+2*me.diagramMarginY;const m=d.stopx-d.startx+2*me.diagramMarginX;h&&l.append("text").text(h).attr("x",(d.stopx-d.startx)/2-4*me.diagramMarginX).attr("y",d.starty+me.diagramMarginY),Oi(l,p,m,me.useMaxWidth);const y=h?60:0;l.attr("viewBox",d.startx-me.diagramMarginX+" -"+(me.diagramMarginY+y)+" "+m+" "+(p+y)),et.debug("models:",d)},"draw"),L4={drawPersonOrSystemArray:AF,drawBoundary:_F,setConf:Iw,draw:qft},Xft=x(e=>`.person {
    stroke: ${e.personBorder};
    fill: ${e.personBkg};
  }
`,"getStyles"),jft=Xft,Kft={parser:nft,db:Lw,renderer:L4,styles:jft,init:x(({c4:e,wrap:t})=>{L4.setConf(e),Lw.setWrap(t)},"init")};const Zft=Object.freeze(Object.defineProperty({__proto__:null,diagram:Kft},Symbol.toStringTag,{value:"Module"}));var yp=x((e,t)=>{let r;return t==="sandbox"&&(r=qt("#i"+e)),qt(t==="sandbox"?r.nodes()[0].contentDocument.body:"body").select(`[id="${e}"]`)},"getDiagramElement"),xp=x((e,t,r,n)=>{e.attr("class",r);const{width:i,height:a,x:s,y:o}=Qft(e,t);Oi(e,a,i,n);const l=Jft(s,o,i,a,t);e.attr("viewBox",l),et.debug(`viewBox configured: ${l} with padding: ${t}`)},"setupViewPortForSVG"),Qft=x((e,t)=>{var n;const r=((n=e.node())==null?void 0:n.getBBox())||{width:0,height:0,x:0,y:0};return{width:r.width+t*2,height:r.height+t*2,x:r.x,y:r.y}},"calculateDimensionsWithPadding"),Jft=x((e,t,r,n,i)=>`${e-i} ${t-i} ${r} ${n}`,"createViewBox"),tdt="flowchart-",Mu,edt=(Mu=class{constructor(){this.vertexCounter=0,this.config=pt(),this.vertices=new Map,this.edges=[],this.classes=new Map,this.subGraphs=[],this.subGraphLookup=new Map,this.tooltips=new Map,this.subCount=0,this.firstGraphFlag=!0,this.secCount=-1,this.posCrossRef=[],this.funs=[],this.setAccTitle=cn,this.setAccDescription=En,this.setDiagramTitle=Fn,this.getAccTitle=wn,this.getAccDescription=kn,this.getDiagramTitle=gn,this.funs.push(this.setupToolTips.bind(this)),this.addVertex=this.addVertex.bind(this),this.firstGraph=this.firstGraph.bind(this),this.setDirection=this.setDirection.bind(this),this.addSubGraph=this.addSubGraph.bind(this),this.addLink=this.addLink.bind(this),this.setLink=this.setLink.bind(this),this.updateLink=this.updateLink.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.destructLink=this.destructLink.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setTooltip=this.setTooltip.bind(this),this.updateLinkInterpolate=this.updateLinkInterpolate.bind(this),this.setClickFun=this.setClickFun.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.lex={firstGraph:this.firstGraph.bind(this)},this.clear(),this.setGen("gen-2")}sanitizeText(t){return Xt.sanitizeText(t,this.config)}lookUpDomId(t){for(const r of this.vertices.values())if(r.id===t)return r.domId;return t}addVertex(t,r,n,i,a,s,o={},l){var g,p;if(!t||t.trim().length===0)return;let u;if(l!==void 0){let v;l.includes(`
`)?v=l+`
`:v=`{
`+l+`
}`,u=eC(v,{schema:tC})}const h=this.edges.find(v=>v.id===t);if(h){const v=u;(v==null?void 0:v.animate)!==void 0&&(h.animate=v.animate),(v==null?void 0:v.animation)!==void 0&&(h.animation=v.animation);return}let f,d=this.vertices.get(t);if(d===void 0&&(d={id:t,labelType:"text",domId:tdt+t+"-"+this.vertexCounter,styles:[],classes:[]},this.vertices.set(t,d)),this.vertexCounter++,r!==void 0?(this.config=pt(),f=this.sanitizeText(r.text.trim()),d.labelType=r.type,f.startsWith('"')&&f.endsWith('"')&&(f=f.substring(1,f.length-1)),d.text=f):d.text===void 0&&(d.text=t),n!==void 0&&(d.type=n),i!=null&&i.forEach(v=>{d.styles.push(v)}),a!=null&&a.forEach(v=>{d.classes.push(v)}),s!==void 0&&(d.dir=s),d.props===void 0?d.props=o:o!==void 0&&Object.assign(d.props,o),u!==void 0){if(u.shape){if(u.shape!==u.shape.toLowerCase()||u.shape.includes("_"))throw new Error(`No such shape: ${u.shape}. Shape names should be lowercase.`);if(!A7(u.shape))throw new Error(`No such shape: ${u.shape}.`);d.type=u==null?void 0:u.shape}u!=null&&u.label&&(d.text=u==null?void 0:u.label),u!=null&&u.icon&&(d.icon=u==null?void 0:u.icon,!((g=u.label)!=null&&g.trim())&&d.text===t&&(d.text="")),u!=null&&u.form&&(d.form=u==null?void 0:u.form),u!=null&&u.pos&&(d.pos=u==null?void 0:u.pos),u!=null&&u.img&&(d.img=u==null?void 0:u.img,!((p=u.label)!=null&&p.trim())&&d.text===t&&(d.text="")),u!=null&&u.constraint&&(d.constraint=u.constraint),u.w&&(d.assetWidth=Number(u.w)),u.h&&(d.assetHeight=Number(u.h))}}addSingleLink(t,r,n,i){const o={start:t,end:r,type:void 0,text:"",labelType:"text",classes:[],isUserDefinedId:!1,interpolate:this.edges.defaultInterpolate};et.info("abc78 Got edge...",o);const l=n.text;if(l!==void 0&&(o.text=this.sanitizeText(l.text.trim()),o.text.startsWith('"')&&o.text.endsWith('"')&&(o.text=o.text.substring(1,o.text.length-1)),o.labelType=l.type),n!==void 0&&(o.type=n.type,o.stroke=n.stroke,o.length=n.length>10?10:n.length),i&&!this.edges.some(u=>u.id===i))o.id=i,o.isUserDefinedId=!0;else{const u=this.edges.filter(h=>h.start===o.start&&h.end===o.end);u.length===0?o.id=Kd(o.start,o.end,{counter:0,prefix:"L"}):o.id=Kd(o.start,o.end,{counter:u.length+1,prefix:"L"})}if(this.edges.length<(this.config.maxEdges??500))et.info("Pushing edge..."),this.edges.push(o);else throw new Error(`Edge limit exceeded. ${this.edges.length} edges found, but the limit is ${this.config.maxEdges}.

Initialize mermaid with maxEdges set to a higher number to allow more edges.
You cannot set this config via configuration inside the diagram as it is a secure config.
You have to call mermaid.initialize.`)}isLinkData(t){return t!==null&&typeof t=="object"&&"id"in t&&typeof t.id=="string"}addLink(t,r,n){const i=this.isLinkData(n)?n.id.replace("@",""):void 0;et.info("addLink",t,r,i);for(const a of t)for(const s of r){const o=a===t[t.length-1],l=s===r[0];o&&l?this.addSingleLink(a,s,n,i):this.addSingleLink(a,s,n,void 0)}}updateLinkInterpolate(t,r){t.forEach(n=>{n==="default"?this.edges.defaultInterpolate=r:this.edges[n].interpolate=r})}updateLink(t,r){t.forEach(n=>{var i,a,s,o,l,u;if(typeof n=="number"&&n>=this.edges.length)throw new Error(`The index ${n} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${this.edges.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);n==="default"?this.edges.defaultStyle=r:(this.edges[n].style=r,(((a=(i=this.edges[n])==null?void 0:i.style)==null?void 0:a.length)??0)>0&&!((o=(s=this.edges[n])==null?void 0:s.style)!=null&&o.some(h=>h==null?void 0:h.startsWith("fill")))&&((u=(l=this.edges[n])==null?void 0:l.style)==null||u.push("fill:none")))})}addClass(t,r){const n=r.join().replace(/\\,/g,"§§§").replace(/,/g,";").replace(/§§§/g,",").split(";");t.split(",").forEach(i=>{let a=this.classes.get(i);a===void 0&&(a={id:i,styles:[],textStyles:[]},this.classes.set(i,a)),n!=null&&n.forEach(s=>{if(/color/.exec(s)){const o=s.replace("fill","bgFill");a.textStyles.push(o)}a.styles.push(s)})})}setDirection(t){this.direction=t,/.*</.exec(this.direction)&&(this.direction="RL"),/.*\^/.exec(this.direction)&&(this.direction="BT"),/.*>/.exec(this.direction)&&(this.direction="LR"),/.*v/.exec(this.direction)&&(this.direction="TB"),this.direction==="TD"&&(this.direction="TB")}setClass(t,r){for(const n of t.split(",")){const i=this.vertices.get(n);i&&i.classes.push(r);const a=this.edges.find(o=>o.id===n);a&&a.classes.push(r);const s=this.subGraphLookup.get(n);s&&s.classes.push(r)}}setTooltip(t,r){if(r!==void 0){r=this.sanitizeText(r);for(const n of t.split(","))this.tooltips.set(this.version==="gen-1"?this.lookUpDomId(n):n,r)}}setClickFun(t,r,n){const i=this.lookUpDomId(t);if(pt().securityLevel!=="loose"||r===void 0)return;let a=[];if(typeof n=="string"){a=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let o=0;o<a.length;o++){let l=a[o].trim();l.startsWith('"')&&l.endsWith('"')&&(l=l.substr(1,l.length-2)),a[o]=l}}a.length===0&&a.push(t);const s=this.vertices.get(t);s&&(s.haveCallback=!0,this.funs.push(()=>{const o=document.querySelector(`[id="${i}"]`);o!==null&&o.addEventListener("click",()=>{De.runFunc(r,...a)},!1)}))}setLink(t,r,n){t.split(",").forEach(i=>{const a=this.vertices.get(i);a!==void 0&&(a.link=De.formatUrl(r,this.config),a.linkTarget=n)}),this.setClass(t,"clickable")}getTooltip(t){return this.tooltips.get(t)}setClickEvent(t,r,n){t.split(",").forEach(i=>{this.setClickFun(i,r,n)}),this.setClass(t,"clickable")}bindFunctions(t){this.funs.forEach(r=>{r(t)})}getDirection(){var t;return(t=this.direction)==null?void 0:t.trim()}getVertices(){return this.vertices}getEdges(){return this.edges}getClasses(){return this.classes}setupToolTips(t){let r=qt(".mermaidTooltip");(r._groups||r)[0][0]===null&&(r=qt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),qt(t).select("svg").selectAll("g.node").on("mouseover",a=>{var u;const s=qt(a.currentTarget);if(s.attr("title")===null)return;const l=(u=a.currentTarget)==null?void 0:u.getBoundingClientRect();r.transition().duration(200).style("opacity",".9"),r.text(s.attr("title")).style("left",window.scrollX+l.left+(l.right-l.left)/2+"px").style("top",window.scrollY+l.bottom+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",a=>{r.transition().duration(500).style("opacity",0),qt(a.currentTarget).classed("hover",!1)})}clear(t="gen-2"){this.vertices=new Map,this.classes=new Map,this.edges=[],this.funs=[this.setupToolTips.bind(this)],this.subGraphs=[],this.subGraphLookup=new Map,this.subCount=0,this.tooltips=new Map,this.firstGraphFlag=!0,this.version=t,this.config=pt(),dn()}setGen(t){this.version=t||"gen-2"}defaultStyle(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"}addSubGraph(t,r,n){let i=t.text.trim(),a=n.text;t===n&&/\s/.exec(n.text)&&(i=void 0);const s=x(h=>{const f={boolean:{},number:{},string:{}},d=[];let g;return{nodeList:h.filter(function(v){const m=typeof v;return v.stmt&&v.stmt==="dir"?(g=v.value,!1):v.trim()===""?!1:m in f?f[m].hasOwnProperty(v)?!1:f[m][v]=!0:d.includes(v)?!1:d.push(v)}),dir:g}},"uniq"),{nodeList:o,dir:l}=s(r.flat());if(this.version==="gen-1")for(let h=0;h<o.length;h++)o[h]=this.lookUpDomId(o[h]);i=i??"subGraph"+this.subCount,a=a||"",a=this.sanitizeText(a),this.subCount=this.subCount+1;const u={id:i,nodes:o,title:a.trim(),classes:[],dir:l,labelType:n.type};return et.info("Adding",u.id,u.nodes,u.dir),u.nodes=this.makeUniq(u,this.subGraphs).nodes,this.subGraphs.push(u),this.subGraphLookup.set(i,u),i}getPosForId(t){for(const[r,n]of this.subGraphs.entries())if(n.id===t)return r;return-1}indexNodes2(t,r){const n=this.subGraphs[r].nodes;if(this.secCount=this.secCount+1,this.secCount>2e3)return{result:!1,count:0};if(this.posCrossRef[this.secCount]=r,this.subGraphs[r].id===t)return{result:!0,count:0};let i=0,a=1;for(;i<n.length;){const s=this.getPosForId(n[i]);if(s>=0){const o=this.indexNodes2(t,s);if(o.result)return{result:!0,count:a+o.count};a=a+o.count}i=i+1}return{result:!1,count:a}}getDepthFirstPos(t){return this.posCrossRef[t]}indexNodes(){this.secCount=-1,this.subGraphs.length>0&&this.indexNodes2("none",this.subGraphs.length-1)}getSubGraphs(){return this.subGraphs}firstGraph(){return this.firstGraphFlag?(this.firstGraphFlag=!1,!0):!1}destructStartLink(t){let r=t.trim(),n="arrow_open";switch(r[0]){case"<":n="arrow_point",r=r.slice(1);break;case"x":n="arrow_cross",r=r.slice(1);break;case"o":n="arrow_circle",r=r.slice(1);break}let i="normal";return r.includes("=")&&(i="thick"),r.includes(".")&&(i="dotted"),{type:n,stroke:i}}countChar(t,r){const n=r.length;let i=0;for(let a=0;a<n;++a)r[a]===t&&++i;return i}destructEndLink(t){const r=t.trim();let n=r.slice(0,-1),i="arrow_open";switch(r.slice(-1)){case"x":i="arrow_cross",r.startsWith("x")&&(i="double_"+i,n=n.slice(1));break;case">":i="arrow_point",r.startsWith("<")&&(i="double_"+i,n=n.slice(1));break;case"o":i="arrow_circle",r.startsWith("o")&&(i="double_"+i,n=n.slice(1));break}let a="normal",s=n.length-1;n.startsWith("=")&&(a="thick"),n.startsWith("~")&&(a="invisible");const o=this.countChar(".",n);return o&&(a="dotted",s=o),{type:i,stroke:a,length:s}}destructLink(t,r){const n=this.destructEndLink(t);let i;if(r){if(i=this.destructStartLink(r),i.stroke!==n.stroke)return{type:"INVALID",stroke:"INVALID"};if(i.type==="arrow_open")i.type=n.type;else{if(i.type!==n.type)return{type:"INVALID",stroke:"INVALID"};i.type="double_"+i.type}return i.type==="double_arrow"&&(i.type="double_arrow_point"),i.length=n.length,i}return n}exists(t,r){for(const n of t)if(n.nodes.includes(r))return!0;return!1}makeUniq(t,r){const n=[];return t.nodes.forEach((i,a)=>{this.exists(r,i)||n.push(t.nodes[a])}),{nodes:n}}getTypeFromVertex(t){if(t.img)return"imageSquare";if(t.icon)return t.form==="circle"?"iconCircle":t.form==="square"?"iconSquare":t.form==="rounded"?"iconRounded":"icon";switch(t.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return t.type}}findNode(t,r){return t.find(n=>n.id===r)}destructEdgeType(t){let r="none",n="arrow_point";switch(t){case"arrow_point":case"arrow_circle":case"arrow_cross":n=t;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":r=t.replace("double_",""),n=r;break}return{arrowTypeStart:r,arrowTypeEnd:n}}addNodeFromVertex(t,r,n,i,a,s){var h;const o=n.get(t.id),l=i.get(t.id)??!1,u=this.findNode(r,t.id);if(u)u.cssStyles=t.styles,u.cssCompiledStyles=this.getCompiledStyles(t.classes),u.cssClasses=t.classes.join(" ");else{const f={id:t.id,label:t.text,labelStyle:"",parentId:o,padding:((h=a.flowchart)==null?void 0:h.padding)||8,cssStyles:t.styles,cssCompiledStyles:this.getCompiledStyles(["default","node",...t.classes]),cssClasses:"default "+t.classes.join(" "),dir:t.dir,domId:t.domId,look:s,link:t.link,linkTarget:t.linkTarget,tooltip:this.getTooltip(t.id),icon:t.icon,pos:t.pos,img:t.img,assetWidth:t.assetWidth,assetHeight:t.assetHeight,constraint:t.constraint};l?r.push({...f,isGroup:!0,shape:"rect"}):r.push({...f,isGroup:!1,shape:this.getTypeFromVertex(t)})}}getCompiledStyles(t){let r=[];for(const n of t){const i=this.classes.get(n);i!=null&&i.styles&&(r=[...r,...i.styles??[]].map(a=>a.trim())),i!=null&&i.textStyles&&(r=[...r,...i.textStyles??[]].map(a=>a.trim()))}return r}getData(){const t=pt(),r=[],n=[],i=this.getSubGraphs(),a=new Map,s=new Map;for(let u=i.length-1;u>=0;u--){const h=i[u];h.nodes.length>0&&s.set(h.id,!0);for(const f of h.nodes)a.set(f,h.id)}for(let u=i.length-1;u>=0;u--){const h=i[u];r.push({id:h.id,label:h.title,labelStyle:"",parentId:a.get(h.id),padding:8,cssCompiledStyles:this.getCompiledStyles(h.classes),cssClasses:h.classes.join(" "),shape:"rect",dir:h.dir,isGroup:!0,look:t.look})}this.getVertices().forEach(u=>{this.addNodeFromVertex(u,r,a,s,t,t.look||"classic")});const l=this.getEdges();return l.forEach((u,h)=>{var v;const{arrowTypeStart:f,arrowTypeEnd:d}=this.destructEdgeType(u.type),g=[...l.defaultStyle??[]];u.style&&g.push(...u.style);const p={id:Kd(u.start,u.end,{counter:h,prefix:"L"},u.id),isUserDefinedId:u.isUserDefinedId,start:u.start,end:u.end,type:u.type??"normal",label:u.text,labelpos:"c",thickness:u.stroke,minlen:u.length,classes:(u==null?void 0:u.stroke)==="invisible"?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:(u==null?void 0:u.stroke)==="invisible"||(u==null?void 0:u.type)==="arrow_open"?"none":f,arrowTypeEnd:(u==null?void 0:u.stroke)==="invisible"||(u==null?void 0:u.type)==="arrow_open"?"none":d,arrowheadStyle:"fill: #333",cssCompiledStyles:this.getCompiledStyles(u.classes),labelStyle:g,style:g,pattern:u.stroke,look:t.look,animate:u.animate,animation:u.animation,curve:u.interpolate||this.edges.defaultInterpolate||((v=t.flowchart)==null?void 0:v.curve)};n.push(p)}),{nodes:r,edges:n,other:{},config:t}}defaultConfig(){return JD.flowchart}},x(Mu,"FlowDB"),Mu),rdt=x(function(e,t){return t.db.getClasses()},"getClasses"),ndt=x(async function(e,t,r,n){var g;et.info("REF0:"),et.info("Drawing state diagram (v2)",t);const{securityLevel:i,flowchart:a,layout:s}=pt();let o;i==="sandbox"&&(o=qt("#i"+t));const l=i==="sandbox"?o.nodes()[0].contentDocument:document;et.debug("Before getData: ");const u=n.db.getData();et.debug("Data: ",u);const h=yp(t,i),f=n.db.getDirection();u.type=n.type,u.layoutAlgorithm=by(s),u.layoutAlgorithm==="dagre"&&s==="elk"&&et.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),u.direction=f,u.nodeSpacing=(a==null?void 0:a.nodeSpacing)||50,u.rankSpacing=(a==null?void 0:a.rankSpacing)||50,u.markers=["point","circle","cross"],u.diagramId=t,et.debug("REF1:",u),await dp(u,h);const d=((g=u.config.flowchart)==null?void 0:g.diagramPadding)??8;De.insertTitle(h,"flowchartTitleText",(a==null?void 0:a.titleTopMargin)||0,n.db.getDiagramTitle()),xp(h,d,"flowchart",(a==null?void 0:a.useMaxWidth)||!1);for(const p of u.nodes){const v=qt(`#${t} [id="${p.id}"]`);if(!v||!p.link)continue;const m=l.createElementNS("http://www.w3.org/2000/svg","a");m.setAttributeNS("http://www.w3.org/2000/svg","class",p.cssClasses),m.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),i==="sandbox"?m.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):p.linkTarget&&m.setAttributeNS("http://www.w3.org/2000/svg","target",p.linkTarget);const y=v.insert(function(){return m},":first-child"),b=v.select(".label-container");b&&y.append(function(){return b.node()});const T=v.select(".label");T&&y.append(function(){return T.node()})}},"draw"),idt={getClasses:rdt,draw:ndt},Nw=function(){var e=x(function(qe,fe,le,Kt){for(le=le||{},Kt=qe.length;Kt--;le[qe[Kt]]=fe);return le},"o"),t=[1,4],r=[1,3],n=[1,5],i=[1,8,9,10,11,27,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],a=[2,2],s=[1,13],o=[1,14],l=[1,15],u=[1,16],h=[1,23],f=[1,25],d=[1,26],g=[1,27],p=[1,49],v=[1,48],m=[1,29],y=[1,30],b=[1,31],T=[1,32],w=[1,33],k=[1,44],S=[1,46],E=[1,42],L=[1,47],A=[1,43],R=[1,50],C=[1,45],D=[1,51],P=[1,52],_=[1,34],I=[1,35],M=[1,36],O=[1,37],N=[1,57],B=[1,8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],z=[1,61],F=[1,60],V=[1,62],G=[8,9,11,75,77,78],Y=[1,78],Q=[1,91],K=[1,96],it=[1,95],ut=[1,92],q=[1,88],W=[1,94],H=[1,90],U=[1,97],X=[1,93],J=[1,98],j=[1,89],gt=[8,9,10,11,40,75,77,78],at=[8,9,10,11,40,46,75,77,78],tt=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,78,89,102,105,106,109,111,114,115,116],kt=[8,9,11,44,60,75,77,78,89,102,105,106,109,111,114,115,116],ft=[44,60,89,102,105,106,109,111,114,115,116],Dt=[1,121],Ot=[1,122],Rt=[1,124],Tt=[1,123],At=[44,60,62,74,89,102,105,106,109,111,114,115,116],bt=[1,133],wt=[1,147],Nt=[1,148],ht=[1,149],_t=[1,150],Z=[1,135],st=[1,137],$=[1,141],nt=[1,142],rt=[1,143],ct=[1,144],ot=[1,145],vt=[1,146],yt=[1,151],mt=[1,152],Mt=[1,131],Yt=[1,132],Bt=[1,139],zt=[1,134],Gt=[1,138],It=[1,136],Vt=[8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],Zt=[1,154],jt=[1,156],Pt=[8,9,11],ce=[8,9,10,11,14,44,60,89,105,106,109,111,114,115,116],$t=[1,176],Ut=[1,172],te=[1,173],Qt=[1,177],Jt=[1,174],ie=[1,175],Ge=[77,116,119],pe=[8,9,10,11,12,14,27,29,32,44,60,75,84,85,86,87,88,89,90,105,109,111,114,115,116],He=[10,106],Fe=[31,49,51,53,55,57,62,64,66,67,69,71,116,117,118],Pe=[1,247],Le=[1,245],_r=[1,249],re=[1,243],xt=[1,244],Wt=[1,246],oe=[1,248],Be=[1,250],pr=[1,268],vr=[8,9,11,106],ur=[8,9,10,11,60,84,105,106,109,110,111,112],jr={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,LINK_ID:78,edgeTextToken:79,STR:80,MD_STR:81,textToken:82,keywords:83,STYLE:84,LINKSTYLE:85,CLASSDEF:86,CLASS:87,CLICK:88,DOWN:89,UP:90,textNoTagsToken:91,stylesOpt:92,"idString[vertex]":93,"idString[class]":94,CALLBACKNAME:95,CALLBACKARGS:96,HREF:97,LINK_TARGET:98,"STR[link]":99,"STR[tooltip]":100,alphaNum:101,DEFAULT:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,NODE_STRING:109,UNIT:110,BRKT:111,PCT:112,idStringToken:113,MINUS:114,MULT:115,UNICODE_TEXT:116,TEXT:117,TAGSTART:118,EDGE_TEXT:119,alphaNumToken:120,direction_tb:121,direction_bt:122,direction_rl:123,direction_lr:124,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",78:"LINK_ID",80:"STR",81:"MD_STR",84:"STYLE",85:"LINKSTYLE",86:"CLASSDEF",87:"CLASS",88:"CLICK",89:"DOWN",90:"UP",93:"idString[vertex]",94:"idString[class]",95:"CALLBACKNAME",96:"CALLBACKARGS",97:"HREF",98:"LINK_TARGET",99:"STR[link]",100:"STR[tooltip]",102:"DEFAULT",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"NODE_STRING",110:"UNIT",111:"BRKT",112:"PCT",114:"MINUS",115:"MULT",116:"UNICODE_TEXT",117:"TEXT",118:"TAGSTART",119:"EDGE_TEXT",121:"direction_tb",122:"direction_bt",123:"direction_rl",124:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[41,4],[76,1],[76,2],[76,1],[76,1],[72,1],[72,2],[73,3],[30,1],[30,2],[30,1],[30,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[103,1],[103,3],[92,1],[92,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[82,1],[82,1],[82,1],[82,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[79,1],[79,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[47,1],[47,2],[101,1],[101,2],[33,1],[33,1],[33,1],[33,1]],performAction:x(function(fe,le,Kt,Ft,Ve,lt,Ea){var dt=lt.length-1;switch(Ve){case 2:this.$=[];break;case 3:(!Array.isArray(lt[dt])||lt[dt].length>0)&&lt[dt-1].push(lt[dt]),this.$=lt[dt-1];break;case 4:case 183:this.$=lt[dt];break;case 11:Ft.setDirection("TB"),this.$="TB";break;case 12:Ft.setDirection(lt[dt-1]),this.$=lt[dt-1];break;case 27:this.$=lt[dt-1].nodes;break;case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 33:this.$=Ft.addSubGraph(lt[dt-6],lt[dt-1],lt[dt-4]);break;case 34:this.$=Ft.addSubGraph(lt[dt-3],lt[dt-1],lt[dt-3]);break;case 35:this.$=Ft.addSubGraph(void 0,lt[dt-1],void 0);break;case 37:this.$=lt[dt].trim(),Ft.setAccTitle(this.$);break;case 38:case 39:this.$=lt[dt].trim(),Ft.setAccDescription(this.$);break;case 43:this.$=lt[dt-1]+lt[dt];break;case 44:this.$=lt[dt];break;case 45:Ft.addVertex(lt[dt-1][lt[dt-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,lt[dt]),Ft.addLink(lt[dt-3].stmt,lt[dt-1],lt[dt-2]),this.$={stmt:lt[dt-1],nodes:lt[dt-1].concat(lt[dt-3].nodes)};break;case 46:Ft.addLink(lt[dt-2].stmt,lt[dt],lt[dt-1]),this.$={stmt:lt[dt],nodes:lt[dt].concat(lt[dt-2].nodes)};break;case 47:Ft.addLink(lt[dt-3].stmt,lt[dt-1],lt[dt-2]),this.$={stmt:lt[dt-1],nodes:lt[dt-1].concat(lt[dt-3].nodes)};break;case 48:this.$={stmt:lt[dt-1],nodes:lt[dt-1]};break;case 49:Ft.addVertex(lt[dt-1][lt[dt-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,lt[dt]),this.$={stmt:lt[dt-1],nodes:lt[dt-1],shapeData:lt[dt]};break;case 50:this.$={stmt:lt[dt],nodes:lt[dt]};break;case 51:this.$=[lt[dt]];break;case 52:Ft.addVertex(lt[dt-5][lt[dt-5].length-1],void 0,void 0,void 0,void 0,void 0,void 0,lt[dt-4]),this.$=lt[dt-5].concat(lt[dt]);break;case 53:this.$=lt[dt-4].concat(lt[dt]);break;case 54:this.$=lt[dt];break;case 55:this.$=lt[dt-2],Ft.setClass(lt[dt-2],lt[dt]);break;case 56:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"square");break;case 57:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"doublecircle");break;case 58:this.$=lt[dt-5],Ft.addVertex(lt[dt-5],lt[dt-2],"circle");break;case 59:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"ellipse");break;case 60:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"stadium");break;case 61:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"subroutine");break;case 62:this.$=lt[dt-7],Ft.addVertex(lt[dt-7],lt[dt-1],"rect",void 0,void 0,void 0,Object.fromEntries([[lt[dt-5],lt[dt-3]]]));break;case 63:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"cylinder");break;case 64:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"round");break;case 65:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"diamond");break;case 66:this.$=lt[dt-5],Ft.addVertex(lt[dt-5],lt[dt-2],"hexagon");break;case 67:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"odd");break;case 68:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"trapezoid");break;case 69:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"inv_trapezoid");break;case 70:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"lean_right");break;case 71:this.$=lt[dt-3],Ft.addVertex(lt[dt-3],lt[dt-1],"lean_left");break;case 72:this.$=lt[dt],Ft.addVertex(lt[dt]);break;case 73:lt[dt-1].text=lt[dt],this.$=lt[dt-1];break;case 74:case 75:lt[dt-2].text=lt[dt-1],this.$=lt[dt-2];break;case 76:this.$=lt[dt];break;case 77:var Or=Ft.destructLink(lt[dt],lt[dt-2]);this.$={type:Or.type,stroke:Or.stroke,length:Or.length,text:lt[dt-1]};break;case 78:var Or=Ft.destructLink(lt[dt],lt[dt-2]);this.$={type:Or.type,stroke:Or.stroke,length:Or.length,text:lt[dt-1],id:lt[dt-3]};break;case 79:this.$={text:lt[dt],type:"text"};break;case 80:this.$={text:lt[dt-1].text+""+lt[dt],type:lt[dt-1].type};break;case 81:this.$={text:lt[dt],type:"string"};break;case 82:this.$={text:lt[dt],type:"markdown"};break;case 83:var Or=Ft.destructLink(lt[dt]);this.$={type:Or.type,stroke:Or.stroke,length:Or.length};break;case 84:var Or=Ft.destructLink(lt[dt]);this.$={type:Or.type,stroke:Or.stroke,length:Or.length,id:lt[dt-1]};break;case 85:this.$=lt[dt-1];break;case 86:this.$={text:lt[dt],type:"text"};break;case 87:this.$={text:lt[dt-1].text+""+lt[dt],type:lt[dt-1].type};break;case 88:this.$={text:lt[dt],type:"string"};break;case 89:case 104:this.$={text:lt[dt],type:"markdown"};break;case 101:this.$={text:lt[dt],type:"text"};break;case 102:this.$={text:lt[dt-1].text+""+lt[dt],type:lt[dt-1].type};break;case 103:this.$={text:lt[dt],type:"text"};break;case 105:this.$=lt[dt-4],Ft.addClass(lt[dt-2],lt[dt]);break;case 106:this.$=lt[dt-4],Ft.setClass(lt[dt-2],lt[dt]);break;case 107:case 115:this.$=lt[dt-1],Ft.setClickEvent(lt[dt-1],lt[dt]);break;case 108:case 116:this.$=lt[dt-3],Ft.setClickEvent(lt[dt-3],lt[dt-2]),Ft.setTooltip(lt[dt-3],lt[dt]);break;case 109:this.$=lt[dt-2],Ft.setClickEvent(lt[dt-2],lt[dt-1],lt[dt]);break;case 110:this.$=lt[dt-4],Ft.setClickEvent(lt[dt-4],lt[dt-3],lt[dt-2]),Ft.setTooltip(lt[dt-4],lt[dt]);break;case 111:this.$=lt[dt-2],Ft.setLink(lt[dt-2],lt[dt]);break;case 112:this.$=lt[dt-4],Ft.setLink(lt[dt-4],lt[dt-2]),Ft.setTooltip(lt[dt-4],lt[dt]);break;case 113:this.$=lt[dt-4],Ft.setLink(lt[dt-4],lt[dt-2],lt[dt]);break;case 114:this.$=lt[dt-6],Ft.setLink(lt[dt-6],lt[dt-4],lt[dt]),Ft.setTooltip(lt[dt-6],lt[dt-2]);break;case 117:this.$=lt[dt-1],Ft.setLink(lt[dt-1],lt[dt]);break;case 118:this.$=lt[dt-3],Ft.setLink(lt[dt-3],lt[dt-2]),Ft.setTooltip(lt[dt-3],lt[dt]);break;case 119:this.$=lt[dt-3],Ft.setLink(lt[dt-3],lt[dt-2],lt[dt]);break;case 120:this.$=lt[dt-5],Ft.setLink(lt[dt-5],lt[dt-4],lt[dt]),Ft.setTooltip(lt[dt-5],lt[dt-2]);break;case 121:this.$=lt[dt-4],Ft.addVertex(lt[dt-2],void 0,void 0,lt[dt]);break;case 122:this.$=lt[dt-4],Ft.updateLink([lt[dt-2]],lt[dt]);break;case 123:this.$=lt[dt-4],Ft.updateLink(lt[dt-2],lt[dt]);break;case 124:this.$=lt[dt-8],Ft.updateLinkInterpolate([lt[dt-6]],lt[dt-2]),Ft.updateLink([lt[dt-6]],lt[dt]);break;case 125:this.$=lt[dt-8],Ft.updateLinkInterpolate(lt[dt-6],lt[dt-2]),Ft.updateLink(lt[dt-6],lt[dt]);break;case 126:this.$=lt[dt-6],Ft.updateLinkInterpolate([lt[dt-4]],lt[dt]);break;case 127:this.$=lt[dt-6],Ft.updateLinkInterpolate(lt[dt-4],lt[dt]);break;case 128:case 130:this.$=[lt[dt]];break;case 129:case 131:lt[dt-2].push(lt[dt]),this.$=lt[dt-2];break;case 133:this.$=lt[dt-1]+lt[dt];break;case 181:this.$=lt[dt];break;case 182:this.$=lt[dt-1]+""+lt[dt];break;case 184:this.$=lt[dt-1]+""+lt[dt];break;case 185:this.$={stmt:"dir",value:"TB"};break;case 186:this.$={stmt:"dir",value:"BT"};break;case 187:this.$={stmt:"dir",value:"RL"};break;case 188:this.$={stmt:"dir",value:"LR"};break}},"anonymous"),table:[{3:1,4:2,9:t,10:r,12:n},{1:[3]},e(i,a,{5:6}),{4:7,9:t,10:r,12:n},{4:8,9:t,10:r,12:n},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:s,9:o,10:l,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:h,33:24,34:f,36:d,38:g,42:28,43:38,44:p,45:39,47:40,60:v,84:m,85:y,86:b,87:T,88:w,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P,121:_,122:I,123:M,124:O},e(i,[2,9]),e(i,[2,10]),e(i,[2,11]),{8:[1,54],9:[1,55],10:N,15:53,18:56},e(B,[2,3]),e(B,[2,4]),e(B,[2,5]),e(B,[2,6]),e(B,[2,7]),e(B,[2,8]),{8:z,9:F,11:V,21:58,41:59,72:63,75:[1,64],77:[1,66],78:[1,65]},{8:z,9:F,11:V,21:67},{8:z,9:F,11:V,21:68},{8:z,9:F,11:V,21:69},{8:z,9:F,11:V,21:70},{8:z,9:F,11:V,21:71},{8:z,9:F,10:[1,72],11:V,21:73},e(B,[2,36]),{35:[1,74]},{37:[1,75]},e(B,[2,39]),e(G,[2,50],{18:76,39:77,10:N,40:Y}),{10:[1,79]},{10:[1,80]},{10:[1,81]},{10:[1,82]},{14:Q,44:K,60:it,80:[1,86],89:ut,95:[1,83],97:[1,84],101:85,105:q,106:W,109:H,111:U,114:X,115:J,116:j,120:87},e(B,[2,185]),e(B,[2,186]),e(B,[2,187]),e(B,[2,188]),e(gt,[2,51]),e(gt,[2,54],{46:[1,99]}),e(at,[2,72],{113:112,29:[1,100],44:p,48:[1,101],50:[1,102],52:[1,103],54:[1,104],56:[1,105],58:[1,106],60:v,63:[1,107],65:[1,108],67:[1,109],68:[1,110],70:[1,111],89:k,102:S,105:E,106:L,109:A,111:R,114:C,115:D,116:P}),e(tt,[2,181]),e(tt,[2,142]),e(tt,[2,143]),e(tt,[2,144]),e(tt,[2,145]),e(tt,[2,146]),e(tt,[2,147]),e(tt,[2,148]),e(tt,[2,149]),e(tt,[2,150]),e(tt,[2,151]),e(tt,[2,152]),e(i,[2,12]),e(i,[2,18]),e(i,[2,19]),{9:[1,113]},e(kt,[2,26],{18:114,10:N}),e(B,[2,27]),{42:115,43:38,44:p,45:39,47:40,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P},e(B,[2,40]),e(B,[2,41]),e(B,[2,42]),e(ft,[2,76],{73:116,62:[1,118],74:[1,117]}),{76:119,79:120,80:Dt,81:Ot,116:Rt,119:Tt},{75:[1,125],77:[1,126]},e(At,[2,83]),e(B,[2,28]),e(B,[2,29]),e(B,[2,30]),e(B,[2,31]),e(B,[2,32]),{10:bt,12:wt,14:Nt,27:ht,28:127,32:_t,44:Z,60:st,75:$,80:[1,129],81:[1,130],83:140,84:nt,85:rt,86:ct,87:ot,88:vt,89:yt,90:mt,91:128,105:Mt,109:Yt,111:Bt,114:zt,115:Gt,116:It},e(Vt,a,{5:153}),e(B,[2,37]),e(B,[2,38]),e(G,[2,48],{44:Zt}),e(G,[2,49],{18:155,10:N,40:jt}),e(gt,[2,44]),{44:p,47:157,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P},{102:[1,158],103:159,105:[1,160]},{44:p,47:161,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P},{44:p,47:162,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P},e(Pt,[2,107],{10:[1,163],96:[1,164]}),{80:[1,165]},e(Pt,[2,115],{120:167,10:[1,166],14:Q,44:K,60:it,89:ut,105:q,106:W,109:H,111:U,114:X,115:J,116:j}),e(Pt,[2,117],{10:[1,168]}),e(ce,[2,183]),e(ce,[2,170]),e(ce,[2,171]),e(ce,[2,172]),e(ce,[2,173]),e(ce,[2,174]),e(ce,[2,175]),e(ce,[2,176]),e(ce,[2,177]),e(ce,[2,178]),e(ce,[2,179]),e(ce,[2,180]),{44:p,47:169,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P},{30:170,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{30:178,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{30:180,50:[1,179],67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{30:181,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{30:182,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{30:183,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{109:[1,184]},{30:185,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{30:186,65:[1,187],67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{30:188,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{30:189,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{30:190,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},e(tt,[2,182]),e(i,[2,20]),e(kt,[2,25]),e(G,[2,46],{39:191,18:192,10:N,40:Y}),e(ft,[2,73],{10:[1,193]}),{10:[1,194]},{30:195,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{77:[1,196],79:197,116:Rt,119:Tt},e(Ge,[2,79]),e(Ge,[2,81]),e(Ge,[2,82]),e(Ge,[2,168]),e(Ge,[2,169]),{76:198,79:120,80:Dt,81:Ot,116:Rt,119:Tt},e(At,[2,84]),{8:z,9:F,10:bt,11:V,12:wt,14:Nt,21:200,27:ht,29:[1,199],32:_t,44:Z,60:st,75:$,83:140,84:nt,85:rt,86:ct,87:ot,88:vt,89:yt,90:mt,91:201,105:Mt,109:Yt,111:Bt,114:zt,115:Gt,116:It},e(pe,[2,101]),e(pe,[2,103]),e(pe,[2,104]),e(pe,[2,157]),e(pe,[2,158]),e(pe,[2,159]),e(pe,[2,160]),e(pe,[2,161]),e(pe,[2,162]),e(pe,[2,163]),e(pe,[2,164]),e(pe,[2,165]),e(pe,[2,166]),e(pe,[2,167]),e(pe,[2,90]),e(pe,[2,91]),e(pe,[2,92]),e(pe,[2,93]),e(pe,[2,94]),e(pe,[2,95]),e(pe,[2,96]),e(pe,[2,97]),e(pe,[2,98]),e(pe,[2,99]),e(pe,[2,100]),{6:11,7:12,8:s,9:o,10:l,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:h,32:[1,202],33:24,34:f,36:d,38:g,42:28,43:38,44:p,45:39,47:40,60:v,84:m,85:y,86:b,87:T,88:w,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P,121:_,122:I,123:M,124:O},{10:N,18:203},{44:[1,204]},e(gt,[2,43]),{10:[1,205],44:p,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:112,114:C,115:D,116:P},{10:[1,206]},{10:[1,207],106:[1,208]},e(He,[2,128]),{10:[1,209],44:p,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:112,114:C,115:D,116:P},{10:[1,210],44:p,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:112,114:C,115:D,116:P},{80:[1,211]},e(Pt,[2,109],{10:[1,212]}),e(Pt,[2,111],{10:[1,213]}),{80:[1,214]},e(ce,[2,184]),{80:[1,215],98:[1,216]},e(gt,[2,55],{113:112,44:p,60:v,89:k,102:S,105:E,106:L,109:A,111:R,114:C,115:D,116:P}),{31:[1,217],67:$t,82:218,116:Qt,117:Jt,118:ie},e(Fe,[2,86]),e(Fe,[2,88]),e(Fe,[2,89]),e(Fe,[2,153]),e(Fe,[2,154]),e(Fe,[2,155]),e(Fe,[2,156]),{49:[1,219],67:$t,82:218,116:Qt,117:Jt,118:ie},{30:220,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{51:[1,221],67:$t,82:218,116:Qt,117:Jt,118:ie},{53:[1,222],67:$t,82:218,116:Qt,117:Jt,118:ie},{55:[1,223],67:$t,82:218,116:Qt,117:Jt,118:ie},{57:[1,224],67:$t,82:218,116:Qt,117:Jt,118:ie},{60:[1,225]},{64:[1,226],67:$t,82:218,116:Qt,117:Jt,118:ie},{66:[1,227],67:$t,82:218,116:Qt,117:Jt,118:ie},{30:228,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},{31:[1,229],67:$t,82:218,116:Qt,117:Jt,118:ie},{67:$t,69:[1,230],71:[1,231],82:218,116:Qt,117:Jt,118:ie},{67:$t,69:[1,233],71:[1,232],82:218,116:Qt,117:Jt,118:ie},e(G,[2,45],{18:155,10:N,40:jt}),e(G,[2,47],{44:Zt}),e(ft,[2,75]),e(ft,[2,74]),{62:[1,234],67:$t,82:218,116:Qt,117:Jt,118:ie},e(ft,[2,77]),e(Ge,[2,80]),{77:[1,235],79:197,116:Rt,119:Tt},{30:236,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},e(Vt,a,{5:237}),e(pe,[2,102]),e(B,[2,35]),{43:238,44:p,45:39,47:40,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P},{10:N,18:239},{10:Pe,60:Le,84:_r,92:240,105:re,107:241,108:242,109:xt,110:Wt,111:oe,112:Be},{10:Pe,60:Le,84:_r,92:251,104:[1,252],105:re,107:241,108:242,109:xt,110:Wt,111:oe,112:Be},{10:Pe,60:Le,84:_r,92:253,104:[1,254],105:re,107:241,108:242,109:xt,110:Wt,111:oe,112:Be},{105:[1,255]},{10:Pe,60:Le,84:_r,92:256,105:re,107:241,108:242,109:xt,110:Wt,111:oe,112:Be},{44:p,47:257,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P},e(Pt,[2,108]),{80:[1,258]},{80:[1,259],98:[1,260]},e(Pt,[2,116]),e(Pt,[2,118],{10:[1,261]}),e(Pt,[2,119]),e(at,[2,56]),e(Fe,[2,87]),e(at,[2,57]),{51:[1,262],67:$t,82:218,116:Qt,117:Jt,118:ie},e(at,[2,64]),e(at,[2,59]),e(at,[2,60]),e(at,[2,61]),{109:[1,263]},e(at,[2,63]),e(at,[2,65]),{66:[1,264],67:$t,82:218,116:Qt,117:Jt,118:ie},e(at,[2,67]),e(at,[2,68]),e(at,[2,70]),e(at,[2,69]),e(at,[2,71]),e([10,44,60,89,102,105,106,109,111,114,115,116],[2,85]),e(ft,[2,78]),{31:[1,265],67:$t,82:218,116:Qt,117:Jt,118:ie},{6:11,7:12,8:s,9:o,10:l,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:h,32:[1,266],33:24,34:f,36:d,38:g,42:28,43:38,44:p,45:39,47:40,60:v,84:m,85:y,86:b,87:T,88:w,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P,121:_,122:I,123:M,124:O},e(gt,[2,53]),{43:267,44:p,45:39,47:40,60:v,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P},e(Pt,[2,121],{106:pr}),e(vr,[2,130],{108:269,10:Pe,60:Le,84:_r,105:re,109:xt,110:Wt,111:oe,112:Be}),e(ur,[2,132]),e(ur,[2,134]),e(ur,[2,135]),e(ur,[2,136]),e(ur,[2,137]),e(ur,[2,138]),e(ur,[2,139]),e(ur,[2,140]),e(ur,[2,141]),e(Pt,[2,122],{106:pr}),{10:[1,270]},e(Pt,[2,123],{106:pr}),{10:[1,271]},e(He,[2,129]),e(Pt,[2,105],{106:pr}),e(Pt,[2,106],{113:112,44:p,60:v,89:k,102:S,105:E,106:L,109:A,111:R,114:C,115:D,116:P}),e(Pt,[2,110]),e(Pt,[2,112],{10:[1,272]}),e(Pt,[2,113]),{98:[1,273]},{51:[1,274]},{62:[1,275]},{66:[1,276]},{8:z,9:F,11:V,21:277},e(B,[2,34]),e(gt,[2,52]),{10:Pe,60:Le,84:_r,105:re,107:278,108:242,109:xt,110:Wt,111:oe,112:Be},e(ur,[2,133]),{14:Q,44:K,60:it,89:ut,101:279,105:q,106:W,109:H,111:U,114:X,115:J,116:j,120:87},{14:Q,44:K,60:it,89:ut,101:280,105:q,106:W,109:H,111:U,114:X,115:J,116:j,120:87},{98:[1,281]},e(Pt,[2,120]),e(at,[2,58]),{30:282,67:$t,80:Ut,81:te,82:171,116:Qt,117:Jt,118:ie},e(at,[2,66]),e(Vt,a,{5:283}),e(vr,[2,131],{108:269,10:Pe,60:Le,84:_r,105:re,109:xt,110:Wt,111:oe,112:Be}),e(Pt,[2,126],{120:167,10:[1,284],14:Q,44:K,60:it,89:ut,105:q,106:W,109:H,111:U,114:X,115:J,116:j}),e(Pt,[2,127],{120:167,10:[1,285],14:Q,44:K,60:it,89:ut,105:q,106:W,109:H,111:U,114:X,115:J,116:j}),e(Pt,[2,114]),{31:[1,286],67:$t,82:218,116:Qt,117:Jt,118:ie},{6:11,7:12,8:s,9:o,10:l,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:h,32:[1,287],33:24,34:f,36:d,38:g,42:28,43:38,44:p,45:39,47:40,60:v,84:m,85:y,86:b,87:T,88:w,89:k,102:S,105:E,106:L,109:A,111:R,113:41,114:C,115:D,116:P,121:_,122:I,123:M,124:O},{10:Pe,60:Le,84:_r,92:288,105:re,107:241,108:242,109:xt,110:Wt,111:oe,112:Be},{10:Pe,60:Le,84:_r,92:289,105:re,107:241,108:242,109:xt,110:Wt,111:oe,112:Be},e(at,[2,62]),e(B,[2,33]),e(Pt,[2,124],{106:pr}),e(Pt,[2,125],{106:pr})],defaultActions:{},parseError:x(function(fe,le){if(le.recoverable)this.trace(fe);else{var Kt=new Error(fe);throw Kt.hash=le,Kt}},"parseError"),parse:x(function(fe){var le=this,Kt=[0],Ft=[],Ve=[null],lt=[],Ea=this.table,dt="",Or=0,Y_=0,jU=2,H_=1,KU=lt.slice.call(arguments,1),vn=Object.create(this.lexer),cl={yy:{}};for(var T2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,T2)&&(cl.yy[T2]=this.yy[T2]);vn.setInput(fe,cl.yy),cl.yy.lexer=vn,cl.yy.parser=this,typeof vn.yylloc>"u"&&(vn.yylloc={});var w2=vn.yylloc;lt.push(w2);var ZU=vn.options&&vn.options.ranges;typeof cl.yy.parseError=="function"?this.parseError=cl.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function QU(Vi){Kt.length=Kt.length-2*Vi,Ve.length=Ve.length-Vi,lt.length=lt.length-Vi}x(QU,"popStack");function q_(){var Vi;return Vi=Ft.pop()||vn.lex()||H_,typeof Vi!="number"&&(Vi instanceof Array&&(Ft=Vi,Vi=Ft.pop()),Vi=le.symbols_[Vi]||Vi),Vi}x(q_,"lex");for(var xi,ul,ta,E2,Bc={},Up,Ts,X_,Wp;;){if(ul=Kt[Kt.length-1],this.defaultActions[ul]?ta=this.defaultActions[ul]:((xi===null||typeof xi>"u")&&(xi=q_()),ta=Ea[ul]&&Ea[ul][xi]),typeof ta>"u"||!ta.length||!ta[0]){var k2="";Wp=[];for(Up in Ea[ul])this.terminals_[Up]&&Up>jU&&Wp.push("'"+this.terminals_[Up]+"'");vn.showPosition?k2="Parse error on line "+(Or+1)+`:
`+vn.showPosition()+`
Expecting `+Wp.join(", ")+", got '"+(this.terminals_[xi]||xi)+"'":k2="Parse error on line "+(Or+1)+": Unexpected "+(xi==H_?"end of input":"'"+(this.terminals_[xi]||xi)+"'"),this.parseError(k2,{text:vn.match,token:this.terminals_[xi]||xi,line:vn.yylineno,loc:w2,expected:Wp})}if(ta[0]instanceof Array&&ta.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ul+", token: "+xi);switch(ta[0]){case 1:Kt.push(xi),Ve.push(vn.yytext),lt.push(vn.yylloc),Kt.push(ta[1]),xi=null,Y_=vn.yyleng,dt=vn.yytext,Or=vn.yylineno,w2=vn.yylloc;break;case 2:if(Ts=this.productions_[ta[1]][1],Bc.$=Ve[Ve.length-Ts],Bc._$={first_line:lt[lt.length-(Ts||1)].first_line,last_line:lt[lt.length-1].last_line,first_column:lt[lt.length-(Ts||1)].first_column,last_column:lt[lt.length-1].last_column},ZU&&(Bc._$.range=[lt[lt.length-(Ts||1)].range[0],lt[lt.length-1].range[1]]),E2=this.performAction.apply(Bc,[dt,Y_,Or,cl.yy,ta[1],Ve,lt].concat(KU)),typeof E2<"u")return E2;Ts&&(Kt=Kt.slice(0,-1*Ts*2),Ve=Ve.slice(0,-1*Ts),lt=lt.slice(0,-1*Ts)),Kt.push(this.productions_[ta[1]][0]),Ve.push(Bc.$),lt.push(Bc._$),X_=Ea[Kt[Kt.length-2]][Kt[Kt.length-1]],Kt.push(X_);break;case 3:return!0}}return!0},"parse")},Vn=function(){var qe={EOF:1,parseError:x(function(le,Kt){if(this.yy.parser)this.yy.parser.parseError(le,Kt);else throw new Error(le)},"parseError"),setInput:x(function(fe,le){return this.yy=le||this.yy||{},this._input=fe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var fe=this._input[0];this.yytext+=fe,this.yyleng++,this.offset++,this.match+=fe,this.matched+=fe;var le=fe.match(/(?:\r\n?|\n).*/g);return le?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),fe},"input"),unput:x(function(fe){var le=fe.length,Kt=fe.split(/(?:\r\n?|\n)/g);this._input=fe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-le),this.offset-=le;var Ft=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Kt.length-1&&(this.yylineno-=Kt.length-1);var Ve=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Kt?(Kt.length===Ft.length?this.yylloc.first_column:0)+Ft[Ft.length-Kt.length].length-Kt[0].length:this.yylloc.first_column-le},this.options.ranges&&(this.yylloc.range=[Ve[0],Ve[0]+this.yyleng-le]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(fe){this.unput(this.match.slice(fe))},"less"),pastInput:x(function(){var fe=this.matched.substr(0,this.matched.length-this.match.length);return(fe.length>20?"...":"")+fe.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var fe=this.match;return fe.length<20&&(fe+=this._input.substr(0,20-fe.length)),(fe.substr(0,20)+(fe.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var fe=this.pastInput(),le=new Array(fe.length+1).join("-");return fe+this.upcomingInput()+`
`+le+"^"},"showPosition"),test_match:x(function(fe,le){var Kt,Ft,Ve;if(this.options.backtrack_lexer&&(Ve={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ve.yylloc.range=this.yylloc.range.slice(0))),Ft=fe[0].match(/(?:\r\n?|\n).*/g),Ft&&(this.yylineno+=Ft.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ft?Ft[Ft.length-1].length-Ft[Ft.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+fe[0].length},this.yytext+=fe[0],this.match+=fe[0],this.matches=fe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(fe[0].length),this.matched+=fe[0],Kt=this.performAction.call(this,this.yy,this,le,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Kt)return Kt;if(this._backtrack){for(var lt in Ve)this[lt]=Ve[lt];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var fe,le,Kt,Ft;this._more||(this.yytext="",this.match="");for(var Ve=this._currentRules(),lt=0;lt<Ve.length;lt++)if(Kt=this._input.match(this.rules[Ve[lt]]),Kt&&(!le||Kt[0].length>le[0].length)){if(le=Kt,Ft=lt,this.options.backtrack_lexer){if(fe=this.test_match(Kt,Ve[lt]),fe!==!1)return fe;if(this._backtrack){le=!1;continue}else return!1}else if(!this.options.flex)break}return le?(fe=this.test_match(le,Ve[Ft]),fe!==!1?fe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var le=this.next();return le||this.lex()},"lex"),begin:x(function(le){this.conditionStack.push(le)},"begin"),popState:x(function(){var le=this.conditionStack.length-1;return le>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(le){return le=this.conditionStack.length-1-Math.abs(le||0),le>=0?this.conditionStack[le]:"INITIAL"},"topState"),pushState:x(function(le){this.begin(le)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:x(function(le,Kt,Ft,Ve){switch(Ft){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),Kt.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:const lt=/\n\s*/g;return Kt.yytext=Kt.yytext.replace(lt,"<br/>"),40;case 11:return 40;case 12:this.popState();break;case 13:this.begin("callbackname");break;case 14:this.popState();break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 95;case 17:this.popState();break;case 18:return 96;case 19:return"MD_STR";case 20:this.popState();break;case 21:this.begin("md_string");break;case 22:return"STR";case 23:this.popState();break;case 24:this.pushState("string");break;case 25:return 84;case 26:return 102;case 27:return 85;case 28:return 104;case 29:return 86;case 30:return 87;case 31:return 97;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 88;case 35:return le.lex.firstGraph()&&this.begin("dir"),12;case 36:return le.lex.firstGraph()&&this.begin("dir"),12;case 37:return le.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:return 98;case 41:return 98;case 42:return 98;case 43:return 98;case 44:return this.popState(),13;case 45:return this.popState(),14;case 46:return this.popState(),14;case 47:return this.popState(),14;case 48:return this.popState(),14;case 49:return this.popState(),14;case 50:return this.popState(),14;case 51:return this.popState(),14;case 52:return this.popState(),14;case 53:return this.popState(),14;case 54:return this.popState(),14;case 55:return 121;case 56:return 122;case 57:return 123;case 58:return 124;case 59:return 78;case 60:return 105;case 61:return 111;case 62:return 46;case 63:return 60;case 64:return 44;case 65:return 8;case 66:return 106;case 67:return 115;case 68:return this.popState(),77;case 69:return this.pushState("edgeText"),75;case 70:return 119;case 71:return this.popState(),77;case 72:return this.pushState("thickEdgeText"),75;case 73:return 119;case 74:return this.popState(),77;case 75:return this.pushState("dottedEdgeText"),75;case 76:return 119;case 77:return 77;case 78:return this.popState(),53;case 79:return"TEXT";case 80:return this.pushState("ellipseText"),52;case 81:return this.popState(),55;case 82:return this.pushState("text"),54;case 83:return this.popState(),57;case 84:return this.pushState("text"),56;case 85:return 58;case 86:return this.pushState("text"),67;case 87:return this.popState(),64;case 88:return this.pushState("text"),63;case 89:return this.popState(),49;case 90:return this.pushState("text"),48;case 91:return this.popState(),69;case 92:return this.popState(),71;case 93:return 117;case 94:return this.pushState("trapText"),68;case 95:return this.pushState("trapText"),70;case 96:return 118;case 97:return 67;case 98:return 90;case 99:return"SEP";case 100:return 89;case 101:return 115;case 102:return 111;case 103:return 44;case 104:return 109;case 105:return 114;case 106:return 116;case 107:return this.popState(),62;case 108:return this.pushState("text"),62;case 109:return this.popState(),51;case 110:return this.pushState("text"),50;case 111:return this.popState(),31;case 112:return this.pushState("text"),29;case 113:return this.popState(),66;case 114:return this.pushState("text"),65;case 115:return"TEXT";case 116:return"QUOTE";case 117:return 9;case 118:return 10;case 119:return 11}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[^\s\"]+@(?=[^\{\"]))/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeData:{rules:[8,11,12,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackargs:{rules:[17,18,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackname:{rules:[14,15,16,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},href:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},click:{rules:[21,24,33,34,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dottedEdgeText:{rules:[21,24,74,76,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},thickEdgeText:{rules:[21,24,71,73,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},edgeText:{rules:[21,24,68,70,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},trapText:{rules:[21,24,77,80,82,84,88,90,91,92,93,94,95,108,110,112,114],inclusive:!1},ellipseText:{rules:[21,24,77,78,79,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},text:{rules:[21,24,77,80,81,82,83,84,87,88,89,90,94,95,107,108,109,110,111,112,113,114,115],inclusive:!1},vertex:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr:{rules:[3,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_title:{rules:[1,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},md_string:{rules:[19,20,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},string:{rules:[21,22,23,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,71,72,74,75,77,80,82,84,85,86,88,90,94,95,96,97,98,99,100,101,102,103,104,105,106,108,110,112,114,116,117,118,119],inclusive:!0}}};return qe}();jr.lexer=Vn;function ei(){this.yy={}}return x(ei,"Parser"),ei.prototype=jr,jr.Parser=ei,new ei}();Nw.parser=Nw;var LF=Nw,RF=Object.assign({},LF);RF.parse=e=>{const t=e.replace(/}\s*\n/g,`}
`);return LF.parse(t)};var adt=RF,sdt=x((e,t)=>{const r=Fk,n=r(e,"r"),i=r(e,"g"),a=r(e,"b");return Ao(n,i,a,t)},"fade"),odt=x(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span {
    color: ${e.titleColor};
  }
  .cluster-label span p {
    background-color: transparent;
  }

  .label text,span {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }


  .root .anchor path {
    fill: ${e.lineColor} !important;
    stroke-width: 0;
    stroke: ${e.lineColor};
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    p {
      background-color: ${e.edgeLabelBackground};
    }
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${sdt(e.edgeLabelBackground,.5)};
    // background-color:
  }

  .cluster rect {
    fill: ${e.clusterBkg};
    stroke: ${e.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }

  rect.text {
    fill: none;
    stroke-width: 0;
  }

  .icon-shape, .image-shape {
    background-color: ${e.edgeLabelBackground};
    p {
      background-color: ${e.edgeLabelBackground};
      padding: 2px;
    }
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }
`,"getStyles"),ldt=odt,cdt={parser:adt,get db(){return new edt},renderer:idt,styles:ldt,init:x(e=>{e.flowchart||(e.flowchart={}),e.layout&&FT({layout:e.layout}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,FT({flowchart:{arrowMarkerAbsolute:e.arrowMarkerAbsolute}})},"init")};const sS=Object.freeze(Object.defineProperty({__proto__:null,diagram:cdt},Symbol.toStringTag,{value:"Module"}));var Dw=function(){var e=x(function(U,X,J,j){for(J=J||{},j=U.length;j--;J[U[j]]=X);return J},"o"),t=[6,8,10,22,24,26,28,33,34,35,36,37,40,43,44,50],r=[1,10],n=[1,11],i=[1,12],a=[1,13],s=[1,20],o=[1,21],l=[1,22],u=[1,23],h=[1,24],f=[1,19],d=[1,25],g=[1,26],p=[1,18],v=[1,33],m=[1,34],y=[1,35],b=[1,36],T=[1,37],w=[6,8,10,13,15,17,20,21,22,24,26,28,33,34,35,36,37,40,43,44,50,63,64,65,66,67],k=[1,42],S=[1,43],E=[1,52],L=[40,50,68,69],A=[1,63],R=[1,61],C=[1,58],D=[1,62],P=[1,64],_=[6,8,10,13,17,22,24,26,28,33,34,35,36,37,40,41,42,43,44,48,49,50,63,64,65,66,67],I=[63,64,65,66,67],M=[1,81],O=[1,80],N=[1,78],B=[1,79],z=[6,10,42,47],F=[6,10,13,41,42,47,48,49],V=[1,89],G=[1,88],Y=[1,87],Q=[19,56],K=[1,98],it=[1,97],ut=[19,56,58,60],q={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,COLON:13,role:14,STYLE_SEPARATOR:15,idList:16,BLOCK_START:17,attributes:18,BLOCK_STOP:19,SQS:20,SQE:21,title:22,title_value:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,direction:29,classDefStatement:30,classStatement:31,styleStatement:32,direction_tb:33,direction_bt:34,direction_rl:35,direction_lr:36,CLASSDEF:37,stylesOpt:38,separator:39,UNICODE_TEXT:40,STYLE_TEXT:41,COMMA:42,CLASS:43,STYLE:44,style:45,styleComponent:46,SEMI:47,NUM:48,BRKT:49,ENTITY_NAME:50,attribute:51,attributeType:52,attributeName:53,attributeKeyTypeList:54,attributeComment:55,ATTRIBUTE_WORD:56,attributeKeyType:57,",":58,ATTRIBUTE_KEY:59,COMMENT:60,cardinality:61,relType:62,ZERO_OR_ONE:63,ZERO_OR_MORE:64,ONE_OR_MORE:65,ONLY_ONE:66,MD_PARENT:67,NON_IDENTIFYING:68,IDENTIFYING:69,WORD:70,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:"COLON",15:"STYLE_SEPARATOR",17:"BLOCK_START",19:"BLOCK_STOP",20:"SQS",21:"SQE",22:"title",23:"title_value",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"direction_tb",34:"direction_bt",35:"direction_rl",36:"direction_lr",37:"CLASSDEF",40:"UNICODE_TEXT",41:"STYLE_TEXT",42:"COMMA",43:"CLASS",44:"STYLE",47:"SEMI",48:"NUM",49:"BRKT",50:"ENTITY_NAME",56:"ATTRIBUTE_WORD",58:",",59:"ATTRIBUTE_KEY",60:"COMMENT",63:"ZERO_OR_ONE",64:"ZERO_OR_MORE",65:"ONE_OR_MORE",66:"ONLY_ONE",67:"MD_PARENT",68:"NON_IDENTIFYING",69:"IDENTIFYING",70:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,9],[9,7],[9,7],[9,4],[9,6],[9,3],[9,5],[9,1],[9,3],[9,7],[9,9],[9,6],[9,8],[9,4],[9,6],[9,2],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[29,1],[29,1],[29,1],[29,1],[30,4],[16,1],[16,1],[16,3],[16,3],[31,3],[32,4],[38,1],[38,3],[45,1],[45,2],[39,1],[39,1],[39,1],[46,1],[46,1],[46,1],[46,1],[11,1],[11,1],[18,1],[18,2],[51,2],[51,3],[51,3],[51,4],[52,1],[53,1],[54,1],[54,3],[57,1],[55,1],[12,3],[61,1],[61,1],[61,1],[61,1],[61,1],[62,1],[62,1],[14,1],[14,1],[14,1]],performAction:x(function(X,J,j,gt,at,tt,kt){var ft=tt.length-1;switch(at){case 1:break;case 2:this.$=[];break;case 3:tt[ft-1].push(tt[ft]),this.$=tt[ft-1];break;case 4:case 5:this.$=tt[ft];break;case 6:case 7:this.$=[];break;case 8:gt.addEntity(tt[ft-4]),gt.addEntity(tt[ft-2]),gt.addRelationship(tt[ft-4],tt[ft],tt[ft-2],tt[ft-3]);break;case 9:gt.addEntity(tt[ft-8]),gt.addEntity(tt[ft-4]),gt.addRelationship(tt[ft-8],tt[ft],tt[ft-4],tt[ft-5]),gt.setClass([tt[ft-8]],tt[ft-6]),gt.setClass([tt[ft-4]],tt[ft-2]);break;case 10:gt.addEntity(tt[ft-6]),gt.addEntity(tt[ft-2]),gt.addRelationship(tt[ft-6],tt[ft],tt[ft-2],tt[ft-3]),gt.setClass([tt[ft-6]],tt[ft-4]);break;case 11:gt.addEntity(tt[ft-6]),gt.addEntity(tt[ft-4]),gt.addRelationship(tt[ft-6],tt[ft],tt[ft-4],tt[ft-5]),gt.setClass([tt[ft-4]],tt[ft-2]);break;case 12:gt.addEntity(tt[ft-3]),gt.addAttributes(tt[ft-3],tt[ft-1]);break;case 13:gt.addEntity(tt[ft-5]),gt.addAttributes(tt[ft-5],tt[ft-1]),gt.setClass([tt[ft-5]],tt[ft-3]);break;case 14:gt.addEntity(tt[ft-2]);break;case 15:gt.addEntity(tt[ft-4]),gt.setClass([tt[ft-4]],tt[ft-2]);break;case 16:gt.addEntity(tt[ft]);break;case 17:gt.addEntity(tt[ft-2]),gt.setClass([tt[ft-2]],tt[ft]);break;case 18:gt.addEntity(tt[ft-6],tt[ft-4]),gt.addAttributes(tt[ft-6],tt[ft-1]);break;case 19:gt.addEntity(tt[ft-8],tt[ft-6]),gt.addAttributes(tt[ft-8],tt[ft-1]),gt.setClass([tt[ft-8]],tt[ft-3]);break;case 20:gt.addEntity(tt[ft-5],tt[ft-3]);break;case 21:gt.addEntity(tt[ft-7],tt[ft-5]),gt.setClass([tt[ft-7]],tt[ft-2]);break;case 22:gt.addEntity(tt[ft-3],tt[ft-1]);break;case 23:gt.addEntity(tt[ft-5],tt[ft-3]),gt.setClass([tt[ft-5]],tt[ft]);break;case 24:case 25:this.$=tt[ft].trim(),gt.setAccTitle(this.$);break;case 26:case 27:this.$=tt[ft].trim(),gt.setAccDescription(this.$);break;case 32:gt.setDirection("TB");break;case 33:gt.setDirection("BT");break;case 34:gt.setDirection("RL");break;case 35:gt.setDirection("LR");break;case 36:this.$=tt[ft-3],gt.addClass(tt[ft-2],tt[ft-1]);break;case 37:case 38:case 56:case 64:this.$=[tt[ft]];break;case 39:case 40:this.$=tt[ft-2].concat([tt[ft]]);break;case 41:this.$=tt[ft-2],gt.setClass(tt[ft-1],tt[ft]);break;case 42:this.$=tt[ft-3],gt.addCssStyles(tt[ft-2],tt[ft-1]);break;case 43:this.$=[tt[ft]];break;case 44:tt[ft-2].push(tt[ft]),this.$=tt[ft-2];break;case 46:this.$=tt[ft-1]+tt[ft];break;case 54:case 76:case 77:this.$=tt[ft].replace(/"/g,"");break;case 55:case 78:this.$=tt[ft];break;case 57:tt[ft].push(tt[ft-1]),this.$=tt[ft];break;case 58:this.$={type:tt[ft-1],name:tt[ft]};break;case 59:this.$={type:tt[ft-2],name:tt[ft-1],keys:tt[ft]};break;case 60:this.$={type:tt[ft-2],name:tt[ft-1],comment:tt[ft]};break;case 61:this.$={type:tt[ft-3],name:tt[ft-2],keys:tt[ft-1],comment:tt[ft]};break;case 62:case 63:case 66:this.$=tt[ft];break;case 65:tt[ft-2].push(tt[ft]),this.$=tt[ft-2];break;case 67:this.$=tt[ft].replace(/"/g,"");break;case 68:this.$={cardA:tt[ft],relType:tt[ft-1],cardB:tt[ft-2]};break;case 69:this.$=gt.Cardinality.ZERO_OR_ONE;break;case 70:this.$=gt.Cardinality.ZERO_OR_MORE;break;case 71:this.$=gt.Cardinality.ONE_OR_MORE;break;case 72:this.$=gt.Cardinality.ONLY_ONE;break;case 73:this.$=gt.Cardinality.MD_PARENT;break;case 74:this.$=gt.Identification.NON_IDENTIFYING;break;case 75:this.$=gt.Identification.IDENTIFYING;break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,22:r,24:n,26:i,28:a,29:14,30:15,31:16,32:17,33:s,34:o,35:l,36:u,37:h,40:f,43:d,44:g,50:p},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:27,11:9,22:r,24:n,26:i,28:a,29:14,30:15,31:16,32:17,33:s,34:o,35:l,36:u,37:h,40:f,43:d,44:g,50:p},e(t,[2,5]),e(t,[2,6]),e(t,[2,16],{12:28,61:32,15:[1,29],17:[1,30],20:[1,31],63:v,64:m,65:y,66:b,67:T}),{23:[1,38]},{25:[1,39]},{27:[1,40]},e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),e(t,[2,30]),e(t,[2,31]),e(w,[2,54]),e(w,[2,55]),e(t,[2,32]),e(t,[2,33]),e(t,[2,34]),e(t,[2,35]),{16:41,40:k,41:S},{16:44,40:k,41:S},{16:45,40:k,41:S},e(t,[2,4]),{11:46,40:f,50:p},{16:47,40:k,41:S},{18:48,19:[1,49],51:50,52:51,56:E},{11:53,40:f,50:p},{62:54,68:[1,55],69:[1,56]},e(L,[2,69]),e(L,[2,70]),e(L,[2,71]),e(L,[2,72]),e(L,[2,73]),e(t,[2,24]),e(t,[2,25]),e(t,[2,26]),{13:A,38:57,41:R,42:C,45:59,46:60,48:D,49:P},e(_,[2,37]),e(_,[2,38]),{16:65,40:k,41:S,42:C},{13:A,38:66,41:R,42:C,45:59,46:60,48:D,49:P},{13:[1,67],15:[1,68]},e(t,[2,17],{61:32,12:69,17:[1,70],42:C,63:v,64:m,65:y,66:b,67:T}),{19:[1,71]},e(t,[2,14]),{18:72,19:[2,56],51:50,52:51,56:E},{53:73,56:[1,74]},{56:[2,62]},{21:[1,75]},{61:76,63:v,64:m,65:y,66:b,67:T},e(I,[2,74]),e(I,[2,75]),{6:M,10:O,39:77,42:N,47:B},{40:[1,82],41:[1,83]},e(z,[2,43],{46:84,13:A,41:R,48:D,49:P}),e(F,[2,45]),e(F,[2,50]),e(F,[2,51]),e(F,[2,52]),e(F,[2,53]),e(t,[2,41],{42:C}),{6:M,10:O,39:85,42:N,47:B},{14:86,40:V,50:G,70:Y},{16:90,40:k,41:S},{11:91,40:f,50:p},{18:92,19:[1,93],51:50,52:51,56:E},e(t,[2,12]),{19:[2,57]},e(Q,[2,58],{54:94,55:95,57:96,59:K,60:it}),e([19,56,59,60],[2,63]),e(t,[2,22],{15:[1,100],17:[1,99]}),e([40,50],[2,68]),e(t,[2,36]),{13:A,41:R,45:101,46:60,48:D,49:P},e(t,[2,47]),e(t,[2,48]),e(t,[2,49]),e(_,[2,39]),e(_,[2,40]),e(F,[2,46]),e(t,[2,42]),e(t,[2,8]),e(t,[2,76]),e(t,[2,77]),e(t,[2,78]),{13:[1,102],42:C},{13:[1,104],15:[1,103]},{19:[1,105]},e(t,[2,15]),e(Q,[2,59],{55:106,58:[1,107],60:it}),e(Q,[2,60]),e(ut,[2,64]),e(Q,[2,67]),e(ut,[2,66]),{18:108,19:[1,109],51:50,52:51,56:E},{16:110,40:k,41:S},e(z,[2,44],{46:84,13:A,41:R,48:D,49:P}),{14:111,40:V,50:G,70:Y},{16:112,40:k,41:S},{14:113,40:V,50:G,70:Y},e(t,[2,13]),e(Q,[2,61]),{57:114,59:K},{19:[1,115]},e(t,[2,20]),e(t,[2,23],{17:[1,116],42:C}),e(t,[2,11]),{13:[1,117],42:C},e(t,[2,10]),e(ut,[2,65]),e(t,[2,18]),{18:118,19:[1,119],51:50,52:51,56:E},{14:120,40:V,50:G,70:Y},{19:[1,121]},e(t,[2,21]),e(t,[2,9]),e(t,[2,19])],defaultActions:{52:[2,62],72:[2,57]},parseError:x(function(X,J){if(J.recoverable)this.trace(X);else{var j=new Error(X);throw j.hash=J,j}},"parseError"),parse:x(function(X){var J=this,j=[0],gt=[],at=[null],tt=[],kt=this.table,ft="",Dt=0,Ot=0,Rt=2,Tt=1,At=tt.slice.call(arguments,1),bt=Object.create(this.lexer),wt={yy:{}};for(var Nt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Nt)&&(wt.yy[Nt]=this.yy[Nt]);bt.setInput(X,wt.yy),wt.yy.lexer=bt,wt.yy.parser=this,typeof bt.yylloc>"u"&&(bt.yylloc={});var ht=bt.yylloc;tt.push(ht);var _t=bt.options&&bt.options.ranges;typeof wt.yy.parseError=="function"?this.parseError=wt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Z(Bt){j.length=j.length-2*Bt,at.length=at.length-Bt,tt.length=tt.length-Bt}x(Z,"popStack");function st(){var Bt;return Bt=gt.pop()||bt.lex()||Tt,typeof Bt!="number"&&(Bt instanceof Array&&(gt=Bt,Bt=gt.pop()),Bt=J.symbols_[Bt]||Bt),Bt}x(st,"lex");for(var $,nt,rt,ct,ot={},vt,yt,mt,Mt;;){if(nt=j[j.length-1],this.defaultActions[nt]?rt=this.defaultActions[nt]:(($===null||typeof $>"u")&&($=st()),rt=kt[nt]&&kt[nt][$]),typeof rt>"u"||!rt.length||!rt[0]){var Yt="";Mt=[];for(vt in kt[nt])this.terminals_[vt]&&vt>Rt&&Mt.push("'"+this.terminals_[vt]+"'");bt.showPosition?Yt="Parse error on line "+(Dt+1)+`:
`+bt.showPosition()+`
Expecting `+Mt.join(", ")+", got '"+(this.terminals_[$]||$)+"'":Yt="Parse error on line "+(Dt+1)+": Unexpected "+($==Tt?"end of input":"'"+(this.terminals_[$]||$)+"'"),this.parseError(Yt,{text:bt.match,token:this.terminals_[$]||$,line:bt.yylineno,loc:ht,expected:Mt})}if(rt[0]instanceof Array&&rt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+nt+", token: "+$);switch(rt[0]){case 1:j.push($),at.push(bt.yytext),tt.push(bt.yylloc),j.push(rt[1]),$=null,Ot=bt.yyleng,ft=bt.yytext,Dt=bt.yylineno,ht=bt.yylloc;break;case 2:if(yt=this.productions_[rt[1]][1],ot.$=at[at.length-yt],ot._$={first_line:tt[tt.length-(yt||1)].first_line,last_line:tt[tt.length-1].last_line,first_column:tt[tt.length-(yt||1)].first_column,last_column:tt[tt.length-1].last_column},_t&&(ot._$.range=[tt[tt.length-(yt||1)].range[0],tt[tt.length-1].range[1]]),ct=this.performAction.apply(ot,[ft,Ot,Dt,wt.yy,rt[1],at,tt].concat(At)),typeof ct<"u")return ct;yt&&(j=j.slice(0,-1*yt*2),at=at.slice(0,-1*yt),tt=tt.slice(0,-1*yt)),j.push(this.productions_[rt[1]][0]),at.push(ot.$),tt.push(ot._$),mt=kt[j[j.length-2]][j[j.length-1]],j.push(mt);break;case 3:return!0}}return!0},"parse")},W=function(){var U={EOF:1,parseError:x(function(J,j){if(this.yy.parser)this.yy.parser.parseError(J,j);else throw new Error(J)},"parseError"),setInput:x(function(X,J){return this.yy=J||this.yy||{},this._input=X,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var X=this._input[0];this.yytext+=X,this.yyleng++,this.offset++,this.match+=X,this.matched+=X;var J=X.match(/(?:\r\n?|\n).*/g);return J?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),X},"input"),unput:x(function(X){var J=X.length,j=X.split(/(?:\r\n?|\n)/g);this._input=X+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-J),this.offset-=J;var gt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),j.length-1&&(this.yylineno-=j.length-1);var at=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:j?(j.length===gt.length?this.yylloc.first_column:0)+gt[gt.length-j.length].length-j[0].length:this.yylloc.first_column-J},this.options.ranges&&(this.yylloc.range=[at[0],at[0]+this.yyleng-J]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(X){this.unput(this.match.slice(X))},"less"),pastInput:x(function(){var X=this.matched.substr(0,this.matched.length-this.match.length);return(X.length>20?"...":"")+X.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var X=this.match;return X.length<20&&(X+=this._input.substr(0,20-X.length)),(X.substr(0,20)+(X.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var X=this.pastInput(),J=new Array(X.length+1).join("-");return X+this.upcomingInput()+`
`+J+"^"},"showPosition"),test_match:x(function(X,J){var j,gt,at;if(this.options.backtrack_lexer&&(at={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(at.yylloc.range=this.yylloc.range.slice(0))),gt=X[0].match(/(?:\r\n?|\n).*/g),gt&&(this.yylineno+=gt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:gt?gt[gt.length-1].length-gt[gt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+X[0].length},this.yytext+=X[0],this.match+=X[0],this.matches=X,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(X[0].length),this.matched+=X[0],j=this.performAction.call(this,this.yy,this,J,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),j)return j;if(this._backtrack){for(var tt in at)this[tt]=at[tt];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var X,J,j,gt;this._more||(this.yytext="",this.match="");for(var at=this._currentRules(),tt=0;tt<at.length;tt++)if(j=this._input.match(this.rules[at[tt]]),j&&(!J||j[0].length>J[0].length)){if(J=j,gt=tt,this.options.backtrack_lexer){if(X=this.test_match(j,at[tt]),X!==!1)return X;if(this._backtrack){J=!1;continue}else return!1}else if(!this.options.flex)break}return J?(X=this.test_match(J,at[gt]),X!==!1?X:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var J=this.next();return J||this.lex()},"lex"),begin:x(function(J){this.conditionStack.push(J)},"begin"),popState:x(function(){var J=this.conditionStack.length-1;return J>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(J){return J=this.conditionStack.length-1-Math.abs(J||0),J>=0?this.conditionStack[J]:"INITIAL"},"topState"),pushState:x(function(J){this.begin(J)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(J,j,gt,at){switch(gt){case 0:return this.begin("acc_title"),24;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),26;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 33;case 8:return 34;case 9:return 35;case 10:return 36;case 11:return 10;case 12:break;case 13:return 8;case 14:return 50;case 15:return 70;case 16:return 4;case 17:return this.begin("block"),17;case 18:return 49;case 19:return 49;case 20:return 42;case 21:return 15;case 22:return 13;case 23:break;case 24:return 59;case 25:return 56;case 26:return 56;case 27:return 60;case 28:break;case 29:return this.popState(),19;case 30:return j.yytext[0];case 31:return 20;case 32:return 21;case 33:return this.begin("style"),44;case 34:return this.popState(),10;case 35:break;case 36:return 13;case 37:return 42;case 38:return 49;case 39:return this.begin("style"),37;case 40:return 43;case 41:return 63;case 42:return 65;case 43:return 65;case 44:return 65;case 45:return 63;case 46:return 63;case 47:return 64;case 48:return 64;case 49:return 64;case 50:return 64;case 51:return 64;case 52:return 65;case 53:return 64;case 54:return 65;case 55:return 66;case 56:return 66;case 57:return 66;case 58:return 66;case 59:return 63;case 60:return 64;case 61:return 65;case 62:return 67;case 63:return 68;case 64:return 69;case 65:return 69;case 66:return 68;case 67:return 68;case 68:return 68;case 69:return 41;case 70:return 47;case 71:return 40;case 72:return 48;case 73:return j.yytext[0];case 74:return 6}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:#)/i,/^(?:#)/i,/^(?:,)/i,/^(?::::)/i,/^(?::)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:([^\s]*)[~].*[~]([^\s]*))/i,/^(?:([\*A-Za-z_\u00C0-\uFFFF][A-Za-z0-9\-\_\[\]\(\)\u00C0-\uFFFF\*]*))/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:style\b)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?::)/i,/^(?:,)/i,/^(?:#)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:;)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:[0-9])/i,/^(?:.)/i,/^(?:$)/i],conditions:{style:{rules:[34,35,36,37,38,69,70],inclusive:!1},acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[23,24,25,26,27,28,29,30],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,32,33,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,71,72,73,74],inclusive:!0}}};return U}();q.lexer=W;function H(){this.yy={}}return x(H,"Parser"),H.prototype=q,q.Parser=H,new H}();Dw.parser=Dw;var udt=Dw,Ou,hdt=(Ou=class{constructor(){this.entities=new Map,this.relationships=[],this.classes=new Map,this.direction="TB",this.Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},this.Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},this.setAccTitle=cn,this.getAccTitle=wn,this.setAccDescription=En,this.getAccDescription=kn,this.setDiagramTitle=Fn,this.getDiagramTitle=gn,this.getConfig=x(()=>pt().er,"getConfig"),this.clear(),this.addEntity=this.addEntity.bind(this),this.addAttributes=this.addAttributes.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setDirection=this.setDirection.bind(this),this.addCssStyles=this.addCssStyles.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}addEntity(t,r=""){var n;return this.entities.has(t)?!((n=this.entities.get(t))!=null&&n.alias)&&r&&(this.entities.get(t).alias=r,et.info(`Add alias '${r}' to entity '${t}'`)):(this.entities.set(t,{id:`entity-${t}-${this.entities.size}`,label:t,attributes:[],alias:r,shape:"erBox",look:pt().look??"default",cssClasses:"default",cssStyles:[]}),et.info("Added new entity :",t)),this.entities.get(t)}getEntity(t){return this.entities.get(t)}getEntities(){return this.entities}getClasses(){return this.classes}addAttributes(t,r){const n=this.addEntity(t);let i;for(i=r.length-1;i>=0;i--)r[i].keys||(r[i].keys=[]),r[i].comment||(r[i].comment=""),n.attributes.push(r[i]),et.debug("Added attribute ",r[i].name)}addRelationship(t,r,n,i){const a=this.entities.get(t),s=this.entities.get(n);if(!a||!s)return;const o={entityA:a.id,roleA:r,entityB:s.id,relSpec:i};this.relationships.push(o),et.debug("Added new relationship :",o)}getRelationships(){return this.relationships}getDirection(){return this.direction}setDirection(t){this.direction=t}getCompiledStyles(t){let r=[];for(const n of t){const i=this.classes.get(n);i!=null&&i.styles&&(r=[...r,...i.styles??[]].map(a=>a.trim())),i!=null&&i.textStyles&&(r=[...r,...i.textStyles??[]].map(a=>a.trim()))}return r}addCssStyles(t,r){for(const n of t){const i=this.entities.get(n);if(!r||!i)return;for(const a of r)i.cssStyles.push(a)}}addClass(t,r){t.forEach(n=>{let i=this.classes.get(n);i===void 0&&(i={id:n,styles:[],textStyles:[]},this.classes.set(n,i)),r&&r.forEach(function(a){if(/color/.exec(a)){const s=a.replace("fill","bgFill");i.textStyles.push(s)}i.styles.push(a)})})}setClass(t,r){for(const n of t){const i=this.entities.get(n);if(i)for(const a of r)i.cssClasses+=" "+a}}clear(){this.entities=new Map,this.classes=new Map,this.relationships=[],dn()}getData(){const t=[],r=[],n=pt();for(const a of this.entities.keys()){const s=this.entities.get(a);s&&(s.cssCompiledStyles=this.getCompiledStyles(s.cssClasses.split(" ")),t.push(s))}let i=0;for(const a of this.relationships){const s={id:Kd(a.entityA,a.entityB,{prefix:"id",counter:i++}),type:"normal",curve:"basis",start:a.entityA,end:a.entityB,label:a.roleA,labelpos:"c",thickness:"normal",classes:"relationshipLine",arrowTypeStart:a.relSpec.cardB.toLowerCase(),arrowTypeEnd:a.relSpec.cardA.toLowerCase(),pattern:a.relSpec.relType=="IDENTIFYING"?"solid":"dashed",look:n.look};r.push(s)}return{nodes:t,edges:r,other:{},config:n,direction:"TB"}}},x(Ou,"ErDB"),Ou),IF={};Jm(IF,{draw:()=>fdt});var fdt=x(async function(e,t,r,n){et.info("REF0:"),et.info("Drawing er diagram (unified)",t);const{securityLevel:i,er:a,layout:s}=pt(),o=n.db.getData(),l=yp(t,i);o.type=n.type,o.layoutAlgorithm=by(s),o.config.flowchart.nodeSpacing=(a==null?void 0:a.nodeSpacing)||140,o.config.flowchart.rankSpacing=(a==null?void 0:a.rankSpacing)||80,o.direction=n.db.getDirection(),o.markers=["only_one","zero_or_one","one_or_more","zero_or_more"],o.diagramId=t,await dp(o,l),o.layoutAlgorithm==="elk"&&l.select(".edges").lower();const u=l.selectAll('[id*="-background"]');Array.from(u).length>0&&u.each(function(){const f=qt(this),g=f.attr("id").replace("-background",""),p=l.select(`#${CSS.escape(g)}`);if(!p.empty()){const v=p.attr("transform");f.attr("transform",v)}});const h=8;De.insertTitle(l,"erDiagramTitleText",(a==null?void 0:a.titleTopMargin)??25,n.db.getDiagramTitle()),xp(l,h,"erDiagram",(a==null?void 0:a.useMaxWidth)??!0)},"draw"),ddt=x((e,t)=>{const r=Fk,n=r(e,"r"),i=r(e,"g"),a=r(e,"b");return Ao(n,i,a,t)},"fade"),gdt=x(e=>`
  .entityBox {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${e.tertiaryColor};
    opacity: 0.7;
    background-color: ${e.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

  .labelBkg {
    background-color: ${ddt(e.tertiaryColor,.5)};
  }

  .edgeLabel .label {
    fill: ${e.nodeBorder};
    font-size: 14px;
  }

  .label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }

  .edge-pattern-dashed {
    stroke-dasharray: 8,8;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon
  {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .relationshipLine {
    stroke: ${e.lineColor};
    stroke-width: 1;
    fill: none;
  }

  .marker {
    fill: none !important;
    stroke: ${e.lineColor} !important;
    stroke-width: 1;
  }
`,"getStyles"),pdt=gdt,vdt={parser:udt,get db(){return new hdt},renderer:IF,styles:pdt};const mdt=Object.freeze(Object.defineProperty({__proto__:null,diagram:vdt},Symbol.toStringTag,{value:"Module"}));function af(e,t){var r,n,i;e.accDescr&&((r=t.setAccDescription)==null||r.call(t,e.accDescr)),e.accTitle&&((n=t.setAccTitle)==null||n.call(t,e.accTitle)),e.title&&((i=t.setDiagramTitle)==null||i.call(t,e.title))}x(af,"populateCommonDb");var Pu,oS=(Pu=class{constructor(t){this.init=t,this.records=this.init()}reset(){this.records=this.init()}},x(Pu,"ImperativeState"),Pu);function Xn(e){return typeof e=="object"&&e!==null&&typeof e.$type=="string"}function ns(e){return typeof e=="object"&&e!==null&&typeof e.$refText=="string"}function ydt(e){return typeof e=="object"&&e!==null&&typeof e.name=="string"&&typeof e.type=="string"&&typeof e.path=="string"}function l1(e){return typeof e=="object"&&e!==null&&Xn(e.container)&&ns(e.reference)&&typeof e.message=="string"}class NF{constructor(){this.subtypes={},this.allSubtypes={}}isInstance(t,r){return Xn(t)&&this.isSubtype(t.$type,r)}isSubtype(t,r){if(t===r)return!0;let n=this.subtypes[t];n||(n=this.subtypes[t]={});const i=n[r];if(i!==void 0)return i;{const a=this.computeIsSubtype(t,r);return n[r]=a,a}}getAllSubTypes(t){const r=this.allSubtypes[t];if(r)return r;{const n=this.getAllTypes(),i=[];for(const a of n)this.isSubtype(a,t)&&i.push(a);return this.allSubtypes[t]=i,i}}}function Lg(e){return typeof e=="object"&&e!==null&&Array.isArray(e.content)}function DF(e){return typeof e=="object"&&e!==null&&typeof e.tokenType=="object"}function MF(e){return Lg(e)&&typeof e.fullText=="string"}class In{constructor(t,r){this.startFn=t,this.nextFn=r}iterator(){const t={state:this.startFn(),next:()=>this.nextFn(t.state),[Symbol.iterator]:()=>t};return t}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){const t=this.iterator();let r=0,n=t.next();for(;!n.done;)r++,n=t.next();return r}toArray(){const t=[],r=this.iterator();let n;do n=r.next(),n.value!==void 0&&t.push(n.value);while(!n.done);return t}toSet(){return new Set(this)}toMap(t,r){const n=this.map(i=>[t?t(i):i,r?r(i):i]);return new Map(n)}toString(){return this.join()}concat(t){return new In(()=>({first:this.startFn(),firstDone:!1,iterator:t[Symbol.iterator]()}),r=>{let n;if(!r.firstDone){do if(n=this.nextFn(r.first),!n.done)return n;while(!n.done);r.firstDone=!0}do if(n=r.iterator.next(),!n.done)return n;while(!n.done);return Ui})}join(t=","){const r=this.iterator();let n="",i,a=!1;do i=r.next(),i.done||(a&&(n+=t),n+=xdt(i.value)),a=!0;while(!i.done);return n}indexOf(t,r=0){const n=this.iterator();let i=0,a=n.next();for(;!a.done;){if(i>=r&&a.value===t)return i;a=n.next(),i++}return-1}every(t){const r=this.iterator();let n=r.next();for(;!n.done;){if(!t(n.value))return!1;n=r.next()}return!0}some(t){const r=this.iterator();let n=r.next();for(;!n.done;){if(t(n.value))return!0;n=r.next()}return!1}forEach(t){const r=this.iterator();let n=0,i=r.next();for(;!i.done;)t(i.value,n),i=r.next(),n++}map(t){return new In(this.startFn,r=>{const{done:n,value:i}=this.nextFn(r);return n?Ui:{done:!1,value:t(i)}})}filter(t){return new In(this.startFn,r=>{let n;do if(n=this.nextFn(r),!n.done&&t(n.value))return n;while(!n.done);return Ui})}nonNullable(){return this.filter(t=>t!=null)}reduce(t,r){const n=this.iterator();let i=r,a=n.next();for(;!a.done;)i===void 0?i=a.value:i=t(i,a.value),a=n.next();return i}reduceRight(t,r){return this.recursiveReduce(this.iterator(),t,r)}recursiveReduce(t,r,n){const i=t.next();if(i.done)return n;const a=this.recursiveReduce(t,r,n);return a===void 0?i.value:r(a,i.value)}find(t){const r=this.iterator();let n=r.next();for(;!n.done;){if(t(n.value))return n.value;n=r.next()}}findIndex(t){const r=this.iterator();let n=0,i=r.next();for(;!i.done;){if(t(i.value))return n;i=r.next(),n++}return-1}includes(t){const r=this.iterator();let n=r.next();for(;!n.done;){if(n.value===t)return!0;n=r.next()}return!1}flatMap(t){return new In(()=>({this:this.startFn()}),r=>{do{if(r.iterator){const a=r.iterator.next();if(a.done)r.iterator=void 0;else return a}const{done:n,value:i}=this.nextFn(r.this);if(!n){const a=t(i);if(Yv(a))r.iterator=a[Symbol.iterator]();else return{done:!1,value:a}}}while(r.iterator);return Ui})}flat(t){if(t===void 0&&(t=1),t<=0)return this;const r=t>1?this.flat(t-1):this;return new In(()=>({this:r.startFn()}),n=>{do{if(n.iterator){const s=n.iterator.next();if(s.done)n.iterator=void 0;else return s}const{done:i,value:a}=r.nextFn(n.this);if(!i)if(Yv(a))n.iterator=a[Symbol.iterator]();else return{done:!1,value:a}}while(n.iterator);return Ui})}head(){const r=this.iterator().next();if(!r.done)return r.value}tail(t=1){return new In(()=>{const r=this.startFn();for(let n=0;n<t;n++)if(this.nextFn(r).done)return r;return r},this.nextFn)}limit(t){return new In(()=>({size:0,state:this.startFn()}),r=>(r.size++,r.size>t?Ui:this.nextFn(r.state)))}distinct(t){return new In(()=>({set:new Set,internalState:this.startFn()}),r=>{let n;do if(n=this.nextFn(r.internalState),!n.done){const i=t?t(n.value):n.value;if(!r.set.has(i))return r.set.add(i),n}while(!n.done);return Ui})}exclude(t,r){const n=new Set;for(const i of t){const a=r?r(i):i;n.add(a)}return this.filter(i=>{const a=r?r(i):i;return!n.has(a)})}}function xdt(e){return typeof e=="string"?e:typeof e>"u"?"undefined":typeof e.toString=="function"?e.toString():Object.prototype.toString.call(e)}function Yv(e){return!!e&&typeof e[Symbol.iterator]=="function"}const bdt=new In(()=>{},()=>Ui),Ui=Object.freeze({done:!0,value:void 0});function Nn(...e){if(e.length===1){const t=e[0];if(t instanceof In)return t;if(Yv(t))return new In(()=>t[Symbol.iterator](),r=>r.next());if(typeof t.length=="number")return new In(()=>({index:0}),r=>r.index<t.length?{done:!1,value:t[r.index++]}:Ui)}return e.length>1?new In(()=>({collIndex:0,arrIndex:0}),t=>{do{if(t.iterator){const r=t.iterator.next();if(!r.done)return r;t.iterator=void 0}if(t.array){if(t.arrIndex<t.array.length)return{done:!1,value:t.array[t.arrIndex++]};t.array=void 0,t.arrIndex=0}if(t.collIndex<e.length){const r=e[t.collIndex++];Yv(r)?t.iterator=r[Symbol.iterator]():r&&typeof r.length=="number"&&(t.array=r)}}while(t.iterator||t.array||t.collIndex<e.length);return Ui}):bdt}class lS extends In{constructor(t,r,n){super(()=>({iterators:n!=null&&n.includeRoot?[[t][Symbol.iterator]()]:[r(t)[Symbol.iterator]()],pruned:!1}),i=>{for(i.pruned&&(i.iterators.pop(),i.pruned=!1);i.iterators.length>0;){const s=i.iterators[i.iterators.length-1].next();if(s.done)i.iterators.pop();else return i.iterators.push(r(s.value)[Symbol.iterator]()),s}return Ui})}iterator(){const t={state:this.startFn(),next:()=>this.nextFn(t.state),prune:()=>{t.state.pruned=!0},[Symbol.iterator]:()=>t};return t}}var Mw;(function(e){function t(a){return a.reduce((s,o)=>s+o,0)}e.sum=t;function r(a){return a.reduce((s,o)=>s*o,0)}e.product=r;function n(a){return a.reduce((s,o)=>Math.min(s,o))}e.min=n;function i(a){return a.reduce((s,o)=>Math.max(s,o))}e.max=i})(Mw||(Mw={}));function Ow(e){return new lS(e,t=>Lg(t)?t.content:[],{includeRoot:!0})}function Tdt(e,t){for(;e.container;)if(e=e.container,e===t)return!0;return!1}function Pw(e){return{start:{character:e.startColumn-1,line:e.startLine-1},end:{character:e.endColumn,line:e.endLine-1}}}function Hv(e){if(!e)return;const{offset:t,end:r,range:n}=e;return{range:n,offset:t,end:r,length:r-t}}var Ns;(function(e){e[e.Before=0]="Before",e[e.After=1]="After",e[e.OverlapFront=2]="OverlapFront",e[e.OverlapBack=3]="OverlapBack",e[e.Inside=4]="Inside",e[e.Outside=5]="Outside"})(Ns||(Ns={}));function wdt(e,t){if(e.end.line<t.start.line||e.end.line===t.start.line&&e.end.character<=t.start.character)return Ns.Before;if(e.start.line>t.end.line||e.start.line===t.end.line&&e.start.character>=t.end.character)return Ns.After;const r=e.start.line>t.start.line||e.start.line===t.start.line&&e.start.character>=t.start.character,n=e.end.line<t.end.line||e.end.line===t.end.line&&e.end.character<=t.end.character;return r&&n?Ns.Inside:r?Ns.OverlapBack:n?Ns.OverlapFront:Ns.Outside}function Edt(e,t){return wdt(e,t)>Ns.After}const kdt=/^[\w\p{L}]$/u;function Cdt(e,t){if(e){const r=Sdt(e,!0);if(r&&R4(r,t))return r;if(MF(e)){const n=e.content.findIndex(i=>!i.hidden);for(let i=n-1;i>=0;i--){const a=e.content[i];if(R4(a,t))return a}}}}function R4(e,t){return DF(e)&&t.includes(e.tokenType.name)}function Sdt(e,t=!0){for(;e.container;){const r=e.container;let n=r.content.indexOf(e);for(;n>0;){n--;const i=r.content[n];if(t||!i.hidden)return i}e=r}}class OF extends Error{constructor(t,r){super(t?`${r} at ${t.range.start.line}:${t.range.start.character}`:r)}}function bp(e){throw new Error("Error! The input value was not handled.")}const s0="AbstractRule",o0="AbstractType",ux="Condition",I4="TypeDefinition",hx="ValueLiteral",td="AbstractElement";function _dt(e){return cr.isInstance(e,td)}const l0="ArrayLiteral",c0="ArrayType",ed="BooleanLiteral";function Adt(e){return cr.isInstance(e,ed)}const rd="Conjunction";function Ldt(e){return cr.isInstance(e,rd)}const nd="Disjunction";function Rdt(e){return cr.isInstance(e,nd)}const u0="Grammar",fx="GrammarImport",id="InferredType";function PF(e){return cr.isInstance(e,id)}const ad="Interface";function BF(e){return cr.isInstance(e,ad)}const dx="NamedArgument",sd="Negation";function Idt(e){return cr.isInstance(e,sd)}const h0="NumberLiteral",f0="Parameter",od="ParameterReference";function Ndt(e){return cr.isInstance(e,od)}const ld="ParserRule";function Ta(e){return cr.isInstance(e,ld)}const d0="ReferenceType",c1="ReturnType";function Ddt(e){return cr.isInstance(e,c1)}const cd="SimpleType";function Mdt(e){return cr.isInstance(e,cd)}const g0="StringLiteral",Qc="TerminalRule";function Cc(e){return cr.isInstance(e,Qc)}const ud="Type";function FF(e){return cr.isInstance(e,ud)}const gx="TypeAttribute",p0="UnionType",hd="Action";function Dy(e){return cr.isInstance(e,hd)}const fd="Alternatives";function $F(e){return cr.isInstance(e,fd)}const dd="Assignment";function rc(e){return cr.isInstance(e,dd)}const gd="CharacterRange";function Odt(e){return cr.isInstance(e,gd)}const pd="CrossReference";function cS(e){return cr.isInstance(e,pd)}const vd="EndOfFile";function Pdt(e){return cr.isInstance(e,vd)}const md="Group";function uS(e){return cr.isInstance(e,md)}const yd="Keyword";function nc(e){return cr.isInstance(e,yd)}const xd="NegatedToken";function Bdt(e){return cr.isInstance(e,xd)}const bd="RegexToken";function Fdt(e){return cr.isInstance(e,bd)}const Td="RuleCall";function ic(e){return cr.isInstance(e,Td)}const wd="TerminalAlternatives";function $dt(e){return cr.isInstance(e,wd)}const Ed="TerminalGroup";function zdt(e){return cr.isInstance(e,Ed)}const kd="TerminalRuleCall";function Vdt(e){return cr.isInstance(e,kd)}const Cd="UnorderedGroup";function zF(e){return cr.isInstance(e,Cd)}const Sd="UntilToken";function Gdt(e){return cr.isInstance(e,Sd)}const _d="Wildcard";function Udt(e){return cr.isInstance(e,_d)}class VF extends NF{getAllTypes(){return[td,s0,o0,hd,fd,l0,c0,dd,ed,gd,ux,rd,pd,nd,vd,u0,fx,md,id,ad,yd,dx,xd,sd,h0,f0,od,ld,d0,bd,c1,Td,cd,g0,wd,Ed,Qc,kd,ud,gx,I4,p0,Cd,Sd,hx,_d]}computeIsSubtype(t,r){switch(t){case hd:case fd:case dd:case gd:case pd:case vd:case md:case yd:case xd:case bd:case Td:case wd:case Ed:case kd:case Cd:case Sd:case _d:return this.isSubtype(td,r);case l0:case h0:case g0:return this.isSubtype(hx,r);case c0:case d0:case cd:case p0:return this.isSubtype(I4,r);case ed:return this.isSubtype(ux,r)||this.isSubtype(hx,r);case rd:case nd:case sd:case od:return this.isSubtype(ux,r);case id:case ad:case ud:return this.isSubtype(o0,r);case ld:return this.isSubtype(s0,r)||this.isSubtype(o0,r);case Qc:return this.isSubtype(s0,r);default:return!1}}getReferenceType(t){const r=`${t.container.$type}:${t.property}`;switch(r){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return o0;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return s0;case"Grammar:usedGrammars":return u0;case"NamedArgument:parameter":case"ParameterReference:parameter":return f0;case"TerminalRuleCall:rule":return Qc;default:throw new Error(`${r} is not a valid reference id.`)}}getTypeMetaData(t){switch(t){case td:return{name:td,properties:[{name:"cardinality"},{name:"lookahead"}]};case l0:return{name:l0,properties:[{name:"elements",defaultValue:[]}]};case c0:return{name:c0,properties:[{name:"elementType"}]};case ed:return{name:ed,properties:[{name:"true",defaultValue:!1}]};case rd:return{name:rd,properties:[{name:"left"},{name:"right"}]};case nd:return{name:nd,properties:[{name:"left"},{name:"right"}]};case u0:return{name:u0,properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case fx:return{name:fx,properties:[{name:"path"}]};case id:return{name:id,properties:[{name:"name"}]};case ad:return{name:ad,properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case dx:return{name:dx,properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case sd:return{name:sd,properties:[{name:"value"}]};case h0:return{name:h0,properties:[{name:"value"}]};case f0:return{name:f0,properties:[{name:"name"}]};case od:return{name:od,properties:[{name:"parameter"}]};case ld:return{name:ld,properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case d0:return{name:d0,properties:[{name:"referenceType"}]};case c1:return{name:c1,properties:[{name:"name"}]};case cd:return{name:cd,properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case g0:return{name:g0,properties:[{name:"value"}]};case Qc:return{name:Qc,properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case ud:return{name:ud,properties:[{name:"name"},{name:"type"}]};case gx:return{name:gx,properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case p0:return{name:p0,properties:[{name:"types",defaultValue:[]}]};case hd:return{name:hd,properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case fd:return{name:fd,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case dd:return{name:dd,properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case gd:return{name:gd,properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case pd:return{name:pd,properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case vd:return{name:vd,properties:[{name:"cardinality"},{name:"lookahead"}]};case md:return{name:md,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case yd:return{name:yd,properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case xd:return{name:xd,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case bd:return{name:bd,properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case Td:return{name:Td,properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case wd:return{name:wd,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case Ed:return{name:Ed,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case kd:return{name:kd,properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case Cd:return{name:Cd,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case Sd:return{name:Sd,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case _d:return{name:_d,properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:t,properties:[]}}}}const cr=new VF;function Wdt(e){for(const[t,r]of Object.entries(e))t.startsWith("$")||(Array.isArray(r)?r.forEach((n,i)=>{Xn(n)&&(n.$container=e,n.$containerProperty=t,n.$containerIndex=i)}):Xn(r)&&(r.$container=e,r.$containerProperty=t))}function My(e,t){let r=e;for(;r;){if(t(r))return r;r=r.$container}}function $o(e){const r=Bw(e).$document;if(!r)throw new Error("AST node has no document.");return r}function Bw(e){for(;e.$container;)e=e.$container;return e}function hS(e,t){if(!e)throw new Error("Node must be an AstNode.");const r=t==null?void 0:t.range;return new In(()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0}),n=>{for(;n.keyIndex<n.keys.length;){const i=n.keys[n.keyIndex];if(!i.startsWith("$")){const a=e[i];if(Xn(a)){if(n.keyIndex++,N4(a,r))return{done:!1,value:a}}else if(Array.isArray(a)){for(;n.arrayIndex<a.length;){const s=n.arrayIndex++,o=a[s];if(Xn(o)&&N4(o,r))return{done:!1,value:o}}n.arrayIndex=0}}n.keyIndex++}return Ui})}function Tp(e,t){if(!e)throw new Error("Root node must be an AstNode.");return new lS(e,r=>hS(r,t))}function vu(e,t){if(!e)throw new Error("Root node must be an AstNode.");return new lS(e,r=>hS(r,t),{includeRoot:!0})}function N4(e,t){var r;if(!t)return!0;const n=(r=e.$cstNode)===null||r===void 0?void 0:r.range;return n?Edt(n,t):!1}function GF(e){return new In(()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0}),t=>{for(;t.keyIndex<t.keys.length;){const r=t.keys[t.keyIndex];if(!r.startsWith("$")){const n=e[r];if(ns(n))return t.keyIndex++,{done:!1,value:{reference:n,container:e,property:r}};if(Array.isArray(n)){for(;t.arrayIndex<n.length;){const i=t.arrayIndex++,a=n[i];if(ns(a))return{done:!1,value:{reference:a,container:e,property:r,index:i}}}t.arrayIndex=0}}t.keyIndex++}return Ui})}function Ydt(e,t){const r=e.getTypeMetaData(t.$type),n=t;for(const i of r.properties)i.defaultValue!==void 0&&n[i.name]===void 0&&(n[i.name]=UF(i.defaultValue))}function UF(e){return Array.isArray(e)?[...e.map(UF)]:e}function Re(e){return e.charCodeAt(0)}function px(e,t){Array.isArray(e)?e.forEach(function(r){t.push(r)}):t.push(e)}function Pf(e,t){if(e[t]===!0)throw"duplicate flag "+t;e[t],e[t]=!0}function zc(e){if(e===void 0)throw Error("Internal Error - Should never get here!");return!0}function Hdt(){throw Error("Internal Error - Should never get here!")}function D4(e){return e.type==="Character"}const qv=[];for(let e=Re("0");e<=Re("9");e++)qv.push(e);const Xv=[Re("_")].concat(qv);for(let e=Re("a");e<=Re("z");e++)Xv.push(e);for(let e=Re("A");e<=Re("Z");e++)Xv.push(e);const M4=[Re(" "),Re("\f"),Re(`
`),Re("\r"),Re("	"),Re("\v"),Re("	"),Re(" "),Re(" "),Re(" "),Re(" "),Re(" "),Re(" "),Re(" "),Re(" "),Re(" "),Re(" "),Re(" "),Re(" "),Re(" "),Re("\u2028"),Re("\u2029"),Re(" "),Re(" "),Re("　"),Re("\uFEFF")],qdt=/[0-9a-fA-F]/,v0=/[0-9]/,Xdt=/[1-9]/;class WF{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx}pattern(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");const r=this.disjunction();this.consumeChar("/");const n={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Pf(n,"global");break;case"i":Pf(n,"ignoreCase");break;case"m":Pf(n,"multiLine");break;case"u":Pf(n,"unicode");break;case"y":Pf(n,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:r,loc:this.loc(0)}}disjunction(){const t=[],r=this.idx;for(t.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(r)}}alternative(){const t=[],r=this.idx;for(;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let r;switch(this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead";break}zc(r);const n=this.disjunction();return this.consumeChar(")"),{type:r,value:n,loc:this.loc(t)}}return Hdt()}quantifier(t=!1){let r;const n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:i,atMost:i};break;case",":let a;this.isDigit()?(a=this.integerIncludingZero(),r={atLeast:i,atMost:a}):r={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(t===!0&&r===void 0)return;zc(r);break}if(!(t===!0&&r===void 0)&&zc(r))return this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(n),r}atom(){let t;const r=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group();break}if(t===void 0&&this.isPatternCharacter()&&(t=this.patternCharacter()),zc(t))return t.loc=this.loc(r),this.isQuantifier()&&(t.quantifier=this.quantifier()),t}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[Re(`
`),Re("\r"),Re("\u2028"),Re("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let t,r=!1;switch(this.popChar()){case"d":t=qv;break;case"D":t=qv,r=!0;break;case"s":t=M4;break;case"S":t=M4,r=!0;break;case"w":t=Xv;break;case"W":t=Xv,r=!0;break}if(zc(t))return{type:"Set",value:t,complement:r}}controlEscapeAtom(){let t;switch(this.popChar()){case"f":t=Re("\f");break;case"n":t=Re(`
`);break;case"r":t=Re("\r");break;case"t":t=Re("	");break;case"v":t=Re("\v");break}if(zc(t))return{type:"Character",value:t}}controlLetterEscapeAtom(){this.consumeChar("c");const t=this.popChar();if(/[a-zA-Z]/.test(t)===!1)throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:Re("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const t=this.popChar();return{type:"Character",value:Re(t)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const t=this.popChar();return{type:"Character",value:Re(t)}}}characterClass(){const t=[];let r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){const n=this.classAtom();if(n.type,D4(n)&&this.isRangeDash()){this.consumeChar("-");const i=this.classAtom();if(i.type,D4(i)){if(i.value<n.value)throw Error("Range out of order in character class");t.push({from:n.value,to:i.value})}else px(n.value,t),t.push(Re("-")),px(i.value,t)}else px(n.value,t)}return this.consumeChar("]"),{type:"Set",complement:r,value:t}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:Re("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let t=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),t=!1;break;default:this.groupIdx++;break}const r=this.disjunction();this.consumeChar(")");const n={type:"Group",capturing:t,value:r};return t&&(n.idx=this.groupIdx),n}positiveInteger(){let t=this.popChar();if(Xdt.test(t)===!1)throw Error("Expecting a positive integer");for(;v0.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}integerIncludingZero(){let t=this.popChar();if(v0.test(t)===!1)throw Error("Expecting an integer");for(;v0.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}patternCharacter(){const t=this.popChar();switch(t){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:Re(t)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return v0.test(this.peekChar(0))}isClassAtom(t=0){switch(this.peekChar(t)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const t=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(t){let r="";for(let i=0;i<t;i++){const a=this.popChar();if(qdt.test(a)===!1)throw Error("Expecting a HexDecimal digits");r+=a}return{type:"Character",value:parseInt(r,16)}}peekChar(t=0){return this.input[this.idx+t]}popChar(){const t=this.peekChar(0);return this.consumeChar(void 0),t}consumeChar(t){if(t!==void 0&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(t){return{begin:t,end:this.idx}}}class Oy{visitChildren(t){for(const r in t){const n=t[r];t.hasOwnProperty(r)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach(i=>{this.visit(i)},this))}}visit(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t);break}this.visitChildren(t)}visitPattern(t){}visitFlags(t){}visitDisjunction(t){}visitAlternative(t){}visitStartAnchor(t){}visitEndAnchor(t){}visitWordBoundary(t){}visitNonWordBoundary(t){}visitLookahead(t){}visitNegativeLookahead(t){}visitCharacter(t){}visitSet(t){}visitGroup(t){}visitGroupBackReference(t){}visitQuantifier(t){}}const jdt=/\r?\n/gm,Kdt=new WF;class Zdt extends Oy{constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(t){this.multiline=!1,this.regex=t,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(t){t.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(t){const r=String.fromCharCode(t.value);if(!this.multiline&&r===`
`&&(this.multiline=!0),t.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const n=Py(r);this.endRegexpStack.push(n),this.isStarting&&(this.startRegexp+=n)}}visitSet(t){if(!this.multiline){const r=this.regex.substring(t.loc.begin,t.loc.end),n=new RegExp(r);this.multiline=!!`
`.match(n)}if(t.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const r=this.regex.substring(t.loc.begin,t.loc.end);this.endRegexpStack.push(r),this.isStarting&&(this.startRegexp+=r)}}visitChildren(t){t.type==="Group"&&t.quantifier||super.visitChildren(t)}}const vx=new Zdt;function Qdt(e){try{return typeof e=="string"&&(e=new RegExp(e)),e=e.toString(),vx.reset(e),vx.visit(Kdt.pattern(e)),vx.multiline}catch{return!1}}const Jdt=`\f
\r	\v              \u2028\u2029  　\uFEFF`.split("");function Fw(e){const t=typeof e=="string"?new RegExp(e):e;return Jdt.some(r=>t.test(r))}function Py(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function tgt(e){return Array.prototype.map.call(e,t=>/\w/.test(t)?`[${t.toLowerCase()}${t.toUpperCase()}]`:Py(t)).join("")}function egt(e,t){const r=rgt(e),n=t.match(r);return!!n&&n[0].length>0}function rgt(e){typeof e=="string"&&(e=new RegExp(e));const t=e,r=e.source;let n=0;function i(){let a="",s;function o(u){a+=r.substr(n,u),n+=u}function l(u){a+="(?:"+r.substr(n,u)+"|$)",n+=u}for(;n<r.length;)switch(r[n]){case"\\":switch(r[n+1]){case"c":l(3);break;case"x":l(4);break;case"u":t.unicode?r[n+2]==="{"?l(r.indexOf("}",n)-n+1):l(6):l(2);break;case"p":case"P":t.unicode?l(r.indexOf("}",n)-n+1):l(2);break;case"k":l(r.indexOf(">",n)-n+1);break;default:l(2);break}break;case"[":s=/\[(?:\\.|.)*?\]/g,s.lastIndex=n,s=s.exec(r)||[],l(s[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":o(1);break;case"{":s=/\{\d+,?\d*\}/g,s.lastIndex=n,s=s.exec(r),s?o(s[0].length):l(1);break;case"(":if(r[n+1]==="?")switch(r[n+2]){case":":a+="(?:",n+=3,a+=i()+"|$)";break;case"=":a+="(?=",n+=3,a+=i()+")";break;case"!":s=n,n+=3,i(),a+=r.substr(s,n-s);break;case"<":switch(r[n+3]){case"=":case"!":s=n,n+=4,i(),a+=r.substr(s,n-s);break;default:o(r.indexOf(">",n)-n+1),a+=i()+"|$)";break}break}else o(1),a+=i()+"|$)";break;case")":return++n,a;default:l(1);break}return a}return new RegExp(i(),e.flags)}function ngt(e){return e.rules.find(t=>Ta(t)&&t.entry)}function igt(e){return e.rules.filter(t=>Cc(t)&&t.hidden)}function YF(e,t){const r=new Set,n=ngt(e);if(!n)return new Set(e.rules);const i=[n].concat(igt(e));for(const s of i)HF(s,r,t);const a=new Set;for(const s of e.rules)(r.has(s.name)||Cc(s)&&s.hidden)&&a.add(s);return a}function HF(e,t,r){t.add(e.name),Tp(e).forEach(n=>{if(ic(n)||r){const i=n.rule.ref;i&&!t.has(i.name)&&HF(i,t,r)}})}function agt(e){if(e.terminal)return e.terminal;if(e.type.ref){const t=XF(e.type.ref);return t==null?void 0:t.terminal}}function sgt(e){return e.hidden&&!Fw(pS(e))}function ogt(e,t){return!e||!t?[]:fS(e,t,e.astNode,!0)}function qF(e,t,r){if(!e||!t)return;const n=fS(e,t,e.astNode,!0);if(n.length!==0)return r!==void 0?r=Math.max(0,Math.min(r,n.length-1)):r=0,n[r]}function fS(e,t,r,n){if(!n){const i=My(e.grammarSource,rc);if(i&&i.feature===t)return[e]}return Lg(e)&&e.astNode===r?e.content.flatMap(i=>fS(i,t,r,!1)):[]}function lgt(e,t,r){if(!e)return;const n=cgt(e,t,e==null?void 0:e.astNode);if(n.length!==0)return r!==void 0?r=Math.max(0,Math.min(r,n.length-1)):r=0,n[r]}function cgt(e,t,r){if(e.astNode!==r)return[];if(nc(e.grammarSource)&&e.grammarSource.value===t)return[e];const n=Ow(e).iterator();let i;const a=[];do if(i=n.next(),!i.done){const s=i.value;s.astNode===r?nc(s.grammarSource)&&s.grammarSource.value===t&&a.push(s):n.prune()}while(!i.done);return a}function ugt(e){var t;const r=e.astNode;for(;r===((t=e.container)===null||t===void 0?void 0:t.astNode);){const n=My(e.grammarSource,rc);if(n)return n;e=e.container}}function XF(e){let t=e;return PF(t)&&(Dy(t.$container)?t=t.$container.$container:Ta(t.$container)?t=t.$container:bp(t.$container)),jF(e,t,new Map)}function jF(e,t,r){var n;function i(a,s){let o;return My(a,rc)||(o=jF(s,s,r)),r.set(e,o),o}if(r.has(e))return r.get(e);r.set(e,void 0);for(const a of Tp(t)){if(rc(a)&&a.feature.toLowerCase()==="name")return r.set(e,a),a;if(ic(a)&&Ta(a.rule.ref))return i(a,a.rule.ref);if(Mdt(a)&&(!((n=a.typeRef)===null||n===void 0)&&n.ref))return i(a,a.typeRef.ref)}}function KF(e){return ZF(e,new Set)}function ZF(e,t){if(t.has(e))return!0;t.add(e);for(const r of Tp(e))if(ic(r)){if(!r.rule.ref||Ta(r.rule.ref)&&!ZF(r.rule.ref,t))return!1}else{if(rc(r))return!1;if(Dy(r))return!1}return!!e.definition}function dS(e){if(e.inferredType)return e.inferredType.name;if(e.dataType)return e.dataType;if(e.returnType){const t=e.returnType.ref;if(t){if(Ta(t))return t.name;if(BF(t)||FF(t))return t.name}}}function gS(e){var t;if(Ta(e))return KF(e)?e.name:(t=dS(e))!==null&&t!==void 0?t:e.name;if(BF(e)||FF(e)||Ddt(e))return e.name;if(Dy(e)){const r=hgt(e);if(r)return r}else if(PF(e))return e.name;throw new Error("Cannot get name of Unknown Type")}function hgt(e){var t;if(e.inferredType)return e.inferredType.name;if(!((t=e.type)===null||t===void 0)&&t.ref)return gS(e.type.ref)}function fgt(e){var t,r,n;return Cc(e)?(r=(t=e.type)===null||t===void 0?void 0:t.name)!==null&&r!==void 0?r:"string":(n=dS(e))!==null&&n!==void 0?n:e.name}function pS(e){const t={s:!1,i:!1,u:!1},r=sf(e.definition,t),n=Object.entries(t).filter(([,i])=>i).map(([i])=>i).join("");return new RegExp(r,n)}const vS=/[\s\S]/.source;function sf(e,t){if($dt(e))return dgt(e);if(zdt(e))return ggt(e);if(Odt(e))return mgt(e);if(Vdt(e)){const r=e.rule.ref;if(!r)throw new Error("Missing rule reference.");return Xs(sf(r.definition),{cardinality:e.cardinality,lookahead:e.lookahead})}else{if(Bdt(e))return vgt(e);if(Gdt(e))return pgt(e);if(Fdt(e)){const r=e.regex.lastIndexOf("/"),n=e.regex.substring(1,r),i=e.regex.substring(r+1);return t&&(t.i=i.includes("i"),t.s=i.includes("s"),t.u=i.includes("u")),Xs(n,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}else{if(Udt(e))return Xs(vS,{cardinality:e.cardinality,lookahead:e.lookahead});throw new Error(`Invalid terminal element: ${e==null?void 0:e.$type}`)}}}function dgt(e){return Xs(e.elements.map(t=>sf(t)).join("|"),{cardinality:e.cardinality,lookahead:e.lookahead})}function ggt(e){return Xs(e.elements.map(t=>sf(t)).join(""),{cardinality:e.cardinality,lookahead:e.lookahead})}function pgt(e){return Xs(`${vS}*?${sf(e.terminal)}`,{cardinality:e.cardinality,lookahead:e.lookahead})}function vgt(e){return Xs(`(?!${sf(e.terminal)})${vS}*?`,{cardinality:e.cardinality,lookahead:e.lookahead})}function mgt(e){return e.right?Xs(`[${mx(e.left)}-${mx(e.right)}]`,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1}):Xs(mx(e.left),{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}function mx(e){return Py(e.value)}function Xs(e,t){var r;return(t.wrap!==!1||t.lookahead)&&(e=`(${(r=t.lookahead)!==null&&r!==void 0?r:""}${e})`),t.cardinality?`${e}${t.cardinality}`:e}function ygt(e){const t=[],r=e.Grammar;for(const n of r.rules)Cc(n)&&sgt(n)&&Qdt(pS(n))&&t.push(n.name);return{multilineCommentRules:t,nameRegexp:kdt}}function $w(e){console&&console.error&&console.error(`Error: ${e}`)}function QF(e){console&&console.warn&&console.warn(`Warning: ${e}`)}function JF(e){const t=new Date().getTime(),r=e();return{time:new Date().getTime()-t,value:r}}function t9(e){function t(){}t.prototype=e;const r=new t;function n(){return typeof r.bar}return n(),n(),e}function xgt(e){return bgt(e)?e.LABEL:e.name}function bgt(e){return Ii(e.LABEL)&&e.LABEL!==""}class ms{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){this._definition=t}accept(t){t.visit(this),St(this.definition,r=>{r.accept(t)})}}class pi extends ms{constructor(t){super([]),this.idx=1,Ki(this,Ua(t,r=>r!==void 0))}set definition(t){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(t){t.visit(this)}}class of extends ms{constructor(t){super(t.definition),this.orgText="",Ki(this,Ua(t,r=>r!==void 0))}}class Ni extends ms{constructor(t){super(t.definition),this.ignoreAmbiguities=!1,Ki(this,Ua(t,r=>r!==void 0))}}let On=class extends ms{constructor(t){super(t.definition),this.idx=1,Ki(this,Ua(t,r=>r!==void 0))}};class Zi extends ms{constructor(t){super(t.definition),this.idx=1,Ki(this,Ua(t,r=>r!==void 0))}}class Qi extends ms{constructor(t){super(t.definition),this.idx=1,Ki(this,Ua(t,r=>r!==void 0))}}class Pr extends ms{constructor(t){super(t.definition),this.idx=1,Ki(this,Ua(t,r=>r!==void 0))}}class $i extends ms{constructor(t){super(t.definition),this.idx=1,Ki(this,Ua(t,r=>r!==void 0))}}class zi extends ms{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){super(t.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Ki(this,Ua(t,r=>r!==void 0))}}class Sr{constructor(t){this.idx=1,Ki(this,Ua(t,r=>r!==void 0))}accept(t){t.visit(this)}}function Tgt(e){return ee(e,u1)}function u1(e){function t(r){return ee(r,u1)}if(e instanceof pi){const r={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return Ii(e.label)&&(r.label=e.label),r}else{if(e instanceof Ni)return{type:"Alternative",definition:t(e.definition)};if(e instanceof On)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof Zi)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof Qi)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:u1(new Sr({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof $i)return{type:"RepetitionWithSeparator",idx:e.idx,separator:u1(new Sr({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof Pr)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof zi)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof Sr){const r={type:"Terminal",name:e.terminalType.name,label:xgt(e.terminalType),idx:e.idx};Ii(e.label)&&(r.terminalLabel=e.label);const n=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(r.pattern=eo(n)?n.source:n),r}else{if(e instanceof of)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}}}class lf{visit(t){const r=t;switch(r.constructor){case pi:return this.visitNonTerminal(r);case Ni:return this.visitAlternative(r);case On:return this.visitOption(r);case Zi:return this.visitRepetitionMandatory(r);case Qi:return this.visitRepetitionMandatoryWithSeparator(r);case $i:return this.visitRepetitionWithSeparator(r);case Pr:return this.visitRepetition(r);case zi:return this.visitAlternation(r);case Sr:return this.visitTerminal(r);case of:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(t){}visitAlternative(t){}visitOption(t){}visitRepetition(t){}visitRepetitionMandatory(t){}visitRepetitionMandatoryWithSeparator(t){}visitRepetitionWithSeparator(t){}visitAlternation(t){}visitTerminal(t){}visitRule(t){}}function wgt(e){return e instanceof Ni||e instanceof On||e instanceof Pr||e instanceof Zi||e instanceof Qi||e instanceof $i||e instanceof Sr||e instanceof of}function jv(e,t=[]){return e instanceof On||e instanceof Pr||e instanceof $i?!0:e instanceof zi?QB(e.definition,n=>jv(n,t)):e instanceof pi&&mi(t,e)?!1:e instanceof ms?(e instanceof pi&&t.push(e),Da(e.definition,n=>jv(n,t))):!1}function Egt(e){return e instanceof zi}function ts(e){if(e instanceof pi)return"SUBRULE";if(e instanceof On)return"OPTION";if(e instanceof zi)return"OR";if(e instanceof Zi)return"AT_LEAST_ONE";if(e instanceof Qi)return"AT_LEAST_ONE_SEP";if(e instanceof $i)return"MANY_SEP";if(e instanceof Pr)return"MANY";if(e instanceof Sr)return"CONSUME";throw Error("non exhaustive match")}class By{walk(t,r=[]){St(t.definition,(n,i)=>{const a=Ln(t.definition,i+1);if(n instanceof pi)this.walkProdRef(n,a,r);else if(n instanceof Sr)this.walkTerminal(n,a,r);else if(n instanceof Ni)this.walkFlat(n,a,r);else if(n instanceof On)this.walkOption(n,a,r);else if(n instanceof Zi)this.walkAtLeastOne(n,a,r);else if(n instanceof Qi)this.walkAtLeastOneSep(n,a,r);else if(n instanceof $i)this.walkManySep(n,a,r);else if(n instanceof Pr)this.walkMany(n,a,r);else if(n instanceof zi)this.walkOr(n,a,r);else throw Error("non exhaustive match")})}walkTerminal(t,r,n){}walkProdRef(t,r,n){}walkFlat(t,r,n){const i=r.concat(n);this.walk(t,i)}walkOption(t,r,n){const i=r.concat(n);this.walk(t,i)}walkAtLeastOne(t,r,n){const i=[new On({definition:t.definition})].concat(r,n);this.walk(t,i)}walkAtLeastOneSep(t,r,n){const i=O4(t,r,n);this.walk(t,i)}walkMany(t,r,n){const i=[new On({definition:t.definition})].concat(r,n);this.walk(t,i)}walkManySep(t,r,n){const i=O4(t,r,n);this.walk(t,i)}walkOr(t,r,n){const i=r.concat(n);St(t.definition,a=>{const s=new Ni({definition:[a]});this.walk(s,i)})}}function O4(e,t,r){return[new On({definition:[new Sr({terminalType:e.separator})].concat(e.definition)})].concat(t,r)}function wp(e){if(e instanceof pi)return wp(e.referencedRule);if(e instanceof Sr)return Sgt(e);if(wgt(e))return kgt(e);if(Egt(e))return Cgt(e);throw Error("non exhaustive match")}function kgt(e){let t=[];const r=e.definition;let n=0,i=r.length>n,a,s=!0;for(;i&&s;)a=r[n],s=jv(a),t=t.concat(wp(a)),n=n+1,i=r.length>n;return KC(t)}function Cgt(e){const t=ee(e.definition,r=>wp(r));return KC(yn(t))}function Sgt(e){return[e.terminalType]}const e9="_~IN~_";class _gt extends By{constructor(t){super(),this.topProd=t,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(t,r,n){}walkProdRef(t,r,n){const i=Lgt(t.referencedRule,t.idx)+this.topProd.name,a=r.concat(n),s=new Ni({definition:a}),o=wp(s);this.follows[i]=o}}function Agt(e){const t={};return St(e,r=>{const n=new _gt(r).startWalking();Ki(t,n)}),t}function Lgt(e,t){return e.name+t+e9}let h1={};const Rgt=new WF;function Fy(e){const t=e.toString();if(h1.hasOwnProperty(t))return h1[t];{const r=Rgt.pattern(t);return h1[t]=r,r}}function Igt(){h1={}}const r9="Complement Sets are not supported for first char optimization",Kv=`Unable to use "first char" lexer optimizations:
`;function Ngt(e,t=!1){try{const r=Fy(e);return zw(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===r9)t&&QF(`${Kv}	Unable to optimize: < ${e.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";t&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),$w(`${Kv}
	Failed parsing: < ${e.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function zw(e,t,r){switch(e.type){case"Disjunction":for(let i=0;i<e.value.length;i++)zw(e.value[i],t,r);break;case"Alternative":const n=e.value;for(let i=0;i<n.length;i++){const a=n[i];switch(a.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const s=a;switch(s.type){case"Character":m0(s.value,t,r);break;case"Set":if(s.complement===!0)throw Error(r9);St(s.value,l=>{if(typeof l=="number")m0(l,t,r);else{const u=l;if(r===!0)for(let h=u.from;h<=u.to;h++)m0(h,t,r);else{for(let h=u.from;h<=u.to&&h<Ld;h++)m0(h,t,r);if(u.to>=Ld){const h=u.from>=Ld?u.from:Ld,f=u.to,d=zo(h),g=zo(f);for(let p=d;p<=g;p++)t[p]=p}}}});break;case"Group":zw(s.value,t,r);break;default:throw Error("Non Exhaustive Match")}const o=s.quantifier!==void 0&&s.quantifier.atLeast===0;if(s.type==="Group"&&Vw(s)===!1||s.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return yr(t)}function m0(e,t,r){const n=zo(e);t[n]=n,r===!0&&Dgt(e,t)}function Dgt(e,t){const r=String.fromCharCode(e),n=r.toUpperCase();if(n!==r){const i=zo(n.charCodeAt(0));t[i]=i}else{const i=r.toLowerCase();if(i!==r){const a=zo(i.charCodeAt(0));t[a]=a}}}function P4(e,t){return to(e.value,r=>{if(typeof r=="number")return mi(t,r);{const n=r;return to(t,i=>n.from<=i&&i<=n.to)!==void 0}})}function Vw(e){const t=e.quantifier;return t&&t.atLeast===0?!0:e.value?We(e.value)?Da(e.value,Vw):Vw(e.value):!1}class Mgt extends Oy{constructor(t){super(),this.targetCharCodes=t,this.found=!1}visitChildren(t){if(this.found!==!0){switch(t.type){case"Lookahead":this.visitLookahead(t);return;case"NegativeLookahead":this.visitNegativeLookahead(t);return}super.visitChildren(t)}}visitCharacter(t){mi(this.targetCharCodes,t.value)&&(this.found=!0)}visitSet(t){t.complement?P4(t,this.targetCharCodes)===void 0&&(this.found=!0):P4(t,this.targetCharCodes)!==void 0&&(this.found=!0)}}function mS(e,t){if(t instanceof RegExp){const r=Fy(t),n=new Mgt(e);return n.visit(r),n.found}else return to(t,r=>mi(e,r.charCodeAt(0)))!==void 0}const ac="PATTERN",Ad="defaultMode",y0="modes";let n9=typeof new RegExp("(?:)").sticky=="boolean";function Ogt(e,t){t=_y(t,{useSticky:n9,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(b,T)=>T()});const r=t.tracer;r("initCharCodeToOptimizedIndexMap",()=>{ipt()});let n;r("Reject Lexer.NA",()=>{n=Ry(e,b=>b[ac]===Ai.NA)});let i=!1,a;r("Transform Patterns",()=>{i=!1,a=ee(n,b=>{const T=b[ac];if(eo(T)){const w=T.source;return w.length===1&&w!=="^"&&w!=="$"&&w!=="."&&!T.ignoreCase?w:w.length===2&&w[0]==="\\"&&!mi(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],w[1])?w[1]:t.useSticky?F4(T):B4(T)}else{if(ma(T))return i=!0,{exec:T};if(typeof T=="object")return i=!0,T;if(typeof T=="string"){if(T.length===1)return T;{const w=T.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),k=new RegExp(w);return t.useSticky?F4(k):B4(k)}}else throw Error("non exhaustive match")}})});let s,o,l,u,h;r("misc mapping",()=>{s=ee(n,b=>b.tokenTypeIdx),o=ee(n,b=>{const T=b.GROUP;if(T!==Ai.SKIPPED){if(Ii(T))return T;if(sr(T))return!1;throw Error("non exhaustive match")}}),l=ee(n,b=>{const T=b.LONGER_ALT;if(T)return We(T)?ee(T,k=>f4(n,k)):[f4(n,T)]}),u=ee(n,b=>b.PUSH_MODE),h=ee(n,b=>ke(b,"POP_MODE"))});let f;r("Line Terminator Handling",()=>{const b=s9(t.lineTerminatorCharacters);f=ee(n,T=>!1),t.positionTracking!=="onlyOffset"&&(f=ee(n,T=>ke(T,"LINE_BREAKS")?!!T.LINE_BREAKS:a9(T,b)===!1&&mS(b,T.PATTERN)))});let d,g,p,v;r("Misc Mapping #2",()=>{d=ee(n,i9),g=ee(a,ept),p=Xr(n,(b,T)=>{const w=T.GROUP;return Ii(w)&&w!==Ai.SKIPPED&&(b[w]=[]),b},{}),v=ee(a,(b,T)=>({pattern:a[T],longerAlt:l[T],canLineTerminator:f[T],isCustom:d[T],short:g[T],group:o[T],push:u[T],pop:h[T],tokenTypeIdx:s[T],tokenType:n[T]}))});let m=!0,y=[];return t.safeMode||r("First Char Optimization",()=>{y=Xr(n,(b,T,w)=>{if(typeof T.PATTERN=="string"){const k=T.PATTERN.charCodeAt(0),S=zo(k);yx(b,S,v[w])}else if(We(T.START_CHARS_HINT)){let k;St(T.START_CHARS_HINT,S=>{const E=typeof S=="string"?S.charCodeAt(0):S,L=zo(E);k!==L&&(k=L,yx(b,L,v[w]))})}else if(eo(T.PATTERN))if(T.PATTERN.unicode)m=!1,t.ensureOptimizations&&$w(`${Kv}	Unable to analyze < ${T.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const k=Ngt(T.PATTERN,t.ensureOptimizations);rr(k)&&(m=!1),St(k,S=>{yx(b,S,v[w])})}else t.ensureOptimizations&&$w(`${Kv}	TokenType: <${T.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),m=!1;return b},[])}),{emptyGroups:p,patternIdxToConfig:v,charCodeToPatternIdxToConfig:y,hasCustom:i,canBeOptimized:m}}function Pgt(e,t){let r=[];const n=Fgt(e);r=r.concat(n.errors);const i=$gt(n.valid),a=i.valid;return r=r.concat(i.errors),r=r.concat(Bgt(a)),r=r.concat(qgt(a)),r=r.concat(Xgt(a,t)),r=r.concat(jgt(a)),r}function Bgt(e){let t=[];const r=Fr(e,n=>eo(n[ac]));return t=t.concat(Vgt(r)),t=t.concat(Wgt(r)),t=t.concat(Ygt(r)),t=t.concat(Hgt(r)),t=t.concat(Ggt(r)),t}function Fgt(e){const t=Fr(e,i=>!ke(i,ac)),r=ee(t,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:Br.MISSING_PATTERN,tokenTypes:[i]})),n=Ay(e,t);return{errors:r,valid:n}}function $gt(e){const t=Fr(e,i=>{const a=i[ac];return!eo(a)&&!ma(a)&&!ke(a,"exec")&&!Ii(a)}),r=ee(t,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Br.INVALID_PATTERN,tokenTypes:[i]})),n=Ay(e,t);return{errors:r,valid:n}}const zgt=/[^\\][$]/;function Vgt(e){class t extends Oy{constructor(){super(...arguments),this.found=!1}visitEndAnchor(a){this.found=!0}}const r=Fr(e,i=>{const a=i.PATTERN;try{const s=Fy(a),o=new t;return o.visit(s),o.found}catch{return zgt.test(a.source)}});return ee(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Br.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Ggt(e){const t=Fr(e,n=>n.PATTERN.test(""));return ee(t,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' must not match an empty string",type:Br.EMPTY_MATCH_PATTERN,tokenTypes:[n]}))}const Ugt=/[^\\[][\^]|^\^/;function Wgt(e){class t extends Oy{constructor(){super(...arguments),this.found=!1}visitStartAnchor(a){this.found=!0}}const r=Fr(e,i=>{const a=i.PATTERN;try{const s=Fy(a),o=new t;return o.visit(s),o.found}catch{return Ugt.test(a.source)}});return ee(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Br.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Ygt(e){const t=Fr(e,n=>{const i=n[ac];return i instanceof RegExp&&(i.multiline||i.global)});return ee(t,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Br.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[n]}))}function Hgt(e){const t=[];let r=ee(e,a=>Xr(e,(s,o)=>(a.PATTERN.source===o.PATTERN.source&&!mi(t,o)&&o.PATTERN!==Ai.NA&&(t.push(o),s.push(o)),s),[]));r=vp(r);const n=Fr(r,a=>a.length>1);return ee(n,a=>{const s=ee(a,l=>l.name);return{message:`The same RegExp pattern ->${$a(a).PATTERN}<-has been used in all of the following Token Types: ${s.join(", ")} <-`,type:Br.DUPLICATE_PATTERNS_FOUND,tokenTypes:a}})}function qgt(e){const t=Fr(e,n=>{if(!ke(n,"GROUP"))return!1;const i=n.GROUP;return i!==Ai.SKIPPED&&i!==Ai.NA&&!Ii(i)});return ee(t,n=>({message:"Token Type: ->"+n.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Br.INVALID_GROUP_TYPE_FOUND,tokenTypes:[n]}))}function Xgt(e,t){const r=Fr(e,i=>i.PUSH_MODE!==void 0&&!mi(t,i.PUSH_MODE));return ee(r,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:Br.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function jgt(e){const t=[],r=Xr(e,(n,i,a)=>{const s=i.PATTERN;return s===Ai.NA||(Ii(s)?n.push({str:s,idx:a,tokenType:i}):eo(s)&&Zgt(s)&&n.push({str:s.source,idx:a,tokenType:i})),n},[]);return St(e,(n,i)=>{St(r,({str:a,idx:s,tokenType:o})=>{if(i<s&&Kgt(a,n.PATTERN)){const l=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:l,type:Br.UNREACHABLE_PATTERN,tokenTypes:[n,o]})}})}),t}function Kgt(e,t){if(eo(t)){const r=t.exec(e);return r!==null&&r.index===0}else{if(ma(t))return t(e,0,[],{});if(ke(t,"exec"))return t.exec(e,0,[],{});if(typeof t=="string")return t===e;throw Error("non exhaustive match")}}function Zgt(e){return to([".","\\","[","]","|","^","$","(",")","?","*","+","{"],r=>e.source.indexOf(r)!==-1)===void 0}function B4(e){const t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function F4(e){const t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function Qgt(e,t,r){const n=[];return ke(e,Ad)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+Ad+`> property in its definition
`,type:Br.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),ke(e,y0)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+y0+`> property in its definition
`,type:Br.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),ke(e,y0)&&ke(e,Ad)&&!ke(e.modes,e.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${Ad}: <${e.defaultMode}>which does not exist
`,type:Br.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),ke(e,y0)&&St(e.modes,(i,a)=>{St(i,(s,o)=>{if(sr(s))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${a}> at index: <${o}>
`,type:Br.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(ke(s,"LONGER_ALT")){const l=We(s.LONGER_ALT)?s.LONGER_ALT:[s.LONGER_ALT];St(l,u=>{!sr(u)&&!mi(i,u)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${u.name}> on token <${s.name}> outside of mode <${a}>
`,type:Br.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),n}function Jgt(e,t,r){const n=[];let i=!1;const a=vp(yn(yr(e.modes))),s=Ry(a,l=>l[ac]===Ai.NA),o=s9(r);return t&&St(s,l=>{const u=a9(l,o);if(u!==!1){const f={message:npt(l,u),type:u.issue,tokenType:l};n.push(f)}else ke(l,"LINE_BREAKS")?l.LINE_BREAKS===!0&&(i=!0):mS(o,l.PATTERN)&&(i=!0)}),t&&!i&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:Br.NO_LINE_BREAKS_FLAGS}),n}function tpt(e){const t={},r=nn(e);return St(r,n=>{const i=e[n];if(We(i))t[n]=[];else throw Error("non exhaustive match")}),t}function i9(e){const t=e.PATTERN;if(eo(t))return!1;if(ma(t))return!0;if(ke(t,"exec"))return!0;if(Ii(t))return!1;throw Error("non exhaustive match")}function ept(e){return Ii(e)&&e.length===1?e.charCodeAt(0):!1}const rpt={test:function(e){const t=e.length;for(let r=this.lastIndex;r<t;r++){const n=e.charCodeAt(r);if(n===10)return this.lastIndex=r+1,!0;if(n===13)return e.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function a9(e,t){if(ke(e,"LINE_BREAKS"))return!1;if(eo(e.PATTERN)){try{mS(t,e.PATTERN)}catch(r){return{issue:Br.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(Ii(e.PATTERN))return!1;if(i9(e))return{issue:Br.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function npt(e,t){if(t.issue===Br.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${e.name}> Token Type
	 Root cause: ${t.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(t.issue===Br.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${e.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function s9(e){return ee(e,r=>Ii(r)?r.charCodeAt(0):r)}function yx(e,t,r){e[t]===void 0?e[t]=[r]:e[t].push(r)}const Ld=256;let f1=[];function zo(e){return e<Ld?e:f1[e]}function ipt(){if(rr(f1)){f1=new Array(65536);for(let e=0;e<65536;e++)f1[e]=e>255?255+~~(e/255):e}}function Ep(e,t){const r=e.tokenTypeIdx;return r===t.tokenTypeIdx?!0:t.isParent===!0&&t.categoryMatchesMap[r]===!0}function Zv(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}let $4=1;const o9={};function kp(e){const t=apt(e);spt(t),lpt(t),opt(t),St(t,r=>{r.isParent=r.categoryMatches.length>0})}function apt(e){let t=un(e),r=e,n=!0;for(;n;){r=vp(yn(ee(r,a=>a.CATEGORIES)));const i=Ay(r,t);t=t.concat(i),rr(i)?n=!1:r=i}return t}function spt(e){St(e,t=>{c9(t)||(o9[$4]=t,t.tokenTypeIdx=$4++),z4(t)&&!We(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),z4(t)||(t.CATEGORIES=[]),cpt(t)||(t.categoryMatches=[]),upt(t)||(t.categoryMatchesMap={})})}function opt(e){St(e,t=>{t.categoryMatches=[],St(t.categoryMatchesMap,(r,n)=>{t.categoryMatches.push(o9[n].tokenTypeIdx)})})}function lpt(e){St(e,t=>{l9([],t)})}function l9(e,t){St(e,r=>{t.categoryMatchesMap[r.tokenTypeIdx]=!0}),St(t.CATEGORIES,r=>{const n=e.concat(t);mi(n,r)||l9(n,r)})}function c9(e){return ke(e,"tokenTypeIdx")}function z4(e){return ke(e,"CATEGORIES")}function cpt(e){return ke(e,"categoryMatches")}function upt(e){return ke(e,"categoryMatchesMap")}function hpt(e){return ke(e,"tokenTypeIdx")}const Gw={buildUnableToPopLexerModeMessage(e){return`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(e,t,r,n,i){return`unexpected character: ->${e.charAt(t)}<- at offset: ${t}, skipped ${r} characters.`}};var Br;(function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",e[e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(Br||(Br={}));const Rd={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Gw,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Rd);class Ai{constructor(t,r=Rd){if(this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,a)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${i}>`);const{time:o,value:l}=JF(a),u=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${s}<-- <${i}> time: ${o}ms`),this.traceInitIndent--,l}else return a()},typeof r=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Ki({},Rd,r);const n=this.config.traceInitPerf;n===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof n=="number"&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,a=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Rd.lineTerminatorsPattern)this.config.lineTerminatorsPattern=rpt;else if(this.config.lineTerminatorCharacters===Rd.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),We(t)?i={modes:{defaultMode:un(t)},defaultMode:Ad}:(a=!1,i=un(t))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Qgt(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Jgt(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},St(i.modes,(o,l)=>{i.modes[l]=Ry(o,u=>sr(u))});const s=nn(i.modes);if(St(i.modes,(o,l)=>{this.TRACE_INIT(`Mode: <${l}> processing`,()=>{if(this.modes.push(l),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Pgt(o,s))}),rr(this.lexerDefinitionErrors)){kp(o);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=Ogt(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[l]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[l]=u.charCodeToPatternIdxToConfig,this.emptyGroups=Ki({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[l]=u.canBeOptimized}})}),this.defaultMode=i.defaultMode,!rr(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const l=ee(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+l)}St(this.lexerDefinitionWarning,o=>{QF(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(n9?(this.chopInput=Js,this.match=this.matchWithTest):(this.updateLastIndex=Zr,this.match=this.matchWithExec),a&&(this.handleModes=Zr),this.trackStartLines===!1&&(this.computeNewColumn=Js),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Zr),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=Xr(this.canModeBeOptimized,(l,u,h)=>(u===!1&&l.push(h),l),[]);if(r.ensureOptimizations&&!rr(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{Igt()}),this.TRACE_INIT("toFastProperties",()=>{t9(this)})})}tokenize(t,r=this.defaultMode){if(!rr(this.lexerDefinitionErrors)){const i=ee(this.lexerDefinitionErrors,a=>a.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(t,r)}tokenizeInternal(t,r){let n,i,a,s,o,l,u,h,f,d,g,p,v,m,y;const b=t,T=b.length;let w=0,k=0;const S=this.hasCustom?0:Math.floor(t.length/10),E=new Array(S),L=[];let A=this.trackStartLines?1:void 0,R=this.trackStartLines?1:void 0;const C=tpt(this.emptyGroups),D=this.trackStartLines,P=this.config.lineTerminatorsPattern;let _=0,I=[],M=[];const O=[],N=[];Object.freeze(N);let B;function z(){return I}function F(K){const it=zo(K),ut=M[it];return ut===void 0?N:ut}const V=K=>{if(O.length===1&&K.tokenType.PUSH_MODE===void 0){const it=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(K);L.push({offset:K.startOffset,line:K.startLine,column:K.startColumn,length:K.image.length,message:it})}else{O.pop();const it=us(O);I=this.patternIdxToConfig[it],M=this.charCodeToPatternIdxToConfig[it],_=I.length;const ut=this.canModeBeOptimized[it]&&this.config.safeMode===!1;M&&ut?B=F:B=z}};function G(K){O.push(K),M=this.charCodeToPatternIdxToConfig[K],I=this.patternIdxToConfig[K],_=I.length,_=I.length;const it=this.canModeBeOptimized[K]&&this.config.safeMode===!1;M&&it?B=F:B=z}G.call(this,r);let Y;const Q=this.config.recoveryEnabled;for(;w<T;){l=null;const K=b.charCodeAt(w),it=B(K),ut=it.length;for(n=0;n<ut;n++){Y=it[n];const q=Y.pattern;u=null;const W=Y.short;if(W!==!1?K===W&&(l=q):Y.isCustom===!0?(y=q.exec(b,w,E,C),y!==null?(l=y[0],y.payload!==void 0&&(u=y.payload)):l=null):(this.updateLastIndex(q,w),l=this.match(q,t,w)),l!==null){if(o=Y.longerAlt,o!==void 0){const H=o.length;for(a=0;a<H;a++){const U=I[o[a]],X=U.pattern;if(h=null,U.isCustom===!0?(y=X.exec(b,w,E,C),y!==null?(s=y[0],y.payload!==void 0&&(h=y.payload)):s=null):(this.updateLastIndex(X,w),s=this.match(X,t,w)),s&&s.length>l.length){l=s,u=h,Y=U;break}}}break}}if(l!==null){if(f=l.length,d=Y.group,d!==void 0&&(g=Y.tokenTypeIdx,p=this.createTokenInstance(l,w,g,Y.tokenType,A,R,f),this.handlePayload(p,u),d===!1?k=this.addToken(E,k,p):C[d].push(p)),t=this.chopInput(t,f),w=w+f,R=this.computeNewColumn(R,f),D===!0&&Y.canLineTerminator===!0){let q=0,W,H;P.lastIndex=0;do W=P.test(l),W===!0&&(H=P.lastIndex-1,q++);while(W===!0);q!==0&&(A=A+q,R=f-H,this.updateTokenEndLineColumnLocation(p,d,H,q,A,R,f))}this.handleModes(Y,V,G,p)}else{const q=w,W=A,H=R;let U=Q===!1;for(;U===!1&&w<T;)for(t=this.chopInput(t,1),w++,i=0;i<_;i++){const X=I[i],J=X.pattern,j=X.short;if(j!==!1?b.charCodeAt(w)===j&&(U=!0):X.isCustom===!0?U=J.exec(b,w,E,C)!==null:(this.updateLastIndex(J,w),U=J.exec(t)!==null),U===!0)break}if(v=w-q,R=this.computeNewColumn(R,v),m=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(b,q,v,W,H),L.push({offset:q,line:W,column:H,length:v,message:m}),Q===!1)break}}return this.hasCustom||(E.length=k),{tokens:E,groups:C,errors:L}}handleModes(t,r,n,i){if(t.pop===!0){const a=t.push;r(i),a!==void 0&&n.call(this,a)}else t.push!==void 0&&n.call(this,t.push)}chopInput(t,r){return t.substring(r)}updateLastIndex(t,r){t.lastIndex=r}updateTokenEndLineColumnLocation(t,r,n,i,a,s,o){let l,u;r!==void 0&&(l=n===o-1,u=l?-1:0,i===1&&l===!0||(t.endLine=a+u,t.endColumn=s-1+-u))}computeNewColumn(t,r){return t+r}createOffsetOnlyToken(t,r,n,i){return{image:t,startOffset:r,tokenTypeIdx:n,tokenType:i}}createStartOnlyToken(t,r,n,i,a,s){return{image:t,startOffset:r,startLine:a,startColumn:s,tokenTypeIdx:n,tokenType:i}}createFullToken(t,r,n,i,a,s,o){return{image:t,startOffset:r,endOffset:r+o-1,startLine:a,endLine:a,startColumn:s,endColumn:s+o-1,tokenTypeIdx:n,tokenType:i}}addTokenUsingPush(t,r,n){return t.push(n),r}addTokenUsingMemberAccess(t,r,n){return t[r]=n,r++,r}handlePayloadNoCustom(t,r){}handlePayloadWithCustom(t,r){r!==null&&(t.payload=r)}matchWithTest(t,r,n){return t.test(r)===!0?r.substring(n,t.lastIndex):null}matchWithExec(t,r){const n=t.exec(r);return n!==null?n[0]:null}}Ai.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";Ai.NA=/NOT_APPLICABLE/;function mu(e){return u9(e)?e.LABEL:e.name}function u9(e){return Ii(e.LABEL)&&e.LABEL!==""}const fpt="parent",V4="categories",G4="label",U4="group",W4="push_mode",Y4="pop_mode",H4="longer_alt",q4="line_breaks",X4="start_chars_hint";function h9(e){return dpt(e)}function dpt(e){const t=e.pattern,r={};if(r.name=e.name,sr(t)||(r.PATTERN=t),ke(e,fpt))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return ke(e,V4)&&(r.CATEGORIES=e[V4]),kp([r]),ke(e,G4)&&(r.LABEL=e[G4]),ke(e,U4)&&(r.GROUP=e[U4]),ke(e,Y4)&&(r.POP_MODE=e[Y4]),ke(e,W4)&&(r.PUSH_MODE=e[W4]),ke(e,H4)&&(r.LONGER_ALT=e[H4]),ke(e,q4)&&(r.LINE_BREAKS=e[q4]),ke(e,X4)&&(r.START_CHARS_HINT=e[X4]),r}const Vo=h9({name:"EOF",pattern:Ai.NA});kp([Vo]);function yS(e,t,r,n,i,a,s,o){return{image:t,startOffset:r,endOffset:n,startLine:i,endLine:a,startColumn:s,endColumn:o,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function f9(e,t){return Ep(e,t)}const au={buildMismatchTokenMessage({expected:e,actual:t,previous:r,ruleName:n}){return`Expecting ${u9(e)?`--> ${mu(e)} <--`:`token of type --> ${e.name} <--`} but found --> '${t.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:e,ruleName:t}){return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:r,customUserDescription:n,ruleName:i}){const a="Expecting: ",o=`
but found: '`+$a(t).image+"'";if(n)return a+n+o;{const l=Xr(e,(d,g)=>d.concat(g),[]),u=ee(l,d=>`[${ee(d,g=>mu(g)).join(", ")}]`),f=`one of these possible Token sequences:
${ee(u,(d,g)=>`  ${g+1}. ${d}`).join(`
`)}`;return a+f+o}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:r,ruleName:n}){const i="Expecting: ",s=`
but found: '`+$a(t).image+"'";if(r)return i+r+s;{const l=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${ee(e,u=>`[${ee(u,h=>mu(h)).join(",")}]`).join(" ,")}>`;return i+l+s}}};Object.freeze(au);const gpt={buildRuleNotFoundError(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+`<-
inside top level rule: ->`+e.name+"<-"}},Pl={buildDuplicateFoundError(e,t){function r(h){return h instanceof Sr?h.terminalType.name:h instanceof pi?h.nonTerminalName:""}const n=e.name,i=$a(t),a=i.idx,s=ts(i),o=r(i),l=a>0;let u=`->${s}${l?a:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${t.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError(e){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(e){const t=ee(e.prefixPath,i=>mu(i)).join(", "),r=e.alternation.idx===0?"":e.alternation.idx;return`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(e){const t=ee(e.prefixPath,i=>mu(i)).join(", "),r=e.alternation.idx===0?"":e.alternation.idx;let n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(e){let t=ts(e.repetition);return e.repetition.idx!==0&&(t+=e.repetition.idx),`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(e){return"deprecated"},buildEmptyAlternationError(e){return`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}> in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(e){return`An Alternation cannot have more than 256 alternatives:
<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
 has ${e.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(e){const t=e.topLevelRule.name,r=ee(e.leftRecursionPath,a=>a.name),n=`${t} --> ${r.concat([t]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${t}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(e){return"deprecated"},buildDuplicateRuleNameError(e){let t;return e.topLevelRule instanceof of?t=e.topLevelRule.name:t=e.topLevelRule,`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`}};function ppt(e,t){const r=new vpt(e,t);return r.resolveRefs(),r.errors}class vpt extends lf{constructor(t,r){super(),this.nameToTopRule=t,this.errMsgProvider=r,this.errors=[]}resolveRefs(){St(yr(this.nameToTopRule),t=>{this.currTopLevel=t,t.accept(this)})}visitNonTerminal(t){const r=this.nameToTopRule[t.nonTerminalName];if(r)t.referencedRule=r;else{const n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:n,type:vi.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}}}class mpt extends By{constructor(t,r){super(),this.topProd=t,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=un(this.path.ruleStack).reverse(),this.occurrenceStack=un(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(t,r=[]){this.found||super.walk(t,r)}walkProdRef(t,r,n){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){const i=r.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,i)}}updateExpectedNext(){rr(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class ypt extends mpt{constructor(t,r){super(t,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(t,r,n){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){const i=r.concat(n),a=new Ni({definition:i});this.possibleTokTypes=wp(a),this.found=!0}}}class $y extends By{constructor(t,r){super(),this.topRule=t,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class xpt extends $y{walkMany(t,r,n){if(t.idx===this.occurrence){const i=$a(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof Sr&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(t,r,n)}}class j4 extends $y{walkManySep(t,r,n){if(t.idx===this.occurrence){const i=$a(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof Sr&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(t,r,n)}}class bpt extends $y{walkAtLeastOne(t,r,n){if(t.idx===this.occurrence){const i=$a(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof Sr&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(t,r,n)}}class K4 extends $y{walkAtLeastOneSep(t,r,n){if(t.idx===this.occurrence){const i=$a(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof Sr&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(t,r,n)}}function Uw(e,t,r=[]){r=un(r);let n=[],i=0;function a(o){return o.concat(Ln(e,i+1))}function s(o){const l=Uw(a(o),t,r);return n.concat(l)}for(;r.length<t&&i<e.length;){const o=e[i];if(o instanceof Ni)return s(o.definition);if(o instanceof pi)return s(o.definition);if(o instanceof On)n=s(o.definition);else if(o instanceof Zi){const l=o.definition.concat([new Pr({definition:o.definition})]);return s(l)}else if(o instanceof Qi){const l=[new Ni({definition:o.definition}),new Pr({definition:[new Sr({terminalType:o.separator})].concat(o.definition)})];return s(l)}else if(o instanceof $i){const l=o.definition.concat([new Pr({definition:[new Sr({terminalType:o.separator})].concat(o.definition)})]);n=s(l)}else if(o instanceof Pr){const l=o.definition.concat([new Pr({definition:o.definition})]);n=s(l)}else{if(o instanceof zi)return St(o.definition,l=>{rr(l.definition)===!1&&(n=s(l.definition))}),n;if(o instanceof Sr)r.push(o.terminalType);else throw Error("non exhaustive match")}i++}return n.push({partialPath:r,suffixDef:Ln(e,i)}),n}function d9(e,t,r,n){const i="EXIT_NONE_TERMINAL",a=[i],s="EXIT_ALTERNATIVE";let o=!1;const l=t.length,u=l-n-1,h=[],f=[];for(f.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!rr(f);){const d=f.pop();if(d===s){o&&us(f).idx<=u&&f.pop();continue}const g=d.def,p=d.idx,v=d.ruleStack,m=d.occurrenceStack;if(rr(g))continue;const y=g[0];if(y===i){const b={idx:p,def:Ln(g),ruleStack:Cg(v),occurrenceStack:Cg(m)};f.push(b)}else if(y instanceof Sr)if(p<l-1){const b=p+1,T=t[b];if(r(T,y.terminalType)){const w={idx:b,def:Ln(g),ruleStack:v,occurrenceStack:m};f.push(w)}}else if(p===l-1)h.push({nextTokenType:y.terminalType,nextTokenOccurrence:y.idx,ruleStack:v,occurrenceStack:m}),o=!0;else throw Error("non exhaustive match");else if(y instanceof pi){const b=un(v);b.push(y.nonTerminalName);const T=un(m);T.push(y.idx);const w={idx:p,def:y.definition.concat(a,Ln(g)),ruleStack:b,occurrenceStack:T};f.push(w)}else if(y instanceof On){const b={idx:p,def:Ln(g),ruleStack:v,occurrenceStack:m};f.push(b),f.push(s);const T={idx:p,def:y.definition.concat(Ln(g)),ruleStack:v,occurrenceStack:m};f.push(T)}else if(y instanceof Zi){const b=new Pr({definition:y.definition,idx:y.idx}),T=y.definition.concat([b],Ln(g)),w={idx:p,def:T,ruleStack:v,occurrenceStack:m};f.push(w)}else if(y instanceof Qi){const b=new Sr({terminalType:y.separator}),T=new Pr({definition:[b].concat(y.definition),idx:y.idx}),w=y.definition.concat([T],Ln(g)),k={idx:p,def:w,ruleStack:v,occurrenceStack:m};f.push(k)}else if(y instanceof $i){const b={idx:p,def:Ln(g),ruleStack:v,occurrenceStack:m};f.push(b),f.push(s);const T=new Sr({terminalType:y.separator}),w=new Pr({definition:[T].concat(y.definition),idx:y.idx}),k=y.definition.concat([w],Ln(g)),S={idx:p,def:k,ruleStack:v,occurrenceStack:m};f.push(S)}else if(y instanceof Pr){const b={idx:p,def:Ln(g),ruleStack:v,occurrenceStack:m};f.push(b),f.push(s);const T=new Pr({definition:y.definition,idx:y.idx}),w=y.definition.concat([T],Ln(g)),k={idx:p,def:w,ruleStack:v,occurrenceStack:m};f.push(k)}else if(y instanceof zi)for(let b=y.definition.length-1;b>=0;b--){const T=y.definition[b],w={idx:p,def:T.definition.concat(Ln(g)),ruleStack:v,occurrenceStack:m};f.push(w),f.push(s)}else if(y instanceof Ni)f.push({idx:p,def:y.definition.concat(Ln(g)),ruleStack:v,occurrenceStack:m});else if(y instanceof of)f.push(Tpt(y,p,v,m));else throw Error("non exhaustive match")}return h}function Tpt(e,t,r,n){const i=un(r);i.push(e.name);const a=un(n);return a.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:a}}var Ir;(function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"})(Ir||(Ir={}));function xS(e){if(e instanceof On||e==="Option")return Ir.OPTION;if(e instanceof Pr||e==="Repetition")return Ir.REPETITION;if(e instanceof Zi||e==="RepetitionMandatory")return Ir.REPETITION_MANDATORY;if(e instanceof Qi||e==="RepetitionMandatoryWithSeparator")return Ir.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof $i||e==="RepetitionWithSeparator")return Ir.REPETITION_WITH_SEPARATOR;if(e instanceof zi||e==="Alternation")return Ir.ALTERNATION;throw Error("non exhaustive match")}function Z4(e){const{occurrence:t,rule:r,prodType:n,maxLookahead:i}=e,a=xS(n);return a===Ir.ALTERNATION?zy(t,r,i):Vy(t,r,a,i)}function wpt(e,t,r,n,i,a){const s=zy(e,t,r),o=v9(s)?Zv:Ep;return a(s,n,o,i)}function Ept(e,t,r,n,i,a){const s=Vy(e,t,i,r),o=v9(s)?Zv:Ep;return a(s[0],o,n)}function kpt(e,t,r,n){const i=e.length,a=Da(e,s=>Da(s,o=>o.length===1));if(t)return function(s){const o=ee(s,l=>l.GATE);for(let l=0;l<i;l++){const u=e[l],h=u.length,f=o[l];if(!(f!==void 0&&f.call(this)===!1))t:for(let d=0;d<h;d++){const g=u[d],p=g.length;for(let v=0;v<p;v++){const m=this.LA(v+1);if(r(m,g[v])===!1)continue t}return l}}};if(a&&!n){const s=ee(e,l=>yn(l)),o=Xr(s,(l,u,h)=>(St(u,f=>{ke(l,f.tokenTypeIdx)||(l[f.tokenTypeIdx]=h),St(f.categoryMatches,d=>{ke(l,d)||(l[d]=h)})}),l),{});return function(){const l=this.LA(1);return o[l.tokenTypeIdx]}}else return function(){for(let s=0;s<i;s++){const o=e[s],l=o.length;t:for(let u=0;u<l;u++){const h=o[u],f=h.length;for(let d=0;d<f;d++){const g=this.LA(d+1);if(r(g,h[d])===!1)continue t}return s}}}}function Cpt(e,t,r){const n=Da(e,a=>a.length===1),i=e.length;if(n&&!r){const a=yn(e);if(a.length===1&&rr(a[0].categoryMatches)){const o=a[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const s=Xr(a,(o,l,u)=>(o[l.tokenTypeIdx]=!0,St(l.categoryMatches,h=>{o[h]=!0}),o),[]);return function(){const o=this.LA(1);return s[o.tokenTypeIdx]===!0}}}else return function(){t:for(let a=0;a<i;a++){const s=e[a],o=s.length;for(let l=0;l<o;l++){const u=this.LA(l+1);if(t(u,s[l])===!1)continue t}return!0}return!1}}class Spt extends By{constructor(t,r,n){super(),this.topProd=t,this.targetOccurrence=r,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(t,r,n,i){return t.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=n.concat(i),!0):!1}walkOption(t,r,n){this.checkIsTarget(t,Ir.OPTION,r,n)||super.walkOption(t,r,n)}walkAtLeastOne(t,r,n){this.checkIsTarget(t,Ir.REPETITION_MANDATORY,r,n)||super.walkOption(t,r,n)}walkAtLeastOneSep(t,r,n){this.checkIsTarget(t,Ir.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||super.walkOption(t,r,n)}walkMany(t,r,n){this.checkIsTarget(t,Ir.REPETITION,r,n)||super.walkOption(t,r,n)}walkManySep(t,r,n){this.checkIsTarget(t,Ir.REPETITION_WITH_SEPARATOR,r,n)||super.walkOption(t,r,n)}}class g9 extends lf{constructor(t,r,n){super(),this.targetOccurrence=t,this.targetProdType=r,this.targetRef=n,this.result=[]}checkIsTarget(t,r){t.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||t===this.targetRef)&&(this.result=t.definition)}visitOption(t){this.checkIsTarget(t,Ir.OPTION)}visitRepetition(t){this.checkIsTarget(t,Ir.REPETITION)}visitRepetitionMandatory(t){this.checkIsTarget(t,Ir.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(t){this.checkIsTarget(t,Ir.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(t){this.checkIsTarget(t,Ir.REPETITION_WITH_SEPARATOR)}visitAlternation(t){this.checkIsTarget(t,Ir.ALTERNATION)}}function Q4(e){const t=new Array(e);for(let r=0;r<e;r++)t[r]=[];return t}function xx(e){let t=[""];for(let r=0;r<e.length;r++){const n=e[r],i=[];for(let a=0;a<t.length;a++){const s=t[a];i.push(s+"_"+n.tokenTypeIdx);for(let o=0;o<n.categoryMatches.length;o++){const l="_"+n.categoryMatches[o];i.push(s+l)}}t=i}return t}function _pt(e,t,r){for(let n=0;n<e.length;n++){if(n===r)continue;const i=e[n];for(let a=0;a<t.length;a++){const s=t[a];if(i[s]===!0)return!1}}return!0}function p9(e,t){const r=ee(e,s=>Uw([s],1)),n=Q4(r.length),i=ee(r,s=>{const o={};return St(s,l=>{const u=xx(l.partialPath);St(u,h=>{o[h]=!0})}),o});let a=r;for(let s=1;s<=t;s++){const o=a;a=Q4(o.length);for(let l=0;l<o.length;l++){const u=o[l];for(let h=0;h<u.length;h++){const f=u[h].partialPath,d=u[h].suffixDef,g=xx(f);if(_pt(i,g,l)||rr(d)||f.length===t){const v=n[l];if(Ww(v,f)===!1){v.push(f);for(let m=0;m<g.length;m++){const y=g[m];i[l][y]=!0}}}else{const v=Uw(d,s+1,f);a[l]=a[l].concat(v),St(v,m=>{const y=xx(m.partialPath);St(y,b=>{i[l][b]=!0})})}}}}return n}function zy(e,t,r,n){const i=new g9(e,Ir.ALTERNATION,n);return t.accept(i),p9(i.result,r)}function Vy(e,t,r,n){const i=new g9(e,r);t.accept(i);const a=i.result,o=new Spt(t,e,r).startWalking(),l=new Ni({definition:a}),u=new Ni({definition:o});return p9([l,u],n)}function Ww(e,t){t:for(let r=0;r<e.length;r++){const n=e[r];if(n.length===t.length){for(let i=0;i<n.length;i++){const a=t[i],s=n[i];if((a===s||s.categoryMatchesMap[a.tokenTypeIdx]!==void 0)===!1)continue t}return!0}}return!1}function Apt(e,t){return e.length<t.length&&Da(e,(r,n)=>{const i=t[n];return r===i||i.categoryMatchesMap[r.tokenTypeIdx]})}function v9(e){return Da(e,t=>Da(t,r=>Da(r,n=>rr(n.categoryMatches))))}function Lpt(e){const t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return ee(t,r=>Object.assign({type:vi.CUSTOM_LOOKAHEAD_VALIDATION},r))}function Rpt(e,t,r,n){const i=qi(e,l=>Ipt(l,r)),a=Upt(e,t,r),s=qi(e,l=>$pt(l,r)),o=qi(e,l=>Mpt(l,e,n,r));return i.concat(a,s,o)}function Ipt(e,t){const r=new Dpt;e.accept(r);const n=r.allProductions,i=kct(n,Npt),a=Ua(i,o=>o.length>1);return ee(yr(a),o=>{const l=$a(o),u=t.buildDuplicateFoundError(e,o),h=ts(l),f={message:u,type:vi.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:h,occurrence:l.idx},d=m9(l);return d&&(f.parameter=d),f})}function Npt(e){return`${ts(e)}_#_${e.idx}_#_${m9(e)}`}function m9(e){return e instanceof Sr?e.terminalType.name:e instanceof pi?e.nonTerminalName:""}class Dpt extends lf{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(t){this.allProductions.push(t)}visitOption(t){this.allProductions.push(t)}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}visitAlternation(t){this.allProductions.push(t)}visitTerminal(t){this.allProductions.push(t)}}function Mpt(e,t,r,n){const i=[];if(Xr(t,(s,o)=>o.name===e.name?s+1:s,0)>1){const s=n.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});i.push({message:s,type:vi.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}function Opt(e,t,r){const n=[];let i;return mi(t,e)||(i=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:i,type:vi.INVALID_RULE_OVERRIDE,ruleName:e})),n}function y9(e,t,r,n=[]){const i=[],a=d1(t.definition);if(rr(a))return[];{const s=e.name;mi(a,e)&&i.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:n}),type:vi.LEFT_RECURSION,ruleName:s});const l=Ay(a,n.concat([e])),u=qi(l,h=>{const f=un(n);return f.push(h),y9(e,h,r,f)});return i.concat(u)}}function d1(e){let t=[];if(rr(e))return t;const r=$a(e);if(r instanceof pi)t.push(r.referencedRule);else if(r instanceof Ni||r instanceof On||r instanceof Zi||r instanceof Qi||r instanceof $i||r instanceof Pr)t=t.concat(d1(r.definition));else if(r instanceof zi)t=yn(ee(r.definition,a=>d1(a.definition)));else if(!(r instanceof Sr))throw Error("non exhaustive match");const n=jv(r),i=e.length>1;if(n&&i){const a=Ln(e);return t.concat(d1(a))}else return t}class bS extends lf{constructor(){super(...arguments),this.alternations=[]}visitAlternation(t){this.alternations.push(t)}}function Ppt(e,t){const r=new bS;e.accept(r);const n=r.alternations;return qi(n,a=>{const s=Cg(a.definition);return qi(s,(o,l)=>{const u=d9([o],[],Ep,1);return rr(u)?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:a,emptyChoiceIdx:l}),type:vi.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:a.idx,alternative:l+1}]:[]})})}function Bpt(e,t,r){const n=new bS;e.accept(n);let i=n.alternations;return i=Ry(i,s=>s.ignoreAmbiguities===!0),qi(i,s=>{const o=s.idx,l=s.maxLookahead||t,u=zy(o,e,l,s),h=Vpt(u,s,e,r),f=Gpt(u,s,e,r);return h.concat(f)})}class Fpt extends lf{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}}function $pt(e,t){const r=new bS;e.accept(r);const n=r.alternations;return qi(n,a=>a.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:a}),type:vi.TOO_MANY_ALTS,ruleName:e.name,occurrence:a.idx}]:[])}function zpt(e,t,r){const n=[];return St(e,i=>{const a=new Fpt;i.accept(a);const s=a.allProductions;St(s,o=>{const l=xS(o),u=o.maxLookahead||t,h=o.idx,d=Vy(h,i,l,u)[0];if(rr(yn(d))){const g=r.buildEmptyRepetitionError({topLevelRule:i,repetition:o});n.push({message:g,type:vi.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),n}function Vpt(e,t,r,n){const i=[],a=Xr(e,(o,l,u)=>(t.definition[u].ignoreAmbiguities===!0||St(l,h=>{const f=[u];St(e,(d,g)=>{u!==g&&Ww(d,h)&&t.definition[g].ignoreAmbiguities!==!0&&f.push(g)}),f.length>1&&!Ww(i,h)&&(i.push(h),o.push({alts:f,path:h}))}),o),[]);return ee(a,o=>{const l=ee(o.alts,h=>h+1);return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:l,prefixPath:o.path}),type:vi.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:t.idx,alternatives:o.alts}})}function Gpt(e,t,r,n){const i=Xr(e,(s,o,l)=>{const u=ee(o,h=>({idx:l,path:h}));return s.concat(u)},[]);return vp(qi(i,s=>{if(t.definition[s.idx].ignoreAmbiguities===!0)return[];const l=s.idx,u=s.path,h=Fr(i,d=>t.definition[d.idx].ignoreAmbiguities!==!0&&d.idx<l&&Apt(d.path,u));return ee(h,d=>{const g=[d.idx+1,l+1],p=t.idx===0?"":t.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:g,prefixPath:d.path}),type:vi.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:p,alternatives:g}})}))}function Upt(e,t,r){const n=[],i=ee(t,a=>a.name);return St(e,a=>{const s=a.name;if(mi(i,s)){const o=r.buildNamespaceConflictError(a);n.push({message:o,type:vi.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:s})}}),n}function Wpt(e){const t=_y(e,{errMsgProvider:gpt}),r={};return St(e.rules,n=>{r[n.name]=n}),ppt(r,t.errMsgProvider)}function Ypt(e){return e=_y(e,{errMsgProvider:Pl}),Rpt(e.rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}const x9="MismatchedTokenException",b9="NoViableAltException",T9="EarlyExitException",w9="NotAllInputParsedException",E9=[x9,b9,T9,w9];Object.freeze(E9);function Qv(e){return mi(E9,e.name)}class Gy extends Error{constructor(t,r){super(t),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class k9 extends Gy{constructor(t,r,n){super(t,r),this.previousToken=n,this.name=x9}}class Hpt extends Gy{constructor(t,r,n){super(t,r),this.previousToken=n,this.name=b9}}class qpt extends Gy{constructor(t,r){super(t,r),this.name=w9}}class Xpt extends Gy{constructor(t,r,n){super(t,r),this.previousToken=n,this.name=T9}}const bx={},C9="InRuleRecoveryException";class jpt extends Error{constructor(t){super(t),this.name=C9}}class Kpt{initRecoverable(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=ke(t,"recoveryEnabled")?t.recoveryEnabled:ro.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Zpt)}getTokenToInsert(t){const r=yS(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(t){return!0}canTokenTypeBeDeletedInRecovery(t){return!0}tryInRepetitionRecovery(t,r,n,i){const a=this.findReSyncTokenType(),s=this.exportLexerState(),o=[];let l=!1;const u=this.LA(1);let h=this.LA(1);const f=()=>{const d=this.LA(0),g=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:u,previous:d,ruleName:this.getCurrRuleFullName()}),p=new k9(g,u,this.LA(0));p.resyncedTokens=Cg(o),this.SAVE_ERROR(p)};for(;!l;)if(this.tokenMatcher(h,i)){f();return}else if(n.call(this)){f(),t.apply(this,r);return}else this.tokenMatcher(h,a)?l=!0:(h=this.SKIP_TOKEN(),this.addToResyncTokens(h,o));this.importLexerState(s)}shouldInRepetitionRecoveryBeTried(t,r,n){return!(n===!1||this.tokenMatcher(this.LA(1),t)||this.isBackTracking()||this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,r)))}getFollowsForInRuleRecovery(t,r){const n=this.getCurrentGrammarPath(t,r);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(t,r){if(this.canRecoverWithSingleTokenInsertion(t,r))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){const n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new jpt("sad sad panda")}canPerformInRuleRecovery(t,r){return this.canRecoverWithSingleTokenInsertion(t,r)||this.canRecoverWithSingleTokenDeletion(t)}canRecoverWithSingleTokenInsertion(t,r){if(!this.canTokenTypeBeInsertedInRecovery(t)||rr(r))return!1;const n=this.LA(1);return to(r,a=>this.tokenMatcher(n,a))!==void 0}canRecoverWithSingleTokenDeletion(t){return this.canTokenTypeBeDeletedInRecovery(t)?this.tokenMatcher(this.LA(2),t):!1}isInCurrentRuleReSyncSet(t){const r=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(r);return mi(n,t)}findReSyncTokenType(){const t=this.flattenFollowSet();let r=this.LA(1),n=2;for(;;){const i=to(t,a=>f9(r,a));if(i!==void 0)return i;r=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return bx;const t=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){const t=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return ee(t,(n,i)=>i===0?bx:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:r[i],inRule:this.shortRuleNameToFullName(t[i-1])})}flattenFollowSet(){const t=ee(this.buildFullFollowKeyStack(),r=>this.getFollowSetFromFollowKey(r));return yn(t)}getFollowSetFromFollowKey(t){if(t===bx)return[Vo];const r=t.ruleName+t.idxInCallingRule+e9+t.inRule;return this.resyncFollows[r]}addToResyncTokens(t,r){return this.tokenMatcher(t,Vo)||r.push(t),r}reSyncTo(t){const r=[];let n=this.LA(1);for(;this.tokenMatcher(n,t)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,r);return Cg(r)}attemptInRepetitionRecovery(t,r,n,i,a,s,o){}getCurrentGrammarPath(t,r){const n=this.getHumanReadableRuleStack(),i=un(this.RULE_OCCURRENCE_STACK);return{ruleStack:n,occurrenceStack:i,lastTok:t,lastTokOccurrence:r}}getHumanReadableRuleStack(){return ee(this.RULE_STACK,t=>this.shortRuleNameToFullName(t))}}function Zpt(e,t,r,n,i,a,s){const o=this.getKeyForAutomaticLookahead(n,i);let l=this.firstAfterRepMap[o];if(l===void 0){const d=this.getCurrRuleFullName(),g=this.getGAstProductions()[d];l=new a(g,i).startWalking(),this.firstAfterRepMap[o]=l}let u=l.token,h=l.occurrence;const f=l.isEndOfRule;this.RULE_STACK.length===1&&f&&u===void 0&&(u=Vo,h=1),!(u===void 0||h===void 0)&&this.shouldInRepetitionRecoveryBeTried(u,h,s)&&this.tryInRepetitionRecovery(e,t,r,u)}const Qpt=4,rl=8,S9=1<<rl,_9=2<<rl,Yw=3<<rl,Hw=4<<rl,qw=5<<rl,g1=6<<rl;function Tx(e,t,r){return r|t|e}class TS{constructor(t){var r;this.maxLookahead=(r=t==null?void 0:t.maxLookahead)!==null&&r!==void 0?r:ro.maxLookahead}validate(t){const r=this.validateNoLeftRecursion(t.rules);if(rr(r)){const n=this.validateEmptyOrAlternatives(t.rules),i=this.validateAmbiguousAlternationAlternatives(t.rules,this.maxLookahead),a=this.validateSomeNonEmptyLookaheadPath(t.rules,this.maxLookahead);return[...r,...n,...i,...a]}return r}validateNoLeftRecursion(t){return qi(t,r=>y9(r,r,Pl))}validateEmptyOrAlternatives(t){return qi(t,r=>Ppt(r,Pl))}validateAmbiguousAlternationAlternatives(t,r){return qi(t,n=>Bpt(n,r,Pl))}validateSomeNonEmptyLookaheadPath(t,r){return zpt(t,r,Pl)}buildLookaheadForAlternation(t){return wpt(t.prodOccurrence,t.rule,t.maxLookahead,t.hasPredicates,t.dynamicTokensEnabled,kpt)}buildLookaheadForOptional(t){return Ept(t.prodOccurrence,t.rule,t.maxLookahead,t.dynamicTokensEnabled,xS(t.prodType),Cpt)}}class Jpt{initLooksAhead(t){this.dynamicTokensEnabled=ke(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:ro.dynamicTokensEnabled,this.maxLookahead=ke(t,"maxLookahead")?t.maxLookahead:ro.maxLookahead,this.lookaheadStrategy=ke(t,"lookaheadStrategy")?t.lookaheadStrategy:new TS({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(t){St(t,r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,()=>{const{alternation:n,repetition:i,option:a,repetitionMandatory:s,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:l}=e0t(r);St(n,u=>{const h=u.idx===0?"":u.idx;this.TRACE_INIT(`${ts(u)}${h}`,()=>{const f=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:u.idx,rule:r,maxLookahead:u.maxLookahead||this.maxLookahead,hasPredicates:u.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),d=Tx(this.fullRuleNameToShort[r.name],S9,u.idx);this.setLaFuncCache(d,f)})}),St(i,u=>{this.computeLookaheadFunc(r,u.idx,Yw,"Repetition",u.maxLookahead,ts(u))}),St(a,u=>{this.computeLookaheadFunc(r,u.idx,_9,"Option",u.maxLookahead,ts(u))}),St(s,u=>{this.computeLookaheadFunc(r,u.idx,Hw,"RepetitionMandatory",u.maxLookahead,ts(u))}),St(o,u=>{this.computeLookaheadFunc(r,u.idx,g1,"RepetitionMandatoryWithSeparator",u.maxLookahead,ts(u))}),St(l,u=>{this.computeLookaheadFunc(r,u.idx,qw,"RepetitionWithSeparator",u.maxLookahead,ts(u))})})})}computeLookaheadFunc(t,r,n,i,a,s){this.TRACE_INIT(`${s}${r===0?"":r}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:t,maxLookahead:a||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),l=Tx(this.fullRuleNameToShort[t.name],n,r);this.setLaFuncCache(l,o)})}getKeyForAutomaticLookahead(t,r){const n=this.getLastExplicitRuleShortName();return Tx(n,t,r)}getLaFuncFromCache(t){return this.lookAheadFuncsCache.get(t)}setLaFuncCache(t,r){this.lookAheadFuncsCache.set(t,r)}}class t0t extends lf{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(t){this.dslMethods.option.push(t)}visitRepetitionWithSeparator(t){this.dslMethods.repetitionWithSeparator.push(t)}visitRepetitionMandatory(t){this.dslMethods.repetitionMandatory.push(t)}visitRepetitionMandatoryWithSeparator(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)}visitRepetition(t){this.dslMethods.repetition.push(t)}visitAlternation(t){this.dslMethods.alternation.push(t)}}const x0=new t0t;function e0t(e){x0.reset(),e.accept(x0);const t=x0.dslMethods;return x0.reset(),t}function J4(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset)}function t5(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function r0t(e,t,r){e.children[r]===void 0?e.children[r]=[t]:e.children[r].push(t)}function n0t(e,t,r){e.children[t]===void 0?e.children[t]=[r]:e.children[t].push(r)}const i0t="name";function A9(e,t){Object.defineProperty(e,i0t,{enumerable:!1,configurable:!0,writable:!1,value:t})}function a0t(e,t){const r=nn(e),n=r.length;for(let i=0;i<n;i++){const a=r[i],s=e[a],o=s.length;for(let l=0;l<o;l++){const u=s[l];u.tokenTypeIdx===void 0&&this[u.name](u.children,t)}}}function s0t(e,t){const r=function(){};A9(r,e+"BaseSemantics");const n={visit:function(i,a){if(We(i)&&(i=i[0]),!sr(i))return this[i.name](i.children,a)},validateVisitor:function(){const i=l0t(this,t);if(!rr(i)){const a=ee(i,s=>s.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${a.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=t,r}function o0t(e,t,r){const n=function(){};A9(n,e+"BaseSemanticsWithDefaults");const i=Object.create(r.prototype);return St(t,a=>{i[a]=a0t}),n.prototype=i,n.prototype.constructor=n,n}var Xw;(function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"})(Xw||(Xw={}));function l0t(e,t){return c0t(e,t)}function c0t(e,t){const r=Fr(t,i=>ma(e[i])===!1),n=ee(r,i=>({msg:`Missing visitor method: <${i}> on ${e.constructor.name} CST Visitor.`,type:Xw.MISSING_METHOD,methodName:i}));return vp(n)}class u0t{initTreeBuilder(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=ke(t,"nodeLocationTracking")?t.nodeLocationTracking:ro.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Zr,this.cstFinallyStateUpdate=Zr,this.cstPostTerminal=Zr,this.cstPostNonTerminal=Zr,this.cstPostRule=Zr;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=t5,this.setNodeLocationFromNode=t5,this.cstPostRule=Zr,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Zr,this.setNodeLocationFromNode=Zr,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=J4,this.setNodeLocationFromNode=J4,this.cstPostRule=Zr,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Zr,this.setNodeLocationFromNode=Zr,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Zr,this.setNodeLocationFromNode=Zr,this.cstPostRule=Zr,this.setInitialNodeLocation=Zr;else throw Error(`Invalid <nodeLocationTracking> config option: "${t.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(t){t.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(t){const r=this.LA(1);t.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(t){const r={name:t,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(t){const r=this.LA(0),n=t.location;n.startOffset<=r.startOffset?(n.endOffset=r.endOffset,n.endLine=r.endLine,n.endColumn=r.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(t){const r=this.LA(0),n=t.location;n.startOffset<=r.startOffset?n.endOffset=r.endOffset:n.startOffset=NaN}cstPostTerminal(t,r){const n=this.CST_STACK[this.CST_STACK.length-1];r0t(n,r,t),this.setNodeLocationFromToken(n.location,r)}cstPostNonTerminal(t,r){const n=this.CST_STACK[this.CST_STACK.length-1];n0t(n,r,t),this.setNodeLocationFromNode(n.location,t.location)}getBaseCstVisitorConstructor(){if(sr(this.baseCstVisitorConstructor)){const t=s0t(this.className,nn(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(sr(this.baseCstVisitorWithDefaultsConstructor)){const t=o0t(this.className,nn(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const t=this.RULE_STACK;return t[t.length-1]}getPreviousExplicitRuleShortName(){const t=this.RULE_STACK;return t[t.length-2]}getLastExplicitRuleOccurrenceIndex(){const t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]}}class h0t{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(t){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):tm}LA(t){const r=this.currIdx+t;return r<0||this.tokVectorLength<=r?tm:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(t){this.currIdx=t}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class f0t{ACTION(t){return t.call(this)}consume(t,r,n){return this.consumeInternal(r,t,n)}subrule(t,r,n){return this.subruleInternal(r,t,n)}option(t,r){return this.optionInternal(r,t)}or(t,r){return this.orInternal(r,t)}many(t,r){return this.manyInternal(t,r)}atLeastOne(t,r){return this.atLeastOneInternal(t,r)}CONSUME(t,r){return this.consumeInternal(t,0,r)}CONSUME1(t,r){return this.consumeInternal(t,1,r)}CONSUME2(t,r){return this.consumeInternal(t,2,r)}CONSUME3(t,r){return this.consumeInternal(t,3,r)}CONSUME4(t,r){return this.consumeInternal(t,4,r)}CONSUME5(t,r){return this.consumeInternal(t,5,r)}CONSUME6(t,r){return this.consumeInternal(t,6,r)}CONSUME7(t,r){return this.consumeInternal(t,7,r)}CONSUME8(t,r){return this.consumeInternal(t,8,r)}CONSUME9(t,r){return this.consumeInternal(t,9,r)}SUBRULE(t,r){return this.subruleInternal(t,0,r)}SUBRULE1(t,r){return this.subruleInternal(t,1,r)}SUBRULE2(t,r){return this.subruleInternal(t,2,r)}SUBRULE3(t,r){return this.subruleInternal(t,3,r)}SUBRULE4(t,r){return this.subruleInternal(t,4,r)}SUBRULE5(t,r){return this.subruleInternal(t,5,r)}SUBRULE6(t,r){return this.subruleInternal(t,6,r)}SUBRULE7(t,r){return this.subruleInternal(t,7,r)}SUBRULE8(t,r){return this.subruleInternal(t,8,r)}SUBRULE9(t,r){return this.subruleInternal(t,9,r)}OPTION(t){return this.optionInternal(t,0)}OPTION1(t){return this.optionInternal(t,1)}OPTION2(t){return this.optionInternal(t,2)}OPTION3(t){return this.optionInternal(t,3)}OPTION4(t){return this.optionInternal(t,4)}OPTION5(t){return this.optionInternal(t,5)}OPTION6(t){return this.optionInternal(t,6)}OPTION7(t){return this.optionInternal(t,7)}OPTION8(t){return this.optionInternal(t,8)}OPTION9(t){return this.optionInternal(t,9)}OR(t){return this.orInternal(t,0)}OR1(t){return this.orInternal(t,1)}OR2(t){return this.orInternal(t,2)}OR3(t){return this.orInternal(t,3)}OR4(t){return this.orInternal(t,4)}OR5(t){return this.orInternal(t,5)}OR6(t){return this.orInternal(t,6)}OR7(t){return this.orInternal(t,7)}OR8(t){return this.orInternal(t,8)}OR9(t){return this.orInternal(t,9)}MANY(t){this.manyInternal(0,t)}MANY1(t){this.manyInternal(1,t)}MANY2(t){this.manyInternal(2,t)}MANY3(t){this.manyInternal(3,t)}MANY4(t){this.manyInternal(4,t)}MANY5(t){this.manyInternal(5,t)}MANY6(t){this.manyInternal(6,t)}MANY7(t){this.manyInternal(7,t)}MANY8(t){this.manyInternal(8,t)}MANY9(t){this.manyInternal(9,t)}MANY_SEP(t){this.manySepFirstInternal(0,t)}MANY_SEP1(t){this.manySepFirstInternal(1,t)}MANY_SEP2(t){this.manySepFirstInternal(2,t)}MANY_SEP3(t){this.manySepFirstInternal(3,t)}MANY_SEP4(t){this.manySepFirstInternal(4,t)}MANY_SEP5(t){this.manySepFirstInternal(5,t)}MANY_SEP6(t){this.manySepFirstInternal(6,t)}MANY_SEP7(t){this.manySepFirstInternal(7,t)}MANY_SEP8(t){this.manySepFirstInternal(8,t)}MANY_SEP9(t){this.manySepFirstInternal(9,t)}AT_LEAST_ONE(t){this.atLeastOneInternal(0,t)}AT_LEAST_ONE1(t){return this.atLeastOneInternal(1,t)}AT_LEAST_ONE2(t){this.atLeastOneInternal(2,t)}AT_LEAST_ONE3(t){this.atLeastOneInternal(3,t)}AT_LEAST_ONE4(t){this.atLeastOneInternal(4,t)}AT_LEAST_ONE5(t){this.atLeastOneInternal(5,t)}AT_LEAST_ONE6(t){this.atLeastOneInternal(6,t)}AT_LEAST_ONE7(t){this.atLeastOneInternal(7,t)}AT_LEAST_ONE8(t){this.atLeastOneInternal(8,t)}AT_LEAST_ONE9(t){this.atLeastOneInternal(9,t)}AT_LEAST_ONE_SEP(t){this.atLeastOneSepFirstInternal(0,t)}AT_LEAST_ONE_SEP1(t){this.atLeastOneSepFirstInternal(1,t)}AT_LEAST_ONE_SEP2(t){this.atLeastOneSepFirstInternal(2,t)}AT_LEAST_ONE_SEP3(t){this.atLeastOneSepFirstInternal(3,t)}AT_LEAST_ONE_SEP4(t){this.atLeastOneSepFirstInternal(4,t)}AT_LEAST_ONE_SEP5(t){this.atLeastOneSepFirstInternal(5,t)}AT_LEAST_ONE_SEP6(t){this.atLeastOneSepFirstInternal(6,t)}AT_LEAST_ONE_SEP7(t){this.atLeastOneSepFirstInternal(7,t)}AT_LEAST_ONE_SEP8(t){this.atLeastOneSepFirstInternal(8,t)}AT_LEAST_ONE_SEP9(t){this.atLeastOneSepFirstInternal(9,t)}RULE(t,r,n=em){if(mi(this.definedRulesNames,t)){const s={message:Pl.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:vi.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(s)}this.definedRulesNames.push(t);const i=this.defineRule(t,r,n);return this[t]=i,i}OVERRIDE_RULE(t,r,n=em){const i=Opt(t,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const a=this.defineRule(t,r,n);return this[t]=a,a}BACKTRACK(t,r){return function(){this.isBackTrackingStack.push(1);const n=this.saveRecogState();try{return t.apply(this,r),!0}catch(i){if(Qv(i))return!1;throw i}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Tgt(yr(this.gastProductionsCache))}}class d0t{initRecognizerEngine(t,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Zv,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},ke(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(We(t)){if(rr(t))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof t[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(We(t))this.tokensMap=Xr(t,(a,s)=>(a[s.name]=s,a),{});else if(ke(t,"modes")&&Da(yn(yr(t.modes)),hpt)){const a=yn(yr(t.modes)),s=KC(a);this.tokensMap=Xr(s,(o,l)=>(o[l.name]=l,o),{})}else if(Ri(t))this.tokensMap=un(t);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Vo;const n=ke(t,"modes")?yn(yr(t.modes)):yr(t),i=Da(n,a=>rr(a.categoryMatches));this.tokenMatcher=i?Zv:Ep,kp(yr(this.tokensMap))}defineRule(t,r,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${t}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=ke(n,"resyncEnabled")?n.resyncEnabled:em.resyncEnabled,a=ke(n,"recoveryValueFunc")?n.recoveryValueFunc:em.recoveryValueFunc,s=this.ruleShortNameIdx<<Qpt+rl;this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=t,this.fullRuleNameToShort[t]=s;let o;return this.outputCst===!0?o=function(...h){try{this.ruleInvocationStateUpdate(s,t,this.subruleIdx),r.apply(this,h);const f=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(f),f}catch(f){return this.invokeRuleCatch(f,i,a)}finally{this.ruleFinallyStateUpdate()}}:o=function(...h){try{return this.ruleInvocationStateUpdate(s,t,this.subruleIdx),r.apply(this,h)}catch(f){return this.invokeRuleCatch(f,i,a)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:t,originalGrammarAction:r})}invokeRuleCatch(t,r,n){const i=this.RULE_STACK.length===1,a=r&&!this.isBackTracking()&&this.recoveryEnabled;if(Qv(t)){const s=t;if(a){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(s.resyncedTokens=this.reSyncTo(o),this.outputCst){const l=this.CST_STACK[this.CST_STACK.length-1];return l.recoveredNode=!0,l}else return n(t);else{if(this.outputCst){const l=this.CST_STACK[this.CST_STACK.length-1];l.recoveredNode=!0,s.partialCstResult=l}throw s}}else{if(i)return this.moveToTerminatedState(),n(t);throw s}}else throw t}optionInternal(t,r){const n=this.getKeyForAutomaticLookahead(_9,r);return this.optionInternalLogic(t,r,n)}optionInternalLogic(t,r,n){let i=this.getLaFuncFromCache(n),a;if(typeof t!="function"){a=t.DEF;const s=t.GATE;if(s!==void 0){const o=i;i=()=>s.call(this)&&o.call(this)}}else a=t;if(i.call(this)===!0)return a.call(this)}atLeastOneInternal(t,r){const n=this.getKeyForAutomaticLookahead(Hw,t);return this.atLeastOneInternalLogic(t,r,n)}atLeastOneInternalLogic(t,r,n){let i=this.getLaFuncFromCache(n),a;if(typeof r!="function"){a=r.DEF;const s=r.GATE;if(s!==void 0){const o=i;i=()=>s.call(this)&&o.call(this)}}else a=r;if(i.call(this)===!0){let s=this.doSingleRepetition(a);for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(a)}else throw this.raiseEarlyExitException(t,Ir.REPETITION_MANDATORY,r.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,r],i,Hw,t,bpt)}atLeastOneSepFirstInternal(t,r){const n=this.getKeyForAutomaticLookahead(g1,t);this.atLeastOneSepFirstInternalLogic(t,r,n)}atLeastOneSepFirstInternalLogic(t,r,n){const i=r.DEF,a=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),a);for(;this.tokenMatcher(this.LA(1),a)===!0;)this.CONSUME(a),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,a,o,i,K4],o,g1,t,K4)}else throw this.raiseEarlyExitException(t,Ir.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG)}manyInternal(t,r){const n=this.getKeyForAutomaticLookahead(Yw,t);return this.manyInternalLogic(t,r,n)}manyInternalLogic(t,r,n){let i=this.getLaFuncFromCache(n),a;if(typeof r!="function"){a=r.DEF;const o=r.GATE;if(o!==void 0){const l=i;i=()=>o.call(this)&&l.call(this)}}else a=r;let s=!0;for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(a);this.attemptInRepetitionRecovery(this.manyInternal,[t,r],i,Yw,t,xpt,s)}manySepFirstInternal(t,r){const n=this.getKeyForAutomaticLookahead(qw,t);this.manySepFirstInternalLogic(t,r,n)}manySepFirstInternalLogic(t,r,n){const i=r.DEF,a=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),a);for(;this.tokenMatcher(this.LA(1),a)===!0;)this.CONSUME(a),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,a,o,i,j4],o,qw,t,j4)}}repetitionSepSecondInternal(t,r,n,i,a){for(;n();)this.CONSUME(r),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,r,n,i,a],n,g1,t,a)}doSingleRepetition(t){const r=this.getLexerPosition();return t.call(this),this.getLexerPosition()>r}orInternal(t,r){const n=this.getKeyForAutomaticLookahead(S9,r),i=We(t)?t:t.DEF,s=this.getLaFuncFromCache(n).call(this,i);if(s!==void 0)return i[s].ALT.call(this);this.raiseNoAltException(r,t.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const t=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new qpt(r,t))}}subruleInternal(t,r,n){let i;try{const a=n!==void 0?n.ARGS:void 0;return this.subruleIdx=r,i=t.apply(this,a),this.cstPostNonTerminal(i,n!==void 0&&n.LABEL!==void 0?n.LABEL:t.ruleName),i}catch(a){throw this.subruleInternalError(a,n,t.ruleName)}}subruleInternalError(t,r,n){throw Qv(t)&&t.partialCstResult!==void 0&&(this.cstPostNonTerminal(t.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:n),delete t.partialCstResult),t}consumeInternal(t,r,n){let i;try{const a=this.LA(1);this.tokenMatcher(a,t)===!0?(this.consumeToken(),i=a):this.consumeInternalError(t,a,n)}catch(a){i=this.consumeInternalRecovery(t,r,a)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:t.name,i),i}consumeInternalError(t,r,n){let i;const a=this.LA(0);throw n!==void 0&&n.ERR_MSG?i=n.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:r,previous:a,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new k9(i,r,a))}consumeInternalRecovery(t,r,n){if(this.recoveryEnabled&&n.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(t,r);try{return this.tryInRuleRecovery(t,i)}catch(a){throw a.name===C9?n:a}}else throw n}saveRecogState(){const t=this.errors,r=un(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK}ruleInvocationStateUpdate(t,r,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]}shortRuleNameToFullName(t){return this.shortRuleNameToFull[t]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Vo)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class g0t{initErrorHandler(t){this._errors=[],this.errorMessageProvider=ke(t,"errorMessageProvider")?t.errorMessageProvider:ro.errorMessageProvider}SAVE_ERROR(t){if(Qv(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:un(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return un(this._errors)}set errors(t){this._errors=t}raiseEarlyExitException(t,r,n){const i=this.getCurrRuleFullName(),a=this.getGAstProductions()[i],o=Vy(t,a,r,this.maxLookahead)[0],l=[];for(let h=1;h<=this.maxLookahead;h++)l.push(this.LA(h));const u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:l,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new Xpt(u,this.LA(1),this.LA(0)))}raiseNoAltException(t,r){const n=this.getCurrRuleFullName(),i=this.getGAstProductions()[n],a=zy(t,i,this.maxLookahead),s=[];for(let u=1;u<=this.maxLookahead;u++)s.push(this.LA(u));const o=this.LA(0),l=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:a,actual:s,previous:o,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Hpt(l,this.LA(1),o))}}class p0t{initContentAssist(){}computeContentAssist(t,r){const n=this.gastProductionsCache[t];if(sr(n))throw Error(`Rule ->${t}<- does not exist in this grammar.`);return d9([n],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(t){const r=$a(t.ruleStack),i=this.getGAstProductions()[r];return new ypt(i,t).startWalking()}}const Uy={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Uy);const e5=!0,r5=Math.pow(2,rl)-1,L9=h9({name:"RECORDING_PHASE_TOKEN",pattern:Ai.NA});kp([L9]);const R9=yS(L9,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(R9);const v0t={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class m0t{initGastRecorder(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let t=0;t<10;t++){const r=t>0?t:"";this[`CONSUME${r}`]=function(n,i){return this.consumeInternalRecord(n,t,i)},this[`SUBRULE${r}`]=function(n,i){return this.subruleInternalRecord(n,t,i)},this[`OPTION${r}`]=function(n){return this.optionInternalRecord(n,t)},this[`OR${r}`]=function(n){return this.orInternalRecord(n,t)},this[`MANY${r}`]=function(n){this.manyInternalRecord(t,n)},this[`MANY_SEP${r}`]=function(n){this.manySepFirstInternalRecord(t,n)},this[`AT_LEAST_ONE${r}`]=function(n){this.atLeastOneInternalRecord(t,n)},this[`AT_LEAST_ONE_SEP${r}`]=function(n){this.atLeastOneSepFirstInternalRecord(t,n)}}this.consume=function(t,r,n){return this.consumeInternalRecord(r,t,n)},this.subrule=function(t,r,n){return this.subruleInternalRecord(r,t,n)},this.option=function(t,r){return this.optionInternalRecord(r,t)},this.or=function(t,r){return this.orInternalRecord(r,t)},this.many=function(t,r){this.manyInternalRecord(t,r)},this.atLeastOne=function(t,r){this.atLeastOneInternalRecord(t,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const t=this;for(let r=0;r<10;r++){const n=r>0?r:"";delete t[`CONSUME${n}`],delete t[`SUBRULE${n}`],delete t[`OPTION${n}`],delete t[`OR${n}`],delete t[`MANY${n}`],delete t[`MANY_SEP${n}`],delete t[`AT_LEAST_ONE${n}`],delete t[`AT_LEAST_ONE_SEP${n}`]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA})}ACTION_RECORD(t){}BACKTRACK_RECORD(t,r){return()=>!0}LA_RECORD(t){return tm}topLevelRuleRecord(t,r){try{const n=new of({definition:[],name:t});return n.name=t,this.recordingProdStack.push(n),r.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(t,r){return Bf.call(this,On,t,r)}atLeastOneInternalRecord(t,r){Bf.call(this,Zi,r,t)}atLeastOneSepFirstInternalRecord(t,r){Bf.call(this,Qi,r,t,e5)}manyInternalRecord(t,r){Bf.call(this,Pr,r,t)}manySepFirstInternalRecord(t,r){Bf.call(this,$i,r,t,e5)}orInternalRecord(t,r){return y0t.call(this,t,r)}subruleInternalRecord(t,r,n){if(Jv(r),!t||ke(t,"ruleName")===!1){const o=new Error(`<SUBRULE${n5(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(t)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=us(this.recordingProdStack),a=t.ruleName,s=new pi({idx:r,nonTerminalName:a,label:n==null?void 0:n.LABEL,referencedRule:void 0});return i.definition.push(s),this.outputCst?v0t:Uy}consumeInternalRecord(t,r,n){if(Jv(r),!c9(t)){const s=new Error(`<CONSUME${n5(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(t)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw s.KNOWN_RECORDER_ERROR=!0,s}const i=us(this.recordingProdStack),a=new Sr({idx:r,terminalType:t,label:n==null?void 0:n.LABEL});return i.definition.push(a),R9}}function Bf(e,t,r,n=!1){Jv(r);const i=us(this.recordingProdStack),a=ma(t)?t:t.DEF,s=new e({definition:[],idx:r});return n&&(s.separator=t.SEP),ke(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(s),a.call(this),i.definition.push(s),this.recordingProdStack.pop(),Uy}function y0t(e,t){Jv(t);const r=us(this.recordingProdStack),n=We(e)===!1,i=n===!1?e:e.DEF,a=new zi({definition:[],idx:t,ignoreAmbiguities:n&&e.IGNORE_AMBIGUITIES===!0});ke(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD);const s=QB(i,o=>ma(o.GATE));return a.hasPredicates=s,r.definition.push(a),St(i,o=>{const l=new Ni({definition:[]});a.definition.push(l),ke(o,"IGNORE_AMBIGUITIES")?l.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:ke(o,"GATE")&&(l.ignoreAmbiguities=!0),this.recordingProdStack.push(l),o.ALT.call(this),this.recordingProdStack.pop()}),Uy}function n5(e){return e===0?"":`${e}`}function Jv(e){if(e<0||e>r5){const t=new Error(`Invalid DSL Method idx value: <${e}>
	Idx value must be a none negative value smaller than ${r5+1}`);throw t.KNOWN_RECORDER_ERROR=!0,t}}class x0t{initPerformanceTracer(t){if(ke(t,"traceInitPerf")){const r=t.traceInitPerf,n=typeof r=="number";this.traceInitMaxIdent=n?r:1/0,this.traceInitPerf=n?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=ro.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(t,r){if(this.traceInitPerf===!0){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${t}>`);const{time:i,value:a}=JF(r),s=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(`${n}<-- <${t}> time: ${i}ms`),this.traceInitIndent--,a}else return r()}}function b0t(e,t){t.forEach(r=>{const n=r.prototype;Object.getOwnPropertyNames(n).forEach(i=>{if(i==="constructor")return;const a=Object.getOwnPropertyDescriptor(n,i);a&&(a.get||a.set)?Object.defineProperty(e.prototype,i,a):e.prototype[i]=r.prototype[i]})})}const tm=yS(Vo,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(tm);const ro=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:au,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),em=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var vi;(function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",e[e.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(vi||(vi={}));function i5(e=void 0){return function(){return e}}class Cp{static performSelfAnalysis(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let t;this.selfAnalysisDone=!0;const r=this.className;this.TRACE_INIT("toFastProps",()=>{t9(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),St(this.definedRulesNames,i=>{const s=this[i].originalGrammarAction;let o;this.TRACE_INIT(`${i} Rule`,()=>{o=this.topLevelRuleRecord(i,s)}),this.gastProductionsCache[i]=o})}finally{this.disableRecording()}});let n=[];if(this.TRACE_INIT("Grammar Resolving",()=>{n=Wpt({rules:yr(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)}),this.TRACE_INIT("Grammar Validations",()=>{if(rr(n)&&this.skipValidations===!1){const i=Ypt({rules:yr(this.gastProductionsCache),tokenTypes:yr(this.tokensMap),errMsgProvider:Pl,grammarName:r}),a=Lpt({lookaheadStrategy:this.lookaheadStrategy,rules:yr(this.gastProductionsCache),tokenTypes:yr(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(i,a)}}),rr(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=Agt(yr(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,a;(a=(i=this.lookaheadStrategy).initialize)===null||a===void 0||a.call(i,{rules:yr(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(yr(this.gastProductionsCache))})),!Cp.DEFER_DEFINITION_ERRORS_HANDLING&&!rr(this.definitionErrors))throw t=ee(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${t.join(`
-------------------------------
`)}`)})}constructor(t,r){this.definitionErrors=[],this.selfAnalysisDone=!1;const n=this;if(n.initErrorHandler(r),n.initLexerAdapter(),n.initLooksAhead(r),n.initRecognizerEngine(t,r),n.initRecoverable(r),n.initTreeBuilder(r),n.initContentAssist(),n.initGastRecorder(r),n.initPerformanceTracer(r),ke(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=ke(r,"skipValidations")?r.skipValidations:ro.skipValidations}}Cp.DEFER_DEFINITION_ERRORS_HANDLING=!1;b0t(Cp,[Kpt,Jpt,u0t,h0t,d0t,f0t,g0t,p0t,m0t,x0t]);class T0t extends Cp{constructor(t,r=ro){const n=un(r);n.outputCst=!1,super(t,n)}}function Mh(e,t,r){return`${e.name}_${t}_${r}`}const Go=1,w0t=2,I9=4,N9=5,Sp=7,E0t=8,k0t=9,C0t=10,S0t=11,D9=12;class wS{constructor(t){this.target=t}isEpsilon(){return!1}}class ES extends wS{constructor(t,r){super(t),this.tokenType=r}}class M9 extends wS{constructor(t){super(t)}isEpsilon(){return!0}}class kS extends wS{constructor(t,r,n){super(t),this.rule=r,this.followState=n}isEpsilon(){return!0}}function _0t(e){const t={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};A0t(t,e);const r=e.length;for(let n=0;n<r;n++){const i=e[n],a=Sc(t,i,i);a!==void 0&&$0t(t,i,a)}return t}function A0t(e,t){const r=t.length;for(let n=0;n<r;n++){const i=t[n],a=xn(e,i,void 0,{type:w0t}),s=xn(e,i,void 0,{type:Sp});a.stop=s,e.ruleToStartState.set(i,a),e.ruleToStopState.set(i,s)}}function O9(e,t,r){return r instanceof Sr?CS(e,t,r.terminalType,r):r instanceof pi?F0t(e,t,r):r instanceof zi?D0t(e,t,r):r instanceof On?M0t(e,t,r):r instanceof Pr?L0t(e,t,r):r instanceof $i?R0t(e,t,r):r instanceof Zi?I0t(e,t,r):r instanceof Qi?N0t(e,t,r):Sc(e,t,r)}function L0t(e,t,r){const n=xn(e,t,r,{type:N9});nl(e,n);const i=cf(e,t,n,r,Sc(e,t,r));return B9(e,t,r,i)}function R0t(e,t,r){const n=xn(e,t,r,{type:N9});nl(e,n);const i=cf(e,t,n,r,Sc(e,t,r)),a=CS(e,t,r.separator,r);return B9(e,t,r,i,a)}function I0t(e,t,r){const n=xn(e,t,r,{type:I9});nl(e,n);const i=cf(e,t,n,r,Sc(e,t,r));return P9(e,t,r,i)}function N0t(e,t,r){const n=xn(e,t,r,{type:I9});nl(e,n);const i=cf(e,t,n,r,Sc(e,t,r)),a=CS(e,t,r.separator,r);return P9(e,t,r,i,a)}function D0t(e,t,r){const n=xn(e,t,r,{type:Go});nl(e,n);const i=ee(r.definition,s=>O9(e,t,s));return cf(e,t,n,r,...i)}function M0t(e,t,r){const n=xn(e,t,r,{type:Go});nl(e,n);const i=cf(e,t,n,r,Sc(e,t,r));return O0t(e,t,r,i)}function Sc(e,t,r){const n=Fr(ee(r.definition,i=>O9(e,t,i)),i=>i!==void 0);return n.length===1?n[0]:n.length===0?void 0:B0t(e,n)}function P9(e,t,r,n,i){const a=n.left,s=n.right,o=xn(e,t,r,{type:S0t});nl(e,o);const l=xn(e,t,r,{type:D9});return a.loopback=o,l.loopback=o,e.decisionMap[Mh(t,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",r.idx)]=o,Yr(s,o),i===void 0?(Yr(o,a),Yr(o,l)):(Yr(o,l),Yr(o,i.left),Yr(i.right,a)),{left:a,right:l}}function B9(e,t,r,n,i){const a=n.left,s=n.right,o=xn(e,t,r,{type:C0t});nl(e,o);const l=xn(e,t,r,{type:D9}),u=xn(e,t,r,{type:k0t});return o.loopback=u,l.loopback=u,Yr(o,a),Yr(o,l),Yr(s,u),i!==void 0?(Yr(u,l),Yr(u,i.left),Yr(i.right,a)):Yr(u,o),e.decisionMap[Mh(t,i?"RepetitionWithSeparator":"Repetition",r.idx)]=o,{left:o,right:l}}function O0t(e,t,r,n){const i=n.left,a=n.right;return Yr(i,a),e.decisionMap[Mh(t,"Option",r.idx)]=i,n}function nl(e,t){return e.decisionStates.push(t),t.decision=e.decisionStates.length-1,t.decision}function cf(e,t,r,n,...i){const a=xn(e,t,n,{type:E0t,start:r});r.end=a;for(const o of i)o!==void 0?(Yr(r,o.left),Yr(o.right,a)):Yr(r,a);const s={left:r,right:a};return e.decisionMap[Mh(t,P0t(n),n.idx)]=r,s}function P0t(e){if(e instanceof zi)return"Alternation";if(e instanceof On)return"Option";if(e instanceof Pr)return"Repetition";if(e instanceof $i)return"RepetitionWithSeparator";if(e instanceof Zi)return"RepetitionMandatory";if(e instanceof Qi)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function B0t(e,t){const r=t.length;for(let a=0;a<r-1;a++){const s=t[a];let o;s.left.transitions.length===1&&(o=s.left.transitions[0]);const l=o instanceof kS,u=o,h=t[a+1].left;s.left.type===Go&&s.right.type===Go&&o!==void 0&&(l&&u.followState===s.right||o.target===s.right)?(l?u.followState=h:o.target=h,z0t(e,s.right)):Yr(s.right,h)}const n=t[0],i=t[r-1];return{left:n.left,right:i.right}}function CS(e,t,r,n){const i=xn(e,t,n,{type:Go}),a=xn(e,t,n,{type:Go});return SS(i,new ES(a,r)),{left:i,right:a}}function F0t(e,t,r){const n=r.referencedRule,i=e.ruleToStartState.get(n),a=xn(e,t,r,{type:Go}),s=xn(e,t,r,{type:Go}),o=new kS(i,n,s);return SS(a,o),{left:a,right:s}}function $0t(e,t,r){const n=e.ruleToStartState.get(t);Yr(n,r.left);const i=e.ruleToStopState.get(t);return Yr(r.right,i),{left:n,right:i}}function Yr(e,t){const r=new M9(t);SS(e,r)}function xn(e,t,r,n){const i=Object.assign({atn:e,production:r,epsilonOnlyTransitions:!1,rule:t,transitions:[],nextTokenWithinRule:[],stateNumber:e.states.length},n);return e.states.push(i),i}function SS(e,t){e.transitions.length===0&&(e.epsilonOnlyTransitions=t.isEpsilon()),e.transitions.push(t)}function z0t(e,t){e.states.splice(e.states.indexOf(t),1)}const rm={};class jw{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(t){const r=F9(t);r in this.map||(this.map[r]=this.configs.length,this.configs.push(t))}get elements(){return this.configs}get alts(){return ee(this.configs,t=>t.alt)}get key(){let t="";for(const r in this.map)t+=r+":";return t}}function F9(e,t=!0){return`${t?`a${e.alt}`:""}s${e.state.stateNumber}:${e.stack.map(r=>r.stateNumber.toString()).join("_")}`}function V0t(e,t){const r={};return n=>{const i=n.toString();let a=r[i];return a!==void 0||(a={atnStartState:e,decision:t,states:{}},r[i]=a),a}}class $9{constructor(){this.predicates=[]}is(t){return t>=this.predicates.length||this.predicates[t]}set(t,r){this.predicates[t]=r}toString(){let t="";const r=this.predicates.length;for(let n=0;n<r;n++)t+=this.predicates[n]===!0?"1":"0";return t}}const a5=new $9;class G0t extends TS{constructor(t){var r;super(),this.logging=(r=t==null?void 0:t.logging)!==null&&r!==void 0?r:n=>console.log(n)}initialize(t){this.atn=_0t(t.rules),this.dfas=U0t(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(t){const{prodOccurrence:r,rule:n,hasPredicates:i,dynamicTokensEnabled:a}=t,s=this.dfas,o=this.logging,l=Mh(n,"Alternation",r),h=this.atn.decisionMap[l].decision,f=ee(Z4({maxLookahead:1,occurrence:r,prodType:"Alternation",rule:n}),d=>ee(d,g=>g[0]));if(s5(f,!1)&&!a){const d=Xr(f,(g,p,v)=>(St(p,m=>{m&&(g[m.tokenTypeIdx]=v,St(m.categoryMatches,y=>{g[y]=v}))}),g),{});return i?function(g){var p;const v=this.LA(1),m=d[v.tokenTypeIdx];if(g!==void 0&&m!==void 0){const y=(p=g[m])===null||p===void 0?void 0:p.GATE;if(y!==void 0&&y.call(this)===!1)return}return m}:function(){const g=this.LA(1);return d[g.tokenTypeIdx]}}else return i?function(d){const g=new $9,p=d===void 0?0:d.length;for(let m=0;m<p;m++){const y=d==null?void 0:d[m].GATE;g.set(m,y===void 0||y.call(this))}const v=wx.call(this,s,h,g,o);return typeof v=="number"?v:void 0}:function(){const d=wx.call(this,s,h,a5,o);return typeof d=="number"?d:void 0}}buildLookaheadForOptional(t){const{prodOccurrence:r,rule:n,prodType:i,dynamicTokensEnabled:a}=t,s=this.dfas,o=this.logging,l=Mh(n,i,r),h=this.atn.decisionMap[l].decision,f=ee(Z4({maxLookahead:1,occurrence:r,prodType:i,rule:n}),d=>ee(d,g=>g[0]));if(s5(f)&&f[0][0]&&!a){const d=f[0],g=yn(d);if(g.length===1&&rr(g[0].categoryMatches)){const v=g[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===v}}else{const p=Xr(g,(v,m)=>(m!==void 0&&(v[m.tokenTypeIdx]=!0,St(m.categoryMatches,y=>{v[y]=!0})),v),{});return function(){const v=this.LA(1);return p[v.tokenTypeIdx]===!0}}}return function(){const d=wx.call(this,s,h,a5,o);return typeof d=="object"?!1:d===0}}}function s5(e,t=!0){const r=new Set;for(const n of e){const i=new Set;for(const a of n){if(a===void 0){if(t)break;return!1}const s=[a.tokenTypeIdx].concat(a.categoryMatches);for(const o of s)if(r.has(o)){if(!i.has(o))return!1}else r.add(o),i.add(o)}}return!0}function U0t(e){const t=e.decisionStates.length,r=Array(t);for(let n=0;n<t;n++)r[n]=V0t(e.decisionStates[n],n);return r}function wx(e,t,r,n){const i=e[t](r);let a=i.start;if(a===void 0){const o=t1t(i.atnStartState);a=V9(i,z9(o)),i.start=a}return W0t.apply(this,[i,a,r,n])}function W0t(e,t,r,n){let i=t,a=1;const s=[];let o=this.LA(a++);for(;;){let l=K0t(i,o);if(l===void 0&&(l=Y0t.apply(this,[e,i,o,a,r,n])),l===rm)return j0t(s,i,o);if(l.isAcceptState===!0)return l.prediction;i=l,s.push(o),o=this.LA(a++)}}function Y0t(e,t,r,n,i,a){const s=Z0t(t.configs,r,i);if(s.size===0)return o5(e,t,r,rm),rm;let o=z9(s);const l=J0t(s,i);if(l!==void 0)o.isAcceptState=!0,o.prediction=l,o.configs.uniqueAlt=l;else if(i1t(s)){const u=Nh(s.alts);o.isAcceptState=!0,o.prediction=u,o.configs.uniqueAlt=u,H0t.apply(this,[e,n,s.alts,a])}return o=o5(e,t,r,o),o}function H0t(e,t,r,n){const i=[];for(let u=1;u<=t;u++)i.push(this.LA(u).tokenType);const a=e.atnStartState,s=a.rule,o=a.production,l=q0t({topLevelRule:s,ambiguityIndices:r,production:o,prefixPath:i});n(l)}function q0t(e){const t=ee(e.prefixPath,i=>mu(i)).join(", "),r=e.production.idx===0?"":e.production.idx;let n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(", ")}> in <${X0t(e.production)}${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n}function X0t(e){if(e instanceof pi)return"SUBRULE";if(e instanceof On)return"OPTION";if(e instanceof zi)return"OR";if(e instanceof Zi)return"AT_LEAST_ONE";if(e instanceof Qi)return"AT_LEAST_ONE_SEP";if(e instanceof $i)return"MANY_SEP";if(e instanceof Pr)return"MANY";if(e instanceof Sr)return"CONSUME";throw Error("non exhaustive match")}function j0t(e,t,r){const n=qi(t.configs.elements,a=>a.state.transitions),i=Qct(n.filter(a=>a instanceof ES).map(a=>a.tokenType),a=>a.tokenTypeIdx);return{actualToken:r,possibleTokenTypes:i,tokenPath:e}}function K0t(e,t){return e.edges[t.tokenTypeIdx]}function Z0t(e,t,r){const n=new jw,i=[];for(const s of e.elements){if(r.is(s.alt)===!1)continue;if(s.state.type===Sp){i.push(s);continue}const o=s.state.transitions.length;for(let l=0;l<o;l++){const u=s.state.transitions[l],h=Q0t(u,t);h!==void 0&&n.add({state:h,alt:s.alt,stack:s.stack})}}let a;if(i.length===0&&n.size===1&&(a=n),a===void 0){a=new jw;for(const s of n.elements)nm(s,a)}if(i.length>0&&!r1t(a))for(const s of i)a.add(s);return a}function Q0t(e,t){if(e instanceof ES&&f9(t,e.tokenType))return e.target}function J0t(e,t){let r;for(const n of e.elements)if(t.is(n.alt)===!0){if(r===void 0)r=n.alt;else if(r!==n.alt)return}return r}function z9(e){return{configs:e,edges:{},isAcceptState:!1,prediction:-1}}function o5(e,t,r,n){return n=V9(e,n),t.edges[r.tokenTypeIdx]=n,n}function V9(e,t){if(t===rm)return t;const r=t.configs.key,n=e.states[r];return n!==void 0?n:(t.configs.finalize(),e.states[r]=t,t)}function t1t(e){const t=new jw,r=e.transitions.length;for(let n=0;n<r;n++){const a={state:e.transitions[n].target,alt:n,stack:[]};nm(a,t)}return t}function nm(e,t){const r=e.state;if(r.type===Sp){if(e.stack.length>0){const i=[...e.stack],s={state:i.pop(),alt:e.alt,stack:i};nm(s,t)}else t.add(e);return}r.epsilonOnlyTransitions||t.add(e);const n=r.transitions.length;for(let i=0;i<n;i++){const a=r.transitions[i],s=e1t(e,a);s!==void 0&&nm(s,t)}}function e1t(e,t){if(t instanceof M9)return{state:t.target,alt:e.alt,stack:e.stack};if(t instanceof kS){const r=[...e.stack,t.followState];return{state:t.target,alt:e.alt,stack:r}}}function r1t(e){for(const t of e.elements)if(t.state.type===Sp)return!0;return!1}function n1t(e){for(const t of e.elements)if(t.state.type!==Sp)return!1;return!0}function i1t(e){if(n1t(e))return!0;const t=a1t(e.elements);return s1t(t)&&!o1t(t)}function a1t(e){const t=new Map;for(const r of e){const n=F9(r,!1);let i=t.get(n);i===void 0&&(i={},t.set(n,i)),i[r.alt]=!0}return t}function s1t(e){for(const t of Array.from(e.values()))if(Object.keys(t).length>1)return!0;return!1}function o1t(e){for(const t of Array.from(e.values()))if(Object.keys(t).length===1)return!0;return!1}var l5;(function(e){function t(r){return typeof r=="string"}e.is=t})(l5||(l5={}));var Kw;(function(e){function t(r){return typeof r=="string"}e.is=t})(Kw||(Kw={}));var c5;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(r){return typeof r=="number"&&e.MIN_VALUE<=r&&r<=e.MAX_VALUE}e.is=t})(c5||(c5={}));var im;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(r){return typeof r=="number"&&e.MIN_VALUE<=r&&r<=e.MAX_VALUE}e.is=t})(im||(im={}));var nr;(function(e){function t(n,i){return n===Number.MAX_VALUE&&(n=im.MAX_VALUE),i===Number.MAX_VALUE&&(i=im.MAX_VALUE),{line:n,character:i}}e.create=t;function r(n){let i=n;return Lt.objectLiteral(i)&&Lt.uinteger(i.line)&&Lt.uinteger(i.character)}e.is=r})(nr||(nr={}));var Ke;(function(e){function t(n,i,a,s){if(Lt.uinteger(n)&&Lt.uinteger(i)&&Lt.uinteger(a)&&Lt.uinteger(s))return{start:nr.create(n,i),end:nr.create(a,s)};if(nr.is(n)&&nr.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${a}, ${s}]`)}e.create=t;function r(n){let i=n;return Lt.objectLiteral(i)&&nr.is(i.start)&&nr.is(i.end)}e.is=r})(Ke||(Ke={}));var am;(function(e){function t(n,i){return{uri:n,range:i}}e.create=t;function r(n){let i=n;return Lt.objectLiteral(i)&&Ke.is(i.range)&&(Lt.string(i.uri)||Lt.undefined(i.uri))}e.is=r})(am||(am={}));var u5;(function(e){function t(n,i,a,s){return{targetUri:n,targetRange:i,targetSelectionRange:a,originSelectionRange:s}}e.create=t;function r(n){let i=n;return Lt.objectLiteral(i)&&Ke.is(i.targetRange)&&Lt.string(i.targetUri)&&Ke.is(i.targetSelectionRange)&&(Ke.is(i.originSelectionRange)||Lt.undefined(i.originSelectionRange))}e.is=r})(u5||(u5={}));var Zw;(function(e){function t(n,i,a,s){return{red:n,green:i,blue:a,alpha:s}}e.create=t;function r(n){const i=n;return Lt.objectLiteral(i)&&Lt.numberRange(i.red,0,1)&&Lt.numberRange(i.green,0,1)&&Lt.numberRange(i.blue,0,1)&&Lt.numberRange(i.alpha,0,1)}e.is=r})(Zw||(Zw={}));var h5;(function(e){function t(n,i){return{range:n,color:i}}e.create=t;function r(n){const i=n;return Lt.objectLiteral(i)&&Ke.is(i.range)&&Zw.is(i.color)}e.is=r})(h5||(h5={}));var f5;(function(e){function t(n,i,a){return{label:n,textEdit:i,additionalTextEdits:a}}e.create=t;function r(n){const i=n;return Lt.objectLiteral(i)&&Lt.string(i.label)&&(Lt.undefined(i.textEdit)||Ph.is(i))&&(Lt.undefined(i.additionalTextEdits)||Lt.typedArray(i.additionalTextEdits,Ph.is))}e.is=r})(f5||(f5={}));var d5;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(d5||(d5={}));var g5;(function(e){function t(n,i,a,s,o,l){const u={startLine:n,endLine:i};return Lt.defined(a)&&(u.startCharacter=a),Lt.defined(s)&&(u.endCharacter=s),Lt.defined(o)&&(u.kind=o),Lt.defined(l)&&(u.collapsedText=l),u}e.create=t;function r(n){const i=n;return Lt.objectLiteral(i)&&Lt.uinteger(i.startLine)&&Lt.uinteger(i.startLine)&&(Lt.undefined(i.startCharacter)||Lt.uinteger(i.startCharacter))&&(Lt.undefined(i.endCharacter)||Lt.uinteger(i.endCharacter))&&(Lt.undefined(i.kind)||Lt.string(i.kind))}e.is=r})(g5||(g5={}));var Qw;(function(e){function t(n,i){return{location:n,message:i}}e.create=t;function r(n){let i=n;return Lt.defined(i)&&am.is(i.location)&&Lt.string(i.message)}e.is=r})(Qw||(Qw={}));var p5;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(p5||(p5={}));var v5;(function(e){e.Unnecessary=1,e.Deprecated=2})(v5||(v5={}));var m5;(function(e){function t(r){const n=r;return Lt.objectLiteral(n)&&Lt.string(n.href)}e.is=t})(m5||(m5={}));var sm;(function(e){function t(n,i,a,s,o,l){let u={range:n,message:i};return Lt.defined(a)&&(u.severity=a),Lt.defined(s)&&(u.code=s),Lt.defined(o)&&(u.source=o),Lt.defined(l)&&(u.relatedInformation=l),u}e.create=t;function r(n){var i;let a=n;return Lt.defined(a)&&Ke.is(a.range)&&Lt.string(a.message)&&(Lt.number(a.severity)||Lt.undefined(a.severity))&&(Lt.integer(a.code)||Lt.string(a.code)||Lt.undefined(a.code))&&(Lt.undefined(a.codeDescription)||Lt.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(Lt.string(a.source)||Lt.undefined(a.source))&&(Lt.undefined(a.relatedInformation)||Lt.typedArray(a.relatedInformation,Qw.is))}e.is=r})(sm||(sm={}));var Oh;(function(e){function t(n,i,...a){let s={title:n,command:i};return Lt.defined(a)&&a.length>0&&(s.arguments=a),s}e.create=t;function r(n){let i=n;return Lt.defined(i)&&Lt.string(i.title)&&Lt.string(i.command)}e.is=r})(Oh||(Oh={}));var Ph;(function(e){function t(a,s){return{range:a,newText:s}}e.replace=t;function r(a,s){return{range:{start:a,end:a},newText:s}}e.insert=r;function n(a){return{range:a,newText:""}}e.del=n;function i(a){const s=a;return Lt.objectLiteral(s)&&Lt.string(s.newText)&&Ke.is(s.range)}e.is=i})(Ph||(Ph={}));var Jw;(function(e){function t(n,i,a){const s={label:n};return i!==void 0&&(s.needsConfirmation=i),a!==void 0&&(s.description=a),s}e.create=t;function r(n){const i=n;return Lt.objectLiteral(i)&&Lt.string(i.label)&&(Lt.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Lt.string(i.description)||i.description===void 0)}e.is=r})(Jw||(Jw={}));var Bh;(function(e){function t(r){const n=r;return Lt.string(n)}e.is=t})(Bh||(Bh={}));var y5;(function(e){function t(a,s,o){return{range:a,newText:s,annotationId:o}}e.replace=t;function r(a,s,o){return{range:{start:a,end:a},newText:s,annotationId:o}}e.insert=r;function n(a,s){return{range:a,newText:"",annotationId:s}}e.del=n;function i(a){const s=a;return Ph.is(s)&&(Jw.is(s.annotationId)||Bh.is(s.annotationId))}e.is=i})(y5||(y5={}));var tE;(function(e){function t(n,i){return{textDocument:n,edits:i}}e.create=t;function r(n){let i=n;return Lt.defined(i)&&aE.is(i.textDocument)&&Array.isArray(i.edits)}e.is=r})(tE||(tE={}));var eE;(function(e){function t(n,i,a){let s={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}e.create=t;function r(n){let i=n;return i&&i.kind==="create"&&Lt.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Lt.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Lt.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Bh.is(i.annotationId))}e.is=r})(eE||(eE={}));var rE;(function(e){function t(n,i,a,s){let o={kind:"rename",oldUri:n,newUri:i};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(o.options=a),s!==void 0&&(o.annotationId=s),o}e.create=t;function r(n){let i=n;return i&&i.kind==="rename"&&Lt.string(i.oldUri)&&Lt.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Lt.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Lt.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Bh.is(i.annotationId))}e.is=r})(rE||(rE={}));var nE;(function(e){function t(n,i,a){let s={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}e.create=t;function r(n){let i=n;return i&&i.kind==="delete"&&Lt.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Lt.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Lt.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Bh.is(i.annotationId))}e.is=r})(nE||(nE={}));var iE;(function(e){function t(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>Lt.string(i.kind)?eE.is(i)||rE.is(i)||nE.is(i):tE.is(i)))}e.is=t})(iE||(iE={}));var x5;(function(e){function t(n){return{uri:n}}e.create=t;function r(n){let i=n;return Lt.defined(i)&&Lt.string(i.uri)}e.is=r})(x5||(x5={}));var b5;(function(e){function t(n,i){return{uri:n,version:i}}e.create=t;function r(n){let i=n;return Lt.defined(i)&&Lt.string(i.uri)&&Lt.integer(i.version)}e.is=r})(b5||(b5={}));var aE;(function(e){function t(n,i){return{uri:n,version:i}}e.create=t;function r(n){let i=n;return Lt.defined(i)&&Lt.string(i.uri)&&(i.version===null||Lt.integer(i.version))}e.is=r})(aE||(aE={}));var T5;(function(e){function t(n,i,a,s){return{uri:n,languageId:i,version:a,text:s}}e.create=t;function r(n){let i=n;return Lt.defined(i)&&Lt.string(i.uri)&&Lt.string(i.languageId)&&Lt.integer(i.version)&&Lt.string(i.text)}e.is=r})(T5||(T5={}));var sE;(function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(r){const n=r;return n===e.PlainText||n===e.Markdown}e.is=t})(sE||(sE={}));var Rg;(function(e){function t(r){const n=r;return Lt.objectLiteral(r)&&sE.is(n.kind)&&Lt.string(n.value)}e.is=t})(Rg||(Rg={}));var w5;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(w5||(w5={}));var E5;(function(e){e.PlainText=1,e.Snippet=2})(E5||(E5={}));var k5;(function(e){e.Deprecated=1})(k5||(k5={}));var C5;(function(e){function t(n,i,a){return{newText:n,insert:i,replace:a}}e.create=t;function r(n){const i=n;return i&&Lt.string(i.newText)&&Ke.is(i.insert)&&Ke.is(i.replace)}e.is=r})(C5||(C5={}));var S5;(function(e){e.asIs=1,e.adjustIndentation=2})(S5||(S5={}));var _5;(function(e){function t(r){const n=r;return n&&(Lt.string(n.detail)||n.detail===void 0)&&(Lt.string(n.description)||n.description===void 0)}e.is=t})(_5||(_5={}));var A5;(function(e){function t(r){return{label:r}}e.create=t})(A5||(A5={}));var L5;(function(e){function t(r,n){return{items:r||[],isIncomplete:!!n}}e.create=t})(L5||(L5={}));var om;(function(e){function t(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function r(n){const i=n;return Lt.string(i)||Lt.objectLiteral(i)&&Lt.string(i.language)&&Lt.string(i.value)}e.is=r})(om||(om={}));var R5;(function(e){function t(r){let n=r;return!!n&&Lt.objectLiteral(n)&&(Rg.is(n.contents)||om.is(n.contents)||Lt.typedArray(n.contents,om.is))&&(r.range===void 0||Ke.is(r.range))}e.is=t})(R5||(R5={}));var I5;(function(e){function t(r,n){return n?{label:r,documentation:n}:{label:r}}e.create=t})(I5||(I5={}));var N5;(function(e){function t(r,n,...i){let a={label:r};return Lt.defined(n)&&(a.documentation=n),Lt.defined(i)?a.parameters=i:a.parameters=[],a}e.create=t})(N5||(N5={}));var D5;(function(e){e.Text=1,e.Read=2,e.Write=3})(D5||(D5={}));var M5;(function(e){function t(r,n){let i={range:r};return Lt.number(n)&&(i.kind=n),i}e.create=t})(M5||(M5={}));var O5;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(O5||(O5={}));var P5;(function(e){e.Deprecated=1})(P5||(P5={}));var B5;(function(e){function t(r,n,i,a,s){let o={name:r,kind:n,location:{uri:a,range:i}};return s&&(o.containerName=s),o}e.create=t})(B5||(B5={}));var F5;(function(e){function t(r,n,i,a){return a!==void 0?{name:r,kind:n,location:{uri:i,range:a}}:{name:r,kind:n,location:{uri:i}}}e.create=t})(F5||(F5={}));var $5;(function(e){function t(n,i,a,s,o,l){let u={name:n,detail:i,kind:a,range:s,selectionRange:o};return l!==void 0&&(u.children=l),u}e.create=t;function r(n){let i=n;return i&&Lt.string(i.name)&&Lt.number(i.kind)&&Ke.is(i.range)&&Ke.is(i.selectionRange)&&(i.detail===void 0||Lt.string(i.detail))&&(i.deprecated===void 0||Lt.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}e.is=r})($5||($5={}));var z5;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(z5||(z5={}));var lm;(function(e){e.Invoked=1,e.Automatic=2})(lm||(lm={}));var V5;(function(e){function t(n,i,a){let s={diagnostics:n};return i!=null&&(s.only=i),a!=null&&(s.triggerKind=a),s}e.create=t;function r(n){let i=n;return Lt.defined(i)&&Lt.typedArray(i.diagnostics,sm.is)&&(i.only===void 0||Lt.typedArray(i.only,Lt.string))&&(i.triggerKind===void 0||i.triggerKind===lm.Invoked||i.triggerKind===lm.Automatic)}e.is=r})(V5||(V5={}));var G5;(function(e){function t(n,i,a){let s={title:n},o=!0;return typeof i=="string"?(o=!1,s.kind=i):Oh.is(i)?s.command=i:s.edit=i,o&&a!==void 0&&(s.kind=a),s}e.create=t;function r(n){let i=n;return i&&Lt.string(i.title)&&(i.diagnostics===void 0||Lt.typedArray(i.diagnostics,sm.is))&&(i.kind===void 0||Lt.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Oh.is(i.command))&&(i.isPreferred===void 0||Lt.boolean(i.isPreferred))&&(i.edit===void 0||iE.is(i.edit))}e.is=r})(G5||(G5={}));var U5;(function(e){function t(n,i){let a={range:n};return Lt.defined(i)&&(a.data=i),a}e.create=t;function r(n){let i=n;return Lt.defined(i)&&Ke.is(i.range)&&(Lt.undefined(i.command)||Oh.is(i.command))}e.is=r})(U5||(U5={}));var W5;(function(e){function t(n,i){return{tabSize:n,insertSpaces:i}}e.create=t;function r(n){let i=n;return Lt.defined(i)&&Lt.uinteger(i.tabSize)&&Lt.boolean(i.insertSpaces)}e.is=r})(W5||(W5={}));var Y5;(function(e){function t(n,i,a){return{range:n,target:i,data:a}}e.create=t;function r(n){let i=n;return Lt.defined(i)&&Ke.is(i.range)&&(Lt.undefined(i.target)||Lt.string(i.target))}e.is=r})(Y5||(Y5={}));var H5;(function(e){function t(n,i){return{range:n,parent:i}}e.create=t;function r(n){let i=n;return Lt.objectLiteral(i)&&Ke.is(i.range)&&(i.parent===void 0||e.is(i.parent))}e.is=r})(H5||(H5={}));var q5;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"})(q5||(q5={}));var X5;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(X5||(X5={}));var j5;(function(e){function t(r){const n=r;return Lt.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}e.is=t})(j5||(j5={}));var K5;(function(e){function t(n,i){return{range:n,text:i}}e.create=t;function r(n){const i=n;return i!=null&&Ke.is(i.range)&&Lt.string(i.text)}e.is=r})(K5||(K5={}));var Z5;(function(e){function t(n,i,a){return{range:n,variableName:i,caseSensitiveLookup:a}}e.create=t;function r(n){const i=n;return i!=null&&Ke.is(i.range)&&Lt.boolean(i.caseSensitiveLookup)&&(Lt.string(i.variableName)||i.variableName===void 0)}e.is=r})(Z5||(Z5={}));var Q5;(function(e){function t(n,i){return{range:n,expression:i}}e.create=t;function r(n){const i=n;return i!=null&&Ke.is(i.range)&&(Lt.string(i.expression)||i.expression===void 0)}e.is=r})(Q5||(Q5={}));var J5;(function(e){function t(n,i){return{frameId:n,stoppedLocation:i}}e.create=t;function r(n){const i=n;return Lt.defined(i)&&Ke.is(n.stoppedLocation)}e.is=r})(J5||(J5={}));var oE;(function(e){e.Type=1,e.Parameter=2;function t(r){return r===1||r===2}e.is=t})(oE||(oE={}));var lE;(function(e){function t(n){return{value:n}}e.create=t;function r(n){const i=n;return Lt.objectLiteral(i)&&(i.tooltip===void 0||Lt.string(i.tooltip)||Rg.is(i.tooltip))&&(i.location===void 0||am.is(i.location))&&(i.command===void 0||Oh.is(i.command))}e.is=r})(lE||(lE={}));var tL;(function(e){function t(n,i,a){const s={position:n,label:i};return a!==void 0&&(s.kind=a),s}e.create=t;function r(n){const i=n;return Lt.objectLiteral(i)&&nr.is(i.position)&&(Lt.string(i.label)||Lt.typedArray(i.label,lE.is))&&(i.kind===void 0||oE.is(i.kind))&&i.textEdits===void 0||Lt.typedArray(i.textEdits,Ph.is)&&(i.tooltip===void 0||Lt.string(i.tooltip)||Rg.is(i.tooltip))&&(i.paddingLeft===void 0||Lt.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Lt.boolean(i.paddingRight))}e.is=r})(tL||(tL={}));var eL;(function(e){function t(r){return{kind:"snippet",value:r}}e.createSnippet=t})(eL||(eL={}));var rL;(function(e){function t(r,n,i,a){return{insertText:r,filterText:n,range:i,command:a}}e.create=t})(rL||(rL={}));var nL;(function(e){function t(r){return{items:r}}e.create=t})(nL||(nL={}));var iL;(function(e){e.Invoked=0,e.Automatic=1})(iL||(iL={}));var aL;(function(e){function t(r,n){return{range:r,text:n}}e.create=t})(aL||(aL={}));var sL;(function(e){function t(r,n){return{triggerKind:r,selectedCompletionInfo:n}}e.create=t})(sL||(sL={}));var oL;(function(e){function t(r){const n=r;return Lt.objectLiteral(n)&&Kw.is(n.uri)&&Lt.string(n.name)}e.is=t})(oL||(oL={}));var lL;(function(e){function t(a,s,o,l){return new l1t(a,s,o,l)}e.create=t;function r(a){let s=a;return!!(Lt.defined(s)&&Lt.string(s.uri)&&(Lt.undefined(s.languageId)||Lt.string(s.languageId))&&Lt.uinteger(s.lineCount)&&Lt.func(s.getText)&&Lt.func(s.positionAt)&&Lt.func(s.offsetAt))}e.is=r;function n(a,s){let o=a.getText(),l=i(s,(h,f)=>{let d=h.range.start.line-f.range.start.line;return d===0?h.range.start.character-f.range.start.character:d}),u=o.length;for(let h=l.length-1;h>=0;h--){let f=l[h],d=a.offsetAt(f.range.start),g=a.offsetAt(f.range.end);if(g<=u)o=o.substring(0,d)+f.newText+o.substring(g,o.length);else throw new Error("Overlapping edit");u=d}return o}e.applyEdits=n;function i(a,s){if(a.length<=1)return a;const o=a.length/2|0,l=a.slice(0,o),u=a.slice(o);i(l,s),i(u,s);let h=0,f=0,d=0;for(;h<l.length&&f<u.length;)s(l[h],u[f])<=0?a[d++]=l[h++]:a[d++]=u[f++];for(;h<l.length;)a[d++]=l[h++];for(;f<u.length;)a[d++]=u[f++];return a}})(lL||(lL={}));let l1t=class{constructor(t,r,n,i){this._uri=t,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let r=this.offsetAt(t.start),n=this.offsetAt(t.end);return this._content.substring(r,n)}return this._content}update(t,r){this._content=t.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let t=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(t.push(i),n=!1);let a=r.charAt(i);n=a==="\r"||a===`
`,a==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&t.push(r.length),this._lineOffsets=t}return this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return nr.create(0,t);for(;n<i;){let s=Math.floor((n+i)/2);r[s]>t?i=s:n=s+1}let a=n-1;return nr.create(a,t-r[a])}offsetAt(t){let r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;let n=r[t.line],i=t.line+1<r.length?r[t.line+1]:this._content.length;return Math.max(Math.min(n+t.character,i),n)}get lineCount(){return this.getLineOffsets().length}};var Lt;(function(e){const t=Object.prototype.toString;function r(g){return typeof g<"u"}e.defined=r;function n(g){return typeof g>"u"}e.undefined=n;function i(g){return g===!0||g===!1}e.boolean=i;function a(g){return t.call(g)==="[object String]"}e.string=a;function s(g){return t.call(g)==="[object Number]"}e.number=s;function o(g,p,v){return t.call(g)==="[object Number]"&&p<=g&&g<=v}e.numberRange=o;function l(g){return t.call(g)==="[object Number]"&&-2147483648<=g&&g<=2147483647}e.integer=l;function u(g){return t.call(g)==="[object Number]"&&0<=g&&g<=2147483647}e.uinteger=u;function h(g){return t.call(g)==="[object Function]"}e.func=h;function f(g){return g!==null&&typeof g=="object"}e.objectLiteral=f;function d(g,p){return Array.isArray(g)&&g.every(p)}e.typedArray=d})(Lt||(Lt={}));class c1t{constructor(){this.nodeStack=[]}get current(){var t;return(t=this.nodeStack[this.nodeStack.length-1])!==null&&t!==void 0?t:this.rootNode}buildRootNode(t){return this.rootNode=new U9(t),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(t){const r=new _S;return r.grammarSource=t,r.root=this.rootNode,this.current.content.push(r),this.nodeStack.push(r),r}buildLeafNode(t,r){const n=new cE(t.startOffset,t.image.length,Pw(t),t.tokenType,!r);return n.grammarSource=r,n.root=this.rootNode,this.current.content.push(n),n}removeNode(t){const r=t.container;if(r){const n=r.content.indexOf(t);n>=0&&r.content.splice(n,1)}}addHiddenNodes(t){const r=[];for(const a of t){const s=new cE(a.startOffset,a.image.length,Pw(a),a.tokenType,!0);s.root=this.rootNode,r.push(s)}let n=this.current,i=!1;if(n.content.length>0){n.content.push(...r);return}for(;n.container;){const a=n.container.content.indexOf(n);if(a>0){n.container.content.splice(a,0,...r),i=!0;break}n=n.container}i||this.rootNode.content.unshift(...r)}construct(t){const r=this.current;typeof t.$type=="string"&&(this.current.astNode=t),t.$cstNode=r;const n=this.nodeStack.pop();(n==null?void 0:n.content.length)===0&&this.removeNode(n)}}class G9{get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var t,r;const n=typeof((t=this._astNode)===null||t===void 0?void 0:t.$type)=="string"?this._astNode:(r=this.container)===null||r===void 0?void 0:r.astNode;if(!n)throw new Error("This node has no associated AST element");return n}set astNode(t){this._astNode=t}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}}class cE extends G9{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(t,r,n,i,a=!1){super(),this._hidden=a,this._offset=t,this._tokenType=i,this._length=r,this._range=n}}class _S extends G9{constructor(){super(...arguments),this.content=new AS(this)}get children(){return this.content}get offset(){var t,r;return(r=(t=this.firstNonHiddenNode)===null||t===void 0?void 0:t.offset)!==null&&r!==void 0?r:0}get length(){return this.end-this.offset}get end(){var t,r;return(r=(t=this.lastNonHiddenNode)===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:0}get range(){const t=this.firstNonHiddenNode,r=this.lastNonHiddenNode;if(t&&r){if(this._rangeCache===void 0){const{range:n}=t,{range:i}=r;this._rangeCache={start:n.start,end:i.end.line<n.start.line?n.start:i.end}}return this._rangeCache}else return{start:nr.create(0,0),end:nr.create(0,0)}}get firstNonHiddenNode(){for(const t of this.content)if(!t.hidden)return t;return this.content[0]}get lastNonHiddenNode(){for(let t=this.content.length-1;t>=0;t--){const r=this.content[t];if(!r.hidden)return r}return this.content[this.content.length-1]}}class AS extends Array{constructor(t){super(),this.parent=t,Object.setPrototypeOf(this,AS.prototype)}push(...t){return this.addParents(t),super.push(...t)}unshift(...t){return this.addParents(t),super.unshift(...t)}splice(t,r,...n){return this.addParents(n),super.splice(t,r,...n)}addParents(t){for(const r of t)r.container=this.parent}}class U9 extends _S{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(t){super(),this._text="",this._text=t??""}}const uE=Symbol("Datatype");function Ex(e){return e.$type===uE}const cL="​",W9=e=>e.endsWith(cL)?e:e+cL;class Y9{constructor(t){this._unorderedGroups=new Map,this.allRules=new Map,this.lexer=t.parser.Lexer;const r=this.lexer.definition,n=t.LanguageMetaData.mode==="production";this.wrapper=new g1t(r,Object.assign(Object.assign({},t.parser.ParserConfig),{skipValidations:n,errorMessageProvider:t.parser.ParserErrorMessageProvider}))}alternatives(t,r){this.wrapper.wrapOr(t,r)}optional(t,r){this.wrapper.wrapOption(t,r)}many(t,r){this.wrapper.wrapMany(t,r)}atLeastOne(t,r){this.wrapper.wrapAtLeastOne(t,r)}getRule(t){return this.allRules.get(t)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}}class u1t extends Y9{get current(){return this.stack[this.stack.length-1]}constructor(t){super(t),this.nodeBuilder=new c1t,this.stack=[],this.assignmentMap=new Map,this.linker=t.references.Linker,this.converter=t.parser.ValueConverter,this.astReflection=t.shared.AstReflection}rule(t,r){const n=this.computeRuleType(t),i=this.wrapper.DEFINE_RULE(W9(t.name),this.startImplementation(n,r).bind(this));return this.allRules.set(t.name,i),t.entry&&(this.mainRule=i),i}computeRuleType(t){if(!t.fragment){if(KF(t))return uE;{const r=dS(t);return r??t.name}}}parse(t,r={}){this.nodeBuilder.buildRootNode(t);const n=this.lexerResult=this.lexer.tokenize(t);this.wrapper.input=n.tokens;const i=r.rule?this.allRules.get(r.rule):this.mainRule;if(!i)throw new Error(r.rule?`No rule found with name '${r.rule}'`:"No main rule available.");const a=i.call(this.wrapper,{});return this.nodeBuilder.addHiddenNodes(n.hidden),this.unorderedGroups.clear(),this.lexerResult=void 0,{value:a,lexerErrors:n.errors,lexerReport:n.report,parserErrors:this.wrapper.errors}}startImplementation(t,r){return n=>{const i=!this.isRecording()&&t!==void 0;if(i){const s={$type:t};this.stack.push(s),t===uE&&(s.value="")}let a;try{a=r(n)}catch{a=void 0}return a===void 0&&i&&(a=this.construct()),a}}extractHiddenTokens(t){const r=this.lexerResult.hidden;if(!r.length)return[];const n=t.startOffset;for(let i=0;i<r.length;i++)if(r[i].startOffset>n)return r.splice(0,i);return r.splice(0,r.length)}consume(t,r,n){const i=this.wrapper.wrapConsume(t,r);if(!this.isRecording()&&this.isValidToken(i)){const a=this.extractHiddenTokens(i);this.nodeBuilder.addHiddenNodes(a);const s=this.nodeBuilder.buildLeafNode(i,n),{assignment:o,isCrossRef:l}=this.getAssignment(n),u=this.current;if(o){const h=nc(n)?i.image:this.converter.convert(i.image,s);this.assign(o.operator,o.feature,h,s,l)}else if(Ex(u)){let h=i.image;nc(n)||(h=this.converter.convert(h,s).toString()),u.value+=h}}}isValidToken(t){return!t.isInsertedInRecovery&&!isNaN(t.startOffset)&&typeof t.endOffset=="number"&&!isNaN(t.endOffset)}subrule(t,r,n,i,a){let s;!this.isRecording()&&!n&&(s=this.nodeBuilder.buildCompositeNode(i));const o=this.wrapper.wrapSubrule(t,r,a);!this.isRecording()&&s&&s.length>0&&this.performSubruleAssignment(o,i,s)}performSubruleAssignment(t,r,n){const{assignment:i,isCrossRef:a}=this.getAssignment(r);if(i)this.assign(i.operator,i.feature,t,n,a);else if(!i){const s=this.current;if(Ex(s))s.value+=t.toString();else if(typeof t=="object"&&t){const l=this.assignWithoutOverride(t,s);this.stack.pop(),this.stack.push(l)}}}action(t,r){if(!this.isRecording()){let n=this.current;if(r.feature&&r.operator){n=this.construct(),this.nodeBuilder.removeNode(n.$cstNode),this.nodeBuilder.buildCompositeNode(r).content.push(n.$cstNode);const a={$type:t};this.stack.push(a),this.assign(r.operator,r.feature,n,n.$cstNode,!1)}else n.$type=t}}construct(){if(this.isRecording())return;const t=this.current;return Wdt(t),this.nodeBuilder.construct(t),this.stack.pop(),Ex(t)?this.converter.convert(t.value,t.$cstNode):(Ydt(this.astReflection,t),t)}getAssignment(t){if(!this.assignmentMap.has(t)){const r=My(t,rc);this.assignmentMap.set(t,{assignment:r,isCrossRef:r?cS(r.terminal):!1})}return this.assignmentMap.get(t)}assign(t,r,n,i,a){const s=this.current;let o;switch(a&&typeof n=="string"?o=this.linker.buildReference(s,r,i,n):o=n,t){case"=":{s[r]=o;break}case"?=":{s[r]=!0;break}case"+=":Array.isArray(s[r])||(s[r]=[]),s[r].push(o)}}assignWithoutOverride(t,r){for(const[i,a]of Object.entries(r)){const s=t[i];s===void 0?t[i]=a:Array.isArray(s)&&Array.isArray(a)&&(a.push(...s),t[i]=a)}const n=t.$cstNode;return n&&(n.astNode=void 0,t.$cstNode=void 0),t}get definitionErrors(){return this.wrapper.definitionErrors}}class h1t{buildMismatchTokenMessage(t){return au.buildMismatchTokenMessage(t)}buildNotAllInputParsedMessage(t){return au.buildNotAllInputParsedMessage(t)}buildNoViableAltMessage(t){return au.buildNoViableAltMessage(t)}buildEarlyExitMessage(t){return au.buildEarlyExitMessage(t)}}class H9 extends h1t{buildMismatchTokenMessage({expected:t,actual:r}){return`Expecting ${t.LABEL?"`"+t.LABEL+"`":t.name.endsWith(":KW")?`keyword '${t.name.substring(0,t.name.length-3)}'`:`token of type '${t.name}'`} but found \`${r.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:t}){return`Expecting end of file but found \`${t.image}\`.`}}class f1t extends Y9{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(t){this.resetState();const r=this.lexer.tokenize(t,{mode:"partial"});return this.tokens=r.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(t,r){const n=this.wrapper.DEFINE_RULE(W9(t.name),this.startImplementation(r).bind(this));return this.allRules.set(t.name,n),t.entry&&(this.mainRule=n),n}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(t){return r=>{const n=this.keepStackSize();try{t(r)}finally{this.resetStackSize(n)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const t=this.elementStack.length;return this.stackSize=t,t}resetStackSize(t){this.removeUnexpectedElements(),this.stackSize=t}consume(t,r,n){this.wrapper.wrapConsume(t,r),this.isRecording()||(this.lastElementStack=[...this.elementStack,n],this.nextTokenIndex=this.currIdx+1)}subrule(t,r,n,i,a){this.before(i),this.wrapper.wrapSubrule(t,r,a),this.after(i)}before(t){this.isRecording()||this.elementStack.push(t)}after(t){if(!this.isRecording()){const r=this.elementStack.lastIndexOf(t);r>=0&&this.elementStack.splice(r)}}get currIdx(){return this.wrapper.currIdx}}const d1t={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new H9};class g1t extends T0t{constructor(t,r){const n=r&&"maxLookahead"in r;super(t,Object.assign(Object.assign(Object.assign({},d1t),{lookaheadStrategy:n?new TS({maxLookahead:r.maxLookahead}):new G0t({logging:r.skipValidations?()=>{}:void 0})}),r))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(t,r){return this.RULE(t,r)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(t,r){return this.consume(t,r)}wrapSubrule(t,r,n){return this.subrule(t,r,{ARGS:[n]})}wrapOr(t,r){this.or(t,r)}wrapOption(t,r){this.option(t,r)}wrapMany(t,r){this.many(t,r)}wrapAtLeastOne(t,r){this.atLeastOne(t,r)}}function q9(e,t,r){return p1t({parser:t,tokens:r,ruleNames:new Map},e),t}function p1t(e,t){const r=YF(t,!1),n=Nn(t.rules).filter(Ta).filter(i=>r.has(i));for(const i of n){const a=Object.assign(Object.assign({},e),{consume:1,optional:1,subrule:1,many:1,or:1});e.parser.rule(i,sc(a,i.definition))}}function sc(e,t,r=!1){let n;if(nc(t))n=w1t(e,t);else if(Dy(t))n=v1t(e,t);else if(rc(t))n=sc(e,t.terminal);else if(cS(t))n=X9(e,t);else if(ic(t))n=m1t(e,t);else if($F(t))n=x1t(e,t);else if(zF(t))n=b1t(e,t);else if(uS(t))n=T1t(e,t);else if(Pdt(t)){const i=e.consume++;n=()=>e.parser.consume(i,Vo,t)}else throw new OF(t.$cstNode,`Unexpected element type: ${t.$type}`);return j9(e,r?void 0:cm(t),n,t.cardinality)}function v1t(e,t){const r=gS(t);return()=>e.parser.action(r,t)}function m1t(e,t){const r=t.rule.ref;if(Ta(r)){const n=e.subrule++,i=r.fragment,a=t.arguments.length>0?y1t(r,t.arguments):()=>({});return s=>e.parser.subrule(n,K9(e,r),i,t,a(s))}else if(Cc(r)){const n=e.consume++,i=hE(e,r.name);return()=>e.parser.consume(n,i,t)}else if(r)bp();else throw new OF(t.$cstNode,`Undefined rule: ${t.rule.$refText}`)}function y1t(e,t){const r=t.map(n=>Os(n.value));return n=>{const i={};for(let a=0;a<r.length;a++){const s=e.parameters[a],o=r[a];i[s.name]=o(n)}return i}}function Os(e){if(Rdt(e)){const t=Os(e.left),r=Os(e.right);return n=>t(n)||r(n)}else if(Ldt(e)){const t=Os(e.left),r=Os(e.right);return n=>t(n)&&r(n)}else if(Idt(e)){const t=Os(e.value);return r=>!t(r)}else if(Ndt(e)){const t=e.parameter.ref.name;return r=>r!==void 0&&r[t]===!0}else if(Adt(e)){const t=!!e.true;return()=>t}bp()}function x1t(e,t){if(t.elements.length===1)return sc(e,t.elements[0]);{const r=[];for(const i of t.elements){const a={ALT:sc(e,i,!0)},s=cm(i);s&&(a.GATE=Os(s)),r.push(a)}const n=e.or++;return i=>e.parser.alternatives(n,r.map(a=>{const s={ALT:()=>a.ALT(i)},o=a.GATE;return o&&(s.GATE=()=>o(i)),s}))}}function b1t(e,t){if(t.elements.length===1)return sc(e,t.elements[0]);const r=[];for(const o of t.elements){const l={ALT:sc(e,o,!0)},u=cm(o);u&&(l.GATE=Os(u)),r.push(l)}const n=e.or++,i=(o,l)=>{const u=l.getRuleStack().join("-");return`uGroup_${o}_${u}`},a=o=>e.parser.alternatives(n,r.map((l,u)=>{const h={ALT:()=>!0},f=e.parser;h.ALT=()=>{if(l.ALT(o),!f.isRecording()){const g=i(n,f);f.unorderedGroups.get(g)||f.unorderedGroups.set(g,[]);const p=f.unorderedGroups.get(g);typeof(p==null?void 0:p[u])>"u"&&(p[u]=!0)}};const d=l.GATE;return d?h.GATE=()=>d(o):h.GATE=()=>{const g=f.unorderedGroups.get(i(n,f));return!(g!=null&&g[u])},h})),s=j9(e,cm(t),a,"*");return o=>{s(o),e.parser.isRecording()||e.parser.unorderedGroups.delete(i(n,e.parser))}}function T1t(e,t){const r=t.elements.map(n=>sc(e,n));return n=>r.forEach(i=>i(n))}function cm(e){if(uS(e))return e.guardCondition}function X9(e,t,r=t.terminal){if(r)if(ic(r)&&Ta(r.rule.ref)){const n=r.rule.ref,i=e.subrule++;return a=>e.parser.subrule(i,K9(e,n),!1,t,a)}else if(ic(r)&&Cc(r.rule.ref)){const n=e.consume++,i=hE(e,r.rule.ref.name);return()=>e.parser.consume(n,i,t)}else if(nc(r)){const n=e.consume++,i=hE(e,r.value);return()=>e.parser.consume(n,i,t)}else throw new Error("Could not build cross reference parser");else{if(!t.type.ref)throw new Error("Could not resolve reference to type: "+t.type.$refText);const n=XF(t.type.ref),i=n==null?void 0:n.terminal;if(!i)throw new Error("Could not find name assignment for type: "+gS(t.type.ref));return X9(e,t,i)}}function w1t(e,t){const r=e.consume++,n=e.tokens[t.value];if(!n)throw new Error("Could not find token for keyword: "+t.value);return()=>e.parser.consume(r,n,t)}function j9(e,t,r,n){const i=t&&Os(t);if(!n)if(i){const a=e.or++;return s=>e.parser.alternatives(a,[{ALT:()=>r(s),GATE:()=>i(s)},{ALT:i5(),GATE:()=>!i(s)}])}else return r;if(n==="*"){const a=e.many++;return s=>e.parser.many(a,{DEF:()=>r(s),GATE:i?()=>i(s):void 0})}else if(n==="+"){const a=e.many++;if(i){const s=e.or++;return o=>e.parser.alternatives(s,[{ALT:()=>e.parser.atLeastOne(a,{DEF:()=>r(o)}),GATE:()=>i(o)},{ALT:i5(),GATE:()=>!i(o)}])}else return s=>e.parser.atLeastOne(a,{DEF:()=>r(s)})}else if(n==="?"){const a=e.optional++;return s=>e.parser.optional(a,{DEF:()=>r(s),GATE:i?()=>i(s):void 0})}else bp()}function K9(e,t){const r=E1t(e,t),n=e.parser.getRule(r);if(!n)throw new Error(`Rule "${r}" not found."`);return n}function E1t(e,t){if(Ta(t))return t.name;if(e.ruleNames.has(t))return e.ruleNames.get(t);{let r=t,n=r.$container,i=t.$type;for(;!Ta(n);)(uS(n)||$F(n)||zF(n))&&(i=n.elements.indexOf(r).toString()+":"+i),r=n,n=n.$container;return i=n.name+":"+i,e.ruleNames.set(t,i),i}}function hE(e,t){const r=e.tokens[t];if(!r)throw new Error(`Token "${t}" not found."`);return r}function k1t(e){const t=e.Grammar,r=e.parser.Lexer,n=new f1t(e);return q9(t,n,r.definition),n.finalize(),n}function C1t(e){const t=S1t(e);return t.finalize(),t}function S1t(e){const t=e.Grammar,r=e.parser.Lexer,n=new u1t(e);return q9(t,n,r.definition)}class Z9{constructor(){this.diagnostics=[]}buildTokens(t,r){const n=Nn(YF(t,!1)),i=this.buildTerminalTokens(n),a=this.buildKeywordTokens(n,i,r);return i.forEach(s=>{const o=s.PATTERN;typeof o=="object"&&o&&"test"in o&&Fw(o)?a.unshift(s):a.push(s)}),a}flushLexingReport(t){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){const t=[...this.diagnostics];return this.diagnostics=[],t}buildTerminalTokens(t){return t.filter(Cc).filter(r=>!r.fragment).map(r=>this.buildTerminalToken(r)).toArray()}buildTerminalToken(t){const r=pS(t),n=this.requiresCustomPattern(r)?this.regexPatternFunction(r):r,i={name:t.name,PATTERN:n};return typeof n=="function"&&(i.LINE_BREAKS=!0),t.hidden&&(i.GROUP=Fw(r)?Ai.SKIPPED:"hidden"),i}requiresCustomPattern(t){return t.flags.includes("u")||t.flags.includes("s")?!0:!!(t.source.includes("?<=")||t.source.includes("?<!"))}regexPatternFunction(t){const r=new RegExp(t,t.flags+"y");return(n,i)=>(r.lastIndex=i,r.exec(n))}buildKeywordTokens(t,r,n){return t.filter(Ta).flatMap(i=>Tp(i).filter(nc)).distinct(i=>i.value).toArray().sort((i,a)=>a.value.length-i.value.length).map(i=>this.buildKeywordToken(i,r,!!(n!=null&&n.caseInsensitive)))}buildKeywordToken(t,r,n){const i=this.buildKeywordPattern(t,n),a={name:t.value,PATTERN:i,LONGER_ALT:this.findLongerAlt(t,r)};return typeof i=="function"&&(a.LINE_BREAKS=!0),a}buildKeywordPattern(t,r){return r?new RegExp(tgt(t.value)):t.value}findLongerAlt(t,r){return r.reduce((n,i)=>{const a=i==null?void 0:i.PATTERN;return a!=null&&a.source&&egt("^"+a.source+"$",t.value)&&n.push(i),n},[])}}class Q9{convert(t,r){let n=r.grammarSource;if(cS(n)&&(n=agt(n)),ic(n)){const i=n.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,t,r)}return t}runConverter(t,r,n){var i;switch(t.name.toUpperCase()){case"INT":return Is.convertInt(r);case"STRING":return Is.convertString(r);case"ID":return Is.convertID(r)}switch((i=fgt(t))===null||i===void 0?void 0:i.toLowerCase()){case"number":return Is.convertNumber(r);case"boolean":return Is.convertBoolean(r);case"bigint":return Is.convertBigint(r);case"date":return Is.convertDate(r);default:return r}}}var Is;(function(e){function t(u){let h="";for(let f=1;f<u.length-1;f++){const d=u.charAt(f);if(d==="\\"){const g=u.charAt(++f);h+=r(g)}else h+=d}return h}e.convertString=t;function r(u){switch(u){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"0":return"\0";default:return u}}function n(u){return u.charAt(0)==="^"?u.substring(1):u}e.convertID=n;function i(u){return parseInt(u)}e.convertInt=i;function a(u){return BigInt(u)}e.convertBigint=a;function s(u){return new Date(u)}e.convertDate=s;function o(u){return Number(u)}e.convertNumber=o;function l(u){return u.toLowerCase()==="true"}e.convertBoolean=l})(Is||(Is={}));var dl={},b0={},uL;function J9(){if(uL)return b0;uL=1,Object.defineProperty(b0,"__esModule",{value:!0});let e;function t(){if(e===void 0)throw new Error("No runtime abstraction layer installed");return e}return function(r){function n(i){if(i===void 0)throw new Error("No runtime abstraction layer provided");e=i}r.install=n}(t||(t={})),b0.default=t,b0}var _n={},hL;function _1t(){if(hL)return _n;hL=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.stringArray=_n.array=_n.func=_n.error=_n.number=_n.string=_n.boolean=void 0;function e(o){return o===!0||o===!1}_n.boolean=e;function t(o){return typeof o=="string"||o instanceof String}_n.string=t;function r(o){return typeof o=="number"||o instanceof Number}_n.number=r;function n(o){return o instanceof Error}_n.error=n;function i(o){return typeof o=="function"}_n.func=i;function a(o){return Array.isArray(o)}_n.array=a;function s(o){return a(o)&&o.every(l=>t(l))}return _n.stringArray=s,_n}var gl={},fL;function t$(){if(fL)return gl;fL=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.Emitter=gl.Event=void 0;const e=J9();var t;(function(i){const a={dispose(){}};i.None=function(){return a}})(t||(gl.Event=t={}));class r{add(a,s=null,o){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(a),this._contexts.push(s),Array.isArray(o)&&o.push({dispose:()=>this.remove(a,s)})}remove(a,s=null){if(!this._callbacks)return;let o=!1;for(let l=0,u=this._callbacks.length;l<u;l++)if(this._callbacks[l]===a)if(this._contexts[l]===s){this._callbacks.splice(l,1),this._contexts.splice(l,1);return}else o=!0;if(o)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...a){if(!this._callbacks)return[];const s=[],o=this._callbacks.slice(0),l=this._contexts.slice(0);for(let u=0,h=o.length;u<h;u++)try{s.push(o[u].apply(l[u],a))}catch(f){(0,e.default)().console.error(f)}return s}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class n{constructor(a){this._options=a}get event(){return this._event||(this._event=(a,s,o)=>{this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(a,s);const l={dispose:()=>{this._callbacks&&(this._callbacks.remove(a,s),l.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(o)&&o.push(l),l}),this._event}fire(a){this._callbacks&&this._callbacks.invoke.call(this._callbacks,a)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}return gl.Emitter=n,n._noop=function(){},gl}var dL;function A1t(){if(dL)return dl;dL=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.CancellationTokenSource=dl.CancellationToken=void 0;const e=J9(),t=_1t(),r=t$();var n;(function(o){o.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None});function l(u){const h=u;return h&&(h===o.None||h===o.Cancelled||t.boolean(h.isCancellationRequested)&&!!h.onCancellationRequested)}o.is=l})(n||(dl.CancellationToken=n={}));const i=Object.freeze(function(o,l){const u=(0,e.default)().timer.setTimeout(o.bind(l),0);return{dispose(){u.dispose()}}});class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?i:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class s{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=n.Cancelled}dispose(){this._token?this._token instanceof a&&this._token.dispose():this._token=n.None}}return dl.CancellationTokenSource=s,dl}var Nr=A1t();function L1t(){return new Promise(e=>{typeof setImmediate>"u"?setTimeout(e,0):setImmediate(e)})}let p1=0,R1t=10;function I1t(){return p1=performance.now(),new Nr.CancellationTokenSource}const um=Symbol("OperationCancelled");function Wy(e){return e===um}async function Yi(e){if(e===Nr.CancellationToken.None)return;const t=performance.now();if(t-p1>=R1t&&(p1=t,await L1t(),p1=performance.now()),e.isCancellationRequested)throw um}class LS{constructor(){this.promise=new Promise((t,r)=>{this.resolve=n=>(t(n),this),this.reject=n=>(r(n),this)})}}class Ig{constructor(t,r,n,i){this._uri=t,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){const r=this.offsetAt(t.start),n=this.offsetAt(t.end);return this._content.substring(r,n)}return this._content}update(t,r){for(const n of t)if(Ig.isIncremental(n)){const i=r$(n.range),a=this.offsetAt(i.start),s=this.offsetAt(i.end);this._content=this._content.substring(0,a)+n.text+this._content.substring(s,this._content.length);const o=Math.max(i.start.line,0),l=Math.max(i.end.line,0);let u=this._lineOffsets;const h=gL(n.text,!1,a);if(l-o===h.length)for(let d=0,g=h.length;d<g;d++)u[d+o+1]=h[d];else h.length<1e4?u.splice(o+1,l-o,...h):this._lineOffsets=u=u.slice(0,o+1).concat(h,u.slice(l+1));const f=n.text.length-(s-a);if(f!==0)for(let d=o+1+h.length,g=u.length;d<g;d++)u[d]=u[d]+f}else if(Ig.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=gL(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);const r=this.getLineOffsets();let n=0,i=r.length;if(i===0)return{line:0,character:t};for(;n<i;){const s=Math.floor((n+i)/2);r[s]>t?i=s:n=s+1}const a=n-1;return t=this.ensureBeforeEOL(t,r[a]),{line:a,character:t-r[a]}}offsetAt(t){const r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;const n=r[t.line];if(t.character<=0)return n;const i=t.line+1<r.length?r[t.line+1]:this._content.length,a=Math.min(n+t.character,i);return this.ensureBeforeEOL(a,n)}ensureBeforeEOL(t,r){for(;t>r&&e$(this._content.charCodeAt(t-1));)t--;return t}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){const r=t;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(t){const r=t;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}}var fE;(function(e){function t(i,a,s,o){return new Ig(i,a,s,o)}e.create=t;function r(i,a,s){if(i instanceof Ig)return i.update(a,s),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=r;function n(i,a){const s=i.getText(),o=dE(a.map(N1t),(h,f)=>{const d=h.range.start.line-f.range.start.line;return d===0?h.range.start.character-f.range.start.character:d});let l=0;const u=[];for(const h of o){const f=i.offsetAt(h.range.start);if(f<l)throw new Error("Overlapping edit");f>l&&u.push(s.substring(l,f)),h.newText.length&&u.push(h.newText),l=i.offsetAt(h.range.end)}return u.push(s.substr(l)),u.join("")}e.applyEdits=n})(fE||(fE={}));function dE(e,t){if(e.length<=1)return e;const r=e.length/2|0,n=e.slice(0,r),i=e.slice(r);dE(n,t),dE(i,t);let a=0,s=0,o=0;for(;a<n.length&&s<i.length;)t(n[a],i[s])<=0?e[o++]=n[a++]:e[o++]=i[s++];for(;a<n.length;)e[o++]=n[a++];for(;s<i.length;)e[o++]=i[s++];return e}function gL(e,t,r=0){const n=t?[r]:[];for(let i=0;i<e.length;i++){const a=e.charCodeAt(i);e$(a)&&(a===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}function e$(e){return e===13||e===10}function r$(e){const t=e.start,r=e.end;return t.line>r.line||t.line===r.line&&t.character>r.character?{start:r,end:t}:e}function N1t(e){const t=r$(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var n$;(()=>{var e={470:i=>{function a(l){if(typeof l!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(l))}function s(l,u){for(var h,f="",d=0,g=-1,p=0,v=0;v<=l.length;++v){if(v<l.length)h=l.charCodeAt(v);else{if(h===47)break;h=47}if(h===47){if(!(g===v-1||p===1))if(g!==v-1&&p===2){if(f.length<2||d!==2||f.charCodeAt(f.length-1)!==46||f.charCodeAt(f.length-2)!==46){if(f.length>2){var m=f.lastIndexOf("/");if(m!==f.length-1){m===-1?(f="",d=0):d=(f=f.slice(0,m)).length-1-f.lastIndexOf("/"),g=v,p=0;continue}}else if(f.length===2||f.length===1){f="",d=0,g=v,p=0;continue}}u&&(f.length>0?f+="/..":f="..",d=2)}else f.length>0?f+="/"+l.slice(g+1,v):f=l.slice(g+1,v),d=v-g-1;g=v,p=0}else h===46&&p!==-1?++p:p=-1}return f}var o={resolve:function(){for(var l,u="",h=!1,f=arguments.length-1;f>=-1&&!h;f--){var d;f>=0?d=arguments[f]:(l===void 0&&(l=process.cwd()),d=l),a(d),d.length!==0&&(u=d+"/"+u,h=d.charCodeAt(0)===47)}return u=s(u,!h),h?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(l){if(a(l),l.length===0)return".";var u=l.charCodeAt(0)===47,h=l.charCodeAt(l.length-1)===47;return(l=s(l,!u)).length!==0||u||(l="."),l.length>0&&h&&(l+="/"),u?"/"+l:l},isAbsolute:function(l){return a(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,u=0;u<arguments.length;++u){var h=arguments[u];a(h),h.length>0&&(l===void 0?l=h:l+="/"+h)}return l===void 0?".":o.normalize(l)},relative:function(l,u){if(a(l),a(u),l===u||(l=o.resolve(l))===(u=o.resolve(u)))return"";for(var h=1;h<l.length&&l.charCodeAt(h)===47;++h);for(var f=l.length,d=f-h,g=1;g<u.length&&u.charCodeAt(g)===47;++g);for(var p=u.length-g,v=d<p?d:p,m=-1,y=0;y<=v;++y){if(y===v){if(p>v){if(u.charCodeAt(g+y)===47)return u.slice(g+y+1);if(y===0)return u.slice(g+y)}else d>v&&(l.charCodeAt(h+y)===47?m=y:y===0&&(m=0));break}var b=l.charCodeAt(h+y);if(b!==u.charCodeAt(g+y))break;b===47&&(m=y)}var T="";for(y=h+m+1;y<=f;++y)y!==f&&l.charCodeAt(y)!==47||(T.length===0?T+="..":T+="/..");return T.length>0?T+u.slice(g+m):(g+=m,u.charCodeAt(g)===47&&++g,u.slice(g))},_makeLong:function(l){return l},dirname:function(l){if(a(l),l.length===0)return".";for(var u=l.charCodeAt(0),h=u===47,f=-1,d=!0,g=l.length-1;g>=1;--g)if((u=l.charCodeAt(g))===47){if(!d){f=g;break}}else d=!1;return f===-1?h?"/":".":h&&f===1?"//":l.slice(0,f)},basename:function(l,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');a(l);var h,f=0,d=-1,g=!0;if(u!==void 0&&u.length>0&&u.length<=l.length){if(u.length===l.length&&u===l)return"";var p=u.length-1,v=-1;for(h=l.length-1;h>=0;--h){var m=l.charCodeAt(h);if(m===47){if(!g){f=h+1;break}}else v===-1&&(g=!1,v=h+1),p>=0&&(m===u.charCodeAt(p)?--p==-1&&(d=h):(p=-1,d=v))}return f===d?d=v:d===-1&&(d=l.length),l.slice(f,d)}for(h=l.length-1;h>=0;--h)if(l.charCodeAt(h)===47){if(!g){f=h+1;break}}else d===-1&&(g=!1,d=h+1);return d===-1?"":l.slice(f,d)},extname:function(l){a(l);for(var u=-1,h=0,f=-1,d=!0,g=0,p=l.length-1;p>=0;--p){var v=l.charCodeAt(p);if(v!==47)f===-1&&(d=!1,f=p+1),v===46?u===-1?u=p:g!==1&&(g=1):u!==-1&&(g=-1);else if(!d){h=p+1;break}}return u===-1||f===-1||g===0||g===1&&u===f-1&&u===h+1?"":l.slice(u,f)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return function(u,h){var f=h.dir||h.root,d=h.base||(h.name||"")+(h.ext||"");return f?f===h.root?f+d:f+"/"+d:d}(0,l)},parse:function(l){a(l);var u={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return u;var h,f=l.charCodeAt(0),d=f===47;d?(u.root="/",h=1):h=0;for(var g=-1,p=0,v=-1,m=!0,y=l.length-1,b=0;y>=h;--y)if((f=l.charCodeAt(y))!==47)v===-1&&(m=!1,v=y+1),f===46?g===-1?g=y:b!==1&&(b=1):g!==-1&&(b=-1);else if(!m){p=y+1;break}return g===-1||v===-1||b===0||b===1&&g===v-1&&g===p+1?v!==-1&&(u.base=u.name=p===0&&d?l.slice(1,v):l.slice(p,v)):(p===0&&d?(u.name=l.slice(1,g),u.base=l.slice(1,v)):(u.name=l.slice(p,g),u.base=l.slice(p,v)),u.ext=l.slice(g,v)),p>0?u.dir=l.slice(0,p-1):d&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,i.exports=o}},t={};function r(i){var a=t[i];if(a!==void 0)return a.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,r),s.exports}r.d=(i,a)=>{for(var s in a)r.o(a,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:a[s]})},r.o=(i,a)=>Object.prototype.hasOwnProperty.call(i,a),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>d,Utils:()=>R}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);const a=/^\w[\w\d+.-]*$/,s=/^\//,o=/^\/\//;function l(C,D){if(!C.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${C.authority}", path: "${C.path}", query: "${C.query}", fragment: "${C.fragment}"}`);if(C.scheme&&!a.test(C.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(C.path){if(C.authority){if(!s.test(C.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(o.test(C.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}const u="",h="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class d{constructor(D,P,_,I,M,O=!1){Se(this,"scheme");Se(this,"authority");Se(this,"path");Se(this,"query");Se(this,"fragment");typeof D=="object"?(this.scheme=D.scheme||u,this.authority=D.authority||u,this.path=D.path||u,this.query=D.query||u,this.fragment=D.fragment||u):(this.scheme=function(N,B){return N||B?N:"file"}(D,O),this.authority=P||u,this.path=function(N,B){switch(N){case"https":case"http":case"file":B?B[0]!==h&&(B=h+B):B=h}return B}(this.scheme,_||u),this.query=I||u,this.fragment=M||u,l(this,O))}static isUri(D){return D instanceof d||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}get fsPath(){return b(this)}with(D){if(!D)return this;let{scheme:P,authority:_,path:I,query:M,fragment:O}=D;return P===void 0?P=this.scheme:P===null&&(P=u),_===void 0?_=this.authority:_===null&&(_=u),I===void 0?I=this.path:I===null&&(I=u),M===void 0?M=this.query:M===null&&(M=u),O===void 0?O=this.fragment:O===null&&(O=u),P===this.scheme&&_===this.authority&&I===this.path&&M===this.query&&O===this.fragment?this:new p(P,_,I,M,O)}static parse(D,P=!1){const _=f.exec(D);return _?new p(_[2]||u,S(_[4]||u),S(_[5]||u),S(_[7]||u),S(_[9]||u),P):new p(u,u,u,u,u)}static file(D){let P=u;if(i&&(D=D.replace(/\\/g,h)),D[0]===h&&D[1]===h){const _=D.indexOf(h,2);_===-1?(P=D.substring(2),D=h):(P=D.substring(2,_),D=D.substring(_)||h)}return new p("file",P,D,u,u)}static from(D){const P=new p(D.scheme,D.authority,D.path,D.query,D.fragment);return l(P,!0),P}toString(D=!1){return T(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof d)return D;{const P=new p(D);return P._formatted=D.external,P._fsPath=D._sep===g?D.fsPath:null,P}}return D}}const g=i?1:void 0;class p extends d{constructor(){super(...arguments);Se(this,"_formatted",null);Se(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=b(this)),this._fsPath}toString(P=!1){return P?T(this,!0):(this._formatted||(this._formatted=T(this,!1)),this._formatted)}toJSON(){const P={$mid:1};return this._fsPath&&(P.fsPath=this._fsPath,P._sep=g),this._formatted&&(P.external=this._formatted),this.path&&(P.path=this.path),this.scheme&&(P.scheme=this.scheme),this.authority&&(P.authority=this.authority),this.query&&(P.query=this.query),this.fragment&&(P.fragment=this.fragment),P}}const v={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function m(C,D,P){let _,I=-1;for(let M=0;M<C.length;M++){const O=C.charCodeAt(M);if(O>=97&&O<=122||O>=65&&O<=90||O>=48&&O<=57||O===45||O===46||O===95||O===126||D&&O===47||P&&O===91||P&&O===93||P&&O===58)I!==-1&&(_+=encodeURIComponent(C.substring(I,M)),I=-1),_!==void 0&&(_+=C.charAt(M));else{_===void 0&&(_=C.substr(0,M));const N=v[O];N!==void 0?(I!==-1&&(_+=encodeURIComponent(C.substring(I,M)),I=-1),_+=N):I===-1&&(I=M)}}return I!==-1&&(_+=encodeURIComponent(C.substring(I))),_!==void 0?_:C}function y(C){let D;for(let P=0;P<C.length;P++){const _=C.charCodeAt(P);_===35||_===63?(D===void 0&&(D=C.substr(0,P)),D+=v[_]):D!==void 0&&(D+=C[P])}return D!==void 0?D:C}function b(C,D){let P;return P=C.authority&&C.path.length>1&&C.scheme==="file"?`//${C.authority}${C.path}`:C.path.charCodeAt(0)===47&&(C.path.charCodeAt(1)>=65&&C.path.charCodeAt(1)<=90||C.path.charCodeAt(1)>=97&&C.path.charCodeAt(1)<=122)&&C.path.charCodeAt(2)===58?C.path[1].toLowerCase()+C.path.substr(2):C.path,i&&(P=P.replace(/\//g,"\\")),P}function T(C,D){const P=D?y:m;let _="",{scheme:I,authority:M,path:O,query:N,fragment:B}=C;if(I&&(_+=I,_+=":"),(M||I==="file")&&(_+=h,_+=h),M){let z=M.indexOf("@");if(z!==-1){const F=M.substr(0,z);M=M.substr(z+1),z=F.lastIndexOf(":"),z===-1?_+=P(F,!1,!1):(_+=P(F.substr(0,z),!1,!1),_+=":",_+=P(F.substr(z+1),!1,!0)),_+="@"}M=M.toLowerCase(),z=M.lastIndexOf(":"),z===-1?_+=P(M,!1,!0):(_+=P(M.substr(0,z),!1,!0),_+=M.substr(z))}if(O){if(O.length>=3&&O.charCodeAt(0)===47&&O.charCodeAt(2)===58){const z=O.charCodeAt(1);z>=65&&z<=90&&(O=`/${String.fromCharCode(z+32)}:${O.substr(3)}`)}else if(O.length>=2&&O.charCodeAt(1)===58){const z=O.charCodeAt(0);z>=65&&z<=90&&(O=`${String.fromCharCode(z+32)}:${O.substr(2)}`)}_+=P(O,!0,!1)}return N&&(_+="?",_+=P(N,!1,!1)),B&&(_+="#",_+=D?B:m(B,!1,!1)),_}function w(C){try{return decodeURIComponent(C)}catch{return C.length>3?C.substr(0,3)+w(C.substr(3)):C}}const k=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function S(C){return C.match(k)?C.replace(k,D=>w(D)):C}var E=r(470);const L=E.posix||E,A="/";var R;(function(C){C.joinPath=function(D,...P){return D.with({path:L.join(D.path,...P)})},C.resolvePath=function(D,...P){let _=D.path,I=!1;_[0]!==A&&(_=A+_,I=!0);let M=L.resolve(_,...P);return I&&M[0]===A&&!D.authority&&(M=M.substring(1)),D.with({path:M})},C.dirname=function(D){if(D.path.length===0||D.path===A)return D;let P=L.dirname(D.path);return P.length===1&&P.charCodeAt(0)===46&&(P=""),D.with({path:P})},C.basename=function(D){return L.basename(D.path)},C.extname=function(D){return L.extname(D.path)}})(R||(R={}))})(),n$=n})();const{URI:oc,Utils:Ff}=n$;var Uo;(function(e){e.basename=Ff.basename,e.dirname=Ff.dirname,e.extname=Ff.extname,e.joinPath=Ff.joinPath,e.resolvePath=Ff.resolvePath;function t(i,a){return(i==null?void 0:i.toString())===(a==null?void 0:a.toString())}e.equals=t;function r(i,a){const s=typeof i=="string"?i:i.path,o=typeof a=="string"?a:a.path,l=s.split("/").filter(g=>g.length>0),u=o.split("/").filter(g=>g.length>0);let h=0;for(;h<l.length&&l[h]===u[h];h++);const f="../".repeat(l.length-h),d=u.slice(h).join("/");return f+d}e.relative=r;function n(i){return oc.parse(i.toString()).toString()}e.normalize=n})(Uo||(Uo={}));var Lr;(function(e){e[e.Changed=0]="Changed",e[e.Parsed=1]="Parsed",e[e.IndexedContent=2]="IndexedContent",e[e.ComputedScopes=3]="ComputedScopes",e[e.Linked=4]="Linked",e[e.IndexedReferences=5]="IndexedReferences",e[e.Validated=6]="Validated"})(Lr||(Lr={}));class D1t{constructor(t){this.serviceRegistry=t.ServiceRegistry,this.textDocuments=t.workspace.TextDocuments,this.fileSystemProvider=t.workspace.FileSystemProvider}async fromUri(t,r=Nr.CancellationToken.None){const n=await this.fileSystemProvider.readFile(t);return this.createAsync(t,n,r)}fromTextDocument(t,r,n){return r=r??oc.parse(t.uri),Nr.CancellationToken.is(n)?this.createAsync(r,t,n):this.create(r,t,n)}fromString(t,r,n){return Nr.CancellationToken.is(n)?this.createAsync(r,t,n):this.create(r,t,n)}fromModel(t,r){return this.create(r,{$model:t})}create(t,r,n){if(typeof r=="string"){const i=this.parse(t,r,n);return this.createLangiumDocument(i,t,void 0,r)}else if("$model"in r){const i={value:r.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(i,t)}else{const i=this.parse(t,r.getText(),n);return this.createLangiumDocument(i,t,r)}}async createAsync(t,r,n){if(typeof r=="string"){const i=await this.parseAsync(t,r,n);return this.createLangiumDocument(i,t,void 0,r)}else{const i=await this.parseAsync(t,r.getText(),n);return this.createLangiumDocument(i,t,r)}}createLangiumDocument(t,r,n,i){let a;if(n)a={parseResult:t,uri:r,state:Lr.Parsed,references:[],textDocument:n};else{const s=this.createTextDocumentGetter(r,i);a={parseResult:t,uri:r,state:Lr.Parsed,references:[],get textDocument(){return s()}}}return t.value.$document=a,a}async update(t,r){var n,i;const a=(n=t.parseResult.value.$cstNode)===null||n===void 0?void 0:n.root.fullText,s=(i=this.textDocuments)===null||i===void 0?void 0:i.get(t.uri.toString()),o=s?s.getText():await this.fileSystemProvider.readFile(t.uri);if(s)Object.defineProperty(t,"textDocument",{value:s});else{const l=this.createTextDocumentGetter(t.uri,o);Object.defineProperty(t,"textDocument",{get:l})}return a!==o&&(t.parseResult=await this.parseAsync(t.uri,o,r),t.parseResult.value.$document=t),t.state=Lr.Parsed,t}parse(t,r,n){return this.serviceRegistry.getServices(t).parser.LangiumParser.parse(r,n)}parseAsync(t,r,n){return this.serviceRegistry.getServices(t).parser.AsyncParser.parse(r,n)}createTextDocumentGetter(t,r){const n=this.serviceRegistry;let i;return()=>i??(i=fE.create(t.toString(),n.getServices(t).LanguageMetaData.languageId,0,r??""))}}class M1t{constructor(t){this.documentMap=new Map,this.langiumDocumentFactory=t.workspace.LangiumDocumentFactory,this.serviceRegistry=t.ServiceRegistry}get all(){return Nn(this.documentMap.values())}addDocument(t){const r=t.uri.toString();if(this.documentMap.has(r))throw new Error(`A document with the URI '${r}' is already present.`);this.documentMap.set(r,t)}getDocument(t){const r=t.toString();return this.documentMap.get(r)}async getOrCreateDocument(t,r){let n=this.getDocument(t);return n||(n=await this.langiumDocumentFactory.fromUri(t,r),this.addDocument(n),n)}createDocument(t,r,n){if(n)return this.langiumDocumentFactory.fromString(r,t,n).then(i=>(this.addDocument(i),i));{const i=this.langiumDocumentFactory.fromString(r,t);return this.addDocument(i),i}}hasDocument(t){return this.documentMap.has(t.toString())}invalidateDocument(t){const r=t.toString(),n=this.documentMap.get(r);return n&&(this.serviceRegistry.getServices(t).references.Linker.unlink(n),n.state=Lr.Changed,n.precomputedScopes=void 0,n.diagnostics=void 0),n}deleteDocument(t){const r=t.toString(),n=this.documentMap.get(r);return n&&(n.state=Lr.Changed,this.documentMap.delete(r)),n}}const kx=Symbol("ref_resolving");class O1t{constructor(t){this.reflection=t.shared.AstReflection,this.langiumDocuments=()=>t.shared.workspace.LangiumDocuments,this.scopeProvider=t.references.ScopeProvider,this.astNodeLocator=t.workspace.AstNodeLocator}async link(t,r=Nr.CancellationToken.None){for(const n of vu(t.parseResult.value))await Yi(r),GF(n).forEach(i=>this.doLink(i,t))}doLink(t,r){var n;const i=t.reference;if(i._ref===void 0){i._ref=kx;try{const a=this.getCandidate(t);if(l1(a))i._ref=a;else if(i._nodeDescription=a,this.langiumDocuments().hasDocument(a.documentUri)){const s=this.loadAstNode(a);i._ref=s??this.createLinkingError(t,a)}else i._ref=void 0}catch(a){console.error(`An error occurred while resolving reference to '${i.$refText}':`,a);const s=(n=a.message)!==null&&n!==void 0?n:String(a);i._ref=Object.assign(Object.assign({},t),{message:`An error occurred while resolving reference to '${i.$refText}': ${s}`})}r.references.push(i)}}unlink(t){for(const r of t.references)delete r._ref,delete r._nodeDescription;t.references=[]}getCandidate(t){const n=this.scopeProvider.getScope(t).getElement(t.reference.$refText);return n??this.createLinkingError(t)}buildReference(t,r,n,i){const a=this,s={$refNode:n,$refText:i,get ref(){var o;if(Xn(this._ref))return this._ref;if(ydt(this._nodeDescription)){const l=a.loadAstNode(this._nodeDescription);this._ref=l??a.createLinkingError({reference:s,container:t,property:r},this._nodeDescription)}else if(this._ref===void 0){this._ref=kx;const l=Bw(t).$document,u=a.getLinkedNode({reference:s,container:t,property:r});if(u.error&&l&&l.state<Lr.ComputedScopes)return this._ref=void 0;this._ref=(o=u.node)!==null&&o!==void 0?o:u.error,this._nodeDescription=u.descr,l==null||l.references.push(this)}else if(this._ref===kx)throw new Error(`Cyclic reference resolution detected: ${a.astNodeLocator.getAstNodePath(t)}/${r} (symbol '${i}')`);return Xn(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return l1(this._ref)?this._ref:void 0}};return s}getLinkedNode(t){var r;try{const n=this.getCandidate(t);if(l1(n))return{error:n};const i=this.loadAstNode(n);return i?{node:i,descr:n}:{descr:n,error:this.createLinkingError(t,n)}}catch(n){console.error(`An error occurred while resolving reference to '${t.reference.$refText}':`,n);const i=(r=n.message)!==null&&r!==void 0?r:String(n);return{error:Object.assign(Object.assign({},t),{message:`An error occurred while resolving reference to '${t.reference.$refText}': ${i}`})}}}loadAstNode(t){if(t.node)return t.node;const r=this.langiumDocuments().getDocument(t.documentUri);if(r)return this.astNodeLocator.getAstNode(r.parseResult.value,t.path)}createLinkingError(t,r){const n=Bw(t.container).$document;n&&n.state<Lr.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${n.uri}).`);const i=this.reflection.getReferenceType(t);return Object.assign(Object.assign({},t),{message:`Could not resolve reference to ${i} named '${t.reference.$refText}'.`,targetDescription:r})}}function P1t(e){return typeof e.name=="string"}class B1t{getName(t){if(P1t(t))return t.name}getNameNode(t){return qF(t.$cstNode,"name")}}class F1t{constructor(t){this.nameProvider=t.references.NameProvider,this.index=t.shared.workspace.IndexManager,this.nodeLocator=t.workspace.AstNodeLocator}findDeclaration(t){if(t){const r=ugt(t),n=t.astNode;if(r&&n){const i=n[r.feature];if(ns(i))return i.ref;if(Array.isArray(i)){for(const a of i)if(ns(a)&&a.$refNode&&a.$refNode.offset<=t.offset&&a.$refNode.end>=t.end)return a.ref}}if(n){const i=this.nameProvider.getNameNode(n);if(i&&(i===t||Tdt(t,i)))return n}}}findDeclarationNode(t){const r=this.findDeclaration(t);if(r!=null&&r.$cstNode){const n=this.nameProvider.getNameNode(r);return n??r.$cstNode}}findReferences(t,r){const n=[];if(r.includeDeclaration){const a=this.getReferenceToSelf(t);a&&n.push(a)}let i=this.index.findAllReferences(t,this.nodeLocator.getAstNodePath(t));return r.documentUri&&(i=i.filter(a=>Uo.equals(a.sourceUri,r.documentUri))),n.push(...i),Nn(n)}getReferenceToSelf(t){const r=this.nameProvider.getNameNode(t);if(r){const n=$o(t),i=this.nodeLocator.getAstNodePath(t);return{sourceUri:n.uri,sourcePath:i,targetUri:n.uri,targetPath:i,segment:Hv(r),local:!0}}}}class hm{constructor(t){if(this.map=new Map,t)for(const[r,n]of t)this.add(r,n)}get size(){return Mw.sum(Nn(this.map.values()).map(t=>t.length))}clear(){this.map.clear()}delete(t,r){if(r===void 0)return this.map.delete(t);{const n=this.map.get(t);if(n){const i=n.indexOf(r);if(i>=0)return n.length===1?this.map.delete(t):n.splice(i,1),!0}return!1}}get(t){var r;return(r=this.map.get(t))!==null&&r!==void 0?r:[]}has(t,r){if(r===void 0)return this.map.has(t);{const n=this.map.get(t);return n?n.indexOf(r)>=0:!1}}add(t,r){return this.map.has(t)?this.map.get(t).push(r):this.map.set(t,[r]),this}addAll(t,r){return this.map.has(t)?this.map.get(t).push(...r):this.map.set(t,Array.from(r)),this}forEach(t){this.map.forEach((r,n)=>r.forEach(i=>t(i,n,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return Nn(this.map.entries()).flatMap(([t,r])=>r.map(n=>[t,n]))}keys(){return Nn(this.map.keys())}values(){return Nn(this.map.values()).flat()}entriesGroupedByKey(){return Nn(this.map.entries())}}class pL{get size(){return this.map.size}constructor(t){if(this.map=new Map,this.inverse=new Map,t)for(const[r,n]of t)this.set(r,n)}clear(){this.map.clear(),this.inverse.clear()}set(t,r){return this.map.set(t,r),this.inverse.set(r,t),this}get(t){return this.map.get(t)}getKey(t){return this.inverse.get(t)}delete(t){const r=this.map.get(t);return r!==void 0?(this.map.delete(t),this.inverse.delete(r),!0):!1}}class $1t{constructor(t){this.nameProvider=t.references.NameProvider,this.descriptions=t.workspace.AstNodeDescriptionProvider}async computeExports(t,r=Nr.CancellationToken.None){return this.computeExportsForNode(t.parseResult.value,t,void 0,r)}async computeExportsForNode(t,r,n=hS,i=Nr.CancellationToken.None){const a=[];this.exportNode(t,a,r);for(const s of n(t))await Yi(i),this.exportNode(s,a,r);return a}exportNode(t,r,n){const i=this.nameProvider.getName(t);i&&r.push(this.descriptions.createDescription(t,i,n))}async computeLocalScopes(t,r=Nr.CancellationToken.None){const n=t.parseResult.value,i=new hm;for(const a of Tp(n))await Yi(r),this.processNode(a,t,i);return i}processNode(t,r,n){const i=t.$container;if(i){const a=this.nameProvider.getName(t);a&&n.add(i,this.descriptions.createDescription(t,a,r))}}}class vL{constructor(t,r,n){var i;this.elements=t,this.outerScope=r,this.caseInsensitive=(i=n==null?void 0:n.caseInsensitive)!==null&&i!==void 0?i:!1}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(t){const r=this.caseInsensitive?this.elements.find(n=>n.name.toLowerCase()===t.toLowerCase()):this.elements.find(n=>n.name===t);if(r)return r;if(this.outerScope)return this.outerScope.getElement(t)}}class z1t{constructor(t,r,n){var i;this.elements=new Map,this.caseInsensitive=(i=n==null?void 0:n.caseInsensitive)!==null&&i!==void 0?i:!1;for(const a of t){const s=this.caseInsensitive?a.name.toLowerCase():a.name;this.elements.set(s,a)}this.outerScope=r}getElement(t){const r=this.caseInsensitive?t.toLowerCase():t,n=this.elements.get(r);if(n)return n;if(this.outerScope)return this.outerScope.getElement(t)}getAllElements(){let t=Nn(this.elements.values());return this.outerScope&&(t=t.concat(this.outerScope.getAllElements())),t}}class i${constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(t){this.toDispose.push(t)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(t=>t.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}}class V1t extends i${constructor(){super(...arguments),this.cache=new Map}has(t){return this.throwIfDisposed(),this.cache.has(t)}set(t,r){this.throwIfDisposed(),this.cache.set(t,r)}get(t,r){if(this.throwIfDisposed(),this.cache.has(t))return this.cache.get(t);if(r){const n=r();return this.cache.set(t,n),n}else return}delete(t){return this.throwIfDisposed(),this.cache.delete(t)}clear(){this.throwIfDisposed(),this.cache.clear()}}class G1t extends i${constructor(t){super(),this.cache=new Map,this.converter=t??(r=>r)}has(t,r){return this.throwIfDisposed(),this.cacheForContext(t).has(r)}set(t,r,n){this.throwIfDisposed(),this.cacheForContext(t).set(r,n)}get(t,r,n){this.throwIfDisposed();const i=this.cacheForContext(t);if(i.has(r))return i.get(r);if(n){const a=n();return i.set(r,a),a}else return}delete(t,r){return this.throwIfDisposed(),this.cacheForContext(t).delete(r)}clear(t){if(this.throwIfDisposed(),t){const r=this.converter(t);this.cache.delete(r)}else this.cache.clear()}cacheForContext(t){const r=this.converter(t);let n=this.cache.get(r);return n||(n=new Map,this.cache.set(r,n)),n}}class U1t extends V1t{constructor(t,r){super(),r?(this.toDispose.push(t.workspace.DocumentBuilder.onBuildPhase(r,()=>{this.clear()})),this.toDispose.push(t.workspace.DocumentBuilder.onUpdate((n,i)=>{i.length>0&&this.clear()}))):this.toDispose.push(t.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}class W1t{constructor(t){this.reflection=t.shared.AstReflection,this.nameProvider=t.references.NameProvider,this.descriptions=t.workspace.AstNodeDescriptionProvider,this.indexManager=t.shared.workspace.IndexManager,this.globalScopeCache=new U1t(t.shared)}getScope(t){const r=[],n=this.reflection.getReferenceType(t),i=$o(t.container).precomputedScopes;if(i){let s=t.container;do{const o=i.get(s);o.length>0&&r.push(Nn(o).filter(l=>this.reflection.isSubtype(l.type,n))),s=s.$container}while(s)}let a=this.getGlobalScope(n,t);for(let s=r.length-1;s>=0;s--)a=this.createScope(r[s],a);return a}createScope(t,r,n){return new vL(Nn(t),r,n)}createScopeForNodes(t,r,n){const i=Nn(t).map(a=>{const s=this.nameProvider.getName(a);if(s)return this.descriptions.createDescription(a,s)}).nonNullable();return new vL(i,r,n)}getGlobalScope(t,r){return this.globalScopeCache.get(t,()=>new z1t(this.indexManager.allElements(t)))}}function Y1t(e){return typeof e.$comment=="string"}function mL(e){return typeof e=="object"&&!!e&&("$ref"in e||"$error"in e)}class H1t{constructor(t){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=t.shared.workspace.LangiumDocuments,this.astNodeLocator=t.workspace.AstNodeLocator,this.nameProvider=t.references.NameProvider,this.commentProvider=t.documentation.CommentProvider}serialize(t,r){const n=r??{},i=r==null?void 0:r.replacer,a=(o,l)=>this.replacer(o,l,n),s=i?(o,l)=>i(o,l,a):a;try{return this.currentDocument=$o(t),JSON.stringify(t,s,r==null?void 0:r.space)}finally{this.currentDocument=void 0}}deserialize(t,r){const n=r??{},i=JSON.parse(t);return this.linkNode(i,i,n),i}replacer(t,r,{refText:n,sourceText:i,textRegions:a,comments:s,uriConverter:o}){var l,u,h,f;if(!this.ignoreProperties.has(t))if(ns(r)){const d=r.ref,g=n?r.$refText:void 0;if(d){const p=$o(d);let v="";this.currentDocument&&this.currentDocument!==p&&(o?v=o(p.uri,r):v=p.uri.toString());const m=this.astNodeLocator.getAstNodePath(d);return{$ref:`${v}#${m}`,$refText:g}}else return{$error:(u=(l=r.error)===null||l===void 0?void 0:l.message)!==null&&u!==void 0?u:"Could not resolve reference",$refText:g}}else if(Xn(r)){let d;if(a&&(d=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},r)),(!t||r.$document)&&(d!=null&&d.$textRegion)&&(d.$textRegion.documentURI=(h=this.currentDocument)===null||h===void 0?void 0:h.uri.toString())),i&&!t&&(d??(d=Object.assign({},r)),d.$sourceText=(f=r.$cstNode)===null||f===void 0?void 0:f.text),s){d??(d=Object.assign({},r));const g=this.commentProvider.getComment(r);g&&(d.$comment=g.replace(/\r/g,""))}return d??r}else return r}addAstNodeRegionWithAssignmentsTo(t){const r=n=>({offset:n.offset,end:n.end,length:n.length,range:n.range});if(t.$cstNode){const n=t.$textRegion=r(t.$cstNode),i=n.assignments={};return Object.keys(t).filter(a=>!a.startsWith("$")).forEach(a=>{const s=ogt(t.$cstNode,a).map(r);s.length!==0&&(i[a]=s)}),t}}linkNode(t,r,n,i,a,s){for(const[l,u]of Object.entries(t))if(Array.isArray(u))for(let h=0;h<u.length;h++){const f=u[h];mL(f)?u[h]=this.reviveReference(t,l,r,f,n):Xn(f)&&this.linkNode(f,r,n,t,l,h)}else mL(u)?t[l]=this.reviveReference(t,l,r,u,n):Xn(u)&&this.linkNode(u,r,n,t,l);const o=t;o.$container=i,o.$containerProperty=a,o.$containerIndex=s}reviveReference(t,r,n,i,a){let s=i.$refText,o=i.$error;if(i.$ref){const l=this.getRefNode(n,i.$ref,a.uriConverter);if(Xn(l))return s||(s=this.nameProvider.getName(l)),{$refText:s??"",ref:l};o=l}if(o){const l={$refText:s??""};return l.error={container:t,property:r,message:o,reference:l},l}else return}getRefNode(t,r,n){try{const i=r.indexOf("#");if(i===0){const l=this.astNodeLocator.getAstNode(t,r.substring(1));return l||"Could not resolve path: "+r}if(i<0){const l=n?n(r):oc.parse(r),u=this.langiumDocuments.getDocument(l);return u?u.parseResult.value:"Could not find document for URI: "+r}const a=n?n(r.substring(0,i)):oc.parse(r.substring(0,i)),s=this.langiumDocuments.getDocument(a);if(!s)return"Could not find document for URI: "+r;if(i===r.length-1)return s.parseResult.value;const o=this.astNodeLocator.getAstNode(s.parseResult.value,r.substring(i+1));return o||"Could not resolve URI: "+r}catch(i){return String(i)}}}class q1t{get map(){return this.fileExtensionMap}constructor(t){this.languageIdMap=new Map,this.fileExtensionMap=new Map,this.textDocuments=t==null?void 0:t.workspace.TextDocuments}register(t){const r=t.LanguageMetaData;for(const n of r.fileExtensions)this.fileExtensionMap.has(n)&&console.warn(`The file extension ${n} is used by multiple languages. It is now assigned to '${r.languageId}'.`),this.fileExtensionMap.set(n,t);this.languageIdMap.set(r.languageId,t),this.languageIdMap.size===1?this.singleton=t:this.singleton=void 0}getServices(t){var r,n;if(this.singleton!==void 0)return this.singleton;if(this.languageIdMap.size===0)throw new Error("The service registry is empty. Use `register` to register the services of a language.");const i=(n=(r=this.textDocuments)===null||r===void 0?void 0:r.get(t))===null||n===void 0?void 0:n.languageId;if(i!==void 0){const o=this.languageIdMap.get(i);if(o)return o}const a=Uo.extname(t),s=this.fileExtensionMap.get(a);if(!s)throw i?new Error(`The service registry contains no services for the extension '${a}' for language '${i}'.`):new Error(`The service registry contains no services for the extension '${a}'.`);return s}hasServices(t){try{return this.getServices(t),!0}catch{return!1}}get all(){return Array.from(this.languageIdMap.values())}}function Id(e){return{code:e}}var fm;(function(e){e.all=["fast","slow","built-in"]})(fm||(fm={}));class X1t{constructor(t){this.entries=new hm,this.entriesBefore=[],this.entriesAfter=[],this.reflection=t.shared.AstReflection}register(t,r=this,n="fast"){if(n==="built-in")throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(const[i,a]of Object.entries(t)){const s=a;if(Array.isArray(s))for(const o of s){const l={check:this.wrapValidationException(o,r),category:n};this.addEntry(i,l)}else if(typeof s=="function"){const o={check:this.wrapValidationException(s,r),category:n};this.addEntry(i,o)}else bp()}}wrapValidationException(t,r){return async(n,i,a)=>{await this.handleException(()=>t.call(r,n,i,a),"An error occurred during validation",i,n)}}async handleException(t,r,n,i){try{await t()}catch(a){if(Wy(a))throw a;console.error(`${r}:`,a),a instanceof Error&&a.stack&&console.error(a.stack);const s=a instanceof Error?a.message:String(a);n("error",`${r}: ${s}`,{node:i})}}addEntry(t,r){if(t==="AstNode"){this.entries.add("AstNode",r);return}for(const n of this.reflection.getAllSubTypes(t))this.entries.add(n,r)}getChecks(t,r){let n=Nn(this.entries.get(t)).concat(this.entries.get("AstNode"));return r&&(n=n.filter(i=>r.includes(i.category))),n.map(i=>i.check)}registerBeforeDocument(t,r=this){this.entriesBefore.push(this.wrapPreparationException(t,"An error occurred during set-up of the validation",r))}registerAfterDocument(t,r=this){this.entriesAfter.push(this.wrapPreparationException(t,"An error occurred during tear-down of the validation",r))}wrapPreparationException(t,r,n){return async(i,a,s,o)=>{await this.handleException(()=>t.call(n,i,a,s,o),r,a,i)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}}class j1t{constructor(t){this.validationRegistry=t.validation.ValidationRegistry,this.metadata=t.LanguageMetaData}async validateDocument(t,r={},n=Nr.CancellationToken.None){const i=t.parseResult,a=[];if(await Yi(n),(!r.categories||r.categories.includes("built-in"))&&(this.processLexingErrors(i,a,r),r.stopAfterLexingErrors&&a.some(s=>{var o;return((o=s.data)===null||o===void 0?void 0:o.code)===La.LexingError})||(this.processParsingErrors(i,a,r),r.stopAfterParsingErrors&&a.some(s=>{var o;return((o=s.data)===null||o===void 0?void 0:o.code)===La.ParsingError}))||(this.processLinkingErrors(t,a,r),r.stopAfterLinkingErrors&&a.some(s=>{var o;return((o=s.data)===null||o===void 0?void 0:o.code)===La.LinkingError}))))return a;try{a.push(...await this.validateAst(i.value,r,n))}catch(s){if(Wy(s))throw s;console.error("An error occurred during validation:",s)}return await Yi(n),a}processLexingErrors(t,r,n){var i,a,s;const o=[...t.lexerErrors,...(a=(i=t.lexerReport)===null||i===void 0?void 0:i.diagnostics)!==null&&a!==void 0?a:[]];for(const l of o){const u=(s=l.severity)!==null&&s!==void 0?s:"error",h={severity:Cx(u),range:{start:{line:l.line-1,character:l.column-1},end:{line:l.line-1,character:l.column+l.length-1}},message:l.message,data:Z1t(u),source:this.getSource()};r.push(h)}}processParsingErrors(t,r,n){for(const i of t.parserErrors){let a;if(isNaN(i.token.startOffset)){if("previousToken"in i){const s=i.previousToken;if(isNaN(s.startOffset)){const o={line:0,character:0};a={start:o,end:o}}else{const o={line:s.endLine-1,character:s.endColumn};a={start:o,end:o}}}}else a=Pw(i.token);if(a){const s={severity:Cx("error"),range:a,message:i.message,data:Id(La.ParsingError),source:this.getSource()};r.push(s)}}}processLinkingErrors(t,r,n){for(const i of t.references){const a=i.error;if(a){const s={node:a.container,property:a.property,index:a.index,data:{code:La.LinkingError,containerType:a.container.$type,property:a.property,refText:a.reference.$refText}};r.push(this.toDiagnostic("error",a.message,s))}}}async validateAst(t,r,n=Nr.CancellationToken.None){const i=[],a=(s,o,l)=>{i.push(this.toDiagnostic(s,o,l))};return await this.validateAstBefore(t,r,a,n),await this.validateAstNodes(t,r,a,n),await this.validateAstAfter(t,r,a,n),i}async validateAstBefore(t,r,n,i=Nr.CancellationToken.None){var a;const s=this.validationRegistry.checksBefore;for(const o of s)await Yi(i),await o(t,n,(a=r.categories)!==null&&a!==void 0?a:[],i)}async validateAstNodes(t,r,n,i=Nr.CancellationToken.None){await Promise.all(vu(t).map(async a=>{await Yi(i);const s=this.validationRegistry.getChecks(a.$type,r.categories);for(const o of s)await o(a,n,i)}))}async validateAstAfter(t,r,n,i=Nr.CancellationToken.None){var a;const s=this.validationRegistry.checksAfter;for(const o of s)await Yi(i),await o(t,n,(a=r.categories)!==null&&a!==void 0?a:[],i)}toDiagnostic(t,r,n){return{message:r,range:K1t(n),severity:Cx(t),code:n.code,codeDescription:n.codeDescription,tags:n.tags,relatedInformation:n.relatedInformation,data:n.data,source:this.getSource()}}getSource(){return this.metadata.languageId}}function K1t(e){if(e.range)return e.range;let t;return typeof e.property=="string"?t=qF(e.node.$cstNode,e.property,e.index):typeof e.keyword=="string"&&(t=lgt(e.node.$cstNode,e.keyword,e.index)),t??(t=e.node.$cstNode),t?t.range:{start:{line:0,character:0},end:{line:0,character:0}}}function Cx(e){switch(e){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+e)}}function Z1t(e){switch(e){case"error":return Id(La.LexingError);case"warning":return Id(La.LexingWarning);case"info":return Id(La.LexingInfo);case"hint":return Id(La.LexingHint);default:throw new Error("Invalid diagnostic severity: "+e)}}var La;(function(e){e.LexingError="lexing-error",e.LexingWarning="lexing-warning",e.LexingInfo="lexing-info",e.LexingHint="lexing-hint",e.ParsingError="parsing-error",e.LinkingError="linking-error"})(La||(La={}));class Q1t{constructor(t){this.astNodeLocator=t.workspace.AstNodeLocator,this.nameProvider=t.references.NameProvider}createDescription(t,r,n){const i=n??$o(t);r??(r=this.nameProvider.getName(t));const a=this.astNodeLocator.getAstNodePath(t);if(!r)throw new Error(`Node at path ${a} has no name.`);let s;const o=()=>{var l;return s??(s=Hv((l=this.nameProvider.getNameNode(t))!==null&&l!==void 0?l:t.$cstNode))};return{node:t,name:r,get nameSegment(){return o()},selectionSegment:Hv(t.$cstNode),type:t.$type,documentUri:i.uri,path:a}}}class J1t{constructor(t){this.nodeLocator=t.workspace.AstNodeLocator}async createDescriptions(t,r=Nr.CancellationToken.None){const n=[],i=t.parseResult.value;for(const a of vu(i))await Yi(r),GF(a).filter(s=>!l1(s)).forEach(s=>{const o=this.createDescription(s);o&&n.push(o)});return n}createDescription(t){const r=t.reference.$nodeDescription,n=t.reference.$refNode;if(!r||!n)return;const i=$o(t.container).uri;return{sourceUri:i,sourcePath:this.nodeLocator.getAstNodePath(t.container),targetUri:r.documentUri,targetPath:r.path,segment:Hv(n),local:Uo.equals(r.documentUri,i)}}}class tvt{constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(t){if(t.$container){const r=this.getAstNodePath(t.$container),n=this.getPathSegment(t);return r+this.segmentSeparator+n}return""}getPathSegment({$containerProperty:t,$containerIndex:r}){if(!t)throw new Error("Missing '$containerProperty' in AST node.");return r!==void 0?t+this.indexSeparator+r:t}getAstNode(t,r){return r.split(this.segmentSeparator).reduce((i,a)=>{if(!i||a.length===0)return i;const s=a.indexOf(this.indexSeparator);if(s>0){const o=a.substring(0,s),l=parseInt(a.substring(s+1)),u=i[o];return u==null?void 0:u[l]}return i[a]},t)}}var evt=t$();class rvt{constructor(t){this._ready=new LS,this.settings={},this.workspaceConfig=!1,this.onConfigurationSectionUpdateEmitter=new evt.Emitter,this.serviceRegistry=t.ServiceRegistry}get ready(){return this._ready.promise}initialize(t){var r,n;this.workspaceConfig=(n=(r=t.capabilities.workspace)===null||r===void 0?void 0:r.configuration)!==null&&n!==void 0?n:!1}async initialized(t){if(this.workspaceConfig){if(t.register){const r=this.serviceRegistry.all;t.register({section:r.map(n=>this.toSectionName(n.LanguageMetaData.languageId))})}if(t.fetchConfiguration){const r=this.serviceRegistry.all.map(i=>({section:this.toSectionName(i.LanguageMetaData.languageId)})),n=await t.fetchConfiguration(r);r.forEach((i,a)=>{this.updateSectionConfiguration(i.section,n[a])})}}this._ready.resolve()}updateConfiguration(t){t.settings&&Object.keys(t.settings).forEach(r=>{const n=t.settings[r];this.updateSectionConfiguration(r,n),this.onConfigurationSectionUpdateEmitter.fire({section:r,configuration:n})})}updateSectionConfiguration(t,r){this.settings[t]=r}async getConfiguration(t,r){await this.ready;const n=this.toSectionName(t);if(this.settings[n])return this.settings[n][r]}toSectionName(t){return`${t}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}}var Jd;(function(e){function t(r){return{dispose:async()=>await r()}}e.create=t})(Jd||(Jd={}));class nvt{constructor(t){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new hm,this.documentPhaseListeners=new hm,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=Lr.Changed,this.langiumDocuments=t.workspace.LangiumDocuments,this.langiumDocumentFactory=t.workspace.LangiumDocumentFactory,this.textDocuments=t.workspace.TextDocuments,this.indexManager=t.workspace.IndexManager,this.serviceRegistry=t.ServiceRegistry}async build(t,r={},n=Nr.CancellationToken.None){var i,a;for(const s of t){const o=s.uri.toString();if(s.state===Lr.Validated){if(typeof r.validation=="boolean"&&r.validation)s.state=Lr.IndexedReferences,s.diagnostics=void 0,this.buildState.delete(o);else if(typeof r.validation=="object"){const l=this.buildState.get(o),u=(i=l==null?void 0:l.result)===null||i===void 0?void 0:i.validationChecks;if(u){const f=((a=r.validation.categories)!==null&&a!==void 0?a:fm.all).filter(d=>!u.includes(d));f.length>0&&(this.buildState.set(o,{completed:!1,options:{validation:Object.assign(Object.assign({},r.validation),{categories:f})},result:l.result}),s.state=Lr.IndexedReferences)}}}else this.buildState.delete(o)}this.currentState=Lr.Changed,await this.emitUpdate(t.map(s=>s.uri),[]),await this.buildDocuments(t,r,n)}async update(t,r,n=Nr.CancellationToken.None){this.currentState=Lr.Changed;for(const s of r)this.langiumDocuments.deleteDocument(s),this.buildState.delete(s.toString()),this.indexManager.remove(s);for(const s of t){if(!this.langiumDocuments.invalidateDocument(s)){const l=this.langiumDocumentFactory.fromModel({$type:"INVALID"},s);l.state=Lr.Changed,this.langiumDocuments.addDocument(l)}this.buildState.delete(s.toString())}const i=Nn(t).concat(r).map(s=>s.toString()).toSet();this.langiumDocuments.all.filter(s=>!i.has(s.uri.toString())&&this.shouldRelink(s,i)).forEach(s=>{this.serviceRegistry.getServices(s.uri).references.Linker.unlink(s),s.state=Math.min(s.state,Lr.ComputedScopes),s.diagnostics=void 0}),await this.emitUpdate(t,r),await Yi(n);const a=this.sortDocuments(this.langiumDocuments.all.filter(s=>{var o;return s.state<Lr.Linked||!(!((o=this.buildState.get(s.uri.toString()))===null||o===void 0)&&o.completed)}).toArray());await this.buildDocuments(a,this.updateBuildOptions,n)}async emitUpdate(t,r){await Promise.all(this.updateListeners.map(n=>n(t,r)))}sortDocuments(t){let r=0,n=t.length-1;for(;r<n;){for(;r<t.length&&this.hasTextDocument(t[r]);)r++;for(;n>=0&&!this.hasTextDocument(t[n]);)n--;r<n&&([t[r],t[n]]=[t[n],t[r]])}return t}hasTextDocument(t){var r;return!!(!((r=this.textDocuments)===null||r===void 0)&&r.get(t.uri))}shouldRelink(t,r){return t.references.some(n=>n.error!==void 0)?!0:this.indexManager.isAffected(t,r)}onUpdate(t){return this.updateListeners.push(t),Jd.create(()=>{const r=this.updateListeners.indexOf(t);r>=0&&this.updateListeners.splice(r,1)})}async buildDocuments(t,r,n){this.prepareBuild(t,r),await this.runCancelable(t,Lr.Parsed,n,a=>this.langiumDocumentFactory.update(a,n)),await this.runCancelable(t,Lr.IndexedContent,n,a=>this.indexManager.updateContent(a,n)),await this.runCancelable(t,Lr.ComputedScopes,n,async a=>{const s=this.serviceRegistry.getServices(a.uri).references.ScopeComputation;a.precomputedScopes=await s.computeLocalScopes(a,n)}),await this.runCancelable(t,Lr.Linked,n,a=>this.serviceRegistry.getServices(a.uri).references.Linker.link(a,n)),await this.runCancelable(t,Lr.IndexedReferences,n,a=>this.indexManager.updateReferences(a,n));const i=t.filter(a=>this.shouldValidate(a));await this.runCancelable(i,Lr.Validated,n,a=>this.validate(a,n));for(const a of t){const s=this.buildState.get(a.uri.toString());s&&(s.completed=!0)}}prepareBuild(t,r){for(const n of t){const i=n.uri.toString(),a=this.buildState.get(i);(!a||a.completed)&&this.buildState.set(i,{completed:!1,options:r,result:a==null?void 0:a.result})}}async runCancelable(t,r,n,i){const a=t.filter(o=>o.state<r);for(const o of a)await Yi(n),await i(o),o.state=r,await this.notifyDocumentPhase(o,r,n);const s=t.filter(o=>o.state===r);await this.notifyBuildPhase(s,r,n),this.currentState=r}onBuildPhase(t,r){return this.buildPhaseListeners.add(t,r),Jd.create(()=>{this.buildPhaseListeners.delete(t,r)})}onDocumentPhase(t,r){return this.documentPhaseListeners.add(t,r),Jd.create(()=>{this.documentPhaseListeners.delete(t,r)})}waitUntil(t,r,n){let i;if(r&&"path"in r?i=r:n=r,n??(n=Nr.CancellationToken.None),i){const a=this.langiumDocuments.getDocument(i);if(a&&a.state>t)return Promise.resolve(i)}return this.currentState>=t?Promise.resolve(void 0):n.isCancellationRequested?Promise.reject(um):new Promise((a,s)=>{const o=this.onBuildPhase(t,()=>{if(o.dispose(),l.dispose(),i){const u=this.langiumDocuments.getDocument(i);a(u==null?void 0:u.uri)}else a(void 0)}),l=n.onCancellationRequested(()=>{o.dispose(),l.dispose(),s(um)})})}async notifyDocumentPhase(t,r,n){const a=this.documentPhaseListeners.get(r).slice();for(const s of a)try{await s(t,n)}catch(o){if(!Wy(o))throw o}}async notifyBuildPhase(t,r,n){if(t.length===0)return;const a=this.buildPhaseListeners.get(r).slice();for(const s of a)await Yi(n),await s(t,n)}shouldValidate(t){return!!this.getBuildOptions(t).validation}async validate(t,r){var n,i;const a=this.serviceRegistry.getServices(t.uri).validation.DocumentValidator,s=this.getBuildOptions(t).validation,o=typeof s=="object"?s:void 0,l=await a.validateDocument(t,o,r);t.diagnostics?t.diagnostics.push(...l):t.diagnostics=l;const u=this.buildState.get(t.uri.toString());if(u){(n=u.result)!==null&&n!==void 0||(u.result={});const h=(i=o==null?void 0:o.categories)!==null&&i!==void 0?i:fm.all;u.result.validationChecks?u.result.validationChecks.push(...h):u.result.validationChecks=[...h]}}getBuildOptions(t){var r,n;return(n=(r=this.buildState.get(t.uri.toString()))===null||r===void 0?void 0:r.options)!==null&&n!==void 0?n:{}}}class ivt{constructor(t){this.symbolIndex=new Map,this.symbolByTypeIndex=new G1t,this.referenceIndex=new Map,this.documents=t.workspace.LangiumDocuments,this.serviceRegistry=t.ServiceRegistry,this.astReflection=t.AstReflection}findAllReferences(t,r){const n=$o(t).uri,i=[];return this.referenceIndex.forEach(a=>{a.forEach(s=>{Uo.equals(s.targetUri,n)&&s.targetPath===r&&i.push(s)})}),Nn(i)}allElements(t,r){let n=Nn(this.symbolIndex.keys());return r&&(n=n.filter(i=>!r||r.has(i))),n.map(i=>this.getFileDescriptions(i,t)).flat()}getFileDescriptions(t,r){var n;return r?this.symbolByTypeIndex.get(t,r,()=>{var a;return((a=this.symbolIndex.get(t))!==null&&a!==void 0?a:[]).filter(o=>this.astReflection.isSubtype(o.type,r))}):(n=this.symbolIndex.get(t))!==null&&n!==void 0?n:[]}remove(t){const r=t.toString();this.symbolIndex.delete(r),this.symbolByTypeIndex.clear(r),this.referenceIndex.delete(r)}async updateContent(t,r=Nr.CancellationToken.None){const i=await this.serviceRegistry.getServices(t.uri).references.ScopeComputation.computeExports(t,r),a=t.uri.toString();this.symbolIndex.set(a,i),this.symbolByTypeIndex.clear(a)}async updateReferences(t,r=Nr.CancellationToken.None){const i=await this.serviceRegistry.getServices(t.uri).workspace.ReferenceDescriptionProvider.createDescriptions(t,r);this.referenceIndex.set(t.uri.toString(),i)}isAffected(t,r){const n=this.referenceIndex.get(t.uri.toString());return n?n.some(i=>!i.local&&r.has(i.targetUri.toString())):!1}}class avt{constructor(t){this.initialBuildOptions={},this._ready=new LS,this.serviceRegistry=t.ServiceRegistry,this.langiumDocuments=t.workspace.LangiumDocuments,this.documentBuilder=t.workspace.DocumentBuilder,this.fileSystemProvider=t.workspace.FileSystemProvider,this.mutex=t.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(t){var r;this.folders=(r=t.workspaceFolders)!==null&&r!==void 0?r:void 0}initialized(t){return this.mutex.write(r=>{var n;return this.initializeWorkspace((n=this.folders)!==null&&n!==void 0?n:[],r)})}async initializeWorkspace(t,r=Nr.CancellationToken.None){const n=await this.performStartup(t);await Yi(r),await this.documentBuilder.build(n,this.initialBuildOptions,r)}async performStartup(t){const r=this.serviceRegistry.all.flatMap(a=>a.LanguageMetaData.fileExtensions),n=[],i=a=>{n.push(a),this.langiumDocuments.hasDocument(a.uri)||this.langiumDocuments.addDocument(a)};return await this.loadAdditionalDocuments(t,i),await Promise.all(t.map(a=>[a,this.getRootFolder(a)]).map(async a=>this.traverseFolder(...a,r,i))),this._ready.resolve(),n}loadAdditionalDocuments(t,r){return Promise.resolve()}getRootFolder(t){return oc.parse(t.uri)}async traverseFolder(t,r,n,i){const a=await this.fileSystemProvider.readDirectory(r);await Promise.all(a.map(async s=>{if(this.includeEntry(t,s,n)){if(s.isDirectory)await this.traverseFolder(t,s.uri,n,i);else if(s.isFile){const o=await this.langiumDocuments.getOrCreateDocument(s.uri);i(o)}}}))}includeEntry(t,r,n){const i=Uo.basename(r.uri);if(i.startsWith("."))return!1;if(r.isDirectory)return i!=="node_modules"&&i!=="out";if(r.isFile){const a=Uo.extname(r.uri);return n.includes(a)}return!1}}class svt{buildUnexpectedCharactersMessage(t,r,n,i,a){return Gw.buildUnexpectedCharactersMessage(t,r,n,i,a)}buildUnableToPopLexerModeMessage(t){return Gw.buildUnableToPopLexerModeMessage(t)}}const ovt={mode:"full"};class lvt{constructor(t){this.errorMessageProvider=t.parser.LexerErrorMessageProvider,this.tokenBuilder=t.parser.TokenBuilder;const r=this.tokenBuilder.buildTokens(t.Grammar,{caseInsensitive:t.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(r);const n=yL(r)?Object.values(r):r,i=t.LanguageMetaData.mode==="production";this.chevrotainLexer=new Ai(n,{positionTracking:"full",skipValidations:i,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(t,r=ovt){var n,i,a;const s=this.chevrotainLexer.tokenize(t);return{tokens:s.tokens,errors:s.errors,hidden:(n=s.groups.hidden)!==null&&n!==void 0?n:[],report:(a=(i=this.tokenBuilder).flushLexingReport)===null||a===void 0?void 0:a.call(i,t)}}toTokenTypeDictionary(t){if(yL(t))return t;const r=a$(t)?Object.values(t.modes).flat():t,n={};return r.forEach(i=>n[i.name]=i),n}}function cvt(e){return Array.isArray(e)&&(e.length===0||"name"in e[0])}function a$(e){return e&&"modes"in e&&"defaultMode"in e}function yL(e){return!cvt(e)&&!a$(e)}function uvt(e,t,r){let n,i;typeof e=="string"?(i=t,n=r):(i=e.range.start,n=t),i||(i=nr.create(0,0));const a=s$(e),s=RS(n),o=dvt({lines:a,position:i,options:s});return yvt({index:0,tokens:o,position:i})}function hvt(e,t){const r=RS(t),n=s$(e);if(n.length===0)return!1;const i=n[0],a=n[n.length-1],s=r.start,o=r.end;return!!(s!=null&&s.exec(i))&&!!(o!=null&&o.exec(a))}function s$(e){let t="";return typeof e=="string"?t=e:t=e.text,t.split(jdt)}const xL=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,fvt=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function dvt(e){var t,r,n;const i=[];let a=e.position.line,s=e.position.character;for(let o=0;o<e.lines.length;o++){const l=o===0,u=o===e.lines.length-1;let h=e.lines[o],f=0;if(l&&e.options.start){const g=(t=e.options.start)===null||t===void 0?void 0:t.exec(h);g&&(f=g.index+g[0].length)}else{const g=(r=e.options.line)===null||r===void 0?void 0:r.exec(h);g&&(f=g.index+g[0].length)}if(u){const g=(n=e.options.end)===null||n===void 0?void 0:n.exec(h);g&&(h=h.substring(0,g.index))}if(h=h.substring(0,mvt(h)),gE(h,f)>=h.length){if(i.length>0){const g=nr.create(a,s);i.push({type:"break",content:"",range:Ke.create(g,g)})}}else{xL.lastIndex=f;const g=xL.exec(h);if(g){const p=g[0],v=g[1],m=nr.create(a,s+f),y=nr.create(a,s+f+p.length);i.push({type:"tag",content:v,range:Ke.create(m,y)}),f+=p.length,f=gE(h,f)}if(f<h.length){const p=h.substring(f),v=Array.from(p.matchAll(fvt));i.push(...gvt(v,p,a,s+f))}}a++,s=0}return i.length>0&&i[i.length-1].type==="break"?i.slice(0,-1):i}function gvt(e,t,r,n){const i=[];if(e.length===0){const a=nr.create(r,n),s=nr.create(r,n+t.length);i.push({type:"text",content:t,range:Ke.create(a,s)})}else{let a=0;for(const o of e){const l=o.index,u=t.substring(a,l);u.length>0&&i.push({type:"text",content:t.substring(a,l),range:Ke.create(nr.create(r,a+n),nr.create(r,l+n))});let h=u.length+1;const f=o[1];if(i.push({type:"inline-tag",content:f,range:Ke.create(nr.create(r,a+h+n),nr.create(r,a+h+f.length+n))}),h+=f.length,o.length===4){h+=o[2].length;const d=o[3];i.push({type:"text",content:d,range:Ke.create(nr.create(r,a+h+n),nr.create(r,a+h+d.length+n))})}else i.push({type:"text",content:"",range:Ke.create(nr.create(r,a+h+n),nr.create(r,a+h+n))});a=l+o[0].length}const s=t.substring(a);s.length>0&&i.push({type:"text",content:s,range:Ke.create(nr.create(r,a+n),nr.create(r,a+n+s.length))})}return i}const pvt=/\S/,vvt=/\s*$/;function gE(e,t){const r=e.substring(t).match(pvt);return r?t+r.index:e.length}function mvt(e){const t=e.match(vvt);if(t&&typeof t.index=="number")return t.index}function yvt(e){var t,r,n,i;const a=nr.create(e.position.line,e.position.character);if(e.tokens.length===0)return new bL([],Ke.create(a,a));const s=[];for(;e.index<e.tokens.length;){const u=xvt(e,s[s.length-1]);u&&s.push(u)}const o=(r=(t=s[0])===null||t===void 0?void 0:t.range.start)!==null&&r!==void 0?r:a,l=(i=(n=s[s.length-1])===null||n===void 0?void 0:n.range.end)!==null&&i!==void 0?i:a;return new bL(s,Ke.create(o,l))}function xvt(e,t){const r=e.tokens[e.index];if(r.type==="tag")return l$(e,!1);if(r.type==="text"||r.type==="inline-tag")return o$(e);bvt(r,t),e.index++}function bvt(e,t){if(t){const r=new u$("",e.range);"inlines"in t?t.inlines.push(r):t.content.inlines.push(r)}}function o$(e){let t=e.tokens[e.index];const r=t;let n=t;const i=[];for(;t&&t.type!=="break"&&t.type!=="tag";)i.push(Tvt(e)),n=t,t=e.tokens[e.index];return new pE(i,Ke.create(r.range.start,n.range.end))}function Tvt(e){return e.tokens[e.index].type==="inline-tag"?l$(e,!0):c$(e)}function l$(e,t){const r=e.tokens[e.index++],n=r.content.substring(1),i=e.tokens[e.index];if((i==null?void 0:i.type)==="text")if(t){const a=c$(e);return new _x(n,new pE([a],a.range),t,Ke.create(r.range.start,a.range.end))}else{const a=o$(e);return new _x(n,a,t,Ke.create(r.range.start,a.range.end))}else{const a=r.range;return new _x(n,new pE([],a),t,a)}}function c$(e){const t=e.tokens[e.index++];return new u$(t.content,t.range)}function RS(e){if(!e)return RS({start:"/**",end:"*/",line:"*"});const{start:t,end:r,line:n}=e;return{start:Sx(t,!0),end:Sx(r,!1),line:Sx(n,!0)}}function Sx(e,t){if(typeof e=="string"||typeof e=="object"){const r=typeof e=="string"?Py(e):e.source;return t?new RegExp(`^\\s*${r}`):new RegExp(`\\s*${r}\\s*$`)}else return e}class bL{constructor(t,r){this.elements=t,this.range=r}getTag(t){return this.getAllTags().find(r=>r.name===t)}getTags(t){return this.getAllTags().filter(r=>r.name===t)}getAllTags(){return this.elements.filter(t=>"name"in t)}toString(){let t="";for(const r of this.elements)if(t.length===0)t=r.toString();else{const n=r.toString();t+=TL(t)+n}return t.trim()}toMarkdown(t){let r="";for(const n of this.elements)if(r.length===0)r=n.toMarkdown(t);else{const i=n.toMarkdown(t);r+=TL(r)+i}return r.trim()}}class _x{constructor(t,r,n,i){this.name=t,this.content=r,this.inline=n,this.range=i}toString(){let t=`@${this.name}`;const r=this.content.toString();return this.content.inlines.length===1?t=`${t} ${r}`:this.content.inlines.length>1&&(t=`${t}
${r}`),this.inline?`{${t}}`:t}toMarkdown(t){var r,n;return(n=(r=t==null?void 0:t.renderTag)===null||r===void 0?void 0:r.call(t,this))!==null&&n!==void 0?n:this.toMarkdownDefault(t)}toMarkdownDefault(t){const r=this.content.toMarkdown(t);if(this.inline){const a=wvt(this.name,r,t??{});if(typeof a=="string")return a}let n="";(t==null?void 0:t.tag)==="italic"||(t==null?void 0:t.tag)===void 0?n="*":(t==null?void 0:t.tag)==="bold"?n="**":(t==null?void 0:t.tag)==="bold-italic"&&(n="***");let i=`${n}@${this.name}${n}`;return this.content.inlines.length===1?i=`${i} — ${r}`:this.content.inlines.length>1&&(i=`${i}
${r}`),this.inline?`{${i}}`:i}}function wvt(e,t,r){var n,i;if(e==="linkplain"||e==="linkcode"||e==="link"){const a=t.indexOf(" ");let s=t;if(a>0){const l=gE(t,a);s=t.substring(l),t=t.substring(0,a)}return(e==="linkcode"||e==="link"&&r.link==="code")&&(s=`\`${s}\``),(i=(n=r.renderLink)===null||n===void 0?void 0:n.call(r,t,s))!==null&&i!==void 0?i:Evt(t,s)}}function Evt(e,t){try{return oc.parse(e,!0),`[${t}](${e})`}catch{return e}}class pE{constructor(t,r){this.inlines=t,this.range=r}toString(){let t="";for(let r=0;r<this.inlines.length;r++){const n=this.inlines[r],i=this.inlines[r+1];t+=n.toString(),i&&i.range.start.line>n.range.start.line&&(t+=`
`)}return t}toMarkdown(t){let r="";for(let n=0;n<this.inlines.length;n++){const i=this.inlines[n],a=this.inlines[n+1];r+=i.toMarkdown(t),a&&a.range.start.line>i.range.start.line&&(r+=`
`)}return r}}class u${constructor(t,r){this.text=t,this.range=r}toString(){return this.text}toMarkdown(){return this.text}}function TL(e){return e.endsWith(`
`)?`
`:`

`}class kvt{constructor(t){this.indexManager=t.shared.workspace.IndexManager,this.commentProvider=t.documentation.CommentProvider}getDocumentation(t){const r=this.commentProvider.getComment(t);if(r&&hvt(r))return uvt(r).toMarkdown({renderLink:(i,a)=>this.documentationLinkRenderer(t,i,a),renderTag:i=>this.documentationTagRenderer(t,i)})}documentationLinkRenderer(t,r,n){var i;const a=(i=this.findNameInPrecomputedScopes(t,r))!==null&&i!==void 0?i:this.findNameInGlobalScope(t,r);if(a&&a.nameSegment){const s=a.nameSegment.range.start.line+1,o=a.nameSegment.range.start.character+1,l=a.documentUri.with({fragment:`L${s},${o}`});return`[${n}](${l.toString()})`}else return}documentationTagRenderer(t,r){}findNameInPrecomputedScopes(t,r){const i=$o(t).precomputedScopes;if(!i)return;let a=t;do{const o=i.get(a).find(l=>l.name===r);if(o)return o;a=a.$container}while(a)}findNameInGlobalScope(t,r){return this.indexManager.allElements().find(i=>i.name===r)}}class Cvt{constructor(t){this.grammarConfig=()=>t.parser.GrammarConfig}getComment(t){var r;return Y1t(t)?t.$comment:(r=Cdt(t.$cstNode,this.grammarConfig().multilineCommentRules))===null||r===void 0?void 0:r.text}}class Svt{constructor(t){this.syncParser=t.parser.LangiumParser}parse(t,r){return Promise.resolve(this.syncParser.parse(t))}}class _vt{constructor(){this.previousTokenSource=new Nr.CancellationTokenSource,this.writeQueue=[],this.readQueue=[],this.done=!0}write(t){this.cancelWrite();const r=I1t();return this.previousTokenSource=r,this.enqueue(this.writeQueue,t,r.token)}read(t){return this.enqueue(this.readQueue,t)}enqueue(t,r,n=Nr.CancellationToken.None){const i=new LS,a={action:r,deferred:i,cancellationToken:n};return t.push(a),this.performNextOperation(),i.promise}async performNextOperation(){if(!this.done)return;const t=[];if(this.writeQueue.length>0)t.push(this.writeQueue.shift());else if(this.readQueue.length>0)t.push(...this.readQueue.splice(0,this.readQueue.length));else return;this.done=!1,await Promise.all(t.map(async({action:r,deferred:n,cancellationToken:i})=>{try{const a=await Promise.resolve().then(()=>r(i));n.resolve(a)}catch(a){Wy(a)?n.resolve(void 0):n.reject(a)}})),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}}class Avt{constructor(t){this.grammarElementIdMap=new pL,this.tokenTypeIdMap=new pL,this.grammar=t.Grammar,this.lexer=t.parser.Lexer,this.linker=t.references.Linker}dehydrate(t){return{lexerErrors:t.lexerErrors,lexerReport:t.lexerReport?this.dehydrateLexerReport(t.lexerReport):void 0,parserErrors:t.parserErrors.map(r=>Object.assign(Object.assign({},r),{message:r.message})),value:this.dehydrateAstNode(t.value,this.createDehyrationContext(t.value))}}dehydrateLexerReport(t){return t}createDehyrationContext(t){const r=new Map,n=new Map;for(const i of vu(t))r.set(i,{});if(t.$cstNode)for(const i of Ow(t.$cstNode))n.set(i,{});return{astNodes:r,cstNodes:n}}dehydrateAstNode(t,r){const n=r.astNodes.get(t);n.$type=t.$type,n.$containerIndex=t.$containerIndex,n.$containerProperty=t.$containerProperty,t.$cstNode!==void 0&&(n.$cstNode=this.dehydrateCstNode(t.$cstNode,r));for(const[i,a]of Object.entries(t))if(!i.startsWith("$"))if(Array.isArray(a)){const s=[];n[i]=s;for(const o of a)Xn(o)?s.push(this.dehydrateAstNode(o,r)):ns(o)?s.push(this.dehydrateReference(o,r)):s.push(o)}else Xn(a)?n[i]=this.dehydrateAstNode(a,r):ns(a)?n[i]=this.dehydrateReference(a,r):a!==void 0&&(n[i]=a);return n}dehydrateReference(t,r){const n={};return n.$refText=t.$refText,t.$refNode&&(n.$refNode=r.cstNodes.get(t.$refNode)),n}dehydrateCstNode(t,r){const n=r.cstNodes.get(t);return MF(t)?n.fullText=t.fullText:n.grammarSource=this.getGrammarElementId(t.grammarSource),n.hidden=t.hidden,n.astNode=r.astNodes.get(t.astNode),Lg(t)?n.content=t.content.map(i=>this.dehydrateCstNode(i,r)):DF(t)&&(n.tokenType=t.tokenType.name,n.offset=t.offset,n.length=t.length,n.startLine=t.range.start.line,n.startColumn=t.range.start.character,n.endLine=t.range.end.line,n.endColumn=t.range.end.character),n}hydrate(t){const r=t.value,n=this.createHydrationContext(r);return"$cstNode"in r&&this.hydrateCstNode(r.$cstNode,n),{lexerErrors:t.lexerErrors,lexerReport:t.lexerReport,parserErrors:t.parserErrors,value:this.hydrateAstNode(r,n)}}createHydrationContext(t){const r=new Map,n=new Map;for(const a of vu(t))r.set(a,{});let i;if(t.$cstNode)for(const a of Ow(t.$cstNode)){let s;"fullText"in a?(s=new U9(a.fullText),i=s):"content"in a?s=new _S:"tokenType"in a&&(s=this.hydrateCstLeafNode(a)),s&&(n.set(a,s),s.root=i)}return{astNodes:r,cstNodes:n}}hydrateAstNode(t,r){const n=r.astNodes.get(t);n.$type=t.$type,n.$containerIndex=t.$containerIndex,n.$containerProperty=t.$containerProperty,t.$cstNode&&(n.$cstNode=r.cstNodes.get(t.$cstNode));for(const[i,a]of Object.entries(t))if(!i.startsWith("$"))if(Array.isArray(a)){const s=[];n[i]=s;for(const o of a)Xn(o)?s.push(this.setParent(this.hydrateAstNode(o,r),n)):ns(o)?s.push(this.hydrateReference(o,n,i,r)):s.push(o)}else Xn(a)?n[i]=this.setParent(this.hydrateAstNode(a,r),n):ns(a)?n[i]=this.hydrateReference(a,n,i,r):a!==void 0&&(n[i]=a);return n}setParent(t,r){return t.$container=r,t}hydrateReference(t,r,n,i){return this.linker.buildReference(r,n,i.cstNodes.get(t.$refNode),t.$refText)}hydrateCstNode(t,r,n=0){const i=r.cstNodes.get(t);if(typeof t.grammarSource=="number"&&(i.grammarSource=this.getGrammarElement(t.grammarSource)),i.astNode=r.astNodes.get(t.astNode),Lg(i))for(const a of t.content){const s=this.hydrateCstNode(a,r,n++);i.content.push(s)}return i}hydrateCstLeafNode(t){const r=this.getTokenType(t.tokenType),n=t.offset,i=t.length,a=t.startLine,s=t.startColumn,o=t.endLine,l=t.endColumn,u=t.hidden;return new cE(n,i,{start:{line:a,character:s},end:{line:o,character:l}},r,u)}getTokenType(t){return this.lexer.definition[t]}getGrammarElementId(t){if(t)return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(t)}getGrammarElement(t){return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.getKey(t)}createGrammarElementIdMap(){let t=0;for(const r of vu(this.grammar))_dt(r)&&this.grammarElementIdMap.set(r,t++)}}function _c(e){return{documentation:{CommentProvider:t=>new Cvt(t),DocumentationProvider:t=>new kvt(t)},parser:{AsyncParser:t=>new Svt(t),GrammarConfig:t=>ygt(t),LangiumParser:t=>C1t(t),CompletionParser:t=>k1t(t),ValueConverter:()=>new Q9,TokenBuilder:()=>new Z9,Lexer:t=>new lvt(t),ParserErrorMessageProvider:()=>new H9,LexerErrorMessageProvider:()=>new svt},workspace:{AstNodeLocator:()=>new tvt,AstNodeDescriptionProvider:t=>new Q1t(t),ReferenceDescriptionProvider:t=>new J1t(t)},references:{Linker:t=>new O1t(t),NameProvider:()=>new B1t,ScopeProvider:t=>new W1t(t),ScopeComputation:t=>new $1t(t),References:t=>new F1t(t)},serializer:{Hydrator:t=>new Avt(t),JsonSerializer:t=>new H1t(t)},validation:{DocumentValidator:t=>new j1t(t),ValidationRegistry:t=>new X1t(t)},shared:()=>e.shared}}function Ac(e){return{ServiceRegistry:t=>new q1t(t),workspace:{LangiumDocuments:t=>new M1t(t),LangiumDocumentFactory:t=>new D1t(t),DocumentBuilder:t=>new nvt(t),IndexManager:t=>new ivt(t),WorkspaceManager:t=>new avt(t),FileSystemProvider:t=>e.fileSystemProvider(t),WorkspaceLock:()=>new _vt,ConfigurationProvider:t=>new rvt(t)}}}var wL;(function(e){e.merge=(t,r)=>dm(dm({},t),r)})(wL||(wL={}));function Di(e,t,r,n,i,a,s,o,l){const u=[e,t,r,n,i,a,s,o,l].reduce(dm,{});return h$(u)}const Lvt=Symbol("isProxy");function h$(e,t){const r=new Proxy({},{deleteProperty:()=>!1,set:()=>{throw new Error("Cannot set property on injected service container")},get:(n,i)=>i===Lvt?!0:kL(n,i,e,t||r),getOwnPropertyDescriptor:(n,i)=>(kL(n,i,e,t||r),Object.getOwnPropertyDescriptor(n,i)),has:(n,i)=>i in e,ownKeys:()=>[...Object.getOwnPropertyNames(e)]});return r}const EL=Symbol();function kL(e,t,r,n){if(t in e){if(e[t]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:e[t]});if(e[t]===EL)throw new Error('Cycle detected. Please make "'+String(t)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies');return e[t]}else if(t in r){const i=r[t];e[t]=EL;try{e[t]=typeof i=="function"?i(n):h$(i,n)}catch(a){throw e[t]=a instanceof Error?a:void 0,a}return e[t]}else return}function dm(e,t){if(t){for(const[r,n]of Object.entries(t))if(n!==void 0){const i=e[r];i!==null&&n!==null&&typeof i=="object"&&typeof n=="object"?e[r]=dm(i,n):e[r]=n}}return e}class Rvt{readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}}const Lc={fileSystemProvider:()=>new Rvt},Ivt={Grammar:()=>{},LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})},Nvt={AstReflection:()=>new VF};function Dvt(){const e=Di(Ac(Lc),Nvt),t=Di(_c({shared:e}),Ivt);return e.ServiceRegistry.register(t),t}function uf(e){var t;const r=Dvt(),n=r.serializer.JsonSerializer.deserialize(e);return r.shared.workspace.LangiumDocumentFactory.fromModel(n,oc.parse(`memory://${(t=n.name)!==null&&t!==void 0?t:"grammar"}.langium`)),n}var Mvt=Object.defineProperty,ue=(e,t)=>Mvt(e,"name",{value:t,configurable:!0}),CL="Statement",v1="Architecture";function Ovt(e){return Wa.isInstance(e,v1)}ue(Ovt,"isArchitecture");var T0="Axis",Nd="Branch";function Pvt(e){return Wa.isInstance(e,Nd)}ue(Pvt,"isBranch");var w0="Checkout",E0="CherryPicking",Dd="Commit";function Bvt(e){return Wa.isInstance(e,Dd)}ue(Bvt,"isCommit");var m1="Common";function Fvt(e){return Wa.isInstance(e,m1)}ue(Fvt,"isCommon");var Ax="Curve",Lx="Edge",Rx="Entry",Md="GitGraph";function $vt(e){return Wa.isInstance(e,Md)}ue($vt,"isGitGraph");var Ix="Group",y1="Info";function zvt(e){return Wa.isInstance(e,y1)}ue(zvt,"isInfo");var Nx="Junction",Od="Merge";function Vvt(e){return Wa.isInstance(e,Od)}ue(Vvt,"isMerge");var Dx="Option",x1="Packet";function Gvt(e){return Wa.isInstance(e,x1)}ue(Gvt,"isPacket");var b1="PacketBlock";function Uvt(e){return Wa.isInstance(e,b1)}ue(Uvt,"isPacketBlock");var T1="Pie";function Wvt(e){return Wa.isInstance(e,T1)}ue(Wvt,"isPie");var w1="PieSection";function Yvt(e){return Wa.isInstance(e,w1)}ue(Yvt,"isPieSection");var Mx="Radar",Ox="Service",k0="Direction",Bu,f$=(Bu=class extends NF{getAllTypes(){return[v1,T0,Nd,w0,E0,Dd,m1,Ax,k0,Lx,Rx,Md,Ix,y1,Nx,Od,Dx,x1,b1,T1,w1,Mx,Ox,CL]}computeIsSubtype(t,r){switch(t){case Nd:case w0:case E0:case Dd:case Od:return this.isSubtype(CL,r);case k0:return this.isSubtype(Md,r);default:return!1}}getReferenceType(t){const r=`${t.container.$type}:${t.property}`;switch(r){case"Entry:axis":return T0;default:throw new Error(`${r} is not a valid reference id.`)}}getTypeMetaData(t){switch(t){case v1:return{name:v1,properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case T0:return{name:T0,properties:[{name:"label"},{name:"name"}]};case Nd:return{name:Nd,properties:[{name:"name"},{name:"order"}]};case w0:return{name:w0,properties:[{name:"branch"}]};case E0:return{name:E0,properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case Dd:return{name:Dd,properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case m1:return{name:m1,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case Ax:return{name:Ax,properties:[{name:"entries",defaultValue:[]},{name:"label"},{name:"name"}]};case Lx:return{name:Lx,properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case Rx:return{name:Rx,properties:[{name:"axis"},{name:"value"}]};case Md:return{name:Md,properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case Ix:return{name:Ix,properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case y1:return{name:y1,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case Nx:return{name:Nx,properties:[{name:"id"},{name:"in"}]};case Od:return{name:Od,properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case Dx:return{name:Dx,properties:[{name:"name"},{name:"value",defaultValue:!1}]};case x1:return{name:x1,properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case b1:return{name:b1,properties:[{name:"end"},{name:"label"},{name:"start"}]};case T1:return{name:T1,properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case w1:return{name:w1,properties:[{name:"label"},{name:"value"}]};case Mx:return{name:Mx,properties:[{name:"accDescr"},{name:"accTitle"},{name:"axes",defaultValue:[]},{name:"curves",defaultValue:[]},{name:"options",defaultValue:[]},{name:"title"}]};case Ox:return{name:Ox,properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case k0:return{name:k0,properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};default:return{name:t,properties:[]}}}},ue(Bu,"MermaidAstReflection"),Bu),Wa=new f$,SL,Hvt=ue(()=>SL??(SL=uf('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Info","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"InfoGrammar"),_L,qvt=ue(()=>_L??(_L=uf(`{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Packet","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"packet-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}`)),"PacketGrammar"),AL,Xvt=ue(()=>AL??(AL=uf('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Pie","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"PIE_SECTION_LABEL","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]+\\"/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"PIE_SECTION_VALUE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"PieGrammar"),LL,jvt=ue(()=>LL??(LL=uf('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Architecture","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ID","definition":{"$type":"RegexToken","regex":"/[\\\\w]+/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TEXT_ICON","definition":{"$type":"RegexToken","regex":"/\\\\(\\"[^\\"]+\\"\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"ArchitectureGrammar"),RL,Kvt=ue(()=>RL??(RL=uf(`{"$type":"Grammar","isDeclared":true,"name":"GitGraph","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+(?=\\\\s)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}`)),"GitGraphGrammar"),IL,Zvt=ue(()=>IL??(IL=uf(`{"$type":"Grammar","isDeclared":true,"name":"Radar","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"$type":"Interface","name":"Entry","attributes":[{"$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"$type":"ReferenceType","referenceType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@12"}}}},{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","entry":true,"name":"Radar","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":"radar-beta:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Keyword","value":"axis"},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"curve"},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Label","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Keyword","value":"]"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Axis","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Curve","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Keyword","value":"{"},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"Keyword","value":"}"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Entries","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"DetailedEntry","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"axis","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@12"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Keyword","value":":","cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"NumberEntry","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Option","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"showLegend"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"ticks"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"max"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"min"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"graticule"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"GRATICULE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"circle"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"polygon"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9\\\\-_]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}`)),"RadarGrammar"),Qvt={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Jvt={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},tmt={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},emt={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},rmt={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},nmt={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},hf={AstReflection:ue(()=>new f$,"AstReflection")},imt={Grammar:ue(()=>Hvt(),"Grammar"),LanguageMetaData:ue(()=>Qvt,"LanguageMetaData"),parser:{}},amt={Grammar:ue(()=>qvt(),"Grammar"),LanguageMetaData:ue(()=>Jvt,"LanguageMetaData"),parser:{}},smt={Grammar:ue(()=>Xvt(),"Grammar"),LanguageMetaData:ue(()=>tmt,"LanguageMetaData"),parser:{}},omt={Grammar:ue(()=>jvt(),"Grammar"),LanguageMetaData:ue(()=>emt,"LanguageMetaData"),parser:{}},lmt={Grammar:ue(()=>Kvt(),"Grammar"),LanguageMetaData:ue(()=>rmt,"LanguageMetaData"),parser:{}},cmt={Grammar:ue(()=>Zvt(),"Grammar"),LanguageMetaData:ue(()=>nmt,"LanguageMetaData"),parser:{}},umt=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,hmt=/accTitle[\t ]*:([^\n\r]*)/,fmt=/title([\t ][^\n\r]*|)/,dmt={ACC_DESCR:umt,ACC_TITLE:hmt,TITLE:fmt},Fu,IS=(Fu=class extends Q9{runConverter(t,r,n){let i=this.runCommonConverter(t,r,n);return i===void 0&&(i=this.runCustomConverter(t,r,n)),i===void 0?super.runConverter(t,r,n):i}runCommonConverter(t,r,n){const i=dmt[t.name];if(i===void 0)return;const a=i.exec(r);if(a!==null){if(a[1]!==void 0)return a[1].trim().replace(/[\t ]{2,}/gm," ");if(a[2]!==void 0)return a[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},ue(Fu,"AbstractMermaidValueConverter"),Fu),$u,Yy=($u=class extends IS{runCustomConverter(t,r,n){}},ue($u,"CommonValueConverter"),$u),zu,Rc=(zu=class extends Z9{constructor(t){super(),this.keywords=new Set(t)}buildKeywordTokens(t,r,n){const i=super.buildKeywordTokens(t,r,n);return i.forEach(a=>{this.keywords.has(a.name)&&a.PATTERN!==void 0&&(a.PATTERN=new RegExp(a.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),i}},ue(zu,"AbstractMermaidTokenBuilder"),zu),Vu;Vu=class extends Rc{},ue(Vu,"CommonTokenBuilder");var Gu,gmt=(Gu=class extends Rc{constructor(){super(["gitGraph"])}},ue(Gu,"GitGraphTokenBuilder"),Gu),d$={parser:{TokenBuilder:ue(()=>new gmt,"TokenBuilder"),ValueConverter:ue(()=>new Yy,"ValueConverter")}};function g$(e=Lc){const t=Di(Ac(e),hf),r=Di(_c({shared:t}),lmt,d$);return t.ServiceRegistry.register(r),{shared:t,GitGraph:r}}ue(g$,"createGitGraphServices");var Uu,pmt=(Uu=class extends Rc{constructor(){super(["info","showInfo"])}},ue(Uu,"InfoTokenBuilder"),Uu),p$={parser:{TokenBuilder:ue(()=>new pmt,"TokenBuilder"),ValueConverter:ue(()=>new Yy,"ValueConverter")}};function v$(e=Lc){const t=Di(Ac(e),hf),r=Di(_c({shared:t}),imt,p$);return t.ServiceRegistry.register(r),{shared:t,Info:r}}ue(v$,"createInfoServices");var Wu,vmt=(Wu=class extends Rc{constructor(){super(["packet-beta"])}},ue(Wu,"PacketTokenBuilder"),Wu),m$={parser:{TokenBuilder:ue(()=>new vmt,"TokenBuilder"),ValueConverter:ue(()=>new Yy,"ValueConverter")}};function y$(e=Lc){const t=Di(Ac(e),hf),r=Di(_c({shared:t}),amt,m$);return t.ServiceRegistry.register(r),{shared:t,Packet:r}}ue(y$,"createPacketServices");var Yu,mmt=(Yu=class extends Rc{constructor(){super(["pie","showData"])}},ue(Yu,"PieTokenBuilder"),Yu),Hu,ymt=(Hu=class extends IS{runCustomConverter(t,r,n){if(t.name==="PIE_SECTION_LABEL")return r.replace(/"/g,"").trim()}},ue(Hu,"PieValueConverter"),Hu),x$={parser:{TokenBuilder:ue(()=>new mmt,"TokenBuilder"),ValueConverter:ue(()=>new ymt,"ValueConverter")}};function b$(e=Lc){const t=Di(Ac(e),hf),r=Di(_c({shared:t}),smt,x$);return t.ServiceRegistry.register(r),{shared:t,Pie:r}}ue(b$,"createPieServices");var qu,xmt=(qu=class extends Rc{constructor(){super(["architecture"])}},ue(qu,"ArchitectureTokenBuilder"),qu),Xu,bmt=(Xu=class extends IS{runCustomConverter(t,r,n){if(t.name==="ARCH_ICON")return r.replace(/[()]/g,"").trim();if(t.name==="ARCH_TEXT_ICON")return r.replace(/["()]/g,"");if(t.name==="ARCH_TITLE")return r.replace(/[[\]]/g,"").trim()}},ue(Xu,"ArchitectureValueConverter"),Xu),T$={parser:{TokenBuilder:ue(()=>new xmt,"TokenBuilder"),ValueConverter:ue(()=>new bmt,"ValueConverter")}};function w$(e=Lc){const t=Di(Ac(e),hf),r=Di(_c({shared:t}),omt,T$);return t.ServiceRegistry.register(r),{shared:t,Architecture:r}}ue(w$,"createArchitectureServices");var ju,Tmt=(ju=class extends Rc{constructor(){super(["radar-beta"])}},ue(ju,"RadarTokenBuilder"),ju),E$={parser:{TokenBuilder:ue(()=>new Tmt,"TokenBuilder"),ValueConverter:ue(()=>new Yy,"ValueConverter")}};function k$(e=Lc){const t=Di(Ac(e),hf),r=Di(_c({shared:t}),cmt,E$);return t.ServiceRegistry.register(r),{shared:t,Radar:r}}ue(k$,"createRadarServices");var xo={},wmt={info:ue(async()=>{const{createInfoServices:e}=await je(async()=>{const{createInfoServices:r}=await Promise.resolve().then(()=>hRt);return{createInfoServices:r}},void 0,import.meta.url),t=e().Info.parser.LangiumParser;xo.info=t},"info"),packet:ue(async()=>{const{createPacketServices:e}=await je(async()=>{const{createPacketServices:r}=await Promise.resolve().then(()=>fRt);return{createPacketServices:r}},void 0,import.meta.url),t=e().Packet.parser.LangiumParser;xo.packet=t},"packet"),pie:ue(async()=>{const{createPieServices:e}=await je(async()=>{const{createPieServices:r}=await Promise.resolve().then(()=>dRt);return{createPieServices:r}},void 0,import.meta.url),t=e().Pie.parser.LangiumParser;xo.pie=t},"pie"),architecture:ue(async()=>{const{createArchitectureServices:e}=await je(async()=>{const{createArchitectureServices:r}=await Promise.resolve().then(()=>gRt);return{createArchitectureServices:r}},void 0,import.meta.url),t=e().Architecture.parser.LangiumParser;xo.architecture=t},"architecture"),gitGraph:ue(async()=>{const{createGitGraphServices:e}=await je(async()=>{const{createGitGraphServices:r}=await Promise.resolve().then(()=>pRt);return{createGitGraphServices:r}},void 0,import.meta.url),t=e().GitGraph.parser.LangiumParser;xo.gitGraph=t},"gitGraph"),radar:ue(async()=>{const{createRadarServices:e}=await je(async()=>{const{createRadarServices:r}=await Promise.resolve().then(()=>vRt);return{createRadarServices:r}},void 0,import.meta.url),t=e().Radar.parser.LangiumParser;xo.radar=t},"radar")};async function Ic(e,t){const r=wmt[e];if(!r)throw new Error(`Unknown diagram type: ${e}`);xo[e]||await r();const i=xo[e].parse(t);if(i.lexerErrors.length>0||i.parserErrors.length>0)throw new Emt(i);return i.value}ue(Ic,"parse");var Ku,Emt=(Ku=class extends Error{constructor(t){const r=t.lexerErrors.map(i=>i.message).join(`
`),n=t.parserErrors.map(i=>i.message).join(`
`);super(`Parsing failed: ${r} ${n}`),this.result=t}},ue(Ku,"MermaidParseError"),Ku),fr={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},kmt=Xe.gitGraph,Nc=x(()=>xa({...kmt,...gr().gitGraph}),"getConfig"),ae=new oS(()=>{const e=Nc(),t=e.mainBranchName,r=e.mainBranchOrder;return{mainBranchName:t,commits:new Map,head:null,branchConfig:new Map([[t,{name:t,order:r}]]),branches:new Map([[t,null]]),currBranch:t,direction:"LR",seq:0,options:{}}});function Hy(){return DP({length:7})}x(Hy,"getID");function C$(e,t){const r=Object.create(null);return e.reduce((n,i)=>{const a=t(i);return r[a]||(r[a]=!0,n.push(i)),n},[])}x(C$,"uniqBy");var Cmt=x(function(e){ae.records.direction=e},"setDirection"),Smt=x(function(e){et.debug("options str",e),e=e==null?void 0:e.trim(),e=e||"{}";try{ae.records.options=JSON.parse(e)}catch(t){et.error("error while parsing gitGraph options",t.message)}},"setOptions"),_mt=x(function(){return ae.records.options},"getOptions"),Amt=x(function(e){let t=e.msg,r=e.id;const n=e.type;let i=e.tags;et.info("commit",t,r,n,i),et.debug("Entering commit:",t,r,n,i);const a=Nc();r=Xt.sanitizeText(r,a),t=Xt.sanitizeText(t,a),i=i==null?void 0:i.map(o=>Xt.sanitizeText(o,a));const s={id:r||ae.records.seq+"-"+Hy(),message:t,seq:ae.records.seq++,type:n??fr.NORMAL,tags:i??[],parents:ae.records.head==null?[]:[ae.records.head.id],branch:ae.records.currBranch};ae.records.head=s,et.info("main branch",a.mainBranchName),ae.records.commits.set(s.id,s),ae.records.branches.set(ae.records.currBranch,s.id),et.debug("in pushCommit "+s.id)},"commit"),Lmt=x(function(e){let t=e.name;const r=e.order;if(t=Xt.sanitizeText(t,Nc()),ae.records.branches.has(t))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${t}")`);ae.records.branches.set(t,ae.records.head!=null?ae.records.head.id:null),ae.records.branchConfig.set(t,{name:t,order:r}),S$(t),et.debug("in createBranch")},"branch"),Rmt=x(e=>{let t=e.branch,r=e.id;const n=e.type,i=e.tags,a=Nc();t=Xt.sanitizeText(t,a),r&&(r=Xt.sanitizeText(r,a));const s=ae.records.branches.get(ae.records.currBranch),o=ae.records.branches.get(t),l=s?ae.records.commits.get(s):void 0,u=o?ae.records.commits.get(o):void 0;if(l&&u&&l.branch===t)throw new Error(`Cannot merge branch '${t}' into itself.`);if(ae.records.currBranch===t){const d=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw d.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["branch abc"]},d}if(l===void 0||!l){const d=new Error(`Incorrect usage of "merge". Current branch (${ae.records.currBranch})has no commits`);throw d.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["commit"]},d}if(!ae.records.branches.has(t)){const d=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw d.hash={text:`merge ${t}`,token:`merge ${t}`,expected:[`branch ${t}`]},d}if(u===void 0||!u){const d=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw d.hash={text:`merge ${t}`,token:`merge ${t}`,expected:['"commit"']},d}if(l===u){const d=new Error('Incorrect usage of "merge". Both branches have same head');throw d.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["branch abc"]},d}if(r&&ae.records.commits.has(r)){const d=new Error('Incorrect usage of "merge". Commit with id:'+r+" already exists, use different custom Id");throw d.hash={text:`merge ${t} ${r} ${n} ${i==null?void 0:i.join(" ")}`,token:`merge ${t} ${r} ${n} ${i==null?void 0:i.join(" ")}`,expected:[`merge ${t} ${r}_UNIQUE ${n} ${i==null?void 0:i.join(" ")}`]},d}const h=o||"",f={id:r||`${ae.records.seq}-${Hy()}`,message:`merged branch ${t} into ${ae.records.currBranch}`,seq:ae.records.seq++,parents:ae.records.head==null?[]:[ae.records.head.id,h],branch:ae.records.currBranch,type:fr.MERGE,customType:n,customId:!!r,tags:i??[]};ae.records.head=f,ae.records.commits.set(f.id,f),ae.records.branches.set(ae.records.currBranch,f.id),et.debug(ae.records.branches),et.debug("in mergeBranch")},"merge"),Imt=x(function(e){let t=e.id,r=e.targetId,n=e.tags,i=e.parent;et.debug("Entering cherryPick:",t,r,n);const a=Nc();if(t=Xt.sanitizeText(t,a),r=Xt.sanitizeText(r,a),n=n==null?void 0:n.map(l=>Xt.sanitizeText(l,a)),i=Xt.sanitizeText(i,a),!t||!ae.records.commits.has(t)){const l=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw l.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},l}const s=ae.records.commits.get(t);if(s===void 0||!s)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(i&&!(Array.isArray(s.parents)&&s.parents.includes(i)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");const o=s.branch;if(s.type===fr.MERGE&&!i)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!r||!ae.records.commits.has(r)){if(o===ae.records.currBranch){const f=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw f.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},f}const l=ae.records.branches.get(ae.records.currBranch);if(l===void 0||!l){const f=new Error(`Incorrect usage of "cherry-pick". Current branch (${ae.records.currBranch})has no commits`);throw f.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},f}const u=ae.records.commits.get(l);if(u===void 0||!u){const f=new Error(`Incorrect usage of "cherry-pick". Current branch (${ae.records.currBranch})has no commits`);throw f.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},f}const h={id:ae.records.seq+"-"+Hy(),message:`cherry-picked ${s==null?void 0:s.message} into ${ae.records.currBranch}`,seq:ae.records.seq++,parents:ae.records.head==null?[]:[ae.records.head.id,s.id],branch:ae.records.currBranch,type:fr.CHERRY_PICK,tags:n?n.filter(Boolean):[`cherry-pick:${s.id}${s.type===fr.MERGE?`|parent:${i}`:""}`]};ae.records.head=h,ae.records.commits.set(h.id,h),ae.records.branches.set(ae.records.currBranch,h.id),et.debug(ae.records.branches),et.debug("in cherryPick")}},"cherryPick"),S$=x(function(e){if(e=Xt.sanitizeText(e,Nc()),ae.records.branches.has(e)){ae.records.currBranch=e;const t=ae.records.branches.get(ae.records.currBranch);t===void 0||!t?ae.records.head=null:ae.records.head=ae.records.commits.get(t)??null}else{const t=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${e}")`);throw t.hash={text:`checkout ${e}`,token:`checkout ${e}`,expected:[`branch ${e}`]},t}},"checkout");function vE(e,t,r){const n=e.indexOf(t);n===-1?e.push(r):e.splice(n,1,r)}x(vE,"upsert");function NS(e){const t=e.reduce((i,a)=>i.seq>a.seq?i:a,e[0]);let r="";e.forEach(function(i){i===t?r+="	*":r+="	|"});const n=[r,t.id,t.seq];for(const i in ae.records.branches)ae.records.branches.get(i)===t.id&&n.push(i);if(et.debug(n.join(" ")),t.parents&&t.parents.length==2&&t.parents[0]&&t.parents[1]){const i=ae.records.commits.get(t.parents[0]);vE(e,t,i),t.parents[1]&&e.push(ae.records.commits.get(t.parents[1]))}else{if(t.parents.length==0)return;if(t.parents[0]){const i=ae.records.commits.get(t.parents[0]);vE(e,t,i)}}e=C$(e,i=>i.id),NS(e)}x(NS,"prettyPrintCommitHistory");var Nmt=x(function(){et.debug(ae.records.commits);const e=_$()[0];NS([e])},"prettyPrint"),Dmt=x(function(){ae.reset(),dn()},"clear"),Mmt=x(function(){return[...ae.records.branchConfig.values()].map((t,r)=>t.order!==null&&t.order!==void 0?t:{...t,order:parseFloat(`0.${r}`)}).sort((t,r)=>(t.order??0)-(r.order??0)).map(({name:t})=>({name:t}))},"getBranchesAsObjArray"),Omt=x(function(){return ae.records.branches},"getBranches"),Pmt=x(function(){return ae.records.commits},"getCommits"),_$=x(function(){const e=[...ae.records.commits.values()];return e.forEach(function(t){et.debug(t.id)}),e.sort((t,r)=>t.seq-r.seq),e},"getCommitsArray"),Bmt=x(function(){return ae.records.currBranch},"getCurrentBranch"),Fmt=x(function(){return ae.records.direction},"getDirection"),$mt=x(function(){return ae.records.head},"getHead"),A$={commitType:fr,getConfig:Nc,setDirection:Cmt,setOptions:Smt,getOptions:_mt,commit:Amt,branch:Lmt,merge:Rmt,cherryPick:Imt,checkout:S$,prettyPrint:Nmt,clear:Dmt,getBranchesAsObjArray:Mmt,getBranches:Omt,getCommits:Pmt,getCommitsArray:_$,getCurrentBranch:Bmt,getDirection:Fmt,getHead:$mt,setAccTitle:cn,getAccTitle:wn,getAccDescription:kn,setAccDescription:En,setDiagramTitle:Fn,getDiagramTitle:gn},zmt=x((e,t)=>{af(e,t),e.dir&&t.setDirection(e.dir);for(const r of e.statements)Vmt(r,t)},"populate"),Vmt=x((e,t)=>{const n={Commit:x(i=>t.commit(Gmt(i)),"Commit"),Branch:x(i=>t.branch(Umt(i)),"Branch"),Merge:x(i=>t.merge(Wmt(i)),"Merge"),Checkout:x(i=>t.checkout(Ymt(i)),"Checkout"),CherryPicking:x(i=>t.cherryPick(Hmt(i)),"CherryPicking")}[e.$type];n?n(e):et.error(`Unknown statement type: ${e.$type}`)},"parseStatement"),Gmt=x(e=>({id:e.id,msg:e.message??"",type:e.type!==void 0?fr[e.type]:fr.NORMAL,tags:e.tags??void 0}),"parseCommit"),Umt=x(e=>({name:e.name,order:e.order??0}),"parseBranch"),Wmt=x(e=>({branch:e.branch,id:e.id??"",type:e.type!==void 0?fr[e.type]:void 0,tags:e.tags??void 0}),"parseMerge"),Ymt=x(e=>e.branch,"parseCheckout"),Hmt=x(e=>{var r;return{id:e.id,targetId:"",tags:((r=e.tags)==null?void 0:r.length)===0?void 0:e.tags,parent:e.parent}},"parseCherryPicking"),qmt={parse:x(async e=>{const t=await Ic("gitGraph",e);et.debug(t),zmt(t,A$)},"parse")},Px=pt(),qr=Px==null?void 0:Px.gitGraph,Eo=10,ko=40,Za=4,Ds=2,kl=8,Si=new Map,Li=new Map,gm=30,Pd=new Map,pm=[],bo=0,Ye="LR",Xmt=x(()=>{Si.clear(),Li.clear(),Pd.clear(),bo=0,pm=[],Ye="LR"},"clear"),L$=x(e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","text");return(typeof e=="string"?e.split(/\\n|\n|<br\s*\/?>/gi):e).forEach(n=>{const i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),i.setAttribute("class","row"),i.textContent=n.trim(),t.appendChild(i)}),t},"drawText"),R$=x(e=>{let t,r,n;return Ye==="BT"?(r=x((i,a)=>i<=a,"comparisonFunc"),n=1/0):(r=x((i,a)=>i>=a,"comparisonFunc"),n=0),e.forEach(i=>{var s,o;const a=Ye==="TB"||Ye=="BT"?(s=Li.get(i))==null?void 0:s.y:(o=Li.get(i))==null?void 0:o.x;a!==void 0&&r(a,n)&&(t=i,n=a)}),t},"findClosestParent"),jmt=x(e=>{let t="",r=1/0;return e.forEach(n=>{const i=Li.get(n).y;i<=r&&(t=n,r=i)}),t||void 0},"findClosestParentBT"),Kmt=x((e,t,r)=>{let n=r,i=r;const a=[];e.forEach(s=>{const o=t.get(s);if(!o)throw new Error(`Commit not found for key ${s}`);o.parents.length?(n=Qmt(o),i=Math.max(n,i)):a.push(o),Jmt(o,n)}),n=i,a.forEach(s=>{tyt(s,n,r)}),e.forEach(s=>{const o=t.get(s);if(o!=null&&o.parents.length){const l=jmt(o.parents);n=Li.get(l).y-ko,n<=i&&(i=n);const u=Si.get(o.branch).pos,h=n-Eo;Li.set(o.id,{x:u,y:h})}})},"setParallelBTPos"),Zmt=x(e=>{var n;const t=R$(e.parents.filter(i=>i!==null));if(!t)throw new Error(`Closest parent not found for commit ${e.id}`);const r=(n=Li.get(t))==null?void 0:n.y;if(r===void 0)throw new Error(`Closest parent position not found for commit ${e.id}`);return r},"findClosestParentPos"),Qmt=x(e=>Zmt(e)+ko,"calculateCommitPosition"),Jmt=x((e,t)=>{const r=Si.get(e.branch);if(!r)throw new Error(`Branch not found for commit ${e.id}`);const n=r.pos,i=t+Eo;return Li.set(e.id,{x:n,y:i}),{x:n,y:i}},"setCommitPosition"),tyt=x((e,t,r)=>{const n=Si.get(e.branch);if(!n)throw new Error(`Branch not found for commit ${e.id}`);const i=t+r,a=n.pos;Li.set(e.id,{x:a,y:i})},"setRootPosition"),eyt=x((e,t,r,n,i,a)=>{if(a===fr.HIGHLIGHT)e.append("rect").attr("x",r.x-10).attr("y",r.y-10).attr("width",20).attr("height",20).attr("class",`commit ${t.id} commit-highlight${i%kl} ${n}-outer`),e.append("rect").attr("x",r.x-6).attr("y",r.y-6).attr("width",12).attr("height",12).attr("class",`commit ${t.id} commit${i%kl} ${n}-inner`);else if(a===fr.CHERRY_PICK)e.append("circle").attr("cx",r.x).attr("cy",r.y).attr("r",10).attr("class",`commit ${t.id} ${n}`),e.append("circle").attr("cx",r.x-3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${t.id} ${n}`),e.append("circle").attr("cx",r.x+3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${t.id} ${n}`),e.append("line").attr("x1",r.x+3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${t.id} ${n}`),e.append("line").attr("x1",r.x-3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${t.id} ${n}`);else{const s=e.append("circle");if(s.attr("cx",r.x),s.attr("cy",r.y),s.attr("r",t.type===fr.MERGE?9:10),s.attr("class",`commit ${t.id} commit${i%kl}`),a===fr.MERGE){const o=e.append("circle");o.attr("cx",r.x),o.attr("cy",r.y),o.attr("r",6),o.attr("class",`commit ${n} ${t.id} commit${i%kl}`)}a===fr.REVERSE&&e.append("path").attr("d",`M ${r.x-5},${r.y-5}L${r.x+5},${r.y+5}M${r.x-5},${r.y+5}L${r.x+5},${r.y-5}`).attr("class",`commit ${n} ${t.id} commit${i%kl}`)}},"drawCommitBullet"),ryt=x((e,t,r,n)=>{var i;if(t.type!==fr.CHERRY_PICK&&(t.customId&&t.type===fr.MERGE||t.type!==fr.MERGE)&&(qr!=null&&qr.showCommitLabel)){const a=e.append("g"),s=a.insert("rect").attr("class","commit-label-bkg"),o=a.append("text").attr("x",n).attr("y",r.y+25).attr("class","commit-label").text(t.id),l=(i=o.node())==null?void 0:i.getBBox();if(l&&(s.attr("x",r.posWithOffset-l.width/2-Ds).attr("y",r.y+13.5).attr("width",l.width+2*Ds).attr("height",l.height+2*Ds),Ye==="TB"||Ye==="BT"?(s.attr("x",r.x-(l.width+4*Za+5)).attr("y",r.y-12),o.attr("x",r.x-(l.width+4*Za)).attr("y",r.y+l.height-12)):o.attr("x",r.posWithOffset-l.width/2),qr.rotateCommitLabel))if(Ye==="TB"||Ye==="BT")o.attr("transform","rotate(-45, "+r.x+", "+r.y+")"),s.attr("transform","rotate(-45, "+r.x+", "+r.y+")");else{const u=-7.5-(l.width+10)/25*9.5,h=10+l.width/25*8.5;a.attr("transform","translate("+u+", "+h+") rotate(-45, "+n+", "+r.y+")")}}},"drawCommitLabel"),nyt=x((e,t,r,n)=>{var i;if(t.tags.length>0){let a=0,s=0,o=0;const l=[];for(const u of t.tags.reverse()){const h=e.insert("polygon"),f=e.append("circle"),d=e.append("text").attr("y",r.y-16-a).attr("class","tag-label").text(u),g=(i=d.node())==null?void 0:i.getBBox();if(!g)throw new Error("Tag bbox not found");s=Math.max(s,g.width),o=Math.max(o,g.height),d.attr("x",r.posWithOffset-g.width/2),l.push({tag:d,hole:f,rect:h,yOffset:a}),a+=20}for(const{tag:u,hole:h,rect:f,yOffset:d}of l){const g=o/2,p=r.y-19.2-d;if(f.attr("class","tag-label-bkg").attr("points",`
      ${n-s/2-Za/2},${p+Ds}  
      ${n-s/2-Za/2},${p-Ds}
      ${r.posWithOffset-s/2-Za},${p-g-Ds}
      ${r.posWithOffset+s/2+Za},${p-g-Ds}
      ${r.posWithOffset+s/2+Za},${p+g+Ds}
      ${r.posWithOffset-s/2-Za},${p+g+Ds}`),h.attr("cy",p).attr("cx",n-s/2+Za/2).attr("r",1.5).attr("class","tag-hole"),Ye==="TB"||Ye==="BT"){const v=n+d;f.attr("class","tag-label-bkg").attr("points",`
        ${r.x},${v+2}
        ${r.x},${v-2}
        ${r.x+Eo},${v-g-2}
        ${r.x+Eo+s+4},${v-g-2}
        ${r.x+Eo+s+4},${v+g+2}
        ${r.x+Eo},${v+g+2}`).attr("transform","translate(12,12) rotate(45, "+r.x+","+n+")"),h.attr("cx",r.x+Za/2).attr("cy",v).attr("transform","translate(12,12) rotate(45, "+r.x+","+n+")"),u.attr("x",r.x+5).attr("y",v+3).attr("transform","translate(14,14) rotate(45, "+r.x+","+n+")")}}}},"drawCommitTags"),iyt=x(e=>{switch(e.customType??e.type){case fr.NORMAL:return"commit-normal";case fr.REVERSE:return"commit-reverse";case fr.HIGHLIGHT:return"commit-highlight";case fr.MERGE:return"commit-merge";case fr.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}},"getCommitClassType"),ayt=x((e,t,r,n)=>{const i={x:0,y:0};if(e.parents.length>0){const a=R$(e.parents);if(a){const s=n.get(a)??i;return t==="TB"?s.y+ko:t==="BT"?(n.get(e.id)??i).y-ko:s.x+ko}}else return t==="TB"?gm:t==="BT"?(n.get(e.id)??i).y-ko:0;return 0},"calculatePosition"),syt=x((e,t,r)=>{var s,o;const n=Ye==="BT"&&r?t:t+Eo,i=Ye==="TB"||Ye==="BT"?n:(s=Si.get(e.branch))==null?void 0:s.pos,a=Ye==="TB"||Ye==="BT"?(o=Si.get(e.branch))==null?void 0:o.pos:n;if(a===void 0||i===void 0)throw new Error(`Position were undefined for commit ${e.id}`);return{x:a,y:i,posWithOffset:n}},"getCommitPosition"),NL=x((e,t,r)=>{if(!qr)throw new Error("GitGraph config not found");const n=e.append("g").attr("class","commit-bullets"),i=e.append("g").attr("class","commit-labels");let a=Ye==="TB"||Ye==="BT"?gm:0;const s=[...t.keys()],o=(qr==null?void 0:qr.parallelCommits)??!1,l=x((h,f)=>{var p,v;const d=(p=t.get(h))==null?void 0:p.seq,g=(v=t.get(f))==null?void 0:v.seq;return d!==void 0&&g!==void 0?d-g:0},"sortKeys");let u=s.sort(l);Ye==="BT"&&(o&&Kmt(u,t,a),u=u.reverse()),u.forEach(h=>{var g;const f=t.get(h);if(!f)throw new Error(`Commit not found for key ${h}`);o&&(a=ayt(f,Ye,a,Li));const d=syt(f,a,o);if(r){const p=iyt(f),v=f.customType??f.type,m=((g=Si.get(f.branch))==null?void 0:g.index)??0;eyt(n,f,d,p,m,v),ryt(i,f,d,a),nyt(i,f,d,a)}Ye==="TB"||Ye==="BT"?Li.set(f.id,{x:d.x,y:d.posWithOffset}):Li.set(f.id,{x:d.posWithOffset,y:d.y}),a=Ye==="BT"&&o?a+ko:a+ko+Eo,a>bo&&(bo=a)})},"drawCommits"),oyt=x((e,t,r,n,i)=>{const s=(Ye==="TB"||Ye==="BT"?r.x<n.x:r.y<n.y)?t.branch:e.branch,o=x(u=>u.branch===s,"isOnBranchToGetCurve"),l=x(u=>u.seq>e.seq&&u.seq<t.seq,"isBetweenCommits");return[...i.values()].some(u=>l(u)&&o(u))},"shouldRerouteArrow"),Bd=x((e,t,r=0)=>{const n=e+Math.abs(e-t)/2;if(r>5)return n;if(pm.every(s=>Math.abs(s-n)>=10))return pm.push(n),n;const a=Math.abs(e-t);return Bd(e,t-a/5,r+1)},"findLane"),lyt=x((e,t,r,n)=>{var g,p,v,m,y;const i=Li.get(t.id),a=Li.get(r.id);if(i===void 0||a===void 0)throw new Error(`Commit positions not found for commits ${t.id} and ${r.id}`);const s=oyt(t,r,i,a,n);let o="",l="",u=0,h=0,f=(g=Si.get(r.branch))==null?void 0:g.index;r.type===fr.MERGE&&t.id!==r.parents[0]&&(f=(p=Si.get(t.branch))==null?void 0:p.index);let d;if(s){o="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",u=10,h=10;const b=i.y<a.y?Bd(i.y,a.y):Bd(a.y,i.y),T=i.x<a.x?Bd(i.x,a.x):Bd(a.x,i.x);Ye==="TB"?i.x<a.x?d=`M ${i.x} ${i.y} L ${T-u} ${i.y} ${l} ${T} ${i.y+h} L ${T} ${a.y-u} ${o} ${T+h} ${a.y} L ${a.x} ${a.y}`:(f=(v=Si.get(t.branch))==null?void 0:v.index,d=`M ${i.x} ${i.y} L ${T+u} ${i.y} ${o} ${T} ${i.y+h} L ${T} ${a.y-u} ${l} ${T-h} ${a.y} L ${a.x} ${a.y}`):Ye==="BT"?i.x<a.x?d=`M ${i.x} ${i.y} L ${T-u} ${i.y} ${o} ${T} ${i.y-h} L ${T} ${a.y+u} ${l} ${T+h} ${a.y} L ${a.x} ${a.y}`:(f=(m=Si.get(t.branch))==null?void 0:m.index,d=`M ${i.x} ${i.y} L ${T+u} ${i.y} ${l} ${T} ${i.y-h} L ${T} ${a.y+u} ${o} ${T-h} ${a.y} L ${a.x} ${a.y}`):i.y<a.y?d=`M ${i.x} ${i.y} L ${i.x} ${b-u} ${o} ${i.x+h} ${b} L ${a.x-u} ${b} ${l} ${a.x} ${b+h} L ${a.x} ${a.y}`:(f=(y=Si.get(t.branch))==null?void 0:y.index,d=`M ${i.x} ${i.y} L ${i.x} ${b+u} ${l} ${i.x+h} ${b} L ${a.x-u} ${b} ${o} ${a.x} ${b-h} L ${a.x} ${a.y}`)}else o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",u=20,h=20,Ye==="TB"?(i.x<a.x&&(r.type===fr.MERGE&&t.id!==r.parents[0]?d=`M ${i.x} ${i.y} L ${i.x} ${a.y-u} ${o} ${i.x+h} ${a.y} L ${a.x} ${a.y}`:d=`M ${i.x} ${i.y} L ${a.x-u} ${i.y} ${l} ${a.x} ${i.y+h} L ${a.x} ${a.y}`),i.x>a.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",u=20,h=20,r.type===fr.MERGE&&t.id!==r.parents[0]?d=`M ${i.x} ${i.y} L ${i.x} ${a.y-u} ${l} ${i.x-h} ${a.y} L ${a.x} ${a.y}`:d=`M ${i.x} ${i.y} L ${a.x+u} ${i.y} ${o} ${a.x} ${i.y+h} L ${a.x} ${a.y}`),i.x===a.x&&(d=`M ${i.x} ${i.y} L ${a.x} ${a.y}`)):Ye==="BT"?(i.x<a.x&&(r.type===fr.MERGE&&t.id!==r.parents[0]?d=`M ${i.x} ${i.y} L ${i.x} ${a.y+u} ${l} ${i.x+h} ${a.y} L ${a.x} ${a.y}`:d=`M ${i.x} ${i.y} L ${a.x-u} ${i.y} ${o} ${a.x} ${i.y-h} L ${a.x} ${a.y}`),i.x>a.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",u=20,h=20,r.type===fr.MERGE&&t.id!==r.parents[0]?d=`M ${i.x} ${i.y} L ${i.x} ${a.y+u} ${o} ${i.x-h} ${a.y} L ${a.x} ${a.y}`:d=`M ${i.x} ${i.y} L ${a.x-u} ${i.y} ${o} ${a.x} ${i.y-h} L ${a.x} ${a.y}`),i.x===a.x&&(d=`M ${i.x} ${i.y} L ${a.x} ${a.y}`)):(i.y<a.y&&(r.type===fr.MERGE&&t.id!==r.parents[0]?d=`M ${i.x} ${i.y} L ${a.x-u} ${i.y} ${l} ${a.x} ${i.y+h} L ${a.x} ${a.y}`:d=`M ${i.x} ${i.y} L ${i.x} ${a.y-u} ${o} ${i.x+h} ${a.y} L ${a.x} ${a.y}`),i.y>a.y&&(r.type===fr.MERGE&&t.id!==r.parents[0]?d=`M ${i.x} ${i.y} L ${a.x-u} ${i.y} ${o} ${a.x} ${i.y-h} L ${a.x} ${a.y}`:d=`M ${i.x} ${i.y} L ${i.x} ${a.y+u} ${l} ${i.x+h} ${a.y} L ${a.x} ${a.y}`),i.y===a.y&&(d=`M ${i.x} ${i.y} L ${a.x} ${a.y}`));if(d===void 0)throw new Error("Line definition not found");e.append("path").attr("d",d).attr("class","arrow arrow"+f%kl)},"drawArrow"),cyt=x((e,t)=>{const r=e.append("g").attr("class","commit-arrows");[...t.keys()].forEach(n=>{const i=t.get(n);i.parents&&i.parents.length>0&&i.parents.forEach(a=>{lyt(r,t.get(a),i,t)})})},"drawArrows"),uyt=x((e,t)=>{const r=e.append("g");t.forEach((n,i)=>{var p;const a=i%kl,s=(p=Si.get(n.name))==null?void 0:p.pos;if(s===void 0)throw new Error(`Position not found for branch ${n.name}`);const o=r.append("line");o.attr("x1",0),o.attr("y1",s),o.attr("x2",bo),o.attr("y2",s),o.attr("class","branch branch"+a),Ye==="TB"?(o.attr("y1",gm),o.attr("x1",s),o.attr("y2",bo),o.attr("x2",s)):Ye==="BT"&&(o.attr("y1",bo),o.attr("x1",s),o.attr("y2",gm),o.attr("x2",s)),pm.push(s);const l=n.name,u=L$(l),h=r.insert("rect"),d=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+a);d.node().appendChild(u);const g=u.getBBox();h.attr("class","branchLabelBkg label"+a).attr("rx",4).attr("ry",4).attr("x",-g.width-4-((qr==null?void 0:qr.rotateCommitLabel)===!0?30:0)).attr("y",-g.height/2+8).attr("width",g.width+18).attr("height",g.height+4),d.attr("transform","translate("+(-g.width-14-((qr==null?void 0:qr.rotateCommitLabel)===!0?30:0))+", "+(s-g.height/2-1)+")"),Ye==="TB"?(h.attr("x",s-g.width/2-10).attr("y",0),d.attr("transform","translate("+(s-g.width/2-5)+", 0)")):Ye==="BT"?(h.attr("x",s-g.width/2-10).attr("y",bo),d.attr("transform","translate("+(s-g.width/2-5)+", "+bo+")")):h.attr("transform","translate(-19, "+(s-g.height/2)+")")})},"drawBranches"),hyt=x(function(e,t,r,n,i){return Si.set(e,{pos:t,index:r}),t+=50+(i?40:0)+(Ye==="TB"||Ye==="BT"?n.width/2:0),t},"setBranchPosition"),fyt=x(function(e,t,r,n){if(Xmt(),et.debug("in gitgraph renderer",e+`
`,"id:",t,r),!qr)throw new Error("GitGraph config not found");const i=qr.rotateCommitLabel??!1,a=n.db;Pd=a.getCommits();const s=a.getBranchesAsObjArray();Ye=a.getDirection();const o=qt(`[id="${t}"]`);let l=0;s.forEach((u,h)=>{var m;const f=L$(u.name),d=o.append("g"),g=d.insert("g").attr("class","branchLabel"),p=g.insert("g").attr("class","label branch-label");(m=p.node())==null||m.appendChild(f);const v=f.getBBox();l=hyt(u.name,l,h,v,i),p.remove(),g.remove(),d.remove()}),NL(o,Pd,!1),qr.showBranches&&uyt(o,s),cyt(o,Pd),NL(o,Pd,!0),De.insertTitle(o,"gitTitleText",qr.titleTopMargin??0,a.getDiagramTitle()),tM(void 0,o,qr.diagramPadding,qr.useMaxWidth)},"draw"),dyt={draw:fyt},gyt=x(e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,"getStyles"),pyt=gyt,vyt={parser:qmt,db:A$,renderer:dyt,styles:pyt};const myt=Object.freeze(Object.defineProperty({__proto__:null,diagram:vyt},Symbol.toStringTag,{value:"Module"}));var E1={exports:{}},yyt=E1.exports,DL;function xyt(){return DL||(DL=1,function(e,t){(function(r,n){e.exports=n()})(yyt,function(){var r="day";return function(n,i,a){var s=function(u){return u.add(4-u.isoWeekday(),r)},o=i.prototype;o.isoWeekYear=function(){return s(this).year()},o.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),r);var h,f,d,g,p=s(this),v=(h=this.isoWeekYear(),f=this.$u,d=(f?a.utc:a)().year(h).startOf("year"),g=4-d.isoWeekday(),d.isoWeekday()>4&&(g+=7),d.add(g,r));return p.diff(v,"week")+1},o.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var l=o.startOf;o.startOf=function(u,h){var f=this.$utils(),d=!!f.u(h)||h;return f.p(u)==="isoweek"?d?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(u,h)}}})}(E1)),E1.exports}var byt=xyt();const Tyt=qh(byt);var k1={exports:{}},wyt=k1.exports,ML;function Eyt(){return ML||(ML=1,function(e,t){(function(r,n){e.exports=n()})(wyt,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,a=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},u=function(m){return(m=+m)+(m>68?1900:2e3)},h=function(m){return function(y){this[m]=+y}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var b=y.match(/([+-]|\d\d)/g),T=60*b[1]+(+b[2]||0);return T===0?0:b[0]==="+"?-T:T}(m)}],d=function(m){var y=l[m];return y&&(y.indexOf?y:y.s.concat(y.f))},g=function(m,y){var b,T=l.meridiem;if(T){for(var w=1;w<=24;w+=1)if(m.indexOf(T(w,0,y))>-1){b=w>12;break}}else b=m===(y?"pm":"PM");return b},p={A:[o,function(m){this.afternoon=g(m,!1)}],a:[o,function(m){this.afternoon=g(m,!0)}],Q:[i,function(m){this.month=3*(m-1)+1}],S:[i,function(m){this.milliseconds=100*+m}],SS:[a,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[s,h("seconds")],ss:[s,h("seconds")],m:[s,h("minutes")],mm:[s,h("minutes")],H:[s,h("hours")],h:[s,h("hours")],HH:[s,h("hours")],hh:[s,h("hours")],D:[s,h("day")],DD:[a,h("day")],Do:[o,function(m){var y=l.ordinal,b=m.match(/\d+/);if(this.day=b[0],y)for(var T=1;T<=31;T+=1)y(T).replace(/\[|\]/g,"")===m&&(this.day=T)}],w:[s,h("week")],ww:[a,h("week")],M:[s,h("month")],MM:[a,h("month")],MMM:[o,function(m){var y=d("months"),b=(d("monthsShort")||y.map(function(T){return T.slice(0,3)})).indexOf(m)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[o,function(m){var y=d("months").indexOf(m)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,h("year")],YY:[a,function(m){this.year=u(m)}],YYYY:[/\d{4}/,h("year")],Z:f,ZZ:f};function v(m){var y,b;y=m,b=l&&l.formats;for(var T=(m=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(R,C,D){var P=D&&D.toUpperCase();return C||b[D]||r[D]||b[P].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(_,I,M){return I||M.slice(1)})})).match(n),w=T.length,k=0;k<w;k+=1){var S=T[k],E=p[S],L=E&&E[0],A=E&&E[1];T[k]=A?{regex:L,parser:A}:S.replace(/^\[|\]$/g,"")}return function(R){for(var C={},D=0,P=0;D<w;D+=1){var _=T[D];if(typeof _=="string")P+=_.length;else{var I=_.regex,M=_.parser,O=R.slice(P),N=I.exec(O)[0];M.call(C,N),R=R.replace(N,"")}}return function(B){var z=B.afternoon;if(z!==void 0){var F=B.hours;z?F<12&&(B.hours+=12):F===12&&(B.hours=0),delete B.afternoon}}(C),C}}return function(m,y,b){b.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(u=m.parseTwoDigitYear);var T=y.prototype,w=T.parse;T.parse=function(k){var S=k.date,E=k.utc,L=k.args;this.$u=E;var A=L[1];if(typeof A=="string"){var R=L[2]===!0,C=L[3]===!0,D=R||C,P=L[2];C&&(P=L[2]),l=this.$locale(),!R&&P&&(l=b.Ls[P]),this.$d=function(O,N,B,z){try{if(["x","X"].indexOf(N)>-1)return new Date((N==="X"?1e3:1)*O);var F=v(N)(O),V=F.year,G=F.month,Y=F.day,Q=F.hours,K=F.minutes,it=F.seconds,ut=F.milliseconds,q=F.zone,W=F.week,H=new Date,U=Y||(V||G?1:H.getDate()),X=V||H.getFullYear(),J=0;V&&!G||(J=G>0?G-1:H.getMonth());var j,gt=Q||0,at=K||0,tt=it||0,kt=ut||0;return q?new Date(Date.UTC(X,J,U,gt,at,tt,kt+60*q.offset*1e3)):B?new Date(Date.UTC(X,J,U,gt,at,tt,kt)):(j=new Date(X,J,U,gt,at,tt,kt),W&&(j=z(j).week(W).toDate()),j)}catch{return new Date("")}}(S,A,E,b),this.init(),P&&P!==!0&&(this.$L=this.locale(P).$L),D&&S!=this.format(A)&&(this.$d=new Date("")),l={}}else if(A instanceof Array)for(var _=A.length,I=1;I<=_;I+=1){L[1]=A[I-1];var M=b.apply(this,L);if(M.isValid()){this.$d=M.$d,this.$L=M.$L,this.init();break}I===_&&(this.$d=new Date(""))}else w.call(this,k)}}})}(k1)),k1.exports}var kyt=Eyt();const Cyt=qh(kyt);var C1={exports:{}},Syt=C1.exports,OL;function _yt(){return OL||(OL=1,function(e,t){(function(r,n){e.exports=n()})(Syt,function(){return function(r,n){var i=n.prototype,a=i.format;i.format=function(s){var o=this,l=this.$locale();if(!this.isValid())return a.bind(this)(s);var u=this.$utils(),h=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return u.s(o.week(),f==="w"?1:2,"0");case"W":case"WW":return u.s(o.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return u.s(String(o.$H===0?24:o.$H),f==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return f}});return a.bind(this)(h)}}})}(C1)),C1.exports}var Ayt=_yt();const Lyt=qh(Ayt);var mE=function(){var e=x(function(P,_,I,M){for(I=I||{},M=P.length;M--;I[P[M]]=_);return I},"o"),t=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],r=[1,26],n=[1,27],i=[1,28],a=[1,29],s=[1,30],o=[1,31],l=[1,32],u=[1,33],h=[1,34],f=[1,9],d=[1,10],g=[1,11],p=[1,12],v=[1,13],m=[1,14],y=[1,15],b=[1,16],T=[1,19],w=[1,20],k=[1,21],S=[1,22],E=[1,23],L=[1,25],A=[1,35],R={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:x(function(_,I,M,O,N,B,z){var F=B.length-1;switch(N){case 1:return B[F-1];case 2:this.$=[];break;case 3:B[F-1].push(B[F]),this.$=B[F-1];break;case 4:case 5:this.$=B[F];break;case 6:case 7:this.$=[];break;case 8:O.setWeekday("monday");break;case 9:O.setWeekday("tuesday");break;case 10:O.setWeekday("wednesday");break;case 11:O.setWeekday("thursday");break;case 12:O.setWeekday("friday");break;case 13:O.setWeekday("saturday");break;case 14:O.setWeekday("sunday");break;case 15:O.setWeekend("friday");break;case 16:O.setWeekend("saturday");break;case 17:O.setDateFormat(B[F].substr(11)),this.$=B[F].substr(11);break;case 18:O.enableInclusiveEndDates(),this.$=B[F].substr(18);break;case 19:O.TopAxis(),this.$=B[F].substr(8);break;case 20:O.setAxisFormat(B[F].substr(11)),this.$=B[F].substr(11);break;case 21:O.setTickInterval(B[F].substr(13)),this.$=B[F].substr(13);break;case 22:O.setExcludes(B[F].substr(9)),this.$=B[F].substr(9);break;case 23:O.setIncludes(B[F].substr(9)),this.$=B[F].substr(9);break;case 24:O.setTodayMarker(B[F].substr(12)),this.$=B[F].substr(12);break;case 27:O.setDiagramTitle(B[F].substr(6)),this.$=B[F].substr(6);break;case 28:this.$=B[F].trim(),O.setAccTitle(this.$);break;case 29:case 30:this.$=B[F].trim(),O.setAccDescription(this.$);break;case 31:O.addSection(B[F].substr(8)),this.$=B[F].substr(8);break;case 33:O.addTask(B[F-1],B[F]),this.$="task";break;case 34:this.$=B[F-1],O.setClickEvent(B[F-1],B[F],null);break;case 35:this.$=B[F-2],O.setClickEvent(B[F-2],B[F-1],B[F]);break;case 36:this.$=B[F-2],O.setClickEvent(B[F-2],B[F-1],null),O.setLink(B[F-2],B[F]);break;case 37:this.$=B[F-3],O.setClickEvent(B[F-3],B[F-2],B[F-1]),O.setLink(B[F-3],B[F]);break;case 38:this.$=B[F-2],O.setClickEvent(B[F-2],B[F],null),O.setLink(B[F-2],B[F-1]);break;case 39:this.$=B[F-3],O.setClickEvent(B[F-3],B[F-1],B[F]),O.setLink(B[F-3],B[F-2]);break;case 40:this.$=B[F-1],O.setLink(B[F-1],B[F]);break;case 41:case 47:this.$=B[F-1]+" "+B[F];break;case 42:case 43:case 45:this.$=B[F-2]+" "+B[F-1]+" "+B[F];break;case 44:case 46:this.$=B[F-3]+" "+B[F-2]+" "+B[F-1]+" "+B[F];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:r,13:n,14:i,15:a,16:s,17:o,18:l,19:18,20:u,21:h,22:f,23:d,24:g,25:p,26:v,27:m,28:y,29:b,30:T,31:w,33:k,35:S,36:E,37:24,38:L,40:A},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:36,11:17,12:r,13:n,14:i,15:a,16:s,17:o,18:l,19:18,20:u,21:h,22:f,23:d,24:g,25:p,26:v,27:m,28:y,29:b,30:T,31:w,33:k,35:S,36:E,37:24,38:L,40:A},e(t,[2,5]),e(t,[2,6]),e(t,[2,17]),e(t,[2,18]),e(t,[2,19]),e(t,[2,20]),e(t,[2,21]),e(t,[2,22]),e(t,[2,23]),e(t,[2,24]),e(t,[2,25]),e(t,[2,26]),e(t,[2,27]),{32:[1,37]},{34:[1,38]},e(t,[2,30]),e(t,[2,31]),e(t,[2,32]),{39:[1,39]},e(t,[2,8]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),{41:[1,40],43:[1,41]},e(t,[2,4]),e(t,[2,28]),e(t,[2,29]),e(t,[2,33]),e(t,[2,34],{42:[1,42],43:[1,43]}),e(t,[2,40],{41:[1,44]}),e(t,[2,35],{43:[1,45]}),e(t,[2,36]),e(t,[2,38],{42:[1,46]}),e(t,[2,37]),e(t,[2,39])],defaultActions:{},parseError:x(function(_,I){if(I.recoverable)this.trace(_);else{var M=new Error(_);throw M.hash=I,M}},"parseError"),parse:x(function(_){var I=this,M=[0],O=[],N=[null],B=[],z=this.table,F="",V=0,G=0,Y=2,Q=1,K=B.slice.call(arguments,1),it=Object.create(this.lexer),ut={yy:{}};for(var q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,q)&&(ut.yy[q]=this.yy[q]);it.setInput(_,ut.yy),ut.yy.lexer=it,ut.yy.parser=this,typeof it.yylloc>"u"&&(it.yylloc={});var W=it.yylloc;B.push(W);var H=it.options&&it.options.ranges;typeof ut.yy.parseError=="function"?this.parseError=ut.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function U(Tt){M.length=M.length-2*Tt,N.length=N.length-Tt,B.length=B.length-Tt}x(U,"popStack");function X(){var Tt;return Tt=O.pop()||it.lex()||Q,typeof Tt!="number"&&(Tt instanceof Array&&(O=Tt,Tt=O.pop()),Tt=I.symbols_[Tt]||Tt),Tt}x(X,"lex");for(var J,j,gt,at,tt={},kt,ft,Dt,Ot;;){if(j=M[M.length-1],this.defaultActions[j]?gt=this.defaultActions[j]:((J===null||typeof J>"u")&&(J=X()),gt=z[j]&&z[j][J]),typeof gt>"u"||!gt.length||!gt[0]){var Rt="";Ot=[];for(kt in z[j])this.terminals_[kt]&&kt>Y&&Ot.push("'"+this.terminals_[kt]+"'");it.showPosition?Rt="Parse error on line "+(V+1)+`:
`+it.showPosition()+`
Expecting `+Ot.join(", ")+", got '"+(this.terminals_[J]||J)+"'":Rt="Parse error on line "+(V+1)+": Unexpected "+(J==Q?"end of input":"'"+(this.terminals_[J]||J)+"'"),this.parseError(Rt,{text:it.match,token:this.terminals_[J]||J,line:it.yylineno,loc:W,expected:Ot})}if(gt[0]instanceof Array&&gt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+j+", token: "+J);switch(gt[0]){case 1:M.push(J),N.push(it.yytext),B.push(it.yylloc),M.push(gt[1]),J=null,G=it.yyleng,F=it.yytext,V=it.yylineno,W=it.yylloc;break;case 2:if(ft=this.productions_[gt[1]][1],tt.$=N[N.length-ft],tt._$={first_line:B[B.length-(ft||1)].first_line,last_line:B[B.length-1].last_line,first_column:B[B.length-(ft||1)].first_column,last_column:B[B.length-1].last_column},H&&(tt._$.range=[B[B.length-(ft||1)].range[0],B[B.length-1].range[1]]),at=this.performAction.apply(tt,[F,G,V,ut.yy,gt[1],N,B].concat(K)),typeof at<"u")return at;ft&&(M=M.slice(0,-1*ft*2),N=N.slice(0,-1*ft),B=B.slice(0,-1*ft)),M.push(this.productions_[gt[1]][0]),N.push(tt.$),B.push(tt._$),Dt=z[M[M.length-2]][M[M.length-1]],M.push(Dt);break;case 3:return!0}}return!0},"parse")},C=function(){var P={EOF:1,parseError:x(function(I,M){if(this.yy.parser)this.yy.parser.parseError(I,M);else throw new Error(I)},"parseError"),setInput:x(function(_,I){return this.yy=I||this.yy||{},this._input=_,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var _=this._input[0];this.yytext+=_,this.yyleng++,this.offset++,this.match+=_,this.matched+=_;var I=_.match(/(?:\r\n?|\n).*/g);return I?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),_},"input"),unput:x(function(_){var I=_.length,M=_.split(/(?:\r\n?|\n)/g);this._input=_+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-I),this.offset-=I;var O=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),M.length-1&&(this.yylineno-=M.length-1);var N=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:M?(M.length===O.length?this.yylloc.first_column:0)+O[O.length-M.length].length-M[0].length:this.yylloc.first_column-I},this.options.ranges&&(this.yylloc.range=[N[0],N[0]+this.yyleng-I]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(_){this.unput(this.match.slice(_))},"less"),pastInput:x(function(){var _=this.matched.substr(0,this.matched.length-this.match.length);return(_.length>20?"...":"")+_.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var _=this.match;return _.length<20&&(_+=this._input.substr(0,20-_.length)),(_.substr(0,20)+(_.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var _=this.pastInput(),I=new Array(_.length+1).join("-");return _+this.upcomingInput()+`
`+I+"^"},"showPosition"),test_match:x(function(_,I){var M,O,N;if(this.options.backtrack_lexer&&(N={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(N.yylloc.range=this.yylloc.range.slice(0))),O=_[0].match(/(?:\r\n?|\n).*/g),O&&(this.yylineno+=O.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:O?O[O.length-1].length-O[O.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+_[0].length},this.yytext+=_[0],this.match+=_[0],this.matches=_,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(_[0].length),this.matched+=_[0],M=this.performAction.call(this,this.yy,this,I,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),M)return M;if(this._backtrack){for(var B in N)this[B]=N[B];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var _,I,M,O;this._more||(this.yytext="",this.match="");for(var N=this._currentRules(),B=0;B<N.length;B++)if(M=this._input.match(this.rules[N[B]]),M&&(!I||M[0].length>I[0].length)){if(I=M,O=B,this.options.backtrack_lexer){if(_=this.test_match(M,N[B]),_!==!1)return _;if(this._backtrack){I=!1;continue}else return!1}else if(!this.options.flex)break}return I?(_=this.test_match(I,N[O]),_!==!1?_:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var I=this.next();return I||this.lex()},"lex"),begin:x(function(I){this.conditionStack.push(I)},"begin"),popState:x(function(){var I=this.conditionStack.length-1;return I>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(I){return I=this.conditionStack.length-1-Math.abs(I||0),I>=0?this.conditionStack[I]:"INITIAL"},"topState"),pushState:x(function(I){this.begin(I)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(I,M,O,N){switch(O){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:break;case 9:break;case 10:break;case 11:return 10;case 12:break;case 13:break;case 14:this.begin("href");break;case 15:this.popState();break;case 16:return 43;case 17:this.begin("callbackname");break;case 18:this.popState();break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 21:this.popState();break;case 22:return 42;case 23:this.begin("click");break;case 24:this.popState();break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}},"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}};return P}();R.lexer=C;function D(){this.yy={}}return x(D,"Parser"),D.prototype=R,R.Parser=D,new D}();mE.parser=mE;var Ryt=mE;qn.extend(Tyt);qn.extend(Cyt);qn.extend(Lyt);var PL={friday:5,saturday:6},is="",DS="",MS=void 0,OS="",_p=[],Ap=[],PS=new Map,BS=[],vm=[],Fh="",FS="",I$=["active","done","crit","milestone"],$S=[],Lp=!1,zS=!1,VS="sunday",mm="saturday",yE=0,Iyt=x(function(){BS=[],vm=[],Fh="",$S=[],S1=0,bE=void 0,_1=void 0,Qr=[],is="",DS="",FS="",MS=void 0,OS="",_p=[],Ap=[],Lp=!1,zS=!1,yE=0,PS=new Map,dn(),VS="sunday",mm="saturday"},"clear"),Nyt=x(function(e){DS=e},"setAxisFormat"),Dyt=x(function(){return DS},"getAxisFormat"),Myt=x(function(e){MS=e},"setTickInterval"),Oyt=x(function(){return MS},"getTickInterval"),Pyt=x(function(e){OS=e},"setTodayMarker"),Byt=x(function(){return OS},"getTodayMarker"),Fyt=x(function(e){is=e},"setDateFormat"),$yt=x(function(){Lp=!0},"enableInclusiveEndDates"),zyt=x(function(){return Lp},"endDatesAreInclusive"),Vyt=x(function(){zS=!0},"enableTopAxis"),Gyt=x(function(){return zS},"topAxisEnabled"),Uyt=x(function(e){FS=e},"setDisplayMode"),Wyt=x(function(){return FS},"getDisplayMode"),Yyt=x(function(){return is},"getDateFormat"),Hyt=x(function(e){_p=e.toLowerCase().split(/[\s,]+/)},"setIncludes"),qyt=x(function(){return _p},"getIncludes"),Xyt=x(function(e){Ap=e.toLowerCase().split(/[\s,]+/)},"setExcludes"),jyt=x(function(){return Ap},"getExcludes"),Kyt=x(function(){return PS},"getLinks"),Zyt=x(function(e){Fh=e,BS.push(e)},"addSection"),Qyt=x(function(){return BS},"getSections"),Jyt=x(function(){let e=BL();const t=10;let r=0;for(;!e&&r<t;)e=BL(),r++;return vm=Qr,vm},"getTasks"),N$=x(function(e,t,r,n){return n.includes(e.format(t.trim()))?!1:r.includes("weekends")&&(e.isoWeekday()===PL[mm]||e.isoWeekday()===PL[mm]+1)||r.includes(e.format("dddd").toLowerCase())?!0:r.includes(e.format(t.trim()))},"isInvalidDate"),t2t=x(function(e){VS=e},"setWeekday"),e2t=x(function(){return VS},"getWeekday"),r2t=x(function(e){mm=e},"setWeekend"),D$=x(function(e,t,r,n){if(!r.length||e.manualEndTime)return;let i;e.startTime instanceof Date?i=qn(e.startTime):i=qn(e.startTime,t,!0),i=i.add(1,"d");let a;e.endTime instanceof Date?a=qn(e.endTime):a=qn(e.endTime,t,!0);const[s,o]=n2t(i,a,t,r,n);e.endTime=s.toDate(),e.renderEndTime=o},"checkTaskDates"),n2t=x(function(e,t,r,n,i){let a=!1,s=null;for(;e<=t;)a||(s=t.toDate()),a=N$(e,r,n,i),a&&(t=t.add(1,"d")),e=e.add(1,"d");return[t,s]},"fixTaskDates"),xE=x(function(e,t,r){r=r.trim();const i=/^after\s+(?<ids>[\d\w- ]+)/.exec(r);if(i!==null){let s=null;for(const l of i.groups.ids.split(" ")){let u=Dc(l);u!==void 0&&(!s||u.endTime>s.endTime)&&(s=u)}if(s)return s.endTime;const o=new Date;return o.setHours(0,0,0,0),o}let a=qn(r,t.trim(),!0);if(a.isValid())return a.toDate();{et.debug("Invalid date:"+r),et.debug("With date format:"+t.trim());const s=new Date(r);if(s===void 0||isNaN(s.getTime())||s.getFullYear()<-1e4||s.getFullYear()>1e4)throw new Error("Invalid date:"+r);return s}},"getStartDate"),M$=x(function(e){const t=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(e.trim());return t!==null?[Number.parseFloat(t[1]),t[2]]:[NaN,"ms"]},"parseDuration"),O$=x(function(e,t,r,n=!1){r=r.trim();const a=/^until\s+(?<ids>[\d\w- ]+)/.exec(r);if(a!==null){let h=null;for(const d of a.groups.ids.split(" ")){let g=Dc(d);g!==void 0&&(!h||g.startTime<h.startTime)&&(h=g)}if(h)return h.startTime;const f=new Date;return f.setHours(0,0,0,0),f}let s=qn(r,t.trim(),!0);if(s.isValid())return n&&(s=s.add(1,"d")),s.toDate();let o=qn(e);const[l,u]=M$(r);if(!Number.isNaN(l)){const h=o.add(l,u);h.isValid()&&(o=h)}return o.toDate()},"getEndDate"),S1=0,yu=x(function(e){return e===void 0?(S1=S1+1,"task"+S1):e},"parseId"),i2t=x(function(e,t){let r;t.substr(0,1)===":"?r=t.substr(1,t.length):r=t;const n=r.split(","),i={};GS(n,i,I$);for(let s=0;s<n.length;s++)n[s]=n[s].trim();let a="";switch(n.length){case 1:i.id=yu(),i.startTime=e.endTime,a=n[0];break;case 2:i.id=yu(),i.startTime=xE(void 0,is,n[0]),a=n[1];break;case 3:i.id=yu(n[0]),i.startTime=xE(void 0,is,n[1]),a=n[2];break}return a&&(i.endTime=O$(i.startTime,is,a,Lp),i.manualEndTime=qn(a,"YYYY-MM-DD",!0).isValid(),D$(i,is,Ap,_p)),i},"compileData"),a2t=x(function(e,t){let r;t.substr(0,1)===":"?r=t.substr(1,t.length):r=t;const n=r.split(","),i={};GS(n,i,I$);for(let a=0;a<n.length;a++)n[a]=n[a].trim();switch(n.length){case 1:i.id=yu(),i.startTime={type:"prevTaskEnd",id:e},i.endTime={data:n[0]};break;case 2:i.id=yu(),i.startTime={type:"getStartDate",startData:n[0]},i.endTime={data:n[1]};break;case 3:i.id=yu(n[0]),i.startTime={type:"getStartDate",startData:n[1]},i.endTime={data:n[2]};break}return i},"parseData"),bE,_1,Qr=[],P$={},s2t=x(function(e,t){const r={section:Fh,type:Fh,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:t},task:e,classes:[]},n=a2t(_1,t);r.raw.startTime=n.startTime,r.raw.endTime=n.endTime,r.id=n.id,r.prevTaskId=_1,r.active=n.active,r.done=n.done,r.crit=n.crit,r.milestone=n.milestone,r.order=yE,yE++;const i=Qr.push(r);_1=r.id,P$[r.id]=i-1},"addTask"),Dc=x(function(e){const t=P$[e];return Qr[t]},"findTaskById"),o2t=x(function(e,t){const r={section:Fh,type:Fh,description:e,task:e,classes:[]},n=i2t(bE,t);r.startTime=n.startTime,r.endTime=n.endTime,r.id=n.id,r.active=n.active,r.done=n.done,r.crit=n.crit,r.milestone=n.milestone,bE=r,vm.push(r)},"addTaskOrg"),BL=x(function(){const e=x(function(r){const n=Qr[r];let i="";switch(Qr[r].raw.startTime.type){case"prevTaskEnd":{const a=Dc(n.prevTaskId);n.startTime=a.endTime;break}case"getStartDate":i=xE(void 0,is,Qr[r].raw.startTime.startData),i&&(Qr[r].startTime=i);break}return Qr[r].startTime&&(Qr[r].endTime=O$(Qr[r].startTime,is,Qr[r].raw.endTime.data,Lp),Qr[r].endTime&&(Qr[r].processed=!0,Qr[r].manualEndTime=qn(Qr[r].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),D$(Qr[r],is,Ap,_p))),Qr[r].processed},"compileTask");let t=!0;for(const[r,n]of Qr.entries())e(r),t=t&&n.processed;return t},"compileTasks"),l2t=x(function(e,t){let r=t;pt().securityLevel!=="loose"&&(r=mc.sanitizeUrl(t)),e.split(",").forEach(function(n){Dc(n)!==void 0&&(F$(n,()=>{window.open(r,"_self")}),PS.set(n,r))}),B$(e,"clickable")},"setLink"),B$=x(function(e,t){e.split(",").forEach(function(r){let n=Dc(r);n!==void 0&&n.classes.push(t)})},"setClass"),c2t=x(function(e,t,r){if(pt().securityLevel!=="loose"||t===void 0)return;let n=[];if(typeof r=="string"){n=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let a=0;a<n.length;a++){let s=n[a].trim();s.startsWith('"')&&s.endsWith('"')&&(s=s.substr(1,s.length-2)),n[a]=s}}n.length===0&&n.push(e),Dc(e)!==void 0&&F$(e,()=>{De.runFunc(t,...n)})},"setClickFun"),F$=x(function(e,t){$S.push(function(){const r=document.querySelector(`[id="${e}"]`);r!==null&&r.addEventListener("click",function(){t()})},function(){const r=document.querySelector(`[id="${e}-text"]`);r!==null&&r.addEventListener("click",function(){t()})})},"pushFun"),u2t=x(function(e,t,r){e.split(",").forEach(function(n){c2t(n,t,r)}),B$(e,"clickable")},"setClickEvent"),h2t=x(function(e){$S.forEach(function(t){t(e)})},"bindFunctions"),f2t={getConfig:x(()=>pt().gantt,"getConfig"),clear:Iyt,setDateFormat:Fyt,getDateFormat:Yyt,enableInclusiveEndDates:$yt,endDatesAreInclusive:zyt,enableTopAxis:Vyt,topAxisEnabled:Gyt,setAxisFormat:Nyt,getAxisFormat:Dyt,setTickInterval:Myt,getTickInterval:Oyt,setTodayMarker:Pyt,getTodayMarker:Byt,setAccTitle:cn,getAccTitle:wn,setDiagramTitle:Fn,getDiagramTitle:gn,setDisplayMode:Uyt,getDisplayMode:Wyt,setAccDescription:En,getAccDescription:kn,addSection:Zyt,getSections:Qyt,getTasks:Jyt,addTask:s2t,findTaskById:Dc,addTaskOrg:o2t,setIncludes:Hyt,getIncludes:qyt,setExcludes:Xyt,getExcludes:jyt,setClickEvent:u2t,setLink:l2t,getLinks:Kyt,bindFunctions:h2t,parseDuration:M$,isInvalidDate:N$,setWeekday:t2t,getWeekday:e2t,setWeekend:r2t};function GS(e,t,r){let n=!0;for(;n;)n=!1,r.forEach(function(i){const a="^\\s*"+i+"\\s*$",s=new RegExp(a);e[0].match(s)&&(t[i]=!0,e.shift(1),n=!0)})}x(GS,"getTaskTags");var d2t=x(function(){et.debug("Something is calling, setConf, remove the call")},"setConf"),FL={monday:dg,tuesday:dD,wednesday:gD,thursday:Hl,friday:pD,saturday:vD,sunday:Jg},g2t=x((e,t)=>{let r=[...e].map(()=>-1/0),n=[...e].sort((a,s)=>a.startTime-s.startTime||a.order-s.order),i=0;for(const a of n)for(let s=0;s<r.length;s++)if(a.startTime>=r[s]){r[s]=a.endTime,a.order=s+t,s>i&&(i=s);break}return i},"getMaxIntersections"),Cs,p2t=x(function(e,t,r,n){const i=pt().gantt,a=pt().securityLevel;let s;a==="sandbox"&&(s=qt("#i"+t));const o=qt(a==="sandbox"?s.nodes()[0].contentDocument.body:"body"),l=a==="sandbox"?s.nodes()[0].contentDocument:document,u=l.getElementById(t);Cs=u.parentElement.offsetWidth,Cs===void 0&&(Cs=1200),i.useWidth!==void 0&&(Cs=i.useWidth);const h=n.db.getTasks();let f=[];for(const L of h)f.push(L.type);f=E(f);const d={};let g=2*i.topPadding;if(n.db.getDisplayMode()==="compact"||i.displayMode==="compact"){const L={};for(const R of h)L[R.section]===void 0?L[R.section]=[R]:L[R.section].push(R);let A=0;for(const R of Object.keys(L)){const C=g2t(L[R],A)+1;A+=C,g+=C*(i.barHeight+i.barGap),d[R]=C}}else{g+=h.length*(i.barHeight+i.barGap);for(const L of f)d[L]=h.filter(A=>A.type===L).length}u.setAttribute("viewBox","0 0 "+Cs+" "+g);const p=o.select(`[id="${t}"]`),v=ED().domain([ST(h,function(L){return L.startTime}),CT(h,function(L){return L.endTime})]).rangeRound([0,Cs-i.leftPadding-i.rightPadding]);function m(L,A){const R=L.startTime,C=A.startTime;let D=0;return R>C?D=1:R<C&&(D=-1),D}x(m,"taskCompare"),h.sort(m),y(h,Cs,g),Oi(p,g,Cs,i.useMaxWidth),p.append("text").text(n.db.getDiagramTitle()).attr("x",Cs/2).attr("y",i.titleTopMargin).attr("class","titleText");function y(L,A,R){const C=i.barHeight,D=C+i.barGap,P=i.topPadding,_=i.leftPadding,I=Wl().domain([0,f.length]).range(["#00B9FA","#F95002"]).interpolate(EY);T(D,P,_,A,R,L,n.db.getExcludes(),n.db.getIncludes()),w(_,P,A,R),b(L,D,P,_,C,I,A),k(D,P),S(_,P,A,R)}x(y,"makeGantt");function b(L,A,R,C,D,P,_){const M=[...new Set(L.map(z=>z.order))].map(z=>L.find(F=>F.order===z));p.append("g").selectAll("rect").data(M).enter().append("rect").attr("x",0).attr("y",function(z,F){return F=z.order,F*A+R-2}).attr("width",function(){return _-i.rightPadding/2}).attr("height",A).attr("class",function(z){for(const[F,V]of f.entries())if(z.type===V)return"section section"+F%i.numberSectionStyles;return"section section0"});const O=p.append("g").selectAll("rect").data(L).enter(),N=n.db.getLinks();if(O.append("rect").attr("id",function(z){return z.id}).attr("rx",3).attr("ry",3).attr("x",function(z){return z.milestone?v(z.startTime)+C+.5*(v(z.endTime)-v(z.startTime))-.5*D:v(z.startTime)+C}).attr("y",function(z,F){return F=z.order,F*A+R}).attr("width",function(z){return z.milestone?D:v(z.renderEndTime||z.endTime)-v(z.startTime)}).attr("height",D).attr("transform-origin",function(z,F){return F=z.order,(v(z.startTime)+C+.5*(v(z.endTime)-v(z.startTime))).toString()+"px "+(F*A+R+.5*D).toString()+"px"}).attr("class",function(z){const F="task";let V="";z.classes.length>0&&(V=z.classes.join(" "));let G=0;for(const[Q,K]of f.entries())z.type===K&&(G=Q%i.numberSectionStyles);let Y="";return z.active?z.crit?Y+=" activeCrit":Y=" active":z.done?z.crit?Y=" doneCrit":Y=" done":z.crit&&(Y+=" crit"),Y.length===0&&(Y=" task"),z.milestone&&(Y=" milestone "+Y),Y+=G,Y+=" "+V,F+Y}),O.append("text").attr("id",function(z){return z.id+"-text"}).text(function(z){return z.task}).attr("font-size",i.fontSize).attr("x",function(z){let F=v(z.startTime),V=v(z.renderEndTime||z.endTime);z.milestone&&(F+=.5*(v(z.endTime)-v(z.startTime))-.5*D),z.milestone&&(V=F+D);const G=this.getBBox().width;return G>V-F?V+G+1.5*i.leftPadding>_?F+C-5:V+C+5:(V-F)/2+F+C}).attr("y",function(z,F){return F=z.order,F*A+i.barHeight/2+(i.fontSize/2-2)+R}).attr("text-height",D).attr("class",function(z){const F=v(z.startTime);let V=v(z.endTime);z.milestone&&(V=F+D);const G=this.getBBox().width;let Y="";z.classes.length>0&&(Y=z.classes.join(" "));let Q=0;for(const[it,ut]of f.entries())z.type===ut&&(Q=it%i.numberSectionStyles);let K="";return z.active&&(z.crit?K="activeCritText"+Q:K="activeText"+Q),z.done?z.crit?K=K+" doneCritText"+Q:K=K+" doneText"+Q:z.crit&&(K=K+" critText"+Q),z.milestone&&(K+=" milestoneText"),G>V-F?V+G+1.5*i.leftPadding>_?Y+" taskTextOutsideLeft taskTextOutside"+Q+" "+K:Y+" taskTextOutsideRight taskTextOutside"+Q+" "+K+" width-"+G:Y+" taskText taskText"+Q+" "+K+" width-"+G}),pt().securityLevel==="sandbox"){let z;z=qt("#i"+t);const F=z.nodes()[0].contentDocument;O.filter(function(V){return N.has(V.id)}).each(function(V){var G=F.querySelector("#"+V.id),Y=F.querySelector("#"+V.id+"-text");const Q=G.parentNode;var K=F.createElement("a");K.setAttribute("xlink:href",N.get(V.id)),K.setAttribute("target","_top"),Q.appendChild(K),K.appendChild(G),K.appendChild(Y)})}}x(b,"drawRects");function T(L,A,R,C,D,P,_,I){if(_.length===0&&I.length===0)return;let M,O;for(const{startTime:G,endTime:Y}of P)(M===void 0||G<M)&&(M=G),(O===void 0||Y>O)&&(O=Y);if(!M||!O)return;if(qn(O).diff(qn(M),"year")>5){et.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");return}const N=n.db.getDateFormat(),B=[];let z=null,F=qn(M);for(;F.valueOf()<=O;)n.db.isInvalidDate(F,N,_,I)?z?z.end=F:z={start:F,end:F}:z&&(B.push(z),z=null),F=F.add(1,"d");p.append("g").selectAll("rect").data(B).enter().append("rect").attr("id",function(G){return"exclude-"+G.start.format("YYYY-MM-DD")}).attr("x",function(G){return v(G.start)+R}).attr("y",i.gridLineStartPadding).attr("width",function(G){const Y=G.end.add(1,"day");return v(Y)-v(G.start)}).attr("height",D-A-i.gridLineStartPadding).attr("transform-origin",function(G,Y){return(v(G.start)+R+.5*(v(G.end)-v(G.start))).toString()+"px "+(Y*L+.5*D).toString()+"px"}).attr("class","exclude-range")}x(T,"drawExcludeDays");function w(L,A,R,C){let D=oK(v).tickSize(-C+A+i.gridLineStartPadding).tickFormat(ov(n.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));const _=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(n.db.getTickInterval()||i.tickInterval);if(_!==null){const I=_[1],M=_[2],O=n.db.getWeekday()||i.weekday;switch(M){case"millisecond":D.ticks(yh.every(I));break;case"second":D.ticks($s.every(I));break;case"minute":D.ticks(hg.every(I));break;case"hour":D.ticks(fg.every(I));break;case"day":D.ticks(Yl.every(I));break;case"week":D.ticks(FL[O].every(I));break;case"month":D.ticks(gg.every(I));break}}if(p.append("g").attr("class","grid").attr("transform","translate("+L+", "+(C-50)+")").call(D).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),n.db.topAxisEnabled()||i.topAxis){let I=sK(v).tickSize(-C+A+i.gridLineStartPadding).tickFormat(ov(n.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));if(_!==null){const M=_[1],O=_[2],N=n.db.getWeekday()||i.weekday;switch(O){case"millisecond":I.ticks(yh.every(M));break;case"second":I.ticks($s.every(M));break;case"minute":I.ticks(hg.every(M));break;case"hour":I.ticks(fg.every(M));break;case"day":I.ticks(Yl.every(M));break;case"week":I.ticks(FL[N].every(M));break;case"month":I.ticks(gg.every(M));break}}p.append("g").attr("class","grid").attr("transform","translate("+L+", "+A+")").call(I).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}x(w,"makeGrid");function k(L,A){let R=0;const C=Object.keys(d).map(D=>[D,d[D]]);p.append("g").selectAll("text").data(C).enter().append(function(D){const P=D[0].split(Xt.lineBreakRegex),_=-(P.length-1)/2,I=l.createElementNS("http://www.w3.org/2000/svg","text");I.setAttribute("dy",_+"em");for(const[M,O]of P.entries()){const N=l.createElementNS("http://www.w3.org/2000/svg","tspan");N.setAttribute("alignment-baseline","central"),N.setAttribute("x","10"),M>0&&N.setAttribute("dy","1em"),N.textContent=O,I.appendChild(N)}return I}).attr("x",10).attr("y",function(D,P){if(P>0)for(let _=0;_<P;_++)return R+=C[P-1][1],D[1]*L/2+R*L+A;else return D[1]*L/2+A}).attr("font-size",i.sectionFontSize).attr("class",function(D){for(const[P,_]of f.entries())if(D[0]===_)return"sectionTitle sectionTitle"+P%i.numberSectionStyles;return"sectionTitle"})}x(k,"vertLabels");function S(L,A,R,C){const D=n.db.getTodayMarker();if(D==="off")return;const P=p.append("g").attr("class","today"),_=new Date,I=P.append("line");I.attr("x1",v(_)+L).attr("x2",v(_)+L).attr("y1",i.titleTopMargin).attr("y2",C-i.titleTopMargin).attr("class","today"),D!==""&&I.attr("style",D.replace(/,/g,";"))}x(S,"drawToday");function E(L){const A={},R=[];for(let C=0,D=L.length;C<D;++C)Object.prototype.hasOwnProperty.call(A,L[C])||(A[L[C]]=!0,R.push(L[C]));return R}x(E,"checkUnique")},"draw"),v2t={setConf:d2t,draw:p2t},m2t=x(e=>`
  .mermaid-main-font {
        font-family: ${e.fontFamily};
  }

  .exclude-range {
    fill: ${e.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${e.sectionBkgColor};
  }

  .section2 {
    fill: ${e.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${e.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${e.titleColor};
  }

  .sectionTitle1 {
    fill: ${e.titleColor};
  }

  .sectionTitle2 {
    fill: ${e.titleColor};
  }

  .sectionTitle3 {
    fill: ${e.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    font-family: ${e.fontFamily};
  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${e.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
  }

  .grid .tick text {
    font-family: ${e.fontFamily};
    fill: ${e.textColor};
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${e.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: ${e.fontFamily};
  }

  .taskTextOutsideRight {
    fill: ${e.taskTextDarkColor};
    text-anchor: start;
    font-family: ${e.fontFamily};
  }

  .taskTextOutsideLeft {
    fill: ${e.taskTextDarkColor};
    text-anchor: end;
  }


  /* Special case clickable */

  .task.clickable {
    cursor: pointer;
  }

  .taskText.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }


  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${e.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${e.taskBkgColor};
    stroke: ${e.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${e.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${e.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${e.activeTaskBkgColor};
    stroke: ${e.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${e.doneTaskBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.titleColor||e.textColor};
    font-family: ${e.fontFamily};
  }
`,"getStyles"),y2t=m2t,x2t={parser:Ryt,db:f2t,renderer:v2t,styles:y2t};const b2t=Object.freeze(Object.defineProperty({__proto__:null,diagram:x2t},Symbol.toStringTag,{value:"Module"}));var T2t={parse:x(async e=>{const t=await Ic("info",e);et.debug(t)},"parse")},w2t={version:xw.version},E2t=x(()=>w2t.version,"getVersion"),k2t={getVersion:E2t},C2t=x((e,t,r)=>{et.debug(`rendering info diagram
`+e);const n=ho(t);Oi(n,100,400,!0),n.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${r}`)},"draw"),S2t={draw:C2t},_2t={parser:T2t,db:k2t,renderer:S2t};const A2t=Object.freeze(Object.defineProperty({__proto__:null,diagram:_2t},Symbol.toStringTag,{value:"Module"}));var L2t=Xe.pie,US={sections:new Map,showData:!1},ym=US.sections,WS=US.showData,R2t=structuredClone(L2t),I2t=x(()=>structuredClone(R2t),"getConfig"),N2t=x(()=>{ym=new Map,WS=US.showData,dn()},"clear"),D2t=x(({label:e,value:t})=>{ym.has(e)||(ym.set(e,t),et.debug(`added new section: ${e}, with value: ${t}`))},"addSection"),M2t=x(()=>ym,"getSections"),O2t=x(e=>{WS=e},"setShowData"),P2t=x(()=>WS,"getShowData"),$$={getConfig:I2t,clear:N2t,setDiagramTitle:Fn,getDiagramTitle:gn,setAccTitle:cn,getAccTitle:wn,setAccDescription:En,getAccDescription:kn,addSection:D2t,getSections:M2t,setShowData:O2t,getShowData:P2t},B2t=x((e,t)=>{af(e,t),t.setShowData(e.showData),e.sections.map(t.addSection)},"populateDb"),F2t={parse:x(async e=>{const t=await Ic("pie",e);et.debug(t),B2t(t,$$)},"parse")},$2t=x(e=>`
  .pieCircle{
    stroke: ${e.pieStrokeColor};
    stroke-width : ${e.pieStrokeWidth};
    opacity : ${e.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${e.pieOuterStrokeColor};
    stroke-width: ${e.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${e.pieTitleTextSize};
    fill: ${e.pieTitleTextColor};
    font-family: ${e.fontFamily};
  }
  .slice {
    font-family: ${e.fontFamily};
    fill: ${e.pieSectionTextColor};
    font-size:${e.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${e.pieLegendTextColor};
    font-family: ${e.fontFamily};
    font-size: ${e.pieLegendTextSize};
  }
`,"getStyles"),z2t=$2t,V2t=x(e=>{const t=[...e.entries()].map(n=>({label:n[0],value:n[1]})).sort((n,i)=>i.value-n.value);return gW().value(n=>n.value)(t)},"createPieArcs"),G2t=x((e,t,r,n)=>{et.debug(`rendering pie chart
`+e);const i=n.db,a=pt(),s=xa(i.getConfig(),a.pie),o=40,l=18,u=4,h=450,f=h,d=ho(t),g=d.append("g");g.attr("transform","translate("+f/2+","+h/2+")");const{themeVariables:p}=a;let[v]=tl(p.pieOuterStrokeWidth);v??(v=2);const m=s.textPosition,y=Math.min(f,h)/2-o,b=ph().innerRadius(0).outerRadius(y),T=ph().innerRadius(y*m).outerRadius(y*m);g.append("circle").attr("cx",0).attr("cy",0).attr("r",y+v/2).attr("class","pieOuterCircle");const w=i.getSections(),k=V2t(w),S=[p.pie1,p.pie2,p.pie3,p.pie4,p.pie5,p.pie6,p.pie7,p.pie8,p.pie9,p.pie10,p.pie11,p.pie12],E=Kg(S);g.selectAll("mySlices").data(k).enter().append("path").attr("d",b).attr("fill",D=>E(D.data.label)).attr("class","pieCircle");let L=0;w.forEach(D=>{L+=D}),g.selectAll("mySlices").data(k).enter().append("text").text(D=>(D.data.value/L*100).toFixed(0)+"%").attr("transform",D=>"translate("+T.centroid(D)+")").style("text-anchor","middle").attr("class","slice"),g.append("text").text(i.getDiagramTitle()).attr("x",0).attr("y",-400/2).attr("class","pieTitleText");const A=g.selectAll(".legend").data(E.domain()).enter().append("g").attr("class","legend").attr("transform",(D,P)=>{const _=l+u,I=_*E.domain().length/2,M=12*l,O=P*_-I;return"translate("+M+","+O+")"});A.append("rect").attr("width",l).attr("height",l).style("fill",E).style("stroke",E),A.data(k).append("text").attr("x",l+u).attr("y",l-u).text(D=>{const{label:P,value:_}=D.data;return i.getShowData()?`${P} [${_}]`:P});const R=Math.max(...A.selectAll("text").nodes().map(D=>(D==null?void 0:D.getBoundingClientRect().width)??0)),C=f+o+l+u+R;d.attr("viewBox",`0 0 ${C} ${h}`),Oi(d,h,C,s.useMaxWidth)},"draw"),U2t={draw:G2t},W2t={parser:F2t,db:$$,renderer:U2t,styles:z2t};const Y2t=Object.freeze(Object.defineProperty({__proto__:null,diagram:W2t},Symbol.toStringTag,{value:"Module"}));var TE=function(){var e=x(function(st,$,nt,rt){for(nt=nt||{},rt=st.length;rt--;nt[st[rt]]=$);return nt},"o"),t=[1,3],r=[1,4],n=[1,5],i=[1,6],a=[1,7],s=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],o=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],l=[55,56,57],u=[2,36],h=[1,37],f=[1,36],d=[1,38],g=[1,35],p=[1,43],v=[1,41],m=[1,14],y=[1,23],b=[1,18],T=[1,19],w=[1,20],k=[1,21],S=[1,22],E=[1,24],L=[1,25],A=[1,26],R=[1,27],C=[1,28],D=[1,29],P=[1,32],_=[1,33],I=[1,34],M=[1,39],O=[1,40],N=[1,42],B=[1,44],z=[1,62],F=[1,61],V=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],G=[1,65],Y=[1,66],Q=[1,67],K=[1,68],it=[1,69],ut=[1,70],q=[1,71],W=[1,72],H=[1,73],U=[1,74],X=[1,75],J=[1,76],j=[4,5,6,7,8,9,10,11,12,13,14,15,18],gt=[1,90],at=[1,91],tt=[1,92],kt=[1,99],ft=[1,93],Dt=[1,96],Ot=[1,94],Rt=[1,95],Tt=[1,97],At=[1,98],bt=[1,102],wt=[10,55,56,57],Nt=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],ht={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:x(function($,nt,rt,ct,ot,vt,yt){var mt=vt.length-1;switch(ot){case 23:this.$=vt[mt];break;case 24:this.$=vt[mt-1]+""+vt[mt];break;case 26:this.$=vt[mt-1]+vt[mt];break;case 27:this.$=[vt[mt].trim()];break;case 28:vt[mt-2].push(vt[mt].trim()),this.$=vt[mt-2];break;case 29:this.$=vt[mt-4],ct.addClass(vt[mt-2],vt[mt]);break;case 37:this.$=[];break;case 42:this.$=vt[mt].trim(),ct.setDiagramTitle(this.$);break;case 43:this.$=vt[mt].trim(),ct.setAccTitle(this.$);break;case 44:case 45:this.$=vt[mt].trim(),ct.setAccDescription(this.$);break;case 46:ct.addSection(vt[mt].substr(8)),this.$=vt[mt].substr(8);break;case 47:ct.addPoint(vt[mt-3],"",vt[mt-1],vt[mt],[]);break;case 48:ct.addPoint(vt[mt-4],vt[mt-3],vt[mt-1],vt[mt],[]);break;case 49:ct.addPoint(vt[mt-4],"",vt[mt-2],vt[mt-1],vt[mt]);break;case 50:ct.addPoint(vt[mt-5],vt[mt-4],vt[mt-2],vt[mt-1],vt[mt]);break;case 51:ct.setXAxisLeftText(vt[mt-2]),ct.setXAxisRightText(vt[mt]);break;case 52:vt[mt-1].text+=" ⟶ ",ct.setXAxisLeftText(vt[mt-1]);break;case 53:ct.setXAxisLeftText(vt[mt]);break;case 54:ct.setYAxisBottomText(vt[mt-2]),ct.setYAxisTopText(vt[mt]);break;case 55:vt[mt-1].text+=" ⟶ ",ct.setYAxisBottomText(vt[mt-1]);break;case 56:ct.setYAxisBottomText(vt[mt]);break;case 57:ct.setQuadrant1Text(vt[mt]);break;case 58:ct.setQuadrant2Text(vt[mt]);break;case 59:ct.setQuadrant3Text(vt[mt]);break;case 60:ct.setQuadrant4Text(vt[mt]);break;case 64:this.$={text:vt[mt],type:"text"};break;case 65:this.$={text:vt[mt-1].text+""+vt[mt],type:vt[mt-1].type};break;case 66:this.$={text:vt[mt],type:"text"};break;case 67:this.$={text:vt[mt],type:"markdown"};break;case 68:this.$=vt[mt];break;case 69:this.$=vt[mt-1]+""+vt[mt];break}},"anonymous"),table:[{18:t,26:1,27:2,28:r,55:n,56:i,57:a},{1:[3]},{18:t,26:8,27:2,28:r,55:n,56:i,57:a},{18:t,26:9,27:2,28:r,55:n,56:i,57:a},e(s,[2,33],{29:10}),e(o,[2,61]),e(o,[2,62]),e(o,[2,63]),{1:[2,30]},{1:[2,31]},e(l,u,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:h,5:f,10:d,12:g,13:p,14:v,18:m,25:y,35:b,37:T,39:w,41:k,42:S,48:E,50:L,51:A,52:R,53:C,54:D,60:P,61:_,63:I,64:M,65:O,66:N,67:B}),e(s,[2,34]),{27:45,55:n,56:i,57:a},e(l,[2,37]),e(l,u,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:h,5:f,10:d,12:g,13:p,14:v,18:m,25:y,35:b,37:T,39:w,41:k,42:S,48:E,50:L,51:A,52:R,53:C,54:D,60:P,61:_,63:I,64:M,65:O,66:N,67:B}),e(l,[2,39]),e(l,[2,40]),e(l,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},e(l,[2,45]),e(l,[2,46]),{18:[1,50]},{4:h,5:f,10:d,12:g,13:p,14:v,43:51,58:31,60:P,61:_,63:I,64:M,65:O,66:N,67:B},{4:h,5:f,10:d,12:g,13:p,14:v,43:52,58:31,60:P,61:_,63:I,64:M,65:O,66:N,67:B},{4:h,5:f,10:d,12:g,13:p,14:v,43:53,58:31,60:P,61:_,63:I,64:M,65:O,66:N,67:B},{4:h,5:f,10:d,12:g,13:p,14:v,43:54,58:31,60:P,61:_,63:I,64:M,65:O,66:N,67:B},{4:h,5:f,10:d,12:g,13:p,14:v,43:55,58:31,60:P,61:_,63:I,64:M,65:O,66:N,67:B},{4:h,5:f,10:d,12:g,13:p,14:v,43:56,58:31,60:P,61:_,63:I,64:M,65:O,66:N,67:B},{4:h,5:f,8:z,10:d,12:g,13:p,14:v,18:F,44:[1,57],47:[1,58],58:60,59:59,63:I,64:M,65:O,66:N,67:B},e(V,[2,64]),e(V,[2,66]),e(V,[2,67]),e(V,[2,70]),e(V,[2,71]),e(V,[2,72]),e(V,[2,73]),e(V,[2,74]),e(V,[2,75]),e(V,[2,76]),e(V,[2,77]),e(V,[2,78]),e(V,[2,79]),e(V,[2,80]),e(s,[2,35]),e(l,[2,38]),e(l,[2,42]),e(l,[2,43]),e(l,[2,44]),{3:64,4:G,5:Y,6:Q,7:K,8:it,9:ut,10:q,11:W,12:H,13:U,14:X,15:J,21:63},e(l,[2,53],{59:59,58:60,4:h,5:f,8:z,10:d,12:g,13:p,14:v,18:F,49:[1,77],63:I,64:M,65:O,66:N,67:B}),e(l,[2,56],{59:59,58:60,4:h,5:f,8:z,10:d,12:g,13:p,14:v,18:F,49:[1,78],63:I,64:M,65:O,66:N,67:B}),e(l,[2,57],{59:59,58:60,4:h,5:f,8:z,10:d,12:g,13:p,14:v,18:F,63:I,64:M,65:O,66:N,67:B}),e(l,[2,58],{59:59,58:60,4:h,5:f,8:z,10:d,12:g,13:p,14:v,18:F,63:I,64:M,65:O,66:N,67:B}),e(l,[2,59],{59:59,58:60,4:h,5:f,8:z,10:d,12:g,13:p,14:v,18:F,63:I,64:M,65:O,66:N,67:B}),e(l,[2,60],{59:59,58:60,4:h,5:f,8:z,10:d,12:g,13:p,14:v,18:F,63:I,64:M,65:O,66:N,67:B}),{45:[1,79]},{44:[1,80]},e(V,[2,65]),e(V,[2,81]),e(V,[2,82]),e(V,[2,83]),{3:82,4:G,5:Y,6:Q,7:K,8:it,9:ut,10:q,11:W,12:H,13:U,14:X,15:J,18:[1,81]},e(j,[2,23]),e(j,[2,1]),e(j,[2,2]),e(j,[2,3]),e(j,[2,4]),e(j,[2,5]),e(j,[2,6]),e(j,[2,7]),e(j,[2,8]),e(j,[2,9]),e(j,[2,10]),e(j,[2,11]),e(j,[2,12]),e(l,[2,52],{58:31,43:83,4:h,5:f,10:d,12:g,13:p,14:v,60:P,61:_,63:I,64:M,65:O,66:N,67:B}),e(l,[2,55],{58:31,43:84,4:h,5:f,10:d,12:g,13:p,14:v,60:P,61:_,63:I,64:M,65:O,66:N,67:B}),{46:[1,85]},{45:[1,86]},{4:gt,5:at,6:tt,8:kt,11:ft,13:Dt,16:89,17:Ot,18:Rt,19:Tt,20:At,22:88,23:87},e(j,[2,24]),e(l,[2,51],{59:59,58:60,4:h,5:f,8:z,10:d,12:g,13:p,14:v,18:F,63:I,64:M,65:O,66:N,67:B}),e(l,[2,54],{59:59,58:60,4:h,5:f,8:z,10:d,12:g,13:p,14:v,18:F,63:I,64:M,65:O,66:N,67:B}),e(l,[2,47],{22:88,16:89,23:100,4:gt,5:at,6:tt,8:kt,11:ft,13:Dt,17:Ot,18:Rt,19:Tt,20:At}),{46:[1,101]},e(l,[2,29],{10:bt}),e(wt,[2,27],{16:103,4:gt,5:at,6:tt,8:kt,11:ft,13:Dt,17:Ot,18:Rt,19:Tt,20:At}),e(Nt,[2,25]),e(Nt,[2,13]),e(Nt,[2,14]),e(Nt,[2,15]),e(Nt,[2,16]),e(Nt,[2,17]),e(Nt,[2,18]),e(Nt,[2,19]),e(Nt,[2,20]),e(Nt,[2,21]),e(Nt,[2,22]),e(l,[2,49],{10:bt}),e(l,[2,48],{22:88,16:89,23:104,4:gt,5:at,6:tt,8:kt,11:ft,13:Dt,17:Ot,18:Rt,19:Tt,20:At}),{4:gt,5:at,6:tt,8:kt,11:ft,13:Dt,16:89,17:Ot,18:Rt,19:Tt,20:At,22:105},e(Nt,[2,26]),e(l,[2,50],{10:bt}),e(wt,[2,28],{16:103,4:gt,5:at,6:tt,8:kt,11:ft,13:Dt,17:Ot,18:Rt,19:Tt,20:At})],defaultActions:{8:[2,30],9:[2,31]},parseError:x(function($,nt){if(nt.recoverable)this.trace($);else{var rt=new Error($);throw rt.hash=nt,rt}},"parseError"),parse:x(function($){var nt=this,rt=[0],ct=[],ot=[null],vt=[],yt=this.table,mt="",Mt=0,Yt=0,Bt=2,zt=1,Gt=vt.slice.call(arguments,1),It=Object.create(this.lexer),Vt={yy:{}};for(var Zt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Zt)&&(Vt.yy[Zt]=this.yy[Zt]);It.setInput($,Vt.yy),Vt.yy.lexer=It,Vt.yy.parser=this,typeof It.yylloc>"u"&&(It.yylloc={});var jt=It.yylloc;vt.push(jt);var Pt=It.options&&It.options.ranges;typeof Vt.yy.parseError=="function"?this.parseError=Vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ce(Le){rt.length=rt.length-2*Le,ot.length=ot.length-Le,vt.length=vt.length-Le}x(ce,"popStack");function $t(){var Le;return Le=ct.pop()||It.lex()||zt,typeof Le!="number"&&(Le instanceof Array&&(ct=Le,Le=ct.pop()),Le=nt.symbols_[Le]||Le),Le}x($t,"lex");for(var Ut,te,Qt,Jt,ie={},Ge,pe,He,Fe;;){if(te=rt[rt.length-1],this.defaultActions[te]?Qt=this.defaultActions[te]:((Ut===null||typeof Ut>"u")&&(Ut=$t()),Qt=yt[te]&&yt[te][Ut]),typeof Qt>"u"||!Qt.length||!Qt[0]){var Pe="";Fe=[];for(Ge in yt[te])this.terminals_[Ge]&&Ge>Bt&&Fe.push("'"+this.terminals_[Ge]+"'");It.showPosition?Pe="Parse error on line "+(Mt+1)+`:
`+It.showPosition()+`
Expecting `+Fe.join(", ")+", got '"+(this.terminals_[Ut]||Ut)+"'":Pe="Parse error on line "+(Mt+1)+": Unexpected "+(Ut==zt?"end of input":"'"+(this.terminals_[Ut]||Ut)+"'"),this.parseError(Pe,{text:It.match,token:this.terminals_[Ut]||Ut,line:It.yylineno,loc:jt,expected:Fe})}if(Qt[0]instanceof Array&&Qt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+te+", token: "+Ut);switch(Qt[0]){case 1:rt.push(Ut),ot.push(It.yytext),vt.push(It.yylloc),rt.push(Qt[1]),Ut=null,Yt=It.yyleng,mt=It.yytext,Mt=It.yylineno,jt=It.yylloc;break;case 2:if(pe=this.productions_[Qt[1]][1],ie.$=ot[ot.length-pe],ie._$={first_line:vt[vt.length-(pe||1)].first_line,last_line:vt[vt.length-1].last_line,first_column:vt[vt.length-(pe||1)].first_column,last_column:vt[vt.length-1].last_column},Pt&&(ie._$.range=[vt[vt.length-(pe||1)].range[0],vt[vt.length-1].range[1]]),Jt=this.performAction.apply(ie,[mt,Yt,Mt,Vt.yy,Qt[1],ot,vt].concat(Gt)),typeof Jt<"u")return Jt;pe&&(rt=rt.slice(0,-1*pe*2),ot=ot.slice(0,-1*pe),vt=vt.slice(0,-1*pe)),rt.push(this.productions_[Qt[1]][0]),ot.push(ie.$),vt.push(ie._$),He=yt[rt[rt.length-2]][rt[rt.length-1]],rt.push(He);break;case 3:return!0}}return!0},"parse")},_t=function(){var st={EOF:1,parseError:x(function(nt,rt){if(this.yy.parser)this.yy.parser.parseError(nt,rt);else throw new Error(nt)},"parseError"),setInput:x(function($,nt){return this.yy=nt||this.yy||{},this._input=$,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var $=this._input[0];this.yytext+=$,this.yyleng++,this.offset++,this.match+=$,this.matched+=$;var nt=$.match(/(?:\r\n?|\n).*/g);return nt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),$},"input"),unput:x(function($){var nt=$.length,rt=$.split(/(?:\r\n?|\n)/g);this._input=$+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-nt),this.offset-=nt;var ct=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),rt.length-1&&(this.yylineno-=rt.length-1);var ot=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:rt?(rt.length===ct.length?this.yylloc.first_column:0)+ct[ct.length-rt.length].length-rt[0].length:this.yylloc.first_column-nt},this.options.ranges&&(this.yylloc.range=[ot[0],ot[0]+this.yyleng-nt]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function($){this.unput(this.match.slice($))},"less"),pastInput:x(function(){var $=this.matched.substr(0,this.matched.length-this.match.length);return($.length>20?"...":"")+$.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var $=this.match;return $.length<20&&($+=this._input.substr(0,20-$.length)),($.substr(0,20)+($.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var $=this.pastInput(),nt=new Array($.length+1).join("-");return $+this.upcomingInput()+`
`+nt+"^"},"showPosition"),test_match:x(function($,nt){var rt,ct,ot;if(this.options.backtrack_lexer&&(ot={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ot.yylloc.range=this.yylloc.range.slice(0))),ct=$[0].match(/(?:\r\n?|\n).*/g),ct&&(this.yylineno+=ct.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ct?ct[ct.length-1].length-ct[ct.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+$[0].length},this.yytext+=$[0],this.match+=$[0],this.matches=$,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice($[0].length),this.matched+=$[0],rt=this.performAction.call(this,this.yy,this,nt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),rt)return rt;if(this._backtrack){for(var vt in ot)this[vt]=ot[vt];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var $,nt,rt,ct;this._more||(this.yytext="",this.match="");for(var ot=this._currentRules(),vt=0;vt<ot.length;vt++)if(rt=this._input.match(this.rules[ot[vt]]),rt&&(!nt||rt[0].length>nt[0].length)){if(nt=rt,ct=vt,this.options.backtrack_lexer){if($=this.test_match(rt,ot[vt]),$!==!1)return $;if(this._backtrack){nt=!1;continue}else return!1}else if(!this.options.flex)break}return nt?($=this.test_match(nt,ot[ct]),$!==!1?$:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var nt=this.next();return nt||this.lex()},"lex"),begin:x(function(nt){this.conditionStack.push(nt)},"begin"),popState:x(function(){var nt=this.conditionStack.length-1;return nt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(nt){return nt=this.conditionStack.length-1-Math.abs(nt||0),nt>=0?this.conditionStack[nt]:"INITIAL"},"topState"),pushState:x(function(nt){this.begin(nt)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(nt,rt,ct,ot){switch(ct){case 0:break;case 1:break;case 2:return 55;case 3:break;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 23:this.popState();break;case 24:this.begin("string");break;case 25:this.popState();break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 31:this.popState();break;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:return 65;case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return st}();ht.lexer=_t;function Z(){this.yy={}}return x(Z,"Parser"),Z.prototype=ht,ht.Parser=Z,new Z}();TE.parser=TE;var H2t=TE,ni=ry(),Zu,q2t=(Zu=class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){var t,r,n,i,a,s,o,l,u,h,f,d,g,p,v,m,y,b;return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:((t=Xe.quadrantChart)==null?void 0:t.chartWidth)||500,chartWidth:((r=Xe.quadrantChart)==null?void 0:r.chartHeight)||500,titlePadding:((n=Xe.quadrantChart)==null?void 0:n.titlePadding)||10,titleFontSize:((i=Xe.quadrantChart)==null?void 0:i.titleFontSize)||20,quadrantPadding:((a=Xe.quadrantChart)==null?void 0:a.quadrantPadding)||5,xAxisLabelPadding:((s=Xe.quadrantChart)==null?void 0:s.xAxisLabelPadding)||5,yAxisLabelPadding:((o=Xe.quadrantChart)==null?void 0:o.yAxisLabelPadding)||5,xAxisLabelFontSize:((l=Xe.quadrantChart)==null?void 0:l.xAxisLabelFontSize)||16,yAxisLabelFontSize:((u=Xe.quadrantChart)==null?void 0:u.yAxisLabelFontSize)||16,quadrantLabelFontSize:((h=Xe.quadrantChart)==null?void 0:h.quadrantLabelFontSize)||16,quadrantTextTopPadding:((f=Xe.quadrantChart)==null?void 0:f.quadrantTextTopPadding)||5,pointTextPadding:((d=Xe.quadrantChart)==null?void 0:d.pointTextPadding)||5,pointLabelFontSize:((g=Xe.quadrantChart)==null?void 0:g.pointLabelFontSize)||12,pointRadius:((p=Xe.quadrantChart)==null?void 0:p.pointRadius)||5,xAxisPosition:((v=Xe.quadrantChart)==null?void 0:v.xAxisPosition)||"top",yAxisPosition:((m=Xe.quadrantChart)==null?void 0:m.yAxisPosition)||"left",quadrantInternalBorderStrokeWidth:((y=Xe.quadrantChart)==null?void 0:y.quadrantInternalBorderStrokeWidth)||1,quadrantExternalBorderStrokeWidth:((b=Xe.quadrantChart)==null?void 0:b.quadrantExternalBorderStrokeWidth)||2}}getDefaultThemeConfig(){return{quadrant1Fill:ni.quadrant1Fill,quadrant2Fill:ni.quadrant2Fill,quadrant3Fill:ni.quadrant3Fill,quadrant4Fill:ni.quadrant4Fill,quadrant1TextFill:ni.quadrant1TextFill,quadrant2TextFill:ni.quadrant2TextFill,quadrant3TextFill:ni.quadrant3TextFill,quadrant4TextFill:ni.quadrant4TextFill,quadrantPointFill:ni.quadrantPointFill,quadrantPointTextFill:ni.quadrantPointTextFill,quadrantXAxisTextFill:ni.quadrantXAxisTextFill,quadrantYAxisTextFill:ni.quadrantYAxisTextFill,quadrantTitleFill:ni.quadrantTitleFill,quadrantInternalBorderStrokeFill:ni.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:ni.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,et.info("clear called")}setData(t){this.data={...this.data,...t}}addPoints(t){this.data.points=[...t,...this.data.points]}addClass(t,r){this.classes.set(t,r)}setConfig(t){et.trace("setConfig called with: ",t),this.config={...this.config,...t}}setThemeConfig(t){et.trace("setThemeConfig called with: ",t),this.themeConfig={...this.themeConfig,...t}}calculateSpace(t,r,n,i){const a=this.config.xAxisLabelPadding*2+this.config.xAxisLabelFontSize,s={top:t==="top"&&r?a:0,bottom:t==="bottom"&&r?a:0},o=this.config.yAxisLabelPadding*2+this.config.yAxisLabelFontSize,l={left:this.config.yAxisPosition==="left"&&n?o:0,right:this.config.yAxisPosition==="right"&&n?o:0},u=this.config.titleFontSize+this.config.titlePadding*2,h={top:i?u:0},f=this.config.quadrantPadding+l.left,d=this.config.quadrantPadding+s.top+h.top,g=this.config.chartWidth-this.config.quadrantPadding*2-l.left-l.right,p=this.config.chartHeight-this.config.quadrantPadding*2-s.top-s.bottom-h.top,v=g/2,m=p/2;return{xAxisSpace:s,yAxisSpace:l,titleSpace:h,quadrantSpace:{quadrantLeft:f,quadrantTop:d,quadrantWidth:g,quadrantHalfWidth:v,quadrantHeight:p,quadrantHalfHeight:m}}}getAxisLabels(t,r,n,i){const{quadrantSpace:a,titleSpace:s}=i,{quadrantHalfHeight:o,quadrantHeight:l,quadrantLeft:u,quadrantHalfWidth:h,quadrantTop:f,quadrantWidth:d}=a,g=!!this.data.xAxisRightText,p=!!this.data.yAxisTopText,v=[];return this.data.xAxisLeftText&&r&&v.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:u+(g?h/2:0),y:t==="top"?this.config.xAxisLabelPadding+s.top:this.config.xAxisLabelPadding+f+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&r&&v.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:u+h+(g?h/2:0),y:t==="top"?this.config.xAxisLabelPadding+s.top:this.config.xAxisLabelPadding+f+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&n&&v.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+u+d+this.config.quadrantPadding,y:f+l-(p?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:p?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&n&&v.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+u+d+this.config.quadrantPadding,y:f+o-(p?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:p?"center":"left",horizontalPos:"top",rotation:-90}),v}getQuadrants(t){const{quadrantSpace:r}=t,{quadrantHalfHeight:n,quadrantLeft:i,quadrantHalfWidth:a,quadrantTop:s}=r,o=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+a,y:s,width:a,height:n,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:s,width:a,height:n,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:s+n,width:a,height:n,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+a,y:s+n,width:a,height:n,fill:this.themeConfig.quadrant4Fill}];for(const l of o)l.text.x=l.x+l.width/2,this.data.points.length===0?(l.text.y=l.y+l.height/2,l.text.horizontalPos="middle"):(l.text.y=l.y+this.config.quadrantTextTopPadding,l.text.horizontalPos="top");return o}getQuadrantPoints(t){const{quadrantSpace:r}=t,{quadrantHeight:n,quadrantLeft:i,quadrantTop:a,quadrantWidth:s}=r,o=Wl().domain([0,1]).range([i,s+i]),l=Wl().domain([0,1]).range([n+a,a]);return this.data.points.map(h=>{const f=this.classes.get(h.className);return f&&(h={...f,...h}),{x:o(h.x),y:l(h.y),fill:h.color??this.themeConfig.quadrantPointFill,radius:h.radius??this.config.pointRadius,text:{text:h.text,fill:this.themeConfig.quadrantPointTextFill,x:o(h.x),y:l(h.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:h.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:h.strokeWidth??"0px"}})}getBorders(t){const r=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:n}=t,{quadrantHalfHeight:i,quadrantHeight:a,quadrantLeft:s,quadrantHalfWidth:o,quadrantTop:l,quadrantWidth:u}=n;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s-r,y1:l,x2:s+u+r,y2:l},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s+u,y1:l+r,x2:s+u,y2:l+a-r},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s-r,y1:l+a,x2:s+u+r,y2:l+a},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s,y1:l+r,x2:s,y2:l+a-r},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:s+o,y1:l+r,x2:s+o,y2:l+a-r},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:s+r,y1:l+i,x2:s+u-r,y2:l+i}]}getTitle(t){if(t)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const t=this.config.showXAxis&&!!(this.data.xAxisLeftText||this.data.xAxisRightText),r=this.config.showYAxis&&!!(this.data.yAxisTopText||this.data.yAxisBottomText),n=this.config.showTitle&&!!this.data.titleText,i=this.data.points.length>0?"bottom":this.config.xAxisPosition,a=this.calculateSpace(i,t,r,n);return{points:this.getQuadrantPoints(a),quadrants:this.getQuadrants(a),axisLabels:this.getAxisLabels(i,t,r,a),borderLines:this.getBorders(a),title:this.getTitle(n)}}},x(Zu,"QuadrantBuilder"),Zu),Qu,C0=(Qu=class extends Error{constructor(t,r,n){super(`value for ${t} ${r} is invalid, please use a valid ${n}`),this.name="InvalidStyleError"}},x(Qu,"InvalidStyleError"),Qu);function wE(e){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(e)}x(wE,"validateHexCode");function z$(e){return!/^\d+$/.test(e)}x(z$,"validateNumber");function V$(e){return!/^\d+px$/.test(e)}x(V$,"validateSizeInPixels");var X2t=pt();function ys(e){return xr(e.trim(),X2t)}x(ys,"textSanitizer");var Mn=new q2t;function G$(e){Mn.setData({quadrant1Text:ys(e.text)})}x(G$,"setQuadrant1Text");function U$(e){Mn.setData({quadrant2Text:ys(e.text)})}x(U$,"setQuadrant2Text");function W$(e){Mn.setData({quadrant3Text:ys(e.text)})}x(W$,"setQuadrant3Text");function Y$(e){Mn.setData({quadrant4Text:ys(e.text)})}x(Y$,"setQuadrant4Text");function H$(e){Mn.setData({xAxisLeftText:ys(e.text)})}x(H$,"setXAxisLeftText");function q$(e){Mn.setData({xAxisRightText:ys(e.text)})}x(q$,"setXAxisRightText");function X$(e){Mn.setData({yAxisTopText:ys(e.text)})}x(X$,"setYAxisTopText");function j$(e){Mn.setData({yAxisBottomText:ys(e.text)})}x(j$,"setYAxisBottomText");function qy(e){const t={};for(const r of e){const[n,i]=r.trim().split(/\s*:\s*/);if(n==="radius"){if(z$(i))throw new C0(n,i,"number");t.radius=parseInt(i)}else if(n==="color"){if(wE(i))throw new C0(n,i,"hex code");t.color=i}else if(n==="stroke-color"){if(wE(i))throw new C0(n,i,"hex code");t.strokeColor=i}else if(n==="stroke-width"){if(V$(i))throw new C0(n,i,"number of pixels (eg. 10px)");t.strokeWidth=i}else throw new Error(`style named ${n} is not supported.`)}return t}x(qy,"parseStyles");function K$(e,t,r,n,i){const a=qy(i);Mn.addPoints([{x:r,y:n,text:ys(e.text),className:t,...a}])}x(K$,"addPoint");function Z$(e,t){Mn.addClass(e,qy(t))}x(Z$,"addClass");function Q$(e){Mn.setConfig({chartWidth:e})}x(Q$,"setWidth");function J$(e){Mn.setConfig({chartHeight:e})}x(J$,"setHeight");function tz(){const e=pt(),{themeVariables:t,quadrantChart:r}=e;return r&&Mn.setConfig(r),Mn.setThemeConfig({quadrant1Fill:t.quadrant1Fill,quadrant2Fill:t.quadrant2Fill,quadrant3Fill:t.quadrant3Fill,quadrant4Fill:t.quadrant4Fill,quadrant1TextFill:t.quadrant1TextFill,quadrant2TextFill:t.quadrant2TextFill,quadrant3TextFill:t.quadrant3TextFill,quadrant4TextFill:t.quadrant4TextFill,quadrantPointFill:t.quadrantPointFill,quadrantPointTextFill:t.quadrantPointTextFill,quadrantXAxisTextFill:t.quadrantXAxisTextFill,quadrantYAxisTextFill:t.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:t.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:t.quadrantInternalBorderStrokeFill,quadrantTitleFill:t.quadrantTitleFill}),Mn.setData({titleText:gn()}),Mn.build()}x(tz,"getQuadrantData");var j2t=x(function(){Mn.clear(),dn()},"clear"),K2t={setWidth:Q$,setHeight:J$,setQuadrant1Text:G$,setQuadrant2Text:U$,setQuadrant3Text:W$,setQuadrant4Text:Y$,setXAxisLeftText:H$,setXAxisRightText:q$,setYAxisTopText:X$,setYAxisBottomText:j$,parseStyles:qy,addPoint:K$,addClass:Z$,getQuadrantData:tz,clear:j2t,setAccTitle:cn,getAccTitle:wn,setDiagramTitle:Fn,getDiagramTitle:gn,getAccDescription:kn,setAccDescription:En},Z2t=x((e,t,r,n)=>{var L,A,R;function i(C){return C==="top"?"hanging":"middle"}x(i,"getDominantBaseLine");function a(C){return C==="left"?"start":"middle"}x(a,"getTextAnchor");function s(C){return`translate(${C.x}, ${C.y}) rotate(${C.rotation||0})`}x(s,"getTransformation");const o=pt();et.debug(`Rendering quadrant chart
`+e);const l=o.securityLevel;let u;l==="sandbox"&&(u=qt("#i"+t));const f=qt(l==="sandbox"?u.nodes()[0].contentDocument.body:"body").select(`[id="${t}"]`),d=f.append("g").attr("class","main"),g=((L=o.quadrantChart)==null?void 0:L.chartWidth)??500,p=((A=o.quadrantChart)==null?void 0:A.chartHeight)??500;Oi(f,p,g,((R=o.quadrantChart)==null?void 0:R.useMaxWidth)??!0),f.attr("viewBox","0 0 "+g+" "+p),n.db.setHeight(p),n.db.setWidth(g);const v=n.db.getQuadrantData(),m=d.append("g").attr("class","quadrants"),y=d.append("g").attr("class","border"),b=d.append("g").attr("class","data-points"),T=d.append("g").attr("class","labels"),w=d.append("g").attr("class","title");v.title&&w.append("text").attr("x",0).attr("y",0).attr("fill",v.title.fill).attr("font-size",v.title.fontSize).attr("dominant-baseline",i(v.title.horizontalPos)).attr("text-anchor",a(v.title.verticalPos)).attr("transform",s(v.title)).text(v.title.text),v.borderLines&&y.selectAll("line").data(v.borderLines).enter().append("line").attr("x1",C=>C.x1).attr("y1",C=>C.y1).attr("x2",C=>C.x2).attr("y2",C=>C.y2).style("stroke",C=>C.strokeFill).style("stroke-width",C=>C.strokeWidth);const k=m.selectAll("g.quadrant").data(v.quadrants).enter().append("g").attr("class","quadrant");k.append("rect").attr("x",C=>C.x).attr("y",C=>C.y).attr("width",C=>C.width).attr("height",C=>C.height).attr("fill",C=>C.fill),k.append("text").attr("x",0).attr("y",0).attr("fill",C=>C.text.fill).attr("font-size",C=>C.text.fontSize).attr("dominant-baseline",C=>i(C.text.horizontalPos)).attr("text-anchor",C=>a(C.text.verticalPos)).attr("transform",C=>s(C.text)).text(C=>C.text.text),T.selectAll("g.label").data(v.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(C=>C.text).attr("fill",C=>C.fill).attr("font-size",C=>C.fontSize).attr("dominant-baseline",C=>i(C.horizontalPos)).attr("text-anchor",C=>a(C.verticalPos)).attr("transform",C=>s(C));const E=b.selectAll("g.data-point").data(v.points).enter().append("g").attr("class","data-point");E.append("circle").attr("cx",C=>C.x).attr("cy",C=>C.y).attr("r",C=>C.radius).attr("fill",C=>C.fill).attr("stroke",C=>C.strokeColor).attr("stroke-width",C=>C.strokeWidth),E.append("text").attr("x",0).attr("y",0).text(C=>C.text.text).attr("fill",C=>C.text.fill).attr("font-size",C=>C.text.fontSize).attr("dominant-baseline",C=>i(C.text.horizontalPos)).attr("text-anchor",C=>a(C.text.verticalPos)).attr("transform",C=>s(C.text))},"draw"),Q2t={draw:Z2t},J2t={parser:H2t,db:K2t,renderer:Q2t,styles:x(()=>"","styles")};const txt=Object.freeze(Object.defineProperty({__proto__:null,diagram:J2t},Symbol.toStringTag,{value:"Module"}));var EE=function(){var e=x(function(I,M,O,N){for(O=O||{},N=I.length;N--;O[I[N]]=M);return O},"o"),t=[1,10,12,14,16,18,19,21,23],r=[2,6],n=[1,3],i=[1,5],a=[1,6],s=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],l=[1,25],u=[1,26],h=[1,28],f=[1,29],d=[1,30],g=[1,31],p=[1,32],v=[1,33],m=[1,34],y=[1,35],b=[1,36],T=[1,37],w=[1,43],k=[1,42],S=[1,47],E=[1,50],L=[1,10,12,14,16,18,19,21,23,34,35,36],A=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],R=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],C=[1,64],D={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:x(function(M,O,N,B,z,F,V){var G=F.length-1;switch(z){case 5:B.setOrientation(F[G]);break;case 9:B.setDiagramTitle(F[G].text.trim());break;case 12:B.setLineData({text:"",type:"text"},F[G]);break;case 13:B.setLineData(F[G-1],F[G]);break;case 14:B.setBarData({text:"",type:"text"},F[G]);break;case 15:B.setBarData(F[G-1],F[G]);break;case 16:this.$=F[G].trim(),B.setAccTitle(this.$);break;case 17:case 18:this.$=F[G].trim(),B.setAccDescription(this.$);break;case 19:this.$=F[G-1];break;case 20:this.$=[Number(F[G-2]),...F[G]];break;case 21:this.$=[Number(F[G])];break;case 22:B.setXAxisTitle(F[G]);break;case 23:B.setXAxisTitle(F[G-1]);break;case 24:B.setXAxisTitle({type:"text",text:""});break;case 25:B.setXAxisBand(F[G]);break;case 26:B.setXAxisRangeData(Number(F[G-2]),Number(F[G]));break;case 27:this.$=F[G-1];break;case 28:this.$=[F[G-2],...F[G]];break;case 29:this.$=[F[G]];break;case 30:B.setYAxisTitle(F[G]);break;case 31:B.setYAxisTitle(F[G-1]);break;case 32:B.setYAxisTitle({type:"text",text:""});break;case 33:B.setYAxisRangeData(Number(F[G-2]),Number(F[G]));break;case 37:this.$={text:F[G],type:"text"};break;case 38:this.$={text:F[G],type:"text"};break;case 39:this.$={text:F[G],type:"markdown"};break;case 40:this.$=F[G];break;case 41:this.$=F[G-1]+""+F[G];break}},"anonymous"),table:[e(t,r,{3:1,4:2,7:4,5:n,34:i,35:a,36:s}),{1:[3]},e(t,r,{4:2,7:4,3:8,5:n,34:i,35:a,36:s}),e(t,r,{4:2,7:4,6:9,3:10,5:n,8:[1,11],34:i,35:a,36:s}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},e(o,[2,34]),e(o,[2,35]),e(o,[2,36]),{1:[2,1]},e(t,r,{4:2,7:4,3:21,5:n,34:i,35:a,36:s}),{1:[2,3]},e(o,[2,5]),e(t,[2,7],{4:22,34:i,35:a,36:s}),{11:23,37:24,38:l,39:u,40:27,41:h,42:f,43:d,44:g,45:p,46:v,47:m,48:y,49:b,50:T},{11:39,13:38,24:w,27:k,29:40,30:41,37:24,38:l,39:u,40:27,41:h,42:f,43:d,44:g,45:p,46:v,47:m,48:y,49:b,50:T},{11:45,15:44,27:S,33:46,37:24,38:l,39:u,40:27,41:h,42:f,43:d,44:g,45:p,46:v,47:m,48:y,49:b,50:T},{11:49,17:48,24:E,37:24,38:l,39:u,40:27,41:h,42:f,43:d,44:g,45:p,46:v,47:m,48:y,49:b,50:T},{11:52,17:51,24:E,37:24,38:l,39:u,40:27,41:h,42:f,43:d,44:g,45:p,46:v,47:m,48:y,49:b,50:T},{20:[1,53]},{22:[1,54]},e(L,[2,18]),{1:[2,2]},e(L,[2,8]),e(L,[2,9]),e(A,[2,37],{40:55,41:h,42:f,43:d,44:g,45:p,46:v,47:m,48:y,49:b,50:T}),e(A,[2,38]),e(A,[2,39]),e(R,[2,40]),e(R,[2,42]),e(R,[2,43]),e(R,[2,44]),e(R,[2,45]),e(R,[2,46]),e(R,[2,47]),e(R,[2,48]),e(R,[2,49]),e(R,[2,50]),e(R,[2,51]),e(L,[2,10]),e(L,[2,22],{30:41,29:56,24:w,27:k}),e(L,[2,24]),e(L,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:l,39:u,40:27,41:h,42:f,43:d,44:g,45:p,46:v,47:m,48:y,49:b,50:T},e(L,[2,11]),e(L,[2,30],{33:60,27:S}),e(L,[2,32]),{31:[1,61]},e(L,[2,12]),{17:62,24:E},{25:63,27:C},e(L,[2,14]),{17:65,24:E},e(L,[2,16]),e(L,[2,17]),e(R,[2,41]),e(L,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},e(L,[2,31]),{27:[1,69]},e(L,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},e(L,[2,15]),e(L,[2,26]),e(L,[2,27]),{11:59,32:72,37:24,38:l,39:u,40:27,41:h,42:f,43:d,44:g,45:p,46:v,47:m,48:y,49:b,50:T},e(L,[2,33]),e(L,[2,19]),{25:73,27:C},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:x(function(M,O){if(O.recoverable)this.trace(M);else{var N=new Error(M);throw N.hash=O,N}},"parseError"),parse:x(function(M){var O=this,N=[0],B=[],z=[null],F=[],V=this.table,G="",Y=0,Q=0,K=2,it=1,ut=F.slice.call(arguments,1),q=Object.create(this.lexer),W={yy:{}};for(var H in this.yy)Object.prototype.hasOwnProperty.call(this.yy,H)&&(W.yy[H]=this.yy[H]);q.setInput(M,W.yy),W.yy.lexer=q,W.yy.parser=this,typeof q.yylloc>"u"&&(q.yylloc={});var U=q.yylloc;F.push(U);var X=q.options&&q.options.ranges;typeof W.yy.parseError=="function"?this.parseError=W.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function J(bt){N.length=N.length-2*bt,z.length=z.length-bt,F.length=F.length-bt}x(J,"popStack");function j(){var bt;return bt=B.pop()||q.lex()||it,typeof bt!="number"&&(bt instanceof Array&&(B=bt,bt=B.pop()),bt=O.symbols_[bt]||bt),bt}x(j,"lex");for(var gt,at,tt,kt,ft={},Dt,Ot,Rt,Tt;;){if(at=N[N.length-1],this.defaultActions[at]?tt=this.defaultActions[at]:((gt===null||typeof gt>"u")&&(gt=j()),tt=V[at]&&V[at][gt]),typeof tt>"u"||!tt.length||!tt[0]){var At="";Tt=[];for(Dt in V[at])this.terminals_[Dt]&&Dt>K&&Tt.push("'"+this.terminals_[Dt]+"'");q.showPosition?At="Parse error on line "+(Y+1)+`:
`+q.showPosition()+`
Expecting `+Tt.join(", ")+", got '"+(this.terminals_[gt]||gt)+"'":At="Parse error on line "+(Y+1)+": Unexpected "+(gt==it?"end of input":"'"+(this.terminals_[gt]||gt)+"'"),this.parseError(At,{text:q.match,token:this.terminals_[gt]||gt,line:q.yylineno,loc:U,expected:Tt})}if(tt[0]instanceof Array&&tt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+at+", token: "+gt);switch(tt[0]){case 1:N.push(gt),z.push(q.yytext),F.push(q.yylloc),N.push(tt[1]),gt=null,Q=q.yyleng,G=q.yytext,Y=q.yylineno,U=q.yylloc;break;case 2:if(Ot=this.productions_[tt[1]][1],ft.$=z[z.length-Ot],ft._$={first_line:F[F.length-(Ot||1)].first_line,last_line:F[F.length-1].last_line,first_column:F[F.length-(Ot||1)].first_column,last_column:F[F.length-1].last_column},X&&(ft._$.range=[F[F.length-(Ot||1)].range[0],F[F.length-1].range[1]]),kt=this.performAction.apply(ft,[G,Q,Y,W.yy,tt[1],z,F].concat(ut)),typeof kt<"u")return kt;Ot&&(N=N.slice(0,-1*Ot*2),z=z.slice(0,-1*Ot),F=F.slice(0,-1*Ot)),N.push(this.productions_[tt[1]][0]),z.push(ft.$),F.push(ft._$),Rt=V[N[N.length-2]][N[N.length-1]],N.push(Rt);break;case 3:return!0}}return!0},"parse")},P=function(){var I={EOF:1,parseError:x(function(O,N){if(this.yy.parser)this.yy.parser.parseError(O,N);else throw new Error(O)},"parseError"),setInput:x(function(M,O){return this.yy=O||this.yy||{},this._input=M,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var M=this._input[0];this.yytext+=M,this.yyleng++,this.offset++,this.match+=M,this.matched+=M;var O=M.match(/(?:\r\n?|\n).*/g);return O?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),M},"input"),unput:x(function(M){var O=M.length,N=M.split(/(?:\r\n?|\n)/g);this._input=M+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-O),this.offset-=O;var B=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),N.length-1&&(this.yylineno-=N.length-1);var z=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:N?(N.length===B.length?this.yylloc.first_column:0)+B[B.length-N.length].length-N[0].length:this.yylloc.first_column-O},this.options.ranges&&(this.yylloc.range=[z[0],z[0]+this.yyleng-O]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(M){this.unput(this.match.slice(M))},"less"),pastInput:x(function(){var M=this.matched.substr(0,this.matched.length-this.match.length);return(M.length>20?"...":"")+M.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var M=this.match;return M.length<20&&(M+=this._input.substr(0,20-M.length)),(M.substr(0,20)+(M.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var M=this.pastInput(),O=new Array(M.length+1).join("-");return M+this.upcomingInput()+`
`+O+"^"},"showPosition"),test_match:x(function(M,O){var N,B,z;if(this.options.backtrack_lexer&&(z={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(z.yylloc.range=this.yylloc.range.slice(0))),B=M[0].match(/(?:\r\n?|\n).*/g),B&&(this.yylineno+=B.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:B?B[B.length-1].length-B[B.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+M[0].length},this.yytext+=M[0],this.match+=M[0],this.matches=M,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(M[0].length),this.matched+=M[0],N=this.performAction.call(this,this.yy,this,O,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),N)return N;if(this._backtrack){for(var F in z)this[F]=z[F];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var M,O,N,B;this._more||(this.yytext="",this.match="");for(var z=this._currentRules(),F=0;F<z.length;F++)if(N=this._input.match(this.rules[z[F]]),N&&(!O||N[0].length>O[0].length)){if(O=N,B=F,this.options.backtrack_lexer){if(M=this.test_match(N,z[F]),M!==!1)return M;if(this._backtrack){O=!1;continue}else return!1}else if(!this.options.flex)break}return O?(M=this.test_match(O,z[B]),M!==!1?M:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var O=this.next();return O||this.lex()},"lex"),begin:x(function(O){this.conditionStack.push(O)},"begin"),popState:x(function(){var O=this.conditionStack.length-1;return O>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(O){return O=this.conditionStack.length-1-Math.abs(O||0),O>=0?this.conditionStack[O]:"INITIAL"},"topState"),pushState:x(function(O){this.begin(O)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(O,N,B,z){switch(B){case 0:break;case 1:break;case 2:return this.popState(),34;case 3:return this.popState(),34;case 4:return 34;case 5:break;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 8;case 16:return this.pushState("axis_data"),"X_AXIS";case 17:return this.pushState("axis_data"),"Y_AXIS";case 18:return this.pushState("axis_band_data"),24;case 19:return 31;case 20:return this.pushState("data"),16;case 21:return this.pushState("data"),18;case 22:return this.pushState("data_inner"),24;case 23:return 27;case 24:return this.popState(),26;case 25:this.popState();break;case 26:this.pushState("string");break;case 27:this.popState();break;case 28:return"STR";case 29:return 24;case 30:return 26;case 31:return 43;case 32:return"COLON";case 33:return 44;case 34:return 28;case 35:return 45;case 36:return 46;case 37:return 48;case 38:return 50;case 39:return 47;case 40:return 41;case 41:return 49;case 42:return 42;case 43:break;case 44:return 35;case 45:return 36}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,23,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,20,21,22,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,23,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[27,28],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}};return I}();D.lexer=P;function _(){this.yy={}}return x(_,"Parser"),_.prototype=D,D.Parser=_,new _}();EE.parser=EE;var ext=EE;function kE(e){return e.type==="bar"}x(kE,"isBarPlot");function YS(e){return e.type==="band"}x(YS,"isBandAxisData");function xu(e){return e.type==="linear"}x(xu,"isLinearAxisData");var Ju,ez=(Ju=class{constructor(t){this.parentGroup=t}getMaxDimension(t,r){if(!this.parentGroup)return{width:t.reduce((a,s)=>Math.max(s.length,a),0)*r,height:r};const n={width:0,height:0},i=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",r);for(const a of t){const s=e8(i,1,a),o=s?s.width:a.length*r,l=s?s.height:r;n.width=Math.max(n.width,o),n.height=Math.max(n.height,l)}return i.remove(),n}},x(Ju,"TextDimensionCalculatorWithFont"),Ju),$L=.7,zL=.2,th,rz=(th=class{constructor(t,r,n,i){this.axisConfig=t,this.title=r,this.textDimensionCalculator=n,this.axisThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(t){this.range=t,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=t[1]-t[0]:this.boundingRect.width=t[1]-t[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(t){this.axisPosition=t,this.setRange(this.range)}getTickDistance(){const t=this.getRange();return Math.abs(t[0]-t[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(t=>t.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){$L*this.getTickDistance()>this.outerPadding*2&&(this.outerPadding=Math.floor($L*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(t){let r=t.height;if(this.axisConfig.showAxisLine&&r>this.axisConfig.axisLineWidth&&(r-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const n=this.getLabelDimension(),i=zL*t.width;this.outerPadding=Math.min(n.width/2,i);const a=n.height+this.axisConfig.labelPadding*2;this.labelTextHeight=n.height,a<=r&&(r-=a,this.showLabel=!0)}if(this.axisConfig.showTick&&r>=this.axisConfig.tickLength&&(this.showTick=!0,r-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const n=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),i=n.height+this.axisConfig.titlePadding*2;this.titleTextHeight=n.height,i<=r&&(r-=i,this.showTitle=!0)}this.boundingRect.width=t.width,this.boundingRect.height=t.height-r}calculateSpaceIfDrawnVertical(t){let r=t.width;if(this.axisConfig.showAxisLine&&r>this.axisConfig.axisLineWidth&&(r-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const n=this.getLabelDimension(),i=zL*t.height;this.outerPadding=Math.min(n.height/2,i);const a=n.width+this.axisConfig.labelPadding*2;a<=r&&(r-=a,this.showLabel=!0)}if(this.axisConfig.showTick&&r>=this.axisConfig.tickLength&&(this.showTick=!0,r-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const n=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),i=n.height+this.axisConfig.titlePadding*2;this.titleTextHeight=n.height,i<=r&&(r-=i,this.showTitle=!0)}this.boundingRect.width=t.width-r,this.boundingRect.height=t.height}calculateSpace(t){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(t):this.calculateSpaceIfDrawnHorizontally(t),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}getDrawableElementsForLeftAxis(){const t=[];if(this.showAxisLine){const r=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${r},${this.boundingRect.y} L ${r},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(r),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const r=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);t.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(n=>({path:`M ${r},${this.getScaleValue(n)} L ${r-this.axisConfig.tickLength},${this.getScaleValue(n)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&t.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElementsForBottomAxis(){const t=[];if(this.showAxisLine){const r=this.boundingRect.y+this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${r} L ${this.boundingRect.x+this.boundingRect.width},${r}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.getScaleValue(r),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const r=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);t.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(n=>({path:`M ${this.getScaleValue(n)},${r} L ${this.getScaleValue(n)},${r+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&t.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElementsForTopAxis(){const t=[];if(this.showAxisLine){const r=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${r} L ${this.boundingRect.x+this.boundingRect.width},${r}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.getScaleValue(r),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+this.axisConfig.titlePadding*2:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const r=this.boundingRect.y;t.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(n=>({path:`M ${this.getScaleValue(n)},${r+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(n)},${r+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&t.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}},x(th,"BaseAxis"),th),eh,rxt=(eh=class extends rz{constructor(t,r,n,i,a){super(t,i,a,r),this.categories=n,this.scale=og().domain(this.categories).range(this.getRange())}setRange(t){super.setRange(t)}recalculateScale(){this.scale=og().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),et.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(t){return this.scale(t)??this.getRange()[0]}},x(eh,"BandAxis"),eh),rh,nxt=(rh=class extends rz{constructor(t,r,n,i,a){super(t,i,a,r),this.domain=n,this.scale=Wl().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const t=[...this.domain];this.axisPosition==="left"&&t.reverse(),this.scale=Wl().domain(t).range(this.getRange())}getScaleValue(t){return this.scale(t)}},x(rh,"LinearAxis"),rh);function CE(e,t,r,n){const i=new ez(n);return YS(e)?new rxt(t,r,e.categories,e.title,i):new nxt(t,r,[e.min,e.max],e.title,i)}x(CE,"getAxis");var nh,ixt=(nh=class{constructor(t,r,n,i){this.textDimensionCalculator=t,this.chartConfig=r,this.chartData=n,this.chartThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}calculateSpace(t){const r=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),n=Math.max(r.width,t.width),i=r.height+2*this.chartConfig.titlePadding;return r.width<=n&&r.height<=i&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=n,this.boundingRect.height=i,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const t=[];return this.showChartTitle&&t.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),t}},x(nh,"ChartTitle"),nh);function nz(e,t,r,n){const i=new ez(n);return new ixt(i,e,t,r)}x(nz,"getChartTitleComponent");var ih,axt=(ih=class{constructor(t,r,n,i,a){this.plotData=t,this.xAxis=r,this.yAxis=n,this.orientation=i,this.plotIndex=a}getDrawableElement(){const t=this.plotData.data.map(n=>[this.xAxis.getScaleValue(n[0]),this.yAxis.getScaleValue(n[1])]);let r;return this.orientation==="horizontal"?r=vh().y(n=>n[0]).x(n=>n[1])(t):r=vh().x(n=>n[0]).y(n=>n[1])(t),r?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:r,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}},x(ih,"LinePlot"),ih),ah,sxt=(ah=class{constructor(t,r,n,i,a,s){this.barData=t,this.boundingRect=r,this.xAxis=n,this.yAxis=i,this.orientation=a,this.plotIndex=s}getDrawableElement(){const t=this.barData.data.map(a=>[this.xAxis.getScaleValue(a[0]),this.yAxis.getScaleValue(a[1])]),n=Math.min(this.xAxis.getAxisOuterPadding()*2,this.xAxis.getTickDistance())*(1-.05),i=n/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:t.map(a=>({x:this.boundingRect.x,y:a[0]-i,height:n,width:a[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:t.map(a=>({x:a[0]-i,y:a[1],width:n,height:this.boundingRect.y+this.boundingRect.height-a[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}},x(ah,"BarPlot"),ah),sh,oxt=(sh=class{constructor(t,r,n){this.chartConfig=t,this.chartData=r,this.chartThemeConfig=n,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(t,r){this.xAxis=t,this.yAxis=r}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}calculateSpace(t){return this.boundingRect.width=t.width,this.boundingRect.height=t.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!(this.xAxis&&this.yAxis))throw Error("Axes must be passed to render Plots");const t=[];for(const[r,n]of this.chartData.plots.entries())switch(n.type){case"line":{const i=new axt(n,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,r);t.push(...i.getDrawableElement())}break;case"bar":{const i=new sxt(n,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,r);t.push(...i.getDrawableElement())}break}return t}},x(sh,"BasePlot"),sh);function iz(e,t,r){return new oxt(e,t,r)}x(iz,"getPlotComponent");var oh,lxt=(oh=class{constructor(t,r,n,i){this.chartConfig=t,this.chartData=r,this.componentStore={title:nz(t,r,n,i),plot:iz(t,r,n),xAxis:CE(r.xAxis,t.xAxis,{titleColor:n.xAxisTitleColor,labelColor:n.xAxisLabelColor,tickColor:n.xAxisTickColor,axisLineColor:n.xAxisLineColor},i),yAxis:CE(r.yAxis,t.yAxis,{titleColor:n.yAxisTitleColor,labelColor:n.yAxisLabelColor,tickColor:n.yAxisTickColor,axisLineColor:n.yAxisLineColor},i)}}calculateVerticalSpace(){let t=this.chartConfig.width,r=this.chartConfig.height,n=0,i=0,a=Math.floor(t*this.chartConfig.plotReservedSpacePercent/100),s=Math.floor(r*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:a,height:s});t-=o.width,r-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:r}),i=o.height,r-=o.height,this.componentStore.xAxis.setAxisPosition("bottom"),o=this.componentStore.xAxis.calculateSpace({width:t,height:r}),r-=o.height,this.componentStore.yAxis.setAxisPosition("left"),o=this.componentStore.yAxis.calculateSpace({width:t,height:r}),n=o.width,t-=o.width,t>0&&(a+=t,t=0),r>0&&(s+=r,r=0),this.componentStore.plot.calculateSpace({width:a,height:s}),this.componentStore.plot.setBoundingBoxXY({x:n,y:i}),this.componentStore.xAxis.setRange([n,n+a]),this.componentStore.xAxis.setBoundingBoxXY({x:n,y:i+s}),this.componentStore.yAxis.setRange([i,i+s]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:i}),this.chartData.plots.some(l=>kE(l))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let t=this.chartConfig.width,r=this.chartConfig.height,n=0,i=0,a=0,s=Math.floor(t*this.chartConfig.plotReservedSpacePercent/100),o=Math.floor(r*this.chartConfig.plotReservedSpacePercent/100),l=this.componentStore.plot.calculateSpace({width:s,height:o});t-=l.width,r-=l.height,l=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:r}),n=l.height,r-=l.height,this.componentStore.xAxis.setAxisPosition("left"),l=this.componentStore.xAxis.calculateSpace({width:t,height:r}),t-=l.width,i=l.width,this.componentStore.yAxis.setAxisPosition("top"),l=this.componentStore.yAxis.calculateSpace({width:t,height:r}),r-=l.height,a=n+l.height,t>0&&(s+=t,t=0),r>0&&(o+=r,r=0),this.componentStore.plot.calculateSpace({width:s,height:o}),this.componentStore.plot.setBoundingBoxXY({x:i,y:a}),this.componentStore.yAxis.setRange([i,i+s]),this.componentStore.yAxis.setBoundingBoxXY({x:i,y:n}),this.componentStore.xAxis.setRange([a,a+o]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:a}),this.chartData.plots.some(u=>kE(u))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const t=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const r of Object.values(this.componentStore))t.push(...r.getDrawableElements());return t}},x(oh,"Orchestrator"),oh),lh,cxt=(lh=class{static build(t,r,n,i){return new lxt(t,r,n,i).getDrawableElement()}},x(lh,"XYChartBuilder"),lh),Ng=0,az,Dg=XS(),Mg=qS(),hr=jS(),SE=Mg.plotColorPalette.split(",").map(e=>e.trim()),Xy=!1,HS=!1;function qS(){const e=ry(),t=gr();return xa(e.xyChart,t.themeVariables.xyChart)}x(qS,"getChartDefaultThemeConfig");function XS(){const e=gr();return xa(Xe.xyChart,e.xyChart)}x(XS,"getChartDefaultConfig");function jS(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}x(jS,"getChartDefaultData");function jy(e){const t=gr();return xr(e.trim(),t)}x(jy,"textSanitizer");function sz(e){az=e}x(sz,"setTmpSVGG");function oz(e){e==="horizontal"?Dg.chartOrientation="horizontal":Dg.chartOrientation="vertical"}x(oz,"setOrientation");function lz(e){hr.xAxis.title=jy(e.text)}x(lz,"setXAxisTitle");function KS(e,t){hr.xAxis={type:"linear",title:hr.xAxis.title,min:e,max:t},Xy=!0}x(KS,"setXAxisRangeData");function cz(e){hr.xAxis={type:"band",title:hr.xAxis.title,categories:e.map(t=>jy(t.text))},Xy=!0}x(cz,"setXAxisBand");function uz(e){hr.yAxis.title=jy(e.text)}x(uz,"setYAxisTitle");function hz(e,t){hr.yAxis={type:"linear",title:hr.yAxis.title,min:e,max:t},HS=!0}x(hz,"setYAxisRangeData");function fz(e){const t=Math.min(...e),r=Math.max(...e),n=xu(hr.yAxis)?hr.yAxis.min:1/0,i=xu(hr.yAxis)?hr.yAxis.max:-1/0;hr.yAxis={type:"linear",title:hr.yAxis.title,min:Math.min(n,t),max:Math.max(i,r)}}x(fz,"setYAxisRangeFromPlotData");function ZS(e){let t=[];if(e.length===0)return t;if(!Xy){const r=xu(hr.xAxis)?hr.xAxis.min:1/0,n=xu(hr.xAxis)?hr.xAxis.max:-1/0;KS(Math.min(r,1),Math.max(n,e.length))}if(HS||fz(e),YS(hr.xAxis)&&(t=hr.xAxis.categories.map((r,n)=>[r,e[n]])),xu(hr.xAxis)){const r=hr.xAxis.min,n=hr.xAxis.max,i=(n-r)/(e.length-1),a=[];for(let s=r;s<=n;s+=i)a.push(`${s}`);t=a.map((s,o)=>[s,e[o]])}return t}x(ZS,"transformDataWithoutCategory");function QS(e){return SE[e===0?0:e%SE.length]}x(QS,"getPlotColorFromPalette");function dz(e,t){const r=ZS(t);hr.plots.push({type:"line",strokeFill:QS(Ng),strokeWidth:2,data:r}),Ng++}x(dz,"setLineData");function gz(e,t){const r=ZS(t);hr.plots.push({type:"bar",fill:QS(Ng),data:r}),Ng++}x(gz,"setBarData");function pz(){if(hr.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return hr.title=gn(),cxt.build(Dg,hr,Mg,az)}x(pz,"getDrawableElem");function vz(){return Mg}x(vz,"getChartThemeConfig");function mz(){return Dg}x(mz,"getChartConfig");var uxt=x(function(){dn(),Ng=0,Dg=XS(),hr=jS(),Mg=qS(),SE=Mg.plotColorPalette.split(",").map(e=>e.trim()),Xy=!1,HS=!1},"clear"),hxt={getDrawableElem:pz,clear:uxt,setAccTitle:cn,getAccTitle:wn,setDiagramTitle:Fn,getDiagramTitle:gn,getAccDescription:kn,setAccDescription:En,setOrientation:oz,setXAxisTitle:lz,setXAxisRangeData:KS,setXAxisBand:cz,setYAxisTitle:uz,setYAxisRangeData:hz,setLineData:dz,setBarData:gz,setTmpSVGG:sz,getChartThemeConfig:vz,getChartConfig:mz},fxt=x((e,t,r,n)=>{const i=n.db,a=i.getChartThemeConfig(),s=i.getChartConfig();function o(m){return m==="top"?"text-before-edge":"middle"}x(o,"getDominantBaseLine");function l(m){return m==="left"?"start":m==="right"?"end":"middle"}x(l,"getTextAnchor");function u(m){return`translate(${m.x}, ${m.y}) rotate(${m.rotation||0})`}x(u,"getTextTransformation"),et.debug(`Rendering xychart chart
`+e);const h=ho(t),f=h.append("g").attr("class","main"),d=f.append("rect").attr("width",s.width).attr("height",s.height).attr("class","background");Oi(h,s.height,s.width,!0),h.attr("viewBox",`0 0 ${s.width} ${s.height}`),d.attr("fill",a.backgroundColor),i.setTmpSVGG(h.append("g").attr("class","mermaid-tmp-group"));const g=i.getDrawableElem(),p={};function v(m){let y=f,b="";for(const[T]of m.entries()){let w=f;T>0&&p[b]&&(w=p[b]),b+=m[T],y=p[b],y||(y=p[b]=w.append("g").attr("class",m[T]))}return y}x(v,"getGroup");for(const m of g){if(m.data.length===0)continue;const y=v(m.groupTexts);switch(m.type){case"rect":y.selectAll("rect").data(m.data).enter().append("rect").attr("x",b=>b.x).attr("y",b=>b.y).attr("width",b=>b.width).attr("height",b=>b.height).attr("fill",b=>b.fill).attr("stroke",b=>b.strokeFill).attr("stroke-width",b=>b.strokeWidth);break;case"text":y.selectAll("text").data(m.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",b=>b.fill).attr("font-size",b=>b.fontSize).attr("dominant-baseline",b=>o(b.verticalPos)).attr("text-anchor",b=>l(b.horizontalPos)).attr("transform",b=>u(b)).text(b=>b.text);break;case"path":y.selectAll("path").data(m.data).enter().append("path").attr("d",b=>b.path).attr("fill",b=>b.fill?b.fill:"none").attr("stroke",b=>b.strokeFill).attr("stroke-width",b=>b.strokeWidth);break}}},"draw"),dxt={draw:fxt},gxt={parser:ext,db:hxt,renderer:dxt};const pxt=Object.freeze(Object.defineProperty({__proto__:null,diagram:gxt},Symbol.toStringTag,{value:"Module"}));var _E=function(){var e=x(function(ht,_t,Z,st){for(Z=Z||{},st=ht.length;st--;Z[ht[st]]=_t);return Z},"o"),t=[1,3],r=[1,4],n=[1,5],i=[1,6],a=[5,6,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],s=[1,22],o=[2,7],l=[1,26],u=[1,27],h=[1,28],f=[1,29],d=[1,33],g=[1,34],p=[1,35],v=[1,36],m=[1,37],y=[1,38],b=[1,24],T=[1,31],w=[1,32],k=[1,30],S=[1,39],E=[1,40],L=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],A=[1,61],R=[89,90],C=[5,8,9,11,13,21,22,23,24,27,29,41,42,43,44,45,46,54,61,63,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],D=[27,29],P=[1,70],_=[1,71],I=[1,72],M=[1,73],O=[1,74],N=[1,75],B=[1,76],z=[1,83],F=[1,80],V=[1,84],G=[1,85],Y=[1,86],Q=[1,87],K=[1,88],it=[1,89],ut=[1,90],q=[1,91],W=[1,92],H=[5,8,9,11,13,21,22,23,24,27,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],U=[63,64],X=[1,101],J=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,76,77,89,90],j=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],gt=[1,110],at=[1,106],tt=[1,107],kt=[1,108],ft=[1,109],Dt=[1,111],Ot=[1,116],Rt=[1,117],Tt=[1,114],At=[1,115],bt={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,direction:17,styleStatement:18,classDefStatement:19,classStatement:20,direction_tb:21,direction_bt:22,direction_rl:23,direction_lr:24,requirementType:25,requirementName:26,STRUCT_START:27,requirementBody:28,STYLE_SEPARATOR:29,idList:30,ID:31,COLONSEP:32,id:33,TEXT:34,text:35,RISK:36,riskLevel:37,VERIFYMTHD:38,verifyType:39,STRUCT_STOP:40,REQUIREMENT:41,FUNCTIONAL_REQUIREMENT:42,INTERFACE_REQUIREMENT:43,PERFORMANCE_REQUIREMENT:44,PHYSICAL_REQUIREMENT:45,DESIGN_CONSTRAINT:46,LOW_RISK:47,MED_RISK:48,HIGH_RISK:49,VERIFY_ANALYSIS:50,VERIFY_DEMONSTRATION:51,VERIFY_INSPECTION:52,VERIFY_TEST:53,ELEMENT:54,elementName:55,elementBody:56,TYPE:57,type:58,DOCREF:59,ref:60,END_ARROW_L:61,relationship:62,LINE:63,END_ARROW_R:64,CONTAINS:65,COPIES:66,DERIVES:67,SATISFIES:68,VERIFIES:69,REFINES:70,TRACES:71,CLASSDEF:72,stylesOpt:73,CLASS:74,ALPHA:75,COMMA:76,STYLE:77,style:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,MINUS:86,LABEL:87,SEMICOLON:88,unqString:89,qString:90,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",21:"direction_tb",22:"direction_bt",23:"direction_rl",24:"direction_lr",27:"STRUCT_START",29:"STYLE_SEPARATOR",31:"ID",32:"COLONSEP",34:"TEXT",36:"RISK",38:"VERIFYMTHD",40:"STRUCT_STOP",41:"REQUIREMENT",42:"FUNCTIONAL_REQUIREMENT",43:"INTERFACE_REQUIREMENT",44:"PERFORMANCE_REQUIREMENT",45:"PHYSICAL_REQUIREMENT",46:"DESIGN_CONSTRAINT",47:"LOW_RISK",48:"MED_RISK",49:"HIGH_RISK",50:"VERIFY_ANALYSIS",51:"VERIFY_DEMONSTRATION",52:"VERIFY_INSPECTION",53:"VERIFY_TEST",54:"ELEMENT",57:"TYPE",59:"DOCREF",61:"END_ARROW_L",63:"LINE",64:"END_ARROW_R",65:"CONTAINS",66:"COPIES",67:"DERIVES",68:"SATISFIES",69:"VERIFIES",70:"REFINES",71:"TRACES",72:"CLASSDEF",74:"CLASS",75:"ALPHA",76:"COMMA",77:"STYLE",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",86:"MINUS",87:"LABEL",88:"SEMICOLON",89:"unqString",90:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[17,1],[17,1],[17,1],[17,1],[14,5],[14,7],[28,5],[28,5],[28,5],[28,5],[28,2],[28,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[37,1],[37,1],[37,1],[39,1],[39,1],[39,1],[39,1],[15,5],[15,7],[56,5],[56,5],[56,2],[56,1],[16,5],[16,5],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[19,3],[20,3],[20,3],[30,1],[30,3],[30,1],[30,3],[18,3],[73,1],[73,3],[78,1],[78,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[26,1],[26,1],[33,1],[33,1],[35,1],[35,1],[55,1],[55,1],[58,1],[58,1],[60,1],[60,1]],performAction:x(function(_t,Z,st,$,nt,rt,ct){var ot=rt.length-1;switch(nt){case 4:this.$=rt[ot].trim(),$.setAccTitle(this.$);break;case 5:case 6:this.$=rt[ot].trim(),$.setAccDescription(this.$);break;case 7:this.$=[];break;case 17:$.setDirection("TB");break;case 18:$.setDirection("BT");break;case 19:$.setDirection("RL");break;case 20:$.setDirection("LR");break;case 21:$.addRequirement(rt[ot-3],rt[ot-4]);break;case 22:$.addRequirement(rt[ot-5],rt[ot-6]),$.setClass([rt[ot-5]],rt[ot-3]);break;case 23:$.setNewReqId(rt[ot-2]);break;case 24:$.setNewReqText(rt[ot-2]);break;case 25:$.setNewReqRisk(rt[ot-2]);break;case 26:$.setNewReqVerifyMethod(rt[ot-2]);break;case 29:this.$=$.RequirementType.REQUIREMENT;break;case 30:this.$=$.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 31:this.$=$.RequirementType.INTERFACE_REQUIREMENT;break;case 32:this.$=$.RequirementType.PERFORMANCE_REQUIREMENT;break;case 33:this.$=$.RequirementType.PHYSICAL_REQUIREMENT;break;case 34:this.$=$.RequirementType.DESIGN_CONSTRAINT;break;case 35:this.$=$.RiskLevel.LOW_RISK;break;case 36:this.$=$.RiskLevel.MED_RISK;break;case 37:this.$=$.RiskLevel.HIGH_RISK;break;case 38:this.$=$.VerifyType.VERIFY_ANALYSIS;break;case 39:this.$=$.VerifyType.VERIFY_DEMONSTRATION;break;case 40:this.$=$.VerifyType.VERIFY_INSPECTION;break;case 41:this.$=$.VerifyType.VERIFY_TEST;break;case 42:$.addElement(rt[ot-3]);break;case 43:$.addElement(rt[ot-5]),$.setClass([rt[ot-5]],rt[ot-3]);break;case 44:$.setNewElementType(rt[ot-2]);break;case 45:$.setNewElementDocRef(rt[ot-2]);break;case 48:$.addRelationship(rt[ot-2],rt[ot],rt[ot-4]);break;case 49:$.addRelationship(rt[ot-2],rt[ot-4],rt[ot]);break;case 50:this.$=$.Relationships.CONTAINS;break;case 51:this.$=$.Relationships.COPIES;break;case 52:this.$=$.Relationships.DERIVES;break;case 53:this.$=$.Relationships.SATISFIES;break;case 54:this.$=$.Relationships.VERIFIES;break;case 55:this.$=$.Relationships.REFINES;break;case 56:this.$=$.Relationships.TRACES;break;case 57:this.$=rt[ot-2],$.defineClass(rt[ot-1],rt[ot]);break;case 58:$.setClass(rt[ot-1],rt[ot]);break;case 59:$.setClass([rt[ot-2]],rt[ot]);break;case 60:case 62:this.$=[rt[ot]];break;case 61:case 63:this.$=rt[ot-2].concat([rt[ot]]);break;case 64:this.$=rt[ot-2],$.setCssStyle(rt[ot-1],rt[ot]);break;case 65:this.$=[rt[ot]];break;case 66:rt[ot-2].push(rt[ot]),this.$=rt[ot-2];break;case 68:this.$=rt[ot-1]+rt[ot];break}},"anonymous"),table:[{3:1,4:2,6:t,9:r,11:n,13:i},{1:[3]},{3:8,4:2,5:[1,7],6:t,9:r,11:n,13:i},{5:[1,9]},{10:[1,10]},{12:[1,11]},e(a,[2,6]),{3:12,4:2,6:t,9:r,11:n,13:i},{1:[2,2]},{4:17,5:s,7:13,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:f,25:23,33:25,41:d,42:g,43:p,44:v,45:m,46:y,54:b,72:T,74:w,77:k,89:S,90:E},e(a,[2,4]),e(a,[2,5]),{1:[2,1]},{8:[1,41]},{4:17,5:s,7:42,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:f,25:23,33:25,41:d,42:g,43:p,44:v,45:m,46:y,54:b,72:T,74:w,77:k,89:S,90:E},{4:17,5:s,7:43,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:f,25:23,33:25,41:d,42:g,43:p,44:v,45:m,46:y,54:b,72:T,74:w,77:k,89:S,90:E},{4:17,5:s,7:44,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:f,25:23,33:25,41:d,42:g,43:p,44:v,45:m,46:y,54:b,72:T,74:w,77:k,89:S,90:E},{4:17,5:s,7:45,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:f,25:23,33:25,41:d,42:g,43:p,44:v,45:m,46:y,54:b,72:T,74:w,77:k,89:S,90:E},{4:17,5:s,7:46,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:f,25:23,33:25,41:d,42:g,43:p,44:v,45:m,46:y,54:b,72:T,74:w,77:k,89:S,90:E},{4:17,5:s,7:47,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:f,25:23,33:25,41:d,42:g,43:p,44:v,45:m,46:y,54:b,72:T,74:w,77:k,89:S,90:E},{4:17,5:s,7:48,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:f,25:23,33:25,41:d,42:g,43:p,44:v,45:m,46:y,54:b,72:T,74:w,77:k,89:S,90:E},{4:17,5:s,7:49,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:f,25:23,33:25,41:d,42:g,43:p,44:v,45:m,46:y,54:b,72:T,74:w,77:k,89:S,90:E},{4:17,5:s,7:50,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:f,25:23,33:25,41:d,42:g,43:p,44:v,45:m,46:y,54:b,72:T,74:w,77:k,89:S,90:E},{26:51,89:[1,52],90:[1,53]},{55:54,89:[1,55],90:[1,56]},{29:[1,59],61:[1,57],63:[1,58]},e(L,[2,17]),e(L,[2,18]),e(L,[2,19]),e(L,[2,20]),{30:60,33:62,75:A,89:S,90:E},{30:63,33:62,75:A,89:S,90:E},{30:64,33:62,75:A,89:S,90:E},e(R,[2,29]),e(R,[2,30]),e(R,[2,31]),e(R,[2,32]),e(R,[2,33]),e(R,[2,34]),e(C,[2,81]),e(C,[2,82]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{8:[2,13]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{27:[1,65],29:[1,66]},e(D,[2,79]),e(D,[2,80]),{27:[1,67],29:[1,68]},e(D,[2,85]),e(D,[2,86]),{62:69,65:P,66:_,67:I,68:M,69:O,70:N,71:B},{62:77,65:P,66:_,67:I,68:M,69:O,70:N,71:B},{30:78,33:62,75:A,89:S,90:E},{73:79,75:z,76:F,78:81,79:82,80:V,81:G,82:Y,83:Q,84:K,85:it,86:ut,87:q,88:W},e(H,[2,60]),e(H,[2,62]),{73:93,75:z,76:F,78:81,79:82,80:V,81:G,82:Y,83:Q,84:K,85:it,86:ut,87:q,88:W},{30:94,33:62,75:A,76:F,89:S,90:E},{5:[1,95]},{30:96,33:62,75:A,89:S,90:E},{5:[1,97]},{30:98,33:62,75:A,89:S,90:E},{63:[1,99]},e(U,[2,50]),e(U,[2,51]),e(U,[2,52]),e(U,[2,53]),e(U,[2,54]),e(U,[2,55]),e(U,[2,56]),{64:[1,100]},e(L,[2,59],{76:F}),e(L,[2,64],{76:X}),{33:103,75:[1,102],89:S,90:E},e(J,[2,65],{79:104,75:z,80:V,81:G,82:Y,83:Q,84:K,85:it,86:ut,87:q,88:W}),e(j,[2,67]),e(j,[2,69]),e(j,[2,70]),e(j,[2,71]),e(j,[2,72]),e(j,[2,73]),e(j,[2,74]),e(j,[2,75]),e(j,[2,76]),e(j,[2,77]),e(j,[2,78]),e(L,[2,57],{76:X}),e(L,[2,58],{76:F}),{5:gt,28:105,31:at,34:tt,36:kt,38:ft,40:Dt},{27:[1,112],76:F},{5:Ot,40:Rt,56:113,57:Tt,59:At},{27:[1,118],76:F},{33:119,89:S,90:E},{33:120,89:S,90:E},{75:z,78:121,79:82,80:V,81:G,82:Y,83:Q,84:K,85:it,86:ut,87:q,88:W},e(H,[2,61]),e(H,[2,63]),e(j,[2,68]),e(L,[2,21]),{32:[1,122]},{32:[1,123]},{32:[1,124]},{32:[1,125]},{5:gt,28:126,31:at,34:tt,36:kt,38:ft,40:Dt},e(L,[2,28]),{5:[1,127]},e(L,[2,42]),{32:[1,128]},{32:[1,129]},{5:Ot,40:Rt,56:130,57:Tt,59:At},e(L,[2,47]),{5:[1,131]},e(L,[2,48]),e(L,[2,49]),e(J,[2,66],{79:104,75:z,80:V,81:G,82:Y,83:Q,84:K,85:it,86:ut,87:q,88:W}),{33:132,89:S,90:E},{35:133,89:[1,134],90:[1,135]},{37:136,47:[1,137],48:[1,138],49:[1,139]},{39:140,50:[1,141],51:[1,142],52:[1,143],53:[1,144]},e(L,[2,27]),{5:gt,28:145,31:at,34:tt,36:kt,38:ft,40:Dt},{58:146,89:[1,147],90:[1,148]},{60:149,89:[1,150],90:[1,151]},e(L,[2,46]),{5:Ot,40:Rt,56:152,57:Tt,59:At},{5:[1,153]},{5:[1,154]},{5:[2,83]},{5:[2,84]},{5:[1,155]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[1,156]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,41]},e(L,[2,22]),{5:[1,157]},{5:[2,87]},{5:[2,88]},{5:[1,158]},{5:[2,89]},{5:[2,90]},e(L,[2,43]),{5:gt,28:159,31:at,34:tt,36:kt,38:ft,40:Dt},{5:gt,28:160,31:at,34:tt,36:kt,38:ft,40:Dt},{5:gt,28:161,31:at,34:tt,36:kt,38:ft,40:Dt},{5:gt,28:162,31:at,34:tt,36:kt,38:ft,40:Dt},{5:Ot,40:Rt,56:163,57:Tt,59:At},{5:Ot,40:Rt,56:164,57:Tt,59:At},e(L,[2,23]),e(L,[2,24]),e(L,[2,25]),e(L,[2,26]),e(L,[2,44]),e(L,[2,45])],defaultActions:{8:[2,2],12:[2,1],41:[2,3],42:[2,8],43:[2,9],44:[2,10],45:[2,11],46:[2,12],47:[2,13],48:[2,14],49:[2,15],50:[2,16],134:[2,83],135:[2,84],137:[2,35],138:[2,36],139:[2,37],141:[2,38],142:[2,39],143:[2,40],144:[2,41],147:[2,87],148:[2,88],150:[2,89],151:[2,90]},parseError:x(function(_t,Z){if(Z.recoverable)this.trace(_t);else{var st=new Error(_t);throw st.hash=Z,st}},"parseError"),parse:x(function(_t){var Z=this,st=[0],$=[],nt=[null],rt=[],ct=this.table,ot="",vt=0,yt=0,mt=2,Mt=1,Yt=rt.slice.call(arguments,1),Bt=Object.create(this.lexer),zt={yy:{}};for(var Gt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Gt)&&(zt.yy[Gt]=this.yy[Gt]);Bt.setInput(_t,zt.yy),zt.yy.lexer=Bt,zt.yy.parser=this,typeof Bt.yylloc>"u"&&(Bt.yylloc={});var It=Bt.yylloc;rt.push(It);var Vt=Bt.options&&Bt.options.ranges;typeof zt.yy.parseError=="function"?this.parseError=zt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Zt(He){st.length=st.length-2*He,nt.length=nt.length-He,rt.length=rt.length-He}x(Zt,"popStack");function jt(){var He;return He=$.pop()||Bt.lex()||Mt,typeof He!="number"&&(He instanceof Array&&($=He,He=$.pop()),He=Z.symbols_[He]||He),He}x(jt,"lex");for(var Pt,ce,$t,Ut,te={},Qt,Jt,ie,Ge;;){if(ce=st[st.length-1],this.defaultActions[ce]?$t=this.defaultActions[ce]:((Pt===null||typeof Pt>"u")&&(Pt=jt()),$t=ct[ce]&&ct[ce][Pt]),typeof $t>"u"||!$t.length||!$t[0]){var pe="";Ge=[];for(Qt in ct[ce])this.terminals_[Qt]&&Qt>mt&&Ge.push("'"+this.terminals_[Qt]+"'");Bt.showPosition?pe="Parse error on line "+(vt+1)+`:
`+Bt.showPosition()+`
Expecting `+Ge.join(", ")+", got '"+(this.terminals_[Pt]||Pt)+"'":pe="Parse error on line "+(vt+1)+": Unexpected "+(Pt==Mt?"end of input":"'"+(this.terminals_[Pt]||Pt)+"'"),this.parseError(pe,{text:Bt.match,token:this.terminals_[Pt]||Pt,line:Bt.yylineno,loc:It,expected:Ge})}if($t[0]instanceof Array&&$t.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ce+", token: "+Pt);switch($t[0]){case 1:st.push(Pt),nt.push(Bt.yytext),rt.push(Bt.yylloc),st.push($t[1]),Pt=null,yt=Bt.yyleng,ot=Bt.yytext,vt=Bt.yylineno,It=Bt.yylloc;break;case 2:if(Jt=this.productions_[$t[1]][1],te.$=nt[nt.length-Jt],te._$={first_line:rt[rt.length-(Jt||1)].first_line,last_line:rt[rt.length-1].last_line,first_column:rt[rt.length-(Jt||1)].first_column,last_column:rt[rt.length-1].last_column},Vt&&(te._$.range=[rt[rt.length-(Jt||1)].range[0],rt[rt.length-1].range[1]]),Ut=this.performAction.apply(te,[ot,yt,vt,zt.yy,$t[1],nt,rt].concat(Yt)),typeof Ut<"u")return Ut;Jt&&(st=st.slice(0,-1*Jt*2),nt=nt.slice(0,-1*Jt),rt=rt.slice(0,-1*Jt)),st.push(this.productions_[$t[1]][0]),nt.push(te.$),rt.push(te._$),ie=ct[st[st.length-2]][st[st.length-1]],st.push(ie);break;case 3:return!0}}return!0},"parse")},wt=function(){var ht={EOF:1,parseError:x(function(Z,st){if(this.yy.parser)this.yy.parser.parseError(Z,st);else throw new Error(Z)},"parseError"),setInput:x(function(_t,Z){return this.yy=Z||this.yy||{},this._input=_t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var _t=this._input[0];this.yytext+=_t,this.yyleng++,this.offset++,this.match+=_t,this.matched+=_t;var Z=_t.match(/(?:\r\n?|\n).*/g);return Z?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),_t},"input"),unput:x(function(_t){var Z=_t.length,st=_t.split(/(?:\r\n?|\n)/g);this._input=_t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Z),this.offset-=Z;var $=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),st.length-1&&(this.yylineno-=st.length-1);var nt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:st?(st.length===$.length?this.yylloc.first_column:0)+$[$.length-st.length].length-st[0].length:this.yylloc.first_column-Z},this.options.ranges&&(this.yylloc.range=[nt[0],nt[0]+this.yyleng-Z]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(_t){this.unput(this.match.slice(_t))},"less"),pastInput:x(function(){var _t=this.matched.substr(0,this.matched.length-this.match.length);return(_t.length>20?"...":"")+_t.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var _t=this.match;return _t.length<20&&(_t+=this._input.substr(0,20-_t.length)),(_t.substr(0,20)+(_t.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var _t=this.pastInput(),Z=new Array(_t.length+1).join("-");return _t+this.upcomingInput()+`
`+Z+"^"},"showPosition"),test_match:x(function(_t,Z){var st,$,nt;if(this.options.backtrack_lexer&&(nt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(nt.yylloc.range=this.yylloc.range.slice(0))),$=_t[0].match(/(?:\r\n?|\n).*/g),$&&(this.yylineno+=$.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:$?$[$.length-1].length-$[$.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+_t[0].length},this.yytext+=_t[0],this.match+=_t[0],this.matches=_t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(_t[0].length),this.matched+=_t[0],st=this.performAction.call(this,this.yy,this,Z,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),st)return st;if(this._backtrack){for(var rt in nt)this[rt]=nt[rt];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var _t,Z,st,$;this._more||(this.yytext="",this.match="");for(var nt=this._currentRules(),rt=0;rt<nt.length;rt++)if(st=this._input.match(this.rules[nt[rt]]),st&&(!Z||st[0].length>Z[0].length)){if(Z=st,$=rt,this.options.backtrack_lexer){if(_t=this.test_match(st,nt[rt]),_t!==!1)return _t;if(this._backtrack){Z=!1;continue}else return!1}else if(!this.options.flex)break}return Z?(_t=this.test_match(Z,nt[$]),_t!==!1?_t:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var Z=this.next();return Z||this.lex()},"lex"),begin:x(function(Z){this.conditionStack.push(Z)},"begin"),popState:x(function(){var Z=this.conditionStack.length-1;return Z>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(Z){return Z=this.conditionStack.length-1-Math.abs(Z||0),Z>=0?this.conditionStack[Z]:"INITIAL"},"topState"),pushState:x(function(Z){this.begin(Z)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(Z,st,$,nt){switch($){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 21;case 9:return 22;case 10:return 23;case 11:return 24;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:return 8;case 17:return 6;case 18:return 27;case 19:return 40;case 20:return 29;case 21:return 32;case 22:return 31;case 23:return 34;case 24:return 36;case 25:return 38;case 26:return 41;case 27:return 42;case 28:return 43;case 29:return 44;case 30:return 45;case 31:return 46;case 32:return 47;case 33:return 48;case 34:return 49;case 35:return 50;case 36:return 51;case 37:return 52;case 38:return 53;case 39:return 54;case 40:return 65;case 41:return 66;case 42:return 67;case 43:return 68;case 44:return 69;case 45:return 70;case 46:return 71;case 47:return 57;case 48:return 59;case 49:return this.begin("style"),77;case 50:return 75;case 51:return 81;case 52:return 88;case 53:return"PERCENT";case 54:return 86;case 55:return 84;case 56:break;case 57:this.begin("string");break;case 58:this.popState();break;case 59:return this.begin("style"),72;case 60:return this.begin("style"),74;case 61:return 61;case 62:return 64;case 63:return 63;case 64:this.begin("string");break;case 65:this.popState();break;case 66:return"qString";case 67:return st.yytext=st.yytext.trim(),89;case 68:return 75;case 69:return 80;case 70:return 76}},"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::{3})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:style\b)/i,/^(?:\w+)/i,/^(?::)/i,/^(?:;)/i,/^(?:%)/i,/^(?:-)/i,/^(?:#)/i,/^(?: )/i,/^(?:["])/i,/^(?:\n)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^:,\r\n\{\<\>\-\=]*)/i,/^(?:\w+)/i,/^(?:[0-9]+)/i,/^(?:,)/i],conditions:{acc_descr_multiline:{rules:[6,7,68,69,70],inclusive:!1},acc_descr:{rules:[4,68,69,70],inclusive:!1},acc_title:{rules:[2,68,69,70],inclusive:!1},style:{rules:[50,51,52,53,54,55,56,57,58,68,69,70],inclusive:!1},unqString:{rules:[68,69,70],inclusive:!1},token:{rules:[68,69,70],inclusive:!1},string:{rules:[65,66,68,69,70],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,59,60,61,62,63,64,67,68,69,70],inclusive:!0}}};return ht}();bt.lexer=wt;function Nt(){this.yy={}}return x(Nt,"Parser"),Nt.prototype=bt,bt.Parser=Nt,new Nt}();_E.parser=_E;var vxt=_E,ch,mxt=(ch=class{constructor(){this.relations=[],this.latestRequirement=this.getInitialRequirement(),this.requirements=new Map,this.latestElement=this.getInitialElement(),this.elements=new Map,this.classes=new Map,this.direction="TB",this.RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},this.RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},this.VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},this.Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},this.setAccTitle=cn,this.getAccTitle=wn,this.setAccDescription=En,this.getAccDescription=kn,this.setDiagramTitle=Fn,this.getDiagramTitle=gn,this.getConfig=x(()=>pt().requirement,"getConfig"),this.clear(),this.setDirection=this.setDirection.bind(this),this.addRequirement=this.addRequirement.bind(this),this.setNewReqId=this.setNewReqId.bind(this),this.setNewReqRisk=this.setNewReqRisk.bind(this),this.setNewReqText=this.setNewReqText.bind(this),this.setNewReqVerifyMethod=this.setNewReqVerifyMethod.bind(this),this.addElement=this.addElement.bind(this),this.setNewElementType=this.setNewElementType.bind(this),this.setNewElementDocRef=this.setNewElementDocRef.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setCssStyle=this.setCssStyle.bind(this),this.setClass=this.setClass.bind(this),this.defineClass=this.defineClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}getDirection(){return this.direction}setDirection(t){this.direction=t}resetLatestRequirement(){this.latestRequirement=this.getInitialRequirement()}resetLatestElement(){this.latestElement=this.getInitialElement()}getInitialRequirement(){return{requirementId:"",text:"",risk:"",verifyMethod:"",name:"",type:"",cssStyles:[],classes:["default"]}}getInitialElement(){return{name:"",type:"",docRef:"",cssStyles:[],classes:["default"]}}addRequirement(t,r){return this.requirements.has(t)||this.requirements.set(t,{name:t,type:r,requirementId:this.latestRequirement.requirementId,text:this.latestRequirement.text,risk:this.latestRequirement.risk,verifyMethod:this.latestRequirement.verifyMethod,cssStyles:[],classes:["default"]}),this.resetLatestRequirement(),this.requirements.get(t)}getRequirements(){return this.requirements}setNewReqId(t){this.latestRequirement!==void 0&&(this.latestRequirement.requirementId=t)}setNewReqText(t){this.latestRequirement!==void 0&&(this.latestRequirement.text=t)}setNewReqRisk(t){this.latestRequirement!==void 0&&(this.latestRequirement.risk=t)}setNewReqVerifyMethod(t){this.latestRequirement!==void 0&&(this.latestRequirement.verifyMethod=t)}addElement(t){return this.elements.has(t)||(this.elements.set(t,{name:t,type:this.latestElement.type,docRef:this.latestElement.docRef,cssStyles:[],classes:["default"]}),et.info("Added new element: ",t)),this.resetLatestElement(),this.elements.get(t)}getElements(){return this.elements}setNewElementType(t){this.latestElement!==void 0&&(this.latestElement.type=t)}setNewElementDocRef(t){this.latestElement!==void 0&&(this.latestElement.docRef=t)}addRelationship(t,r,n){this.relations.push({type:t,src:r,dst:n})}getRelationships(){return this.relations}clear(){this.relations=[],this.resetLatestRequirement(),this.requirements=new Map,this.resetLatestElement(),this.elements=new Map,this.classes=new Map,dn()}setCssStyle(t,r){for(const n of t){const i=this.requirements.get(n)??this.elements.get(n);if(!r||!i)return;for(const a of r)a.includes(",")?i.cssStyles.push(...a.split(",")):i.cssStyles.push(a)}}setClass(t,r){var n;for(const i of t){const a=this.requirements.get(i)??this.elements.get(i);if(a)for(const s of r){a.classes.push(s);const o=(n=this.classes.get(s))==null?void 0:n.styles;o&&a.cssStyles.push(...o)}}}defineClass(t,r){for(const n of t){let i=this.classes.get(n);i===void 0&&(i={id:n,styles:[],textStyles:[]},this.classes.set(n,i)),r&&r.forEach(function(a){if(/color/.exec(a)){const s=a.replace("fill","bgFill");i.textStyles.push(s)}i.styles.push(a)}),this.requirements.forEach(a=>{a.classes.includes(n)&&a.cssStyles.push(...r.flatMap(s=>s.split(",")))}),this.elements.forEach(a=>{a.classes.includes(n)&&a.cssStyles.push(...r.flatMap(s=>s.split(",")))})}}getClasses(){return this.classes}getData(){var i,a,s,o;const t=pt(),r=[],n=[];for(const l of this.requirements.values()){const u=l;u.id=l.name,u.cssStyles=l.cssStyles,u.cssClasses=l.classes.join(" "),u.shape="requirementBox",u.look=t.look,r.push(u)}for(const l of this.elements.values()){const u=l;u.shape="requirementBox",u.look=t.look,u.id=l.name,u.cssStyles=l.cssStyles,u.cssClasses=l.classes.join(" "),r.push(u)}for(const l of this.relations){let u=0;const h=l.type===this.Relationships.CONTAINS,f={id:`${l.src}-${l.dst}-${u}`,start:((i=this.requirements.get(l.src))==null?void 0:i.name)??((a=this.elements.get(l.src))==null?void 0:a.name),end:((s=this.requirements.get(l.dst))==null?void 0:s.name)??((o=this.elements.get(l.dst))==null?void 0:o.name),label:`&lt;&lt;${l.type}&gt;&gt;`,classes:"relationshipLine",style:["fill:none",h?"":"stroke-dasharray: 10,7"],labelpos:"c",thickness:"normal",type:"normal",pattern:h?"normal":"dashed",arrowTypeStart:h?"requirement_contains":"",arrowTypeEnd:h?"":"requirement_arrow",look:t.look};n.push(f),u++}return{nodes:r,edges:n,other:{},config:t,direction:this.getDirection()}}},x(ch,"RequirementDB"),ch),yxt=x(e=>`

  marker {
    fill: ${e.relationColor};
    stroke: ${e.relationColor};
  }

  marker.cross {
    stroke: ${e.lineColor};
  }

  svg {
    font-family: ${e.fontFamily};
    font-size: ${e.fontSize};
  }

  .reqBox {
    fill: ${e.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${e.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${e.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${e.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${e.relationLabelColor};
  }
  .divider {
    stroke: ${e.nodeBorder};
    stroke-width: 1;
  }
  .label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .label text,span {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }
  .labelBkg {
    background-color: ${e.edgeLabelBackground};
  }

`,"getStyles"),xxt=yxt,yz={};Jm(yz,{draw:()=>bxt});var bxt=x(async function(e,t,r,n){et.info("REF0:"),et.info("Drawing requirement diagram (unified)",t);const{securityLevel:i,state:a,layout:s}=pt(),o=n.db.getData(),l=yp(t,i);o.type=n.type,o.layoutAlgorithm=by(s),o.nodeSpacing=(a==null?void 0:a.nodeSpacing)??50,o.rankSpacing=(a==null?void 0:a.rankSpacing)??50,o.markers=["requirement_contains","requirement_arrow"],o.diagramId=t,await dp(o,l);const u=8;De.insertTitle(l,"requirementDiagramTitleText",(a==null?void 0:a.titleTopMargin)??25,n.db.getDiagramTitle()),xp(l,u,"requirementDiagram",(a==null?void 0:a.useMaxWidth)??!0)},"draw"),Txt={parser:vxt,get db(){return new mxt},renderer:yz,styles:xxt};const wxt=Object.freeze(Object.defineProperty({__proto__:null,diagram:Txt},Symbol.toStringTag,{value:"Module"}));var AE=function(){var e=x(function(q,W,H,U){for(H=H||{},U=q.length;U--;H[q[U]]=W);return H},"o"),t=[1,2],r=[1,3],n=[1,4],i=[2,4],a=[1,9],s=[1,11],o=[1,13],l=[1,14],u=[1,16],h=[1,17],f=[1,18],d=[1,24],g=[1,25],p=[1,26],v=[1,27],m=[1,28],y=[1,29],b=[1,30],T=[1,31],w=[1,32],k=[1,33],S=[1,34],E=[1,35],L=[1,36],A=[1,37],R=[1,38],C=[1,39],D=[1,41],P=[1,42],_=[1,43],I=[1,44],M=[1,45],O=[1,46],N=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,54,59,60,61,62,70],B=[4,5,16,50,52,53],z=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],F=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,54,59,60,61,62,70],V=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,54,59,60,61,62,70],G=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,54,59,60,61,62,70],Y=[68,69,70],Q=[1,122],K={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,note:54,placement:55,text2:56,over:57,actor_pair:58,links:59,link:60,properties:61,details:62,spaceList:63,",":64,left_of:65,right_of:66,signaltype:67,"+":68,"-":69,ACTOR:70,SOLID_OPEN_ARROW:71,DOTTED_OPEN_ARROW:72,SOLID_ARROW:73,BIDIRECTIONAL_SOLID_ARROW:74,DOTTED_ARROW:75,BIDIRECTIONAL_DOTTED_ARROW:76,SOLID_CROSS:77,DOTTED_CROSS:78,SOLID_POINT:79,DOTTED_POINT:80,TXT:81,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",54:"note",57:"over",59:"links",60:"link",61:"properties",62:"details",64:",",65:"left_of",66:"right_of",68:"+",69:"-",70:"ACTOR",71:"SOLID_OPEN_ARROW",72:"DOTTED_OPEN_ARROW",73:"SOLID_ARROW",74:"BIDIRECTIONAL_SOLID_ARROW",75:"DOTTED_ARROW",76:"BIDIRECTIONAL_DOTTED_ARROW",77:"SOLID_CROSS",78:"DOTTED_CROSS",79:"SOLID_POINT",80:"DOTTED_POINT",81:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[63,2],[63,1],[58,3],[58,1],[55,1],[55,1],[17,5],[17,5],[17,4],[22,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[56,1]],performAction:x(function(W,H,U,X,J,j,gt){var at=j.length-1;switch(J){case 3:return X.apply(j[at]),j[at];case 4:case 9:this.$=[];break;case 5:case 10:j[at-1].push(j[at]),this.$=j[at-1];break;case 6:case 7:case 11:case 12:this.$=j[at];break;case 8:case 13:this.$=[];break;case 15:j[at].type="createParticipant",this.$=j[at];break;case 16:j[at-1].unshift({type:"boxStart",boxData:X.parseBoxData(j[at-2])}),j[at-1].push({type:"boxEnd",boxText:j[at-2]}),this.$=j[at-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(j[at-2]),sequenceIndexStep:Number(j[at-1]),sequenceVisible:!0,signalType:X.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(j[at-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:X.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:X.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:X.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:X.LINETYPE.ACTIVE_START,actor:j[at-1].actor};break;case 23:this.$={type:"activeEnd",signalType:X.LINETYPE.ACTIVE_END,actor:j[at-1].actor};break;case 29:X.setDiagramTitle(j[at].substring(6)),this.$=j[at].substring(6);break;case 30:X.setDiagramTitle(j[at].substring(7)),this.$=j[at].substring(7);break;case 31:this.$=j[at].trim(),X.setAccTitle(this.$);break;case 32:case 33:this.$=j[at].trim(),X.setAccDescription(this.$);break;case 34:j[at-1].unshift({type:"loopStart",loopText:X.parseMessage(j[at-2]),signalType:X.LINETYPE.LOOP_START}),j[at-1].push({type:"loopEnd",loopText:j[at-2],signalType:X.LINETYPE.LOOP_END}),this.$=j[at-1];break;case 35:j[at-1].unshift({type:"rectStart",color:X.parseMessage(j[at-2]),signalType:X.LINETYPE.RECT_START}),j[at-1].push({type:"rectEnd",color:X.parseMessage(j[at-2]),signalType:X.LINETYPE.RECT_END}),this.$=j[at-1];break;case 36:j[at-1].unshift({type:"optStart",optText:X.parseMessage(j[at-2]),signalType:X.LINETYPE.OPT_START}),j[at-1].push({type:"optEnd",optText:X.parseMessage(j[at-2]),signalType:X.LINETYPE.OPT_END}),this.$=j[at-1];break;case 37:j[at-1].unshift({type:"altStart",altText:X.parseMessage(j[at-2]),signalType:X.LINETYPE.ALT_START}),j[at-1].push({type:"altEnd",signalType:X.LINETYPE.ALT_END}),this.$=j[at-1];break;case 38:j[at-1].unshift({type:"parStart",parText:X.parseMessage(j[at-2]),signalType:X.LINETYPE.PAR_START}),j[at-1].push({type:"parEnd",signalType:X.LINETYPE.PAR_END}),this.$=j[at-1];break;case 39:j[at-1].unshift({type:"parStart",parText:X.parseMessage(j[at-2]),signalType:X.LINETYPE.PAR_OVER_START}),j[at-1].push({type:"parEnd",signalType:X.LINETYPE.PAR_END}),this.$=j[at-1];break;case 40:j[at-1].unshift({type:"criticalStart",criticalText:X.parseMessage(j[at-2]),signalType:X.LINETYPE.CRITICAL_START}),j[at-1].push({type:"criticalEnd",signalType:X.LINETYPE.CRITICAL_END}),this.$=j[at-1];break;case 41:j[at-1].unshift({type:"breakStart",breakText:X.parseMessage(j[at-2]),signalType:X.LINETYPE.BREAK_START}),j[at-1].push({type:"breakEnd",optText:X.parseMessage(j[at-2]),signalType:X.LINETYPE.BREAK_END}),this.$=j[at-1];break;case 43:this.$=j[at-3].concat([{type:"option",optionText:X.parseMessage(j[at-1]),signalType:X.LINETYPE.CRITICAL_OPTION},j[at]]);break;case 45:this.$=j[at-3].concat([{type:"and",parText:X.parseMessage(j[at-1]),signalType:X.LINETYPE.PAR_AND},j[at]]);break;case 47:this.$=j[at-3].concat([{type:"else",altText:X.parseMessage(j[at-1]),signalType:X.LINETYPE.ALT_ELSE},j[at]]);break;case 48:j[at-3].draw="participant",j[at-3].type="addParticipant",j[at-3].description=X.parseMessage(j[at-1]),this.$=j[at-3];break;case 49:j[at-1].draw="participant",j[at-1].type="addParticipant",this.$=j[at-1];break;case 50:j[at-3].draw="actor",j[at-3].type="addParticipant",j[at-3].description=X.parseMessage(j[at-1]),this.$=j[at-3];break;case 51:j[at-1].draw="actor",j[at-1].type="addParticipant",this.$=j[at-1];break;case 52:j[at-1].type="destroyParticipant",this.$=j[at-1];break;case 53:this.$=[j[at-1],{type:"addNote",placement:j[at-2],actor:j[at-1].actor,text:j[at]}];break;case 54:j[at-2]=[].concat(j[at-1],j[at-1]).slice(0,2),j[at-2][0]=j[at-2][0].actor,j[at-2][1]=j[at-2][1].actor,this.$=[j[at-1],{type:"addNote",placement:X.PLACEMENT.OVER,actor:j[at-2].slice(0,2),text:j[at]}];break;case 55:this.$=[j[at-1],{type:"addLinks",actor:j[at-1].actor,text:j[at]}];break;case 56:this.$=[j[at-1],{type:"addALink",actor:j[at-1].actor,text:j[at]}];break;case 57:this.$=[j[at-1],{type:"addProperties",actor:j[at-1].actor,text:j[at]}];break;case 58:this.$=[j[at-1],{type:"addDetails",actor:j[at-1].actor,text:j[at]}];break;case 61:this.$=[j[at-2],j[at]];break;case 62:this.$=j[at];break;case 63:this.$=X.PLACEMENT.LEFTOF;break;case 64:this.$=X.PLACEMENT.RIGHTOF;break;case 65:this.$=[j[at-4],j[at-1],{type:"addMessage",from:j[at-4].actor,to:j[at-1].actor,signalType:j[at-3],msg:j[at],activate:!0},{type:"activeStart",signalType:X.LINETYPE.ACTIVE_START,actor:j[at-1].actor}];break;case 66:this.$=[j[at-4],j[at-1],{type:"addMessage",from:j[at-4].actor,to:j[at-1].actor,signalType:j[at-3],msg:j[at]},{type:"activeEnd",signalType:X.LINETYPE.ACTIVE_END,actor:j[at-4].actor}];break;case 67:this.$=[j[at-3],j[at-1],{type:"addMessage",from:j[at-3].actor,to:j[at-1].actor,signalType:j[at-2],msg:j[at]}];break;case 68:this.$={type:"addParticipant",actor:j[at]};break;case 69:this.$=X.LINETYPE.SOLID_OPEN;break;case 70:this.$=X.LINETYPE.DOTTED_OPEN;break;case 71:this.$=X.LINETYPE.SOLID;break;case 72:this.$=X.LINETYPE.BIDIRECTIONAL_SOLID;break;case 73:this.$=X.LINETYPE.DOTTED;break;case 74:this.$=X.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 75:this.$=X.LINETYPE.SOLID_CROSS;break;case 76:this.$=X.LINETYPE.DOTTED_CROSS;break;case 77:this.$=X.LINETYPE.SOLID_POINT;break;case 78:this.$=X.LINETYPE.DOTTED_POINT;break;case 79:this.$=X.parseMessage(j[at].trim().substring(1));break}},"anonymous"),table:[{3:1,4:t,5:r,6:n},{1:[3]},{3:5,4:t,5:r,6:n},{3:6,4:t,5:r,6:n},e([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],i,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:a,5:s,8:8,9:10,12:12,13:o,14:l,17:15,18:u,21:h,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:p,33:v,35:m,36:y,37:b,38:T,39:w,41:k,43:S,44:E,46:L,50:A,52:R,53:C,54:D,59:P,60:_,61:I,62:M,70:O},e(N,[2,5]),{9:47,12:12,13:o,14:l,17:15,18:u,21:h,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:p,33:v,35:m,36:y,37:b,38:T,39:w,41:k,43:S,44:E,46:L,50:A,52:R,53:C,54:D,59:P,60:_,61:I,62:M,70:O},e(N,[2,7]),e(N,[2,8]),e(N,[2,14]),{12:48,50:A,52:R,53:C},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,70:O},{22:55,70:O},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},e(N,[2,29]),e(N,[2,30]),{32:[1,61]},{34:[1,62]},e(N,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,70:O},{22:72,70:O},{22:73,70:O},{67:74,71:[1,75],72:[1,76],73:[1,77],74:[1,78],75:[1,79],76:[1,80],77:[1,81],78:[1,82],79:[1,83],80:[1,84]},{55:85,57:[1,86],65:[1,87],66:[1,88]},{22:89,70:O},{22:90,70:O},{22:91,70:O},{22:92,70:O},e([5,51,64,71,72,73,74,75,76,77,78,79,80,81],[2,68]),e(N,[2,6]),e(N,[2,15]),e(B,[2,9],{10:93}),e(N,[2,17]),{5:[1,95],19:[1,94]},{5:[1,96]},e(N,[2,21]),{5:[1,97]},{5:[1,98]},e(N,[2,24]),e(N,[2,25]),e(N,[2,26]),e(N,[2,27]),e(N,[2,28]),e(N,[2,31]),e(N,[2,32]),e(z,i,{7:99}),e(z,i,{7:100}),e(z,i,{7:101}),e(F,i,{40:102,7:103}),e(V,i,{42:104,7:105}),e(V,i,{7:105,42:106}),e(G,i,{45:107,7:108}),e(z,i,{7:109}),{5:[1,111],51:[1,110]},{5:[1,113],51:[1,112]},{5:[1,114]},{22:117,68:[1,115],69:[1,116],70:O},e(Y,[2,69]),e(Y,[2,70]),e(Y,[2,71]),e(Y,[2,72]),e(Y,[2,73]),e(Y,[2,74]),e(Y,[2,75]),e(Y,[2,76]),e(Y,[2,77]),e(Y,[2,78]),{22:118,70:O},{22:120,58:119,70:O},{70:[2,63]},{70:[2,64]},{56:121,81:Q},{56:123,81:Q},{56:124,81:Q},{56:125,81:Q},{4:[1,128],5:[1,130],11:127,12:129,16:[1,126],50:A,52:R,53:C},{5:[1,131]},e(N,[2,19]),e(N,[2,20]),e(N,[2,22]),e(N,[2,23]),{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,132],17:15,18:u,21:h,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:p,33:v,35:m,36:y,37:b,38:T,39:w,41:k,43:S,44:E,46:L,50:A,52:R,53:C,54:D,59:P,60:_,61:I,62:M,70:O},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,133],17:15,18:u,21:h,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:p,33:v,35:m,36:y,37:b,38:T,39:w,41:k,43:S,44:E,46:L,50:A,52:R,53:C,54:D,59:P,60:_,61:I,62:M,70:O},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,134],17:15,18:u,21:h,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:p,33:v,35:m,36:y,37:b,38:T,39:w,41:k,43:S,44:E,46:L,50:A,52:R,53:C,54:D,59:P,60:_,61:I,62:M,70:O},{16:[1,135]},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[2,46],17:15,18:u,21:h,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:p,33:v,35:m,36:y,37:b,38:T,39:w,41:k,43:S,44:E,46:L,49:[1,136],50:A,52:R,53:C,54:D,59:P,60:_,61:I,62:M,70:O},{16:[1,137]},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[2,44],17:15,18:u,21:h,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:p,33:v,35:m,36:y,37:b,38:T,39:w,41:k,43:S,44:E,46:L,48:[1,138],50:A,52:R,53:C,54:D,59:P,60:_,61:I,62:M,70:O},{16:[1,139]},{16:[1,140]},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[2,42],17:15,18:u,21:h,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:p,33:v,35:m,36:y,37:b,38:T,39:w,41:k,43:S,44:E,46:L,47:[1,141],50:A,52:R,53:C,54:D,59:P,60:_,61:I,62:M,70:O},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,142],17:15,18:u,21:h,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:p,33:v,35:m,36:y,37:b,38:T,39:w,41:k,43:S,44:E,46:L,50:A,52:R,53:C,54:D,59:P,60:_,61:I,62:M,70:O},{15:[1,143]},e(N,[2,49]),{15:[1,144]},e(N,[2,51]),e(N,[2,52]),{22:145,70:O},{22:146,70:O},{56:147,81:Q},{56:148,81:Q},{56:149,81:Q},{64:[1,150],81:[2,62]},{5:[2,55]},{5:[2,79]},{5:[2,56]},{5:[2,57]},{5:[2,58]},e(N,[2,16]),e(B,[2,10]),{12:151,50:A,52:R,53:C},e(B,[2,12]),e(B,[2,13]),e(N,[2,18]),e(N,[2,34]),e(N,[2,35]),e(N,[2,36]),e(N,[2,37]),{15:[1,152]},e(N,[2,38]),{15:[1,153]},e(N,[2,39]),e(N,[2,40]),{15:[1,154]},e(N,[2,41]),{5:[1,155]},{5:[1,156]},{56:157,81:Q},{56:158,81:Q},{5:[2,67]},{5:[2,53]},{5:[2,54]},{22:159,70:O},e(B,[2,11]),e(F,i,{7:103,40:160}),e(V,i,{7:105,42:161}),e(G,i,{7:108,45:162}),e(N,[2,48]),e(N,[2,50]),{5:[2,65]},{5:[2,66]},{81:[2,61]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],87:[2,63],88:[2,64],121:[2,55],122:[2,79],123:[2,56],124:[2,57],125:[2,58],147:[2,67],148:[2,53],149:[2,54],157:[2,65],158:[2,66],159:[2,61],160:[2,47],161:[2,45],162:[2,43]},parseError:x(function(W,H){if(H.recoverable)this.trace(W);else{var U=new Error(W);throw U.hash=H,U}},"parseError"),parse:x(function(W){var H=this,U=[0],X=[],J=[null],j=[],gt=this.table,at="",tt=0,kt=0,ft=2,Dt=1,Ot=j.slice.call(arguments,1),Rt=Object.create(this.lexer),Tt={yy:{}};for(var At in this.yy)Object.prototype.hasOwnProperty.call(this.yy,At)&&(Tt.yy[At]=this.yy[At]);Rt.setInput(W,Tt.yy),Tt.yy.lexer=Rt,Tt.yy.parser=this,typeof Rt.yylloc>"u"&&(Rt.yylloc={});var bt=Rt.yylloc;j.push(bt);var wt=Rt.options&&Rt.options.ranges;typeof Tt.yy.parseError=="function"?this.parseError=Tt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Nt(mt){U.length=U.length-2*mt,J.length=J.length-mt,j.length=j.length-mt}x(Nt,"popStack");function ht(){var mt;return mt=X.pop()||Rt.lex()||Dt,typeof mt!="number"&&(mt instanceof Array&&(X=mt,mt=X.pop()),mt=H.symbols_[mt]||mt),mt}x(ht,"lex");for(var _t,Z,st,$,nt={},rt,ct,ot,vt;;){if(Z=U[U.length-1],this.defaultActions[Z]?st=this.defaultActions[Z]:((_t===null||typeof _t>"u")&&(_t=ht()),st=gt[Z]&&gt[Z][_t]),typeof st>"u"||!st.length||!st[0]){var yt="";vt=[];for(rt in gt[Z])this.terminals_[rt]&&rt>ft&&vt.push("'"+this.terminals_[rt]+"'");Rt.showPosition?yt="Parse error on line "+(tt+1)+`:
`+Rt.showPosition()+`
Expecting `+vt.join(", ")+", got '"+(this.terminals_[_t]||_t)+"'":yt="Parse error on line "+(tt+1)+": Unexpected "+(_t==Dt?"end of input":"'"+(this.terminals_[_t]||_t)+"'"),this.parseError(yt,{text:Rt.match,token:this.terminals_[_t]||_t,line:Rt.yylineno,loc:bt,expected:vt})}if(st[0]instanceof Array&&st.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Z+", token: "+_t);switch(st[0]){case 1:U.push(_t),J.push(Rt.yytext),j.push(Rt.yylloc),U.push(st[1]),_t=null,kt=Rt.yyleng,at=Rt.yytext,tt=Rt.yylineno,bt=Rt.yylloc;break;case 2:if(ct=this.productions_[st[1]][1],nt.$=J[J.length-ct],nt._$={first_line:j[j.length-(ct||1)].first_line,last_line:j[j.length-1].last_line,first_column:j[j.length-(ct||1)].first_column,last_column:j[j.length-1].last_column},wt&&(nt._$.range=[j[j.length-(ct||1)].range[0],j[j.length-1].range[1]]),$=this.performAction.apply(nt,[at,kt,tt,Tt.yy,st[1],J,j].concat(Ot)),typeof $<"u")return $;ct&&(U=U.slice(0,-1*ct*2),J=J.slice(0,-1*ct),j=j.slice(0,-1*ct)),U.push(this.productions_[st[1]][0]),J.push(nt.$),j.push(nt._$),ot=gt[U[U.length-2]][U[U.length-1]],U.push(ot);break;case 3:return!0}}return!0},"parse")},it=function(){var q={EOF:1,parseError:x(function(H,U){if(this.yy.parser)this.yy.parser.parseError(H,U);else throw new Error(H)},"parseError"),setInput:x(function(W,H){return this.yy=H||this.yy||{},this._input=W,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var W=this._input[0];this.yytext+=W,this.yyleng++,this.offset++,this.match+=W,this.matched+=W;var H=W.match(/(?:\r\n?|\n).*/g);return H?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),W},"input"),unput:x(function(W){var H=W.length,U=W.split(/(?:\r\n?|\n)/g);this._input=W+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-H),this.offset-=H;var X=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),U.length-1&&(this.yylineno-=U.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:U?(U.length===X.length?this.yylloc.first_column:0)+X[X.length-U.length].length-U[0].length:this.yylloc.first_column-H},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-H]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(W){this.unput(this.match.slice(W))},"less"),pastInput:x(function(){var W=this.matched.substr(0,this.matched.length-this.match.length);return(W.length>20?"...":"")+W.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var W=this.match;return W.length<20&&(W+=this._input.substr(0,20-W.length)),(W.substr(0,20)+(W.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var W=this.pastInput(),H=new Array(W.length+1).join("-");return W+this.upcomingInput()+`
`+H+"^"},"showPosition"),test_match:x(function(W,H){var U,X,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),X=W[0].match(/(?:\r\n?|\n).*/g),X&&(this.yylineno+=X.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:X?X[X.length-1].length-X[X.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+W[0].length},this.yytext+=W[0],this.match+=W[0],this.matches=W,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(W[0].length),this.matched+=W[0],U=this.performAction.call(this,this.yy,this,H,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),U)return U;if(this._backtrack){for(var j in J)this[j]=J[j];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var W,H,U,X;this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),j=0;j<J.length;j++)if(U=this._input.match(this.rules[J[j]]),U&&(!H||U[0].length>H[0].length)){if(H=U,X=j,this.options.backtrack_lexer){if(W=this.test_match(U,J[j]),W!==!1)return W;if(this._backtrack){H=!1;continue}else return!1}else if(!this.options.flex)break}return H?(W=this.test_match(H,J[X]),W!==!1?W:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var H=this.next();return H||this.lex()},"lex"),begin:x(function(H){this.conditionStack.push(H)},"begin"),popState:x(function(){var H=this.conditionStack.length-1;return H>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(H){return H=this.conditionStack.length-1-Math.abs(H||0),H>=0?this.conditionStack[H]:"INITIAL"},"topState"),pushState:x(function(H){this.begin(H)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(H,U,X,J){switch(X){case 0:return 5;case 1:break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:return 19;case 7:return this.begin("LINE"),14;case 8:return this.begin("ID"),50;case 9:return this.begin("ID"),52;case 10:return 13;case 11:return this.begin("ID"),53;case 12:return U.yytext=U.yytext.trim(),this.begin("ALIAS"),70;case 13:return this.popState(),this.popState(),this.begin("LINE"),51;case 14:return this.popState(),this.popState(),5;case 15:return this.begin("LINE"),36;case 16:return this.begin("LINE"),37;case 17:return this.begin("LINE"),38;case 18:return this.begin("LINE"),39;case 19:return this.begin("LINE"),49;case 20:return this.begin("LINE"),41;case 21:return this.begin("LINE"),43;case 22:return this.begin("LINE"),48;case 23:return this.begin("LINE"),44;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),46;case 26:return this.popState(),15;case 27:return 16;case 28:return 65;case 29:return 66;case 30:return 59;case 31:return 60;case 32:return 61;case 33:return 62;case 34:return 57;case 35:return 54;case 36:return this.begin("ID"),21;case 37:return this.begin("ID"),23;case 38:return 29;case 39:return 30;case 40:return this.begin("acc_title"),31;case 41:return this.popState(),"acc_title_value";case 42:return this.begin("acc_descr"),33;case 43:return this.popState(),"acc_descr_value";case 44:this.begin("acc_descr_multiline");break;case 45:this.popState();break;case 46:return"acc_descr_multiline_value";case 47:return 6;case 48:return 18;case 49:return 20;case 50:return 64;case 51:return 5;case 52:return U.yytext=U.yytext.trim(),70;case 53:return 73;case 54:return 74;case 55:return 75;case 56:return 76;case 57:return 71;case 58:return 72;case 59:return 77;case 60:return 78;case 61:return 79;case 62:return 80;case 63:return 81;case 64:return 68;case 65:return 69;case 66:return 5;case 67:return"INVALID"}},"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^\<->\->:\n,;]+?([\-]*[^\<->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\<->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\<->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[45,46],inclusive:!1},acc_descr:{rules:[43],inclusive:!1},acc_title:{rules:[41],inclusive:!1},ID:{rules:[2,3,12],inclusive:!1},ALIAS:{rules:[2,3,13,14],inclusive:!1},LINE:{rules:[2,3,26],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,42,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],inclusive:!0}}};return q}();K.lexer=it;function ut(){this.yy={}}return x(ut,"Parser"),ut.prototype=K,K.Parser=ut,new ut}();AE.parser=AE;var Ext=AE,kxt={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},Cxt={FILLED:0,OPEN:1},Sxt={LEFTOF:0,RIGHTOF:1,OVER:2},uh,_xt=(uh=class{constructor(){this.state=new oS(()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),this.setAccTitle=cn,this.setAccDescription=En,this.setDiagramTitle=Fn,this.getAccTitle=wn,this.getAccDescription=kn,this.getDiagramTitle=gn,this.apply=this.apply.bind(this),this.parseBoxData=this.parseBoxData.bind(this),this.parseMessage=this.parseMessage.bind(this),this.clear(),this.setWrap(pt().wrap),this.LINETYPE=kxt,this.ARROWTYPE=Cxt,this.PLACEMENT=Sxt}addBox(t){this.state.records.boxes.push({name:t.text,wrap:t.wrap??this.autoWrap(),fill:t.color,actorKeys:[]}),this.state.records.currentBox=this.state.records.boxes.slice(-1)[0]}addActor(t,r,n,i){let a=this.state.records.currentBox;const s=this.state.records.actors.get(t);if(s){if(this.state.records.currentBox&&s.box&&this.state.records.currentBox!==s.box)throw new Error(`A same participant should only be defined in one Box: ${s.name} can't be in '${s.box.name}' and in '${this.state.records.currentBox.name}' at the same time.`);if(a=s.box?s.box:this.state.records.currentBox,s.box=a,s&&r===s.name&&n==null)return}if((n==null?void 0:n.text)==null&&(n={text:r,type:i}),(i==null||n.text==null)&&(n={text:r,type:i}),this.state.records.actors.set(t,{box:a,name:r,description:n.text,wrap:n.wrap??this.autoWrap(),prevActor:this.state.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:i??"participant"}),this.state.records.prevActor){const o=this.state.records.actors.get(this.state.records.prevActor);o&&(o.nextActor=t)}this.state.records.currentBox&&this.state.records.currentBox.actorKeys.push(t),this.state.records.prevActor=t}activationCount(t){let r,n=0;if(!t)return 0;for(r=0;r<this.state.records.messages.length;r++)this.state.records.messages[r].type===this.LINETYPE.ACTIVE_START&&this.state.records.messages[r].from===t&&n++,this.state.records.messages[r].type===this.LINETYPE.ACTIVE_END&&this.state.records.messages[r].from===t&&n--;return n}addMessage(t,r,n,i){this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:t,to:r,message:n.text,wrap:n.wrap??this.autoWrap(),answer:i})}addSignal(t,r,n,i,a=!1){if(i===this.LINETYPE.ACTIVE_END&&this.activationCount(t??"")<1){const o=new Error("Trying to inactivate an inactive participant ("+t+")");throw o.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},o}return this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:t,to:r,message:(n==null?void 0:n.text)??"",wrap:(n==null?void 0:n.wrap)??this.autoWrap(),type:i,activate:a}),!0}hasAtLeastOneBox(){return this.state.records.boxes.length>0}hasAtLeastOneBoxWithTitle(){return this.state.records.boxes.some(t=>t.name)}getMessages(){return this.state.records.messages}getBoxes(){return this.state.records.boxes}getActors(){return this.state.records.actors}getCreatedActors(){return this.state.records.createdActors}getDestroyedActors(){return this.state.records.destroyedActors}getActor(t){return this.state.records.actors.get(t)}getActorKeys(){return[...this.state.records.actors.keys()]}enableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!0}disableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!1}showSequenceNumbers(){return this.state.records.sequenceNumbersEnabled}setWrap(t){this.state.records.wrapEnabled=t}extractWrap(t){if(t===void 0)return{};t=t.trim();const r=/^:?wrap:/.exec(t)!==null?!0:/^:?nowrap:/.exec(t)!==null?!1:void 0;return{cleanedText:(r===void 0?t:t.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:r}}autoWrap(){var t;return this.state.records.wrapEnabled!==void 0?this.state.records.wrapEnabled:((t=pt().sequence)==null?void 0:t.wrap)??!1}clear(){this.state.reset(),dn()}parseMessage(t){const r=t.trim(),{wrap:n,cleanedText:i}=this.extractWrap(r),a={text:i,wrap:n};return et.debug(`parseMessage: ${JSON.stringify(a)}`),a}parseBoxData(t){const r=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(t);let n=r!=null&&r[1]?r[1].trim():"transparent",i=r!=null&&r[2]?r[2].trim():void 0;if(window!=null&&window.CSS)window.CSS.supports("color",n)||(n="transparent",i=t.trim());else{const o=new Option().style;o.color=n,o.color!==n&&(n="transparent",i=t.trim())}const{wrap:a,cleanedText:s}=this.extractWrap(i);return{text:s?xr(s,pt()):void 0,color:n,wrap:a}}addNote(t,r,n){const i={actor:t,placement:r,message:n.text,wrap:n.wrap??this.autoWrap()},a=[].concat(t,t);this.state.records.notes.push(i),this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:a[0],to:a[1],message:n.text,wrap:n.wrap??this.autoWrap(),type:this.LINETYPE.NOTE,placement:r})}addLinks(t,r){const n=this.getActor(t);try{let i=xr(r.text,pt());i=i.replace(/&equals;/g,"="),i=i.replace(/&amp;/g,"&");const a=JSON.parse(i);this.insertLinks(n,a)}catch(i){et.error("error while parsing actor link text",i)}}addALink(t,r){const n=this.getActor(t);try{const i={};let a=xr(r.text,pt());const s=a.indexOf("@");a=a.replace(/&equals;/g,"="),a=a.replace(/&amp;/g,"&");const o=a.slice(0,s-1).trim(),l=a.slice(s+1).trim();i[o]=l,this.insertLinks(n,i)}catch(i){et.error("error while parsing actor link text",i)}}insertLinks(t,r){if(t.links==null)t.links=r;else for(const n in r)t.links[n]=r[n]}addProperties(t,r){const n=this.getActor(t);try{const i=xr(r.text,pt()),a=JSON.parse(i);this.insertProperties(n,a)}catch(i){et.error("error while parsing actor properties text",i)}}insertProperties(t,r){if(t.properties==null)t.properties=r;else for(const n in r)t.properties[n]=r[n]}boxEnd(){this.state.records.currentBox=void 0}addDetails(t,r){const n=this.getActor(t),i=document.getElementById(r.text);try{const a=i.innerHTML,s=JSON.parse(a);s.properties&&this.insertProperties(n,s.properties),s.links&&this.insertLinks(n,s.links)}catch(a){et.error("error while parsing actor details text",a)}}getActorProperty(t,r){if((t==null?void 0:t.properties)!==void 0)return t.properties[r]}apply(t){if(Array.isArray(t))t.forEach(r=>{this.apply(r)});else switch(t.type){case"sequenceIndex":this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":this.addActor(t.actor,t.actor,t.description,t.draw);break;case"createParticipant":if(this.state.records.actors.has(t.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");this.state.records.lastCreated=t.actor,this.addActor(t.actor,t.actor,t.description,t.draw),this.state.records.createdActors.set(t.actor,this.state.records.messages.length);break;case"destroyParticipant":this.state.records.lastDestroyed=t.actor,this.state.records.destroyedActors.set(t.actor,this.state.records.messages.length);break;case"activeStart":this.addSignal(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":this.addSignal(t.actor,void 0,void 0,t.signalType);break;case"addNote":this.addNote(t.actor,t.placement,t.text);break;case"addLinks":this.addLinks(t.actor,t.text);break;case"addALink":this.addALink(t.actor,t.text);break;case"addProperties":this.addProperties(t.actor,t.text);break;case"addDetails":this.addDetails(t.actor,t.text);break;case"addMessage":if(this.state.records.lastCreated){if(t.to!==this.state.records.lastCreated)throw new Error("The created participant "+this.state.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");this.state.records.lastCreated=void 0}else if(this.state.records.lastDestroyed){if(t.to!==this.state.records.lastDestroyed&&t.from!==this.state.records.lastDestroyed)throw new Error("The destroyed participant "+this.state.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");this.state.records.lastDestroyed=void 0}this.addSignal(t.from,t.to,t.msg,t.signalType,t.activate);break;case"boxStart":this.addBox(t.boxData);break;case"boxEnd":this.boxEnd();break;case"loopStart":this.addSignal(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"rectStart":this.addSignal(void 0,void 0,t.color,t.signalType);break;case"rectEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"optStart":this.addSignal(void 0,void 0,t.optText,t.signalType);break;case"optEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"altStart":this.addSignal(void 0,void 0,t.altText,t.signalType);break;case"else":this.addSignal(void 0,void 0,t.altText,t.signalType);break;case"altEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":cn(t.text);break;case"parStart":this.addSignal(void 0,void 0,t.parText,t.signalType);break;case"and":this.addSignal(void 0,void 0,t.parText,t.signalType);break;case"parEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"criticalStart":this.addSignal(void 0,void 0,t.criticalText,t.signalType);break;case"option":this.addSignal(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"breakStart":this.addSignal(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break}}getConfig(){return pt().sequence}},x(uh,"SequenceDB"),uh),Axt=x(e=>`.actor {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }

  text.actor > tspan {
    fill: ${e.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${e.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${e.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${e.signalColor};
  }

  #arrowhead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .sequenceNumber {
    fill: ${e.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${e.signalColor};
  }

  #crosshead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .messageText {
    fill: ${e.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${e.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${e.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${e.noteBorderColor};
    fill: ${e.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${e.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation1 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation2 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${e.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
    stroke-width: 2px;
  }
`,"getStyles"),Lxt=Axt,Bl=18*2,xz="actor-top",bz="actor-bottom",Rxt="actor-box",VL="actor-man",JS=x(function(e,t){return Ny(e,t)},"drawRect"),Ixt=x(function(e,t,r,n,i){if(t.links===void 0||t.links===null||Object.keys(t.links).length===0)return{height:0,width:0};const a=t.links,s=t.actorCnt,o=t.rectData;var l="none";i&&(l="block !important");const u=e.append("g");u.attr("id","actor"+s+"_popup"),u.attr("class","actorPopupMenu"),u.attr("display",l);var h="";o.class!==void 0&&(h=" "+o.class);let f=o.width>r?o.width:r;const d=u.append("rect");if(d.attr("class","actorPopupMenuPanel"+h),d.attr("x",o.x),d.attr("y",o.height),d.attr("fill",o.fill),d.attr("stroke",o.stroke),d.attr("width",f),d.attr("height",o.height),d.attr("rx",o.rx),d.attr("ry",o.ry),a!=null){var g=20;for(let m in a){var p=u.append("a"),v=mc.sanitizeUrl(a[m]);p.attr("xlink:href",v),p.attr("target","_blank"),Xxt(n)(m,p,o.x+10,o.height+g,f,20,{class:"actor"},n),g+=30}}return d.attr("height",g),{height:o.height+g,width:f}},"drawPopup"),Nxt=x(function(e){return"var pu = document.getElementById('"+e+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},"popupMenuToggle"),xm=x(async function(e,t,r=null){let n=e.append("foreignObject");const i=await ep(t.text,gr()),s=n.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(i).node().getBoundingClientRect();if(n.attr("height",Math.round(s.height)).attr("width",Math.round(s.width)),t.class==="noteText"){const o=e.node().firstChild;o.setAttribute("height",s.height+2*t.textMargin);const l=o.getBBox();n.attr("x",Math.round(l.x+l.width/2-s.width/2)).attr("y",Math.round(l.y+l.height/2-s.height/2))}else if(r){let{startx:o,stopx:l,starty:u}=r;if(o>l){const h=o;o=l,l=h}n.attr("x",Math.round(o+Math.abs(o-l)/2-s.width/2)),t.class==="loopText"?n.attr("y",Math.round(u)):n.attr("y",Math.round(u-s.height))}return[n]},"drawKatex"),$h=x(function(e,t){let r=0,n=0;const i=t.text.split(Xt.lineBreakRegex),[a,s]=tl(t.fontSize);let o=[],l=0,u=x(()=>t.y,"yfunc");if(t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0)switch(t.valign){case"top":case"start":u=x(()=>Math.round(t.y+t.textMargin),"yfunc");break;case"middle":case"center":u=x(()=>Math.round(t.y+(r+n+t.textMargin)/2),"yfunc");break;case"bottom":case"end":u=x(()=>Math.round(t.y+(r+n+2*t.textMargin)-t.textMargin),"yfunc");break}if(t.anchor!==void 0&&t.textMargin!==void 0&&t.width!==void 0)switch(t.anchor){case"left":case"start":t.x=Math.round(t.x+t.textMargin),t.anchor="start",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"middle":case"center":t.x=Math.round(t.x+t.width/2),t.anchor="middle",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"right":case"end":t.x=Math.round(t.x+t.width-t.textMargin),t.anchor="end",t.dominantBaseline="middle",t.alignmentBaseline="middle";break}for(let[h,f]of i.entries()){t.textMargin!==void 0&&t.textMargin===0&&a!==void 0&&(l=h*a);const d=e.append("text");d.attr("x",t.x),d.attr("y",u()),t.anchor!==void 0&&d.attr("text-anchor",t.anchor).attr("dominant-baseline",t.dominantBaseline).attr("alignment-baseline",t.alignmentBaseline),t.fontFamily!==void 0&&d.style("font-family",t.fontFamily),s!==void 0&&d.style("font-size",s),t.fontWeight!==void 0&&d.style("font-weight",t.fontWeight),t.fill!==void 0&&d.attr("fill",t.fill),t.class!==void 0&&d.attr("class",t.class),t.dy!==void 0?d.attr("dy",t.dy):l!==0&&d.attr("dy",l);const g=f||CP;if(t.tspan){const p=d.append("tspan");p.attr("x",t.x),t.fill!==void 0&&p.attr("fill",t.fill),p.text(g)}else d.text(g);t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0&&(n+=(d._groups||d)[0][0].getBBox().height,r=n),o.push(d)}return o},"drawText"),Tz=x(function(e,t){function r(i,a,s,o,l){return i+","+a+" "+(i+s)+","+a+" "+(i+s)+","+(a+o-l)+" "+(i+s-l*1.2)+","+(a+o)+" "+i+","+(a+o)}x(r,"genPoints");const n=e.append("polygon");return n.attr("points",r(t.x,t.y,t.width,t.height,7)),n.attr("class","labelBox"),t.y=t.y+t.height/2,$h(e,t),n},"drawLabel"),es=-1,wz=x((e,t,r,n)=>{e.select&&r.forEach(i=>{const a=t.get(i),s=e.select("#actor"+a.actorCnt);!n.mirrorActors&&a.stopy?s.attr("y2",a.stopy+a.height/2):n.mirrorActors&&s.attr("y2",a.stopy)})},"fixLifeLineHeights"),Dxt=x(function(e,t,r,n){var g,p;const i=n?t.stopy:t.starty,a=t.x+t.width/2,s=i+t.height,o=e.append("g").lower();var l=o;n||(es++,Object.keys(t.links||{}).length&&!r.forceMenus&&l.attr("onclick",Nxt(`actor${es}_popup`)).attr("cursor","pointer"),l.append("line").attr("id","actor"+es).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),l=o.append("g"),t.actorCnt=es,t.links!=null&&l.attr("id","root-"+es));const u=kc();var h="actor";(g=t.properties)!=null&&g.class?h=t.properties.class:u.fill="#eaeaea",n?h+=` ${bz}`:h+=` ${xz}`,u.x=t.x,u.y=i,u.width=t.width,u.height=t.height,u.class=h,u.rx=3,u.ry=3,u.name=t.name;const f=JS(l,u);if(t.rectData=u,(p=t.properties)!=null&&p.icon){const v=t.properties.icon.trim();v.charAt(0)==="@"?rft(l,u.x+u.width-20,u.y+10,v.substr(1)):eft(l,u.x+u.width-20,u.y+10,v)}t_(r,Kn(t.description))(t.description,l,u.x,u.y,u.width,u.height,{class:`actor ${Rxt}`},r);let d=t.height;if(f.node){const v=f.node().getBBox();t.height=v.height,d=v.height}return d},"drawActorTypeParticipant"),Mxt=x(function(e,t,r,n){const i=n?t.stopy:t.starty,a=t.x+t.width/2,s=i+80,o=e.append("g").lower();n||(es++,o.append("line").attr("id","actor"+es).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),t.actorCnt=es);const l=e.append("g");let u=VL;n?u+=` ${bz}`:u+=` ${xz}`,l.attr("class",u),l.attr("name",t.name);const h=kc();h.x=t.x,h.y=i,h.fill="#eaeaea",h.width=t.width,h.height=t.height,h.class="actor",h.rx=3,h.ry=3,l.append("line").attr("id","actor-man-torso"+es).attr("x1",a).attr("y1",i+25).attr("x2",a).attr("y2",i+45),l.append("line").attr("id","actor-man-arms"+es).attr("x1",a-Bl/2).attr("y1",i+33).attr("x2",a+Bl/2).attr("y2",i+33),l.append("line").attr("x1",a-Bl/2).attr("y1",i+60).attr("x2",a).attr("y2",i+45),l.append("line").attr("x1",a).attr("y1",i+45).attr("x2",a+Bl/2-2).attr("y2",i+60);const f=l.append("circle");f.attr("cx",t.x+t.width/2),f.attr("cy",i+10),f.attr("r",15),f.attr("width",t.width),f.attr("height",t.height);const d=l.node().getBBox();return t.height=d.height,t_(r,Kn(t.description))(t.description,l,h.x,h.y+35,h.width,h.height,{class:`actor ${VL}`},r),t.height},"drawActorTypeActor"),Oxt=x(async function(e,t,r,n){switch(t.type){case"actor":return await Mxt(e,t,r,n);case"participant":return await Dxt(e,t,r,n)}},"drawActor"),Pxt=x(function(e,t,r){const i=e.append("g");Ez(i,t),t.name&&t_(r)(t.name,i,t.x,t.y+(t.textMaxHeight||0)/2,t.width,0,{class:"text"},r),i.lower()},"drawBox"),Bxt=x(function(e){return e.append("g")},"anchorElement"),Fxt=x(function(e,t,r,n,i){const a=kc(),s=t.anchored;a.x=t.startx,a.y=t.starty,a.class="activation"+i%3,a.width=t.stopx-t.startx,a.height=r-t.starty,JS(s,a)},"drawActivation"),$xt=x(async function(e,t,r,n){const{boxMargin:i,boxTextMargin:a,labelBoxHeight:s,labelBoxWidth:o,messageFontFamily:l,messageFontSize:u,messageFontWeight:h}=n,f=e.append("g"),d=x(function(v,m,y,b){return f.append("line").attr("x1",v).attr("y1",m).attr("x2",y).attr("y2",b).attr("class","loopLine")},"drawLoopLine");d(t.startx,t.starty,t.stopx,t.starty),d(t.stopx,t.starty,t.stopx,t.stopy),d(t.startx,t.stopy,t.stopx,t.stopy),d(t.startx,t.starty,t.startx,t.stopy),t.sections!==void 0&&t.sections.forEach(function(v){d(t.startx,v.y,t.stopx,v.y).style("stroke-dasharray","3, 3")});let g=eS();g.text=r,g.x=t.startx,g.y=t.starty,g.fontFamily=l,g.fontSize=u,g.fontWeight=h,g.anchor="middle",g.valign="middle",g.tspan=!1,g.width=o||50,g.height=s||20,g.textMargin=a,g.class="labelText",Tz(f,g),g=kz(),g.text=t.title,g.x=t.startx+o/2+(t.stopx-t.startx)/2,g.y=t.starty+i+a,g.anchor="middle",g.valign="middle",g.textMargin=a,g.class="loopText",g.fontFamily=l,g.fontSize=u,g.fontWeight=h,g.wrap=!0;let p=Kn(g.text)?await xm(f,g,t):$h(f,g);if(t.sectionTitles!==void 0){for(const[v,m]of Object.entries(t.sectionTitles))if(m.message){g.text=m.message,g.x=t.startx+(t.stopx-t.startx)/2,g.y=t.sections[v].y+i+a,g.class="loopText",g.anchor="middle",g.valign="middle",g.tspan=!1,g.fontFamily=l,g.fontSize=u,g.fontWeight=h,g.wrap=t.wrap,Kn(g.text)?(t.starty=t.sections[v].y,await xm(f,g,t)):$h(f,g);let y=Math.round(p.map(b=>(b._groups||b)[0][0].getBBox().height).reduce((b,T)=>b+T));t.sections[v].height+=y-(i+a)}}return t.height=Math.round(t.stopy-t.starty),f},"drawLoop"),Ez=x(function(e,t){bF(e,t)},"drawBackgroundRect"),zxt=x(function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),Vxt=x(function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),Gxt=x(function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),Uxt=x(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")},"insertArrowHead"),Wxt=x(function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),Yxt=x(function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertSequenceNumber"),Hxt=x(function(e){e.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},"insertArrowCrossHead"),kz=x(function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},"getTextObj"),qxt=x(function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),t_=function(){function e(a,s,o,l,u,h,f){const d=s.append("text").attr("x",o+u/2).attr("y",l+h/2+5).style("text-anchor","middle").text(a);i(d,f)}x(e,"byText");function t(a,s,o,l,u,h,f,d){const{actorFontSize:g,actorFontFamily:p,actorFontWeight:v}=d,[m,y]=tl(g),b=a.split(Xt.lineBreakRegex);for(let T=0;T<b.length;T++){const w=T*m-m*(b.length-1)/2,k=s.append("text").attr("x",o+u/2).attr("y",l).style("text-anchor","middle").style("font-size",y).style("font-weight",v).style("font-family",p);k.append("tspan").attr("x",o+u/2).attr("dy",w).text(b[T]),k.attr("y",l+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(k,f)}}x(t,"byTspan");function r(a,s,o,l,u,h,f,d){const g=s.append("switch"),v=g.append("foreignObject").attr("x",o).attr("y",l).attr("width",u).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");v.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(a),t(a,g,o,l,u,h,f,d),i(v,f)}x(r,"byFo");async function n(a,s,o,l,u,h,f,d){const g=await tp(a,gr()),p=s.append("switch"),m=p.append("foreignObject").attr("x",o+u/2-g.width/2).attr("y",l+h/2-g.height/2).attr("width",g.width).attr("height",g.height).append("xhtml:div").style("height","100%").style("width","100%");m.append("div").style("text-align","center").style("vertical-align","middle").html(await ep(a,gr())),t(a,p,o,l,u,h,f,d),i(m,f)}x(n,"byKatex");function i(a,s){for(const o in s)s.hasOwnProperty(o)&&a.attr(o,s[o])}return x(i,"_setTextAttrs"),function(a,s=!1){return s?n:a.textPlacement==="fo"?r:a.textPlacement==="old"?e:t}}(),Xxt=function(){function e(i,a,s,o,l,u,h){const f=a.append("text").attr("x",s).attr("y",o).style("text-anchor","start").text(i);n(f,h)}x(e,"byText");function t(i,a,s,o,l,u,h,f){const{actorFontSize:d,actorFontFamily:g,actorFontWeight:p}=f,v=i.split(Xt.lineBreakRegex);for(let m=0;m<v.length;m++){const y=m*d-d*(v.length-1)/2,b=a.append("text").attr("x",s).attr("y",o).style("text-anchor","start").style("font-size",d).style("font-weight",p).style("font-family",g);b.append("tspan").attr("x",s).attr("dy",y).text(v[m]),b.attr("y",o+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),n(b,h)}}x(t,"byTspan");function r(i,a,s,o,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",s).attr("y",o).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),t(i,d,s,o,l,u,h,f),n(p,h)}x(r,"byFo");function n(i,a){for(const s in a)a.hasOwnProperty(s)&&i.attr(s,a[s])}return x(n,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?e:t}}(),Vr={drawRect:JS,drawText:$h,drawLabel:Tz,drawActor:Oxt,drawBox:Pxt,drawPopup:Ixt,anchorElement:Bxt,drawActivation:Fxt,drawLoop:$xt,drawBackgroundRect:Ez,insertArrowHead:Uxt,insertArrowFilledHead:Wxt,insertSequenceNumber:Yxt,insertArrowCrossHead:Hxt,insertDatabaseIcon:zxt,insertComputerIcon:Vxt,insertClockIcon:Gxt,getTextObj:kz,getNoteRect:qxt,fixLifeLineHeights:wz,sanitizeUrl:mc.sanitizeUrl},Et={},Ht={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:x(function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(e=>e.height||0))+(this.loops.length===0?0:this.loops.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.messages.length===0?0:this.messages.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.notes.length===0?0:this.notes.map(e=>e.height||0).reduce((e,t)=>e+t))},"getHeight"),clear:x(function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},"clear"),addBox:x(function(e){this.boxes.push(e)},"addBox"),addActor:x(function(e){this.actors.push(e)},"addActor"),addLoop:x(function(e){this.loops.push(e)},"addLoop"),addMessage:x(function(e){this.messages.push(e)},"addMessage"),addNote:x(function(e){this.notes.push(e)},"addNote"),lastActor:x(function(){return this.actors[this.actors.length-1]},"lastActor"),lastLoop:x(function(){return this.loops[this.loops.length-1]},"lastLoop"),lastMessage:x(function(){return this.messages[this.messages.length-1]},"lastMessage"),lastNote:x(function(){return this.notes[this.notes.length-1]},"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:x(function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,_z(pt())},"init"),updateVal:x(function(e,t,r,n){e[t]===void 0?e[t]=r:e[t]=n(r,e[t])},"updateVal"),updateBounds:x(function(e,t,r,n){const i=this;let a=0;function s(o){return x(function(u){a++;const h=i.sequenceItems.length-a+1;i.updateVal(u,"starty",t-h*Et.boxMargin,Math.min),i.updateVal(u,"stopy",n+h*Et.boxMargin,Math.max),i.updateVal(Ht.data,"startx",e-h*Et.boxMargin,Math.min),i.updateVal(Ht.data,"stopx",r+h*Et.boxMargin,Math.max),o!=="activation"&&(i.updateVal(u,"startx",e-h*Et.boxMargin,Math.min),i.updateVal(u,"stopx",r+h*Et.boxMargin,Math.max),i.updateVal(Ht.data,"starty",t-h*Et.boxMargin,Math.min),i.updateVal(Ht.data,"stopy",n+h*Et.boxMargin,Math.max))},"updateItemBounds")}x(s,"updateFn"),this.sequenceItems.forEach(s()),this.activations.forEach(s("activation"))},"updateBounds"),insert:x(function(e,t,r,n){const i=Xt.getMin(e,r),a=Xt.getMax(e,r),s=Xt.getMin(t,n),o=Xt.getMax(t,n);this.updateVal(Ht.data,"startx",i,Math.min),this.updateVal(Ht.data,"starty",s,Math.min),this.updateVal(Ht.data,"stopx",a,Math.max),this.updateVal(Ht.data,"stopy",o,Math.max),this.updateBounds(i,s,a,o)},"insert"),newActivation:x(function(e,t,r){const n=r.get(e.from),i=Ky(e.from).length||0,a=n.x+n.width/2+(i-1)*Et.activationWidth/2;this.activations.push({startx:a,starty:this.verticalPos+2,stopx:a+Et.activationWidth,stopy:void 0,actor:e.from,anchored:Vr.anchorElement(t)})},"newActivation"),endActivation:x(function(e){const t=this.activations.map(function(r){return r.actor}).lastIndexOf(e.from);return this.activations.splice(t,1)[0]},"endActivation"),createLoop:x(function(e={message:void 0,wrap:!1,width:void 0},t){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:e.message,wrap:e.wrap,width:e.width,height:0,fill:t}},"createLoop"),newLoop:x(function(e={message:void 0,wrap:!1,width:void 0},t){this.sequenceItems.push(this.createLoop(e,t))},"newLoop"),endLoop:x(function(){return this.sequenceItems.pop()},"endLoop"),isLoopOverlap:x(function(){return this.sequenceItems.length?this.sequenceItems[this.sequenceItems.length-1].overlap:!1},"isLoopOverlap"),addSectionToLoop:x(function(e){const t=this.sequenceItems.pop();t.sections=t.sections||[],t.sectionTitles=t.sectionTitles||[],t.sections.push({y:Ht.getVerticalPos(),height:0}),t.sectionTitles.push(e),this.sequenceItems.push(t)},"addSectionToLoop"),saveVerticalPos:x(function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},"saveVerticalPos"),resetVerticalPos:x(function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},"resetVerticalPos"),bumpVerticalPos:x(function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=Xt.getMax(this.data.stopy,this.verticalPos)},"bumpVerticalPos"),getVerticalPos:x(function(){return this.verticalPos},"getVerticalPos"),getBounds:x(function(){return{bounds:this.data,models:this.models}},"getBounds")},jxt=x(async function(e,t){Ht.bumpVerticalPos(Et.boxMargin),t.height=Et.boxMargin,t.starty=Ht.getVerticalPos();const r=kc();r.x=t.startx,r.y=t.starty,r.width=t.width||Et.width,r.class="note";const n=e.append("g"),i=Vr.drawRect(n,r),a=eS();a.x=t.startx,a.y=t.starty,a.width=r.width,a.dy="1em",a.text=t.message,a.class="noteText",a.fontFamily=Et.noteFontFamily,a.fontSize=Et.noteFontSize,a.fontWeight=Et.noteFontWeight,a.anchor=Et.noteAlign,a.textMargin=Et.noteMargin,a.valign="center";const s=Kn(a.text)?await xm(n,a):$h(n,a),o=Math.round(s.map(l=>(l._groups||l)[0][0].getBBox().height).reduce((l,u)=>l+u));i.attr("height",o+2*Et.noteMargin),t.height+=o+2*Et.noteMargin,Ht.bumpVerticalPos(o+2*Et.noteMargin),t.stopy=t.starty+o+2*Et.noteMargin,t.stopx=t.startx+r.width,Ht.insert(t.startx,t.starty,t.stopx,t.stopy),Ht.models.addNote(t)},"drawNote"),lc=x(e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),"messageFont"),Jc=x(e=>({fontFamily:e.noteFontFamily,fontSize:e.noteFontSize,fontWeight:e.noteFontWeight}),"noteFont"),LE=x(e=>({fontFamily:e.actorFontFamily,fontSize:e.actorFontSize,fontWeight:e.actorFontWeight}),"actorFont");async function Cz(e,t){Ht.bumpVerticalPos(10);const{startx:r,stopx:n,message:i}=t,a=Xt.splitBreaks(i).length,s=Kn(i),o=s?await tp(i,pt()):De.calculateTextDimensions(i,lc(Et));if(!s){const f=o.height/a;t.height+=f,Ht.bumpVerticalPos(f)}let l,u=o.height-10;const h=o.width;if(r===n){l=Ht.getVerticalPos()+u,Et.rightAngles||(u+=Et.boxMargin,l=Ht.getVerticalPos()+u),u+=30;const f=Xt.getMax(h/2,Et.width/2);Ht.insert(r-f,Ht.getVerticalPos()-10+u,n+f,Ht.getVerticalPos()+30+u)}else u+=Et.boxMargin,l=Ht.getVerticalPos()+u,Ht.insert(r,l-10,n,l);return Ht.bumpVerticalPos(u),t.height+=u,t.stopy=t.starty+t.height,Ht.insert(t.fromBounds,t.starty,t.toBounds,t.stopy),l}x(Cz,"boundMessage");var Kxt=x(async function(e,t,r,n){const{startx:i,stopx:a,starty:s,message:o,type:l,sequenceIndex:u,sequenceVisible:h}=t,f=De.calculateTextDimensions(o,lc(Et)),d=eS();d.x=i,d.y=s+10,d.width=a-i,d.class="messageText",d.dy="1em",d.text=o,d.fontFamily=Et.messageFontFamily,d.fontSize=Et.messageFontSize,d.fontWeight=Et.messageFontWeight,d.anchor=Et.messageAlign,d.valign="center",d.textMargin=Et.wrapPadding,d.tspan=!1,Kn(d.text)?await xm(e,d,{startx:i,stopx:a,starty:r}):$h(e,d);const g=f.width;let p;i===a?Et.rightAngles?p=e.append("path").attr("d",`M  ${i},${r} H ${i+Xt.getMax(Et.width/2,g/2)} V ${r+25} H ${i}`):p=e.append("path").attr("d","M "+i+","+r+" C "+(i+60)+","+(r-10)+" "+(i+60)+","+(r+30)+" "+i+","+(r+20)):(p=e.append("line"),p.attr("x1",i),p.attr("y1",r),p.attr("x2",a),p.attr("y2",r)),l===n.db.LINETYPE.DOTTED||l===n.db.LINETYPE.DOTTED_CROSS||l===n.db.LINETYPE.DOTTED_POINT||l===n.db.LINETYPE.DOTTED_OPEN||l===n.db.LINETYPE.BIDIRECTIONAL_DOTTED?(p.style("stroke-dasharray","3, 3"),p.attr("class","messageLine1")):p.attr("class","messageLine0");let v="";Et.arrowMarkerAbsolute&&(v=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,v=v.replace(/\(/g,"\\("),v=v.replace(/\)/g,"\\)")),p.attr("stroke-width",2),p.attr("stroke","none"),p.style("fill","none"),(l===n.db.LINETYPE.SOLID||l===n.db.LINETYPE.DOTTED)&&p.attr("marker-end","url("+v+"#arrowhead)"),(l===n.db.LINETYPE.BIDIRECTIONAL_SOLID||l===n.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(p.attr("marker-start","url("+v+"#arrowhead)"),p.attr("marker-end","url("+v+"#arrowhead)")),(l===n.db.LINETYPE.SOLID_POINT||l===n.db.LINETYPE.DOTTED_POINT)&&p.attr("marker-end","url("+v+"#filled-head)"),(l===n.db.LINETYPE.SOLID_CROSS||l===n.db.LINETYPE.DOTTED_CROSS)&&p.attr("marker-end","url("+v+"#crosshead)"),(h||Et.showSequenceNumbers)&&(p.attr("marker-start","url("+v+"#sequencenumber)"),e.append("text").attr("x",i).attr("y",r+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(u))},"drawMessage"),Zxt=x(function(e,t,r,n,i,a,s){let o=0,l=0,u,h=0;for(const f of n){const d=t.get(f),g=d.box;u&&u!=g&&(s||Ht.models.addBox(u),l+=Et.boxMargin+u.margin),g&&g!=u&&(s||(g.x=o+l,g.y=i),l+=g.margin),d.width=d.width||Et.width,d.height=Xt.getMax(d.height||Et.height,Et.height),d.margin=d.margin||Et.actorMargin,h=Xt.getMax(h,d.height),r.get(d.name)&&(l+=d.width/2),d.x=o+l,d.starty=Ht.getVerticalPos(),Ht.insert(d.x,i,d.x+d.width,d.height),o+=d.width+l,d.box&&(d.box.width=o+g.margin-d.box.x),l=d.margin,u=d.box,Ht.models.addActor(d)}u&&!s&&Ht.models.addBox(u),Ht.bumpVerticalPos(h)},"addActorRenderingData"),RE=x(async function(e,t,r,n){if(n){let i=0;Ht.bumpVerticalPos(Et.boxMargin*2);for(const a of r){const s=t.get(a);s.stopy||(s.stopy=Ht.getVerticalPos());const o=await Vr.drawActor(e,s,Et,!0);i=Xt.getMax(i,o)}Ht.bumpVerticalPos(i+Et.boxMargin)}else for(const i of r){const a=t.get(i);await Vr.drawActor(e,a,Et,!1)}},"drawActors"),Sz=x(function(e,t,r,n){let i=0,a=0;for(const s of r){const o=t.get(s),l=Jxt(o),u=Vr.drawPopup(e,o,l,Et,Et.forceMenus,n);u.height>i&&(i=u.height),u.width+o.x>a&&(a=u.width+o.x)}return{maxHeight:i,maxWidth:a}},"drawActorsPopup"),_z=x(function(e){an(Et,e),e.fontFamily&&(Et.actorFontFamily=Et.noteFontFamily=Et.messageFontFamily=e.fontFamily),e.fontSize&&(Et.actorFontSize=Et.noteFontSize=Et.messageFontSize=e.fontSize),e.fontWeight&&(Et.actorFontWeight=Et.noteFontWeight=Et.messageFontWeight=e.fontWeight)},"setConf"),Ky=x(function(e){return Ht.activations.filter(function(t){return t.actor===e})},"actorActivations"),GL=x(function(e,t){const r=t.get(e),n=Ky(e),i=n.reduce(function(s,o){return Xt.getMin(s,o.startx)},r.x+r.width/2-1),a=n.reduce(function(s,o){return Xt.getMax(s,o.stopx)},r.x+r.width/2+1);return[i,a]},"activationBounds");function ka(e,t,r,n,i){Ht.bumpVerticalPos(r);let a=n;if(t.id&&t.message&&e[t.id]){const s=e[t.id].width,o=lc(Et);t.message=De.wrapLabel(`[${t.message}]`,s-2*Et.wrapPadding,o),t.width=s,t.wrap=!0;const l=De.calculateTextDimensions(t.message,o),u=Xt.getMax(l.height,Et.labelBoxHeight);a=n+u,et.debug(`${u} - ${t.message}`)}i(t),Ht.bumpVerticalPos(a)}x(ka,"adjustLoopHeightForWrap");function Az(e,t,r,n,i,a,s){function o(u,h){u.x<i.get(e.from).x?(Ht.insert(t.stopx-h,t.starty,t.startx,t.stopy+u.height/2+Et.noteMargin),t.stopx=t.stopx+h):(Ht.insert(t.startx,t.starty,t.stopx+h,t.stopy+u.height/2+Et.noteMargin),t.stopx=t.stopx-h)}x(o,"receiverAdjustment");function l(u,h){u.x<i.get(e.to).x?(Ht.insert(t.startx-h,t.starty,t.stopx,t.stopy+u.height/2+Et.noteMargin),t.startx=t.startx+h):(Ht.insert(t.stopx,t.starty,t.startx+h,t.stopy+u.height/2+Et.noteMargin),t.startx=t.startx-h)}if(x(l,"senderAdjustment"),a.get(e.to)==n){const u=i.get(e.to),h=u.type=="actor"?Bl/2+3:u.width/2+3;o(u,h),u.starty=r-u.height/2,Ht.bumpVerticalPos(u.height/2)}else if(s.get(e.from)==n){const u=i.get(e.from);if(Et.mirrorActors){const h=u.type=="actor"?Bl/2:u.width/2;l(u,h)}u.stopy=r-u.height/2,Ht.bumpVerticalPos(u.height/2)}else if(s.get(e.to)==n){const u=i.get(e.to);if(Et.mirrorActors){const h=u.type=="actor"?Bl/2+3:u.width/2+3;o(u,h)}u.stopy=r-u.height/2,Ht.bumpVerticalPos(u.height/2)}}x(Az,"adjustCreatedDestroyedData");var Qxt=x(async function(e,t,r,n){const{securityLevel:i,sequence:a}=pt();Et=a;let s;i==="sandbox"&&(s=qt("#i"+t));const o=qt(i==="sandbox"?s.nodes()[0].contentDocument.body:"body"),l=i==="sandbox"?s.nodes()[0].contentDocument:document;Ht.init(),et.debug(n.db);const u=i==="sandbox"?o.select(`[id="${t}"]`):qt(`[id="${t}"]`),h=n.db.getActors(),f=n.db.getCreatedActors(),d=n.db.getDestroyedActors(),g=n.db.getBoxes();let p=n.db.getActorKeys();const v=n.db.getMessages(),m=n.db.getDiagramTitle(),y=n.db.hasAtLeastOneBox(),b=n.db.hasAtLeastOneBoxWithTitle(),T=await Lz(h,v,n);if(Et.height=await Rz(h,T,g),Vr.insertComputerIcon(u),Vr.insertDatabaseIcon(u),Vr.insertClockIcon(u),y&&(Ht.bumpVerticalPos(Et.boxMargin),b&&Ht.bumpVerticalPos(g[0].textMaxHeight)),Et.hideUnusedParticipants===!0){const N=new Set;v.forEach(B=>{N.add(B.from),N.add(B.to)}),p=p.filter(B=>N.has(B))}Zxt(u,h,f,p,0,v,!1);const w=await rbt(v,h,T,n);Vr.insertArrowHead(u),Vr.insertArrowCrossHead(u),Vr.insertArrowFilledHead(u),Vr.insertSequenceNumber(u);function k(N,B){const z=Ht.endActivation(N);z.starty+18>B&&(z.starty=B-6,B+=12),Vr.drawActivation(u,z,B,Et,Ky(N.from).length),Ht.insert(z.startx,B-10,z.stopx,B)}x(k,"activeEnd");let S=1,E=1;const L=[],A=[];let R=0;for(const N of v){let B,z,F;switch(N.type){case n.db.LINETYPE.NOTE:Ht.resetVerticalPos(),z=N.noteModel,await jxt(u,z);break;case n.db.LINETYPE.ACTIVE_START:Ht.newActivation(N,u,h);break;case n.db.LINETYPE.ACTIVE_END:k(N,Ht.getVerticalPos());break;case n.db.LINETYPE.LOOP_START:ka(w,N,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,V=>Ht.newLoop(V));break;case n.db.LINETYPE.LOOP_END:B=Ht.endLoop(),await Vr.drawLoop(u,B,"loop",Et),Ht.bumpVerticalPos(B.stopy-Ht.getVerticalPos()),Ht.models.addLoop(B);break;case n.db.LINETYPE.RECT_START:ka(w,N,Et.boxMargin,Et.boxMargin,V=>Ht.newLoop(void 0,V.message));break;case n.db.LINETYPE.RECT_END:B=Ht.endLoop(),A.push(B),Ht.models.addLoop(B),Ht.bumpVerticalPos(B.stopy-Ht.getVerticalPos());break;case n.db.LINETYPE.OPT_START:ka(w,N,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,V=>Ht.newLoop(V));break;case n.db.LINETYPE.OPT_END:B=Ht.endLoop(),await Vr.drawLoop(u,B,"opt",Et),Ht.bumpVerticalPos(B.stopy-Ht.getVerticalPos()),Ht.models.addLoop(B);break;case n.db.LINETYPE.ALT_START:ka(w,N,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,V=>Ht.newLoop(V));break;case n.db.LINETYPE.ALT_ELSE:ka(w,N,Et.boxMargin+Et.boxTextMargin,Et.boxMargin,V=>Ht.addSectionToLoop(V));break;case n.db.LINETYPE.ALT_END:B=Ht.endLoop(),await Vr.drawLoop(u,B,"alt",Et),Ht.bumpVerticalPos(B.stopy-Ht.getVerticalPos()),Ht.models.addLoop(B);break;case n.db.LINETYPE.PAR_START:case n.db.LINETYPE.PAR_OVER_START:ka(w,N,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,V=>Ht.newLoop(V)),Ht.saveVerticalPos();break;case n.db.LINETYPE.PAR_AND:ka(w,N,Et.boxMargin+Et.boxTextMargin,Et.boxMargin,V=>Ht.addSectionToLoop(V));break;case n.db.LINETYPE.PAR_END:B=Ht.endLoop(),await Vr.drawLoop(u,B,"par",Et),Ht.bumpVerticalPos(B.stopy-Ht.getVerticalPos()),Ht.models.addLoop(B);break;case n.db.LINETYPE.AUTONUMBER:S=N.message.start||S,E=N.message.step||E,N.message.visible?n.db.enableSequenceNumbers():n.db.disableSequenceNumbers();break;case n.db.LINETYPE.CRITICAL_START:ka(w,N,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,V=>Ht.newLoop(V));break;case n.db.LINETYPE.CRITICAL_OPTION:ka(w,N,Et.boxMargin+Et.boxTextMargin,Et.boxMargin,V=>Ht.addSectionToLoop(V));break;case n.db.LINETYPE.CRITICAL_END:B=Ht.endLoop(),await Vr.drawLoop(u,B,"critical",Et),Ht.bumpVerticalPos(B.stopy-Ht.getVerticalPos()),Ht.models.addLoop(B);break;case n.db.LINETYPE.BREAK_START:ka(w,N,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,V=>Ht.newLoop(V));break;case n.db.LINETYPE.BREAK_END:B=Ht.endLoop(),await Vr.drawLoop(u,B,"break",Et),Ht.bumpVerticalPos(B.stopy-Ht.getVerticalPos()),Ht.models.addLoop(B);break;default:try{F=N.msgModel,F.starty=Ht.getVerticalPos(),F.sequenceIndex=S,F.sequenceVisible=n.db.showSequenceNumbers();const V=await Cz(u,F);Az(N,F,V,R,h,f,d),L.push({messageModel:F,lineStartY:V}),Ht.models.addMessage(F)}catch(V){et.error("error while drawing message",V)}}[n.db.LINETYPE.SOLID_OPEN,n.db.LINETYPE.DOTTED_OPEN,n.db.LINETYPE.SOLID,n.db.LINETYPE.DOTTED,n.db.LINETYPE.SOLID_CROSS,n.db.LINETYPE.DOTTED_CROSS,n.db.LINETYPE.SOLID_POINT,n.db.LINETYPE.DOTTED_POINT,n.db.LINETYPE.BIDIRECTIONAL_SOLID,n.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(N.type)&&(S=S+E),R++}et.debug("createdActors",f),et.debug("destroyedActors",d),await RE(u,h,p,!1);for(const N of L)await Kxt(u,N.messageModel,N.lineStartY,n);Et.mirrorActors&&await RE(u,h,p,!0),A.forEach(N=>Vr.drawBackgroundRect(u,N)),wz(u,h,p,Et);for(const N of Ht.models.boxes)N.height=Ht.getVerticalPos()-N.y,Ht.insert(N.x,N.y,N.x+N.width,N.height),N.startx=N.x,N.starty=N.y,N.stopx=N.startx+N.width,N.stopy=N.starty+N.height,N.stroke="rgb(0,0,0, 0.5)",Vr.drawBox(u,N,Et);y&&Ht.bumpVerticalPos(Et.boxMargin);const C=Sz(u,h,p,l),{bounds:D}=Ht.getBounds();D.startx===void 0&&(D.startx=0),D.starty===void 0&&(D.starty=0),D.stopx===void 0&&(D.stopx=0),D.stopy===void 0&&(D.stopy=0);let P=D.stopy-D.starty;P<C.maxHeight&&(P=C.maxHeight);let _=P+2*Et.diagramMarginY;Et.mirrorActors&&(_=_-Et.boxMargin+Et.bottomMarginAdj);let I=D.stopx-D.startx;I<C.maxWidth&&(I=C.maxWidth);const M=I+2*Et.diagramMarginX;m&&u.append("text").text(m).attr("x",(D.stopx-D.startx)/2-2*Et.diagramMarginX).attr("y",-25),Oi(u,_,M,Et.useMaxWidth);const O=m?40:0;u.attr("viewBox",D.startx-Et.diagramMarginX+" -"+(Et.diagramMarginY+O)+" "+M+" "+(_+O)),et.debug("models:",Ht.models)},"draw");async function Lz(e,t,r){const n={};for(const i of t)if(e.get(i.to)&&e.get(i.from)){const a=e.get(i.to);if(i.placement===r.db.PLACEMENT.LEFTOF&&!a.prevActor||i.placement===r.db.PLACEMENT.RIGHTOF&&!a.nextActor)continue;const s=i.placement!==void 0,o=!s,l=s?Jc(Et):lc(Et),u=i.wrap?De.wrapLabel(i.message,Et.width-2*Et.wrapPadding,l):i.message,f=(Kn(u)?await tp(i.message,pt()):De.calculateTextDimensions(u,l)).width+2*Et.wrapPadding;o&&i.from===a.nextActor?n[i.to]=Xt.getMax(n[i.to]||0,f):o&&i.from===a.prevActor?n[i.from]=Xt.getMax(n[i.from]||0,f):o&&i.from===i.to?(n[i.from]=Xt.getMax(n[i.from]||0,f/2),n[i.to]=Xt.getMax(n[i.to]||0,f/2)):i.placement===r.db.PLACEMENT.RIGHTOF?n[i.from]=Xt.getMax(n[i.from]||0,f):i.placement===r.db.PLACEMENT.LEFTOF?n[a.prevActor]=Xt.getMax(n[a.prevActor]||0,f):i.placement===r.db.PLACEMENT.OVER&&(a.prevActor&&(n[a.prevActor]=Xt.getMax(n[a.prevActor]||0,f/2)),a.nextActor&&(n[i.from]=Xt.getMax(n[i.from]||0,f/2)))}return et.debug("maxMessageWidthPerActor:",n),n}x(Lz,"getMaxMessageWidthPerActor");var Jxt=x(function(e){let t=0;const r=LE(Et);for(const n in e.links){const a=De.calculateTextDimensions(n,r).width+2*Et.wrapPadding+2*Et.boxMargin;t<a&&(t=a)}return t},"getRequiredPopupWidth");async function Rz(e,t,r){let n=0;for(const a of e.keys()){const s=e.get(a);s.wrap&&(s.description=De.wrapLabel(s.description,Et.width-2*Et.wrapPadding,LE(Et)));const o=Kn(s.description)?await tp(s.description,pt()):De.calculateTextDimensions(s.description,LE(Et));s.width=s.wrap?Et.width:Xt.getMax(Et.width,o.width+2*Et.wrapPadding),s.height=s.wrap?Xt.getMax(o.height,Et.height):Et.height,n=Xt.getMax(n,s.height)}for(const a in t){const s=e.get(a);if(!s)continue;const o=e.get(s.nextActor);if(!o){const f=t[a]+Et.actorMargin-s.width/2;s.margin=Xt.getMax(f,Et.actorMargin);continue}const u=t[a]+Et.actorMargin-s.width/2-o.width/2;s.margin=Xt.getMax(u,Et.actorMargin)}let i=0;return r.forEach(a=>{const s=lc(Et);let o=a.actorKeys.reduce((h,f)=>h+=e.get(f).width+(e.get(f).margin||0),0);o-=2*Et.boxTextMargin,a.wrap&&(a.name=De.wrapLabel(a.name,o-2*Et.wrapPadding,s));const l=De.calculateTextDimensions(a.name,s);i=Xt.getMax(l.height,i);const u=Xt.getMax(o,l.width+2*Et.wrapPadding);if(a.margin=Et.boxTextMargin,o<u){const h=(u-o)/2;a.margin+=h}}),r.forEach(a=>a.textMaxHeight=i),Xt.getMax(n,Et.height)}x(Rz,"calculateActorMargins");var tbt=x(async function(e,t,r){const n=t.get(e.from),i=t.get(e.to),a=n.x,s=i.x,o=e.wrap&&e.message;let l=Kn(e.message)?await tp(e.message,pt()):De.calculateTextDimensions(o?De.wrapLabel(e.message,Et.width,Jc(Et)):e.message,Jc(Et));const u={width:o?Et.width:Xt.getMax(Et.width,l.width+2*Et.noteMargin),height:0,startx:n.x,stopx:0,starty:0,stopy:0,message:e.message};return e.placement===r.db.PLACEMENT.RIGHTOF?(u.width=o?Xt.getMax(Et.width,l.width):Xt.getMax(n.width/2+i.width/2,l.width+2*Et.noteMargin),u.startx=a+(n.width+Et.actorMargin)/2):e.placement===r.db.PLACEMENT.LEFTOF?(u.width=o?Xt.getMax(Et.width,l.width+2*Et.noteMargin):Xt.getMax(n.width/2+i.width/2,l.width+2*Et.noteMargin),u.startx=a-u.width+(n.width-Et.actorMargin)/2):e.to===e.from?(l=De.calculateTextDimensions(o?De.wrapLabel(e.message,Xt.getMax(Et.width,n.width),Jc(Et)):e.message,Jc(Et)),u.width=o?Xt.getMax(Et.width,n.width):Xt.getMax(n.width,Et.width,l.width+2*Et.noteMargin),u.startx=a+(n.width-u.width)/2):(u.width=Math.abs(a+n.width/2-(s+i.width/2))+Et.actorMargin,u.startx=a<s?a+n.width/2-Et.actorMargin/2:s+i.width/2-Et.actorMargin/2),o&&(u.message=De.wrapLabel(e.message,u.width-2*Et.wrapPadding,Jc(Et))),et.debug(`NM:[${u.startx},${u.stopx},${u.starty},${u.stopy}:${u.width},${u.height}=${e.message}]`),u},"buildNoteModel"),ebt=x(function(e,t,r){if(![r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT,r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(e.type))return{};const[n,i]=GL(e.from,t),[a,s]=GL(e.to,t),o=n<=a;let l=o?i:n,u=o?a:s;const h=Math.abs(a-s)>2,f=x(v=>o?-v:v,"adjustValue");e.from===e.to?u=l:(e.activate&&!h&&(u+=f(Et.activationWidth/2-1)),[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN].includes(e.type)||(u+=f(3)),[r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(e.type)&&(l-=f(3)));const d=[n,i,a,s],g=Math.abs(l-u);e.wrap&&e.message&&(e.message=De.wrapLabel(e.message,Xt.getMax(g+2*Et.wrapPadding,Et.width),lc(Et)));const p=De.calculateTextDimensions(e.message,lc(Et));return{width:Xt.getMax(e.wrap?0:p.width+2*Et.wrapPadding,g+2*Et.wrapPadding,Et.width),height:0,startx:l,stopx:u,starty:0,stopy:0,message:e.message,type:e.type,wrap:e.wrap,fromBounds:Math.min.apply(null,d),toBounds:Math.max.apply(null,d)}},"buildMessageModel"),rbt=x(async function(e,t,r,n){const i={},a=[];let s,o,l;for(const u of e){switch(u.type){case n.db.LINETYPE.LOOP_START:case n.db.LINETYPE.ALT_START:case n.db.LINETYPE.OPT_START:case n.db.LINETYPE.PAR_START:case n.db.LINETYPE.PAR_OVER_START:case n.db.LINETYPE.CRITICAL_START:case n.db.LINETYPE.BREAK_START:a.push({id:u.id,msg:u.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case n.db.LINETYPE.ALT_ELSE:case n.db.LINETYPE.PAR_AND:case n.db.LINETYPE.CRITICAL_OPTION:u.message&&(s=a.pop(),i[s.id]=s,i[u.id]=s,a.push(s));break;case n.db.LINETYPE.LOOP_END:case n.db.LINETYPE.ALT_END:case n.db.LINETYPE.OPT_END:case n.db.LINETYPE.PAR_END:case n.db.LINETYPE.CRITICAL_END:case n.db.LINETYPE.BREAK_END:s=a.pop(),i[s.id]=s;break;case n.db.LINETYPE.ACTIVE_START:{const f=t.get(u.from?u.from:u.to.actor),d=Ky(u.from?u.from:u.to.actor).length,g=f.x+f.width/2+(d-1)*Et.activationWidth/2,p={startx:g,stopx:g+Et.activationWidth,actor:u.from,enabled:!0};Ht.activations.push(p)}break;case n.db.LINETYPE.ACTIVE_END:{const f=Ht.activations.map(d=>d.actor).lastIndexOf(u.from);Ht.activations.splice(f,1).splice(0,1)}break}u.placement!==void 0?(o=await tbt(u,t,n),u.noteModel=o,a.forEach(f=>{s=f,s.from=Xt.getMin(s.from,o.startx),s.to=Xt.getMax(s.to,o.startx+o.width),s.width=Xt.getMax(s.width,Math.abs(s.from-s.to))-Et.labelBoxWidth})):(l=ebt(u,t,n),u.msgModel=l,l.startx&&l.stopx&&a.length>0&&a.forEach(f=>{if(s=f,l.startx===l.stopx){const d=t.get(u.from),g=t.get(u.to);s.from=Xt.getMin(d.x-l.width/2,d.x-d.width/2,s.from),s.to=Xt.getMax(g.x+l.width/2,g.x+d.width/2,s.to),s.width=Xt.getMax(s.width,Math.abs(s.to-s.from))-Et.labelBoxWidth}else s.from=Xt.getMin(l.startx,s.from),s.to=Xt.getMax(l.stopx,s.to),s.width=Xt.getMax(s.width,l.width)-Et.labelBoxWidth}))}return Ht.activations=[],et.debug("Loop type widths:",i),i},"calculateLoopBounds"),nbt={bounds:Ht,drawActors:RE,drawActorsPopup:Sz,setConf:_z,draw:Qxt},ibt={parser:Ext,get db(){return new _xt},renderer:nbt,styles:Lxt,init:x(e=>{e.sequence||(e.sequence={}),e.wrap&&(e.sequence.wrap=e.wrap,FT({sequence:{wrap:e.wrap}}))},"init")};const abt=Object.freeze(Object.defineProperty({__proto__:null,diagram:ibt},Symbol.toStringTag,{value:"Module"}));var IE=function(){var e=x(function(At,bt,wt,Nt){for(wt=wt||{},Nt=At.length;Nt--;wt[At[Nt]]=bt);return wt},"o"),t=[1,18],r=[1,19],n=[1,20],i=[1,41],a=[1,42],s=[1,26],o=[1,24],l=[1,25],u=[1,32],h=[1,33],f=[1,34],d=[1,45],g=[1,35],p=[1,36],v=[1,37],m=[1,38],y=[1,27],b=[1,28],T=[1,29],w=[1,30],k=[1,31],S=[1,44],E=[1,46],L=[1,43],A=[1,47],R=[1,9],C=[1,8,9],D=[1,58],P=[1,59],_=[1,60],I=[1,61],M=[1,62],O=[1,63],N=[1,64],B=[1,8,9,41],z=[1,76],F=[1,8,9,12,13,22,39,41,44,66,67,68,69,70,71,72,77,79],V=[1,8,9,12,13,17,20,22,39,41,44,48,58,66,67,68,69,70,71,72,77,79,84,99,101,102],G=[13,58,84,99,101,102],Y=[13,58,71,72,84,99,101,102],Q=[13,58,66,67,68,69,70,84,99,101,102],K=[1,98],it=[1,115],ut=[1,107],q=[1,113],W=[1,108],H=[1,109],U=[1,110],X=[1,111],J=[1,112],j=[1,114],gt=[22,58,59,80,84,85,86,87,88,89],at=[1,8,9,39,41,44],tt=[1,8,9,22],kt=[1,143],ft=[1,8,9,59],Dt=[1,8,9,22,58,59,80,84,85,86,87,88,89],Ot={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,DOT:17,className:18,classLiteralName:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,ANNOTATION_START:47,ANNOTATION_END:48,MEMBER:49,SEPARATOR:50,relation:51,NOTE_FOR:52,noteText:53,NOTE:54,CLASSDEF:55,classList:56,stylesOpt:57,ALPHA:58,COMMA:59,direction_tb:60,direction_bt:61,direction_rl:62,direction_lr:63,relationType:64,lineType:65,AGGREGATION:66,EXTENSION:67,COMPOSITION:68,DEPENDENCY:69,LOLLIPOP:70,LINE:71,DOTTED_LINE:72,CALLBACK:73,LINK:74,LINK_TARGET:75,CLICK:76,CALLBACK_NAME:77,CALLBACK_ARGS:78,HREF:79,STYLE:80,CSSCLASS:81,style:82,styleComponent:83,NUM:84,COLON:85,UNIT:86,SPACE:87,BRKT:88,PCT:89,commentToken:90,textToken:91,graphCodeTokens:92,textNoTagsToken:93,TAGSTART:94,TAGEND:95,"==":96,"--":97,DEFAULT:98,MINUS:99,keywords:100,UNICODE_TEXT:101,BQUOTE_STR:102,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",17:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",47:"ANNOTATION_START",48:"ANNOTATION_END",49:"MEMBER",50:"SEPARATOR",52:"NOTE_FOR",54:"NOTE",55:"CLASSDEF",58:"ALPHA",59:"COMMA",60:"direction_tb",61:"direction_bt",62:"direction_rl",63:"direction_lr",66:"AGGREGATION",67:"EXTENSION",68:"COMPOSITION",69:"DEPENDENCY",70:"LOLLIPOP",71:"LINE",72:"DOTTED_LINE",73:"CALLBACK",74:"LINK",75:"LINK_TARGET",76:"CLICK",77:"CALLBACK_NAME",78:"CALLBACK_ARGS",79:"HREF",80:"STYLE",81:"CSSCLASS",84:"NUM",85:"COLON",86:"UNIT",87:"SPACE",88:"BRKT",89:"PCT",92:"graphCodeTokens",94:"TAGSTART",95:"TAGEND",96:"==",97:"--",98:"DEFAULT",99:"MINUS",100:"keywords",101:"UNICODE_TEXT",102:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,3],[15,2],[18,1],[18,3],[18,1],[18,2],[18,2],[18,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,6],[43,2],[43,3],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[56,1],[56,3],[32,1],[32,1],[32,1],[32,1],[51,3],[51,2],[51,2],[51,1],[64,1],[64,1],[64,1],[64,1],[64,1],[65,1],[65,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[57,1],[57,3],[82,1],[82,2],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[90,1],[90,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[93,1],[93,1],[93,1],[93,1],[16,1],[16,1],[16,1],[16,1],[19,1],[53,1]],performAction:x(function(bt,wt,Nt,ht,_t,Z,st){var $=Z.length-1;switch(_t){case 8:this.$=Z[$-1];break;case 9:case 12:case 14:this.$=Z[$];break;case 10:case 13:this.$=Z[$-2]+"."+Z[$];break;case 11:case 15:this.$=Z[$-1]+Z[$];break;case 16:case 17:this.$=Z[$-1]+"~"+Z[$]+"~";break;case 18:ht.addRelation(Z[$]);break;case 19:Z[$-1].title=ht.cleanupLabel(Z[$]),ht.addRelation(Z[$-1]);break;case 30:this.$=Z[$].trim(),ht.setAccTitle(this.$);break;case 31:case 32:this.$=Z[$].trim(),ht.setAccDescription(this.$);break;case 33:ht.addClassesToNamespace(Z[$-3],Z[$-1]);break;case 34:ht.addClassesToNamespace(Z[$-4],Z[$-1]);break;case 35:this.$=Z[$],ht.addNamespace(Z[$]);break;case 36:this.$=[Z[$]];break;case 37:this.$=[Z[$-1]];break;case 38:Z[$].unshift(Z[$-2]),this.$=Z[$];break;case 40:ht.setCssClass(Z[$-2],Z[$]);break;case 41:ht.addMembers(Z[$-3],Z[$-1]);break;case 42:ht.setCssClass(Z[$-5],Z[$-3]),ht.addMembers(Z[$-5],Z[$-1]);break;case 43:this.$=Z[$],ht.addClass(Z[$]);break;case 44:this.$=Z[$-1],ht.addClass(Z[$-1]),ht.setClassLabel(Z[$-1],Z[$]);break;case 45:ht.addAnnotation(Z[$],Z[$-2]);break;case 46:case 59:this.$=[Z[$]];break;case 47:Z[$].push(Z[$-1]),this.$=Z[$];break;case 48:break;case 49:ht.addMember(Z[$-1],ht.cleanupLabel(Z[$]));break;case 50:break;case 51:break;case 52:this.$={id1:Z[$-2],id2:Z[$],relation:Z[$-1],relationTitle1:"none",relationTitle2:"none"};break;case 53:this.$={id1:Z[$-3],id2:Z[$],relation:Z[$-1],relationTitle1:Z[$-2],relationTitle2:"none"};break;case 54:this.$={id1:Z[$-3],id2:Z[$],relation:Z[$-2],relationTitle1:"none",relationTitle2:Z[$-1]};break;case 55:this.$={id1:Z[$-4],id2:Z[$],relation:Z[$-2],relationTitle1:Z[$-3],relationTitle2:Z[$-1]};break;case 56:ht.addNote(Z[$],Z[$-1]);break;case 57:ht.addNote(Z[$]);break;case 58:this.$=Z[$-2],ht.defineClass(Z[$-1],Z[$]);break;case 60:this.$=Z[$-2].concat([Z[$]]);break;case 61:ht.setDirection("TB");break;case 62:ht.setDirection("BT");break;case 63:ht.setDirection("RL");break;case 64:ht.setDirection("LR");break;case 65:this.$={type1:Z[$-2],type2:Z[$],lineType:Z[$-1]};break;case 66:this.$={type1:"none",type2:Z[$],lineType:Z[$-1]};break;case 67:this.$={type1:Z[$-1],type2:"none",lineType:Z[$]};break;case 68:this.$={type1:"none",type2:"none",lineType:Z[$]};break;case 69:this.$=ht.relationType.AGGREGATION;break;case 70:this.$=ht.relationType.EXTENSION;break;case 71:this.$=ht.relationType.COMPOSITION;break;case 72:this.$=ht.relationType.DEPENDENCY;break;case 73:this.$=ht.relationType.LOLLIPOP;break;case 74:this.$=ht.lineType.LINE;break;case 75:this.$=ht.lineType.DOTTED_LINE;break;case 76:case 82:this.$=Z[$-2],ht.setClickEvent(Z[$-1],Z[$]);break;case 77:case 83:this.$=Z[$-3],ht.setClickEvent(Z[$-2],Z[$-1]),ht.setTooltip(Z[$-2],Z[$]);break;case 78:this.$=Z[$-2],ht.setLink(Z[$-1],Z[$]);break;case 79:this.$=Z[$-3],ht.setLink(Z[$-2],Z[$-1],Z[$]);break;case 80:this.$=Z[$-3],ht.setLink(Z[$-2],Z[$-1]),ht.setTooltip(Z[$-2],Z[$]);break;case 81:this.$=Z[$-4],ht.setLink(Z[$-3],Z[$-2],Z[$]),ht.setTooltip(Z[$-3],Z[$-1]);break;case 84:this.$=Z[$-3],ht.setClickEvent(Z[$-2],Z[$-1],Z[$]);break;case 85:this.$=Z[$-4],ht.setClickEvent(Z[$-3],Z[$-2],Z[$-1]),ht.setTooltip(Z[$-3],Z[$]);break;case 86:this.$=Z[$-3],ht.setLink(Z[$-2],Z[$]);break;case 87:this.$=Z[$-4],ht.setLink(Z[$-3],Z[$-1],Z[$]);break;case 88:this.$=Z[$-4],ht.setLink(Z[$-3],Z[$-1]),ht.setTooltip(Z[$-3],Z[$]);break;case 89:this.$=Z[$-5],ht.setLink(Z[$-4],Z[$-2],Z[$]),ht.setTooltip(Z[$-4],Z[$-1]);break;case 90:this.$=Z[$-2],ht.setCssStyle(Z[$-1],Z[$]);break;case 91:ht.setCssClass(Z[$-1],Z[$]);break;case 92:this.$=[Z[$]];break;case 93:Z[$-2].push(Z[$]),this.$=Z[$-2];break;case 95:this.$=Z[$-1]+Z[$];break}},"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,18:21,19:40,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:t,35:r,37:n,38:22,42:i,43:23,46:a,47:s,49:o,50:l,52:u,54:h,55:f,58:d,60:g,61:p,62:v,63:m,73:y,74:b,76:T,80:w,81:k,84:S,99:E,101:L,102:A},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},e(R,[2,5],{8:[1,48]}),{8:[1,49]},e(C,[2,18],{22:[1,50]}),e(C,[2,20]),e(C,[2,21]),e(C,[2,22]),e(C,[2,23]),e(C,[2,24]),e(C,[2,25]),e(C,[2,26]),e(C,[2,27]),e(C,[2,28]),e(C,[2,29]),{34:[1,51]},{36:[1,52]},e(C,[2,32]),e(C,[2,48],{51:53,64:56,65:57,13:[1,54],22:[1,55],66:D,67:P,68:_,69:I,70:M,71:O,72:N}),{39:[1,65]},e(B,[2,39],{39:[1,67],44:[1,66]}),e(C,[2,50]),e(C,[2,51]),{16:68,58:d,84:S,99:E,101:L},{16:39,18:69,19:40,58:d,84:S,99:E,101:L,102:A},{16:39,18:70,19:40,58:d,84:S,99:E,101:L,102:A},{16:39,18:71,19:40,58:d,84:S,99:E,101:L,102:A},{58:[1,72]},{13:[1,73]},{16:39,18:74,19:40,58:d,84:S,99:E,101:L,102:A},{13:z,53:75},{56:77,58:[1,78]},e(C,[2,61]),e(C,[2,62]),e(C,[2,63]),e(C,[2,64]),e(F,[2,12],{16:39,19:40,18:80,17:[1,79],20:[1,81],58:d,84:S,99:E,101:L,102:A}),e(F,[2,14],{20:[1,82]}),{15:83,16:84,58:d,84:S,99:E,101:L},{16:39,18:85,19:40,58:d,84:S,99:E,101:L,102:A},e(V,[2,118]),e(V,[2,119]),e(V,[2,120]),e(V,[2,121]),e([1,8,9,12,13,20,22,39,41,44,66,67,68,69,70,71,72,77,79],[2,122]),e(R,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,18:21,38:22,43:23,16:39,19:40,5:86,33:t,35:r,37:n,42:i,46:a,47:s,49:o,50:l,52:u,54:h,55:f,58:d,60:g,61:p,62:v,63:m,73:y,74:b,76:T,80:w,81:k,84:S,99:E,101:L,102:A}),{5:87,10:5,16:39,18:21,19:40,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:t,35:r,37:n,38:22,42:i,43:23,46:a,47:s,49:o,50:l,52:u,54:h,55:f,58:d,60:g,61:p,62:v,63:m,73:y,74:b,76:T,80:w,81:k,84:S,99:E,101:L,102:A},e(C,[2,19]),e(C,[2,30]),e(C,[2,31]),{13:[1,89],16:39,18:88,19:40,58:d,84:S,99:E,101:L,102:A},{51:90,64:56,65:57,66:D,67:P,68:_,69:I,70:M,71:O,72:N},e(C,[2,49]),{65:91,71:O,72:N},e(G,[2,68],{64:92,66:D,67:P,68:_,69:I,70:M}),e(Y,[2,69]),e(Y,[2,70]),e(Y,[2,71]),e(Y,[2,72]),e(Y,[2,73]),e(Q,[2,74]),e(Q,[2,75]),{8:[1,94],24:95,40:93,43:23,46:a},{16:96,58:d,84:S,99:E,101:L},{45:97,49:K},{48:[1,99]},{13:[1,100]},{13:[1,101]},{77:[1,102],79:[1,103]},{22:it,57:104,58:ut,80:q,82:105,83:106,84:W,85:H,86:U,87:X,88:J,89:j},{58:[1,116]},{13:z,53:117},e(C,[2,57]),e(C,[2,123]),{22:it,57:118,58:ut,59:[1,119],80:q,82:105,83:106,84:W,85:H,86:U,87:X,88:J,89:j},e(gt,[2,59]),{16:39,18:120,19:40,58:d,84:S,99:E,101:L,102:A},e(F,[2,15]),e(F,[2,16]),e(F,[2,17]),{39:[2,35]},{15:122,16:84,17:[1,121],39:[2,9],58:d,84:S,99:E,101:L},e(at,[2,43],{11:123,12:[1,124]}),e(R,[2,7]),{9:[1,125]},e(tt,[2,52]),{16:39,18:126,19:40,58:d,84:S,99:E,101:L,102:A},{13:[1,128],16:39,18:127,19:40,58:d,84:S,99:E,101:L,102:A},e(G,[2,67],{64:129,66:D,67:P,68:_,69:I,70:M}),e(G,[2,66]),{41:[1,130]},{24:95,40:131,43:23,46:a},{8:[1,132],41:[2,36]},e(B,[2,40],{39:[1,133]}),{41:[1,134]},{41:[2,46],45:135,49:K},{16:39,18:136,19:40,58:d,84:S,99:E,101:L,102:A},e(C,[2,76],{13:[1,137]}),e(C,[2,78],{13:[1,139],75:[1,138]}),e(C,[2,82],{13:[1,140],78:[1,141]}),{13:[1,142]},e(C,[2,90],{59:kt}),e(ft,[2,92],{83:144,22:it,58:ut,80:q,84:W,85:H,86:U,87:X,88:J,89:j}),e(Dt,[2,94]),e(Dt,[2,96]),e(Dt,[2,97]),e(Dt,[2,98]),e(Dt,[2,99]),e(Dt,[2,100]),e(Dt,[2,101]),e(Dt,[2,102]),e(Dt,[2,103]),e(Dt,[2,104]),e(C,[2,91]),e(C,[2,56]),e(C,[2,58],{59:kt}),{58:[1,145]},e(F,[2,13]),{15:146,16:84,58:d,84:S,99:E,101:L},{39:[2,11]},e(at,[2,44]),{13:[1,147]},{1:[2,4]},e(tt,[2,54]),e(tt,[2,53]),{16:39,18:148,19:40,58:d,84:S,99:E,101:L,102:A},e(G,[2,65]),e(C,[2,33]),{41:[1,149]},{24:95,40:150,41:[2,37],43:23,46:a},{45:151,49:K},e(B,[2,41]),{41:[2,47]},e(C,[2,45]),e(C,[2,77]),e(C,[2,79]),e(C,[2,80],{75:[1,152]}),e(C,[2,83]),e(C,[2,84],{13:[1,153]}),e(C,[2,86],{13:[1,155],75:[1,154]}),{22:it,58:ut,80:q,82:156,83:106,84:W,85:H,86:U,87:X,88:J,89:j},e(Dt,[2,95]),e(gt,[2,60]),{39:[2,10]},{14:[1,157]},e(tt,[2,55]),e(C,[2,34]),{41:[2,38]},{41:[1,158]},e(C,[2,81]),e(C,[2,85]),e(C,[2,87]),e(C,[2,88],{75:[1,159]}),e(ft,[2,93],{83:144,22:it,58:ut,80:q,84:W,85:H,86:U,87:X,88:J,89:j}),e(at,[2,8]),e(B,[2,42]),e(C,[2,89])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,35],122:[2,11],125:[2,4],135:[2,47],146:[2,10],150:[2,38]},parseError:x(function(bt,wt){if(wt.recoverable)this.trace(bt);else{var Nt=new Error(bt);throw Nt.hash=wt,Nt}},"parseError"),parse:x(function(bt){var wt=this,Nt=[0],ht=[],_t=[null],Z=[],st=this.table,$="",nt=0,rt=0,ct=2,ot=1,vt=Z.slice.call(arguments,1),yt=Object.create(this.lexer),mt={yy:{}};for(var Mt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Mt)&&(mt.yy[Mt]=this.yy[Mt]);yt.setInput(bt,mt.yy),mt.yy.lexer=yt,mt.yy.parser=this,typeof yt.yylloc>"u"&&(yt.yylloc={});var Yt=yt.yylloc;Z.push(Yt);var Bt=yt.options&&yt.options.ranges;typeof mt.yy.parseError=="function"?this.parseError=mt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function zt(Jt){Nt.length=Nt.length-2*Jt,_t.length=_t.length-Jt,Z.length=Z.length-Jt}x(zt,"popStack");function Gt(){var Jt;return Jt=ht.pop()||yt.lex()||ot,typeof Jt!="number"&&(Jt instanceof Array&&(ht=Jt,Jt=ht.pop()),Jt=wt.symbols_[Jt]||Jt),Jt}x(Gt,"lex");for(var It,Vt,Zt,jt,Pt={},ce,$t,Ut,te;;){if(Vt=Nt[Nt.length-1],this.defaultActions[Vt]?Zt=this.defaultActions[Vt]:((It===null||typeof It>"u")&&(It=Gt()),Zt=st[Vt]&&st[Vt][It]),typeof Zt>"u"||!Zt.length||!Zt[0]){var Qt="";te=[];for(ce in st[Vt])this.terminals_[ce]&&ce>ct&&te.push("'"+this.terminals_[ce]+"'");yt.showPosition?Qt="Parse error on line "+(nt+1)+`:
`+yt.showPosition()+`
Expecting `+te.join(", ")+", got '"+(this.terminals_[It]||It)+"'":Qt="Parse error on line "+(nt+1)+": Unexpected "+(It==ot?"end of input":"'"+(this.terminals_[It]||It)+"'"),this.parseError(Qt,{text:yt.match,token:this.terminals_[It]||It,line:yt.yylineno,loc:Yt,expected:te})}if(Zt[0]instanceof Array&&Zt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Vt+", token: "+It);switch(Zt[0]){case 1:Nt.push(It),_t.push(yt.yytext),Z.push(yt.yylloc),Nt.push(Zt[1]),It=null,rt=yt.yyleng,$=yt.yytext,nt=yt.yylineno,Yt=yt.yylloc;break;case 2:if($t=this.productions_[Zt[1]][1],Pt.$=_t[_t.length-$t],Pt._$={first_line:Z[Z.length-($t||1)].first_line,last_line:Z[Z.length-1].last_line,first_column:Z[Z.length-($t||1)].first_column,last_column:Z[Z.length-1].last_column},Bt&&(Pt._$.range=[Z[Z.length-($t||1)].range[0],Z[Z.length-1].range[1]]),jt=this.performAction.apply(Pt,[$,rt,nt,mt.yy,Zt[1],_t,Z].concat(vt)),typeof jt<"u")return jt;$t&&(Nt=Nt.slice(0,-1*$t*2),_t=_t.slice(0,-1*$t),Z=Z.slice(0,-1*$t)),Nt.push(this.productions_[Zt[1]][0]),_t.push(Pt.$),Z.push(Pt._$),Ut=st[Nt[Nt.length-2]][Nt[Nt.length-1]],Nt.push(Ut);break;case 3:return!0}}return!0},"parse")},Rt=function(){var At={EOF:1,parseError:x(function(wt,Nt){if(this.yy.parser)this.yy.parser.parseError(wt,Nt);else throw new Error(wt)},"parseError"),setInput:x(function(bt,wt){return this.yy=wt||this.yy||{},this._input=bt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var bt=this._input[0];this.yytext+=bt,this.yyleng++,this.offset++,this.match+=bt,this.matched+=bt;var wt=bt.match(/(?:\r\n?|\n).*/g);return wt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),bt},"input"),unput:x(function(bt){var wt=bt.length,Nt=bt.split(/(?:\r\n?|\n)/g);this._input=bt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-wt),this.offset-=wt;var ht=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Nt.length-1&&(this.yylineno-=Nt.length-1);var _t=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Nt?(Nt.length===ht.length?this.yylloc.first_column:0)+ht[ht.length-Nt.length].length-Nt[0].length:this.yylloc.first_column-wt},this.options.ranges&&(this.yylloc.range=[_t[0],_t[0]+this.yyleng-wt]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(bt){this.unput(this.match.slice(bt))},"less"),pastInput:x(function(){var bt=this.matched.substr(0,this.matched.length-this.match.length);return(bt.length>20?"...":"")+bt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var bt=this.match;return bt.length<20&&(bt+=this._input.substr(0,20-bt.length)),(bt.substr(0,20)+(bt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var bt=this.pastInput(),wt=new Array(bt.length+1).join("-");return bt+this.upcomingInput()+`
`+wt+"^"},"showPosition"),test_match:x(function(bt,wt){var Nt,ht,_t;if(this.options.backtrack_lexer&&(_t={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(_t.yylloc.range=this.yylloc.range.slice(0))),ht=bt[0].match(/(?:\r\n?|\n).*/g),ht&&(this.yylineno+=ht.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ht?ht[ht.length-1].length-ht[ht.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+bt[0].length},this.yytext+=bt[0],this.match+=bt[0],this.matches=bt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(bt[0].length),this.matched+=bt[0],Nt=this.performAction.call(this,this.yy,this,wt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Nt)return Nt;if(this._backtrack){for(var Z in _t)this[Z]=_t[Z];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var bt,wt,Nt,ht;this._more||(this.yytext="",this.match="");for(var _t=this._currentRules(),Z=0;Z<_t.length;Z++)if(Nt=this._input.match(this.rules[_t[Z]]),Nt&&(!wt||Nt[0].length>wt[0].length)){if(wt=Nt,ht=Z,this.options.backtrack_lexer){if(bt=this.test_match(Nt,_t[Z]),bt!==!1)return bt;if(this._backtrack){wt=!1;continue}else return!1}else if(!this.options.flex)break}return wt?(bt=this.test_match(wt,_t[ht]),bt!==!1?bt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var wt=this.next();return wt||this.lex()},"lex"),begin:x(function(wt){this.conditionStack.push(wt)},"begin"),popState:x(function(){var wt=this.conditionStack.length-1;return wt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(wt){return wt=this.conditionStack.length-1-Math.abs(wt||0),wt>=0?this.conditionStack[wt]:"INITIAL"},"topState"),pushState:x(function(wt){this.begin(wt)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:x(function(wt,Nt,ht,_t){switch(ht){case 0:return 60;case 1:return 61;case 2:return 62;case 3:return 63;case 4:break;case 5:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 8;case 14:break;case 15:return 7;case 16:return 7;case 17:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 77;case 22:this.popState();break;case 23:return 78;case 24:this.popState();break;case 25:return"STR";case 26:this.begin("string");break;case 27:return 80;case 28:return 55;case 29:return this.begin("namespace"),42;case 30:return this.popState(),8;case 31:break;case 32:return this.begin("namespace-body"),39;case 33:return this.popState(),41;case 34:return"EOF_IN_STRUCT";case 35:return 8;case 36:break;case 37:return"EDGE_STATE";case 38:return this.begin("class"),46;case 39:return this.popState(),8;case 40:break;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 43:return this.popState(),41;case 44:return"EOF_IN_STRUCT";case 45:return"EDGE_STATE";case 46:return"OPEN_IN_STRUCT";case 47:break;case 48:return"MEMBER";case 49:return 81;case 50:return 73;case 51:return 74;case 52:return 76;case 53:return 52;case 54:return 54;case 55:return 47;case 56:return 48;case 57:return 79;case 58:this.popState();break;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 61:this.popState();break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:return 75;case 65:return 75;case 66:return 75;case 67:return 75;case 68:return 67;case 69:return 67;case 70:return 69;case 71:return 69;case 72:return 68;case 73:return 66;case 74:return 70;case 75:return 71;case 76:return 72;case 77:return 22;case 78:return 44;case 79:return 99;case 80:return 17;case 81:return"PLUS";case 82:return 85;case 83:return 59;case 84:return 88;case 85:return 88;case 86:return 89;case 87:return"EQUALS";case 88:return"EQUALS";case 89:return 58;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 84;case 94:return 101;case 95:return 87;case 96:return 87;case 97:return 9}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}};return At}();Ot.lexer=Rt;function Tt(){this.yy={}}return x(Tt,"Parser"),Tt.prototype=Ot,Ot.Parser=Tt,new Tt}();IE.parser=IE;var Iz=IE,UL=["#","+","~","-",""],hh,WL=(hh=class{constructor(t,r){this.memberType=r,this.visibility="",this.classifier="",this.text="";const n=xr(t,pt());this.parseMember(n)}getDisplayDetails(){let t=this.visibility+yo(this.id);this.memberType==="method"&&(t+=`(${yo(this.parameters.trim())})`,this.returnType&&(t+=" : "+yo(this.returnType))),t=t.trim();const r=this.parseClassifier();return{displayText:t,cssStyle:r}}parseMember(t){let r="";if(this.memberType==="method"){const a=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(t);if(a){const s=a[1]?a[1].trim():"";if(UL.includes(s)&&(this.visibility=s),this.id=a[2],this.parameters=a[3]?a[3].trim():"",r=a[4]?a[4].trim():"",this.returnType=a[5]?a[5].trim():"",r===""){const o=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(o)&&(r=o,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const i=t.length,a=t.substring(0,1),s=t.substring(i-1);UL.includes(a)&&(this.visibility=a),/[$*]/.exec(s)&&(r=s),this.id=t.substring(this.visibility===""?0:1,r===""?i:i-1)}this.classifier=r,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();const n=`${this.visibility?"\\"+this.visibility:""}${yo(this.id)}${this.memberType==="method"?`(${yo(this.parameters)})${this.returnType?" : "+yo(this.returnType):""}`:""}`;this.text=n.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}},x(hh,"ClassMember"),hh),S0="classId-",YL=0,pl=x(e=>Xt.sanitizeText(e,pt()),"sanitizeText"),fh,Nz=(fh=class{constructor(){this.relations=[],this.classes=new Map,this.styleClasses=new Map,this.notes=[],this.interfaces=[],this.namespaces=new Map,this.namespaceCounter=0,this.functions=[],this.lineType={LINE:0,DOTTED_LINE:1},this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},this.setupToolTips=x(t=>{let r=qt(".mermaidTooltip");(r._groups||r)[0][0]===null&&(r=qt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),qt(t).select("svg").selectAll("g.node").on("mouseover",a=>{const s=qt(a.currentTarget);if(s.attr("title")===null)return;const l=this.getBoundingClientRect();r.transition().duration(200).style("opacity",".9"),r.text(s.attr("title")).style("left",window.scrollX+l.left+(l.right-l.left)/2+"px").style("top",window.scrollY+l.top-14+document.body.scrollTop+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",a=>{r.transition().duration(500).style("opacity",0),qt(a.currentTarget).classed("hover",!1)})},"setupToolTips"),this.direction="TB",this.setAccTitle=cn,this.getAccTitle=wn,this.setAccDescription=En,this.getAccDescription=kn,this.setDiagramTitle=Fn,this.getDiagramTitle=gn,this.getConfig=x(()=>pt().class,"getConfig"),this.functions.push(this.setupToolTips.bind(this)),this.clear(),this.addRelation=this.addRelation.bind(this),this.addClassesToNamespace=this.addClassesToNamespace.bind(this),this.addNamespace=this.addNamespace.bind(this),this.setCssClass=this.setCssClass.bind(this),this.addMembers=this.addMembers.bind(this),this.addClass=this.addClass.bind(this),this.setClassLabel=this.setClassLabel.bind(this),this.addAnnotation=this.addAnnotation.bind(this),this.addMember=this.addMember.bind(this),this.cleanupLabel=this.cleanupLabel.bind(this),this.addNote=this.addNote.bind(this),this.defineClass=this.defineClass.bind(this),this.setDirection=this.setDirection.bind(this),this.setLink=this.setLink.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.clear=this.clear.bind(this),this.setTooltip=this.setTooltip.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setCssStyle=this.setCssStyle.bind(this)}splitClassNameAndType(t){const r=Xt.sanitizeText(t,pt());let n="",i=r;if(r.indexOf("~")>0){const a=r.split("~");i=pl(a[0]),n=pl(a[1])}return{className:i,type:n}}setClassLabel(t,r){const n=Xt.sanitizeText(t,pt());r&&(r=pl(r));const{className:i}=this.splitClassNameAndType(n);this.classes.get(i).label=r,this.classes.get(i).text=`${r}${this.classes.get(i).type?`<${this.classes.get(i).type}>`:""}`}addClass(t){const r=Xt.sanitizeText(t,pt()),{className:n,type:i}=this.splitClassNameAndType(r);if(this.classes.has(n))return;const a=Xt.sanitizeText(n,pt());this.classes.set(a,{id:a,type:i,label:a,text:`${a}${i?`&lt;${i}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:S0+a+"-"+YL}),YL++}addInterface(t,r){const n={id:`interface${this.interfaces.length}`,label:t,classId:r};this.interfaces.push(n)}lookUpDomId(t){const r=Xt.sanitizeText(t,pt());if(this.classes.has(r))return this.classes.get(r).domId;throw new Error("Class not found: "+r)}clear(){this.relations=[],this.classes=new Map,this.notes=[],this.interfaces=[],this.functions=[],this.functions.push(this.setupToolTips.bind(this)),this.namespaces=new Map,this.namespaceCounter=0,this.direction="TB",dn()}getClass(t){return this.classes.get(t)}getClasses(){return this.classes}getRelations(){return this.relations}getNotes(){return this.notes}addRelation(t){et.debug("Adding relation: "+JSON.stringify(t));const r=[this.relationType.LOLLIPOP,this.relationType.AGGREGATION,this.relationType.COMPOSITION,this.relationType.DEPENDENCY,this.relationType.EXTENSION];t.relation.type1===this.relationType.LOLLIPOP&&!r.includes(t.relation.type2)?(this.addClass(t.id2),this.addInterface(t.id1,t.id2),t.id1=`interface${this.interfaces.length-1}`):t.relation.type2===this.relationType.LOLLIPOP&&!r.includes(t.relation.type1)?(this.addClass(t.id1),this.addInterface(t.id2,t.id1),t.id2=`interface${this.interfaces.length-1}`):(this.addClass(t.id1),this.addClass(t.id2)),t.id1=this.splitClassNameAndType(t.id1).className,t.id2=this.splitClassNameAndType(t.id2).className,t.relationTitle1=Xt.sanitizeText(t.relationTitle1.trim(),pt()),t.relationTitle2=Xt.sanitizeText(t.relationTitle2.trim(),pt()),this.relations.push(t)}addAnnotation(t,r){const n=this.splitClassNameAndType(t).className;this.classes.get(n).annotations.push(r)}addMember(t,r){this.addClass(t);const n=this.splitClassNameAndType(t).className,i=this.classes.get(n);if(typeof r=="string"){const a=r.trim();a.startsWith("<<")&&a.endsWith(">>")?i.annotations.push(pl(a.substring(2,a.length-2))):a.indexOf(")")>0?i.methods.push(new WL(a,"method")):a&&i.members.push(new WL(a,"attribute"))}}addMembers(t,r){Array.isArray(r)&&(r.reverse(),r.forEach(n=>this.addMember(t,n)))}addNote(t,r){const n={id:`note${this.notes.length}`,class:r,text:t};this.notes.push(n)}cleanupLabel(t){return t.startsWith(":")&&(t=t.substring(1)),pl(t.trim())}setCssClass(t,r){t.split(",").forEach(n=>{let i=n;/\d/.exec(n[0])&&(i=S0+i);const a=this.classes.get(i);a&&(a.cssClasses+=" "+r)})}defineClass(t,r){for(const n of t){let i=this.styleClasses.get(n);i===void 0&&(i={id:n,styles:[],textStyles:[]},this.styleClasses.set(n,i)),r&&r.forEach(a=>{if(/color/.exec(a)){const s=a.replace("fill","bgFill");i.textStyles.push(s)}i.styles.push(a)}),this.classes.forEach(a=>{a.cssClasses.includes(n)&&a.styles.push(...r.flatMap(s=>s.split(",")))})}}setTooltip(t,r){t.split(",").forEach(n=>{r!==void 0&&(this.classes.get(n).tooltip=pl(r))})}getTooltip(t,r){return r&&this.namespaces.has(r)?this.namespaces.get(r).classes.get(t).tooltip:this.classes.get(t).tooltip}setLink(t,r,n){const i=pt();t.split(",").forEach(a=>{let s=a;/\d/.exec(a[0])&&(s=S0+s);const o=this.classes.get(s);o&&(o.link=De.formatUrl(r,i),i.securityLevel==="sandbox"?o.linkTarget="_top":typeof n=="string"?o.linkTarget=pl(n):o.linkTarget="_blank")}),this.setCssClass(t,"clickable")}setClickEvent(t,r,n){t.split(",").forEach(i=>{this.setClickFunc(i,r,n),this.classes.get(i).haveCallback=!0}),this.setCssClass(t,"clickable")}setClickFunc(t,r,n){const i=Xt.sanitizeText(t,pt());if(pt().securityLevel!=="loose"||r===void 0)return;const s=i;if(this.classes.has(s)){const o=this.lookUpDomId(s);let l=[];if(typeof n=="string"){l=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let u=0;u<l.length;u++){let h=l[u].trim();h.startsWith('"')&&h.endsWith('"')&&(h=h.substr(1,h.length-2)),l[u]=h}}l.length===0&&l.push(o),this.functions.push(()=>{const u=document.querySelector(`[id="${o}"]`);u!==null&&u.addEventListener("click",()=>{De.runFunc(r,...l)},!1)})}}bindFunctions(t){this.functions.forEach(r=>{r(t)})}getDirection(){return this.direction}setDirection(t){this.direction=t}addNamespace(t){this.namespaces.has(t)||(this.namespaces.set(t,{id:t,classes:new Map,children:{},domId:S0+t+"-"+this.namespaceCounter}),this.namespaceCounter++)}getNamespace(t){return this.namespaces.get(t)}getNamespaces(){return this.namespaces}addClassesToNamespace(t,r){if(this.namespaces.has(t))for(const n of r){const{className:i}=this.splitClassNameAndType(n);this.classes.get(i).parent=t,this.namespaces.get(t).classes.set(i,this.classes.get(i))}}setCssStyle(t,r){const n=this.classes.get(t);if(!(!r||!n))for(const i of r)i.includes(",")?n.styles.push(...i.split(",")):n.styles.push(i)}getArrowMarker(t){let r;switch(t){case 0:r="aggregation";break;case 1:r="extension";break;case 2:r="composition";break;case 3:r="dependency";break;case 4:r="lollipop";break;default:r="none"}return r}getData(){var a;const t=[],r=[],n=pt();for(const s of this.namespaces.keys()){const o=this.namespaces.get(s);if(o){const l={id:o.id,label:o.id,isGroup:!0,padding:n.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:n.look};t.push(l)}}for(const s of this.classes.keys()){const o=this.classes.get(s);if(o){const l=o;l.parentId=o.parent,l.look=n.look,t.push(l)}}let i=0;for(const s of this.notes){i++;const o={id:s.id,label:s.text,isGroup:!1,shape:"note",padding:n.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${n.themeVariables.noteBkgColor}`,`stroke: ${n.themeVariables.noteBorderColor}`],look:n.look};t.push(o);const l=((a=this.classes.get(s.class))==null?void 0:a.id)??"";if(l){const u={id:`edgeNote${i}`,start:s.id,end:l,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:n.look};r.push(u)}}for(const s of this.interfaces){const o={id:s.id,label:s.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:n.look};t.push(o)}i=0;for(const s of this.relations){i++;const o={id:Kd(s.id1,s.id2,{prefix:"id",counter:i}),start:s.id1,end:s.id2,type:"normal",label:s.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:this.getArrowMarker(s.relation.type1),arrowTypeEnd:this.getArrowMarker(s.relation.type2),startLabelRight:s.relationTitle1==="none"?"":s.relationTitle1,endLabelLeft:s.relationTitle2==="none"?"":s.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:s.style||"",pattern:s.relation.lineType==1?"dashed":"solid",look:n.look};r.push(o)}return{nodes:t,edges:r,other:{},config:n,direction:this.getDirection()}}},x(fh,"ClassDB"),fh),sbt=x(e=>`g.classGroup text {
  fill: ${e.nodeBorder||e.classText};
  stroke: none;
  font-family: ${e.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${e.classText};
}
.edgeLabel .label rect {
  fill: ${e.mainBkg};
}
.label text {
  fill: ${e.classText};
}

.labelBkg {
  background: ${e.mainBkg};
}
.edgeLabel .label span {
  background: ${e.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.classGroup line {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${e.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${e.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
  line-height: initial;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,"getStyles"),Dz=sbt,obt=x((e,t="TB")=>{if(!e.doc)return t;let r=t;for(const n of e.doc)n.stmt==="dir"&&(r=n.value);return r},"getDir"),lbt=x(function(e,t){return t.db.getClasses()},"getClasses"),cbt=x(async function(e,t,r,n){et.info("REF0:"),et.info("Drawing class diagram (v3)",t);const{securityLevel:i,state:a,layout:s}=pt(),o=n.db.getData(),l=yp(t,i);o.type=n.type,o.layoutAlgorithm=by(s),o.nodeSpacing=(a==null?void 0:a.nodeSpacing)||50,o.rankSpacing=(a==null?void 0:a.rankSpacing)||50,o.markers=["aggregation","extension","composition","dependency","lollipop"],o.diagramId=t,await dp(o,l);const u=8;De.insertTitle(l,"classDiagramTitleText",(a==null?void 0:a.titleTopMargin)??25,n.db.getDiagramTitle()),xp(l,u,"classDiagram",(a==null?void 0:a.useMaxWidth)??!0)},"draw"),Mz={getClasses:lbt,draw:cbt,getDir:obt},ubt={parser:Iz,get db(){return new Nz},renderer:Mz,styles:Dz,init:x(e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const hbt=Object.freeze(Object.defineProperty({__proto__:null,diagram:ubt},Symbol.toStringTag,{value:"Module"}));var fbt={parser:Iz,get db(){return new Nz},renderer:Mz,styles:Dz,init:x(e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const dbt=Object.freeze(Object.defineProperty({__proto__:null,diagram:fbt},Symbol.toStringTag,{value:"Module"}));var NE=function(){var e=x(function(N,B,z,F){for(z=z||{},F=N.length;F--;z[N[F]]=B);return z},"o"),t=[1,2],r=[1,3],n=[1,4],i=[2,4],a=[1,9],s=[1,11],o=[1,16],l=[1,17],u=[1,18],h=[1,19],f=[1,32],d=[1,20],g=[1,21],p=[1,22],v=[1,23],m=[1,24],y=[1,26],b=[1,27],T=[1,28],w=[1,29],k=[1,30],S=[1,31],E=[1,34],L=[1,35],A=[1,36],R=[1,37],C=[1,33],D=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],P=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],_=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],I={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,style:42,STYLE_IDS:43,STYLEDEF_STYLEOPTS:44,class:45,CLASSENTITY_IDS:46,STYLECLASS:47,direction_tb:48,direction_bt:49,direction_rl:50,direction_lr:51,eol:52,";":53,EDGE_STATE:54,STYLE_SEPARATOR:55,left_of:56,right_of:57,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"style",43:"STYLE_IDS",44:"STYLEDEF_STYLEOPTS",45:"class",46:"CLASSENTITY_IDS",47:"STYLECLASS",48:"direction_tb",49:"direction_bt",50:"direction_rl",51:"direction_lr",53:";",54:"EDGE_STATE",55:"STYLE_SEPARATOR",56:"left_of",57:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[52,1],[52,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:x(function(B,z,F,V,G,Y,Q){var K=Y.length-1;switch(G){case 3:return V.setRootDoc(Y[K]),Y[K];case 4:this.$=[];break;case 5:Y[K]!="nl"&&(Y[K-1].push(Y[K]),this.$=Y[K-1]);break;case 6:case 7:this.$=Y[K];break;case 8:this.$="nl";break;case 12:this.$=Y[K];break;case 13:const W=Y[K-1];W.description=V.trimColon(Y[K]),this.$=W;break;case 14:this.$={stmt:"relation",state1:Y[K-2],state2:Y[K]};break;case 15:const H=V.trimColon(Y[K]);this.$={stmt:"relation",state1:Y[K-3],state2:Y[K-1],description:H};break;case 19:this.$={stmt:"state",id:Y[K-3],type:"default",description:"",doc:Y[K-1]};break;case 20:var it=Y[K],ut=Y[K-2].trim();if(Y[K].match(":")){var q=Y[K].split(":");it=q[0],ut=[ut,q[1]]}this.$={stmt:"state",id:it,type:"default",description:ut};break;case 21:this.$={stmt:"state",id:Y[K-3],type:"default",description:Y[K-5],doc:Y[K-1]};break;case 22:this.$={stmt:"state",id:Y[K],type:"fork"};break;case 23:this.$={stmt:"state",id:Y[K],type:"join"};break;case 24:this.$={stmt:"state",id:Y[K],type:"choice"};break;case 25:this.$={stmt:"state",id:V.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:Y[K-1].trim(),note:{position:Y[K-2].trim(),text:Y[K].trim()}};break;case 29:this.$=Y[K].trim(),V.setAccTitle(this.$);break;case 30:case 31:this.$=Y[K].trim(),V.setAccDescription(this.$);break;case 32:case 33:this.$={stmt:"classDef",id:Y[K-1].trim(),classes:Y[K].trim()};break;case 34:this.$={stmt:"style",id:Y[K-1].trim(),styleClass:Y[K].trim()};break;case 35:this.$={stmt:"applyClass",id:Y[K-1].trim(),styleClass:Y[K].trim()};break;case 36:V.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 37:V.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 38:V.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 39:V.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 42:case 43:this.$={stmt:"state",id:Y[K].trim(),type:"default",description:""};break;case 44:this.$={stmt:"state",id:Y[K-2].trim(),classes:[Y[K].trim()],type:"default",description:""};break;case 45:this.$={stmt:"state",id:Y[K-2].trim(),classes:[Y[K].trim()],type:"default",description:""};break}},"anonymous"),table:[{3:1,4:t,5:r,6:n},{1:[3]},{3:5,4:t,5:r,6:n},{3:6,4:t,5:r,6:n},e([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],i,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:l,19:u,22:h,24:f,25:d,26:g,27:p,28:v,29:m,32:25,33:y,35:b,37:T,38:w,42:k,45:S,48:E,49:L,50:A,51:R,54:C},e(D,[2,5]),{9:38,10:12,11:13,12:14,13:15,16:o,17:l,19:u,22:h,24:f,25:d,26:g,27:p,28:v,29:m,32:25,33:y,35:b,37:T,38:w,42:k,45:S,48:E,49:L,50:A,51:R,54:C},e(D,[2,7]),e(D,[2,8]),e(D,[2,9]),e(D,[2,10]),e(D,[2,11]),e(D,[2,12],{14:[1,39],15:[1,40]}),e(D,[2,16]),{18:[1,41]},e(D,[2,18],{20:[1,42]}),{23:[1,43]},e(D,[2,22]),e(D,[2,23]),e(D,[2,24]),e(D,[2,25]),{30:44,31:[1,45],56:[1,46],57:[1,47]},e(D,[2,28]),{34:[1,48]},{36:[1,49]},e(D,[2,31]),{39:[1,50],41:[1,51]},{43:[1,52]},{46:[1,53]},e(P,[2,42],{55:[1,54]}),e(P,[2,43],{55:[1,55]}),e(D,[2,36]),e(D,[2,37]),e(D,[2,38]),e(D,[2,39]),e(D,[2,6]),e(D,[2,13]),{13:56,24:f,54:C},e(D,[2,17]),e(_,i,{7:57}),{24:[1,58]},{24:[1,59]},{23:[1,60]},{24:[2,46]},{24:[2,47]},e(D,[2,29]),e(D,[2,30]),{40:[1,61]},{40:[1,62]},{44:[1,63]},{47:[1,64]},{24:[1,65]},{24:[1,66]},e(D,[2,14],{14:[1,67]}),{4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:l,19:u,21:[1,68],22:h,24:f,25:d,26:g,27:p,28:v,29:m,32:25,33:y,35:b,37:T,38:w,42:k,45:S,48:E,49:L,50:A,51:R,54:C},e(D,[2,20],{20:[1,69]}),{31:[1,70]},{24:[1,71]},e(D,[2,32]),e(D,[2,33]),e(D,[2,34]),e(D,[2,35]),e(P,[2,44]),e(P,[2,45]),e(D,[2,15]),e(D,[2,19]),e(_,i,{7:72}),e(D,[2,26]),e(D,[2,27]),{4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:l,19:u,21:[1,73],22:h,24:f,25:d,26:g,27:p,28:v,29:m,32:25,33:y,35:b,37:T,38:w,42:k,45:S,48:E,49:L,50:A,51:R,54:C},e(D,[2,21])],defaultActions:{5:[2,1],6:[2,2],46:[2,46],47:[2,47]},parseError:x(function(B,z){if(z.recoverable)this.trace(B);else{var F=new Error(B);throw F.hash=z,F}},"parseError"),parse:x(function(B){var z=this,F=[0],V=[],G=[null],Y=[],Q=this.table,K="",it=0,ut=0,q=2,W=1,H=Y.slice.call(arguments,1),U=Object.create(this.lexer),X={yy:{}};for(var J in this.yy)Object.prototype.hasOwnProperty.call(this.yy,J)&&(X.yy[J]=this.yy[J]);U.setInput(B,X.yy),X.yy.lexer=U,X.yy.parser=this,typeof U.yylloc>"u"&&(U.yylloc={});var j=U.yylloc;Y.push(j);var gt=U.options&&U.options.ranges;typeof X.yy.parseError=="function"?this.parseError=X.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function at(ht){F.length=F.length-2*ht,G.length=G.length-ht,Y.length=Y.length-ht}x(at,"popStack");function tt(){var ht;return ht=V.pop()||U.lex()||W,typeof ht!="number"&&(ht instanceof Array&&(V=ht,ht=V.pop()),ht=z.symbols_[ht]||ht),ht}x(tt,"lex");for(var kt,ft,Dt,Ot,Rt={},Tt,At,bt,wt;;){if(ft=F[F.length-1],this.defaultActions[ft]?Dt=this.defaultActions[ft]:((kt===null||typeof kt>"u")&&(kt=tt()),Dt=Q[ft]&&Q[ft][kt]),typeof Dt>"u"||!Dt.length||!Dt[0]){var Nt="";wt=[];for(Tt in Q[ft])this.terminals_[Tt]&&Tt>q&&wt.push("'"+this.terminals_[Tt]+"'");U.showPosition?Nt="Parse error on line "+(it+1)+`:
`+U.showPosition()+`
Expecting `+wt.join(", ")+", got '"+(this.terminals_[kt]||kt)+"'":Nt="Parse error on line "+(it+1)+": Unexpected "+(kt==W?"end of input":"'"+(this.terminals_[kt]||kt)+"'"),this.parseError(Nt,{text:U.match,token:this.terminals_[kt]||kt,line:U.yylineno,loc:j,expected:wt})}if(Dt[0]instanceof Array&&Dt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ft+", token: "+kt);switch(Dt[0]){case 1:F.push(kt),G.push(U.yytext),Y.push(U.yylloc),F.push(Dt[1]),kt=null,ut=U.yyleng,K=U.yytext,it=U.yylineno,j=U.yylloc;break;case 2:if(At=this.productions_[Dt[1]][1],Rt.$=G[G.length-At],Rt._$={first_line:Y[Y.length-(At||1)].first_line,last_line:Y[Y.length-1].last_line,first_column:Y[Y.length-(At||1)].first_column,last_column:Y[Y.length-1].last_column},gt&&(Rt._$.range=[Y[Y.length-(At||1)].range[0],Y[Y.length-1].range[1]]),Ot=this.performAction.apply(Rt,[K,ut,it,X.yy,Dt[1],G,Y].concat(H)),typeof Ot<"u")return Ot;At&&(F=F.slice(0,-1*At*2),G=G.slice(0,-1*At),Y=Y.slice(0,-1*At)),F.push(this.productions_[Dt[1]][0]),G.push(Rt.$),Y.push(Rt._$),bt=Q[F[F.length-2]][F[F.length-1]],F.push(bt);break;case 3:return!0}}return!0},"parse")},M=function(){var N={EOF:1,parseError:x(function(z,F){if(this.yy.parser)this.yy.parser.parseError(z,F);else throw new Error(z)},"parseError"),setInput:x(function(B,z){return this.yy=z||this.yy||{},this._input=B,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var B=this._input[0];this.yytext+=B,this.yyleng++,this.offset++,this.match+=B,this.matched+=B;var z=B.match(/(?:\r\n?|\n).*/g);return z?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),B},"input"),unput:x(function(B){var z=B.length,F=B.split(/(?:\r\n?|\n)/g);this._input=B+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-z),this.offset-=z;var V=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),F.length-1&&(this.yylineno-=F.length-1);var G=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:F?(F.length===V.length?this.yylloc.first_column:0)+V[V.length-F.length].length-F[0].length:this.yylloc.first_column-z},this.options.ranges&&(this.yylloc.range=[G[0],G[0]+this.yyleng-z]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(B){this.unput(this.match.slice(B))},"less"),pastInput:x(function(){var B=this.matched.substr(0,this.matched.length-this.match.length);return(B.length>20?"...":"")+B.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var B=this.match;return B.length<20&&(B+=this._input.substr(0,20-B.length)),(B.substr(0,20)+(B.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var B=this.pastInput(),z=new Array(B.length+1).join("-");return B+this.upcomingInput()+`
`+z+"^"},"showPosition"),test_match:x(function(B,z){var F,V,G;if(this.options.backtrack_lexer&&(G={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(G.yylloc.range=this.yylloc.range.slice(0))),V=B[0].match(/(?:\r\n?|\n).*/g),V&&(this.yylineno+=V.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:V?V[V.length-1].length-V[V.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+B[0].length},this.yytext+=B[0],this.match+=B[0],this.matches=B,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(B[0].length),this.matched+=B[0],F=this.performAction.call(this,this.yy,this,z,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),F)return F;if(this._backtrack){for(var Y in G)this[Y]=G[Y];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var B,z,F,V;this._more||(this.yytext="",this.match="");for(var G=this._currentRules(),Y=0;Y<G.length;Y++)if(F=this._input.match(this.rules[G[Y]]),F&&(!z||F[0].length>z[0].length)){if(z=F,V=Y,this.options.backtrack_lexer){if(B=this.test_match(F,G[Y]),B!==!1)return B;if(this._backtrack){z=!1;continue}else return!1}else if(!this.options.flex)break}return z?(B=this.test_match(z,G[V]),B!==!1?B:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var z=this.next();return z||this.lex()},"lex"),begin:x(function(z){this.conditionStack.push(z)},"begin"),popState:x(function(){var z=this.conditionStack.length-1;return z>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(z){return z=this.conditionStack.length-1-Math.abs(z||0),z>=0?this.conditionStack[z]:"INITIAL"},"topState"),pushState:x(function(z){this.begin(z)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(z,F,V,G){switch(V){case 0:return 41;case 1:return 48;case 2:return 49;case 3:return 50;case 4:return 51;case 5:break;case 6:break;case 7:return 5;case 8:break;case 9:break;case 10:break;case 11:break;case 12:return this.pushState("SCALE"),17;case 13:return 18;case 14:this.popState();break;case 15:return this.begin("acc_title"),33;case 16:return this.popState(),"acc_title_value";case 17:return this.begin("acc_descr"),35;case 18:return this.popState(),"acc_descr_value";case 19:this.begin("acc_descr_multiline");break;case 20:this.popState();break;case 21:return"acc_descr_multiline_value";case 22:return this.pushState("CLASSDEF"),38;case 23:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 24:return this.popState(),this.pushState("CLASSDEFID"),39;case 25:return this.popState(),40;case 26:return this.pushState("CLASS"),45;case 27:return this.popState(),this.pushState("CLASS_STYLE"),46;case 28:return this.popState(),47;case 29:return this.pushState("STYLE"),42;case 30:return this.popState(),this.pushState("STYLEDEF_STYLES"),43;case 31:return this.popState(),44;case 32:return this.pushState("SCALE"),17;case 33:return 18;case 34:this.popState();break;case 35:this.pushState("STATE");break;case 36:return this.popState(),F.yytext=F.yytext.slice(0,-8).trim(),25;case 37:return this.popState(),F.yytext=F.yytext.slice(0,-8).trim(),26;case 38:return this.popState(),F.yytext=F.yytext.slice(0,-10).trim(),27;case 39:return this.popState(),F.yytext=F.yytext.slice(0,-8).trim(),25;case 40:return this.popState(),F.yytext=F.yytext.slice(0,-8).trim(),26;case 41:return this.popState(),F.yytext=F.yytext.slice(0,-10).trim(),27;case 42:return 48;case 43:return 49;case 44:return 50;case 45:return 51;case 46:this.pushState("STATE_STRING");break;case 47:return this.pushState("STATE_ID"),"AS";case 48:return this.popState(),"ID";case 49:this.popState();break;case 50:return"STATE_DESCR";case 51:return 19;case 52:this.popState();break;case 53:return this.popState(),this.pushState("struct"),20;case 54:break;case 55:return this.popState(),21;case 56:break;case 57:return this.begin("NOTE"),29;case 58:return this.popState(),this.pushState("NOTE_ID"),56;case 59:return this.popState(),this.pushState("NOTE_ID"),57;case 60:this.popState(),this.pushState("FLOATING_NOTE");break;case 61:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 62:break;case 63:return"NOTE_TEXT";case 64:return this.popState(),"ID";case 65:return this.popState(),this.pushState("NOTE_TEXT"),24;case 66:return this.popState(),F.yytext=F.yytext.substr(2).trim(),31;case 67:return this.popState(),F.yytext=F.yytext.slice(0,-8).trim(),31;case 68:return 6;case 69:return 6;case 70:return 16;case 71:return 54;case 72:return 24;case 73:return F.yytext=F.yytext.trim(),14;case 74:return 15;case 75:return 28;case 76:return 55;case 77:return 5;case 78:return"INVALID"}},"anonymous"),rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[9,10],inclusive:!1},struct:{rules:[9,10,22,26,29,35,42,43,44,45,54,55,56,57,71,72,73,74,75],inclusive:!1},FLOATING_NOTE_ID:{rules:[64],inclusive:!1},FLOATING_NOTE:{rules:[61,62,63],inclusive:!1},NOTE_TEXT:{rules:[66,67],inclusive:!1},NOTE_ID:{rules:[65],inclusive:!1},NOTE:{rules:[58,59,60],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[31],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[30],inclusive:!1},CLASS_STYLE:{rules:[28],inclusive:!1},CLASS:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[25],inclusive:!1},CLASSDEF:{rules:[23,24],inclusive:!1},acc_descr_multiline:{rules:[20,21],inclusive:!1},acc_descr:{rules:[18],inclusive:!1},acc_title:{rules:[16],inclusive:!1},SCALE:{rules:[13,14,33,34],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[48],inclusive:!1},STATE_STRING:{rules:[49,50],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[9,10,36,37,38,39,40,41,46,47,51,52,53],inclusive:!1},ID:{rules:[9,10],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,10,11,12,15,17,19,22,26,29,32,35,53,57,68,69,70,71,72,73,74,76,77,78],inclusive:!0}}};return N}();I.lexer=M;function O(){this.yy={}}return x(O,"Parser"),O.prototype=I,I.Parser=O,new O}();NE.parser=NE;var Oz=NE,gbt="TB",Pz="TB",HL="dir",A1="state",DE="relation",pbt="classDef",vbt="style",mbt="applyClass",tg="default",Bz="divider",Fz="fill:none",$z="fill: #333",zz="c",Vz="text",Gz="normal",Bx="rect",Fx="rectWithTitle",ybt="stateStart",xbt="stateEnd",qL="divider",XL="roundedWithTitle",bbt="note",Tbt="noteGroup",Rp="statediagram",wbt="state",Ebt=`${Rp}-${wbt}`,Uz="transition",kbt="note",Cbt="note-edge",Sbt=`${Uz} ${Cbt}`,_bt=`${Rp}-${kbt}`,Abt="cluster",Lbt=`${Rp}-${Abt}`,Rbt="cluster-alt",Ibt=`${Rp}-${Rbt}`,Wz="parent",Yz="note",Nbt="state",e_="----",Dbt=`${e_}${Yz}`,jL=`${e_}${Wz}`,Hz=x((e,t=Pz)=>{if(!e.doc)return t;let r=t;for(const n of e.doc)n.stmt==="dir"&&(r=n.value);return r},"getDir"),Mbt=x(function(e,t){return t.db.getClasses()},"getClasses"),Obt=x(async function(e,t,r,n){et.info("REF0:"),et.info("Drawing state diagram (v2)",t);const{securityLevel:i,state:a,layout:s}=pt();n.db.extract(n.db.getRootDocV2());const o=n.db.getData(),l=yp(t,i);o.type=n.type,o.layoutAlgorithm=s,o.nodeSpacing=(a==null?void 0:a.nodeSpacing)||50,o.rankSpacing=(a==null?void 0:a.rankSpacing)||50,o.markers=["barb"],o.diagramId=t,await dp(o,l);const u=8;De.insertTitle(l,"statediagramTitleText",(a==null?void 0:a.titleTopMargin)??25,n.db.getDiagramTitle()),xp(l,u,Rp,(a==null?void 0:a.useMaxWidth)??!0)},"draw"),Pbt={getClasses:Mbt,draw:Obt,getDir:Hz},L1=new Map,To=0;function R1(e="",t=0,r="",n=e_){const i=r!==null&&r.length>0?`${n}${r}`:"";return`${Nbt}-${e}${i}-${t}`}x(R1,"stateDomId");var Bbt=x((e,t,r,n,i,a,s,o)=>{et.trace("items",t),t.forEach(l=>{switch(l.stmt){case A1:$d(e,l,r,n,i,a,s,o);break;case tg:$d(e,l,r,n,i,a,s,o);break;case DE:{$d(e,l.state1,r,n,i,a,s,o),$d(e,l.state2,r,n,i,a,s,o);const u={id:"edge"+To,start:l.state1.id,end:l.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:Fz,labelStyle:"",label:Xt.sanitizeText(l.description,pt()),arrowheadStyle:$z,labelpos:zz,labelType:Vz,thickness:Gz,classes:Uz,look:s};i.push(u),To++}break}})},"setupDoc"),KL=x((e,t=Pz)=>{let r=t;if(e.doc)for(const n of e.doc)n.stmt==="dir"&&(r=n.value);return r},"getDir");function Fd(e,t,r){if(!t.id||t.id==="</join></fork>"||t.id==="</choice>")return;t.cssClasses&&(Array.isArray(t.cssCompiledStyles)||(t.cssCompiledStyles=[]),t.cssClasses.split(" ").forEach(i=>{if(r.get(i)){const a=r.get(i);t.cssCompiledStyles=[...t.cssCompiledStyles,...a.styles]}}));const n=e.find(i=>i.id===t.id);n?Object.assign(n,t):e.push(t)}x(Fd,"insertOrUpdateNode");function qz(e){var t;return((t=e==null?void 0:e.classes)==null?void 0:t.join(" "))??""}x(qz,"getClassesFromDbInfo");function Xz(e){return(e==null?void 0:e.styles)??[]}x(Xz,"getStylesFromDbInfo");var $d=x((e,t,r,n,i,a,s,o)=>{var d,g;const l=t.id,u=r.get(l),h=qz(u),f=Xz(u);if(et.info("dataFetcher parsedItem",t,u,f),l!=="root"){let p=Bx;t.start===!0?p=ybt:t.start===!1&&(p=xbt),t.type!==tg&&(p=t.type),L1.get(l)||L1.set(l,{id:l,shape:p,description:Xt.sanitizeText(l,pt()),cssClasses:`${h} ${Ebt}`,cssStyles:f});const v=L1.get(l);t.description&&(Array.isArray(v.description)?(v.shape=Fx,v.description.push(t.description)):((d=v.description)==null?void 0:d.length)>0?(v.shape=Fx,v.description===l?v.description=[t.description]:v.description=[v.description,t.description]):(v.shape=Bx,v.description=t.description),v.description=Xt.sanitizeTextOrArray(v.description,pt())),((g=v.description)==null?void 0:g.length)===1&&v.shape===Fx&&(v.type==="group"?v.shape=XL:v.shape=Bx),!v.type&&t.doc&&(et.info("Setting cluster for XCX",l,KL(t)),v.type="group",v.isGroup=!0,v.dir=KL(t),v.shape=t.type===Bz?qL:XL,v.cssClasses=`${v.cssClasses} ${Lbt} ${a?Ibt:""}`);const m={labelStyle:"",shape:v.shape,label:v.description,cssClasses:v.cssClasses,cssCompiledStyles:[],cssStyles:v.cssStyles,id:l,dir:v.dir,domId:R1(l,To),type:v.type,isGroup:v.type==="group",padding:8,rx:10,ry:10,look:s};if(m.shape===qL&&(m.label=""),e&&e.id!=="root"&&(et.trace("Setting node ",l," to be child of its parent ",e.id),m.parentId=e.id),m.centerLabel=!0,t.note){const y={labelStyle:"",shape:bbt,label:t.note.text,cssClasses:_bt,cssStyles:[],cssCompilesStyles:[],id:l+Dbt+"-"+To,domId:R1(l,To,Yz),type:v.type,isGroup:v.type==="group",padding:pt().flowchart.padding,look:s,position:t.note.position},b=l+jL,T={labelStyle:"",shape:Tbt,label:t.note.text,cssClasses:v.cssClasses,cssStyles:[],id:l+jL,domId:R1(l,To,Wz),type:"group",isGroup:!0,padding:16,look:s,position:t.note.position};To++,T.id=b,y.parentId=b,Fd(n,T,o),Fd(n,y,o),Fd(n,m,o);let w=l,k=y.id;t.note.position==="left of"&&(w=y.id,k=l),i.push({id:w+"-"+k,start:w,end:k,arrowhead:"none",arrowTypeEnd:"",style:Fz,labelStyle:"",classes:Sbt,arrowheadStyle:$z,labelpos:zz,labelType:Vz,thickness:Gz,look:s})}else Fd(n,m,o)}t.doc&&(et.trace("Adding nodes children "),Bbt(t,t.doc,r,n,i,!a,s,o))},"dataFetcher"),Fbt=x(()=>{L1.clear(),To=0},"reset"),ME="[*]",ZL="start",QL=ME,JL="end",tR="color",eR="fill",$bt="bgFill",zbt=",";function OE(){return new Map}x(OE,"newClassesList");var rR=x(()=>({relations:[],states:new Map,documents:{}}),"newDoc"),_0=x(e=>JSON.parse(JSON.stringify(e)),"clone"),$l,Cl=($l=class{constructor(t){Se(this,"version");Se(this,"nodes",[]);Se(this,"edges",[]);Se(this,"rootDoc",[]);Se(this,"classes",OE());Se(this,"documents",{root:rR()});Se(this,"currentDocument",this.documents.root);Se(this,"startEndCount",0);Se(this,"dividerCnt",0);Se(this,"getAccTitle",wn);Se(this,"setAccTitle",cn);Se(this,"getAccDescription",kn);Se(this,"setAccDescription",En);Se(this,"setDiagramTitle",Fn);Se(this,"getDiagramTitle",gn);this.clear(),this.version=t,this.setRootDoc=this.setRootDoc.bind(this),this.getDividerId=this.getDividerId.bind(this),this.setDirection=this.setDirection.bind(this),this.trimColon=this.trimColon.bind(this)}setRootDoc(t){et.info("Setting root doc",t),this.rootDoc=t,this.version===1?this.extract(t):this.extract(this.getRootDocV2())}getRootDoc(){return this.rootDoc}docTranslator(t,r,n){if(r.stmt===DE)this.docTranslator(t,r.state1,!0),this.docTranslator(t,r.state2,!1);else if(r.stmt===A1&&(r.id==="[*]"?(r.id=n?t.id+"_start":t.id+"_end",r.start=n):r.id=r.id.trim()),r.doc){const i=[];let a=[],s;for(s=0;s<r.doc.length;s++)if(r.doc[s].type===Bz){const o=_0(r.doc[s]);o.doc=_0(a),i.push(o),a=[]}else a.push(r.doc[s]);if(i.length>0&&a.length>0){const o={stmt:A1,id:IP(),type:"divider",doc:_0(a)};i.push(_0(o)),r.doc=i}r.doc.forEach(o=>this.docTranslator(r,o,!0))}}getRootDocV2(){return this.docTranslator({id:"root"},{id:"root",doc:this.rootDoc},!0),{id:"root",doc:this.rootDoc}}extract(t){let r;t.doc?r=t.doc:r=t,et.info(r),this.clear(!0),et.info("Extract initial document:",r),r.forEach(s=>{switch(et.warn("Statement",s.stmt),s.stmt){case A1:this.addState(s.id.trim(),s.type,s.doc,s.description,s.note,s.classes,s.styles,s.textStyles);break;case DE:this.addRelation(s.state1,s.state2,s.description);break;case pbt:this.addStyleClass(s.id.trim(),s.classes);break;case vbt:{const o=s.id.trim().split(","),l=s.styleClass.split(",");o.forEach(u=>{let h=this.getState(u);if(h===void 0){const f=u.trim();this.addState(f),h=this.getState(f)}h.styles=l.map(f=>{var d;return(d=f.replace(/;/g,""))==null?void 0:d.trim()})})}break;case mbt:this.setCssClass(s.id.trim(),s.styleClass);break}});const n=this.getStates(),a=pt().look;Fbt(),$d(void 0,this.getRootDocV2(),n,this.nodes,this.edges,!0,a,this.classes),this.nodes.forEach(s=>{if(Array.isArray(s.label)){if(s.description=s.label.slice(1),s.isGroup&&s.description.length>0)throw new Error("Group nodes can only have label. Remove the additional description for node ["+s.id+"]");s.label=s.label[0]}})}addState(t,r=tg,n=null,i=null,a=null,s=null,o=null,l=null){const u=t==null?void 0:t.trim();if(this.currentDocument.states.has(u)?(this.currentDocument.states.get(u).doc||(this.currentDocument.states.get(u).doc=n),this.currentDocument.states.get(u).type||(this.currentDocument.states.get(u).type=r)):(et.info("Adding state ",u,i),this.currentDocument.states.set(u,{id:u,descriptions:[],type:r,doc:n,note:a,classes:[],styles:[],textStyles:[]})),i&&(et.info("Setting state description",u,i),typeof i=="string"&&this.addDescription(u,i.trim()),typeof i=="object"&&i.forEach(h=>this.addDescription(u,h.trim()))),a){const h=this.currentDocument.states.get(u);h.note=a,h.note.text=Xt.sanitizeText(h.note.text,pt())}s&&(et.info("Setting state classes",u,s),(typeof s=="string"?[s]:s).forEach(f=>this.setCssClass(u,f.trim()))),o&&(et.info("Setting state styles",u,o),(typeof o=="string"?[o]:o).forEach(f=>this.setStyle(u,f.trim()))),l&&(et.info("Setting state styles",u,o),(typeof l=="string"?[l]:l).forEach(f=>this.setTextStyle(u,f.trim())))}clear(t){this.nodes=[],this.edges=[],this.documents={root:rR()},this.currentDocument=this.documents.root,this.startEndCount=0,this.classes=OE(),t||dn()}getState(t){return this.currentDocument.states.get(t)}getStates(){return this.currentDocument.states}logDocuments(){et.info("Documents = ",this.documents)}getRelations(){return this.currentDocument.relations}startIdIfNeeded(t=""){let r=t;return t===ME&&(this.startEndCount++,r=`${ZL}${this.startEndCount}`),r}startTypeIfNeeded(t="",r=tg){return t===ME?ZL:r}endIdIfNeeded(t=""){let r=t;return t===QL&&(this.startEndCount++,r=`${JL}${this.startEndCount}`),r}endTypeIfNeeded(t="",r=tg){return t===QL?JL:r}addRelationObjs(t,r,n){let i=this.startIdIfNeeded(t.id.trim()),a=this.startTypeIfNeeded(t.id.trim(),t.type),s=this.startIdIfNeeded(r.id.trim()),o=this.startTypeIfNeeded(r.id.trim(),r.type);this.addState(i,a,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),this.addState(s,o,r.doc,r.description,r.note,r.classes,r.styles,r.textStyles),this.currentDocument.relations.push({id1:i,id2:s,relationTitle:Xt.sanitizeText(n,pt())})}addRelation(t,r,n){if(typeof t=="object")this.addRelationObjs(t,r,n);else{const i=this.startIdIfNeeded(t.trim()),a=this.startTypeIfNeeded(t),s=this.endIdIfNeeded(r.trim()),o=this.endTypeIfNeeded(r);this.addState(i,a),this.addState(s,o),this.currentDocument.relations.push({id1:i,id2:s,title:Xt.sanitizeText(n,pt())})}}addDescription(t,r){const n=this.currentDocument.states.get(t),i=r.startsWith(":")?r.replace(":","").trim():r;n.descriptions.push(Xt.sanitizeText(i,pt()))}cleanupLabel(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()}getDividerId(){return this.dividerCnt++,"divider-id-"+this.dividerCnt}addStyleClass(t,r=""){this.classes.has(t)||this.classes.set(t,{id:t,styles:[],textStyles:[]});const n=this.classes.get(t);r!=null&&r.split(zbt).forEach(i=>{const a=i.replace(/([^;]*);/,"$1").trim();if(RegExp(tR).exec(i)){const o=a.replace(eR,$bt).replace(tR,eR);n.textStyles.push(o)}n.styles.push(a)})}getClasses(){return this.classes}setCssClass(t,r){t.split(",").forEach(n=>{let i=this.getState(n);if(i===void 0){const a=n.trim();this.addState(a),i=this.getState(a)}i.classes.push(r)})}setStyle(t,r){const n=this.getState(t);n!==void 0&&n.styles.push(r)}setTextStyle(t,r){const n=this.getState(t);n!==void 0&&n.textStyles.push(r)}getDirectionStatement(){return this.rootDoc.find(t=>t.stmt===HL)}getDirection(){var t;return((t=this.getDirectionStatement())==null?void 0:t.value)??gbt}setDirection(t){const r=this.getDirectionStatement();r?r.value=t:this.rootDoc.unshift({stmt:HL,value:t})}trimColon(t){return t&&t[0]===":"?t.substr(1).trim():t.trim()}getData(){const t=pt();return{nodes:this.nodes,edges:this.edges,other:{},config:t,direction:Hz(this.getRootDocV2())}}getConfig(){return pt().state}},x($l,"StateDB"),Se($l,"relationType",{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3}),$l),Vbt=x(e=>`
defs #statediagram-barbEnd {
    fill: ${e.transitionColor};
    stroke: ${e.transitionColor};
  }
g.stateGroup text {
  fill: ${e.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${e.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${e.stateLabelColor};
}

g.stateGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.stateGroup line {
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${e.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${e.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${e.noteBorderColor};
  fill: ${e.noteBkgColor};

  text {
    fill: ${e.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${e.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel {
  background-color: ${e.edgeLabelBackground};
  p {
    background-color: ${e.edgeLabelBackground};
  }
  rect {
    opacity: 0.5;
    background-color: ${e.edgeLabelBackground};
    fill: ${e.edgeLabelBackground};
  }
  text-align: center;
}
.edgeLabel .label text {
  fill: ${e.transitionLabelColor||e.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${e.transitionLabelColor||e.tertiaryTextColor};
}

.stateLabel text {
  fill: ${e.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node .fork-join {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node circle.state-end {
  fill: ${e.innerEndBackground};
  stroke: ${e.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${e.compositeBackground||e.background};
  // stroke: ${e.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${e.stateBkg||e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${e.lineColor};
}

.statediagram-cluster rect {
  fill: ${e.compositeTitleBackground};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${e.stateLabelColor};
  // line-height: 1;
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${e.stateBorder||e.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${e.compositeBackground||e.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${e.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${e.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${e.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${e.lineColor};
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,"getStyles"),jz=Vbt,r_={},Gbt=x((e,t)=>{r_[e]=t},"set"),Ubt=x(e=>r_[e],"get"),Kz=x(()=>Object.keys(r_),"keys"),Wbt=x(()=>Kz().length,"size"),Ybt={get:Ubt,set:Gbt,keys:Kz,size:Wbt},Hbt=x(e=>e.append("circle").attr("class","start-state").attr("r",pt().state.sizeUnit).attr("cx",pt().state.padding+pt().state.sizeUnit).attr("cy",pt().state.padding+pt().state.sizeUnit),"drawStartState"),qbt=x(e=>e.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",pt().state.textHeight).attr("class","divider").attr("x2",pt().state.textHeight*2).attr("y1",0).attr("y2",0),"drawDivider"),Xbt=x((e,t)=>{const r=e.append("text").attr("x",2*pt().state.padding).attr("y",pt().state.textHeight+2*pt().state.padding).attr("font-size",pt().state.fontSize).attr("class","state-title").text(t.id),n=r.node().getBBox();return e.insert("rect",":first-child").attr("x",pt().state.padding).attr("y",pt().state.padding).attr("width",n.width+2*pt().state.padding).attr("height",n.height+2*pt().state.padding).attr("rx",pt().state.radius),r},"drawSimpleState"),jbt=x((e,t)=>{const r=x(function(d,g,p){const v=d.append("tspan").attr("x",2*pt().state.padding).text(g);p||v.attr("dy",pt().state.textHeight)},"addTspan"),i=e.append("text").attr("x",2*pt().state.padding).attr("y",pt().state.textHeight+1.3*pt().state.padding).attr("font-size",pt().state.fontSize).attr("class","state-title").text(t.descriptions[0]).node().getBBox(),a=i.height,s=e.append("text").attr("x",pt().state.padding).attr("y",a+pt().state.padding*.4+pt().state.dividerMargin+pt().state.textHeight).attr("class","state-description");let o=!0,l=!0;t.descriptions.forEach(function(d){o||(r(s,d,l),l=!1),o=!1});const u=e.append("line").attr("x1",pt().state.padding).attr("y1",pt().state.padding+a+pt().state.dividerMargin/2).attr("y2",pt().state.padding+a+pt().state.dividerMargin/2).attr("class","descr-divider"),h=s.node().getBBox(),f=Math.max(h.width,i.width);return u.attr("x2",f+3*pt().state.padding),e.insert("rect",":first-child").attr("x",pt().state.padding).attr("y",pt().state.padding).attr("width",f+2*pt().state.padding).attr("height",h.height+a+2*pt().state.padding).attr("rx",pt().state.radius),e},"drawDescrState"),Kbt=x((e,t,r)=>{const n=pt().state.padding,i=2*pt().state.padding,a=e.node().getBBox(),s=a.width,o=a.x,l=e.append("text").attr("x",0).attr("y",pt().state.titleShift).attr("font-size",pt().state.fontSize).attr("class","state-title").text(t.id),h=l.node().getBBox().width+i;let f=Math.max(h,s);f===s&&(f=f+i);let d;const g=e.node().getBBox();t.doc,d=o-n,h>s&&(d=(s-f)/2+n),Math.abs(o-g.x)<n&&h>s&&(d=o-(h-s)/2);const p=1-pt().state.textHeight;return e.insert("rect",":first-child").attr("x",d).attr("y",p).attr("class",r?"alt-composit":"composit").attr("width",f).attr("height",g.height+pt().state.textHeight+pt().state.titleShift+1).attr("rx","0"),l.attr("x",d+n),h<=s&&l.attr("x",o+(f-i)/2-h/2+n),e.insert("rect",":first-child").attr("x",d).attr("y",pt().state.titleShift-pt().state.textHeight-pt().state.padding).attr("width",f).attr("height",pt().state.textHeight*3).attr("rx",pt().state.radius),e.insert("rect",":first-child").attr("x",d).attr("y",pt().state.titleShift-pt().state.textHeight-pt().state.padding).attr("width",f).attr("height",g.height+3+2*pt().state.textHeight).attr("rx",pt().state.radius),e},"addTitleAndBox"),Zbt=x(e=>(e.append("circle").attr("class","end-state-outer").attr("r",pt().state.sizeUnit+pt().state.miniPadding).attr("cx",pt().state.padding+pt().state.sizeUnit+pt().state.miniPadding).attr("cy",pt().state.padding+pt().state.sizeUnit+pt().state.miniPadding),e.append("circle").attr("class","end-state-inner").attr("r",pt().state.sizeUnit).attr("cx",pt().state.padding+pt().state.sizeUnit+2).attr("cy",pt().state.padding+pt().state.sizeUnit+2)),"drawEndState"),Qbt=x((e,t)=>{let r=pt().state.forkWidth,n=pt().state.forkHeight;if(t.parentId){let i=r;r=n,n=i}return e.append("rect").style("stroke","black").style("fill","black").attr("width",r).attr("height",n).attr("x",pt().state.padding).attr("y",pt().state.padding)},"drawForkJoinState"),Jbt=x((e,t,r,n)=>{let i=0;const a=n.append("text");a.style("text-anchor","start"),a.attr("class","noteText");let s=e.replace(/\r\n/g,"<br/>");s=s.replace(/\n/g,"<br/>");const o=s.split(Xt.lineBreakRegex);let l=1.25*pt().state.noteMargin;for(const u of o){const h=u.trim();if(h.length>0){const f=a.append("tspan");if(f.text(h),l===0){const d=f.node().getBBox();l+=d.height}i+=l,f.attr("x",t+pt().state.noteMargin),f.attr("y",r+i+1.25*pt().state.noteMargin)}}return{textWidth:a.node().getBBox().width,textHeight:i}},"_drawLongText"),tTt=x((e,t)=>{t.attr("class","state-note");const r=t.append("rect").attr("x",0).attr("y",pt().state.padding),n=t.append("g"),{textWidth:i,textHeight:a}=Jbt(e,0,0,n);return r.attr("height",a+2*pt().state.noteMargin),r.attr("width",i+pt().state.noteMargin*2),r},"drawNote"),nR=x(function(e,t){const r=t.id,n={id:r,label:t.id,width:0,height:0},i=e.append("g").attr("id",r).attr("class","stateGroup");t.type==="start"&&Hbt(i),t.type==="end"&&Zbt(i),(t.type==="fork"||t.type==="join")&&Qbt(i,t),t.type==="note"&&tTt(t.note.text,i),t.type==="divider"&&qbt(i),t.type==="default"&&t.descriptions.length===0&&Xbt(i,t),t.type==="default"&&t.descriptions.length>0&&jbt(i,t);const a=i.node().getBBox();return n.width=a.width+2*pt().state.padding,n.height=a.height+2*pt().state.padding,Ybt.set(r,n),n},"drawState"),iR=0,eTt=x(function(e,t,r){const n=x(function(l){switch(l){case Cl.relationType.AGGREGATION:return"aggregation";case Cl.relationType.EXTENSION:return"extension";case Cl.relationType.COMPOSITION:return"composition";case Cl.relationType.DEPENDENCY:return"dependency"}},"getRelationType");t.points=t.points.filter(l=>!Number.isNaN(l.y));const i=t.points,a=vh().x(function(l){return l.x}).y(function(l){return l.y}).curve(uu),s=e.append("path").attr("d",a(i)).attr("id","edge"+iR).attr("class","transition");let o="";if(pt().state.arrowMarkerAbsolute&&(o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,o=o.replace(/\(/g,"\\("),o=o.replace(/\)/g,"\\)")),s.attr("marker-end","url("+o+"#"+n(Cl.relationType.DEPENDENCY)+"End)"),r.title!==void 0){const l=e.append("g").attr("class","stateLabel"),{x:u,y:h}=De.calcLabelPosition(t.points),f=Xt.getRows(r.title);let d=0;const g=[];let p=0,v=0;for(let b=0;b<=f.length;b++){const T=l.append("text").attr("text-anchor","middle").text(f[b]).attr("x",u).attr("y",h+d),w=T.node().getBBox();p=Math.max(p,w.width),v=Math.min(v,w.x),et.info(w.x,u,h+d),d===0&&(d=T.node().getBBox().height,et.info("Title height",d,h)),g.push(T)}let m=d*f.length;if(f.length>1){const b=(f.length-1)*d*.5;g.forEach((T,w)=>T.attr("y",h+w*d-b)),m=d*f.length}const y=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",u-p/2-pt().state.padding/2).attr("y",h-m/2-pt().state.padding/2-3.5).attr("width",p+pt().state.padding).attr("height",m+pt().state.padding),et.info(y)}iR++},"drawEdge"),Wi,$x={},rTt=x(function(){},"setConf"),nTt=x(function(e){e.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),iTt=x(function(e,t,r,n){Wi=pt().state;const i=pt().securityLevel;let a;i==="sandbox"&&(a=qt("#i"+t));const s=qt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body"),o=i==="sandbox"?a.nodes()[0].contentDocument:document;et.debug("Rendering diagram "+e);const l=s.select(`[id='${t}']`);nTt(l);const u=n.db.getRootDoc();Zz(u,l,void 0,!1,s,o,n);const h=Wi.padding,f=l.node().getBBox(),d=f.width+h*2,g=f.height+h*2,p=d*1.75;Oi(l,g,p,Wi.useMaxWidth),l.attr("viewBox",`${f.x-Wi.padding}  ${f.y-Wi.padding} `+d+" "+g)},"draw"),aTt=x(e=>e?e.length*Wi.fontSizeFactor:1,"getLabelWidth"),Zz=x((e,t,r,n,i,a,s)=>{const o=new Fi({compound:!0,multigraph:!0});let l,u=!0;for(l=0;l<e.length;l++)if(e[l].stmt==="relation"){u=!1;break}r?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:u?1:Wi.edgeLengthFactor,nodeSep:u?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:u?1:Wi.edgeLengthFactor,nodeSep:u?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel(function(){return{}});const h=s.db.getStates(),f=s.db.getRelations(),d=Object.keys(h);for(const y of d){const b=h[y];r&&(b.parentId=r);let T;if(b.doc){let w=t.append("g").attr("id",b.id).attr("class","stateGroup");T=Zz(b.doc,w,b.id,!n,i,a,s);{w=Kbt(w,b,n);let k=w.node().getBBox();T.width=k.width,T.height=k.height+Wi.padding/2,$x[b.id]={y:Wi.compositTitleSize}}}else T=nR(t,b,o);if(b.note){const w={descriptions:[],id:b.id+"-note",note:b.note,type:"note"},k=nR(t,w,o);b.note.position==="left of"?(o.setNode(T.id+"-note",k),o.setNode(T.id,T)):(o.setNode(T.id,T),o.setNode(T.id+"-note",k)),o.setParent(T.id,T.id+"-group"),o.setParent(T.id+"-note",T.id+"-group")}else o.setNode(T.id,T)}et.debug("Count=",o.nodeCount(),o);let g=0;f.forEach(function(y){g++,et.debug("Setting edge",y),o.setEdge(y.id1,y.id2,{relation:y,width:aTt(y.title),height:Wi.labelHeight*Xt.getRows(y.title).length,labelpos:"c"},"id"+g)}),dF(o),et.debug("Graph after layout",o.nodes());const p=t.node();o.nodes().forEach(function(y){y!==void 0&&o.node(y)!==void 0?(et.warn("Node "+y+": "+JSON.stringify(o.node(y))),i.select("#"+p.id+" #"+y).attr("transform","translate("+(o.node(y).x-o.node(y).width/2)+","+(o.node(y).y+($x[y]?$x[y].y:0)-o.node(y).height/2)+" )"),i.select("#"+p.id+" #"+y).attr("data-x-shift",o.node(y).x-o.node(y).width/2),a.querySelectorAll("#"+p.id+" #"+y+" .divider").forEach(T=>{const w=T.parentElement;let k=0,S=0;w&&(w.parentElement&&(k=w.parentElement.getBBox().width),S=parseInt(w.getAttribute("data-x-shift"),10),Number.isNaN(S)&&(S=0)),T.setAttribute("x1",0-S+8),T.setAttribute("x2",k-S-8)})):et.debug("No Node "+y+": "+JSON.stringify(o.node(y)))});let v=p.getBBox();o.edges().forEach(function(y){y!==void 0&&o.edge(y)!==void 0&&(et.debug("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(o.edge(y))),eTt(t,o.edge(y),o.edge(y).relation))}),v=p.getBBox();const m={id:r||"root",label:r||"root",width:0,height:0};return m.width=v.width+2*Wi.padding,m.height=v.height+2*Wi.padding,et.debug("Doc rendered",m,o),m},"renderDoc"),sTt={setConf:rTt,draw:iTt},oTt={parser:Oz,get db(){return new Cl(1)},renderer:sTt,styles:jz,init:x(e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const lTt=Object.freeze(Object.defineProperty({__proto__:null,diagram:oTt},Symbol.toStringTag,{value:"Module"}));var cTt={parser:Oz,get db(){return new Cl(2)},renderer:Pbt,styles:jz,init:x(e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const uTt=Object.freeze(Object.defineProperty({__proto__:null,diagram:cTt},Symbol.toStringTag,{value:"Module"}));var PE=function(){var e=x(function(f,d,g,p){for(g=g||{},p=f.length;p--;g[f[p]]=d);return g},"o"),t=[6,8,10,11,12,14,16,17,18],r=[1,9],n=[1,10],i=[1,11],a=[1,12],s=[1,13],o=[1,14],l={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:x(function(d,g,p,v,m,y,b){var T=y.length-1;switch(m){case 1:return y[T-1];case 2:this.$=[];break;case 3:y[T-1].push(y[T]),this.$=y[T-1];break;case 4:case 5:this.$=y[T];break;case 6:case 7:this.$=[];break;case 8:v.setDiagramTitle(y[T].substr(6)),this.$=y[T].substr(6);break;case 9:this.$=y[T].trim(),v.setAccTitle(this.$);break;case 10:case 11:this.$=y[T].trim(),v.setAccDescription(this.$);break;case 12:v.addSection(y[T].substr(8)),this.$=y[T].substr(8);break;case 13:v.addTask(y[T-1],y[T]),this.$="task";break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:n,14:i,16:a,17:s,18:o},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:15,11:r,12:n,14:i,16:a,17:s,18:o},e(t,[2,5]),e(t,[2,6]),e(t,[2,8]),{13:[1,16]},{15:[1,17]},e(t,[2,11]),e(t,[2,12]),{19:[1,18]},e(t,[2,4]),e(t,[2,9]),e(t,[2,10]),e(t,[2,13])],defaultActions:{},parseError:x(function(d,g){if(g.recoverable)this.trace(d);else{var p=new Error(d);throw p.hash=g,p}},"parseError"),parse:x(function(d){var g=this,p=[0],v=[],m=[null],y=[],b=this.table,T="",w=0,k=0,S=2,E=1,L=y.slice.call(arguments,1),A=Object.create(this.lexer),R={yy:{}};for(var C in this.yy)Object.prototype.hasOwnProperty.call(this.yy,C)&&(R.yy[C]=this.yy[C]);A.setInput(d,R.yy),R.yy.lexer=A,R.yy.parser=this,typeof A.yylloc>"u"&&(A.yylloc={});var D=A.yylloc;y.push(D);var P=A.options&&A.options.ranges;typeof R.yy.parseError=="function"?this.parseError=R.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function _(K){p.length=p.length-2*K,m.length=m.length-K,y.length=y.length-K}x(_,"popStack");function I(){var K;return K=v.pop()||A.lex()||E,typeof K!="number"&&(K instanceof Array&&(v=K,K=v.pop()),K=g.symbols_[K]||K),K}x(I,"lex");for(var M,O,N,B,z={},F,V,G,Y;;){if(O=p[p.length-1],this.defaultActions[O]?N=this.defaultActions[O]:((M===null||typeof M>"u")&&(M=I()),N=b[O]&&b[O][M]),typeof N>"u"||!N.length||!N[0]){var Q="";Y=[];for(F in b[O])this.terminals_[F]&&F>S&&Y.push("'"+this.terminals_[F]+"'");A.showPosition?Q="Parse error on line "+(w+1)+`:
`+A.showPosition()+`
Expecting `+Y.join(", ")+", got '"+(this.terminals_[M]||M)+"'":Q="Parse error on line "+(w+1)+": Unexpected "+(M==E?"end of input":"'"+(this.terminals_[M]||M)+"'"),this.parseError(Q,{text:A.match,token:this.terminals_[M]||M,line:A.yylineno,loc:D,expected:Y})}if(N[0]instanceof Array&&N.length>1)throw new Error("Parse Error: multiple actions possible at state: "+O+", token: "+M);switch(N[0]){case 1:p.push(M),m.push(A.yytext),y.push(A.yylloc),p.push(N[1]),M=null,k=A.yyleng,T=A.yytext,w=A.yylineno,D=A.yylloc;break;case 2:if(V=this.productions_[N[1]][1],z.$=m[m.length-V],z._$={first_line:y[y.length-(V||1)].first_line,last_line:y[y.length-1].last_line,first_column:y[y.length-(V||1)].first_column,last_column:y[y.length-1].last_column},P&&(z._$.range=[y[y.length-(V||1)].range[0],y[y.length-1].range[1]]),B=this.performAction.apply(z,[T,k,w,R.yy,N[1],m,y].concat(L)),typeof B<"u")return B;V&&(p=p.slice(0,-1*V*2),m=m.slice(0,-1*V),y=y.slice(0,-1*V)),p.push(this.productions_[N[1]][0]),m.push(z.$),y.push(z._$),G=b[p[p.length-2]][p[p.length-1]],p.push(G);break;case 3:return!0}}return!0},"parse")},u=function(){var f={EOF:1,parseError:x(function(g,p){if(this.yy.parser)this.yy.parser.parseError(g,p);else throw new Error(g)},"parseError"),setInput:x(function(d,g){return this.yy=g||this.yy||{},this._input=d,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var d=this._input[0];this.yytext+=d,this.yyleng++,this.offset++,this.match+=d,this.matched+=d;var g=d.match(/(?:\r\n?|\n).*/g);return g?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),d},"input"),unput:x(function(d){var g=d.length,p=d.split(/(?:\r\n?|\n)/g);this._input=d+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.offset-=g;var v=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),p.length-1&&(this.yylineno-=p.length-1);var m=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:p?(p.length===v.length?this.yylloc.first_column:0)+v[v.length-p.length].length-p[0].length:this.yylloc.first_column-g},this.options.ranges&&(this.yylloc.range=[m[0],m[0]+this.yyleng-g]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(d){this.unput(this.match.slice(d))},"less"),pastInput:x(function(){var d=this.matched.substr(0,this.matched.length-this.match.length);return(d.length>20?"...":"")+d.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var d=this.match;return d.length<20&&(d+=this._input.substr(0,20-d.length)),(d.substr(0,20)+(d.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var d=this.pastInput(),g=new Array(d.length+1).join("-");return d+this.upcomingInput()+`
`+g+"^"},"showPosition"),test_match:x(function(d,g){var p,v,m;if(this.options.backtrack_lexer&&(m={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(m.yylloc.range=this.yylloc.range.slice(0))),v=d[0].match(/(?:\r\n?|\n).*/g),v&&(this.yylineno+=v.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:v?v[v.length-1].length-v[v.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+d[0].length},this.yytext+=d[0],this.match+=d[0],this.matches=d,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(d[0].length),this.matched+=d[0],p=this.performAction.call(this,this.yy,this,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),p)return p;if(this._backtrack){for(var y in m)this[y]=m[y];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var d,g,p,v;this._more||(this.yytext="",this.match="");for(var m=this._currentRules(),y=0;y<m.length;y++)if(p=this._input.match(this.rules[m[y]]),p&&(!g||p[0].length>g[0].length)){if(g=p,v=y,this.options.backtrack_lexer){if(d=this.test_match(p,m[y]),d!==!1)return d;if(this._backtrack){g=!1;continue}else return!1}else if(!this.options.flex)break}return g?(d=this.test_match(g,m[v]),d!==!1?d:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var g=this.next();return g||this.lex()},"lex"),begin:x(function(g){this.conditionStack.push(g)},"begin"),popState:x(function(){var g=this.conditionStack.length-1;return g>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(g){return g=this.conditionStack.length-1-Math.abs(g||0),g>=0?this.conditionStack[g]:"INITIAL"},"topState"),pushState:x(function(g){this.begin(g)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(g,p,v,m){switch(v){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return f}();l.lexer=u;function h(){this.yy={}}return x(h,"Parser"),h.prototype=l,l.Parser=h,new h}();PE.parser=PE;var hTt=PE,zh="",n_=[],Og=[],Pg=[],fTt=x(function(){n_.length=0,Og.length=0,zh="",Pg.length=0,dn()},"clear"),dTt=x(function(e){zh=e,n_.push(e)},"addSection"),gTt=x(function(){return n_},"getSections"),pTt=x(function(){let e=aR();const t=100;let r=0;for(;!e&&r<t;)e=aR(),r++;return Og.push(...Pg),Og},"getTasks"),vTt=x(function(){const e=[];return Og.forEach(r=>{r.people&&e.push(...r.people)}),[...new Set(e)].sort()},"updateActors"),mTt=x(function(e,t){const r=t.substr(1).split(":");let n=0,i=[];r.length===1?(n=Number(r[0]),i=[]):(n=Number(r[0]),i=r[1].split(","));const a=i.map(o=>o.trim()),s={section:zh,type:zh,people:a,task:e,score:n};Pg.push(s)},"addTask"),yTt=x(function(e){const t={section:zh,type:zh,description:e,task:e,classes:[]};Og.push(t)},"addTaskOrg"),aR=x(function(){const e=x(function(r){return Pg[r].processed},"compileTask");let t=!0;for(const[r,n]of Pg.entries())e(r),t=t&&n.processed;return t},"compileTasks"),xTt=x(function(){return vTt()},"getActors"),sR={getConfig:x(()=>pt().journey,"getConfig"),clear:fTt,setDiagramTitle:Fn,getDiagramTitle:gn,setAccTitle:cn,getAccTitle:wn,setAccDescription:En,getAccDescription:kn,addSection:dTt,getSections:gTt,getTasks:pTt,addTask:mTt,addTaskOrg:yTt,getActors:xTt},bTt=x(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${e.textColor}
  }

  .legend {
    fill: ${e.textColor};
    font-family: ${e.fontFamily};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${e.textColor}
  }

  .face {
    ${e.faceColor?`fill: ${e.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${e.fillType0?`fill: ${e.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${e.fillType0?`fill: ${e.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${e.fillType0?`fill: ${e.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${e.fillType0?`fill: ${e.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${e.fillType0?`fill: ${e.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${e.fillType0?`fill: ${e.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${e.fillType0?`fill: ${e.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${e.fillType0?`fill: ${e.fillType7}`:""};
  }

  .actor-0 {
    ${e.actor0?`fill: ${e.actor0}`:""};
  }
  .actor-1 {
    ${e.actor1?`fill: ${e.actor1}`:""};
  }
  .actor-2 {
    ${e.actor2?`fill: ${e.actor2}`:""};
  }
  .actor-3 {
    ${e.actor3?`fill: ${e.actor3}`:""};
  }
  .actor-4 {
    ${e.actor4?`fill: ${e.actor4}`:""};
  }
  .actor-5 {
    ${e.actor5?`fill: ${e.actor5}`:""};
  }
`,"getStyles"),TTt=bTt,i_=x(function(e,t){return Ny(e,t)},"drawRect"),wTt=x(function(e,t){const n=e.append("circle").attr("cx",t.cx).attr("cy",t.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=e.append("g");i.append("circle").attr("cx",t.cx-15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",t.cx+15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function a(l){const u=ph().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+t.cx+","+(t.cy+2)+")")}x(a,"smile");function s(l){const u=ph().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+t.cx+","+(t.cy+7)+")")}x(s,"sad");function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",t.cx-5).attr("y1",t.cy+7).attr("x2",t.cx+5).attr("y2",t.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return x(o,"ambivalent"),t.score>3?a(i):t.score<3?s(i):o(i),n},"drawFace"),Qz=x(function(e,t){const r=e.append("circle");return r.attr("cx",t.cx),r.attr("cy",t.cy),r.attr("class","actor-"+t.pos),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("r",t.r),r.class!==void 0&&r.attr("class",r.class),t.title!==void 0&&r.append("title").text(t.title),r},"drawCircle"),Jz=x(function(e,t){return tft(e,t)},"drawText"),ETt=x(function(e,t){function r(i,a,s,o,l){return i+","+a+" "+(i+s)+","+a+" "+(i+s)+","+(a+o-l)+" "+(i+s-l*1.2)+","+(a+o)+" "+i+","+(a+o)}x(r,"genPoints");const n=e.append("polygon");n.attr("points",r(t.x,t.y,50,20,7)),n.attr("class","labelBox"),t.y=t.y+t.labelMargin,t.x=t.x+.5*t.labelMargin,Jz(e,t)},"drawLabel"),kTt=x(function(e,t,r){const n=e.append("g"),i=kc();i.x=t.x,i.y=t.y,i.fill=t.fill,i.width=r.width*t.taskCount+r.diagramMarginX*(t.taskCount-1),i.height=r.height,i.class="journey-section section-type-"+t.num,i.rx=3,i.ry=3,i_(n,i),tV(r)(t.text,n,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+t.num},r,t.colour)},"drawSection"),oR=-1,CTt=x(function(e,t,r){const n=t.x+r.width/2,i=e.append("g");oR++;const a=300+5*30;i.append("line").attr("id","task"+oR).attr("x1",n).attr("y1",t.y).attr("x2",n).attr("y2",a).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),wTt(i,{cx:n,cy:300+(5-t.score)*30,score:t.score});const s=kc();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=r.width,s.height=r.height,s.class="task task-type-"+t.num,s.rx=3,s.ry=3,i_(i,s);let o=t.x+14;t.people.forEach(l=>{const u=t.actors[l].color,h={cx:o,cy:t.y,r:7,fill:u,stroke:"#000",title:l,pos:t.actors[l].position};Qz(i,h),o+=10}),tV(r)(t.task,i,s.x,s.y,s.width,s.height,{class:"task"},r,t.colour)},"drawTask"),STt=x(function(e,t){bF(e,t)},"drawBackgroundRect"),tV=function(){function e(i,a,s,o,l,u,h,f){const d=a.append("text").attr("x",s+l/2).attr("y",o+u/2+5).style("font-color",f).style("text-anchor","middle").text(i);n(d,h)}x(e,"byText");function t(i,a,s,o,l,u,h,f,d){const{taskFontSize:g,taskFontFamily:p}=f,v=i.split(/<br\s*\/?>/gi);for(let m=0;m<v.length;m++){const y=m*g-g*(v.length-1)/2,b=a.append("text").attr("x",s+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",g).style("font-family",p);b.append("tspan").attr("x",s+l/2).attr("dy",y).text(v[m]),b.attr("y",o+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),n(b,h)}}x(t,"byTspan");function r(i,a,s,o,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",s).attr("y",o).attr("width",l).attr("height",u).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),t(i,d,s,o,l,u,h,f),n(p,h)}x(r,"byFo");function n(i,a){for(const s in a)s in a&&i.attr(s,a[s])}return x(n,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?e:t}}(),_Tt=x(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics"),Bg={drawRect:i_,drawCircle:Qz,drawSection:kTt,drawText:Jz,drawLabel:ETt,drawTask:CTt,drawBackgroundRect:STt,initGraphics:_Tt},ATt=x(function(e){Object.keys(e).forEach(function(r){Zy[r]=e[r]})},"setConf"),Us={};function eV(e){const t=pt().journey;let r=60;Object.keys(Us).forEach(n=>{const i=Us[n].color,a={cx:20,cy:r,r:7,fill:i,stroke:"#000",pos:Us[n].position};Bg.drawCircle(e,a);const s={x:40,y:r+7,fill:"#666",text:n,textMargin:t.boxTextMargin|5};Bg.drawText(e,s),r+=20})}x(eV,"drawActorLegend");var Zy=pt().journey,Sl=Zy.leftMargin,LTt=x(function(e,t,r,n){const i=pt().journey,a=pt().securityLevel;let s;a==="sandbox"&&(s=qt("#i"+t));const o=qt(a==="sandbox"?s.nodes()[0].contentDocument.body:"body");oa.init();const l=o.select("#"+t);Bg.initGraphics(l);const u=n.db.getTasks(),h=n.db.getDiagramTitle(),f=n.db.getActors();for(const y in Us)delete Us[y];let d=0;f.forEach(y=>{Us[y]={color:i.actorColours[d%i.actorColours.length],position:d},d++}),eV(l),oa.insert(0,0,Sl,Object.keys(Us).length*50),RTt(l,u,0);const g=oa.getBounds();h&&l.append("text").text(h).attr("x",Sl).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const p=g.stopy-g.starty+2*i.diagramMarginY,v=Sl+g.stopx+2*i.diagramMarginX;Oi(l,p,v,i.useMaxWidth),l.append("line").attr("x1",Sl).attr("y1",i.height*4).attr("x2",v-Sl-4).attr("y2",i.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const m=h?70:0;l.attr("viewBox",`${g.startx} -25 ${v} ${p+m}`),l.attr("preserveAspectRatio","xMinYMin meet"),l.attr("height",p+m+25)},"draw"),oa={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:x(function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},"init"),updateVal:x(function(e,t,r,n){e[t]===void 0?e[t]=r:e[t]=n(r,e[t])},"updateVal"),updateBounds:x(function(e,t,r,n){const i=pt().journey,a=this;let s=0;function o(l){return x(function(h){s++;const f=a.sequenceItems.length-s+1;a.updateVal(h,"starty",t-f*i.boxMargin,Math.min),a.updateVal(h,"stopy",n+f*i.boxMargin,Math.max),a.updateVal(oa.data,"startx",e-f*i.boxMargin,Math.min),a.updateVal(oa.data,"stopx",r+f*i.boxMargin,Math.max),l!=="activation"&&(a.updateVal(h,"startx",e-f*i.boxMargin,Math.min),a.updateVal(h,"stopx",r+f*i.boxMargin,Math.max),a.updateVal(oa.data,"starty",t-f*i.boxMargin,Math.min),a.updateVal(oa.data,"stopy",n+f*i.boxMargin,Math.max))},"updateItemBounds")}x(o,"updateFn"),this.sequenceItems.forEach(o())},"updateBounds"),insert:x(function(e,t,r,n){const i=Math.min(e,r),a=Math.max(e,r),s=Math.min(t,n),o=Math.max(t,n);this.updateVal(oa.data,"startx",i,Math.min),this.updateVal(oa.data,"starty",s,Math.min),this.updateVal(oa.data,"stopx",a,Math.max),this.updateVal(oa.data,"stopy",o,Math.max),this.updateBounds(i,s,a,o)},"insert"),bumpVerticalPos:x(function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=this.verticalPos},"bumpVerticalPos"),getVerticalPos:x(function(){return this.verticalPos},"getVerticalPos"),getBounds:x(function(){return this.data},"getBounds")},zx=Zy.sectionFills,lR=Zy.sectionColours,RTt=x(function(e,t,r){const n=pt().journey;let i="";const a=n.height*2+n.diagramMarginY,s=r+a;let o=0,l="#CCC",u="black",h=0;for(const[f,d]of t.entries()){if(i!==d.section){l=zx[o%zx.length],h=o%zx.length,u=lR[o%lR.length];let p=0;const v=d.section;for(let y=f;y<t.length&&t[y].section==v;y++)p=p+1;const m={x:f*n.taskMargin+f*n.width+Sl,y:50,text:d.section,fill:l,num:h,colour:u,taskCount:p};Bg.drawSection(e,m,n),i=d.section,o++}const g=d.people.reduce((p,v)=>(Us[v]&&(p[v]=Us[v]),p),{});d.x=f*n.taskMargin+f*n.width+Sl,d.y=s,d.width=n.diagramMarginX,d.height=n.diagramMarginY,d.colour=u,d.fill=l,d.num=h,d.actors=g,Bg.drawTask(e,d,n),oa.insert(d.x,d.y,d.x+d.width+n.taskMargin,300+5*30)}},"drawTasks"),cR={setConf:ATt,draw:LTt},ITt={parser:hTt,db:sR,renderer:cR,styles:TTt,init:x(e=>{cR.setConf(e.journey),sR.clear()},"init")};const NTt=Object.freeze(Object.defineProperty({__proto__:null,diagram:ITt},Symbol.toStringTag,{value:"Module"}));var BE=function(){var e=x(function(d,g,p,v){for(p=p||{},v=d.length;v--;p[d[v]]=g);return p},"o"),t=[6,8,10,11,12,14,16,17,20,21],r=[1,9],n=[1,10],i=[1,11],a=[1,12],s=[1,13],o=[1,16],l=[1,17],u={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:x(function(g,p,v,m,y,b,T){var w=b.length-1;switch(y){case 1:return b[w-1];case 2:this.$=[];break;case 3:b[w-1].push(b[w]),this.$=b[w-1];break;case 4:case 5:this.$=b[w];break;case 6:case 7:this.$=[];break;case 8:m.getCommonDb().setDiagramTitle(b[w].substr(6)),this.$=b[w].substr(6);break;case 9:this.$=b[w].trim(),m.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=b[w].trim(),m.getCommonDb().setAccDescription(this.$);break;case 12:m.addSection(b[w].substr(8)),this.$=b[w].substr(8);break;case 15:m.addTask(b[w],0,""),this.$=b[w];break;case 16:m.addEvent(b[w].substr(2)),this.$=b[w];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:n,14:i,16:a,17:s,18:14,19:15,20:o,21:l},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:18,11:r,12:n,14:i,16:a,17:s,18:14,19:15,20:o,21:l},e(t,[2,5]),e(t,[2,6]),e(t,[2,8]),{13:[1,19]},{15:[1,20]},e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),e(t,[2,4]),e(t,[2,9]),e(t,[2,10])],defaultActions:{},parseError:x(function(g,p){if(p.recoverable)this.trace(g);else{var v=new Error(g);throw v.hash=p,v}},"parseError"),parse:x(function(g){var p=this,v=[0],m=[],y=[null],b=[],T=this.table,w="",k=0,S=0,E=2,L=1,A=b.slice.call(arguments,1),R=Object.create(this.lexer),C={yy:{}};for(var D in this.yy)Object.prototype.hasOwnProperty.call(this.yy,D)&&(C.yy[D]=this.yy[D]);R.setInput(g,C.yy),C.yy.lexer=R,C.yy.parser=this,typeof R.yylloc>"u"&&(R.yylloc={});var P=R.yylloc;b.push(P);var _=R.options&&R.options.ranges;typeof C.yy.parseError=="function"?this.parseError=C.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function I(it){v.length=v.length-2*it,y.length=y.length-it,b.length=b.length-it}x(I,"popStack");function M(){var it;return it=m.pop()||R.lex()||L,typeof it!="number"&&(it instanceof Array&&(m=it,it=m.pop()),it=p.symbols_[it]||it),it}x(M,"lex");for(var O,N,B,z,F={},V,G,Y,Q;;){if(N=v[v.length-1],this.defaultActions[N]?B=this.defaultActions[N]:((O===null||typeof O>"u")&&(O=M()),B=T[N]&&T[N][O]),typeof B>"u"||!B.length||!B[0]){var K="";Q=[];for(V in T[N])this.terminals_[V]&&V>E&&Q.push("'"+this.terminals_[V]+"'");R.showPosition?K="Parse error on line "+(k+1)+`:
`+R.showPosition()+`
Expecting `+Q.join(", ")+", got '"+(this.terminals_[O]||O)+"'":K="Parse error on line "+(k+1)+": Unexpected "+(O==L?"end of input":"'"+(this.terminals_[O]||O)+"'"),this.parseError(K,{text:R.match,token:this.terminals_[O]||O,line:R.yylineno,loc:P,expected:Q})}if(B[0]instanceof Array&&B.length>1)throw new Error("Parse Error: multiple actions possible at state: "+N+", token: "+O);switch(B[0]){case 1:v.push(O),y.push(R.yytext),b.push(R.yylloc),v.push(B[1]),O=null,S=R.yyleng,w=R.yytext,k=R.yylineno,P=R.yylloc;break;case 2:if(G=this.productions_[B[1]][1],F.$=y[y.length-G],F._$={first_line:b[b.length-(G||1)].first_line,last_line:b[b.length-1].last_line,first_column:b[b.length-(G||1)].first_column,last_column:b[b.length-1].last_column},_&&(F._$.range=[b[b.length-(G||1)].range[0],b[b.length-1].range[1]]),z=this.performAction.apply(F,[w,S,k,C.yy,B[1],y,b].concat(A)),typeof z<"u")return z;G&&(v=v.slice(0,-1*G*2),y=y.slice(0,-1*G),b=b.slice(0,-1*G)),v.push(this.productions_[B[1]][0]),y.push(F.$),b.push(F._$),Y=T[v[v.length-2]][v[v.length-1]],v.push(Y);break;case 3:return!0}}return!0},"parse")},h=function(){var d={EOF:1,parseError:x(function(p,v){if(this.yy.parser)this.yy.parser.parseError(p,v);else throw new Error(p)},"parseError"),setInput:x(function(g,p){return this.yy=p||this.yy||{},this._input=g,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.offset++,this.match+=g,this.matched+=g;var p=g.match(/(?:\r\n?|\n).*/g);return p?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),g},"input"),unput:x(function(g){var p=g.length,v=g.split(/(?:\r\n?|\n)/g);this._input=g+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-p),this.offset-=p;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),v.length-1&&(this.yylineno-=v.length-1);var y=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:v?(v.length===m.length?this.yylloc.first_column:0)+m[m.length-v.length].length-v[0].length:this.yylloc.first_column-p},this.options.ranges&&(this.yylloc.range=[y[0],y[0]+this.yyleng-p]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(g){this.unput(this.match.slice(g))},"less"),pastInput:x(function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var g=this.pastInput(),p=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+p+"^"},"showPosition"),test_match:x(function(g,p){var v,m,y;if(this.options.backtrack_lexer&&(y={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(y.yylloc.range=this.yylloc.range.slice(0))),m=g[0].match(/(?:\r\n?|\n).*/g),m&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+g[0].length},this.yytext+=g[0],this.match+=g[0],this.matches=g,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(g[0].length),this.matched+=g[0],v=this.performAction.call(this,this.yy,this,p,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),v)return v;if(this._backtrack){for(var b in y)this[b]=y[b];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,p,v,m;this._more||(this.yytext="",this.match="");for(var y=this._currentRules(),b=0;b<y.length;b++)if(v=this._input.match(this.rules[y[b]]),v&&(!p||v[0].length>p[0].length)){if(p=v,m=b,this.options.backtrack_lexer){if(g=this.test_match(v,y[b]),g!==!1)return g;if(this._backtrack){p=!1;continue}else return!1}else if(!this.options.flex)break}return p?(g=this.test_match(p,y[m]),g!==!1?g:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var p=this.next();return p||this.lex()},"lex"),begin:x(function(p){this.conditionStack.push(p)},"begin"),popState:x(function(){var p=this.conditionStack.length-1;return p>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(p){return p=this.conditionStack.length-1-Math.abs(p||0),p>=0?this.conditionStack[p]:"INITIAL"},"topState"),pushState:x(function(p){this.begin(p)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(p,v,m,y){switch(m){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s[^:\n]+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return d}();u.lexer=h;function f(){this.yy={}}return x(f,"Parser"),f.prototype=u,u.Parser=f,new f}();BE.parser=BE;var DTt=BE,rV={};Jm(rV,{addEvent:()=>uV,addSection:()=>sV,addTask:()=>cV,addTaskOrg:()=>hV,clear:()=>aV,default:()=>MTt,getCommonDb:()=>iV,getSections:()=>oV,getTasks:()=>lV});var Vh="",nV=0,a_=[],bm=[],Gh=[],iV=x(()=>Vk,"getCommonDb"),aV=x(function(){a_.length=0,bm.length=0,Vh="",Gh.length=0,dn()},"clear"),sV=x(function(e){Vh=e,a_.push(e)},"addSection"),oV=x(function(){return a_},"getSections"),lV=x(function(){let e=uR();const t=100;let r=0;for(;!e&&r<t;)e=uR(),r++;return bm.push(...Gh),bm},"getTasks"),cV=x(function(e,t,r){const n={id:nV++,section:Vh,type:Vh,task:e,score:t||0,events:r?[r]:[]};Gh.push(n)},"addTask"),uV=x(function(e){Gh.find(r=>r.id===nV-1).events.push(e)},"addEvent"),hV=x(function(e){const t={section:Vh,type:Vh,description:e,task:e,classes:[]};bm.push(t)},"addTaskOrg"),uR=x(function(){const e=x(function(r){return Gh[r].processed},"compileTask");let t=!0;for(const[r,n]of Gh.entries())e(r),t=t&&n.processed;return t},"compileTasks"),MTt={clear:aV,getCommonDb:iV,addSection:sV,getSections:oV,getTasks:lV,addTask:cV,addTaskOrg:hV,addEvent:uV},OTt=12,Qy=x(function(e,t){const r=e.append("rect");return r.attr("x",t.x),r.attr("y",t.y),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("width",t.width),r.attr("height",t.height),r.attr("rx",t.rx),r.attr("ry",t.ry),t.class!==void 0&&r.attr("class",t.class),r},"drawRect"),PTt=x(function(e,t){const n=e.append("circle").attr("cx",t.cx).attr("cy",t.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=e.append("g");i.append("circle").attr("cx",t.cx-15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",t.cx+15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function a(l){const u=ph().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+t.cx+","+(t.cy+2)+")")}x(a,"smile");function s(l){const u=ph().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+t.cx+","+(t.cy+7)+")")}x(s,"sad");function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",t.cx-5).attr("y1",t.cy+7).attr("x2",t.cx+5).attr("y2",t.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return x(o,"ambivalent"),t.score>3?a(i):t.score<3?s(i):o(i),n},"drawFace"),BTt=x(function(e,t){const r=e.append("circle");return r.attr("cx",t.cx),r.attr("cy",t.cy),r.attr("class","actor-"+t.pos),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("r",t.r),r.class!==void 0&&r.attr("class",r.class),t.title!==void 0&&r.append("title").text(t.title),r},"drawCircle"),fV=x(function(e,t){const r=t.text.replace(/<br\s*\/?>/gi," "),n=e.append("text");n.attr("x",t.x),n.attr("y",t.y),n.attr("class","legend"),n.style("text-anchor",t.anchor),t.class!==void 0&&n.attr("class",t.class);const i=n.append("tspan");return i.attr("x",t.x+t.textMargin*2),i.text(r),n},"drawText"),FTt=x(function(e,t){function r(i,a,s,o,l){return i+","+a+" "+(i+s)+","+a+" "+(i+s)+","+(a+o-l)+" "+(i+s-l*1.2)+","+(a+o)+" "+i+","+(a+o)}x(r,"genPoints");const n=e.append("polygon");n.attr("points",r(t.x,t.y,50,20,7)),n.attr("class","labelBox"),t.y=t.y+t.labelMargin,t.x=t.x+.5*t.labelMargin,fV(e,t)},"drawLabel"),$Tt=x(function(e,t,r){const n=e.append("g"),i=s_();i.x=t.x,i.y=t.y,i.fill=t.fill,i.width=r.width,i.height=r.height,i.class="journey-section section-type-"+t.num,i.rx=3,i.ry=3,Qy(n,i),dV(r)(t.text,n,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+t.num},r,t.colour)},"drawSection"),hR=-1,zTt=x(function(e,t,r){const n=t.x+r.width/2,i=e.append("g");hR++;const a=300+5*30;i.append("line").attr("id","task"+hR).attr("x1",n).attr("y1",t.y).attr("x2",n).attr("y2",a).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),PTt(i,{cx:n,cy:300+(5-t.score)*30,score:t.score});const s=s_();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=r.width,s.height=r.height,s.class="task task-type-"+t.num,s.rx=3,s.ry=3,Qy(i,s),dV(r)(t.task,i,s.x,s.y,s.width,s.height,{class:"task"},r,t.colour)},"drawTask"),VTt=x(function(e,t){Qy(e,{x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,class:"rect"}).lower()},"drawBackgroundRect"),GTt=x(function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},"getTextObj"),s_=x(function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),dV=function(){function e(i,a,s,o,l,u,h,f){const d=a.append("text").attr("x",s+l/2).attr("y",o+u/2+5).style("font-color",f).style("text-anchor","middle").text(i);n(d,h)}x(e,"byText");function t(i,a,s,o,l,u,h,f,d){const{taskFontSize:g,taskFontFamily:p}=f,v=i.split(/<br\s*\/?>/gi);for(let m=0;m<v.length;m++){const y=m*g-g*(v.length-1)/2,b=a.append("text").attr("x",s+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",g).style("font-family",p);b.append("tspan").attr("x",s+l/2).attr("dy",y).text(v[m]),b.attr("y",o+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),n(b,h)}}x(t,"byTspan");function r(i,a,s,o,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",s).attr("y",o).attr("width",l).attr("height",u).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),t(i,d,s,o,l,u,h,f),n(p,h)}x(r,"byFo");function n(i,a){for(const s in a)s in a&&i.attr(s,a[s])}return x(n,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?e:t}}(),UTt=x(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics");function o_(e,t){e.each(function(){var r=qt(this),n=r.text().split(/(\s+|<br>)/).reverse(),i,a=[],s=1.1,o=r.attr("y"),l=parseFloat(r.attr("dy")),u=r.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",l+"em");for(let h=0;h<n.length;h++)i=n[n.length-1-h],a.push(i),u.text(a.join(" ").trim()),(u.node().getComputedTextLength()>t||i==="<br>")&&(a.pop(),u.text(a.join(" ").trim()),i==="<br>"?a=[""]:a=[i],u=r.append("tspan").attr("x",0).attr("y",o).attr("dy",s+"em").text(i))})}x(o_,"wrap");var WTt=x(function(e,t,r,n){var f;const i=r%OTt-1,a=e.append("g");t.section=i,a.attr("class",(t.class?t.class+" ":"")+"timeline-node "+("section-"+i));const s=a.append("g"),o=a.append("g"),u=o.append("text").text(t.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(o_,t.width).node().getBBox(),h=(f=n.fontSize)!=null&&f.replace?n.fontSize.replace("px",""):n.fontSize;return t.height=u.height+h*1.1*.5+t.padding,t.height=Math.max(t.height,t.maxHeight),t.width=t.width+2*t.padding,o.attr("transform","translate("+t.width/2+", "+t.padding/2+")"),HTt(s,t,i,n),t},"drawNode"),YTt=x(function(e,t,r){var o;const n=e.append("g"),a=n.append("text").text(t.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(o_,t.width).node().getBBox(),s=(o=r.fontSize)!=null&&o.replace?r.fontSize.replace("px",""):r.fontSize;return n.remove(),a.height+s*1.1*.5+t.padding},"getVirtualNodeHeight"),HTt=x(function(e,t,r){e.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("d",`M0 ${t.height-5} v${-t.height+2*5} q0,-5 5,-5 h${t.width-2*5} q5,0 5,5 v${t.height-5} H0 Z`),e.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",t.height).attr("x2",t.width).attr("y2",t.height)},"defaultBkg"),_l={drawRect:Qy,drawCircle:BTt,drawSection:$Tt,drawText:fV,drawLabel:FTt,drawTask:zTt,drawBackgroundRect:VTt,getTextObj:GTt,getNoteRect:s_,initGraphics:UTt,drawNode:WTt,getVirtualNodeHeight:YTt},qTt=x(function(e,t,r,n){var A,R;const i=pt(),a=i.leftMargin??50;et.debug("timeline",n.db);const s=i.securityLevel;let o;s==="sandbox"&&(o=qt("#i"+t));const u=qt(s==="sandbox"?o.nodes()[0].contentDocument.body:"body").select("#"+t);u.append("g");const h=n.db.getTasks(),f=n.db.getCommonDb().getDiagramTitle();et.debug("task",h),_l.initGraphics(u);const d=n.db.getSections();et.debug("sections",d);let g=0,p=0,v=0,m=0,y=50+a,b=50;m=50;let T=0,w=!0;d.forEach(function(C){const D={number:T,descr:C,section:T,width:150,padding:20,maxHeight:g},P=_l.getVirtualNodeHeight(u,D,i);et.debug("sectionHeight before draw",P),g=Math.max(g,P+20)});let k=0,S=0;et.debug("tasks.length",h.length);for(const[C,D]of h.entries()){const P={number:C,descr:D,section:D.section,width:150,padding:20,maxHeight:p},_=_l.getVirtualNodeHeight(u,P,i);et.debug("taskHeight before draw",_),p=Math.max(p,_+20),k=Math.max(k,D.events.length);let I=0;for(const M of D.events){const O={descr:M,section:D.section,number:D.section,width:150,padding:20,maxHeight:50};I+=_l.getVirtualNodeHeight(u,O,i)}S=Math.max(S,I)}et.debug("maxSectionHeight before draw",g),et.debug("maxTaskHeight before draw",p),d&&d.length>0?d.forEach(C=>{const D=h.filter(M=>M.section===C),P={number:T,descr:C,section:T,width:200*Math.max(D.length,1)-50,padding:20,maxHeight:g};et.debug("sectionNode",P);const _=u.append("g"),I=_l.drawNode(_,P,T,i);et.debug("sectionNode output",I),_.attr("transform",`translate(${y}, ${m})`),b+=g+50,D.length>0&&fR(u,D,T,y,b,p,i,k,S,g,!1),y+=200*Math.max(D.length,1),b=m,T++}):(w=!1,fR(u,h,T,y,b,p,i,k,S,g,!0));const E=u.node().getBBox();et.debug("bounds",E),f&&u.append("text").text(f).attr("x",E.width/2-a).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),v=w?g+p+150:p+100,u.append("g").attr("class","lineWrapper").append("line").attr("x1",a).attr("y1",v).attr("x2",E.width+3*a).attr("y2",v).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),Kh(void 0,u,((A=i.timeline)==null?void 0:A.padding)??50,((R=i.timeline)==null?void 0:R.useMaxWidth)??!1)},"draw"),fR=x(function(e,t,r,n,i,a,s,o,l,u,h){var f;for(const d of t){const g={descr:d.task,section:r,number:r,width:150,padding:20,maxHeight:a};et.debug("taskNode",g);const p=e.append("g").attr("class","taskWrapper"),m=_l.drawNode(p,g,r,s).height;if(et.debug("taskHeight after draw",m),p.attr("transform",`translate(${n}, ${i})`),a=Math.max(a,m),d.events){const y=e.append("g").attr("class","lineWrapper");let b=a;i+=100,b=b+XTt(e,d.events,r,n,i,s),i-=100,y.append("line").attr("x1",n+190/2).attr("y1",i+a).attr("x2",n+190/2).attr("y2",i+a+(h?a:u)+l+120).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}n=n+200,h&&!((f=s.timeline)!=null&&f.disableMulticolor)&&r++}i=i-10},"drawTasks"),XTt=x(function(e,t,r,n,i,a){let s=0;const o=i;i=i+100;for(const l of t){const u={descr:l,section:r,number:r,width:150,padding:20,maxHeight:50};et.debug("eventNode",u);const h=e.append("g").attr("class","eventWrapper"),d=_l.drawNode(h,u,r,a).height;s=s+d,h.attr("transform",`translate(${n}, ${i})`),i=i+10+d}return i=o,s},"drawEvents"),jTt={setConf:x(()=>{},"setConf"),draw:qTt},KTt=x(e=>{let t="";for(let r=0;r<e.THEME_COLOR_LIMIT;r++)e["lineColor"+r]=e["lineColor"+r]||e["cScaleInv"+r],Jo(e["lineColor"+r])?e["lineColor"+r]=he(e["lineColor"+r],20):e["lineColor"+r]=xe(e["lineColor"+r],20);for(let r=0;r<e.THEME_COLOR_LIMIT;r++){const n=""+(17-3*r);t+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} path  {
      fill: ${e["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${e["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${e["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${n};
    }
    .section-${r-1} line {
      stroke: ${e["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${e["cScaleLabel"+r]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return t},"genSections"),ZTt=x(e=>`
  .edge {
    stroke-width: 3;
  }
  ${KTt(e)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`,"getStyles"),QTt=ZTt,JTt={db:rV,renderer:jTt,parser:DTt,styles:QTt};const twt=Object.freeze(Object.defineProperty({__proto__:null,diagram:JTt},Symbol.toStringTag,{value:"Module"}));function FE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ewt(e){if(Array.isArray(e))return e}function rwt(e){if(Array.isArray(e))return FE(e)}function il(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nwt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pV(n.key),n)}}function al(e,t,r){return t&&nwt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _i(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l_(e))||t){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var l=r.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{s||r.return==null||r.return()}finally{if(o)throw a}}}}function gV(e,t,r){return(t=pV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iwt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function awt(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(h){u=!0,i=h}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function swt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function owt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tn(e,t){return ewt(e)||awt(e,t)||l_(e,t)||swt()}function Tm(e){return rwt(e)||iwt(e)||l_(e)||owt()}function lwt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function pV(e){var t=lwt(e,"string");return typeof t=="symbol"?t:t+""}function hn(e){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn(e)}function l_(e,t){if(e){if(typeof e=="string")return FE(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FE(e,t):void 0}}var Jr=typeof window>"u"?null:window,dR=Jr?Jr.navigator:null;Jr&&Jr.document;var cwt=hn(""),vV=hn({}),uwt=hn(function(){}),hwt=typeof HTMLElement>"u"?"undefined":hn(HTMLElement),Ip=function(t){return t&&t.instanceString&&Mr(t.instanceString)?t.instanceString():null},Ee=function(t){return t!=null&&hn(t)==cwt},Mr=function(t){return t!=null&&hn(t)===uwt},br=function(t){return!Xi(t)&&(Array.isArray?Array.isArray(t):t!=null&&t instanceof Array)},Je=function(t){return t!=null&&hn(t)===vV&&!br(t)&&t.constructor===Object},fwt=function(t){return t!=null&&hn(t)===vV},ne=function(t){return t!=null&&hn(t)===hn(1)&&!isNaN(t)},dwt=function(t){return ne(t)&&Math.floor(t)===t},wm=function(t){if(hwt!=="undefined")return t!=null&&t instanceof HTMLElement},Xi=function(t){return Np(t)||mV(t)},Np=function(t){return Ip(t)==="collection"&&t._private.single},mV=function(t){return Ip(t)==="collection"&&!t._private.single},c_=function(t){return Ip(t)==="core"},yV=function(t){return Ip(t)==="stylesheet"},gwt=function(t){return Ip(t)==="event"},Wo=function(t){return t==null?!0:!!(t===""||t.match(/^\s+$/))},pwt=function(t){return typeof HTMLElement>"u"?!1:t instanceof HTMLElement},vwt=function(t){return Je(t)&&ne(t.x1)&&ne(t.x2)&&ne(t.y1)&&ne(t.y2)},mwt=function(t){return fwt(t)&&Mr(t.then)},ywt=function(){return dR&&dR.userAgent.match(/msie|trident|edge/i)},Uh=function(t,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var a=[],s=0;s<arguments.length;s++)a.push(arguments[s]);return a.join("$")});var n=function(){var a=this,s=arguments,o,l=r.apply(a,s),u=n.cache;return(o=u[l])||(o=u[l]=t.apply(a,s)),o};return n.cache={},n},u_=Uh(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),Jy=Uh(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),xV=Uh(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),gR=function(t){return Wo(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},on="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",xwt="rgb[a]?\\(("+on+"[%]?)\\s*,\\s*("+on+"[%]?)\\s*,\\s*("+on+"[%]?)(?:\\s*,\\s*("+on+"))?\\)",bwt="rgb[a]?\\((?:"+on+"[%]?)\\s*,\\s*(?:"+on+"[%]?)\\s*,\\s*(?:"+on+"[%]?)(?:\\s*,\\s*(?:"+on+"))?\\)",Twt="hsl[a]?\\(("+on+")\\s*,\\s*("+on+"[%])\\s*,\\s*("+on+"[%])(?:\\s*,\\s*("+on+"))?\\)",wwt="hsl[a]?\\((?:"+on+")\\s*,\\s*(?:"+on+"[%])\\s*,\\s*(?:"+on+"[%])(?:\\s*,\\s*(?:"+on+"))?\\)",Ewt="\\#[0-9a-fA-F]{3}",kwt="\\#[0-9a-fA-F]{6}",bV=function(t,r){return t<r?-1:t>r?1:0},Cwt=function(t,r){return-1*bV(t,r)},Ce=Object.assign!=null?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var n=t[r];if(n!=null)for(var i=Object.keys(n),a=0;a<i.length;a++){var s=i[a];e[s]=n[s]}}return e},Swt=function(t){if(!(!(t.length===4||t.length===7)||t[0]!=="#")){var r=t.length===4,n,i,a,s=16;return r?(n=parseInt(t[1]+t[1],s),i=parseInt(t[2]+t[2],s),a=parseInt(t[3]+t[3],s)):(n=parseInt(t[1]+t[2],s),i=parseInt(t[3]+t[4],s),a=parseInt(t[5]+t[6],s)),[n,i,a]}},_wt=function(t){var r,n,i,a,s,o,l,u;function h(p,v,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?p+(v-p)*6*m:m<1/2?v:m<2/3?p+(v-p)*(2/3-m)*6:p}var f=new RegExp("^"+Twt+"$").exec(t);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(f[2]),i<0||i>100||(i=i/100,a=parseFloat(f[3]),a<0||a>100)||(a=a/100,s=f[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(i===0)o=l=u=Math.round(a*255);else{var d=a<.5?a*(1+i):a+i-a*i,g=2*a-d;o=Math.round(255*h(g,d,n+1/3)),l=Math.round(255*h(g,d,n)),u=Math.round(255*h(g,d,n-1/3))}r=[o,l,u,s]}return r},Awt=function(t){var r,n=new RegExp("^"+xwt+"$").exec(t);if(n){r=[];for(var i=[],a=1;a<=3;a++){var s=n[a];if(s[s.length-1]==="%"&&(i[a]=!0),s=parseFloat(s),i[a]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var o=i[1]||i[2]||i[3],l=i[1]&&i[2]&&i[3];if(o&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;r.push(u)}}return r},Lwt=function(t){return Rwt[t.toLowerCase()]},TV=function(t){return(br(t)?t:null)||Lwt(t)||Swt(t)||Awt(t)||_wt(t)},Rwt={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},wV=function(t){for(var r=t.map,n=t.keys,i=n.length,a=0;a<i;a++){var s=n[a];if(Je(s))throw Error("Tried to set map with object key");a<n.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=t.value}},EV=function(t){for(var r=t.map,n=t.keys,i=n.length,a=0;a<i;a++){var s=n[a];if(Je(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r},A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vx,pR;function Mp(){if(pR)return Vx;pR=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Vx=e,Vx}var Gx,vR;function Iwt(){if(vR)return Gx;vR=1;var e=typeof A0=="object"&&A0&&A0.Object===Object&&A0;return Gx=e,Gx}var Ux,mR;function t2(){if(mR)return Ux;mR=1;var e=Iwt(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Ux=r,Ux}var Wx,yR;function Nwt(){if(yR)return Wx;yR=1;var e=t2(),t=function(){return e.Date.now()};return Wx=t,Wx}var Yx,xR;function Dwt(){if(xR)return Yx;xR=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Yx=t,Yx}var Hx,bR;function Mwt(){if(bR)return Hx;bR=1;var e=Dwt(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Hx=r,Hx}var qx,TR;function h_(){if(TR)return qx;TR=1;var e=t2(),t=e.Symbol;return qx=t,qx}var Xx,wR;function Owt(){if(wR)return Xx;wR=1;var e=h_(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=r.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var h=n.call(s);return u&&(o?s[i]=l:delete s[i]),h}return Xx=a,Xx}var jx,ER;function Pwt(){if(ER)return jx;ER=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return jx=r,jx}var Kx,kR;function kV(){if(kR)return Kx;kR=1;var e=h_(),t=Owt(),r=Pwt(),n="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:n:a&&a in Object(o)?t(o):r(o)}return Kx=s,Kx}var Zx,CR;function Bwt(){if(CR)return Zx;CR=1;function e(t){return t!=null&&typeof t=="object"}return Zx=e,Zx}var Qx,SR;function Op(){if(SR)return Qx;SR=1;var e=kV(),t=Bwt(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return Qx=n,Qx}var Jx,_R;function Fwt(){if(_R)return Jx;_R=1;var e=Mwt(),t=Mp(),r=Op(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=t(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=a.test(u);return f||s.test(u)?o(u.slice(2),f?2:8):i.test(u)?n:+u}return Jx=l,Jx}var tb,AR;function $wt(){if(AR)return tb;AR=1;var e=Mp(),t=Nwt(),r=Fwt(),n="Expected a function",i=Math.max,a=Math.min;function s(o,l,u){var h,f,d,g,p,v,m=0,y=!1,b=!1,T=!0;if(typeof o!="function")throw new TypeError(n);l=r(l)||0,e(u)&&(y=!!u.leading,b="maxWait"in u,d=b?i(r(u.maxWait)||0,l):d,T="trailing"in u?!!u.trailing:T);function w(P){var _=h,I=f;return h=f=void 0,m=P,g=o.apply(I,_),g}function k(P){return m=P,p=setTimeout(L,l),y?w(P):g}function S(P){var _=P-v,I=P-m,M=l-_;return b?a(M,d-I):M}function E(P){var _=P-v,I=P-m;return v===void 0||_>=l||_<0||b&&I>=d}function L(){var P=t();if(E(P))return A(P);p=setTimeout(L,S(P))}function A(P){return p=void 0,T&&h?w(P):(h=f=void 0,g)}function R(){p!==void 0&&clearTimeout(p),m=0,h=v=f=p=void 0}function C(){return p===void 0?g:A(t())}function D(){var P=t(),_=E(P);if(h=arguments,f=this,v=P,_){if(p===void 0)return k(v);if(b)return clearTimeout(p),p=setTimeout(L,l),w(v)}return p===void 0&&(p=setTimeout(L,l)),g}return D.cancel=R,D.flush=C,D}return tb=s,tb}var zwt=$wt(),Pp=Dp(zwt),eb=Jr?Jr.performance:null,CV=eb&&eb.now?function(){return eb.now()}:function(){return Date.now()},Vwt=function(){if(Jr){if(Jr.requestAnimationFrame)return function(e){Jr.requestAnimationFrame(e)};if(Jr.mozRequestAnimationFrame)return function(e){Jr.mozRequestAnimationFrame(e)};if(Jr.webkitRequestAnimationFrame)return function(e){Jr.webkitRequestAnimationFrame(e)};if(Jr.msRequestAnimationFrame)return function(e){Jr.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(CV())},1e3/60)}}(),Em=function(t){return Vwt(t)},no=CV,Al=9261,SV=65599,tu=5381,_V=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Al,n=r,i;i=t.next(),!i.done;)n=n*SV+i.value|0;return n},Fg=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Al;return r*SV+t|0},$g=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tu;return(r<<5)+r+t|0},Gwt=function(t,r){return t*2097152+r},po=function(t){return t[0]*2097152+t[1]},L0=function(t,r){return[Fg(t[0],r[0]),$g(t[1],r[1])]},LR=function(t,r){var n={value:0,done:!1},i=0,a=t.length,s={next:function(){return i<a?n.value=t[i++]:n.done=!0,n}};return _V(s,r)},cc=function(t,r){var n={value:0,done:!1},i=0,a=t.length,s={next:function(){return i<a?n.value=t.charCodeAt(i++):n.done=!0,n}};return _V(s,r)},AV=function(){return Uwt(arguments)},Uwt=function(t){for(var r,n=0;n<t.length;n++){var i=t[n];n===0?r=cc(i):r=cc(i,r)}return r},RR=!0,Wwt=console.warn!=null,Ywt=console.trace!=null,f_=Number.MAX_SAFE_INTEGER||9007199254740991,LV=function(){return!0},km=function(){return!1},IR=function(){return 0},d_=function(){},Dr=function(t){throw new Error(t)},RV=function(t){if(t!==void 0)RR=!!t;else return RR},or=function(t){RV()&&(Wwt?console.warn(t):(console.log(t),Ywt&&console.trace()))},Hwt=function(t){return Ce({},t)},as=function(t){return t==null?t:br(t)?t.slice():Je(t)?Hwt(t):t},qwt=function(t){return t.slice()},IV=function(t,r){for(r=t="";t++<36;r+=t*51&52?(t^15?8^Math.random()*(t^20?16:4):4).toString(16):"-");return r},Xwt={},NV=function(){return Xwt},$n=function(t){var r=Object.keys(t);return function(n){for(var i={},a=0;a<r.length;a++){var s=r[a],o=n==null?void 0:n[s];i[s]=o===void 0?t[s]:o}return i}},Yo=function(t,r,n){for(var i=t.length-1;i>=0;i--)t[i]===r&&t.splice(i,1)},g_=function(t){t.splice(0,t.length)},jwt=function(t,r){for(var n=0;n<r.length;n++){var i=r[n];t.push(i)}},Ei=function(t,r,n){return n&&(r=xV(n,r)),t[r]},Ms=function(t,r,n,i){n&&(r=xV(n,r)),t[r]=i},Kwt=function(){function e(){il(this,e),this._obj={}}return al(e,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),Ws=typeof Map<"u"?Map:Kwt,Zwt="undefined",Qwt=function(){function e(t){if(il(this,e),this._obj=Object.create(null),this.size=0,t!=null){var r;t.instanceString!=null&&t.instanceString()===this.instanceString()?r=t.toArray():r=t;for(var n=0;n<r.length;n++)this.add(r[n])}}return al(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),ff=(typeof Set>"u"?"undefined":hn(Set))!==Zwt?Set:Qwt,e2=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0||r===void 0||!c_(t)){Dr("An element must have a core reference and parameters set");return}var i=r.group;if(i==null&&(r.data&&r.data.source!=null&&r.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){Dr("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var a=this._private={cy:t,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?i==="edges":!!r.pannable,active:!1,classes:new ff,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=t.pan(),l=t.zoom();a.position={x:(s.x-o.x)/l,y:(s.y-o.y)/l}}var u=[];br(r.classes)?u=r.classes:Ee(r.classes)&&(u=r.classes.split(/\s+/));for(var h=0,f=u.length;h<f;h++){var d=u[h];!d||d===""||a.classes.add(d)}this.createEmitter(),(n===void 0||n)&&this.restore();var g=r.style||r.css;g&&(or("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g))},NR=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(n,i,a){var s;Je(n)&&!Xi(n)&&(s=n,n=s.roots||s.root,i=s.visit,a=s.directed),a=arguments.length===2&&!Mr(i)?i:a,i=Mr(i)?i:function(){};for(var o=this._private.cy,l=n=Ee(n)?this.filter(n):n,u=[],h=[],f={},d={},g={},p=0,v,m=this.byGroup(),y=m.nodes,b=m.edges,T=0;T<l.length;T++){var w=l[T],k=w.id();w.isNode()&&(u.unshift(w),t.bfs&&(g[k]=!0,h.push(w)),d[k]=0)}for(var S=function(){var P=t.bfs?u.shift():u.pop(),_=P.id();if(t.dfs){if(g[_])return 0;g[_]=!0,h.push(P)}var I=d[_],M=f[_],O=M!=null?M.source():null,N=M!=null?M.target():null,B=M==null?void 0:P.same(O)?N[0]:O[0],z;if(z=i(P,M,B,p++,I),z===!0)return v=P,1;if(z===!1)return 1;for(var F=P.connectedEdges().filter(function(K){return(!a||K.source().same(P))&&b.has(K)}),V=0;V<F.length;V++){var G=F[V],Y=G.connectedNodes().filter(function(K){return!K.same(P)&&y.has(K)}),Q=Y.id();Y.length!==0&&!g[Q]&&(Y=Y[0],u.push(Y),t.bfs&&(g[Q]=!0,h.push(Y)),f[Q]=G,d[Q]=d[_]+1)}},E;u.length!==0&&(E=S(),!(E!==0&&E===1)););for(var L=o.collection(),A=0;A<h.length;A++){var R=h[A],C=f[R.id()];C!=null&&L.push(C),L.push(R)}return{path:o.collection(L),found:o.collection(v)}}},zg={breadthFirstSearch:NR({bfs:!0}),depthFirstSearch:NR({dfs:!0})};zg.bfs=zg.breadthFirstSearch;zg.dfs=zg.depthFirstSearch;var I1={exports:{}},Jwt=I1.exports,DR;function tEt(){return DR||(DR=1,function(e,t){(function(){var r,n,i,a,s,o,l,u,h,f,d,g,p,v,m;i=Math.floor,f=Math.min,n=function(y,b){return y<b?-1:y>b?1:0},h=function(y,b,T,w,k){var S;if(T==null&&(T=0),k==null&&(k=n),T<0)throw new Error("lo must be non-negative");for(w==null&&(w=y.length);T<w;)S=i((T+w)/2),k(b,y[S])<0?w=S:T=S+1;return[].splice.apply(y,[T,T-T].concat(b)),b},o=function(y,b,T){return T==null&&(T=n),y.push(b),v(y,0,y.length-1,T)},s=function(y,b){var T,w;return b==null&&(b=n),T=y.pop(),y.length?(w=y[0],y[0]=T,m(y,0,b)):w=T,w},u=function(y,b,T){var w;return T==null&&(T=n),w=y[0],y[0]=b,m(y,0,T),w},l=function(y,b,T){var w;return T==null&&(T=n),y.length&&T(y[0],b)<0&&(w=[y[0],b],b=w[0],y[0]=w[1],m(y,0,T)),b},a=function(y,b){var T,w,k,S,E,L;for(b==null&&(b=n),S=(function(){L=[];for(var A=0,R=i(y.length/2);0<=R?A<R:A>R;0<=R?A++:A--)L.push(A);return L}).apply(this).reverse(),E=[],w=0,k=S.length;w<k;w++)T=S[w],E.push(m(y,T,b));return E},p=function(y,b,T){var w;if(T==null&&(T=n),w=y.indexOf(b),w!==-1)return v(y,0,w,T),m(y,w,T)},d=function(y,b,T){var w,k,S,E,L;if(T==null&&(T=n),k=y.slice(0,b),!k.length)return k;for(a(k,T),L=y.slice(b),S=0,E=L.length;S<E;S++)w=L[S],l(k,w,T);return k.sort(T).reverse()},g=function(y,b,T){var w,k,S,E,L,A,R,C,D;if(T==null&&(T=n),b*10<=y.length){if(S=y.slice(0,b).sort(T),!S.length)return S;for(k=S[S.length-1],R=y.slice(b),E=0,A=R.length;E<A;E++)w=R[E],T(w,k)<0&&(h(S,w,0,null,T),S.pop(),k=S[S.length-1]);return S}for(a(y,T),D=[],L=0,C=f(b,y.length);0<=C?L<C:L>C;0<=C?++L:--L)D.push(s(y,T));return D},v=function(y,b,T,w){var k,S,E;for(w==null&&(w=n),k=y[T];T>b;){if(E=T-1>>1,S=y[E],w(k,S)<0){y[T]=S,T=E;continue}break}return y[T]=k},m=function(y,b,T){var w,k,S,E,L;for(T==null&&(T=n),k=y.length,L=b,S=y[b],w=2*b+1;w<k;)E=w+1,E<k&&!(T(y[w],y[E])<0)&&(w=E),y[b]=y[w],b=w,w=2*b+1;return y[b]=S,v(y,L,b,T)},r=function(){y.push=o,y.pop=s,y.replace=u,y.pushpop=l,y.heapify=a,y.updateItem=p,y.nlargest=d,y.nsmallest=g;function y(b){this.cmp=b??n,this.nodes=[]}return y.prototype.push=function(b){return o(this.nodes,b,this.cmp)},y.prototype.pop=function(){return s(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(b){return this.nodes.indexOf(b)!==-1},y.prototype.replace=function(b){return u(this.nodes,b,this.cmp)},y.prototype.pushpop=function(b){return l(this.nodes,b,this.cmp)},y.prototype.heapify=function(){return a(this.nodes,this.cmp)},y.prototype.updateItem=function(b){return p(this.nodes,b,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var b;return b=new y,b.nodes=this.nodes.slice(0),b},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y}(),function(y,b){return e.exports=b()}(this,function(){return r})}).call(Jwt)}(I1)),I1.exports}var rb,MR;function eEt(){return MR||(MR=1,rb=tEt()),rb}var rEt=eEt(),Bp=Dp(rEt),nEt=$n({root:null,weight:function(t){return 1},directed:!1}),iEt={dijkstra:function(t){if(!Je(t)){var r=arguments;t={root:r[0],weight:r[1],directed:r[2]}}var n=nEt(t),i=n.root,a=n.weight,s=n.directed,o=this,l=a,u=Ee(i)?this.filter(i)[0]:i[0],h={},f={},d={},g=this.byGroup(),p=g.nodes,v=g.edges;v.unmergeBy(function(I){return I.isLoop()});for(var m=function(M){return h[M.id()]},y=function(M,O){h[M.id()]=O,b.updateItem(M)},b=new Bp(function(I,M){return m(I)-m(M)}),T=0;T<p.length;T++){var w=p[T];h[w.id()]=w.same(u)?0:1/0,b.push(w)}for(var k=function(M,O){for(var N=(s?M.edgesTo(O):M.edgesWith(O)).intersect(v),B=1/0,z,F=0;F<N.length;F++){var V=N[F],G=l(V);(G<B||!z)&&(B=G,z=V)}return{edge:z,dist:B}};b.size()>0;){var S=b.pop(),E=m(S),L=S.id();if(d[L]=E,E!==1/0)for(var A=S.neighborhood().intersect(p),R=0;R<A.length;R++){var C=A[R],D=C.id(),P=k(S,C),_=E+P.dist;_<m(C)&&(y(C,_),f[D]={node:S,edge:P.edge})}}return{distanceTo:function(M){var O=Ee(M)?p.filter(M)[0]:M[0];return d[O.id()]},pathTo:function(M){var O=Ee(M)?p.filter(M)[0]:M[0],N=[],B=O,z=B.id();if(O.length>0)for(N.unshift(O);f[z];){var F=f[z];N.unshift(F.edge),N.unshift(F.node),B=F.node,z=B.id()}return o.spawn(N)}}}},aEt={kruskal:function(t){t=t||function(T){return 1};for(var r=this.byGroup(),n=r.nodes,i=r.edges,a=n.length,s=new Array(a),o=n,l=function(w){for(var k=0;k<s.length;k++){var S=s[k];if(S.has(w))return k}},u=0;u<a;u++)s[u]=this.spawn(n[u]);for(var h=i.sort(function(T,w){return t(T)-t(w)}),f=0;f<h.length;f++){var d=h[f],g=d.source()[0],p=d.target()[0],v=l(g),m=l(p),y=s[v],b=s[m];v!==m&&(o.merge(d),y.merge(b),s.splice(m,1))}return o}},sEt=$n({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),oEt={aStar:function(t){var r=this.cy(),n=sEt(t),i=n.root,a=n.goal,s=n.heuristic,o=n.directed,l=n.weight;i=r.collection(i)[0],a=r.collection(a)[0];var u=i.id(),h=a.id(),f={},d={},g={},p=new Bp(function(z,F){return d[z.id()]-d[F.id()]}),v=new ff,m={},y={},b=function(F,V){p.push(F),v.add(V)},T,w,k=function(){T=p.pop(),w=T.id(),v.delete(w)},S=function(F){return v.has(F)};b(i,u),f[u]=0,d[u]=s(i);for(var E=0;p.size()>0;){if(k(),E++,w===h){for(var L=[],A=a,R=h,C=y[R];L.unshift(A),C!=null&&L.unshift(C),A=m[R],A!=null;)R=A.id(),C=y[R];return{found:!0,distance:f[w],path:this.spawn(L),steps:E}}g[w]=!0;for(var D=T._private.edges,P=0;P<D.length;P++){var _=D[P];if(this.hasElementWithId(_.id())&&!(o&&_.data("source")!==w)){var I=_.source(),M=_.target(),O=I.id()!==w?I:M,N=O.id();if(this.hasElementWithId(N)&&!g[N]){var B=f[w]+l(_);if(!S(N)){f[N]=B,d[N]=B+s(O),b(O,N),m[N]=T,y[N]=_;continue}B<f[N]&&(f[N]=B,d[N]=B+s(O),m[N]=T,y[N]=_)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},lEt=$n({weight:function(t){return 1},directed:!1}),cEt={floydWarshall:function(t){for(var r=this.cy(),n=lEt(t),i=n.weight,a=n.directed,s=i,o=this.byGroup(),l=o.nodes,u=o.edges,h=l.length,f=h*h,d=function(G){return l.indexOf(G)},g=function(G){return l[G]},p=new Array(f),v=0;v<f;v++){var m=v%h,y=(v-m)/h;y===m?p[v]=0:p[v]=1/0}for(var b=new Array(f),T=new Array(f),w=0;w<u.length;w++){var k=u[w],S=k.source()[0],E=k.target()[0];if(S!==E){var L=d(S),A=d(E),R=L*h+A,C=s(k);if(p[R]>C&&(p[R]=C,b[R]=A,T[R]=k),!a){var D=A*h+L;!a&&p[D]>C&&(p[D]=C,b[D]=L,T[D]=k)}}}for(var P=0;P<h;P++)for(var _=0;_<h;_++)for(var I=_*h+P,M=0;M<h;M++){var O=_*h+M,N=P*h+M;p[I]+p[N]<p[O]&&(p[O]=p[I]+p[N],b[O]=b[I])}var B=function(G){return(Ee(G)?r.filter(G):G)[0]},z=function(G){return d(B(G))},F={distance:function(G,Y){var Q=z(G),K=z(Y);return p[Q*h+K]},path:function(G,Y){var Q=z(G),K=z(Y),it=g(Q);if(Q===K)return it.collection();if(b[Q*h+K]==null)return r.collection();var ut=r.collection(),q=Q,W;for(ut.merge(it);Q!==K;)q=Q,Q=b[Q*h+K],W=T[q*h+Q],ut.merge(W),ut.merge(g(Q));return ut}};return F}},uEt=$n({weight:function(t){return 1},directed:!1,root:null}),hEt={bellmanFord:function(t){var r=this,n=uEt(t),i=n.weight,a=n.directed,s=n.root,o=i,l=this,u=this.cy(),h=this.byGroup(),f=h.edges,d=h.nodes,g=d.length,p=new Ws,v=!1,m=[];s=u.collection(s)[0],f.unmergeBy(function(at){return at.isLoop()});for(var y=f.length,b=function(tt){var kt=p.get(tt.id());return kt||(kt={},p.set(tt.id(),kt)),kt},T=function(tt){return(Ee(tt)?u.$(tt):tt)[0]},w=function(tt){return b(T(tt)).dist},k=function(tt){for(var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,ft=T(tt),Dt=[],Ot=ft;;){if(Ot==null)return r.spawn();var Rt=b(Ot),Tt=Rt.edge,At=Rt.pred;if(Dt.unshift(Ot[0]),Ot.same(kt)&&Dt.length>0)break;Tt!=null&&Dt.unshift(Tt),Ot=At}return l.spawn(Dt)},S=0;S<g;S++){var E=d[S],L=b(E);E.same(s)?L.dist=0:L.dist=1/0,L.pred=null,L.edge=null}for(var A=!1,R=function(tt,kt,ft,Dt,Ot,Rt){var Tt=Dt.dist+Rt;Tt<Ot.dist&&!ft.same(Dt.edge)&&(Ot.dist=Tt,Ot.pred=tt,Ot.edge=ft,A=!0)},C=1;C<g;C++){A=!1;for(var D=0;D<y;D++){var P=f[D],_=P.source(),I=P.target(),M=o(P),O=b(_),N=b(I);R(_,I,P,O,N,M),a||R(I,_,P,N,O,M)}if(!A)break}if(A)for(var B=[],z=0;z<y;z++){var F=f[z],V=F.source(),G=F.target(),Y=o(F),Q=b(V).dist,K=b(G).dist;if(Q+Y<K||!a&&K+Y<Q)if(v||(or("Graph contains a negative weight cycle for Bellman-Ford"),v=!0),t.findNegativeWeightCycles!==!1){var it=[];Q+Y<K&&it.push(V),!a&&K+Y<Q&&it.push(G);for(var ut=it.length,q=0;q<ut;q++){var W=it[q],H=[W];H.push(b(W).edge);for(var U=b(W).pred;H.indexOf(U)===-1;)H.push(U),H.push(b(U).edge),U=b(U).pred;H=H.slice(H.indexOf(U));for(var X=H[0].id(),J=0,j=2;j<H.length;j+=2)H[j].id()<X&&(X=H[j].id(),J=j);H=H.slice(J).concat(H.slice(0,J)),H.push(H[0]);var gt=H.map(function(at){return at.id()}).join(",");B.indexOf(gt)===-1&&(m.push(l.spawn(H)),B.push(gt))}}else break}return{distanceTo:w,pathTo:k,hasNegativeWeightCycle:v,negativeWeightCycles:m}}},fEt=Math.sqrt(2),dEt=function(t,r,n){n.length===0&&Dr("Karger-Stein must be run on a connected (sub)graph");for(var i=n[t],a=i[1],s=i[2],o=r[a],l=r[s],u=n,h=u.length-1;h>=0;h--){var f=u[h],d=f[1],g=f[2];(r[d]===o&&r[g]===l||r[d]===l&&r[g]===o)&&u.splice(h,1)}for(var p=0;p<u.length;p++){var v=u[p];v[1]===l?(u[p]=v.slice(),u[p][1]=o):v[2]===l&&(u[p]=v.slice(),u[p][2]=o)}for(var m=0;m<r.length;m++)r[m]===l&&(r[m]=o);return u},nb=function(t,r,n,i){for(;n>i;){var a=Math.floor(Math.random()*r.length);r=dEt(a,t,r),n--}return r},gEt={kargerStein:function(){var t=this,r=this.byGroup(),n=r.nodes,i=r.edges;i.unmergeBy(function(N){return N.isLoop()});var a=n.length,s=i.length,o=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),l=Math.floor(a/fEt);if(a<2){Dr("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],h=0;h<s;h++){var f=i[h];u.push([h,n.indexOf(f.source()),n.indexOf(f.target())])}for(var d=1/0,g=[],p=new Array(a),v=new Array(a),m=new Array(a),y=function(B,z){for(var F=0;F<a;F++)z[F]=B[F]},b=0;b<=o;b++){for(var T=0;T<a;T++)v[T]=T;var w=nb(v,u.slice(),a,l),k=w.slice();y(v,m);var S=nb(v,w,l,2),E=nb(m,k,l,2);S.length<=E.length&&S.length<d?(d=S.length,g=S,y(v,p)):E.length<=S.length&&E.length<d&&(d=E.length,g=E,y(m,p))}for(var L=this.spawn(g.map(function(N){return i[N[0]]})),A=this.spawn(),R=this.spawn(),C=p[0],D=0;D<p.length;D++){var P=p[D],_=n[D];P===C?A.merge(_):R.merge(_)}var I=function(B){var z=t.spawn();return B.forEach(function(F){z.merge(F),F.connectedEdges().forEach(function(V){t.contains(V)&&!L.contains(V)&&z.merge(V)})}),z},M=[I(A),I(R)],O={cut:L,components:M,partition1:A,partition2:R};return O}},pEt=function(t){return{x:t.x,y:t.y}},r2=function(t,r,n){return{x:t.x*r+n.x,y:t.y*r+n.y}},DV=function(t,r,n){return{x:(t.x-n.x)/r,y:(t.y-n.y)/r}},su=function(t){return{x:t[0],y:t[1]}},vEt=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,i=1/0,a=r;a<n;a++){var s=t[a];isFinite(s)&&(i=Math.min(s,i))}return i},mEt=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,i=-1/0,a=r;a<n;a++){var s=t[a];isFinite(s)&&(i=Math.max(s,i))}return i},yEt=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,i=0,a=0,s=r;s<n;s++){var o=t[s];isFinite(o)&&(i+=o,a++)}return i/a},xEt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?t=t.slice(r,n):(n<t.length&&t.splice(n,t.length-n),r>0&&t.splice(0,r));for(var o=0,l=t.length-1;l>=0;l--){var u=t[l];s?isFinite(u)||(t[l]=-1/0,o++):t.splice(l,1)}a&&t.sort(function(d,g){return d-g});var h=t.length,f=Math.floor(h/2);return h%2!==0?t[f+1+o]:(t[f-1+o]+t[f+o])/2},bEt=function(t){return Math.PI*t/180},R0=function(t,r){return Math.atan2(r,t)-Math.PI/2},p_=Math.log2||function(e){return Math.log(e)/Math.log(2)},v_=function(t){return t>0?1:t<0?-1:0},uc=function(t,r){return Math.sqrt(bl(t,r))},bl=function(t,r){var n=r.x-t.x,i=r.y-t.y;return n*n+i*i},TEt=function(t){for(var r=t.length,n=0,i=0;i<r;i++)n+=t[i];for(var a=0;a<r;a++)t[a]=t[a]/n;return t},mn=function(t,r,n,i){return(1-i)*(1-i)*t+2*(1-i)*i*r+i*i*n},bu=function(t,r,n,i){return{x:mn(t.x,r.x,n.x,i),y:mn(t.y,r.y,n.y,i)}},wEt=function(t,r,n,i){var a={x:r.x-t.x,y:r.y-t.y},s=uc(t,r),o={x:a.x/s,y:a.y/s};return n=n??0,i=i??n*s,{x:t.x+o.x*i,y:t.y+o.y*i}},Vg=function(t,r,n){return Math.max(t,Math.min(n,r))},Mi=function(t){if(t==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(t.x1!=null&&t.y1!=null){if(t.x2!=null&&t.y2!=null&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(t.w!=null&&t.h!=null&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},EEt=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}},kEt=function(t){t.x1=1/0,t.y1=1/0,t.x2=-1/0,t.y2=-1/0,t.w=0,t.h=0},CEt=function(t,r,n){return{x1:t.x1+r,x2:t.x2+r,y1:t.y1+n,y2:t.y2+n,w:t.w,h:t.h}},MV=function(t,r){t.x1=Math.min(t.x1,r.x1),t.x2=Math.max(t.x2,r.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,r.y1),t.y2=Math.max(t.y2,r.y2),t.h=t.y2-t.y1},SEt=function(t,r,n){t.x1=Math.min(t.x1,r),t.x2=Math.max(t.x2,r),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},N1=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.x1-=r,t.x2+=r,t.y1-=r,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},D1=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,a,s;if(r.length===1)n=i=a=s=r[0];else if(r.length===2)n=a=r[0],s=i=r[1];else if(r.length===4){var o=tn(r,4);n=o[0],i=o[1],a=o[2],s=o[3]}return t.x1-=s,t.x2+=i,t.y1-=n,t.y2+=a,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},OR=function(t,r){t.x1=r.x1,t.y1=r.y1,t.x2=r.x2,t.y2=r.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},m_=function(t,r){return!(t.x1>r.x2||r.x1>t.x2||t.x2<r.x1||r.x2<t.x1||t.y2<r.y1||r.y2<t.y1||t.y1>r.y2||r.y1>t.y2)},Wh=function(t,r,n){return t.x1<=r&&r<=t.x2&&t.y1<=n&&n<=t.y2},_Et=function(t,r){return Wh(t,r.x,r.y)},AEt=function(t,r){return Wh(t,r.x1,r.y1)&&Wh(t,r.x2,r.y2)},OV=function(t,r,n,i,a,s,o){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",u=l==="auto"?Ho(a,s):l,h=a/2,f=s/2;u=Math.min(u,h,f);var d=u!==h,g=u!==f,p;if(d){var v=n-h+u-o,m=i-f-o,y=n+h-u+o,b=m;if(p=Co(t,r,n,i,v,m,y,b,!1),p.length>0)return p}if(g){var T=n+h+o,w=i-f+u-o,k=T,S=i+f-u+o;if(p=Co(t,r,n,i,T,w,k,S,!1),p.length>0)return p}if(d){var E=n-h+u-o,L=i+f+o,A=n+h-u+o,R=L;if(p=Co(t,r,n,i,E,L,A,R,!1),p.length>0)return p}if(g){var C=n-h-o,D=i-f+u-o,P=C,_=i+f-u+o;if(p=Co(t,r,n,i,C,D,P,_,!1),p.length>0)return p}var I;{var M=n-h+u,O=i-f+u;if(I=zd(t,r,n,i,M,O,u+o),I.length>0&&I[0]<=M&&I[1]<=O)return[I[0],I[1]]}{var N=n+h-u,B=i-f+u;if(I=zd(t,r,n,i,N,B,u+o),I.length>0&&I[0]>=N&&I[1]<=B)return[I[0],I[1]]}{var z=n+h-u,F=i+f-u;if(I=zd(t,r,n,i,z,F,u+o),I.length>0&&I[0]>=z&&I[1]>=F)return[I[0],I[1]]}{var V=n-h+u,G=i+f-u;if(I=zd(t,r,n,i,V,G,u+o),I.length>0&&I[0]<=V&&I[1]>=G)return[I[0],I[1]]}return[]},LEt=function(t,r,n,i,a,s,o){var l=o,u=Math.min(n,a),h=Math.max(n,a),f=Math.min(i,s),d=Math.max(i,s);return u-l<=t&&t<=h+l&&f-l<=r&&r<=d+l},REt=function(t,r,n,i,a,s,o,l,u){var h={x1:Math.min(n,o,a)-u,x2:Math.max(n,o,a)+u,y1:Math.min(i,l,s)-u,y2:Math.max(i,l,s)+u};return!(t<h.x1||t>h.x2||r<h.y1||r>h.y2)},IEt=function(t,r,n,i){n-=i;var a=r*r-4*t*n;if(a<0)return[];var s=Math.sqrt(a),o=2*t,l=(-r+s)/o,u=(-r-s)/o;return[l,u]},NEt=function(t,r,n,i,a){var s=1e-5;t===0&&(t=s),r/=t,n/=t,i/=t;var o,l,u,h,f,d,g,p;if(l=(3*n-r*r)/9,u=-(27*i)+r*(9*n-2*(r*r)),u/=54,o=l*l*l+u*u,a[1]=0,g=r/3,o>0){f=u+Math.sqrt(o),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),d=u-Math.sqrt(o),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),a[0]=-g+f+d,g+=(f+d)/2,a[4]=a[2]=-g,g=Math.sqrt(3)*(-d+f)/2,a[3]=g,a[5]=-g;return}if(a[5]=a[3]=0,o===0){p=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),a[0]=-g+2*p,a[4]=a[2]=-(p+g);return}l=-l,h=l*l*l,h=Math.acos(u/Math.sqrt(h)),p=2*Math.sqrt(l),a[0]=-g+p*Math.cos(h/3),a[2]=-g+p*Math.cos((h+2*Math.PI)/3),a[4]=-g+p*Math.cos((h+4*Math.PI)/3)},DEt=function(t,r,n,i,a,s,o,l){var u=1*n*n-4*n*a+2*n*o+4*a*a-4*a*o+o*o+i*i-4*i*s+2*i*l+4*s*s-4*s*l+l*l,h=1*9*n*a-3*n*n-3*n*o-6*a*a+3*a*o+9*i*s-3*i*i-3*i*l-6*s*s+3*s*l,f=1*3*n*n-6*n*a+n*o-n*t+2*a*a+2*a*t-o*t+3*i*i-6*i*s+i*l-i*r+2*s*s+2*s*r-l*r,d=1*n*a-n*n+n*t-a*t+i*s-i*i+i*r-s*r,g=[];NEt(u,h,f,d,g);for(var p=1e-7,v=[],m=0;m<6;m+=2)Math.abs(g[m+1])<p&&g[m]>=0&&g[m]<=1&&v.push(g[m]);v.push(1),v.push(0);for(var y=-1,b,T,w,k=0;k<v.length;k++)b=Math.pow(1-v[k],2)*n+2*(1-v[k])*v[k]*a+v[k]*v[k]*o,T=Math.pow(1-v[k],2)*i+2*(1-v[k])*v[k]*s+v[k]*v[k]*l,w=Math.pow(b-t,2)+Math.pow(T-r,2),y>=0?w<y&&(y=w):y=w;return y},MEt=function(t,r,n,i,a,s){var o=[t-n,r-i],l=[a-n,s-i],u=l[0]*l[0]+l[1]*l[1],h=o[0]*o[0]+o[1]*o[1],f=o[0]*l[0]+o[1]*l[1],d=f*f/u;return f<0?h:d>u?(t-a)*(t-a)+(r-s)*(r-s):h-d},ki=function(t,r,n){for(var i,a,s,o,l,u=0,h=0;h<n.length/2;h++)if(i=n[h*2],a=n[h*2+1],h+1<n.length/2?(s=n[(h+1)*2],o=n[(h+1)*2+1]):(s=n[(h+1-n.length/2)*2],o=n[(h+1-n.length/2)*2+1]),!(i==t&&s==t))if(i>=t&&t>=s||i<=t&&t<=s)l=(t-i)/(s-i)*(o-a)+a,l>r&&u++;else continue;return u%2!==0},io=function(t,r,n,i,a,s,o,l,u){var h=new Array(n.length),f;l[0]!=null?(f=Math.atan(l[1]/l[0]),l[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=l;for(var d=Math.cos(-f),g=Math.sin(-f),p=0;p<h.length/2;p++)h[p*2]=s/2*(n[p*2]*d-n[p*2+1]*g),h[p*2+1]=o/2*(n[p*2+1]*d+n[p*2]*g),h[p*2]+=i,h[p*2+1]+=a;var v;if(u>0){var m=Sm(h,-u);v=Cm(m)}else v=h;return ki(t,r,v)},OEt=function(t,r,n,i,a,s,o,l){for(var u=new Array(n.length*2),h=0;h<l.length;h++){var f=l[h];u[h*4+0]=f.startX,u[h*4+1]=f.startY,u[h*4+2]=f.stopX,u[h*4+3]=f.stopY;var d=Math.pow(f.cx-t,2)+Math.pow(f.cy-r,2);if(d<=Math.pow(f.radius,2))return!0}return ki(t,r,u)},Cm=function(t){for(var r=new Array(t.length/2),n,i,a,s,o,l,u,h,f=0;f<t.length/4;f++){n=t[f*4],i=t[f*4+1],a=t[f*4+2],s=t[f*4+3],f<t.length/4-1?(o=t[(f+1)*4],l=t[(f+1)*4+1],u=t[(f+1)*4+2],h=t[(f+1)*4+3]):(o=t[0],l=t[1],u=t[2],h=t[3]);var d=Co(n,i,a,s,o,l,u,h,!0);r[f*2]=d[0],r[f*2+1]=d[1]}return r},Sm=function(t,r){for(var n=new Array(t.length*2),i,a,s,o,l=0;l<t.length/2;l++){i=t[l*2],a=t[l*2+1],l<t.length/2-1?(s=t[(l+1)*2],o=t[(l+1)*2+1]):(s=t[0],o=t[1]);var u=o-a,h=-(s-i),f=Math.sqrt(u*u+h*h),d=u/f,g=h/f;n[l*4]=i+d*r,n[l*4+1]=a+g*r,n[l*4+2]=s+d*r,n[l*4+3]=o+g*r}return n},PEt=function(t,r,n,i,a,s){var o=n-t,l=i-r;o/=a,l/=s;var u=Math.sqrt(o*o+l*l),h=u-1;if(h<0)return[];var f=h/u;return[(n-t)*f+t,(i-r)*f+r]},Fl=function(t,r,n,i,a,s,o){return t-=a,r-=s,t/=n/2+o,r/=i/2+o,t*t+r*r<=1},zd=function(t,r,n,i,a,s,o){var l=[n-t,i-r],u=[t-a,r-s],h=l[0]*l[0]+l[1]*l[1],f=2*(u[0]*l[0]+u[1]*l[1]),d=u[0]*u[0]+u[1]*u[1]-o*o,g=f*f-4*h*d;if(g<0)return[];var p=(-f+Math.sqrt(g))/(2*h),v=(-f-Math.sqrt(g))/(2*h),m=Math.min(p,v),y=Math.max(p,v),b=[];if(m>=0&&m<=1&&b.push(m),y>=0&&y<=1&&b.push(y),b.length===0)return[];var T=b[0]*l[0]+t,w=b[0]*l[1]+r;if(b.length>1){if(b[0]==b[1])return[T,w];var k=b[1]*l[0]+t,S=b[1]*l[1]+r;return[T,w,k,S]}else return[T,w]},ib=function(t,r,n){return r<=t&&t<=n||n<=t&&t<=r?t:t<=r&&r<=n||n<=r&&r<=t?r:n},Co=function(t,r,n,i,a,s,o,l,u){var h=t-a,f=n-t,d=o-a,g=r-s,p=i-r,v=l-s,m=d*g-v*h,y=f*g-p*h,b=v*f-d*p;if(b!==0){var T=m/b,w=y/b,k=.001,S=0-k,E=1+k;return S<=T&&T<=E&&S<=w&&w<=E?[t+T*f,r+T*p]:u?[t+T*f,r+T*p]:[]}else return m===0||y===0?ib(t,n,o)===o?[o,l]:ib(t,n,a)===a?[a,s]:ib(a,o,n)===n?[n,i]:[]:[]},Gg=function(t,r,n,i,a,s,o,l){var u=[],h,f=new Array(n.length),d=!0;s==null&&(d=!1);var g;if(d){for(var p=0;p<f.length/2;p++)f[p*2]=n[p*2]*s+i,f[p*2+1]=n[p*2+1]*o+a;if(l>0){var v=Sm(f,-l);g=Cm(v)}else g=f}else g=n;for(var m,y,b,T,w=0;w<g.length/2;w++)m=g[w*2],y=g[w*2+1],w<g.length/2-1?(b=g[(w+1)*2],T=g[(w+1)*2+1]):(b=g[0],T=g[1]),h=Co(t,r,i,a,m,y,b,T),h.length!==0&&u.push(h[0],h[1]);return u},BEt=function(t,r,n,i,a,s,o,l,u){var h=[],f,d=new Array(n.length*2);u.forEach(function(b,T){T===0?(d[d.length-2]=b.startX,d[d.length-1]=b.startY):(d[T*4-2]=b.startX,d[T*4-1]=b.startY),d[T*4]=b.stopX,d[T*4+1]=b.stopY,f=zd(t,r,i,a,b.cx,b.cy,b.radius),f.length!==0&&h.push(f[0],f[1])});for(var g=0;g<d.length/4;g++)f=Co(t,r,i,a,d[g*4],d[g*4+1],d[g*4+2],d[g*4+3],!1),f.length!==0&&h.push(f[0],f[1]);if(h.length>2){for(var p=[h[0],h[1]],v=Math.pow(p[0]-t,2)+Math.pow(p[1]-r,2),m=1;m<h.length/2;m++){var y=Math.pow(h[m*2]-t,2)+Math.pow(h[m*2+1]-r,2);y<=v&&(p[0]=h[m*2],p[1]=h[m*2+1],v=y)}return p}return h},I0=function(t,r,n){var i=[t[0]-r[0],t[1]-r[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=(a-n)/a;return s<0&&(s=1e-5),[r[0]+s*i[0],r[1]+s*i[1]]},ii=function(t,r){var n=$E(t,r);return n=PV(n),n},PV=function(t){for(var r,n,i=t.length/2,a=1/0,s=1/0,o=-1/0,l=-1/0,u=0;u<i;u++)r=t[2*u],n=t[2*u+1],a=Math.min(a,r),o=Math.max(o,r),s=Math.min(s,n),l=Math.max(l,n);for(var h=2/(o-a),f=2/(l-s),d=0;d<i;d++)r=t[2*d]=t[2*d]*h,n=t[2*d+1]=t[2*d+1]*f,a=Math.min(a,r),o=Math.max(o,r),s=Math.min(s,n),l=Math.max(l,n);if(s<-1)for(var g=0;g<i;g++)n=t[2*g+1]=t[2*g+1]+(-1-s);return t},$E=function(t,r){var n=1/t*2*Math.PI,i=t%2===0?Math.PI/2+n/2:Math.PI/2;i+=r;for(var a=new Array(t*2),s,o=0;o<t;o++)s=o*n+i,a[2*o]=Math.cos(s),a[2*o+1]=Math.sin(-s);return a},Ho=function(t,r){return Math.min(t/4,r/4,8)},BV=function(t,r){return Math.min(t/10,r/10,8)},y_=function(){return 8},FEt=function(t,r,n){return[t-2*r+n,2*(r-t),t]},zE=function(t,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}};function $Et(e,t){function r(f){for(var d=[],g=0;g<f.length;g++){var p=f[g],v=f[(g+1)%f.length],m={x:v.x-p.x,y:v.y-p.y},y={x:-m.y,y:m.x},b=Math.sqrt(y.x*y.x+y.y*y.y);d.push({x:y.x/b,y:y.y/b})}return d}function n(f,d){var g=1/0,p=-1/0,v=_i(f),m;try{for(v.s();!(m=v.n()).done;){var y=m.value,b=y.x*d.x+y.y*d.y;g=Math.min(g,b),p=Math.max(p,b)}}catch(T){v.e(T)}finally{v.f()}return{min:g,max:p}}function i(f,d){return!(f.max<d.min||d.max<f.min)}var a=[].concat(Tm(r(e)),Tm(r(t))),s=_i(a),o;try{for(s.s();!(o=s.n()).done;){var l=o.value,u=n(e,l),h=n(t,l);if(!i(u,h))return!1}}catch(f){s.e(f)}finally{s.f()}return!0}var zEt=$n({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),VEt={pageRank:function(t){for(var r=zEt(t),n=r.dampingFactor,i=r.precision,a=r.iterations,s=r.weight,o=this._private.cy,l=this.byGroup(),u=l.nodes,h=l.edges,f=u.length,d=f*f,g=h.length,p=new Array(d),v=new Array(f),m=(1-n)/f,y=0;y<f;y++){for(var b=0;b<f;b++){var T=y*f+b;p[T]=0}v[y]=0}for(var w=0;w<g;w++){var k=h[w],S=k.data("source"),E=k.data("target");if(S!==E){var L=u.indexOfId(S),A=u.indexOfId(E),R=s(k),C=A*f+L;p[C]+=R,v[L]+=R}}for(var D=1/f+m,P=0;P<f;P++)if(v[P]===0)for(var _=0;_<f;_++){var I=_*f+P;p[I]=D}else for(var M=0;M<f;M++){var O=M*f+P;p[O]=p[O]/v[P]+m}for(var N=new Array(f),B=new Array(f),z,F=0;F<f;F++)N[F]=1;for(var V=0;V<a;V++){for(var G=0;G<f;G++)B[G]=0;for(var Y=0;Y<f;Y++)for(var Q=0;Q<f;Q++){var K=Y*f+Q;B[Y]+=p[K]*N[Q]}TEt(B),z=N,N=B,B=z;for(var it=0,ut=0;ut<f;ut++){var q=z[ut]-N[ut];it+=q*q}if(it<i)break}var W={rank:function(U){return U=o.collection(U)[0],N[u.indexOf(U)]}};return W}},PR=$n({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Tu={degreeCentralityNormalized:function(t){t=PR(t);var r=this.cy(),n=this.nodes(),i=n.length;if(t.directed){for(var h={},f={},d=0,g=0,p=0;p<i;p++){var v=n[p],m=v.id();t.root=v;var y=this.degreeCentrality(t);d<y.indegree&&(d=y.indegree),g<y.outdegree&&(g=y.outdegree),h[m]=y.indegree,f[m]=y.outdegree}return{indegree:function(T){return d==0?0:(Ee(T)&&(T=r.filter(T)),h[T.id()]/d)},outdegree:function(T){return g===0?0:(Ee(T)&&(T=r.filter(T)),f[T.id()]/g)}}}else{for(var a={},s=0,o=0;o<i;o++){var l=n[o];t.root=l;var u=this.degreeCentrality(t);s<u.degree&&(s=u.degree),a[l.id()]=u.degree}return{degree:function(T){return s===0?0:(Ee(T)&&(T=r.filter(T)),a[T.id()]/s)}}}},degreeCentrality:function(t){t=PR(t);var r=this.cy(),n=this,i=t,a=i.root,s=i.weight,o=i.directed,l=i.alpha;if(a=r.collection(a)[0],o){for(var g=a.connectedEdges(),p=g.filter(function(S){return S.target().same(a)&&n.has(S)}),v=g.filter(function(S){return S.source().same(a)&&n.has(S)}),m=p.length,y=v.length,b=0,T=0,w=0;w<p.length;w++)b+=s(p[w]);for(var k=0;k<v.length;k++)T+=s(v[k]);return{indegree:Math.pow(m,1-l)*Math.pow(b,l),outdegree:Math.pow(y,1-l)*Math.pow(T,l)}}else{for(var u=a.connectedEdges().intersection(n),h=u.length,f=0,d=0;d<u.length;d++)f+=s(u[d]);return{degree:Math.pow(h,1-l)*Math.pow(f,l)}}}};Tu.dc=Tu.degreeCentrality;Tu.dcn=Tu.degreeCentralityNormalised=Tu.degreeCentralityNormalized;var BR=$n({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),wu={closenessCentralityNormalized:function(t){for(var r=BR(t),n=r.harmonic,i=r.weight,a=r.directed,s=this.cy(),o={},l=0,u=this.nodes(),h=this.floydWarshall({weight:i,directed:a}),f=0;f<u.length;f++){for(var d=0,g=u[f],p=0;p<u.length;p++)if(f!==p){var v=h.distance(g,u[p]);n?d+=1/v:d+=v}n||(d=1/d),l<d&&(l=d),o[g.id()]=d}return{closeness:function(y){return l==0?0:(Ee(y)?y=s.filter(y)[0].id():y=y.id(),o[y]/l)}}},closenessCentrality:function(t){var r=BR(t),n=r.root,i=r.weight,a=r.directed,s=r.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:i,directed:a}),l=0,u=this.nodes(),h=0;h<u.length;h++){var f=u[h];if(!f.same(n)){var d=o.distanceTo(f);s?l+=1/d:l+=d}}return s?l:1/l}};wu.cc=wu.closenessCentrality;wu.ccn=wu.closenessCentralityNormalised=wu.closenessCentralityNormalized;var GEt=$n({weight:null,directed:!1}),VE={betweennessCentrality:function(t){for(var r=GEt(t),n=r.directed,i=r.weight,a=i!=null,s=this.cy(),o=this.nodes(),l={},u={},h=0,f={set:function(T,w){u[T]=w,w>h&&(h=w)},get:function(T){return u[T]}},d=0;d<o.length;d++){var g=o[d],p=g.id();n?l[p]=g.outgoers().nodes():l[p]=g.openNeighborhood().nodes(),f.set(p,0)}for(var v=function(){for(var T=o[m].id(),w=[],k={},S={},E={},L=new Bp(function(Y,Q){return E[Y]-E[Q]}),A=0;A<o.length;A++){var R=o[A].id();k[R]=[],S[R]=0,E[R]=1/0}for(S[T]=1,E[T]=0,L.push(T);!L.empty();){var C=L.pop();if(w.push(C),a)for(var D=0;D<l[C].length;D++){var P=l[C][D],_=s.getElementById(C),I=void 0;_.edgesTo(P).length>0?I=_.edgesTo(P)[0]:I=P.edgesTo(_)[0];var M=i(I);P=P.id(),E[P]>E[C]+M&&(E[P]=E[C]+M,L.nodes.indexOf(P)<0?L.push(P):L.updateItem(P),S[P]=0,k[P]=[]),E[P]==E[C]+M&&(S[P]=S[P]+S[C],k[P].push(C))}else for(var O=0;O<l[C].length;O++){var N=l[C][O].id();E[N]==1/0&&(L.push(N),E[N]=E[C]+1),E[N]==E[C]+1&&(S[N]=S[N]+S[C],k[N].push(C))}}for(var B={},z=0;z<o.length;z++)B[o[z].id()]=0;for(;w.length>0;){for(var F=w.pop(),V=0;V<k[F].length;V++){var G=k[F][V];B[G]=B[G]+S[G]/S[F]*(1+B[F])}F!=o[m].id()&&f.set(F,f.get(F)+B[F])}},m=0;m<o.length;m++)v();var y={betweenness:function(T){var w=s.collection(T).id();return f.get(w)},betweennessNormalized:function(T){if(h==0)return 0;var w=s.collection(T).id();return f.get(w)/h}};return y.betweennessNormalised=y.betweennessNormalized,y}};VE.bc=VE.betweennessCentrality;var UEt=$n({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),WEt=function(t){return UEt(t)},YEt=function(t,r){for(var n=0,i=0;i<r.length;i++)n+=r[i](t);return n},HEt=function(t,r,n){for(var i=0;i<r;i++)t[i*r+i]=n},FV=function(t,r){for(var n,i=0;i<r;i++){n=0;for(var a=0;a<r;a++)n+=t[a*r+i];for(var s=0;s<r;s++)t[s*r+i]=t[s*r+i]/n}},qEt=function(t,r,n){for(var i=new Array(n*n),a=0;a<n;a++){for(var s=0;s<n;s++)i[a*n+s]=0;for(var o=0;o<n;o++)for(var l=0;l<n;l++)i[a*n+l]+=t[a*n+o]*r[o*n+l]}return i},XEt=function(t,r,n){for(var i=t.slice(0),a=1;a<n;a++)t=qEt(t,i,r);return t},jEt=function(t,r,n){for(var i=new Array(r*r),a=0;a<r*r;a++)i[a]=Math.pow(t[a],n);return FV(i,r),i},KEt=function(t,r,n,i){for(var a=0;a<n;a++){var s=Math.round(t[a]*Math.pow(10,i))/Math.pow(10,i),o=Math.round(r[a]*Math.pow(10,i))/Math.pow(10,i);if(s!==o)return!1}return!0},ZEt=function(t,r,n,i){for(var a=[],s=0;s<r;s++){for(var o=[],l=0;l<r;l++)Math.round(t[s*r+l]*1e3)/1e3>0&&o.push(n[l]);o.length!==0&&a.push(i.collection(o))}return a},QEt=function(t,r){for(var n=0;n<t.length;n++)if(!r[n]||t[n].id()!==r[n].id())return!1;return!0},JEt=function(t){for(var r=0;r<t.length;r++)for(var n=0;n<t.length;n++)r!=n&&QEt(t[r],t[n])&&t.splice(n,1);return t},FR=function(t){for(var r=this.nodes(),n=this.edges(),i=this.cy(),a=WEt(t),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var l=r.length,u=l*l,h=new Array(u),f,d=0;d<u;d++)h[d]=0;for(var g=0;g<n.length;g++){var p=n[g],v=s[p.source().id()],m=s[p.target().id()],y=YEt(p,a.attributes);h[v*l+m]+=y,h[m*l+v]+=y}HEt(h,l,a.multFactor),FV(h,l);for(var b=!0,T=0;b&&T<a.maxIterations;)b=!1,f=XEt(h,l,a.expandFactor),h=jEt(f,l,a.inflateFactor),KEt(h,f,u,4)||(b=!0),T++;var w=ZEt(h,l,r,i);return w=JEt(w),w},tkt={markovClustering:FR,mcl:FR},ekt=function(t){return t},$V=function(t,r){return Math.abs(r-t)},$R=function(t,r,n){return t+$V(r,n)},zR=function(t,r,n){return t+Math.pow(n-r,2)},rkt=function(t){return Math.sqrt(t)},nkt=function(t,r,n){return Math.max(t,$V(r,n))},$f=function(t,r,n,i,a){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:ekt,o=i,l,u,h=0;h<t;h++)l=r(h),u=n(h),o=a(o,l,u);return s(o)},Yh={euclidean:function(t,r,n){return t>=2?$f(t,r,n,0,zR,rkt):$f(t,r,n,0,$R)},squaredEuclidean:function(t,r,n){return $f(t,r,n,0,zR)},manhattan:function(t,r,n){return $f(t,r,n,0,$R)},max:function(t,r,n){return $f(t,r,n,-1/0,nkt)}};Yh["squared-euclidean"]=Yh.squaredEuclidean;Yh.squaredeuclidean=Yh.squaredEuclidean;function n2(e,t,r,n,i,a){var s;return Mr(e)?s=e:s=Yh[e]||Yh.euclidean,t===0&&Mr(e)?s(i,a):s(t,r,n,i,a)}var ikt=$n({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),x_=function(t){return ikt(t)},_m=function(t,r,n,i,a){var s=a!=="kMedoids",o=s?function(f){return n[f]}:function(f){return i[f](n)},l=function(d){return i[d](r)},u=n,h=r;return n2(t,i.length,o,l,u,h)},ab=function(t,r,n){for(var i=n.length,a=new Array(i),s=new Array(i),o=new Array(r),l=null,u=0;u<i;u++)a[u]=t.min(n[u]).value,s[u]=t.max(n[u]).value;for(var h=0;h<r;h++){l=[];for(var f=0;f<i;f++)l[f]=Math.random()*(s[f]-a[f])+a[f];o[h]=l}return o},zV=function(t,r,n,i,a){for(var s=1/0,o=0,l=0;l<r.length;l++){var u=_m(n,t,r[l],i,a);u<s&&(s=u,o=l)}return o},VV=function(t,r,n){for(var i=[],a=null,s=0;s<r.length;s++)a=r[s],n[a.id()]===t&&i.push(a);return i},akt=function(t,r,n){return Math.abs(r-t)<=n},skt=function(t,r,n){for(var i=0;i<t.length;i++)for(var a=0;a<t[i].length;a++){var s=Math.abs(t[i][a]-r[i][a]);if(s>n)return!1}return!0},okt=function(t,r,n){for(var i=0;i<n;i++)if(t===r[i])return!0;return!1},VR=function(t,r){var n=new Array(r);if(t.length<50)for(var i=0;i<r;i++){for(var a=t[Math.floor(Math.random()*t.length)];okt(a,n,i);)a=t[Math.floor(Math.random()*t.length)];n[i]=a}else for(var s=0;s<r;s++)n[s]=t[Math.floor(Math.random()*t.length)];return n},GR=function(t,r,n){for(var i=0,a=0;a<r.length;a++)i+=_m("manhattan",r[a],t,n,"kMedoids");return i},lkt=function(t){var r=this.cy(),n=this.nodes(),i=null,a=x_(t),s=new Array(a.k),o={},l;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,l=ab(n,a.k,a.attributes)):hn(a.testCentroids)==="object"?l=a.testCentroids:l=ab(n,a.k,a.attributes):l=ab(n,a.k,a.attributes);for(var u=!0,h=0;u&&h<a.maxIterations;){for(var f=0;f<n.length;f++)i=n[f],o[i.id()]=zV(i,l,a.distance,a.attributes,"kMeans");u=!1;for(var d=0;d<a.k;d++){var g=VV(d,n,o);if(g.length!==0){for(var p=a.attributes.length,v=l[d],m=new Array(p),y=new Array(p),b=0;b<p;b++){y[b]=0;for(var T=0;T<g.length;T++)i=g[T],y[b]+=a.attributes[b](i);m[b]=y[b]/g.length,akt(m[b],v[b],a.sensitivityThreshold)||(u=!0)}l[d]=m,s[d]=r.collection(g)}}h++}return s},ckt=function(t){var r=this.cy(),n=this.nodes(),i=null,a=x_(t),s=new Array(a.k),o,l={},u,h=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(hn(a.testCentroids)==="object"?o=a.testCentroids:o=VR(n,a.k)):o=VR(n,a.k);for(var f=!0,d=0;f&&d<a.maxIterations;){for(var g=0;g<n.length;g++)i=n[g],l[i.id()]=zV(i,o,a.distance,a.attributes,"kMedoids");f=!1;for(var p=0;p<o.length;p++){var v=VV(p,n,l);if(v.length!==0){h[p]=GR(o[p],v,a.attributes);for(var m=0;m<v.length;m++)u=GR(v[m],v,a.attributes),u<h[p]&&(h[p]=u,o[p]=v[m],f=!0);s[p]=r.collection(v)}}d++}return s},ukt=function(t,r,n,i,a){for(var s,o,l=0;l<r.length;l++)for(var u=0;u<t.length;u++)i[l][u]=Math.pow(n[l][u],a.m);for(var h=0;h<t.length;h++)for(var f=0;f<a.attributes.length;f++){s=0,o=0;for(var d=0;d<r.length;d++)s+=i[d][h]*a.attributes[f](r[d]),o+=i[d][h];t[h][f]=s/o}},hkt=function(t,r,n,i,a){for(var s=0;s<t.length;s++)r[s]=t[s].slice();for(var o,l,u,h=2/(a.m-1),f=0;f<n.length;f++)for(var d=0;d<i.length;d++){o=0;for(var g=0;g<n.length;g++)l=_m(a.distance,i[d],n[f],a.attributes,"cmeans"),u=_m(a.distance,i[d],n[g],a.attributes,"cmeans"),o+=Math.pow(l/u,h);t[d][f]=1/o}},fkt=function(t,r,n,i){for(var a=new Array(n.k),s=0;s<a.length;s++)a[s]=[];for(var o,l,u=0;u<r.length;u++){o=-1/0,l=-1;for(var h=0;h<r[0].length;h++)r[u][h]>o&&(o=r[u][h],l=h);a[l].push(t[u])}for(var f=0;f<a.length;f++)a[f]=i.collection(a[f]);return a},UR=function(t){var r=this.cy(),n=this.nodes(),i=x_(t),a,s,o,l,u;l=new Array(n.length);for(var h=0;h<n.length;h++)l[h]=new Array(i.k);o=new Array(n.length);for(var f=0;f<n.length;f++)o[f]=new Array(i.k);for(var d=0;d<n.length;d++){for(var g=0,p=0;p<i.k;p++)o[d][p]=Math.random(),g+=o[d][p];for(var v=0;v<i.k;v++)o[d][v]=o[d][v]/g}s=new Array(i.k);for(var m=0;m<i.k;m++)s[m]=new Array(i.attributes.length);u=new Array(n.length);for(var y=0;y<n.length;y++)u[y]=new Array(i.k);for(var b=!0,T=0;b&&T<i.maxIterations;)b=!1,ukt(s,n,o,u,i),hkt(o,l,s,n,i),skt(o,l,i.sensitivityThreshold)||(b=!0),T++;return a=fkt(n,o,i,r),{clusters:a,degreeOfMembership:o}},dkt={kMeans:lkt,kMedoids:ckt,fuzzyCMeans:UR,fcm:UR},gkt=$n({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),pkt={single:"min",complete:"max"},vkt=function(t){var r=gkt(t),n=pkt[r.linkage];return n!=null&&(r.linkage=n),r},WR=function(t,r,n,i,a){for(var s=0,o=1/0,l,u=a.attributes,h=function(A,R){return n2(a.distance,u.length,function(C){return u[C](A)},function(C){return u[C](R)},A,R)},f=0;f<t.length;f++){var d=t[f].key,g=n[d][i[d]];g<o&&(s=d,o=g)}if(a.mode==="threshold"&&o>=a.threshold||a.mode==="dendrogram"&&t.length===1)return!1;var p=r[s],v=r[i[s]],m;a.mode==="dendrogram"?m={left:p,right:v,key:p.key}:m={value:p.value.concat(v.value),key:p.key},t[p.index]=m,t.splice(v.index,1),r[p.key]=m;for(var y=0;y<t.length;y++){var b=t[y];p.key===b.key?l=1/0:a.linkage==="min"?(l=n[p.key][b.key],n[p.key][b.key]>n[v.key][b.key]&&(l=n[v.key][b.key])):a.linkage==="max"?(l=n[p.key][b.key],n[p.key][b.key]<n[v.key][b.key]&&(l=n[v.key][b.key])):a.linkage==="mean"?l=(n[p.key][b.key]*p.size+n[v.key][b.key]*v.size)/(p.size+v.size):a.mode==="dendrogram"?l=h(b.value,p.value):l=h(b.value[0],p.value[0]),n[p.key][b.key]=n[b.key][p.key]=l}for(var T=0;T<t.length;T++){var w=t[T].key;if(i[w]===p.key||i[w]===v.key){for(var k=w,S=0;S<t.length;S++){var E=t[S].key;n[w][E]<n[w][k]&&(k=E)}i[w]=k}t[T].index=T}return p.key=v.key=p.index=v.index=null,!0},ou=function(t,r,n){t&&(t.value?r.push(t.value):(t.left&&ou(t.left,r),t.right&&ou(t.right,r)))},GE=function(t,r){if(!t)return"";if(t.left&&t.right){var n=GE(t.left,r),i=GE(t.right,r),a=r.add({group:"nodes",data:{id:n+","+i}});return r.add({group:"edges",data:{source:n,target:a.id()}}),r.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}else if(t.value)return t.value.id()},UE=function(t,r,n){if(!t)return[];var i=[],a=[],s=[];return r===0?(t.left&&ou(t.left,i),t.right&&ou(t.right,a),s=i.concat(a),[n.collection(s)]):r===1?t.value?[n.collection(t.value)]:(t.left&&ou(t.left,i),t.right&&ou(t.right,a),[n.collection(i),n.collection(a)]):t.value?[n.collection(t.value)]:(t.left&&(i=UE(t.left,r-1,n)),t.right&&(a=UE(t.right,r-1,n)),i.concat(a))},YR=function(t){for(var r=this.cy(),n=this.nodes(),i=vkt(t),a=i.attributes,s=function(T,w){return n2(i.distance,a.length,function(k){return a[k](T)},function(k){return a[k](w)},T,w)},o=[],l=[],u=[],h=[],f=0;f<n.length;f++){var d={value:i.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};o[f]=d,h[f]=d,l[f]=[],u[f]=0}for(var g=0;g<o.length;g++)for(var p=0;p<=g;p++){var v=void 0;i.mode==="dendrogram"?v=g===p?1/0:s(o[g].value,o[p].value):v=g===p?1/0:s(o[g].value[0],o[p].value[0]),l[g][p]=v,l[p][g]=v,v<l[g][u[g]]&&(u[g]=p)}for(var m=WR(o,h,l,u,i);m;)m=WR(o,h,l,u,i);var y;return i.mode==="dendrogram"?(y=UE(o[0],i.dendrogramDepth,r),i.addDendrogram&&GE(o[0],r)):(y=new Array(o.length),o.forEach(function(b,T){b.key=b.index=null,y[T]=r.collection(b.value)})),y},mkt={hierarchicalClustering:YR,hca:YR},ykt=$n({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),xkt=function(t){var r=t.damping,n=t.preference;.5<=r&&r<1||Dr("Damping must range on [0.5, 1).  Got: ".concat(r));var i=["median","mean","min","max"];return i.some(function(a){return a===n})||ne(n)||Dr("Preference must be one of [".concat(i.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),ykt(t)},bkt=function(t,r,n,i){var a=function(o,l){return i[l](o)};return-n2(t,i.length,function(s){return a(r,s)},function(s){return a(n,s)},r,n)},Tkt=function(t,r){var n=null;return r==="median"?n=xEt(t):r==="mean"?n=yEt(t):r==="min"?n=vEt(t):r==="max"?n=mEt(t):n=r,n},wkt=function(t,r,n){for(var i=[],a=0;a<t;a++)r[a*t+a]+n[a*t+a]>0&&i.push(a);return i},HR=function(t,r,n){for(var i=[],a=0;a<t;a++){for(var s=-1,o=-1/0,l=0;l<n.length;l++){var u=n[l];r[a*t+u]>o&&(s=u,o=r[a*t+u])}s>0&&i.push(s)}for(var h=0;h<n.length;h++)i[n[h]]=n[h];return i},Ekt=function(t,r,n){for(var i=HR(t,r,n),a=0;a<n.length;a++){for(var s=[],o=0;o<i.length;o++)i[o]===n[a]&&s.push(o);for(var l=-1,u=-1/0,h=0;h<s.length;h++){for(var f=0,d=0;d<s.length;d++)f+=r[s[d]*t+s[h]];f>u&&(l=h,u=f)}n[a]=s[l]}return i=HR(t,r,n),i},qR=function(t){for(var r=this.cy(),n=this.nodes(),i=xkt(t),a={},s=0;s<n.length;s++)a[n[s].id()]=s;var o,l,u,h,f,d;o=n.length,l=o*o,u=new Array(l);for(var g=0;g<l;g++)u[g]=-1/0;for(var p=0;p<o;p++)for(var v=0;v<o;v++)p!==v&&(u[p*o+v]=bkt(i.distance,n[p],n[v],i.attributes));h=Tkt(u,i.preference);for(var m=0;m<o;m++)u[m*o+m]=h;f=new Array(l);for(var y=0;y<l;y++)f[y]=0;d=new Array(l);for(var b=0;b<l;b++)d[b]=0;for(var T=new Array(o),w=new Array(o),k=new Array(o),S=0;S<o;S++)T[S]=0,w[S]=0,k[S]=0;for(var E=new Array(o*i.minIterations),L=0;L<E.length;L++)E[L]=0;var A;for(A=0;A<i.maxIterations;A++){for(var R=0;R<o;R++){for(var C=-1/0,D=-1/0,P=-1,_=0,I=0;I<o;I++)T[I]=f[R*o+I],_=d[R*o+I]+u[R*o+I],_>=C?(D=C,C=_,P=I):_>D&&(D=_);for(var M=0;M<o;M++)f[R*o+M]=(1-i.damping)*(u[R*o+M]-C)+i.damping*T[M];f[R*o+P]=(1-i.damping)*(u[R*o+P]-D)+i.damping*T[P]}for(var O=0;O<o;O++){for(var N=0,B=0;B<o;B++)T[B]=d[B*o+O],w[B]=Math.max(0,f[B*o+O]),N+=w[B];N-=w[O],w[O]=f[O*o+O],N+=w[O];for(var z=0;z<o;z++)d[z*o+O]=(1-i.damping)*Math.min(0,N-w[z])+i.damping*T[z];d[O*o+O]=(1-i.damping)*(N-w[O])+i.damping*T[O]}for(var F=0,V=0;V<o;V++){var G=d[V*o+V]+f[V*o+V]>0?1:0;E[A%i.minIterations*o+V]=G,F+=G}if(F>0&&(A>=i.minIterations-1||A==i.maxIterations-1)){for(var Y=0,Q=0;Q<o;Q++){k[Q]=0;for(var K=0;K<i.minIterations;K++)k[Q]+=E[K*o+Q];(k[Q]===0||k[Q]===i.minIterations)&&Y++}if(Y===o)break}}for(var it=wkt(o,f,d),ut=Ekt(o,u,it),q={},W=0;W<it.length;W++)q[it[W]]=[];for(var H=0;H<n.length;H++){var U=a[n[H].id()],X=ut[U];X!=null&&q[X].push(n[H])}for(var J=new Array(it.length),j=0;j<it.length;j++)J[j]=r.collection(q[it[j]]);return J},kkt={affinityPropagation:qR,ap:qR},Ckt=$n({root:void 0,directed:!1}),Skt={hierholzer:function(t){if(!Je(t)){var r=arguments;t={root:r[0],directed:r[1]}}var n=Ckt(t),i=n.root,a=n.directed,s=this,o=!1,l,u,h;i&&(h=Ee(i)?this.filter(i)[0].id():i[0].id());var f={},d={};a?s.forEach(function(b){var T=b.id();if(b.isNode()){var w=b.indegree(!0),k=b.outdegree(!0),S=w-k,E=k-w;S==1?l?o=!0:l=T:E==1?u?o=!0:u=T:(E>1||S>1)&&(o=!0),f[T]=[],b.outgoers().forEach(function(L){L.isEdge()&&f[T].push(L.id())})}else d[T]=[void 0,b.target().id()]}):s.forEach(function(b){var T=b.id();if(b.isNode()){var w=b.degree(!0);w%2&&(l?u?o=!0:u=T:l=T),f[T]=[],b.connectedEdges().forEach(function(k){return f[T].push(k.id())})}else d[T]=[b.source().id(),b.target().id()]});var g={found:!1,trail:void 0};if(o)return g;if(u&&l)if(a){if(h&&u!=h)return g;h=u}else{if(h&&u!=h&&l!=h)return g;h||(h=u)}else h||(h=s[0].id());var p=function(T){for(var w=T,k=[T],S,E,L;f[w].length;)S=f[w].shift(),E=d[S][0],L=d[S][1],w!=L?(f[L]=f[L].filter(function(A){return A!=S}),w=L):!a&&w!=E&&(f[E]=f[E].filter(function(A){return A!=S}),w=E),k.unshift(S),k.unshift(w);return k},v=[],m=[];for(m=p(h);m.length!=1;)f[m[0]].length==0?(v.unshift(s.getElementById(m.shift())),v.unshift(s.getElementById(m.shift()))):m=p(m.shift()).concat(m);v.unshift(s.getElementById(m.shift()));for(var y in f)if(f[y].length)return g;return g.found=!0,g.trail=this.spawn(v,!0),g}},N0=function(){var t=this,r={},n=0,i=0,a=[],s=[],o={},l=function(d,g){for(var p=s.length-1,v=[],m=t.spawn();s[p].x!=d||s[p].y!=g;)v.push(s.pop().edge),p--;v.push(s.pop().edge),v.forEach(function(y){var b=y.connectedNodes().intersection(t);m.merge(y),b.forEach(function(T){var w=T.id(),k=T.connectedEdges().intersection(t);m.merge(T),r[w].cutVertex?m.merge(k.filter(function(S){return S.isLoop()})):m.merge(k)})}),a.push(m)},u=function(d,g,p){d===p&&(i+=1),r[g]={id:n,low:n++,cutVertex:!1};var v=t.getElementById(g).connectedEdges().intersection(t);if(v.size()===0)a.push(t.spawn(t.getElementById(g)));else{var m,y,b,T;v.forEach(function(w){m=w.source().id(),y=w.target().id(),b=m===g?y:m,b!==p&&(T=w.id(),o[T]||(o[T]=!0,s.push({x:g,y:b,edge:w})),b in r?r[g].low=Math.min(r[g].low,r[b].id):(u(d,b,g),r[g].low=Math.min(r[g].low,r[b].low),r[g].id<=r[b].low&&(r[g].cutVertex=!0,l(g,b))))})}};t.forEach(function(f){if(f.isNode()){var d=f.id();d in r||(i=0,u(d,d),r[d].cutVertex=i>1)}});var h=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return t.getElementById(f)});return{cut:t.spawn(h),components:a}},_kt={hopcroftTarjanBiconnected:N0,htbc:N0,htb:N0,hopcroftTarjanBiconnectedComponents:N0},D0=function(){var t=this,r={},n=0,i=[],a=[],s=t.spawn(t),o=function(u){a.push(u),r[u]={index:n,low:n++,explored:!1};var h=t.getElementById(u).connectedEdges().intersection(t);if(h.forEach(function(v){var m=v.target().id();m!==u&&(m in r||o(m),r[m].explored||(r[u].low=Math.min(r[u].low,r[m].low)))}),r[u].index===r[u].low){for(var f=t.spawn();;){var d=a.pop();if(f.merge(t.getElementById(d)),r[d].low=r[u].index,r[d].explored=!0,d===u)break}var g=f.edgesWith(f),p=f.merge(g);i.push(p),s=s.difference(p)}};return t.forEach(function(l){if(l.isNode()){var u=l.id();u in r||o(u)}}),{cut:s,components:i}},Akt={tarjanStronglyConnected:D0,tsc:D0,tscc:D0,tarjanStronglyConnectedComponents:D0},GV={};[zg,iEt,aEt,oEt,cEt,hEt,gEt,VEt,Tu,wu,VE,tkt,dkt,mkt,kkt,Skt,_kt,Akt].forEach(function(e){Ce(GV,e)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var UV=0,WV=1,YV=2,Va=function(t){if(!(this instanceof Va))return new Va(t);this.id="Thenable/1.0.7",this.state=UV,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof t=="function"&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};Va.prototype={fulfill:function(t){return XR(this,WV,"fulfillValue",t)},reject:function(t){return XR(this,YV,"rejectReason",t)},then:function(t,r){var n=this,i=new Va;return n.onFulfilled.push(KR(t,i,"fulfill")),n.onRejected.push(KR(r,i,"reject")),HV(n),i.proxy}};var XR=function(t,r,n,i){return t.state===UV&&(t.state=r,t[n]=i,HV(t)),t},HV=function(t){t.state===WV?jR(t,"onFulfilled",t.fulfillValue):t.state===YV&&jR(t,"onRejected",t.rejectReason)},jR=function(t,r,n){if(t[r].length!==0){var i=t[r];t[r]=[];var a=function(){for(var o=0;o<i.length;o++)i[o](n)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},KR=function(t,r,n){return function(i){if(typeof t!="function")r[n].call(r,i);else{var a;try{a=t(i)}catch(s){r.reject(s);return}qV(r,a)}}},qV=function(t,r){if(t===r||t.proxy===r){t.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(hn(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(a){t.reject(a);return}if(typeof n=="function"){var i=!1;try{n.call(r,function(a){i||(i=!0,a===r?t.reject(new TypeError("circular thenable chain")):qV(t,a))},function(a){i||(i=!0,t.reject(a))})}catch(a){i||t.reject(a)}return}t.fulfill(r)};Va.all=function(e){return new Va(function(t,r){for(var n=new Array(e.length),i=0,a=function(l,u){n[l]=u,i++,i===e.length&&t(n)},s=0;s<e.length;s++)(function(o){var l=e[o],u=l!=null&&l.then!=null;if(u)l.then(function(f){a(o,f)},function(f){r(f)});else{var h=l;a(o,h)}})(s)})};Va.resolve=function(e){return new Va(function(t,r){t(e)})};Va.reject=function(e){return new Va(function(t,r){r(e)})};var df=typeof Promise<"u"?Promise:Va,WE=function(t,r,n){var i=c_(t),a=!i,s=this._private=Ce({duration:1e3},r,n);if(s.target=t,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&Mr(s.complete)&&s.completes.push(s.complete),a){var o=t.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||t.cy().style().getAnimationStartStyle(t,s.style)}if(i){var l=t.pan();s.startPan={x:l.x,y:l.y},s.startZoom=t.zoom()}this.length=1,this[0]=this},hc=WE.prototype;Ce(hc,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var r,n=t.target._private.animation;t.queue?r=n.queue:r=n.current,r.push(this),Xi(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return t.progress===1&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var r=this._private;return t===void 0?r.progress*r.duration:this.progress(t/r.duration)},progress:function(t){var r=this._private,n=r.playing;return t===void 0?r.progress:(n&&this.pause(),r.progress=t,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var t=this._private,r=t.playing;r&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(u,h){var f=t[u];f!=null&&(t[u]=t[h],t[h]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var i=0;i<t.style.length;i++){var a=t.style[i],s=a.name,o=t.startStyle[s];t.startStyle[s]=a,t.style[i]=o}return r&&this.play(),this},promise:function(t){var r=this._private,n;switch(t){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new df(function(i,a){n.push(function(){i()})})}});hc.complete=hc.completed;hc.run=hc.play;hc.running=hc.playing;var Lkt={animated:function(){return function(){var r=this,n=r.length!==void 0,i=n?r:[r],a=this._private.cy||this;if(!a.styleEnabled())return!1;var s=i[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,i=n?r:[r],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var s=0;s<i.length;s++){var o=i[s];o._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var i=this,a=i.length!==void 0,s=a?i:[i],o=this._private.cy||this,l=!a,u=!l;if(!o.styleEnabled())return this;var h=o.style();r=Ce({},r,n);var f=Object.keys(r).length===0;if(f)return new WE(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(u&&(r.style=h.getPropsList(r.style||r.css),r.css=void 0),u&&r.renderedPosition!=null){var d=r.renderedPosition,g=o.pan(),p=o.zoom();r.position=DV(d,p,g)}if(l&&r.panBy!=null){var v=r.panBy,m=o.pan();r.pan={x:m.x+v.x,y:m.y+v.y}}var y=r.center||r.centre;if(l&&y!=null){var b=o.getCenterPan(y.eles,r.zoom);b!=null&&(r.pan=b)}if(l&&r.fit!=null){var T=r.fit,w=o.getFitViewport(T.eles||T.boundingBox,T.padding);w!=null&&(r.pan=w.pan,r.zoom=w.zoom)}if(l&&Je(r.zoom)){var k=o.getZoomedViewport(r.zoom);k!=null?(k.zoomed&&(r.zoom=k.zoom),k.panned&&(r.pan=k.pan)):r.zoom=null}return new WE(s[0],r)}},animate:function(){return function(r,n){var i=this,a=i.length!==void 0,s=a?i:[i],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(r=Ce({},r,n));for(var l=0;l<s.length;l++){var u=s[l],h=u.animated()&&(r.queue===void 0||r.queue),f=u.animation(r,h?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var i=this,a=i.length!==void 0,s=a?i:[i],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var l=0;l<s.length;l++){for(var u=s[l],h=u._private,f=h.animation.current,d=0;d<f.length;d++){var g=f[d],p=g._private;n&&(p.duration=0)}r&&(h.animation.queue=[]),n||(h.animation.current=[])}return o.notify("draw"),this}}},sb,ZR;function i2(){if(ZR)return sb;ZR=1;var e=Array.isArray;return sb=e,sb}var ob,QR;function Rkt(){if(QR)return ob;QR=1;var e=i2(),t=Op(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:n.test(a)||!r.test(a)||s!=null&&a in Object(s)}return ob=i,ob}var lb,JR;function Ikt(){if(JR)return lb;JR=1;var e=kV(),t=Mp(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var l=e(o);return l==n||l==i||l==r||l==a}return lb=s,lb}var cb,tI;function Nkt(){if(tI)return cb;tI=1;var e=t2(),t=e["__core-js_shared__"];return cb=t,cb}var ub,eI;function Dkt(){if(eI)return ub;eI=1;var e=Nkt(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return ub=r,ub}var hb,rI;function Mkt(){if(rI)return hb;rI=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return hb=r,hb}var fb,nI;function Okt(){if(nI)return fb;nI=1;var e=Ikt(),t=Dkt(),r=Mp(),n=Mkt(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,h=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!r(d)||t(d))return!1;var g=e(d)?h:a;return g.test(n(d))}return fb=f,fb}var db,iI;function Pkt(){if(iI)return db;iI=1;function e(t,r){return t==null?void 0:t[r]}return db=e,db}var gb,aI;function b_(){if(aI)return gb;aI=1;var e=Okt(),t=Pkt();function r(n,i){var a=t(n,i);return e(a)?a:void 0}return gb=r,gb}var pb,sI;function a2(){if(sI)return pb;sI=1;var e=b_(),t=e(Object,"create");return pb=t,pb}var vb,oI;function Bkt(){if(oI)return vb;oI=1;var e=a2();function t(){this.__data__=e?e(null):{},this.size=0}return vb=t,vb}var mb,lI;function Fkt(){if(lI)return mb;lI=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return mb=e,mb}var yb,cI;function $kt(){if(cI)return yb;cI=1;var e=a2(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return n.call(s,a)?s[a]:void 0}return yb=i,yb}var xb,uI;function zkt(){if(uI)return xb;uI=1;var e=a2(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var a=this.__data__;return e?a[i]!==void 0:r.call(a,i)}return xb=n,xb}var bb,hI;function Vkt(){if(hI)return bb;hI=1;var e=a2(),t="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=e&&i===void 0?t:i,this}return bb=r,bb}var Tb,fI;function Gkt(){if(fI)return Tb;fI=1;var e=Bkt(),t=Fkt(),r=$kt(),n=zkt(),i=Vkt();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Tb=a,Tb}var wb,dI;function Ukt(){if(dI)return wb;dI=1;function e(){this.__data__=[],this.size=0}return wb=e,wb}var Eb,gI;function XV(){if(gI)return Eb;gI=1;function e(t,r){return t===r||t!==t&&r!==r}return Eb=e,Eb}var kb,pI;function s2(){if(pI)return kb;pI=1;var e=XV();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return kb=t,kb}var Cb,vI;function Wkt(){if(vI)return Cb;vI=1;var e=s2(),t=Array.prototype,r=t.splice;function n(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():r.call(a,s,1),--this.size,!0}return Cb=n,Cb}var Sb,mI;function Ykt(){if(mI)return Sb;mI=1;var e=s2();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return Sb=t,Sb}var _b,yI;function Hkt(){if(yI)return _b;yI=1;var e=s2();function t(r){return e(this.__data__,r)>-1}return _b=t,_b}var Ab,xI;function qkt(){if(xI)return Ab;xI=1;var e=s2();function t(r,n){var i=this.__data__,a=e(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return Ab=t,Ab}var Lb,bI;function Xkt(){if(bI)return Lb;bI=1;var e=Ukt(),t=Wkt(),r=Ykt(),n=Hkt(),i=qkt();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Lb=a,Lb}var Rb,TI;function jkt(){if(TI)return Rb;TI=1;var e=b_(),t=t2(),r=e(t,"Map");return Rb=r,Rb}var Ib,wI;function Kkt(){if(wI)return Ib;wI=1;var e=Gkt(),t=Xkt(),r=jkt();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Ib=n,Ib}var Nb,EI;function Zkt(){if(EI)return Nb;EI=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Nb=e,Nb}var Db,kI;function o2(){if(kI)return Db;kI=1;var e=Zkt();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Db=t,Db}var Mb,CI;function Qkt(){if(CI)return Mb;CI=1;var e=o2();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return Mb=t,Mb}var Ob,SI;function Jkt(){if(SI)return Ob;SI=1;var e=o2();function t(r){return e(this,r).get(r)}return Ob=t,Ob}var Pb,_I;function tCt(){if(_I)return Pb;_I=1;var e=o2();function t(r){return e(this,r).has(r)}return Pb=t,Pb}var Bb,AI;function eCt(){if(AI)return Bb;AI=1;var e=o2();function t(r,n){var i=e(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return Bb=t,Bb}var Fb,LI;function rCt(){if(LI)return Fb;LI=1;var e=Kkt(),t=Qkt(),r=Jkt(),n=tCt(),i=eCt();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Fb=a,Fb}var $b,RI;function nCt(){if(RI)return $b;RI=1;var e=rCt(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=n.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(r.Cache||e),a}return r.Cache=e,$b=r,$b}var zb,II;function iCt(){if(II)return zb;II=1;var e=nCt(),t=500;function r(n){var i=e(n,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return zb=r,zb}var Vb,NI;function jV(){if(NI)return Vb;NI=1;var e=iCt(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,l,u){a.push(l?u.replace(r,"$1"):o||s)}),a});return Vb=n,Vb}var Gb,DI;function KV(){if(DI)return Gb;DI=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=Array(i);++n<i;)a[n]=r(t[n],n,t);return a}return Gb=e,Gb}var Ub,MI;function aCt(){if(MI)return Ub;MI=1;var e=h_(),t=KV(),r=i2(),n=Op(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return t(o,s)+"";if(n(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Ub=s,Ub}var Wb,OI;function ZV(){if(OI)return Wb;OI=1;var e=aCt();function t(r){return r==null?"":e(r)}return Wb=t,Wb}var Yb,PI;function QV(){if(PI)return Yb;PI=1;var e=i2(),t=Rkt(),r=jV(),n=ZV();function i(a,s){return e(a)?a:t(a,s)?[a]:r(n(a))}return Yb=i,Yb}var Hb,BI;function T_(){if(BI)return Hb;BI=1;var e=Op();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Hb=t,Hb}var qb,FI;function sCt(){if(FI)return qb;FI=1;var e=QV(),t=T_();function r(n,i){i=e(i,n);for(var a=0,s=i.length;n!=null&&a<s;)n=n[t(i[a++])];return a&&a==s?n:void 0}return qb=r,qb}var Xb,$I;function oCt(){if($I)return Xb;$I=1;var e=sCt();function t(r,n,i){var a=r==null?void 0:e(r,n);return a===void 0?i:a}return Xb=t,Xb}var lCt=oCt(),cCt=Dp(lCt),jb,zI;function uCt(){if(zI)return jb;zI=1;var e=b_(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return jb=t,jb}var Kb,VI;function hCt(){if(VI)return Kb;VI=1;var e=uCt();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return Kb=t,Kb}var Zb,GI;function fCt(){if(GI)return Zb;GI=1;var e=hCt(),t=XV(),r=Object.prototype,n=r.hasOwnProperty;function i(a,s,o){var l=a[s];(!(n.call(a,s)&&t(l,o))||o===void 0&&!(s in a))&&e(a,s,o)}return Zb=i,Zb}var Qb,UI;function dCt(){if(UI)return Qb;UI=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return Qb=r,Qb}var Jb,WI;function gCt(){if(WI)return Jb;WI=1;var e=fCt(),t=QV(),r=dCt(),n=Mp(),i=T_();function a(s,o,l,u){if(!n(s))return s;o=t(o,s);for(var h=-1,f=o.length,d=f-1,g=s;g!=null&&++h<f;){var p=i(o[h]),v=l;if(p==="__proto__"||p==="constructor"||p==="prototype")return s;if(h!=d){var m=g[p];v=u?u(m,p,g):void 0,v===void 0&&(v=n(m)?m:r(o[h+1])?[]:{})}e(g,p,v),g=g[p]}return s}return Jb=a,Jb}var tT,YI;function pCt(){if(YI)return tT;YI=1;var e=gCt();function t(r,n,i){return r==null?r:e(r,n,i)}return tT=t,tT}var vCt=pCt(),mCt=Dp(vCt),eT,HI;function yCt(){if(HI)return eT;HI=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return eT=e,eT}var rT,qI;function xCt(){if(qI)return rT;qI=1;var e=KV(),t=yCt(),r=i2(),n=Op(),i=jV(),a=T_(),s=ZV();function o(l){return r(l)?e(l,a):n(l)?[l]:t(i(s(l)))}return rT=o,rT}var bCt=xCt(),TCt=Dp(bCt),wCt={data:function(t){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,a){},onSet:function(i){},canSet:function(i){return!0}};return t=Ce({},r,t),function(i,a){var s=t,o=this,l=o.length!==void 0,u=l?o:[o],h=l?o[0]:o;if(Ee(i)){var f=i.indexOf(".")!==-1,d=f&&TCt(i);if(s.allowGetting&&a===void 0){var g;return h&&(s.beforeGet(h),d&&h._private[s.field][i]===void 0?g=cCt(h._private[s.field],d):g=h._private[s.field][i]),g}else if(s.allowSetting&&a!==void 0){var p=!s.immutableKeys[i];if(p){var v=gV({},i,a);s.beforeSet(o,v);for(var m=0,y=u.length;m<y;m++){var b=u[m];s.canSet(b)&&(d&&h._private[s.field][i]===void 0?mCt(b._private[s.field],d,a):b._private[s.field][i]=a)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&Je(i)){var T=i,w,k,S=Object.keys(T);s.beforeSet(o,T);for(var E=0;E<S.length;E++){w=S[E],k=T[w];var L=!s.immutableKeys[w];if(L)for(var A=0;A<u.length;A++){var R=u[A];s.canSet(R)&&(R._private[s.field][w]=k)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&Mr(i)){var C=i;o.on(s.bindingEvent,C)}else if(s.allowGetting&&i===void 0){var D;return h&&(s.beforeGet(h),D=h._private[s.field]),D}return o}},removeData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=Ce({},r,t),function(i){var a=t,s=this,o=s.length!==void 0,l=o?s:[s];if(Ee(i)){for(var u=i.split(/\s+/),h=u.length,f=0;f<h;f++){var d=u[f];if(!Wo(d)){var g=!a.immutableKeys[d];if(g)for(var p=0,v=l.length;p<v;p++)l[p]._private[a.field][d]=void 0}}a.triggerEvent&&s[a.triggerFnName](a.event)}else if(i===void 0){for(var m=0,y=l.length;m<y;m++)for(var b=l[m]._private[a.field],T=Object.keys(b),w=0;w<T.length;w++){var k=T[w],S=!a.immutableKeys[k];S&&(b[k]=void 0)}a.triggerEvent&&s[a.triggerFnName](a.event)}return s}}},ECt={eventAliasesOn:function(t){var r=t;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,i){var a=this,s=Array.prototype.slice.call(arguments,0);return new df(function(o,l){var u=function(g){a.off.apply(a,f),o(g)},h=s.concat([u]),f=h.concat([]);a.on.apply(a,h)})}}},ir={};[Lkt,wCt,ECt].forEach(function(e){Ce(ir,e)});var kCt={animate:ir.animate(),animation:ir.animation(),animated:ir.animated(),clearQueue:ir.clearQueue(),delay:ir.delay(),delayAnimation:ir.delayAnimation(),stop:ir.stop()},M1={classes:function(t){var r=this;if(t===void 0){var n=[];return r[0]._private.classes.forEach(function(p){return n.push(p)}),n}else br(t)||(t=(t||"").match(/\S+/g)||[]);for(var i=[],a=new ff(t),s=0;s<r.length;s++){for(var o=r[s],l=o._private,u=l.classes,h=!1,f=0;f<t.length;f++){var d=t[f],g=u.has(d);if(!g){h=!0;break}}h||(h=u.size!==t.length),h&&(l.classes=a,i.push(o))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var r=this[0];return r!=null&&r._private.classes.has(t)},toggleClass:function(t,r){br(t)||(t=t.match(/\S+/g)||[]);for(var n=this,i=r===void 0,a=[],s=0,o=n.length;s<o;s++)for(var l=n[s],u=l._private.classes,h=!1,f=0;f<t.length;f++){var d=t[f],g=u.has(d),p=!1;r||i&&!g?(u.add(d),p=!0):(!r||i&&g)&&(u.delete(d),p=!0),!h&&p&&(a.push(l),h=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},r),n}};M1.className=M1.classNames=M1.classes;var Qe={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:on,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Qe.variable="(?:[\\w-.]|(?:\\\\"+Qe.metaChar+"))+";Qe.className="(?:[\\w-]|(?:\\\\"+Qe.metaChar+"))+";Qe.value=Qe.string+"|"+Qe.number;Qe.id=Qe.variable;(function(){var e,t,r;for(e=Qe.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],Qe.comparatorOp+="|@"+t;for(e=Qe.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],!(t.indexOf("!")>=0)&&t!=="="&&(Qe.comparatorOp+="|\\!"+t)})();var mr=function(){return{checks:[]}},de={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},YE=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(e,t){return Cwt(e.selector,t.selector)}),CCt=function(){for(var e={},t,r=0;r<YE.length;r++)t=YE[r],e[t.selector]=t.matches;return e}(),SCt=function(t,r){return CCt[t](r)},_Ct="("+YE.map(function(e){return e.selector}).join("|")+")",Vc=function(t){return t.replace(new RegExp("\\\\("+Qe.metaChar+")","g"),function(r,n){return n})},vo=function(t,r,n){t[t.length-1]=n},HE=[{name:"group",query:!0,regex:"("+Qe.group+")",populate:function(t,r,n){var i=tn(n,1),a=i[0];r.checks.push({type:de.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:_Ct,populate:function(t,r,n){var i=tn(n,1),a=i[0];r.checks.push({type:de.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+Qe.id+")",populate:function(t,r,n){var i=tn(n,1),a=i[0];r.checks.push({type:de.ID,value:Vc(a)})}},{name:"className",query:!0,regex:"\\.("+Qe.className+")",populate:function(t,r,n){var i=tn(n,1),a=i[0];r.checks.push({type:de.CLASS,value:Vc(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Qe.variable+")\\s*\\]",populate:function(t,r,n){var i=tn(n,1),a=i[0];r.checks.push({type:de.DATA_EXIST,field:Vc(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Qe.variable+")\\s*("+Qe.comparatorOp+")\\s*("+Qe.value+")\\s*\\]",populate:function(t,r,n){var i=tn(n,3),a=i[0],s=i[1],o=i[2],l=new RegExp("^"+Qe.string+"$").exec(o)!=null;l?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:de.DATA_COMPARE,field:Vc(a),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Qe.boolOp+")\\s*("+Qe.variable+")\\s*\\]",populate:function(t,r,n){var i=tn(n,2),a=i[0],s=i[1];r.checks.push({type:de.DATA_BOOL,field:Vc(s),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Qe.meta+")\\s*("+Qe.comparatorOp+")\\s*("+Qe.number+")\\s*\\]\\]",populate:function(t,r,n){var i=tn(n,3),a=i[0],s=i[1],o=i[2];r.checks.push({type:de.META_COMPARE,field:Vc(a),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Qe.separator,populate:function(t,r){var n=t.currentSubject,i=t.edgeCount,a=t.compoundCount,s=t[t.length-1];n!=null&&(s.subject=n,t.currentSubject=null),s.edgeCount=i,s.compoundCount=a,t.edgeCount=0,t.compoundCount=0;var o=t[t.length++]=mr();return o}},{name:"directedEdge",separator:!0,regex:Qe.directedEdge,populate:function(t,r){if(t.currentSubject==null){var n=mr(),i=r,a=mr();return n.checks.push({type:de.DIRECTED_EDGE,source:i,target:a}),vo(t,r,n),t.edgeCount++,a}else{var s=mr(),o=r,l=mr();return s.checks.push({type:de.NODE_SOURCE,source:o,target:l}),vo(t,r,s),t.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:Qe.undirectedEdge,populate:function(t,r){if(t.currentSubject==null){var n=mr(),i=r,a=mr();return n.checks.push({type:de.UNDIRECTED_EDGE,nodes:[i,a]}),vo(t,r,n),t.edgeCount++,a}else{var s=mr(),o=r,l=mr();return s.checks.push({type:de.NODE_NEIGHBOR,node:o,neighbor:l}),vo(t,r,s),l}}},{name:"child",separator:!0,regex:Qe.child,populate:function(t,r){if(t.currentSubject==null){var n=mr(),i=mr(),a=t[t.length-1];return n.checks.push({type:de.CHILD,parent:a,child:i}),vo(t,r,n),t.compoundCount++,i}else if(t.currentSubject===r){var s=mr(),o=t[t.length-1],l=mr(),u=mr(),h=mr(),f=mr();return s.checks.push({type:de.COMPOUND_SPLIT,left:o,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:de.TRUE}],f.checks.push({type:de.TRUE}),l.checks.push({type:de.PARENT,parent:f,child:h}),vo(t,o,s),t.currentSubject=u,t.compoundCount++,h}else{var d=mr(),g=mr(),p=[{type:de.PARENT,parent:d,child:g}];return d.checks=r.checks,r.checks=p,t.compoundCount++,g}}},{name:"descendant",separator:!0,regex:Qe.descendant,populate:function(t,r){if(t.currentSubject==null){var n=mr(),i=mr(),a=t[t.length-1];return n.checks.push({type:de.DESCENDANT,ancestor:a,descendant:i}),vo(t,r,n),t.compoundCount++,i}else if(t.currentSubject===r){var s=mr(),o=t[t.length-1],l=mr(),u=mr(),h=mr(),f=mr();return s.checks.push({type:de.COMPOUND_SPLIT,left:o,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:de.TRUE}],f.checks.push({type:de.TRUE}),l.checks.push({type:de.ANCESTOR,ancestor:f,descendant:h}),vo(t,o,s),t.currentSubject=u,t.compoundCount++,h}else{var d=mr(),g=mr(),p=[{type:de.ANCESTOR,ancestor:d,descendant:g}];return d.checks=r.checks,r.checks=p,t.compoundCount++,g}}},{name:"subject",modifier:!0,regex:Qe.subject,populate:function(t,r){if(t.currentSubject!=null&&t.currentSubject!==r)return or("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=r;var n=t[t.length-1],i=n.checks[0],a=i==null?null:i.type;a===de.DIRECTED_EDGE?i.type=de.NODE_TARGET:a===de.UNDIRECTED_EDGE&&(i.type=de.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];HE.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var ACt=function(t){for(var r,n,i,a=0;a<HE.length;a++){var s=HE[a],o=s.name,l=t.match(s.regexObj);if(l!=null){n=l,r=s,i=o;var u=l[0];t=t.substring(u.length);break}}return{expr:r,match:n,name:i,remaining:t}},LCt=function(t){var r=t.match(/^\s+/);if(r){var n=r[0];t=t.substring(n.length)}return t},RCt=function(t){var r=this,n=r.inputText=t,i=r[0]=mr();for(r.length=1,n=LCt(n);;){var a=ACt(n);if(a.expr==null)return or("The selector `"+t+"`is invalid"),!1;var s=a.match.slice(1),o=a.expr.populate(r,i,s);if(o===!1)return!1;if(o!=null&&(i=o),n=a.remaining,n.match(/^\s*$/))break}var l=r[r.length-1];r.currentSubject!=null&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var h=r[u];if(h.compoundCount>0&&h.edgeCount>0)return or("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(h.edgeCount>1)return or("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;h.edgeCount===1&&or("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},ICt=function(){if(this.toStringCache!=null)return this.toStringCache;for(var t=function(h){return h??""},r=function(h){return Ee(h)?'"'+h+'"':t(h)},n=function(h){return" "+h+" "},i=function(h,f){var d=h.type,g=h.value;switch(d){case de.GROUP:{var p=t(g);return p.substring(0,p.length-1)}case de.DATA_COMPARE:{var v=h.field,m=h.operator;return"["+v+n(t(m))+r(g)+"]"}case de.DATA_BOOL:{var y=h.operator,b=h.field;return"["+t(y)+b+"]"}case de.DATA_EXIST:{var T=h.field;return"["+T+"]"}case de.META_COMPARE:{var w=h.operator,k=h.field;return"[["+k+n(t(w))+r(g)+"]]"}case de.STATE:return g;case de.ID:return"#"+g;case de.CLASS:return"."+g;case de.PARENT:case de.CHILD:return a(h.parent,f)+n(">")+a(h.child,f);case de.ANCESTOR:case de.DESCENDANT:return a(h.ancestor,f)+" "+a(h.descendant,f);case de.COMPOUND_SPLIT:{var S=a(h.left,f),E=a(h.subject,f),L=a(h.right,f);return S+(S.length>0?" ":"")+E+L}case de.TRUE:return""}},a=function(h,f){return h.checks.reduce(function(d,g,p){return d+(f===h&&p===0?"$":"")+i(g,f)},"")},s="",o=0;o<this.length;o++){var l=this[o];s+=a(l,l.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},NCt={parse:RCt,toString:ICt},JV=function(t,r,n){var i,a=Ee(t),s=ne(t),o=Ee(n),l,u,h=!1,f=!1,d=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),h=!0),(a||o||h)&&(l=!a&&!s?"":""+t,u=""+n),h&&(t=l=l.toLowerCase(),n=u=u.toLowerCase()),r){case"*=":i=l.indexOf(u)>=0;break;case"$=":i=l.indexOf(u,l.length-u.length)>=0;break;case"^=":i=l.indexOf(u)===0;break;case"=":i=t===n;break;case">":d=!0,i=t>n;break;case">=":d=!0,i=t>=n;break;case"<":d=!0,i=t<n;break;case"<=":d=!0,i=t<=n;break;default:i=!1;break}return f&&(t!=null||!d)&&(i=!i),i},DCt=function(t,r){switch(r){case"?":return!!t;case"!":return!t;case"^":return t===void 0}},MCt=function(t){return t!==void 0},w_=function(t,r){return t.data(r)},OCt=function(t,r){return t[r]()},$r=[],Cr=function(t,r){return t.checks.every(function(n){return $r[n.type](n,r)})};$r[de.GROUP]=function(e,t){var r=e.value;return r==="*"||r===t.group()};$r[de.STATE]=function(e,t){var r=e.value;return SCt(r,t)};$r[de.ID]=function(e,t){var r=e.value;return t.id()===r};$r[de.CLASS]=function(e,t){var r=e.value;return t.hasClass(r)};$r[de.META_COMPARE]=function(e,t){var r=e.field,n=e.operator,i=e.value;return JV(OCt(t,r),n,i)};$r[de.DATA_COMPARE]=function(e,t){var r=e.field,n=e.operator,i=e.value;return JV(w_(t,r),n,i)};$r[de.DATA_BOOL]=function(e,t){var r=e.field,n=e.operator;return DCt(w_(t,r),n)};$r[de.DATA_EXIST]=function(e,t){var r=e.field;return e.operator,MCt(w_(t,r))};$r[de.UNDIRECTED_EDGE]=function(e,t){var r=e.nodes[0],n=e.nodes[1],i=t.source(),a=t.target();return Cr(r,i)&&Cr(n,a)||Cr(n,i)&&Cr(r,a)};$r[de.NODE_NEIGHBOR]=function(e,t){return Cr(e.node,t)&&t.neighborhood().some(function(r){return r.isNode()&&Cr(e.neighbor,r)})};$r[de.DIRECTED_EDGE]=function(e,t){return Cr(e.source,t.source())&&Cr(e.target,t.target())};$r[de.NODE_SOURCE]=function(e,t){return Cr(e.source,t)&&t.outgoers().some(function(r){return r.isNode()&&Cr(e.target,r)})};$r[de.NODE_TARGET]=function(e,t){return Cr(e.target,t)&&t.incomers().some(function(r){return r.isNode()&&Cr(e.source,r)})};$r[de.CHILD]=function(e,t){return Cr(e.child,t)&&Cr(e.parent,t.parent())};$r[de.PARENT]=function(e,t){return Cr(e.parent,t)&&t.children().some(function(r){return Cr(e.child,r)})};$r[de.DESCENDANT]=function(e,t){return Cr(e.descendant,t)&&t.ancestors().some(function(r){return Cr(e.ancestor,r)})};$r[de.ANCESTOR]=function(e,t){return Cr(e.ancestor,t)&&t.descendants().some(function(r){return Cr(e.descendant,r)})};$r[de.COMPOUND_SPLIT]=function(e,t){return Cr(e.subject,t)&&Cr(e.left,t)&&Cr(e.right,t)};$r[de.TRUE]=function(){return!0};$r[de.COLLECTION]=function(e,t){var r=e.value;return r.has(t)};$r[de.FILTER]=function(e,t){var r=e.value;return r(t)};var PCt=function(t){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===de.ID)return t.getElementById(r[0].checks[0].value).collection();var n=function(a){for(var s=0;s<r.length;s++){var o=r[s];if(Cr(o,a))return!0}return!1};return r.text()==null&&(n=function(){return!0}),t.filter(n)},BCt=function(t){for(var r=this,n=0;n<r.length;n++){var i=r[n];if(Cr(i,t))return!0}return!1},FCt={matches:BCt,filter:PCt},qo=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,t==null||Ee(t)&&t.match(/^\s*$/)||(Xi(t)?this.addQuery({checks:[{type:de.COLLECTION,value:t.collection()}]}):Mr(t)?this.addQuery({checks:[{type:de.FILTER,value:t}]}):Ee(t)?this.parse(t)||(this.invalid=!0):Dr("A selector must be created from a string; found "))},Xo=qo.prototype;[NCt,FCt].forEach(function(e){return Ce(Xo,e)});Xo.text=function(){return this.inputText};Xo.size=function(){return this.length};Xo.eq=function(e){return this[e]};Xo.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()};Xo.addQuery=function(e){this[this.length++]=e};Xo.selector=Xo.toString;var Io={allAre:function(t){var r=new qo(t);return this.every(function(n){return r.matches(n)})},is:function(t){var r=new qo(t);return this.some(function(n){return r.matches(n)})},some:function(t,r){for(var n=0;n<this.length;n++){var i=r?t.apply(r,[this[n],n,this]):t(this[n],n,this);if(i)return!0}return!1},every:function(t,r){for(var n=0;n<this.length;n++){var i=r?t.apply(r,[this[n],n,this]):t(this[n],n,this);if(!i)return!1}return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var r=this.length,n=t.length;return r!==n?!1:r===1?this[0]===t[0]:this.every(function(i){return t.hasElementWithId(i.id())})},anySame:function(t){return t=this.cy().collection(t),this.some(function(r){return t.hasElementWithId(r.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var r=this.neighborhood();return t.every(function(n){return r.hasElementWithId(n.id())})},contains:function(t){t=this.cy().collection(t);var r=this;return t.every(function(n){return r.hasElementWithId(n.id())})}};Io.allAreNeighbours=Io.allAreNeighbors;Io.has=Io.contains;Io.equal=Io.equals=Io.same;var ga=function(t,r){return function(i,a,s,o){var l=i,u=this,h;if(l==null?h="":Xi(l)&&l.length===1&&(h=l.id()),u.length===1&&h){var f=u[0]._private,d=f.traversalCache=f.traversalCache||{},g=d[r]=d[r]||[],p=cc(h),v=g[p];return v||(g[p]=t.call(u,i,a,s,o))}else return t.call(u,i,a,s,o)}},Hh={parent:function(t){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var a=this[i],s=a._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(t)},parents:function(t){for(var r=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];r.push(a)}n=n.parent()}return this.spawn(r,!0).filter(t)},commonAncestors:function(t){for(var r,n=0;n<this.length;n++){var i=this[n],a=i.parents();r=r||a,r=r.intersect(a)}return r.filter(t)},orphans:function(t){return this.stdFilter(function(r){return r.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(r){return r.isChild()}).filter(t)},children:ga(function(e){for(var t=[],r=0;r<this.length;r++)for(var n=this[r],i=n._private.children,a=0;a<i.length;a++)t.push(i[a]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&t._private.children.length!==0},isChildless:function(){var t=this[0];if(t)return t.isNode()&&t._private.children.length===0},isChild:function(){var t=this[0];if(t)return t.isNode()&&t._private.parent!=null},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&t._private.parent==null},descendants:function(t){var r=[];function n(i){for(var a=0;a<i.length;a++){var s=i[a];r.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(r,!0).filter(t)}};function E_(e,t,r,n){for(var i=[],a=new ff,s=e.cy(),o=s.hasCompoundNodes(),l=0;l<e.length;l++){var u=e[l];r?i.push(u):o&&n(i,a,u)}for(;i.length>0;){var h=i.shift();t(h),a.add(h.id()),o&&n(i,a,h)}return e}function tG(e,t,r){if(r.isParent())for(var n=r._private.children,i=0;i<n.length;i++){var a=n[i];t.has(a.id())||e.push(a)}}Hh.forEachDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return E_(this,e,t,tG)};function eG(e,t,r){if(r.isChild()){var n=r._private.parent;t.has(n.id())||e.push(n)}}Hh.forEachUp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return E_(this,e,t,eG)};function $Ct(e,t,r){eG(e,t,r),tG(e,t,r)}Hh.forEachUpAndDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return E_(this,e,t,$Ct)};Hh.ancestors=Hh.parents;var Ug,rG;Ug=rG={data:ir.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:ir.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:ir.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ir.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:ir.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:ir.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}};Ug.attr=Ug.data;Ug.removeAttr=Ug.removeData;var zCt=rG,l2={};function nT(e){return function(t){var r=this;if(t===void 0&&(t=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,i=r[0],a=i._private.edges,s=0;s<a.length;s++){var o=a[s];!t&&o.isLoop()||(n+=e(i,o))}return n}else return}}Ce(l2,{degree:nT(function(e,t){return t.source().same(t.target())?2:1}),indegree:nT(function(e,t){return t.target().same(e)?1:0}),outdegree:nT(function(e,t){return t.source().same(e)?1:0})});function Gc(e,t){return function(r){for(var n,i=this.nodes(),a=0;a<i.length;a++){var s=i[a],o=s[e](r);o!==void 0&&(n===void 0||t(o,n))&&(n=o)}return n}}Ce(l2,{minDegree:Gc("degree",function(e,t){return e<t}),maxDegree:Gc("degree",function(e,t){return e>t}),minIndegree:Gc("indegree",function(e,t){return e<t}),maxIndegree:Gc("indegree",function(e,t){return e>t}),minOutdegree:Gc("outdegree",function(e,t){return e<t}),maxOutdegree:Gc("outdegree",function(e,t){return e>t})});Ce(l2,{totalDegree:function(t){for(var r=0,n=this.nodes(),i=0;i<n.length;i++)r+=n[i].degree(t);return r}});var Oa,nG,iG=function(t,r,n){for(var i=0;i<t.length;i++){var a=t[i];if(!a.locked()){var s=a._private.position,o={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};a.isParent()&&!(o.x===0&&o.y===0)&&a.children().shift(o,n),a.dirtyBoundingBoxCache()}}},XI={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,r){iG(t,r,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};Oa=nG={position:ir.data(XI),silentPosition:ir.data(Ce({},XI,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,r){iG(t,r,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,r){if(Je(t))r?this.silentPosition(t):this.position(t);else if(Mr(t)){var n=t,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var s=this[a],o=void 0;(o=n(s,a))&&(r?s.silentPosition(o):s.position(o))}i.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,r,n){var i;if(Je(t)?(i={x:ne(t.x)?t.x:0,y:ne(t.y)?t.y:0},n=r):Ee(t)&&ne(r)&&(i={x:0,y:0},i[t]=r),i!=null){var a=this.cy();a.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(a.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var l=o.position(),u={x:l.x+i.x,y:l.y+i.y};n?o.silentPosition(u):o.position(u)}}a.endBatch()}return this},silentShift:function(t,r){return Je(t)?this.shift(t,!0):Ee(t)&&ne(r)&&this.shift(t,r,!0),this},renderedPosition:function(t,r){var n=this[0],i=this.cy(),a=i.zoom(),s=i.pan(),o=Je(t)?t:void 0,l=o!==void 0||r!==void 0&&Ee(t);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var h=this[u];r!==void 0?h.position(t,(r-s[t])/a):o!==void 0&&h.position(DV(o,a,s))}else{var f=n.position();return o=r2(f,a,s),t===void 0?o:o[t]}else if(!l)return;return this},relativePosition:function(t,r){var n=this[0],i=this.cy(),a=Je(t)?t:void 0,s=a!==void 0||r!==void 0&&Ee(t),o=i.hasCompoundNodes();if(n&&n.isNode())if(s)for(var l=0;l<this.length;l++){var u=this[l],h=o?u.parent():null,f=h&&h.length>0,d=f;f&&(h=h[0]);var g=d?h.position():{x:0,y:0};r!==void 0?u.position(t,r+g[t]):a!==void 0&&u.position({x:a.x+g.x,y:a.y+g.y})}else{var p=n.position(),v=o?n.parent():null,m=v&&v.length>0,y=m;m&&(v=v[0]);var b=y?v.position():{x:0,y:0};return a={x:p.x-b.x,y:p.y-b.y},t===void 0?a:a[t]}else if(!s)return;return this}};Oa.modelPosition=Oa.point=Oa.position;Oa.modelPositions=Oa.points=Oa.positions;Oa.renderedPoint=Oa.renderedPosition;Oa.relativePoint=Oa.relativePosition;var VCt=nG,Eu,sl;Eu=sl={};sl.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),n=r.zoom(),i=r.pan(),a=t.x1*n+i.x,s=t.x2*n+i.x,o=t.y1*n+i.y,l=t.y2*n+i.y;return{x1:a,x2:s,y1:o,y2:l,w:s-a,h:l-o}};sl.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();return!t.styleEnabled()||!t.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,e||r.emitAndNotify("bounds")}}),this)};sl.updateCompoundBounds=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(s){if(!s.isParent())return;var o=s._private,l=s.children(),u=s.pstyle("compound-sizing-wrt-labels").value==="include",h={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},f=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),d=o.position;(f.w===0||f.h===0)&&(f={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},f.x1=d.x-f.w/2,f.x2=d.x+f.w/2,f.y1=d.y-f.h/2,f.y2=d.y+f.h/2);function g(A,R,C){var D=0,P=0,_=R+C;return A>0&&_>0&&(D=R/_*A,P=C/_*A),{biasDiff:D,biasComplementDiff:P}}function p(A,R,C,D){if(C.units==="%")switch(D){case"width":return A>0?C.pfValue*A:0;case"height":return R>0?C.pfValue*R:0;case"average":return A>0&&R>0?C.pfValue*(A+R)/2:0;case"min":return A>0&&R>0?A>R?C.pfValue*R:C.pfValue*A:0;case"max":return A>0&&R>0?A>R?C.pfValue*A:C.pfValue*R:0;default:return 0}else return C.units==="px"?C.pfValue:0}var v=h.width.left.value;h.width.left.units==="px"&&h.width.val>0&&(v=v*100/h.width.val);var m=h.width.right.value;h.width.right.units==="px"&&h.width.val>0&&(m=m*100/h.width.val);var y=h.height.top.value;h.height.top.units==="px"&&h.height.val>0&&(y=y*100/h.height.val);var b=h.height.bottom.value;h.height.bottom.units==="px"&&h.height.val>0&&(b=b*100/h.height.val);var T=g(h.width.val-f.w,v,m),w=T.biasDiff,k=T.biasComplementDiff,S=g(h.height.val-f.h,y,b),E=S.biasDiff,L=S.biasComplementDiff;o.autoPadding=p(f.w,f.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(f.w,h.width.val),d.x=(-w+f.x1+f.x2+k)/2,o.autoHeight=Math.max(f.h,h.height.val),d.y=(-E+f.y1+f.y2+L)/2}for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||e)&&(r(i),t.batching()||(a.compoundBoundsClean=!0))}return this};var ua=function(t){return t===1/0||t===-1/0?0:t},Sa=function(t,r,n,i,a){i-r===0||a-n===0||r==null||n==null||i==null||a==null||(t.x1=r<t.x1?r:t.x1,t.x2=i>t.x2?i:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=a>t.y2?a:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},Tl=function(t,r){return r==null?t:Sa(t,r.x1,r.y1,r.x2,r.y2)},zf=function(t,r,n){return Ei(t,r,n)},M0=function(t,r,n){if(!r.cy().headless()){var i=r._private,a=i.rstyle,s=a.arrowWidth/2,o=r.pstyle(n+"-arrow-shape").value,l,u;if(o!=="none"){n==="source"?(l=a.srcX,u=a.srcY):n==="target"?(l=a.tgtX,u=a.tgtY):(l=a.midX,u=a.midY);var h=i.arrowBounds=i.arrowBounds||{},f=h[n]=h[n]||{};f.x1=l-s,f.y1=u-s,f.x2=l+s,f.y2=u+s,f.w=f.x2-f.x1,f.h=f.y2-f.y1,N1(f,1),Sa(t,f.x1,f.y1,f.x2,f.y2)}}},iT=function(t,r,n){if(!r.cy().headless()){var i;n?i=n+"-":i="";var a=r._private,s=a.rstyle,o=r.pstyle(i+"label").strValue;if(o){var l=r.pstyle("text-halign"),u=r.pstyle("text-valign"),h=zf(s,"labelWidth",n),f=zf(s,"labelHeight",n),d=zf(s,"labelX",n),g=zf(s,"labelY",n),p=r.pstyle(i+"text-margin-x").pfValue,v=r.pstyle(i+"text-margin-y").pfValue,m=r.isEdge(),y=r.pstyle(i+"text-rotation"),b=r.pstyle("text-outline-width").pfValue,T=r.pstyle("text-border-width").pfValue,w=T/2,k=r.pstyle("text-background-padding").pfValue,S=2,E=f,L=h,A=L/2,R=E/2,C,D,P,_;if(m)C=d-A,D=d+A,P=g-R,_=g+R;else{switch(l.value){case"left":C=d-L,D=d;break;case"center":C=d-A,D=d+A;break;case"right":C=d,D=d+L;break}switch(u.value){case"top":P=g-E,_=g;break;case"center":P=g-R,_=g+R;break;case"bottom":P=g,_=g+E;break}}var I=p-Math.max(b,w)-k-S,M=p+Math.max(b,w)+k+S,O=v-Math.max(b,w)-k-S,N=v+Math.max(b,w)+k+S;C+=I,D+=M,P+=O,_+=N;var B=n||"main",z=a.labelBounds,F=z[B]=z[B]||{};F.x1=C,F.y1=P,F.x2=D,F.y2=_,F.w=D-C,F.h=_-P,F.leftPad=I,F.rightPad=M,F.topPad=O,F.botPad=N;var V=m&&y.strValue==="autorotate",G=y.pfValue!=null&&y.pfValue!==0;if(V||G){var Y=V?zf(a.rstyle,"labelAngle",n):y.pfValue,Q=Math.cos(Y),K=Math.sin(Y),it=(C+D)/2,ut=(P+_)/2;if(!m){switch(l.value){case"left":it=D;break;case"right":it=C;break}switch(u.value){case"top":ut=_;break;case"bottom":ut=P;break}}var q=function(at,tt){return at=at-it,tt=tt-ut,{x:at*Q-tt*K+it,y:at*K+tt*Q+ut}},W=q(C,P),H=q(C,_),U=q(D,P),X=q(D,_);C=Math.min(W.x,H.x,U.x,X.x),D=Math.max(W.x,H.x,U.x,X.x),P=Math.min(W.y,H.y,U.y,X.y),_=Math.max(W.y,H.y,U.y,X.y)}var J=B+"Rot",j=z[J]=z[J]||{};j.x1=C,j.y1=P,j.x2=D,j.y2=_,j.w=D-C,j.h=_-P,Sa(t,C,P,D,_),Sa(a.labelBounds.all,C,P,D,_)}return t}},GCt=function(t,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,i=r.pstyle("outline-width").value;if(n>0&&i>0){var a=r.pstyle("outline-offset").value,s=r.pstyle("shape").value,o=i+a,l=(t.w+o*2)/t.w,u=(t.h+o*2)/t.h,h=0,f=0;["diamond","pentagon","round-triangle"].includes(s)?(l=(t.w+o*2.4)/t.w,f=-o/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(s)?l=(t.w+o*2.4)/t.w:s==="star"?(l=(t.w+o*2.8)/t.w,u=(t.h+o*2.6)/t.h,f=-o/3.8):s==="triangle"?(l=(t.w+o*2.8)/t.w,u=(t.h+o*2.4)/t.h,f=-o/1.4):s==="vee"&&(l=(t.w+o*4.4)/t.w,u=(t.h+o*3.8)/t.h,f=-o*.5);var d=t.h*u-t.h,g=t.w*l-t.w;if(D1(t,[Math.ceil(d/2),Math.ceil(g/2)]),h!=0||f!==0){var p=CEt(t,h,f);MV(t,p)}}}},UCt=function(t,r){var n=t._private.cy,i=n.styleEnabled(),a=n.headless(),s=Mi(),o=t._private,l=t.isNode(),u=t.isEdge(),h,f,d,g,p,v,m=o.rstyle,y=l&&i?t.pstyle("bounds-expansion").pfValue:[0],b=function(gt){return gt.pstyle("display").value!=="none"},T=!i||b(t)&&(!u||b(t.source())&&b(t.target()));if(T){var w=0,k=0;i&&r.includeOverlays&&(w=t.pstyle("overlay-opacity").value,w!==0&&(k=t.pstyle("overlay-padding").value));var S=0,E=0;i&&r.includeUnderlays&&(S=t.pstyle("underlay-opacity").value,S!==0&&(E=t.pstyle("underlay-padding").value));var L=Math.max(k,E),A=0,R=0;if(i&&(A=t.pstyle("width").pfValue,R=A/2),l&&r.includeNodes){var C=t.position();p=C.x,v=C.y;var D=t.outerWidth(),P=D/2,_=t.outerHeight(),I=_/2;h=p-P,f=p+P,d=v-I,g=v+I,Sa(s,h,d,f,g),i&&r.includeOutlines&&GCt(s,t)}else if(u&&r.includeEdges)if(i&&!a){var M=t.pstyle("curve-style").strValue;if(h=Math.min(m.srcX,m.midX,m.tgtX),f=Math.max(m.srcX,m.midX,m.tgtX),d=Math.min(m.srcY,m.midY,m.tgtY),g=Math.max(m.srcY,m.midY,m.tgtY),h-=R,f+=R,d-=R,g+=R,Sa(s,h,d,f,g),M==="haystack"){var O=m.haystackPts;if(O&&O.length===2){if(h=O[0].x,d=O[0].y,f=O[1].x,g=O[1].y,h>f){var N=h;h=f,f=N}if(d>g){var B=d;d=g,g=B}Sa(s,h-R,d-R,f+R,g+R)}}else if(M==="bezier"||M==="unbundled-bezier"||M.endsWith("segments")||M.endsWith("taxi")){var z;switch(M){case"bezier":case"unbundled-bezier":z=m.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":z=m.linePts;break}if(z!=null)for(var F=0;F<z.length;F++){var V=z[F];h=V.x-R,f=V.x+R,d=V.y-R,g=V.y+R,Sa(s,h,d,f,g)}}}else{var G=t.source(),Y=G.position(),Q=t.target(),K=Q.position();if(h=Y.x,f=K.x,d=Y.y,g=K.y,h>f){var it=h;h=f,f=it}if(d>g){var ut=d;d=g,g=ut}h-=R,f+=R,d-=R,g+=R,Sa(s,h,d,f,g)}if(i&&r.includeEdges&&u&&(M0(s,t,"mid-source"),M0(s,t,"mid-target"),M0(s,t,"source"),M0(s,t,"target")),i){var q=t.pstyle("ghost").value==="yes";if(q){var W=t.pstyle("ghost-offset-x").pfValue,H=t.pstyle("ghost-offset-y").pfValue;Sa(s,s.x1+W,s.y1+H,s.x2+W,s.y2+H)}}var U=o.bodyBounds=o.bodyBounds||{};OR(U,s),D1(U,y),N1(U,1),i&&(h=s.x1,f=s.x2,d=s.y1,g=s.y2,Sa(s,h-L,d-L,f+L,g+L));var X=o.overlayBounds=o.overlayBounds||{};OR(X,s),D1(X,y),N1(X,1);var J=o.labelBounds=o.labelBounds||{};J.all!=null?kEt(J.all):J.all=Mi(),i&&r.includeLabels&&(r.includeMainLabels&&iT(s,t,null),u&&(r.includeSourceLabels&&iT(s,t,"source"),r.includeTargetLabels&&iT(s,t,"target")))}return s.x1=ua(s.x1),s.y1=ua(s.y1),s.x2=ua(s.x2),s.y2=ua(s.y2),s.w=ua(s.x2-s.x1),s.h=ua(s.y2-s.y1),s.w>0&&s.h>0&&T&&(D1(s,y),N1(s,1)),s},aG=function(t){var r=0,n=function(s){return(s?1:0)<<r++},i=0;return i+=n(t.incudeNodes),i+=n(t.includeEdges),i+=n(t.includeLabels),i+=n(t.includeMainLabels),i+=n(t.includeSourceLabels),i+=n(t.includeTargetLabels),i+=n(t.includeOverlays),i+=n(t.includeOutlines),i},sG=function(t){var r=function(o){return Math.round(o)};if(t.isEdge()){var n=t.source().position(),i=t.target().position();return LR([r(n.x),r(n.y),r(i.x),r(i.y)])}else{var a=t.position();return LR([r(a.x),r(a.y)])}},jI=function(t,r){var n=t._private,i,a=t.isEdge(),s=r==null?KI:aG(r),o=s===KI;if(n.bbCache==null?(i=UCt(t,Wg),n.bbCache=i,n.bbCachePosKey=sG(t)):i=n.bbCache,!o){var l=t.isNode();i=Mi(),(r.includeNodes&&l||r.includeEdges&&!l)&&(r.includeOverlays?Tl(i,n.overlayBounds):Tl(i,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!a||r.includeSourceLabels&&r.includeTargetLabels)?Tl(i,n.labelBounds.all):(r.includeMainLabels&&Tl(i,n.labelBounds.mainRot),r.includeSourceLabels&&Tl(i,n.labelBounds.sourceRot),r.includeTargetLabels&&Tl(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},Wg={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},KI=aG(Wg),ZI=$n(Wg);sl.boundingBox=function(e){var t,r=e===void 0||e.useCache===void 0||e.useCache===!0,n=Uh(function(h){var f=h._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==sG(h)},function(h){return h.id()});if(r&&this.length===1&&!n(this[0]))e===void 0?e=Wg:e=ZI(e),t=jI(this[0],e);else{t=Mi(),e=e||Wg;var i=ZI(e),a=this,s=a.cy(),o=s.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var l=0;l<a.length;l++){var u=a[l];n(u)&&u.dirtyBoundingBoxCache(),Tl(t,jI(u,i))}}return t.x1=ua(t.x1),t.y1=ua(t.y1),t.x2=ua(t.x2),t.y2=ua(t.y2),t.w=ua(t.x2-t.x1),t.h=ua(t.y2-t.y1),t};sl.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};sl.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),i=r.collection();if(n&&(i=t.filter(function(u){return u.isParent()}),t=t.not(i)),Je(e)){var a=e;e=function(){return a}}var s=function(h,f){return h._private.bbAtOldPos=e(h,f)},o=function(h){return h._private.bbAtOldPos};r.startBatch(),t.forEach(s).silentPositions(e),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var l=EEt(this.boundingBox({useCache:!1}));return t.silentPositions(o),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),l};Eu.boundingbox=Eu.bb=Eu.boundingBox;Eu.renderedBoundingbox=Eu.renderedBoundingBox;var WCt=sl,Vd,Fp;Vd=Fp={};var oG=function(t){t.uppercaseName=gR(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=gR(t.outerName),Vd[t.name]=function(){var n=this[0],i=n._private,a=i.cy,s=a._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),i[t.autoName]||0;var o=n.pstyle(t.name);switch(o.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[t.labelName]||0;default:return o.pfValue}}else return 1},Vd["outer"+t.uppercaseName]=function(){var n=this[0],i=n._private,a=i.cy,s=a._private.styleEnabled;if(n)if(s){var o=n[t.name](),l=n.pstyle("border-position").value,u;l==="center"?u=n.pstyle("border-width").pfValue:l==="outside"?u=2*n.pstyle("border-width").pfValue:u=0;var h=2*n.padding();return o+u+h}else return 1},Vd["rendered"+t.uppercaseName]=function(){var n=this[0];if(n){var i=n[t.name]();return i*this.cy().zoom()}},Vd["rendered"+t.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[t.outerName]();return i*this.cy().zoom()}}};oG({name:"width"});oG({name:"height"});Fp.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),t.autoPadding!==void 0?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue};Fp.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()};Fp.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var YCt=Fp,HCt=function(t,r){if(t.isEdge()&&t.takesUpSpace())return r(t)},qCt=function(t,r){if(t.isEdge()&&t.takesUpSpace()){var n=t.cy();return r2(r(t),n.zoom(),n.pan())}},XCt=function(t,r){if(t.isEdge()&&t.takesUpSpace()){var n=t.cy(),i=n.pan(),a=n.zoom();return r(t).map(function(s){return r2(s,a,i)})}},jCt=function(t){return t.renderer().getControlPoints(t)},KCt=function(t){return t.renderer().getSegmentPoints(t)},ZCt=function(t){return t.renderer().getSourceEndpoint(t)},QCt=function(t){return t.renderer().getTargetEndpoint(t)},JCt=function(t){return t.renderer().getEdgeMidpoint(t)},QI={controlPoints:{get:jCt,mult:!0},segmentPoints:{get:KCt,mult:!0},sourceEndpoint:{get:ZCt},targetEndpoint:{get:QCt},midpoint:{get:JCt}},tSt=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)},eSt=Object.keys(QI).reduce(function(e,t){var r=QI[t],n=tSt(t);return e[t]=function(){return HCt(this,r.get)},r.mult?e[n]=function(){return XCt(this,r.get)}:e[n]=function(){return qCt(this,r.get)},e},{}),rSt=Ce({},VCt,WCt,YCt,eSt);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var lG=function(t,r){this.recycle(t,r)};function Vf(){return!1}function O0(){return!0}lG.prototype={instanceString:function(){return"event"},recycle:function(t,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Vf,t!=null&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?O0:Vf):t!=null&&t.type?r=t:this.type=t,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*i+a.x,y:n.y*i+a.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=O0;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=O0;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=O0,this.stopPropagation()},isDefaultPrevented:Vf,isPropagationStopped:Vf,isImmediatePropagationStopped:Vf};var cG=/^([^.]+)(\.(?:[^.]+))?$/,nSt=".*",uG={qualifierCompare:function(t,r){return t===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},JI=Object.keys(uG),iSt={};function c2(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:iSt,t=arguments.length>1?arguments[1]:void 0,r=0;r<JI.length;r++){var n=JI[r];this[n]=e[n]||uG[n]}this.context=t||this.context,this.listeners=[],this.emitting=0}var jo=c2.prototype,hG=function(t,r,n,i,a,s,o){Mr(i)&&(a=i,i=null),o&&(s==null?s=o:s=Ce({},s,o));for(var l=br(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var h=l[u];if(!Wo(h)){var f=h.match(cG);if(f){var d=f[1],g=f[2]?f[2]:null,p=r(t,h,d,g,i,a,s);if(p===!1)break}}}},tN=function(t,r){return t.addEventFields(t.context,r),new lG(r.type,r)},aSt=function(t,r,n){if(gwt(n)){r(t,n);return}else if(Je(n)){r(t,tN(t,n));return}for(var i=br(n)?n:n.split(/\s+/),a=0;a<i.length;a++){var s=i[a];if(!Wo(s)){var o=s.match(cG);if(o){var l=o[1],u=o[2]?o[2]:null,h=tN(t,{type:l,namespace:u,target:t.context});r(t,h)}}}};jo.on=jo.addListener=function(e,t,r,n,i){return hG(this,function(a,s,o,l,u,h,f){Mr(h)&&a.listeners.push({event:s,callback:h,type:o,namespace:l,qualifier:u,conf:f})},e,t,r,n,i),this};jo.one=function(e,t,r,n){return this.on(e,t,r,n,{one:!0})};jo.removeListener=jo.off=function(e,t,r,n){var i=this;this.emitting!==0&&(this.listeners=qwt(this.listeners));for(var a=this.listeners,s=function(u){var h=a[u];hG(i,function(f,d,g,p,v,m){if((h.type===g||e==="*")&&(!p&&h.namespace!==".*"||h.namespace===p)&&(!v||f.qualifierCompare(h.qualifier,v))&&(!m||h.callback===m))return a.splice(u,1),!1},e,t,r,n)},o=a.length-1;o>=0;o--)s(o);return this};jo.removeAllListeners=function(){return this.removeListener("*")};jo.emit=jo.trigger=function(e,t,r){var n=this.listeners,i=n.length;return this.emitting++,br(t)||(t=[t]),aSt(this,function(a,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],i=n.length);for(var o=function(){var h=n[l];if(h.type===s.type&&(!h.namespace||h.namespace===s.namespace||h.namespace===nSt)&&a.eventMatches(a.context,h,s)){var f=[s];t!=null&&jwt(f,t),a.beforeEmit(a.context,h,s),h.conf&&h.conf.one&&(a.listeners=a.listeners.filter(function(p){return p!==h}));var d=a.callbackContext(a.context,h,s),g=h.callback.apply(d,f);a.afterEmit(a.context,h,s),g===!1&&(s.stopPropagation(),s.preventDefault())}},l=0;l<i;l++)o();a.bubble(a.context)&&!s.isPropagationStopped()&&a.parent(a.context).emit(s,t)},e),this.emitting--,this};var sSt={qualifierCompare:function(t,r){return t==null||r==null?t==null&&r==null:t.sameText(r)},eventMatches:function(t,r,n){var i=r.qualifier;return i!=null?t!==n.target&&Np(n.target)&&i.matches(n.target):!0},addEventFields:function(t,r){r.cy=t.cy(),r.target=t},callbackContext:function(t,r,n){return r.qualifier!=null?n.target:t},beforeEmit:function(t,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},P0=function(t){return Ee(t)?new qo(t):t},fG={createEmitter:function(){for(var t=0;t<this.length;t++){var r=this[t],n=r._private;n.emitter||(n.emitter=new c2(sSt,r))}return this},emitter:function(){return this._private.emitter},on:function(t,r,n){for(var i=P0(r),a=0;a<this.length;a++){var s=this[a];s.emitter().on(t,i,n)}return this},removeListener:function(t,r,n){for(var i=P0(r),a=0;a<this.length;a++){var s=this[a];s.emitter().removeListener(t,i,n)}return this},removeAllListeners:function(){for(var t=0;t<this.length;t++){var r=this[t];r.emitter().removeAllListeners()}return this},one:function(t,r,n){for(var i=P0(r),a=0;a<this.length;a++){var s=this[a];s.emitter().one(t,i,n)}return this},once:function(t,r,n){for(var i=P0(r),a=0;a<this.length;a++){var s=this[a];s.emitter().on(t,i,n,{once:!0,onceCollection:this})}},emit:function(t,r){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(t,r)}return this},emitAndNotify:function(t,r){if(this.length!==0)return this.cy().notify(t,this),this.emit(t,r),this}};ir.eventAliasesOn(fG);var dG={nodes:function(t){return this.filter(function(r){return r.isNode()}).filter(t)},edges:function(t){return this.filter(function(r){return r.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?t.push(i):r.push(i)}return{nodes:t,edges:r}},filter:function(t,r){if(t===void 0)return this;if(Ee(t)||Xi(t))return new qo(t).filter(this);if(Mr(t)){for(var n=this.spawn(),i=this,a=0;a<i.length;a++){var s=i[a],o=r?t.apply(r,[s,a,i]):t(s,a,i);o&&n.push(s)}return n}return this.spawn()},not:function(t){if(t){Ee(t)&&(t=this.filter(t));for(var r=this.spawn(),n=0;n<this.length;n++){var i=this[n],a=t.has(i);a||r.push(i)}return r}else return this},absoluteComplement:function(){var t=this.cy();return t.mutableElements().not(this)},intersect:function(t){if(Ee(t)){var r=t;return this.filter(r)}for(var n=this.spawn(),i=this,a=t,s=this.length<t.length,o=s?i:a,l=s?a:i,u=0;u<o.length;u++){var h=o[u];l.has(h)&&n.push(h)}return n},xor:function(t){var r=this._private.cy;Ee(t)&&(t=r.$(t));var n=this.spawn(),i=this,a=t,s=function(l,u){for(var h=0;h<l.length;h++){var f=l[h],d=f._private.data.id,g=u.hasElementWithId(d);g||n.push(f)}};return s(i,a),s(a,i),n},diff:function(t){var r=this._private.cy;Ee(t)&&(t=r.$(t));var n=this.spawn(),i=this.spawn(),a=this.spawn(),s=this,o=t,l=function(h,f,d){for(var g=0;g<h.length;g++){var p=h[g],v=p._private.data.id,m=f.hasElementWithId(v);m?a.merge(p):d.push(p)}};return l(s,o,n),l(o,s,i),{left:n,right:i,both:a}},add:function(t){var r=this._private.cy;if(!t)return this;if(Ee(t)){var n=t;t=r.mutableElements().filter(n)}for(var i=this.spawnSelf(),a=0;a<t.length;a++){var s=t[a],o=!this.has(s);o&&i.push(s)}return i},merge:function(t){var r=this._private,n=r.cy;if(!t)return this;if(t&&Ee(t)){var i=t;t=n.mutableElements().filter(i)}for(var a=r.map,s=0;s<t.length;s++){var o=t[s],l=o._private.data.id,u=!a.has(l);if(u){var h=this.length++;this[h]=o,a.set(l,{ele:o,index:h})}}return this},unmergeAt:function(t){var r=this[t],n=r.id(),i=this._private,a=i.map;this[t]=void 0,a.delete(n);var s=t===this.length-1;if(this.length>1&&!s){var o=this.length-1,l=this[o],u=l._private.data.id;this[o]=void 0,this[t]=l,a.set(u,{ele:l,index:t})}return this.length--,this},unmergeOne:function(t){t=t[0];var r=this._private,n=t._private.data.id,i=r.map,a=i.get(n);if(!a)return this;var s=a.index;return this.unmergeAt(s),this},unmerge:function(t){var r=this._private.cy;if(!t)return this;if(t&&Ee(t)){var n=t;t=r.mutableElements().filter(n)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},unmergeBy:function(t){for(var r=this.length-1;r>=0;r--){var n=this[r];t(n)&&this.unmergeAt(r)}return this},map:function(t,r){for(var n=[],i=this,a=0;a<i.length;a++){var s=i[a],o=r?t.apply(r,[s,a,i]):t(s,a,i);n.push(o)}return n},reduce:function(t,r){for(var n=r,i=this,a=0;a<i.length;a++)n=t(n,i[a],a,i);return n},max:function(t,r){for(var n=-1/0,i,a=this,s=0;s<a.length;s++){var o=a[s],l=r?t.apply(r,[o,s,a]):t(o,s,a);l>n&&(n=l,i=o)}return{value:n,ele:i}},min:function(t,r){for(var n=1/0,i,a=this,s=0;s<a.length;s++){var o=a[s],l=r?t.apply(r,[o,s,a]):t(o,s,a);l<n&&(n=l,i=o)}return{value:n,ele:i}}},tr=dG;tr.u=tr["|"]=tr["+"]=tr.union=tr.or=tr.add;tr["\\"]=tr["!"]=tr["-"]=tr.difference=tr.relativeComplement=tr.subtract=tr.not;tr.n=tr["&"]=tr["."]=tr.and=tr.intersection=tr.intersect;tr["^"]=tr["(+)"]=tr["(-)"]=tr.symmetricDifference=tr.symdiff=tr.xor;tr.fnFilter=tr.filterFn=tr.stdFilter=tr.filter;tr.complement=tr.abscomp=tr.absoluteComplement;var oSt={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},gG=function(t,r){var n=t.cy(),i=n.hasCompoundNodes();function a(h){var f=h.pstyle("z-compound-depth");return f.value==="auto"?i?h.zDepth():0:f.value==="bottom"?-1:f.value==="top"?f_:0}var s=a(t)-a(r);if(s!==0)return s;function o(h){var f=h.pstyle("z-index-compare");return f.value==="auto"&&h.isNode()?1:0}var l=o(t)-o(r);if(l!==0)return l;var u=t.pstyle("z-index").value-r.pstyle("z-index").value;return u!==0?u:t.poolIndex()-r.poolIndex()},Am={forEach:function(t,r){if(Mr(t))for(var n=this.length,i=0;i<n;i++){var a=this[i],s=r?t.apply(r,[a,i,this]):t(a,i,this);if(s===!1)break}return this},toArray:function(){for(var t=[],r=0;r<this.length;r++)t.push(this[r]);return t},slice:function(t,r){var n=[],i=this.length;r==null&&(r=i),t==null&&(t=0),t<0&&(t=i+t),r<0&&(r=i+r);for(var a=t;a>=0&&a<r&&a<i;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(t){if(!Mr(t))return this;var r=this.toArray().sort(t);return this.spawn(r)},sortByZIndex:function(){return this.sort(gG)},zDepth:function(){var t=this[0];if(t){var r=t._private,n=r.group;if(n==="nodes"){var i=r.data.parent?t.parents().size():0;return t.isParent()?i:f_-1}else{var a=r.source,s=r.target,o=a.zDepth(),l=s.zDepth();return Math.max(o,l,0)}}}};Am.each=Am.forEach;var lSt=function(){var t="undefined",r=(typeof Symbol>"u"?"undefined":hn(Symbol))!=t&&hn(Symbol.iterator)!=t;r&&(Am[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},a=0,s=this.length;return gV({next:function(){return a<s?i.value=n[a++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};lSt();var cSt=$n({nodeDimensionsIncludeLabels:!1}),O1={layoutDimensions:function(t){t=cSt(t);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(t,r,n){var i=this.nodes().filter(function(k){return!k.isParent()}),a=this.cy(),s=r.eles,o=function(S){return S.id()},l=Uh(n,o);t.emit({type:"layoutstart",layout:t}),t.animations=[];var u=function(S,E,L){var A={x:E.x1+E.w/2,y:E.y1+E.h/2},R={x:(L.x-A.x)*S,y:(L.y-A.y)*S};return{x:A.x+R.x,y:A.y+R.y}},h=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!h)return null;for(var S=Mi(),E=0;E<i.length;E++){var L=i[E],A=l(L,E);SEt(S,A.x,A.y)}return S},d=f(),g=Uh(function(k,S){var E=l(k,S);if(h){var L=Math.abs(r.spacingFactor);E=u(L,d,E)}return r.transform!=null&&(E=r.transform(k,E)),E},o);if(r.animate){for(var p=0;p<i.length;p++){var v=i[p],m=g(v,p),y=r.animateFilter==null||r.animateFilter(v,p);if(y){var b=v.animation({position:m,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(b)}else v.position(m)}if(r.fit){var T=a.animation({fit:{boundingBox:s.boundingBoxAt(g),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});t.animations.push(T)}else if(r.zoom!==void 0&&r.pan!==void 0){var w=a.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(w)}t.animations.forEach(function(k){return k.play()}),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),df.all(t.animations.map(function(k){return k.promise()})).then(function(){t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t})})}else i.positions(g),r.fit&&a.fit(r.eles,r.padding),r.zoom!=null&&a.zoom(r.zoom),r.pan&&a.pan(r.pan),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){var r=this.cy();return r.makeLayout(Ce({},t,{eles:this}))}};O1.createLayout=O1.makeLayout=O1.layout;function pG(e,t,r){var n=r._private,i=n.styleCache=n.styleCache||[],a;return(a=i[e])!=null||(a=i[e]=t(r)),a}function u2(e,t){return e=cc(e),function(n){return pG(e,t,n)}}function h2(e,t){e=cc(e);var r=function(i){return t.call(i)};return function(){var i=this[0];if(i)return pG(e,r,i)}}var Pn={recalculateRenderedStyle:function(t){var r=this.cy(),n=r.renderer(),i=r.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t=this.cy(),r=function(a){return a._private.styleCache=null};if(t.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(i){r(i),i.connectedEdges().forEach(r)});return this},updateStyle:function(t){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var i=r.hasCompoundNodes(),a=this;t=!!(t||t===void 0),i&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=a;return t?s.emitAndNotify("style"):s.emit("style"),a.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,t.style().apply(n))}},parsedStyle:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var a=n._private.style[t];return a??(r?i.style().getDefaultProperty(t):null)}},numericStyle:function(t){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(t);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(t){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(t).units},renderedStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,t)},style:function(t,r){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(Je(t)){var s=t;a.applyBypass(this,s,i),this.emitAndNotify("style")}else if(Ee(t))if(r===void 0){var o=this[0];return o?a.getStylePropertyValue(o,t):void 0}else a.applyBypass(this,t,r,i),this.emitAndNotify("style");else if(t===void 0){var l=this[0];return l?a.getRawStyle(l):void 0}return this},removeStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,i=r.style(),a=this;if(t===void 0)for(var s=0;s<a.length;s++){var o=a[s];i.removeAllBypasses(o,n)}else{t=t.split(/\s+/);for(var l=0;l<a.length;l++){var u=a[l];i.removeBypasses(u,t,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var r=t.hasCompoundNodes(),n=this[0];if(n){var i=n._private,a=n.pstyle("opacity").value;if(!r)return a;var s=i.data.parent?n.parents():null;if(s)for(var o=0;o<s.length;o++){var l=s[o],u=l.pstyle("opacity").value;a=u*a}return a}},transparent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var t=this.cy();if(!t.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function aT(e,t){var r=e._private,n=r.data.parent?e.parents():null;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(!t(a))return!1}return!0}function k_(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,n=e.parentOk||e.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],s=i.hasCompoundNodes();if(a){var o=a._private;if(!t(a))return!1;if(a.isNode())return!s||aT(a,n);var l=o.source,u=o.target;return r(l)&&(!s||aT(l,r))&&(l===u||r(u)&&(!s||aT(u,r)))}}}var gf=u2("eleTakesUpSpace",function(e){return e.pstyle("display").value==="element"&&e.width()!==0&&(e.isNode()?e.height()!==0:!0)});Pn.takesUpSpace=h2("takesUpSpace",k_({ok:gf}));var uSt=u2("eleInteractive",function(e){return e.pstyle("events").value==="yes"&&e.pstyle("visibility").value==="visible"&&gf(e)}),hSt=u2("parentInteractive",function(e){return e.pstyle("visibility").value==="visible"&&gf(e)});Pn.interactive=h2("interactive",k_({ok:uSt,parentOk:hSt,edgeOkViaNode:gf}));Pn.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var fSt=u2("eleVisible",function(e){return e.pstyle("visibility").value==="visible"&&e.pstyle("opacity").pfValue!==0&&gf(e)}),dSt=gf;Pn.visible=h2("visible",k_({ok:fSt,edgeOkViaNode:dSt}));Pn.hidden=function(){var e=this[0];if(e)return!e.visible()};Pn.isBundledBezier=h2("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Pn.bypass=Pn.css=Pn.style;Pn.renderedCss=Pn.renderedStyle;Pn.removeBypass=Pn.removeCss=Pn.removeStyle;Pn.pstyle=Pn.parsedStyle;var No={};function eN(e){return function(){var t=arguments,r=[];if(t.length===2){var n=t[0],i=t[1];this.on(e.event,n,i)}else if(t.length===1&&Mr(t[0])){var a=t[0];this.on(e.event,a)}else if(t.length===0||t.length===1&&br(t[0])){for(var s=t.length===1?t[0]:null,o=0;o<this.length;o++){var l=this[o],u=!e.ableField||l._private[e.ableField],h=l._private[e.field]!=e.value;if(e.overrideAble){var f=e.overrideAble(l);if(f!==void 0&&(u=f,!f))return this}u&&(l._private[e.field]=e.value,h&&r.push(l))}var d=this.spawn(r);d.updateStyle(),d.emit(e.event),s&&d.emit(s)}return this}}function pf(e){No[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(r!==void 0)return r}return t._private[e.field]}},No[e.on]=eN({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),No[e.off]=eN({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}pf({field:"locked",overrideField:function(t){return t.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});pf({field:"grabbable",overrideField:function(t){return t.cy().autoungrabify()||t.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});pf({field:"selected",ableField:"selectable",overrideAble:function(t){return t.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});pf({field:"selectable",overrideField:function(t){return t.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});No.deselect=No.unselect;No.grabbed=function(){var e=this[0];if(e)return e._private.grabbed};pf({field:"active",on:"activate",off:"unactivate"});pf({field:"pannable",on:"panify",off:"unpanify"});No.inactive=function(){var e=this[0];if(e)return!e._private.active};var Zn={},rN=function(t){return function(n){for(var i=this,a=[],s=0;s<i.length;s++){var o=i[s];if(o.isNode()){for(var l=!1,u=o.connectedEdges(),h=0;h<u.length;h++){var f=u[h],d=f.source(),g=f.target();if(t.noIncomingEdges&&g===o&&d!==o||t.noOutgoingEdges&&d===o&&g!==o){l=!0;break}}l||a.push(o)}}return this.spawn(a,!0).filter(n)}},nN=function(t){return function(r){for(var n=this,i=[],a=0;a<n.length;a++){var s=n[a];if(s.isNode())for(var o=s.connectedEdges(),l=0;l<o.length;l++){var u=o[l],h=u.source(),f=u.target();t.outgoing&&h===s?(i.push(u),i.push(f)):t.incoming&&f===s&&(i.push(u),i.push(h))}}return this.spawn(i,!0).filter(r)}},iN=function(t){return function(r){for(var n=this,i=[],a={};;){var s=t.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var o=!1,l=0;l<s.length;l++){var u=s[l],h=u.id();a[h]||(a[h]=!0,i.push(u),o=!0)}if(!o)break;n=s}return this.spawn(i,!0).filter(r)}};Zn.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null};Ce(Zn,{roots:rN({noIncomingEdges:!0}),leaves:rN({noOutgoingEdges:!0}),outgoers:ga(nN({outgoing:!0}),"outgoers"),successors:iN({outgoing:!0}),incomers:ga(nN({incoming:!0}),"incomers"),predecessors:iN({})});Ce(Zn,{neighborhood:ga(function(e){for(var t=[],r=this.nodes(),n=0;n<r.length;n++)for(var i=r[n],a=i.connectedEdges(),s=0;s<a.length;s++){var o=a[s],l=o.source(),u=o.target(),h=i===l?u:l;h.length>0&&t.push(h[0]),t.push(o[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}});Zn.neighbourhood=Zn.neighborhood;Zn.closedNeighbourhood=Zn.closedNeighborhood;Zn.openNeighbourhood=Zn.openNeighborhood;Ce(Zn,{source:ga(function(t){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&t?n.filter(t):n},"source"),target:ga(function(t){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&t?n.filter(t):n},"target"),sources:aN({attr:"source"}),targets:aN({attr:"target"})});function aN(e){return function(r){for(var n=[],i=0;i<this.length;i++){var a=this[i],s=a._private[e.attr];s&&n.push(s)}return this.spawn(n,!0).filter(r)}}Ce(Zn,{edgesWith:ga(sN(),"edgesWith"),edgesTo:ga(sN({thisIsSrc:!0}),"edgesTo")});function sN(e){return function(r){var n=[],i=this._private.cy,a=e||{};Ee(r)&&(r=i.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,l=0;l<o.length;l++){var u=o[l],h=u._private.data,f=this.hasElementWithId(h.source)&&r.hasElementWithId(h.target),d=r.hasElementWithId(h.source)&&this.hasElementWithId(h.target),g=f||d;g&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!f||a.thisIsTgt&&!d)||n.push(u))}return this.spawn(n,!0)}}Ce(Zn,{connectedEdges:ga(function(e){for(var t=[],r=this,n=0;n<r.length;n++){var i=r[n];if(i.isNode())for(var a=i._private.edges,s=0;s<a.length;s++){var o=a[s];t.push(o)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:ga(function(e){for(var t=[],r=this,n=0;n<r.length;n++){var i=r[n];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:ga(oN(),"parallelEdges"),codirectedEdges:ga(oN({codirected:!0}),"codirectedEdges")});function oN(e){var t={codirected:!1};return e=Ce({},t,e),function(n){for(var i=[],a=this.edges(),s=e,o=0;o<a.length;o++)for(var l=a[o],u=l._private,h=u.source,f=h._private.data.id,d=u.data.target,g=h._private.edges,p=0;p<g.length;p++){var v=g[p],m=v._private.data,y=m.target,b=m.source,T=y===d&&b===f,w=f===y&&d===b;(s.codirected&&T||!s.codirected&&(T||w))&&i.push(v)}return this.spawn(i,!0).filter(n)}}Ce(Zn,{components:function(t){var r=this,n=r.cy(),i=n.collection(),a=t==null?r.nodes():t.nodes(),s=[];t!=null&&a.empty()&&(a=t.sources());var o=function(h,f){i.merge(h),a.unmerge(h),f.merge(h)};if(a.empty())return r.spawn();var l=function(){var h=n.collection();s.push(h);var f=a[0];o(f,h),r.bfs({directed:!1,roots:f,visit:function(g){return o(g,h)}}),h.forEach(function(d){d.connectedEdges().forEach(function(g){r.has(g)&&h.has(g.source())&&h.has(g.target())&&h.merge(g)})})};do l();while(a.length>0);return s},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}});Zn.componentsOf=Zn.components;var Bn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t===void 0){Dr("A collection must have a reference to the core");return}var a=new Ws,s=!1;if(!r)r=[];else if(r.length>0&&Je(r[0])&&!Np(r[0])){s=!0;for(var o=[],l=new ff,u=0,h=r.length;u<h;u++){var f=r[u];f.data==null&&(f.data={});var d=f.data;if(d.id==null)d.id=IV();else if(t.hasElementWithId(d.id)||l.has(d.id))continue;var g=new e2(t,f,!1);o.push(g),l.add(d.id)}r=o}this.length=0;for(var p=0,v=r.length;p<v;p++){var m=r[p][0];if(m!=null){var y=m._private.data.id;(!n||!a.has(y))&&(n&&a.set(y,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:t,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(b){this.lazyMap=b},rebuildMap:function(){for(var T=this.lazyMap=new Ws,w=this.eles,k=0;k<w.length;k++){var S=w[k];T.set(S.id(),{index:k,ele:S})}}},n&&(this._private.map=a),s&&!i&&this.restore()},Er=e2.prototype=Bn.prototype=Object.create(Array.prototype);Er.instanceString=function(){return"collection"};Er.spawn=function(e,t){return new Bn(this.cy(),e,t)};Er.spawnSelf=function(){return this.spawn(this)};Er.cy=function(){return this._private.cy};Er.renderer=function(){return this._private.cy.renderer()};Er.element=function(){return this[0]};Er.collection=function(){return mV(this)?this:new Bn(this._private.cy,[this])};Er.unique=function(){return new Bn(this._private.cy,this,!0)};Er.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)};Er.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new Bn(t)};Er.$id=Er.getElementById;Er.poolIndex=function(){var e=this._private.cy,t=e._private.elements,r=this[0]._private.data.id;return t._private.map.get(r).index};Er.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index};Er.indexOfId=function(e){return e=""+e,this._private.map.get(e).index};Er.json=function(e){var t=this.element(),r=this.cy();if(t==null&&e)return this;if(t!=null){var n=t._private;if(Je(e)){if(r.startBatch(),e.data){t.data(e.data);var i=n.data;if(t.isEdge()){var a=!1,s={},o=e.data.source,l=e.data.target;o!=null&&o!=i.source&&(s.source=""+o,a=!0),l!=null&&l!=i.target&&(s.target=""+l,a=!0),a&&(t=t.move(s))}else{var u="parent"in e.data,h=e.data.parent;u&&(h!=null||i.parent!=null)&&h!=i.parent&&(h===void 0&&(h=null),h!=null&&(h=""+h),t=t.move({parent:h}))}}e.position&&t.position(e.position);var f=function(v,m,y){var b=e[v];b!=null&&b!==n[v]&&(b?t[m]():t[y]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),e.classes!=null&&t.classes(e.classes),r.endBatch(),this}else if(e===void 0){var d={data:as(n.data),position:as(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var g=0;return n.classes.forEach(function(p){return d.classes+=g++===0?p:" "+p}),d}}};Er.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t],n=r.json();e.push(n)}return e};Er.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var n=this[r],i=n.json(),a=new e2(e,i,!1);t.push(a)}return new Bn(e,t)};Er.copy=Er.clone;Er.restore=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),i=n._private,a=[],s=[],o,l=0,u=r.length;l<u;l++){var h=r[l];t&&!h.removed()||(h.isNode()?a.push(h):s.push(h))}o=a.concat(s);var f,d=function(){o.splice(f,1),f--};for(f=0;f<o.length;f++){var g=o[f],p=g._private,v=p.data;if(g.clearTraversalCache(),!(!t&&!p.removed)){if(v.id===void 0)v.id=IV();else if(ne(v.id))v.id=""+v.id;else if(Wo(v.id)||!Ee(v.id)){Dr("Can not create element with invalid string ID `"+v.id+"`"),d();continue}else if(n.hasElementWithId(v.id)){Dr("Can not create second element with ID `"+v.id+"`"),d();continue}}var m=v.id;if(g.isNode()){var y=p.position;y.x==null&&(y.x=0),y.y==null&&(y.y=0)}if(g.isEdge()){for(var b=g,T=["source","target"],w=T.length,k=!1,S=0;S<w;S++){var E=T[S],L=v[E];ne(L)&&(L=v[E]=""+v[E]),L==null||L===""?(Dr("Can not create edge `"+m+"` with unspecified "+E),k=!0):n.hasElementWithId(L)||(Dr("Can not create edge `"+m+"` with nonexistant "+E+" `"+L+"`"),k=!0)}if(k){d();continue}var A=n.getElementById(v.source),R=n.getElementById(v.target);A.same(R)?A._private.edges.push(b):(A._private.edges.push(b),R._private.edges.push(b)),b._private.source=A,b._private.target=R}p.map=new Ws,p.map.set(m,{ele:g,index:0}),p.removed=!1,t&&n.addToPool(g)}for(var C=0;C<a.length;C++){var D=a[C],P=D._private.data;ne(P.parent)&&(P.parent=""+P.parent);var _=P.parent,I=_!=null;if(I||D._private.parent){var M=D._private.parent?n.collection().merge(D._private.parent):n.getElementById(_);if(M.empty())P.parent=void 0;else if(M[0].removed())or("Node added with missing parent, reference to parent removed"),P.parent=void 0,D._private.parent=null;else{for(var O=!1,N=M;!N.empty();){if(D.same(N)){O=!0,P.parent=void 0;break}N=N.parent()}O||(M[0]._private.children.push(D),D._private.parent=M[0],i.hasCompoundNodes=!0)}}}if(o.length>0){for(var B=o.length===r.length?r:new Bn(n,o),z=0;z<B.length;z++){var F=B[z];F.isNode()||(F.parallelEdges().clearTraversalCache(),F.source().clearTraversalCache(),F.target().clearTraversalCache())}var V;i.hasCompoundNodes?V=n.collection().merge(B).merge(B.connectedNodes()).merge(B.parent()):V=B,V.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?B.emitAndNotify("add"):t&&B.emit("add")}return r};Er.removed=function(){var e=this[0];return e&&e._private.removed};Er.inside=function(){var e=this[0];return e&&!e._private.removed};Er.remove=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],i={},a=r._private.cy;function s(_){for(var I=_._private.edges,M=0;M<I.length;M++)l(I[M])}function o(_){for(var I=_._private.children,M=0;M<I.length;M++)l(I[M])}function l(_){var I=i[_.id()];t&&_.removed()||I||(i[_.id()]=!0,_.isNode()?(n.push(_),s(_),o(_)):n.unshift(_))}for(var u=0,h=r.length;u<h;u++){var f=r[u];l(f)}function d(_,I){var M=_._private.edges;Yo(M,I),_.clearTraversalCache()}function g(_){_.clearTraversalCache()}var p=[];p.ids={};function v(_,I){I=I[0],_=_[0];var M=_._private.children,O=_.id();Yo(M,I),I._private.parent=null,p.ids[O]||(p.ids[O]=!0,p.push(_))}r.dirtyCompoundBoundsCache(),t&&a.removeFromPool(n);for(var m=0;m<n.length;m++){var y=n[m];if(y.isEdge()){var b=y.source()[0],T=y.target()[0];d(b,y),d(T,y);for(var w=y.parallelEdges(),k=0;k<w.length;k++){var S=w[k];g(S),S.isBundledBezier()&&S.dirtyBoundingBoxCache()}}else{var E=y.parent();E.length!==0&&v(E,y)}t&&(y._private.removed=!0)}var L=a._private.elements;a._private.hasCompoundNodes=!1;for(var A=0;A<L.length;A++){var R=L[A];if(R.isParent()){a._private.hasCompoundNodes=!0;break}}var C=new Bn(this.cy(),n);C.size()>0&&(e?C.emitAndNotify("remove"):t&&C.emit("remove"));for(var D=0;D<p.length;D++){var P=p[D];(!t||!P.removed())&&P.updateStyle()}return C};Er.move=function(e){var t=this._private.cy,r=this,n=!1,i=!1,a=function(p){return p==null?p:""+p};if(e.source!==void 0||e.target!==void 0){var s=a(e.source),o=a(e.target),l=s!=null&&t.hasElementWithId(s),u=o!=null&&t.hasElementWithId(o);(l||u)&&(t.batch(function(){r.remove(n,i),r.emitAndNotify("moveout");for(var g=0;g<r.length;g++){var p=r[g],v=p._private.data;p.isEdge()&&(l&&(v.source=s),u&&(v.target=o))}r.restore(n,i)}),r.emitAndNotify("move"))}else if(e.parent!==void 0){var h=a(e.parent),f=h===null||t.hasElementWithId(h);if(f){var d=h===null?void 0:h;t.batch(function(){var g=r.remove(n,i);g.emitAndNotify("moveout");for(var p=0;p<r.length;p++){var v=r[p],m=v._private.data;v.isNode()&&(m.parent=d)}g.restore(n,i)}),r.emitAndNotify("move")}}return this};[GV,kCt,M1,Io,Hh,zCt,l2,rSt,fG,dG,oSt,Am,O1,Pn,No,Zn].forEach(function(e){Ce(Er,e)});var gSt={add:function(t){var r,n=this;if(Xi(t)){var i=t;if(i._private.cy===n)r=i.restore();else{for(var a=[],s=0;s<i.length;s++){var o=i[s];a.push(o.json())}r=new Bn(n,a)}}else if(br(t)){var l=t;r=new Bn(n,l)}else if(Je(t)&&(br(t.nodes)||br(t.edges))){for(var u=t,h=[],f=["nodes","edges"],d=0,g=f.length;d<g;d++){var p=f[d],v=u[p];if(br(v))for(var m=0,y=v.length;m<y;m++){var b=Ce({group:p},v[m]);h.push(b)}}r=new Bn(n,h)}else{var T=t;r=new e2(n,T).collection()}return r},remove:function(t){if(!Xi(t)){if(Ee(t)){var r=t;t=this.$(r)}}return t.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function pSt(e,t,r,n){var i=4,a=.001,s=1e-7,o=10,l=11,u=1/(l-1),h=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var d=h?new Float32Array(l):new Array(l);function g(R,C){return 1-3*C+3*R}function p(R,C){return 3*C-6*R}function v(R){return 3*R}function m(R,C,D){return((g(C,D)*R+p(C,D))*R+v(C))*R}function y(R,C,D){return 3*g(C,D)*R*R+2*p(C,D)*R+v(C)}function b(R,C){for(var D=0;D<i;++D){var P=y(C,e,r);if(P===0)return C;var _=m(C,e,r)-R;C-=_/P}return C}function T(){for(var R=0;R<l;++R)d[R]=m(R*u,e,r)}function w(R,C,D){var P,_,I=0;do _=C+(D-C)/2,P=m(_,e,r)-R,P>0?D=_:C=_;while(Math.abs(P)>s&&++I<o);return _}function k(R){for(var C=0,D=1,P=l-1;D!==P&&d[D]<=R;++D)C+=u;--D;var _=(R-d[D])/(d[D+1]-d[D]),I=C+_*u,M=y(I,e,r);return M>=a?b(R,I):M===0?I:w(R,C,C+u)}var S=!1;function E(){S=!0,(e!==t||r!==n)&&T()}var L=function(C){return S||E(),e===t&&r===n?C:C===0?0:C===1?1:m(k(C),t,n)};L.getControlPoints=function(){return[{x:e,y:t},{x:r,y:n}]};var A="generateBezier("+[e,t,r,n]+")";return L.toString=function(){return A},L}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var vSt=function(){function e(n){return-n.tension*n.x-n.friction*n.v}function t(n,i,a){var s={x:n.x+a.dx*i,v:n.v+a.dv*i,tension:n.tension,friction:n.friction};return{dx:s.v,dv:e(s)}}function r(n,i){var a={dx:n.v,dv:e(n)},s=t(n,i*.5,a),o=t(n,i*.5,s),l=t(n,i,o),u=1/6*(a.dx+2*(s.dx+o.dx)+l.dx),h=1/6*(a.dv+2*(s.dv+o.dv)+l.dv);return n.x=n.x+u*i,n.v=n.v+h*i,n}return function n(i,a,s){var o={x:-1,v:0,tension:null,friction:null},l=[0],u=0,h=1/1e4,f=16/1e3,d,g,p;for(i=parseFloat(i)||500,a=parseFloat(a)||20,s=s||null,o.tension=i,o.friction=a,d=s!==null,d?(u=n(i,a),g=u/s*f):g=f;p=r(p||o,g),l.push(1+p.x),u+=16,Math.abs(p.x)>h&&Math.abs(p.v)>h;);return d?function(v){return l[v*(l.length-1)|0]}:u}}(),Tr=function(t,r,n,i){var a=pSt(t,r,n,i);return function(s,o,l){return s+(o-s)*a(l)}},P1={linear:function(t,r,n){return t+(r-t)*n},ease:Tr(.25,.1,.25,1),"ease-in":Tr(.42,0,1,1),"ease-out":Tr(0,0,.58,1),"ease-in-out":Tr(.42,0,.58,1),"ease-in-sine":Tr(.47,0,.745,.715),"ease-out-sine":Tr(.39,.575,.565,1),"ease-in-out-sine":Tr(.445,.05,.55,.95),"ease-in-quad":Tr(.55,.085,.68,.53),"ease-out-quad":Tr(.25,.46,.45,.94),"ease-in-out-quad":Tr(.455,.03,.515,.955),"ease-in-cubic":Tr(.55,.055,.675,.19),"ease-out-cubic":Tr(.215,.61,.355,1),"ease-in-out-cubic":Tr(.645,.045,.355,1),"ease-in-quart":Tr(.895,.03,.685,.22),"ease-out-quart":Tr(.165,.84,.44,1),"ease-in-out-quart":Tr(.77,0,.175,1),"ease-in-quint":Tr(.755,.05,.855,.06),"ease-out-quint":Tr(.23,1,.32,1),"ease-in-out-quint":Tr(.86,0,.07,1),"ease-in-expo":Tr(.95,.05,.795,.035),"ease-out-expo":Tr(.19,1,.22,1),"ease-in-out-expo":Tr(1,0,0,1),"ease-in-circ":Tr(.6,.04,.98,.335),"ease-out-circ":Tr(.075,.82,.165,1),"ease-in-out-circ":Tr(.785,.135,.15,.86),spring:function(t,r,n){if(n===0)return P1.linear;var i=vSt(t,r,n);return function(a,s,o){return a+(s-a)*i(o)}},"cubic-bezier":Tr};function lN(e,t,r,n,i){if(n===1||t===r)return r;var a=i(t,r,n);return e==null||((e.roundValue||e.color)&&(a=Math.round(a)),e.min!==void 0&&(a=Math.max(a,e.min)),e.max!==void 0&&(a=Math.min(a,e.max))),a}function cN(e,t){return e.pfValue!=null||e.value!=null?e.pfValue!=null&&(t==null||t.type.units!=="%")?e.pfValue:e.value:e}function Uc(e,t,r,n,i){var a=i!=null?i.type:null;r<0?r=0:r>1&&(r=1);var s=cN(e,i),o=cN(t,i);if(ne(s)&&ne(o))return lN(a,s,o,r,n);if(br(s)&&br(o)){for(var l=[],u=0;u<o.length;u++){var h=s[u],f=o[u];if(h!=null&&f!=null){var d=lN(a,h,f,r,n);l.push(d)}else l.push(f)}return l}}function mSt(e,t,r,n){var i=!n,a=e._private,s=t._private,o=s.easing,l=s.startTime,u=n?e:e.cy(),h=u.style();if(!s.easingImpl)if(o==null)s.easingImpl=P1.linear;else{var f;if(Ee(o)){var d=h.parse("transition-timing-function",o);f=d.value}else f=o;var g,p;Ee(f)?(g=f,p=[]):(g=f[1],p=f.slice(2).map(function(B){return+B})),p.length>0?(g==="spring"&&p.push(s.duration),s.easingImpl=P1[g].apply(null,p)):s.easingImpl=P1[g]}var v=s.easingImpl,m;if(s.duration===0?m=1:m=(r-l)/s.duration,s.applying&&(m=s.progress),m<0?m=0:m>1&&(m=1),s.delay==null){var y=s.startPosition,b=s.position;if(b&&i&&!e.locked()){var T={};Gf(y.x,b.x)&&(T.x=Uc(y.x,b.x,m,v)),Gf(y.y,b.y)&&(T.y=Uc(y.y,b.y,m,v)),e.position(T)}var w=s.startPan,k=s.pan,S=a.pan,E=k!=null&&n;E&&(Gf(w.x,k.x)&&(S.x=Uc(w.x,k.x,m,v)),Gf(w.y,k.y)&&(S.y=Uc(w.y,k.y,m,v)),e.emit("pan"));var L=s.startZoom,A=s.zoom,R=A!=null&&n;R&&(Gf(L,A)&&(a.zoom=Vg(a.minZoom,Uc(L,A,m,v),a.maxZoom)),e.emit("zoom")),(E||R)&&e.emit("viewport");var C=s.style;if(C&&C.length>0&&i){for(var D=0;D<C.length;D++){var P=C[D],_=P.name,I=P,M=s.startStyle[_],O=h.properties[M.name],N=Uc(M,I,m,v,O);h.overrideBypass(e,_,N)}e.emit("style")}}return s.progress=m,m}function Gf(e,t){return e==null||t==null?!1:ne(e)&&ne(t)?!0:!!(e&&t)}function ySt(e,t,r,n){var i=t._private;i.started=!0,i.startTime=r-i.progress*i.duration}function uN(e,t){var r=t._private.aniEles,n=[];function i(h,f){var d=h._private,g=d.animation.current,p=d.animation.queue,v=!1;if(g.length===0){var m=p.shift();m&&g.push(m)}for(var y=function(S){for(var E=S.length-1;E>=0;E--){var L=S[E];L()}S.splice(0,S.length)},b=g.length-1;b>=0;b--){var T=g[b],w=T._private;if(w.stopped){g.splice(b,1),w.hooked=!1,w.playing=!1,w.started=!1,y(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||ySt(h,T,e),mSt(h,T,e,f),w.applying&&(w.applying=!1),y(w.frames),w.step!=null&&w.step(e),T.completed()&&(g.splice(b,1),w.hooked=!1,w.playing=!1,w.started=!1,y(w.completes)),v=!0)}return!f&&g.length===0&&p.length===0&&n.push(h),v}for(var a=!1,s=0;s<r.length;s++){var o=r[s],l=i(o);a=a||l}var u=i(t,!0);(a||u)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(n),t.emit("step")}var xSt={animate:ir.animate(),animation:ir.animation(),animated:ir.animated(),clearQueue:ir.clearQueue(),delay:ir.delay(),delayAnimation:ir.delayAnimation(),stop:ir.stop(),addToAnimationPool:function(t){var r=this;r.styleEnabled()&&r._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,!t.styleEnabled())return;function r(){t._private.animationsRunning&&Em(function(a){uN(a,t),r()})}var n=t.renderer();n&&n.beforeRender?n.beforeRender(function(a,s){uN(s,t)},n.beforeRenderPriorities.animations):r()}},bSt={qualifierCompare:function(t,r){return t==null||r==null?t==null&&r==null:t.sameText(r)},eventMatches:function(t,r,n){var i=r.qualifier;return i!=null?t!==n.target&&Np(n.target)&&i.matches(n.target):!0},addEventFields:function(t,r){r.cy=t,r.target=t},callbackContext:function(t,r,n){return r.qualifier!=null?n.target:t}},B0=function(t){return Ee(t)?new qo(t):t},vG={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new c2(bSt,this)),this},emitter:function(){return this._private.emitter},on:function(t,r,n){return this.emitter().on(t,B0(r),n),this},removeListener:function(t,r,n){return this.emitter().removeListener(t,B0(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,r,n){return this.emitter().one(t,B0(r),n),this},once:function(t,r,n){return this.emitter().one(t,B0(r),n),this},emit:function(t,r){return this.emitter().emit(t,r),this},emitAndNotify:function(t,r){return this.emit(t),this.notify(t,r),this}};ir.eventAliasesOn(vG);var qE={png:function(t){var r=this._private.renderer;return t=t||{},r.png(t)},jpg:function(t){var r=this._private.renderer;return t=t||{},t.bg=t.bg||"#fff",r.jpg(t)}};qE.jpeg=qE.jpg;var B1={layout:function(t){var r=this;if(t==null){Dr("Layout options must be specified to make a layout");return}if(t.name==null){Dr("A `name` must be specified to make a layout");return}var n=t.name,i=r.extension("layout",n);if(i==null){Dr("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;Ee(t.eles)?a=r.$(t.eles):a=t.eles!=null?t.eles:r.$();var s=new i(Ce({},t,{cy:r,eles:a}));return s}};B1.createLayout=B1.makeLayout=B1.layout;var TSt={notify:function(t,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();r!=null&&i.merge(r);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(t,r)}},notifications:function(t){var r=this._private;return t===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return t.batchCount==null&&(t.batchCount=0),t.batchCount===0&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(t.batchCount===0)return this;if(t.batchCount--,t.batchCount===0){t.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(t.batchNotifications).forEach(function(n){var i=t.batchNotifications[n];i.empty()?r.notify(n):r.notify(n,i)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var r=this;return this.batch(function(){for(var n=Object.keys(t),i=0;i<n.length;i++){var a=n[i],s=t[a],o=r.getElementById(a);o.data(s)}})}},wSt=$n({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),XE={renderTo:function(t,r,n,i){var a=this._private.renderer;return a.renderTo(t,r,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var r=this,n=r.extension("renderer",t.name);if(n==null){Dr("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}t.wheelSensitivity!==void 0&&or("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=wSt(t);i.cy=r,r._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var t=this;t.notify("destroy");var r=t.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};XE.invalidateDimensions=XE.resize;var F1={collection:function(t,r){return Ee(t)?this.$(t):Xi(t)?t.collection():br(t)?(r||(r={}),new Bn(this,t,r.unique,r.removed)):new Bn(this)},nodes:function(t){var r=this.$(function(n){return n.isNode()});return t?r.filter(t):r},edges:function(t){var r=this.$(function(n){return n.isEdge()});return t?r.filter(t):r},$:function(t){var r=this._private.elements;return t?r.filter(t):r.spawnSelf()},mutableElements:function(){return this._private.elements}};F1.elements=F1.filter=F1.$;var Cn={},eg="t",ESt="f";Cn.apply=function(e){for(var t=this,r=t._private,n=r.cy,i=n.collection(),a=0;a<e.length;a++){var s=e[a],o=t.getContextMeta(s);if(!o.empty){var l=t.getContextStyle(o),u=t.applyContextStyle(o,l,s);s._private.appliedInitStyle?t.updateTransitions(s,u.diffProps):s._private.appliedInitStyle=!0;var h=t.updateStyleHints(s);h&&i.push(s)}}return i};Cn.getPropertiesDiff=function(e,t){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},i=e+"-"+t,a=n[i];if(a)return a;for(var s=[],o={},l=0;l<r.length;l++){var u=r[l],h=e[l]===eg,f=t[l]===eg,d=h!==f,g=u.mappedProperties.length>0;if(d||f&&g){var p=void 0;d&&g||d?p=u.properties:g&&(p=u.mappedProperties);for(var v=0;v<p.length;v++){for(var m=p[v],y=m.name,b=!1,T=l+1;T<r.length;T++){var w=r[T],k=t[T]===eg;if(k&&(b=w.properties[m.name]!=null,b))break}!o[y]&&!b&&(o[y]=!0,s.push(y))}}}return n[i]=s,s};Cn.getContextMeta=function(e){for(var t=this,r="",n,i=e._private.styleCxtKey||"",a=0;a<t.length;a++){var s=t[a],o=s.selector&&s.selector.matches(e);o?r+=eg:r+=ESt}return n=t.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};Cn.getContextStyle=function(e){var t=e.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];for(var i={_private:{key:t}},a=0;a<r.length;a++){var s=r[a],o=t[a]===eg;if(o)for(var l=0;l<s.properties.length;l++){var u=s.properties[l];i[u.name]=u}}return n[t]=i,i};Cn.applyContextStyle=function(e,t,r){for(var n=this,i=e.diffPropNames,a={},s=n.types,o=0;o<i.length;o++){var l=i[o],u=t[l],h=r.pstyle(l);if(!u)if(h)h.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(h!==u){if(u.mapped===s.fn&&h!=null&&h.mapping!=null&&h.mapping.value===u.value){var f=h.mapping,d=f.fnValue=u.value(r);if(d===f.prevFnValue)continue}var g=a[l]={prev:h};n.applyParsedProperty(r,u),g.next=r.pstyle(l),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:a}};Cn.updateStyleHints=function(e){var t=e._private,r=this,n=r.propertyGroupNames,i=r.propertyGroupKeys,a=function(U,X,J){return r.getPropertiesHash(U,X,J)},s=t.styleKey;if(e.removed())return!1;var o=t.group==="nodes",l=e._private.style;n=Object.keys(l);for(var u=0;u<i.length;u++){var h=i[u];t.styleKeys[h]=[Al,tu]}for(var f=function(U,X){return t.styleKeys[X][0]=Fg(U,t.styleKeys[X][0])},d=function(U,X){return t.styleKeys[X][1]=$g(U,t.styleKeys[X][1])},g=function(U,X){f(U,X),d(U,X)},p=function(U,X){for(var J=0;J<U.length;J++){var j=U.charCodeAt(J);f(j,X),d(j,X)}},v=2e9,m=function(U){return-128<U&&U<128&&Math.floor(U)!==U?v-(U*1024|0):U},y=0;y<n.length;y++){var b=n[y],T=l[b];if(T!=null){var w=this.properties[b],k=w.type,S=w.groupKey,E=void 0;w.hashOverride!=null?E=w.hashOverride(e,T):T.pfValue!=null&&(E=T.pfValue);var L=w.enums==null?T.value:null,A=E!=null,R=L!=null,C=A||R,D=T.units;if(k.number&&C&&!k.multiple){var P=A?E:L;g(m(P),S),!A&&D!=null&&p(D,S)}else p(T.strValue,S)}}for(var _=[Al,tu],I=0;I<i.length;I++){var M=i[I],O=t.styleKeys[M];_[0]=Fg(O[0],_[0]),_[1]=$g(O[1],_[1])}t.styleKey=Gwt(_[0],_[1]);var N=t.styleKeys;t.labelDimsKey=po(N.labelDimensions);var B=a(e,["label"],N.labelDimensions);if(t.labelKey=po(B),t.labelStyleKey=po(L0(N.commonLabel,B)),!o){var z=a(e,["source-label"],N.labelDimensions);t.sourceLabelKey=po(z),t.sourceLabelStyleKey=po(L0(N.commonLabel,z));var F=a(e,["target-label"],N.labelDimensions);t.targetLabelKey=po(F),t.targetLabelStyleKey=po(L0(N.commonLabel,F))}if(o){var V=t.styleKeys,G=V.nodeBody,Y=V.nodeBorder,Q=V.nodeOutline,K=V.backgroundImage,it=V.compound,ut=V.pie,q=V.stripe,W=[G,Y,Q,K,it,ut,q].filter(function(H){return H!=null}).reduce(L0,[Al,tu]);t.nodeKey=po(W),t.hasPie=ut!=null&&ut[0]!==Al&&ut[1]!==tu,t.hasStripe=q!=null&&q[0]!==Al&&q[1]!==tu}return s!==t.styleKey};Cn.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null,t.hasStripe=null};Cn.applyParsedProperty=function(e,t){var r=this,n=t,i=e._private.style,a,s=r.types,o=r.properties[n.name].type,l=n.bypass,u=i[n.name],h=u&&u.bypass,f=e._private,d="mapping",g=function(G){return G==null?null:G.pfValue!=null?G.pfValue:G.value},p=function(){var G=g(u),Y=g(n);r.checkTriggers(e,n.name,G,Y)};if(t.name==="curve-style"&&e.isEdge()&&(t.value!=="bezier"&&e.isLoop()||t.value==="haystack"&&(e.source().isParent()||e.target().isParent()))&&(n=t=this.parse(t.name,"bezier",l)),n.delete)return i[n.name]=void 0,p(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,p(),!0):!1:(p(),!0);if(n.deleteBypass)return u?u.bypass?(i[n.name]=u.bypassed,p(),!0):!1:(p(),!0);var v=function(){or("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var m=n.field.split("."),y=f.data,b=0;b<m.length&&y;b++){var T=m[b];y=y[T]}if(y==null)return v(),!1;var w;if(ne(y)){var k=n.fieldMax-n.fieldMin;k===0?w=0:w=(y-n.fieldMin)/k}else return or("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+e.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),o.color){var S=n.valueMin[0],E=n.valueMax[0],L=n.valueMin[1],A=n.valueMax[1],R=n.valueMin[2],C=n.valueMax[2],D=n.valueMin[3]==null?1:n.valueMin[3],P=n.valueMax[3]==null?1:n.valueMax[3],_=[Math.round(S+(E-S)*w),Math.round(L+(A-L)*w),Math.round(R+(C-R)*w),Math.round(D+(P-D)*w)];a={bypass:n.bypass,name:n.name,value:_,strValue:"rgb("+_[0]+", "+_[1]+", "+_[2]+")"}}else if(o.number){var I=n.valueMin+(n.valueMax-n.valueMin)*w;a=this.parse(n.name,I,n.bypass,d)}else return!1;if(!a)return v(),!1;a.mapping=n,n=a;break}case s.data:{for(var M=n.field.split("."),O=f.data,N=0;N<M.length&&O;N++){var B=M[N];O=O[B]}if(O!=null&&(a=this.parse(n.name,O,n.bypass,d)),!a)return v(),!1;a.mapping=n,n=a;break}case s.fn:{var z=n.value,F=n.fnValue!=null?n.fnValue:z(e);if(n.prevFnValue=F,F==null)return or("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+e.id()+"` is null)"),!1;if(a=this.parse(n.name,F,n.bypass,d),!a)return or("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+e.id()+"` is invalid)"),!1;a.mapping=as(n),n=a;break}case void 0:break;default:return!1}return l?(h?n.bypassed=u.bypassed:n.bypassed=u,i[n.name]=n):h?u.bypassed=n:i[n.name]=n,p(),!0};Cn.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!t)n._private.style={};else for(var i=n._private.style,a=Object.keys(i),s=0;s<a.length;s++){var o=a[s],l=i[o];l!=null&&(l.bypass?l.bypassed=null:i[o]=null)}}};Cn.update=function(){var e=this._private.cy,t=e.mutableElements();t.updateStyle()};Cn.updateTransitions=function(e,t){var r=this,n=e._private,i=e.pstyle("transition-property").value,a=e.pstyle("transition-duration").pfValue,s=e.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var o={},l=!1,u=0;u<i.length;u++){var h=i[u],f=e.pstyle(h),d=t[h];if(d){var g=d.prev,p=g,v=d.next!=null?d.next:f,m=!1,y=void 0,b=1e-6;p&&(ne(p.pfValue)&&ne(v.pfValue)?(m=v.pfValue-p.pfValue,y=p.pfValue+b*m):ne(p.value)&&ne(v.value)?(m=v.value-p.value,y=p.value+b*m):br(p.value)&&br(v.value)&&(m=p.value[0]!==v.value[0]||p.value[1]!==v.value[1]||p.value[2]!==v.value[2],y=p.strValue),m&&(o[h]=v.strValue,this.applyBypass(e,h,y),l=!0))}}if(!l)return;n.transitioning=!0,new df(function(T){s>0?e.delayAnimation(s).play().promise().then(T):T()}).then(function(){return e.animation({style:o,duration:a,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(e,i),e.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),n.transitioning=!1)};Cn.checkTrigger=function(e,t,r,n,i,a){var s=this.properties[t],o=i(s);e.removed()||o!=null&&o(r,n,e)&&a(s)};Cn.checkZOrderTrigger=function(e,t,r,n){var i=this;this.checkTrigger(e,t,r,n,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",e)})};Cn.checkBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,function(i){return i.triggersBounds},function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})};Cn.checkConnectedEdgesBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,function(i){return i.triggersBoundsOfConnectedEdges},function(i){e.connectedEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};Cn.checkParallelEdgesBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,function(i){return i.triggersBoundsOfParallelEdges},function(i){e.parallelEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};Cn.checkTriggers=function(e,t,r,n){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,n),this.checkBoundsTrigger(e,t,r,n),this.checkConnectedEdgesBoundsTrigger(e,t,r,n),this.checkParallelEdgesBoundsTrigger(e,t,r,n)};var $p={};$p.applyBypass=function(e,t,r,n){var i=this,a=[],s=!0;if(t==="*"||t==="**"){if(r!==void 0)for(var o=0;o<i.properties.length;o++){var l=i.properties[o],u=l.name,h=this.parse(u,r,!0);h&&a.push(h)}}else if(Ee(t)){var f=this.parse(t,r,!0);f&&a.push(f)}else if(Je(t)){var d=t;n=r;for(var g=Object.keys(d),p=0;p<g.length;p++){var v=g[p],m=d[v];if(m===void 0&&(m=d[Jy(v)]),m!==void 0){var y=this.parse(v,m,!0);y&&a.push(y)}}}else return!1;if(a.length===0)return!1;for(var b=!1,T=0;T<e.length;T++){for(var w=e[T],k={},S=void 0,E=0;E<a.length;E++){var L=a[E];if(n){var A=w.pstyle(L.name);S=k[L.name]={prev:A}}b=this.applyParsedProperty(w,as(L))||b,n&&(S.next=w.pstyle(L.name))}b&&this.updateStyleHints(w),n&&this.updateTransitions(w,k,s)}return b};$p.overrideBypass=function(e,t,r){t=u_(t);for(var n=0;n<e.length;n++){var i=e[n],a=i._private.style[t],s=this.properties[t].type,o=s.color,l=s.mutiple,u=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(i,t,r):(a.value=r,a.pfValue!=null&&(a.pfValue=r),o?a.strValue="rgb("+r.join(",")+")":l?a.strValue=r.join(" "):a.strValue=""+r,this.updateStyleHints(i)),this.checkTriggers(i,t,u,r)}};$p.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)};$p.removeBypasses=function(e,t,r){for(var n=!0,i=0;i<e.length;i++){for(var a=e[i],s={},o=0;o<t.length;o++){var l=t[o],u=this.properties[l],h=a.pstyle(u.name);if(!(!h||!h.bypass)){var f="",d=this.parse(l,f,!0),g=s[u.name]={prev:h};this.applyParsedProperty(a,d),g.next=a.pstyle(u.name)}}this.updateStyleHints(a),r&&this.updateTransitions(a,s,n)}};var C_={};C_.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return e!=null?parseFloat(e):1};C_.containerCss=function(e){var t=this._private.cy,r=t.container(),n=t.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(e)};var fs={};fs.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)};fs.getRawStyle=function(e,t){var r=this;if(e=e[0],e){for(var n={},i=0;i<r.properties.length;i++){var a=r.properties[i],s=r.getStylePropertyValue(e,a.name,t);s!=null&&(n[a.name]=s,n[Jy(a.name)]=s)}return n}};fs.getIndexedStyle=function(e,t,r,n){var i=e.pstyle(t)[r][n];return i??e.cy().style().getDefaultProperty(t)[r][0]};fs.getStylePropertyValue=function(e,t,r){var n=this;if(e=e[0],e){var i=n.properties[t];i.alias&&(i=i.pointsTo);var a=i.type,s=e.pstyle(i.name);if(s){var o=s.value,l=s.units,u=s.strValue;if(r&&a.number&&o!=null&&ne(o)){var h=e.cy().zoom(),f=function(m){return m*h},d=function(m,y){return f(m)+y},g=br(o),p=g?l.every(function(v){return v!=null}):l!=null;return p?g?o.map(function(v,m){return d(v,l[m])}).join(" "):d(o,l):g?o.map(function(v){return Ee(v)?v:""+f(v)}).join(" "):""+f(o)}else if(u!=null)return u}return null}};fs.getAnimationStartStyle=function(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n],a=i.name,s=e.pstyle(a);s!==void 0&&(Je(s)?s=this.parse(a,s.strValue):s=this.parse(a,s)),s&&(r[a]=s)}return r};fs.getPropsList=function(e){var t=this,r=[],n=e,i=t.properties;if(n)for(var a=Object.keys(n),s=0;s<a.length;s++){var o=a[s],l=n[o],u=i[o]||i[u_(o)],h=this.parse(u.name,l);h&&r.push(h)}return r};fs.getNonDefaultPropertiesHash=function(e,t,r){var n=r.slice(),i,a,s,o,l,u;for(l=0;l<t.length;l++)if(i=t[l],a=e.pstyle(i,!1),a!=null)if(a.pfValue!=null)n[0]=Fg(o,n[0]),n[1]=$g(o,n[1]);else for(s=a.strValue,u=0;u<s.length;u++)o=s.charCodeAt(u),n[0]=Fg(o,n[0]),n[1]=$g(o,n[1]);return n};fs.getPropertiesHash=fs.getNonDefaultPropertiesHash;var f2={};f2.appendFromJson=function(e){for(var t=this,r=0;r<e.length;r++){var n=e[r],i=n.selector,a=n.style||n.css,s=Object.keys(a);t.selector(i);for(var o=0;o<s.length;o++){var l=s[o],u=a[l];t.css(l,u)}}return t};f2.fromJson=function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t};f2.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],n=r.selector,i=r.properties,a={},s=0;s<i.length;s++){var o=i[s];a[o.name]=o.strValue}e.push({selector:n?n.toString():"core",style:a})}return e};var S_={};S_.appendFromString=function(e){var t=this,r=this,n=""+e,i,a,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>i.length?n=n.substr(i.length):n=""}function l(){a.length>s.length?a=a.substr(s.length):a=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var h=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!h){or("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=h[0];var f=h[1];if(f!=="core"){var d=new qo(f);if(d.invalid){or("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),o();continue}}var g=h[2],p=!1;a=g;for(var v=[];;){var m=a.match(/^\s*$/);if(m)break;var y=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){or("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+g),p=!0;break}s=y[0];var b=y[1],T=y[2],w=t.properties[b];if(!w){or("Skipping property: Invalid property name in: "+s),l();continue}var k=r.parse(b,T);if(!k){or("Skipping property: Invalid property definition in: "+s),l();continue}v.push({name:b,val:T}),l()}if(p){o();break}r.selector(f);for(var S=0;S<v.length;S++){var E=v[S];r.css(E.name,E.val)}o()}return r};S_.fromString=function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t};var Wr={};(function(){var e=on,t=bwt,r=wwt,n=Ewt,i=kwt,a=function(H){return"^"+H+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(H){var U=e+"|\\w+|"+t+"|"+r+"|"+n+"|"+i;return"^"+H+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+U+")\\s*\\,\\s*("+U+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Wr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(H,U){switch(H.length){case 2:return U[0]!=="deg"&&U[0]!=="rad"&&U[1]!=="deg"&&U[1]!=="rad";case 1:return Ee(H[0])||U[0]==="deg"||U[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(H){var U=H.length;return U===1||U===2||U===4}}};var l={zeroNonZero:function(H,U){return(H==null||U==null)&&H!==U||H==0&&U!=0?!0:H!=0&&U==0},any:function(H,U){return H!=U},emptyNonEmpty:function(H,U){var X=Wo(H),J=Wo(U);return X&&!J||!X&&J}},u=Wr.types,h=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],f=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],d=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],g=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],p=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification},{name:"box-select-labels",type:u.bool,triggersBounds:l.any}],v=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any}],m=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:l.any,triggersBoundsOfParallelEdges:function(H,U,X){return H===U?!1:X.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],y=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],b=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],T=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],w=function(H,U){return U.value==="label"?-H.poolIndex():U.pfValue},k=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:w},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:w},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],S=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],E=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],L=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],A=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],R=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-outline-width",type:u.size},{name:"line-outline-color",type:u.color},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelEdges:function(H,U){return H===U?!1:H==="bezier"||U==="bezier"}},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],C=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],D=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],P=[];Wr.pieBackgroundN=16,P.push({name:"pie-size",type:u.sizeMaybePercent}),P.push({name:"pie-hole",type:u.sizeMaybePercent}),P.push({name:"pie-start-angle",type:u.angle});for(var _=1;_<=Wr.pieBackgroundN;_++)P.push({name:"pie-"+_+"-background-color",type:u.color}),P.push({name:"pie-"+_+"-background-size",type:u.percent}),P.push({name:"pie-"+_+"-background-opacity",type:u.zeroOneNumber});var I=[];Wr.stripeBackgroundN=16,I.push({name:"stripe-size",type:u.sizeMaybePercent}),I.push({name:"stripe-direction",type:u.axisDirectionPrimary});for(var M=1;M<=Wr.stripeBackgroundN;M++)I.push({name:"stripe-"+M+"-background-color",type:u.color}),I.push({name:"stripe-"+M+"-background-size",type:u.percent}),I.push({name:"stripe-"+M+"-background-opacity",type:u.zeroOneNumber});var O=[],N=Wr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(W){N.forEach(function(H){var U=H+"-"+W.name,X=W.type,J=W.triggersBounds;O.push({name:U,type:X,triggersBounds:J})})},{});var B=Wr.properties=[].concat(v,T,m,y,b,C,p,g,h,f,d,k,S,E,L,P,I,A,R,O,D),z=Wr.propertyGroups={behavior:v,transition:T,visibility:m,overlay:y,underlay:b,ghost:C,commonLabel:p,labelDimensions:g,mainLabel:h,sourceLabel:f,targetLabel:d,nodeBody:k,nodeBorder:S,nodeOutline:E,backgroundImage:L,pie:P,stripe:I,compound:A,edgeLine:R,edgeArrow:O,core:D},F=Wr.propertyGroupNames={},V=Wr.propertyGroupKeys=Object.keys(z);V.forEach(function(W){F[W]=z[W].map(function(H){return H.name}),z[W].forEach(function(H){return H.groupKey=W})});var G=Wr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Wr.propertyNames=B.map(function(W){return W.name});for(var Y=0;Y<B.length;Y++){var Q=B[Y];B[Q.name]=Q}for(var K=0;K<G.length;K++){var it=G[K],ut=B[it.pointsTo],q={name:it.name,alias:!0,pointsTo:ut};B.push(q),B[it.name]=q}})();Wr.getDefaultProperty=function(e){return this.getDefaultProperties()[e]};Wr.getDefaultProperties=function(){var e=this._private;if(e.defaultProperties!=null)return e.defaultProperties;for(var t=Ce({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var h=1;h<=Wr.pieBackgroundN;h++){var f=u.name.replace("{{i}}",h),d=u.value;l[f]=d}return l},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var h=1;h<=Wr.stripeBackgroundN;h++){var f=u.name.replace("{{i}}",h),d=u.value;l[f]=d}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,u){return Wr.arrowPrefixes.forEach(function(h){var f=h+"-"+u.name,d=u.value;l[f]=d}),l},{})),r={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,s=t[a],o=this.parse(a,s);r[a]=o}}return e.defaultProperties=r,e.defaultProperties};Wr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var d2={};d2.parse=function(e,t,r,n){var i=this;if(Mr(t))return i.parseImplWarn(e,t,r,n);var a=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=r?"t":"f",o=""+t,l=AV(e,o,s,a),u=i.propCache=i.propCache||[],h;return(h=u[l])||(h=u[l]=i.parseImplWarn(e,t,r,n)),(r||n==="mapping")&&(h=as(h),h&&(h.value=as(h.value))),h};d2.parseImplWarn=function(e,t,r,n){var i=this.parseImpl(e,t,r,n);return!i&&t!=null&&or("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&t==="label"&&or("The style value of `label` is deprecated for `"+i.name+"`"),i};d2.parseImpl=function(e,t,r,n){var i=this;e=u_(e);var a=i.properties[e],s=t,o=i.types;if(!a||t===void 0)return null;a.alias&&(a=a.pointsTo,e=a.name);var l=Ee(t);l&&(t=t.trim());var u=a.type;if(!u)return null;if(r&&(t===""||t===null))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(Mr(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:r};var h,f;if(!(!l||n||t.length<7||t[1]!=="a")){if(t.length>=7&&t[0]==="d"&&(h=new RegExp(o.data.regex).exec(t))){if(r)return!1;var d=o.data;return{name:e,value:h,strValue:""+t,mapped:d,field:h[1],bypass:r}}else if(t.length>=10&&t[0]==="m"&&(f=new RegExp(o.mapData.regex).exec(t))){if(r||u.multiple)return!1;var g=o.mapData;if(!(u.color||u.number))return!1;var p=this.parse(e,f[4]);if(!p||p.mapped)return!1;var v=this.parse(e,f[5]);if(!v||v.mapped)return!1;if(p.pfValue===v.pfValue||p.strValue===v.strValue)return or("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+p.strValue+"`"),this.parse(e,p.strValue);if(u.color){var m=p.value,y=v.value,b=m[0]===y[0]&&m[1]===y[1]&&m[2]===y[2]&&(m[3]===y[3]||(m[3]==null||m[3]===1)&&(y[3]==null||y[3]===1));if(b)return!1}return{name:e,value:f,strValue:""+t,mapped:g,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:p.value,valueMax:v.value,bypass:r}}}if(u.multiple&&n!=="multiple"){var T;if(l?T=t.split(/\s+/):br(t)?T=t:T=[t],u.evenMultiple&&T.length%2!==0)return null;for(var w=[],k=[],S=[],E="",L=!1,A=0;A<T.length;A++){var R=i.parse(e,T[A],r,"multiple");L=L||Ee(R.value),w.push(R.value),S.push(R.pfValue!=null?R.pfValue:R.value),k.push(R.units),E+=(A>0?" ":"")+R.strValue}return u.validate&&!u.validate(w,k)?null:u.singleEnum&&L?w.length===1&&Ee(w[0])?{name:e,value:w[0],strValue:w[0],bypass:r}:null:{name:e,value:w,pfValue:S,strValue:E,bypass:r,units:k}}var C=function(){for(var q=0;q<u.enums.length;q++){var W=u.enums[q];if(W===t)return{name:e,value:t,strValue:""+t,bypass:r}}return null};if(u.number){var D,P="px";if(u.units&&(D=u.units),u.implicitUnits&&(P=u.implicitUnits),!u.unitless)if(l){var _="px|em"+(u.allowPercent?"|\\%":"");D&&(_=D);var I=t.match("^("+on+")("+_+")?$");I&&(t=I[1],D=I[2]||P)}else(!D||u.implicitUnits)&&(D=P);if(t=parseFloat(t),isNaN(t)&&u.enums===void 0)return null;if(isNaN(t)&&u.enums!==void 0)return t=s,C();if(u.integer&&!dwt(t)||u.min!==void 0&&(t<u.min||u.strictMin&&t===u.min)||u.max!==void 0&&(t>u.max||u.strictMax&&t===u.max))return null;var M={name:e,value:t,strValue:""+t+(D||""),units:D,bypass:r};return u.unitless||D!=="px"&&D!=="em"?M.pfValue=t:M.pfValue=D==="px"||!D?t:this.getEmSizeInPixels()*t,(D==="ms"||D==="s")&&(M.pfValue=D==="ms"?t:1e3*t),(D==="deg"||D==="rad")&&(M.pfValue=D==="rad"?t:bEt(t)),D==="%"&&(M.pfValue=t/100),M}else if(u.propList){var O=[],N=""+t;if(N!=="none"){for(var B=N.split(/\s*,\s*|\s+/),z=0;z<B.length;z++){var F=B[z].trim();i.properties[F]?O.push(F):or("`"+F+"` is not a valid property name")}if(O.length===0)return null}return{name:e,value:O,strValue:O.length===0?"none":O.join(" "),bypass:r}}else if(u.color){var V=TV(t);return V?{name:e,value:V,pfValue:V,strValue:"rgb("+V[0]+","+V[1]+","+V[2]+")",bypass:r}:null}else if(u.regex||u.regexes){if(u.enums){var G=C();if(G)return G}for(var Y=u.regexes?u.regexes:[u.regex],Q=0;Q<Y.length;Q++){var K=new RegExp(Y[Q]),it=K.exec(t);if(it)return{name:e,value:u.singleRegexMatchValue?it[1]:it,strValue:""+t,bypass:r}}return null}else return u.string?{name:e,value:""+t,strValue:""+t,bypass:r}:u.enums?C():null};var bn=function(t){if(!(this instanceof bn))return new bn(t);if(!c_(t)){Dr("A style must have a core reference");return}this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()},Qn=bn.prototype;Qn.instanceString=function(){return"style"};Qn.clear=function(){for(var e=this._private,t=e.cy,r=t.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(r,!0),r.forEach(function(i){var a=i[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this};Qn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Qn.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)};Qn.selector=function(e){var t=e==="core"?null:new qo(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this};Qn.css=function(){var e=this,t=arguments;if(t.length===1)for(var r=t[0],n=0;n<e.properties.length;n++){var i=e.properties[n],a=r[i.name];a===void 0&&(a=r[Jy(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else t.length===2&&this.cssRule(t[0],t[1]);return this};Qn.style=Qn.css;Qn.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var i=!this[n].selector;i&&(this._private.coreStyle[r.name]=r)}return this};Qn.append=function(e){return yV(e)?e.appendToStyle(this):br(e)?this.appendFromJson(e):Ee(e)&&this.appendFromString(e),this};bn.fromJson=function(e,t){var r=new bn(e);return r.fromJson(t),r};bn.fromString=function(e,t){return new bn(e).fromString(t)};[Cn,$p,C_,fs,f2,S_,Wr,d2].forEach(function(e){Ce(Qn,e)});bn.types=Qn.types;bn.properties=Qn.properties;bn.propertyGroups=Qn.propertyGroups;bn.propertyGroupNames=Qn.propertyGroupNames;bn.propertyGroupKeys=Qn.propertyGroupKeys;var kSt={style:function(t){if(t){var r=this.setStyle(t);r.update()}return this._private.style},setStyle:function(t){var r=this._private;return yV(t)?r.style=t.generateStyle(this):br(t)?r.style=bn.fromJson(this,t):Ee(t)?r.style=bn.fromString(this,t):r.style=bn(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},CSt="single",fc={autolock:function(t){if(t!==void 0)this._private.autolock=!!t;else return this._private.autolock;return this},autoungrabify:function(t){if(t!==void 0)this._private.autoungrabify=!!t;else return this._private.autoungrabify;return this},autounselectify:function(t){if(t!==void 0)this._private.autounselectify=!!t;else return this._private.autounselectify;return this},selectionType:function(t){var r=this._private;if(r.selectionType==null&&(r.selectionType=CSt),t!==void 0)(t==="additive"||t==="single")&&(r.selectionType=t);else return r.selectionType;return this},panningEnabled:function(t){if(t!==void 0)this._private.panningEnabled=!!t;else return this._private.panningEnabled;return this},userPanningEnabled:function(t){if(t!==void 0)this._private.userPanningEnabled=!!t;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(t){if(t!==void 0)this._private.zoomingEnabled=!!t;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(t){if(t!==void 0)this._private.userZoomingEnabled=!!t;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(t){if(t!==void 0)this._private.boxSelectionEnabled=!!t;else return this._private.boxSelectionEnabled;return this},pan:function(){var t=arguments,r=this._private.pan,n,i,a,s,o;switch(t.length){case 0:return r;case 1:if(Ee(t[0]))return n=t[0],r[n];if(Je(t[0])){if(!this._private.panningEnabled)return this;a=t[0],s=a.x,o=a.y,ne(s)&&(r.x=s),ne(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=t[0],i=t[1],(n==="x"||n==="y")&&ne(i)&&(r[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(t,r){var n=arguments,i=this._private.pan,a,s,o,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Je(t)&&(o=n[0],l=o.x,u=o.y,ne(l)&&(i.x+=l),ne(u)&&(i.y+=u),this.emit("pan viewport"));break;case 2:a=t,s=r,(a==="x"||a==="y")&&ne(s)&&(i[a]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(t,r){var n=this.getFitViewport(t,r);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,r){if(ne(t)&&r===void 0&&(r=t,t=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Ee(t)){var i=t;t=this.$(i)}else if(vwt(t)){var a=t;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Xi(t)||(t=this.mutableElements());if(!(Xi(t)&&t.empty())){n=n||t.boundingBox();var s=this.width(),o=this.height(),l;if(r=ne(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((s-2*r)/n.w,(o-2*r)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(s-l*(n.x1+n.x2))/2,y:(o-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(t,r){var n=this._private;if(r==null){var i=t;t=i.min,r=i.max}return ne(t)&&ne(r)&&t<=r?(n.minZoom=t,n.maxZoom=r):ne(t)&&r===void 0&&t<=n.maxZoom?n.minZoom=t:ne(r)&&t===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(t){return t===void 0?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return t===void 0?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var r=this._private,n=r.pan,i=r.zoom,a,s,o=!1;if(r.zoomingEnabled||(o=!0),ne(t)?s=t:Je(t)&&(s=t.level,t.position!=null?a=r2(t.position,i,n):t.renderedPosition!=null&&(a=t.renderedPosition),a!=null&&!r.panningEnabled&&(o=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,o||!ne(s)||s===i||a!=null&&(!ne(a.x)||!ne(a.y)))return null;if(a!=null){var l=n,u=i,h=s,f={x:-h/u*(a.x-l.x)+a.x,y:-h/u*(a.y-l.y)+a.y};return{zoomed:!0,panned:!0,zoom:h,pan:f}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(t){if(t===void 0)return this._private.zoom;var r=this.getZoomedViewport(t),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(t){var r=this._private,n=!0,i=!0,a=[],s=!1,o=!1;if(!t)return this;if(ne(t.zoom)||(n=!1),Je(t.pan)||(i=!1),!n&&!i)return this;if(n){var l=t.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=l,a.push("zoom"))}if(i&&(!s||!t.cancelOnFailedZoom)&&r.panningEnabled){var u=t.pan;ne(u.x)&&(r.pan.x=u.x,o=!1),ne(u.y)&&(r.pan.y=u.y,o=!1),o||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(t){var r=this.getCenterPan(t);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,r){if(this._private.panningEnabled){if(Ee(t)){var n=t;t=this.mutableElements().filter(n)}else Xi(t)||(t=this.mutableElements());if(t.length!==0){var i=t.boundingBox(),a=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var o={x:(a-r*(i.x1+i.x2))/2,y:(s-r*(i.y1+i.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t=this._private,r=t.container,n=this;return t.sizeCache=t.sizeCache||(r?function(){var i=n.window().getComputedStyle(r),a=function(o){return parseFloat(i.getPropertyValue(o))};return{width:r.clientWidth-a("padding-left")-a("padding-right"),height:r.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-t.x)/r,x2:(n.x2-t.x)/r,y1:(n.y1-t.y)/r,y2:(n.y2-t.y)/r};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var t=this.width(),r=this.height();return{x1:0,y1:0,x2:t,y2:r,w:t,h:r}},multiClickDebounceTime:function(t){if(t)this._private.multiClickDebounceTime=t;else return this._private.multiClickDebounceTime;return this}};fc.centre=fc.center;fc.autolockNodes=fc.autolock;fc.autoungrabifyNodes=fc.autoungrabify;var Yg={data:ir.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:ir.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:ir.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ir.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Yg.attr=Yg.data;Yg.removeAttr=Yg.removeData;var Hg=function(t){var r=this;t=Ce({},t);var n=t.container;n&&!wm(n)&&wm(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var a=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=r;var s=Jr!==void 0&&n!==void 0&&!t.headless,o=t;o.layout=Ce({name:s?"grid":"null"},o.layout),o.renderer=Ce({name:s?"canvas":"null"},o.renderer);var l=function(p,v,m){return v!==void 0?v:m!==void 0?m:p},u=this._private={container:n,ready:!1,options:o,elements:new Bn(this),listeners:[],aniEles:new Bn(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:ne(o.zoom)?o.zoom:1,pan:{x:Je(o.pan)&&ne(o.pan.x)?o.pan.x:0,y:Je(o.pan)&&ne(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var h=function(p,v){var m=p.some(mwt);if(m)return df.all(p).then(v);v(p)};u.styleEnabled&&r.setStyle([]);var f=Ce({},o,o.renderer);r.initRenderer(f);var d=function(p,v,m){r.notifications(!1);var y=r.mutableElements();y.length>0&&y.remove(),p!=null&&(Je(p)||br(p))&&r.add(p),r.one("layoutready",function(T){r.notifications(!0),r.emit(T),r.one("load",v),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",m),r.emit("done")});var b=Ce({},r._private.options.layout);b.eles=r.elements(),r.layout(b).run()};h([o.style,o.elements],function(g){var p=g[0],v=g[1];u.styleEnabled&&r.style().append(p),d(v,function(){r.startAnimationLoop(),u.ready=!0,Mr(o.ready)&&r.on("ready",o.ready);for(var m=0;m<a.length;m++){var y=a[m];r.on("ready",y)}i&&(i.readies=[]),r.emit("ready")},o.done)})},Lm=Hg.prototype;Ce(Lm,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},window:function(){var t=this._private.container;if(t==null)return Jr;var r=this._private.container.ownerDocument;return r===void 0||r==null?Jr:r.defaultView||Jr},mount:function(t){if(t!=null){var r=this,n=r._private,i=n.options;return!wm(t)&&wm(t[0])&&(t=t[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=t,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(Ce({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),r.startAnimationLoop(),r.style(i.style),r.emit("mount"),r}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return as(this._private.options)},json:function(t){var r=this,n=r._private,i=r.mutableElements(),a=function(w){return r.getElementById(w.id())};if(Je(t)){if(r.startBatch(),t.elements){var s={},o=function(w,k){for(var S=[],E=[],L=0;L<w.length;L++){var A=w[L];if(!A.data.id){or("cy.json() cannot handle elements without an ID attribute");continue}var R=""+A.data.id,C=r.getElementById(R);s[R]=!0,C.length!==0?E.push({ele:C,json:A}):(k&&(A.group=k),S.push(A))}r.add(S);for(var D=0;D<E.length;D++){var P=E[D],_=P.ele,I=P.json;_.json(I)}};if(br(t.elements))o(t.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var h=l[u],f=t.elements[h];br(f)&&o(f,h)}var d=r.collection();i.filter(function(T){return!s[T.id()]}).forEach(function(T){T.isParent()?d.merge(T):T.remove()}),d.forEach(function(T){return T.children().move({parent:null})}),d.forEach(function(T){return a(T).remove()})}t.style&&r.style(t.style),t.zoom!=null&&t.zoom!==n.zoom&&r.zoom(t.zoom),t.pan&&(t.pan.x!==n.pan.x||t.pan.y!==n.pan.y)&&r.pan(t.pan),t.data&&r.data(t.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<g.length;p++){var v=g[p];t[v]!=null&&r[v](t[v])}return r.endBatch(),this}else{var m=!!t,y={};m?y.elements=this.elements().map(function(T){return T.json()}):(y.elements={},i.forEach(function(T){var w=T.group();y.elements[w]||(y.elements[w]=[]),y.elements[w].push(T.json())})),this._private.styleEnabled&&(y.style=r.style().json()),y.data=as(r.data());var b=n.options;return y.zoomingEnabled=n.zoomingEnabled,y.userZoomingEnabled=n.userZoomingEnabled,y.zoom=n.zoom,y.minZoom=n.minZoom,y.maxZoom=n.maxZoom,y.panningEnabled=n.panningEnabled,y.userPanningEnabled=n.userPanningEnabled,y.pan=as(n.pan),y.boxSelectionEnabled=n.boxSelectionEnabled,y.renderer=as(b.renderer),y.hideEdgesOnViewport=b.hideEdgesOnViewport,y.textureOnViewport=b.textureOnViewport,y.wheelSensitivity=b.wheelSensitivity,y.motionBlur=b.motionBlur,y.multiClickDebounceTime=b.multiClickDebounceTime,y}}});Lm.$id=Lm.getElementById;[gSt,xSt,vG,qE,B1,TSt,XE,F1,kSt,fc,Yg].forEach(function(e){Ce(Lm,e)});var SSt={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}},_St={maximal:!1,acyclic:!1},Wc=function(t){return t.scratch("breadthfirst")},hN=function(t,r){return t.scratch("breadthfirst",r)};function mG(e){this.options=Ce({},SSt,_St,e)}mG.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,n=r.nodes().filter(function(tt){return tt.isChildless()}),i=r,a=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,o=!!e.boundingBox,l=t.extent(),u=Mi(o?e.boundingBox:{x1:l.x1,y1:l.y1,w:l.w,h:l.h}),h;if(Xi(e.roots))h=e.roots;else if(br(e.roots)){for(var f=[],d=0;d<e.roots.length;d++){var g=e.roots[d],p=t.getElementById(g);f.push(p)}h=t.collection(f)}else if(Ee(e.roots))h=t.$(e.roots);else if(a)h=n.roots();else{var v=r.components();h=t.collection();for(var m=function(){var kt=v[y],ft=kt.maxDegree(!1),Dt=kt.filter(function(Ot){return Ot.degree(!1)===ft});h=h.add(Dt)},y=0;y<v.length;y++)m()}var b=[],T={},w=function(kt,ft){b[ft]==null&&(b[ft]=[]);var Dt=b[ft].length;b[ft].push(kt),hN(kt,{index:Dt,depth:ft})},k=function(kt,ft){var Dt=Wc(kt),Ot=Dt.depth,Rt=Dt.index;b[Ot][Rt]=null,kt.isChildless()&&w(kt,ft)};i.bfs({roots:h,directed:e.directed,visit:function(kt,ft,Dt,Ot,Rt){var Tt=kt[0],At=Tt.id();Tt.isChildless()&&w(Tt,Rt),T[At]=!0}});for(var S=[],E=0;E<n.length;E++){var L=n[E];T[L.id()]||S.push(L)}var A=function(kt){for(var ft=b[kt],Dt=0;Dt<ft.length;Dt++){var Ot=ft[Dt];if(Ot==null){ft.splice(Dt,1),Dt--;continue}hN(Ot,{depth:kt,index:Dt})}},R=function(kt,ft){for(var Dt=Wc(kt),Ot=kt.incomers().filter(function(ht){return ht.isNode()&&r.has(ht)}),Rt=-1,Tt=kt.id(),At=0;At<Ot.length;At++){var bt=Ot[At],wt=Wc(bt);Rt=Math.max(Rt,wt.depth)}if(Dt.depth<=Rt){if(!e.acyclic&&ft[Tt])return null;var Nt=Rt+1;return k(kt,Nt),ft[Tt]=Nt,!0}return!1};if(a&&s){var C=[],D={},P=function(kt){return C.push(kt)},_=function(){return C.shift()};for(n.forEach(function(tt){return C.push(tt)});C.length>0;){var I=_(),M=R(I,D);if(M)I.outgoers().filter(function(tt){return tt.isNode()&&r.has(tt)}).forEach(P);else if(M===null){or("Detected double maximal shift for node `"+I.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var O=0;if(e.avoidOverlap)for(var N=0;N<n.length;N++){var B=n[N],z=B.layoutDimensions(e),F=z.w,V=z.h;O=Math.max(O,F,V)}var G={},Y=function(kt){if(G[kt.id()])return G[kt.id()];for(var ft=Wc(kt).depth,Dt=kt.neighborhood(),Ot=0,Rt=0,Tt=0;Tt<Dt.length;Tt++){var At=Dt[Tt];if(!(At.isEdge()||At.isParent()||!n.has(At))){var bt=Wc(At);if(bt!=null){var wt=bt.index,Nt=bt.depth;if(!(wt==null||Nt==null)){var ht=b[Nt].length;Nt<ft&&(Ot+=wt/ht,Rt++)}}}}return Rt=Math.max(1,Rt),Ot=Ot/Rt,Rt===0&&(Ot=0),G[kt.id()]=Ot,Ot},Q=function(kt,ft){var Dt=Y(kt),Ot=Y(ft),Rt=Dt-Ot;return Rt===0?bV(kt.id(),ft.id()):Rt};e.depthSort!==void 0&&(Q=e.depthSort);for(var K=b.length,it=0;it<K;it++)b[it].sort(Q),A(it);for(var ut=[],q=0;q<S.length;q++)ut.push(S[q]);var W=function(){for(var kt=0;kt<K;kt++)A(kt)};ut.length&&(b.unshift(ut),K=b.length,W());for(var H=0,U=0;U<K;U++)H=Math.max(b[U].length,H);var X={x:u.x1+u.w/2,y:u.y1+u.h/2},J=n.reduce(function(tt,kt){return function(ft){return{w:tt.w===-1?ft.w:(tt.w+ft.w)/2,h:tt.h===-1?ft.h:(tt.h+ft.h)/2}}(kt.boundingBox({includeLabels:e.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),j=Math.max(K===1?0:o?(u.h-e.padding*2-J.h)/(K-1):(u.h-e.padding*2-J.h)/(K+1),O),gt=b.reduce(function(tt,kt){return Math.max(tt,kt.length)},0),at=function(kt){var ft=Wc(kt),Dt=ft.depth,Ot=ft.index;if(e.circle){var Rt=Math.min(u.w/2/K,u.h/2/K);Rt=Math.max(Rt,O);var Tt=Rt*Dt+Rt-(K>0&&b[0].length<=3?Rt/2:0),At=2*Math.PI/b[Dt].length*Ot;return Dt===0&&b[0].length===1&&(Tt=1),{x:X.x+Tt*Math.cos(At),y:X.y+Tt*Math.sin(At)}}else{var bt=b[Dt].length,wt=Math.max(bt===1?0:o?(u.w-e.padding*2-J.w)/((e.grid?gt:bt)-1):(u.w-e.padding*2-J.w)/((e.grid?gt:bt)+1),O),Nt={x:X.x+(Ot+1-(bt+1)/2)*wt,y:X.y+(Dt+1-(K+1)/2)*j};return Nt}};return r.nodes().layoutPositions(this,e,at),this};var ASt={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function yG(e){this.options=Ce({},ASt,e)}yG.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,i=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,a=n.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));for(var s=Mi(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},l=t.sweep===void 0?2*Math.PI-2*Math.PI/a.length:t.sweep,u=l/Math.max(1,a.length-1),h,f=0,d=0;d<a.length;d++){var g=a[d],p=g.layoutDimensions(t),v=p.w,m=p.h;f=Math.max(f,v,m)}if(ne(t.radius)?h=t.radius:a.length<=1?h=0:h=Math.min(s.h,s.w)/2-f,a.length>1&&t.avoidOverlap){f*=1.75;var y=Math.cos(u)-Math.cos(0),b=Math.sin(u)-Math.sin(0),T=Math.sqrt(f*f/(y*y+b*b));h=Math.max(T,h)}var w=function(S,E){var L=t.startAngle+E*u*(i?1:-1),A=h*Math.cos(L),R=h*Math.sin(L),C={x:o.x+A,y:o.y+R};return C};return n.nodes().layoutPositions(this,t,w),this};var LSt={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function xG(e){this.options=Ce({},LSt,e)}xG.prototype.run=function(){for(var e=this.options,t=e,r=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,n=e.cy,i=t.eles,a=i.nodes().not(":parent"),s=Mi(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},l=[],u=0,h=0;h<a.length;h++){var f=a[h],d=void 0;d=t.concentric(f),l.push({value:d,node:f}),f._private.scratch.concentric=d}a.updateStyle();for(var g=0;g<a.length;g++){var p=a[g],v=p.layoutDimensions(t);u=Math.max(u,v.w,v.h)}l.sort(function(J,j){return j.value-J.value});for(var m=t.levelWidth(a),y=[[]],b=y[0],T=0;T<l.length;T++){var w=l[T];if(b.length>0){var k=Math.abs(b[0].value-w.value);k>=m&&(b=[],y.push(b))}b.push(w)}var S=u+t.minNodeSpacing;if(!t.avoidOverlap){var E=y.length>0&&y[0].length>1,L=Math.min(s.w,s.h)/2-S,A=L/(y.length+E?1:0);S=Math.min(S,A)}for(var R=0,C=0;C<y.length;C++){var D=y[C],P=t.sweep===void 0?2*Math.PI-2*Math.PI/D.length:t.sweep,_=D.dTheta=P/Math.max(1,D.length-1);if(D.length>1&&t.avoidOverlap){var I=Math.cos(_)-Math.cos(0),M=Math.sin(_)-Math.sin(0),O=Math.sqrt(S*S/(I*I+M*M));R=Math.max(O,R)}D.r=R,R+=S}if(t.equidistant){for(var N=0,B=0,z=0;z<y.length;z++){var F=y[z],V=F.r-B;N=Math.max(N,V)}B=0;for(var G=0;G<y.length;G++){var Y=y[G];G===0&&(B=Y.r),Y.r=B,B+=N}}for(var Q={},K=0;K<y.length;K++)for(var it=y[K],ut=it.dTheta,q=it.r,W=0;W<it.length;W++){var H=it[W],U=t.startAngle+(r?1:-1)*ut*W,X={x:o.x+q*Math.cos(U),y:o.y+q*Math.sin(U)};Q[H.node.id()]=X}return i.nodes().layoutPositions(this,t,function(J){var j=J.id();return Q[j]}),this};var sT,RSt={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function g2(e){this.options=Ce({},RSt,e),this.options.layout=this;var t=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(i){var a=i.source().data("id"),s=i.target().data("id"),o=t.some(function(u){return u.data("id")===a}),l=t.some(function(u){return u.data("id")===s});return!o||!l});this.options.eles=this.options.eles.not(n)}g2.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,(e.animate===!0||e.animate===!1)&&r.emit({type:"layoutstart",layout:r}),e.debug===!0?sT=!0:sT=!1;var n=ISt(t,r,e);sT&&DSt(n),e.randomize&&MSt(n);var i=no(),a=function(){OSt(n,t,e),e.fit===!0&&t.fit(e.padding)},s=function(d){return!(r.stopped||d>=e.numIter||(PSt(n,e),n.temperature=n.temperature*e.coolingFactor,n.temperature<e.minTemp))},o=function(){if(e.animate===!0||e.animate===!1)a(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var d=e.eles.nodes(),g=TG(n,e,d);d.layoutPositions(r,e,g)}},l=0,u=!0;if(e.animate===!0){var h=function(){for(var d=0;u&&d<e.refresh;)u=s(l),l++,d++;if(!u)dN(n,e),o();else{var g=no();g-i>=e.animationThreshold&&a(),Em(h)}};h()}else{for(;u;)u=s(l),l++;dN(n,e),o()}return this};g2.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};g2.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var ISt=function(t,r,n){for(var i=n.eles.edges(),a=n.eles.nodes(),s=Mi(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},l=n.eles.components(),u={},h=0;h<l.length;h++)for(var f=l[h],d=0;d<f.length;d++){var g=f[d];u[g.id()]=h}for(var h=0;h<o.nodeSize;h++){var p=a[h],v=p.layoutDimensions(n),m={};m.isLocked=p.locked(),m.id=p.data("id"),m.parentId=p.data("parent"),m.cmptId=u[p.id()],m.children=[],m.positionX=p.position("x"),m.positionY=p.position("y"),m.offsetX=0,m.offsetY=0,m.height=v.w,m.width=v.h,m.maxX=m.positionX+m.width/2,m.minX=m.positionX-m.width/2,m.maxY=m.positionY+m.height/2,m.minY=m.positionY-m.height/2,m.padLeft=parseFloat(p.style("padding")),m.padRight=parseFloat(p.style("padding")),m.padTop=parseFloat(p.style("padding")),m.padBottom=parseFloat(p.style("padding")),m.nodeRepulsion=Mr(n.nodeRepulsion)?n.nodeRepulsion(p):n.nodeRepulsion,o.layoutNodes.push(m),o.idToIndex[m.id]=h}for(var y=[],b=0,T=-1,w=[],h=0;h<o.nodeSize;h++){var p=o.layoutNodes[h],k=p.parentId;k!=null?o.layoutNodes[o.idToIndex[k]].children.push(p.id):(y[++T]=p.id,w.push(p.id))}for(o.graphSet.push(w);b<=T;){var S=y[b++],E=o.idToIndex[S],g=o.layoutNodes[E],L=g.children;if(L.length>0){o.graphSet.push(L);for(var h=0;h<L.length;h++)y[++T]=L[h]}}for(var h=0;h<o.graphSet.length;h++)for(var A=o.graphSet[h],d=0;d<A.length;d++){var R=o.idToIndex[A[d]];o.indexToGraph[R]=h}for(var h=0;h<o.edgeSize;h++){var C=i[h],D={};D.id=C.data("id"),D.sourceId=C.data("source"),D.targetId=C.data("target");var P=Mr(n.idealEdgeLength)?n.idealEdgeLength(C):n.idealEdgeLength,_=Mr(n.edgeElasticity)?n.edgeElasticity(C):n.edgeElasticity,I=o.idToIndex[D.sourceId],M=o.idToIndex[D.targetId],O=o.indexToGraph[I],N=o.indexToGraph[M];if(O!=N){for(var B=NSt(D.sourceId,D.targetId,o),z=o.graphSet[B],F=0,m=o.layoutNodes[I];z.indexOf(m.id)===-1;)m=o.layoutNodes[o.idToIndex[m.parentId]],F++;for(m=o.layoutNodes[M];z.indexOf(m.id)===-1;)m=o.layoutNodes[o.idToIndex[m.parentId]],F++;P*=F*n.nestingFactor}D.idealLength=P,D.elasticity=_,o.layoutEdges.push(D)}return o},NSt=function(t,r,n){var i=bG(t,r,0,n);return 2>i.count?0:i.graph},bG=function(t,r,n,i){var a=i.graphSet[n];if(-1<a.indexOf(t)&&-1<a.indexOf(r))return{count:2,graph:n};for(var s=0,o=0;o<a.length;o++){var l=a[o],u=i.idToIndex[l],h=i.layoutNodes[u].children;if(h.length!==0){var f=i.indexToGraph[i.idToIndex[h[0]]],d=bG(t,r,f,i);if(d.count!==0)if(d.count===1){if(s++,s===2)break}else return d}}return{count:s,graph:n}},DSt,MSt=function(t,r){for(var n=t.clientWidth,i=t.clientHeight,a=0;a<t.nodeSize;a++){var s=t.layoutNodes[a];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*i)}},TG=function(t,r,n){var i=t.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(s){var o=t.layoutNodes[t.idToIndex[s.data("id")]];a.x1=Math.min(a.x1,o.positionX),a.x2=Math.max(a.x2,o.positionX),a.y1=Math.min(a.y1,o.positionY),a.y2=Math.max(a.y2,o.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(s,o){var l=t.layoutNodes[t.idToIndex[s.data("id")]];if(r.boundingBox){var u=(l.positionX-a.x1)/a.w,h=(l.positionY-a.y1)/a.h;return{x:i.x1+u*i.w,y:i.y1+h*i.h}}else return{x:l.positionX,y:l.positionY}}},OSt=function(t,r,n){var i=n.layout,a=n.eles.nodes(),s=TG(t,n,a);a.positions(s),t.ready!==!0&&(t.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},PSt=function(t,r,n){BSt(t,r),zSt(t),VSt(t,r),GSt(t),USt(t)},BSt=function(t,r){for(var n=0;n<t.graphSet.length;n++)for(var i=t.graphSet[n],a=i.length,s=0;s<a;s++)for(var o=t.layoutNodes[t.idToIndex[i[s]]],l=s+1;l<a;l++){var u=t.layoutNodes[t.idToIndex[i[l]]];FSt(o,u,t,r)}},fN=function(t){return-1+2*t*Math.random()},FSt=function(t,r,n,i){var a=t.cmptId,s=r.cmptId;if(!(a!==s&&!n.isCompound)){var o=r.positionX-t.positionX,l=r.positionY-t.positionY,u=1;o===0&&l===0&&(o=fN(u),l=fN(u));var h=$St(t,r,o,l);if(h>0)var f=i.nodeOverlap*h,d=Math.sqrt(o*o+l*l),g=f*o/d,p=f*l/d;else var v=Rm(t,o,l),m=Rm(r,-1*o,-1*l),y=m.x-v.x,b=m.y-v.y,T=y*y+b*b,d=Math.sqrt(T),f=(t.nodeRepulsion+r.nodeRepulsion)/T,g=f*y/d,p=f*b/d;t.isLocked||(t.offsetX-=g,t.offsetY-=p),r.isLocked||(r.offsetX+=g,r.offsetY+=p)}},$St=function(t,r,n,i){if(n>0)var a=t.maxX-r.minX;else var a=r.maxX-t.minX;if(i>0)var s=t.maxY-r.minY;else var s=r.maxY-t.minY;return a>=0&&s>=0?Math.sqrt(a*a+s*s):0},Rm=function(t,r,n){var i=t.positionX,a=t.positionY,s=t.height||1,o=t.width||1,l=n/r,u=s/o,h={};return r===0&&0<n||r===0&&0>n?(h.x=i,h.y=a+s/2,h):0<r&&-1*u<=l&&l<=u?(h.x=i+o/2,h.y=a+o*n/2/r,h):0>r&&-1*u<=l&&l<=u?(h.x=i-o/2,h.y=a-o*n/2/r,h):0<n&&(l<=-1*u||l>=u)?(h.x=i+s*r/2/n,h.y=a+s/2,h):(0>n&&(l<=-1*u||l>=u)&&(h.x=i-s*r/2/n,h.y=a-s/2),h)},zSt=function(t,r){for(var n=0;n<t.edgeSize;n++){var i=t.layoutEdges[n],a=t.idToIndex[i.sourceId],s=t.layoutNodes[a],o=t.idToIndex[i.targetId],l=t.layoutNodes[o],u=l.positionX-s.positionX,h=l.positionY-s.positionY;if(!(u===0&&h===0)){var f=Rm(s,u,h),d=Rm(l,-1*u,-1*h),g=d.x-f.x,p=d.y-f.y,v=Math.sqrt(g*g+p*p),m=Math.pow(i.idealLength-v,2)/i.elasticity;if(v!==0)var y=m*g/v,b=m*p/v;else var y=0,b=0;s.isLocked||(s.offsetX+=y,s.offsetY+=b),l.isLocked||(l.offsetX-=y,l.offsetY-=b)}}},VSt=function(t,r){if(r.gravity!==0)for(var n=1,i=0;i<t.graphSet.length;i++){var a=t.graphSet[i],s=a.length;if(i===0)var o=t.clientHeight/2,l=t.clientWidth/2;else var u=t.layoutNodes[t.idToIndex[a[0]]],h=t.layoutNodes[t.idToIndex[u.parentId]],o=h.positionX,l=h.positionY;for(var f=0;f<s;f++){var d=t.layoutNodes[t.idToIndex[a[f]]];if(!d.isLocked){var g=o-d.positionX,p=l-d.positionY,v=Math.sqrt(g*g+p*p);if(v>n){var m=r.gravity*g/v,y=r.gravity*p/v;d.offsetX+=m,d.offsetY+=y}}}}},GSt=function(t,r){var n=[],i=0,a=-1;for(n.push.apply(n,t.graphSet[0]),a+=t.graphSet[0].length;i<=a;){var s=n[i++],o=t.idToIndex[s],l=t.layoutNodes[o],u=l.children;if(0<u.length&&!l.isLocked){for(var h=l.offsetX,f=l.offsetY,d=0;d<u.length;d++){var g=t.layoutNodes[t.idToIndex[u[d]]];g.offsetX+=h,g.offsetY+=f,n[++a]=u[d]}l.offsetX=0,l.offsetY=0}}},USt=function(t,r){for(var n=0;n<t.nodeSize;n++){var i=t.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<t.nodeSize;n++){var i=t.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var a=WSt(i.offsetX,i.offsetY,t.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,wG(i,t)}}for(var n=0;n<t.nodeSize;n++){var i=t.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},WSt=function(t,r,n){var i=Math.sqrt(t*t+r*r);if(i>n)var a={x:n*t/i,y:n*r/i};else var a={x:t,y:r};return a},wG=function(t,r){var n=t.parentId;if(n!=null){var i=r.layoutNodes[r.idToIndex[n]],a=!1;if((i.maxX==null||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,a=!0),(i.minX==null||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,a=!0),(i.maxY==null||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,a=!0),(i.minY==null||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,a=!0),a)return wG(i,r)}},dN=function(t,r){for(var n=t.layoutNodes,i=[],a=0;a<n.length;a++){var s=n[a],o=s.cmptId,l=i[o]=i[o]||[];l.push(s)}for(var u=0,a=0;a<i.length;a++){var h=i[a];if(h){h.x1=1/0,h.x2=-1/0,h.y1=1/0,h.y2=-1/0;for(var f=0;f<h.length;f++){var d=h[f];h.x1=Math.min(h.x1,d.positionX-d.width/2),h.x2=Math.max(h.x2,d.positionX+d.width/2),h.y1=Math.min(h.y1,d.positionY-d.height/2),h.y2=Math.max(h.y2,d.positionY+d.height/2)}h.w=h.x2-h.x1,h.h=h.y2-h.y1,u+=h.w*h.h}}i.sort(function(b,T){return T.w*T.h-b.w*b.h});for(var g=0,p=0,v=0,m=0,y=Math.sqrt(u)*t.clientWidth/t.clientHeight,a=0;a<i.length;a++){var h=i[a];if(h){for(var f=0;f<h.length;f++){var d=h[f];d.isLocked||(d.positionX+=g-h.x1,d.positionY+=p-h.y1)}g+=h.w+r.componentSpacing,v+=h.w+r.componentSpacing,m=Math.max(m,h.h),v>y&&(p+=m+r.componentSpacing,g=0,v=0,m=0)}}},YSt={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function EG(e){this.options=Ce({},YSt,e)}EG.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,i=n.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var a=Mi(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(a.h===0||a.w===0)n.nodes().layoutPositions(this,t,function(G){return{x:a.x1,y:a.y1}});else{var s=i.size(),o=Math.sqrt(s*a.h/a.w),l=Math.round(o),u=Math.round(a.w/a.h*o),h=function(Y){if(Y==null)return Math.min(l,u);var Q=Math.min(l,u);Q==l?l=Y:u=Y},f=function(Y){if(Y==null)return Math.max(l,u);var Q=Math.max(l,u);Q==l?l=Y:u=Y},d=t.rows,g=t.cols!=null?t.cols:t.columns;if(d!=null&&g!=null)l=d,u=g;else if(d!=null&&g==null)l=d,u=Math.ceil(s/l);else if(d==null&&g!=null)u=g,l=Math.ceil(s/u);else if(u*l>s){var p=h(),v=f();(p-1)*v>=s?h(p-1):(v-1)*p>=s&&f(v-1)}else for(;u*l<s;){var m=h(),y=f();(y+1)*m>=s?f(y+1):h(m+1)}var b=a.w/u,T=a.h/l;if(t.condense&&(b=0,T=0),t.avoidOverlap)for(var w=0;w<i.length;w++){var k=i[w],S=k._private.position;(S.x==null||S.y==null)&&(S.x=0,S.y=0);var E=k.layoutDimensions(t),L=t.avoidOverlapPadding,A=E.w+L,R=E.h+L;b=Math.max(b,A),T=Math.max(T,R)}for(var C={},D=function(Y,Q){return!!C["c-"+Y+"-"+Q]},P=function(Y,Q){C["c-"+Y+"-"+Q]=!0},_=0,I=0,M=function(){I++,I>=u&&(I=0,_++)},O={},N=0;N<i.length;N++){var B=i[N],z=t.position(B);if(z&&(z.row!==void 0||z.col!==void 0)){var F={row:z.row,col:z.col};if(F.col===void 0)for(F.col=0;D(F.row,F.col);)F.col++;else if(F.row===void 0)for(F.row=0;D(F.row,F.col);)F.row++;O[B.id()]=F,P(F.row,F.col)}}var V=function(Y,Q){var K,it;if(Y.locked()||Y.isParent())return!1;var ut=O[Y.id()];if(ut)K=ut.col*b+b/2+a.x1,it=ut.row*T+T/2+a.y1;else{for(;D(_,I);)M();K=I*b+b/2+a.x1,it=_*T+T/2+a.y1,P(_,I),M()}return{x:K,y:it}};i.layoutPositions(this,t,V)}return this};var HSt={ready:function(){},stop:function(){}};function __(e){this.options=Ce({},HSt,e)}__.prototype.run=function(){var e=this.options,t=e.eles,r=this;return e.cy,r.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this};__.prototype.stop=function(){return this};var qSt={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function kG(e){this.options=Ce({},qSt,e)}kG.prototype.run=function(){var e=this.options,t=e.eles,r=t.nodes(),n=Mr(e.positions);function i(a){if(e.positions==null)return pEt(a.position());if(n)return e.positions(a);var s=e.positions[a._private.data.id];return s??null}return r.layoutPositions(this,e,function(a,s){var o=i(a);return a.locked()||o==null?!1:o}),this};var XSt={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function CG(e){this.options=Ce({},XSt,e)}CG.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,n=Mi(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),i=function(s,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,e,i),this};var jSt=[{name:"breadthfirst",impl:mG},{name:"circle",impl:yG},{name:"concentric",impl:xG},{name:"cose",impl:g2},{name:"grid",impl:EG},{name:"null",impl:__},{name:"preset",impl:kG},{name:"random",impl:CG}];function SG(e){this.options=e,this.notifications=0}var gN=function(){},pN=function(){throw new Error("A headless instance can not render images")};SG.prototype={recalculateRenderedStyle:gN,notify:function(){this.notifications++},init:gN,isHeadless:function(){return!0},png:pN,jpg:pN};var A_={};A_.arrowShapeWidth=.3;A_.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,r=function(u,h,f,d,g,p,v){var m=g.x-f/2-v,y=g.x+f/2+v,b=g.y-f/2-v,T=g.y+f/2+v,w=m<=u&&u<=y&&b<=h&&h<=T;return w},n=function(u,h,f,d,g){var p=u*Math.cos(d)-h*Math.sin(d),v=u*Math.sin(d)+h*Math.cos(d),m=p*f,y=v*f,b=m+g.x,T=y+g.y;return{x:b,y:T}},i=function(u,h,f,d){for(var g=[],p=0;p<u.length;p+=2){var v=u[p],m=u[p+1];g.push(n(v,m,h,f,d))}return g},a=function(u){for(var h=[],f=0;f<u.length;f++){var d=u[f];h.push(d.x,d.y)}return h},s=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},o=function(u,h){Ee(h)&&(h=e[h]),e[u]=Ce({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,g,p,v,m,y){var b=a(i(this.points,p+2*y,v,m)),T=ki(d,g,b);return T},roughCollide:r,draw:function(d,g,p,v){var m=i(this.points,g,p,v);t.arrowShapeImpl("polygon")(d,m)},spacing:function(d){return 0},gap:s},h)};o("none",{collide:km,roughCollide:km,draw:d_,spacing:IR,gap:IR}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(u,h,f,d,g){var p=i(this.points,h,f,d),v=this.controlPoint,m=n(v[0],v[1],h,f,d);t.arrowShapeImpl(this.name)(u,p,m)},gap:function(u){return s(u)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,h,f,d,g,p,v){var m=a(i(this.points,f+2*v,d,g)),y=a(i(this.pointsTee,f+2*v,d,g)),b=ki(u,h,m)||ki(u,h,y);return b},draw:function(u,h,f,d,g){var p=i(this.points,h,f,d),v=i(this.pointsTee,h,f,d);t.arrowShapeImpl(this.name)(u,p,v)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,h,f,d,g,p,v){var m=g,y=Math.pow(m.x-u,2)+Math.pow(m.y-h,2)<=Math.pow((f+2*v)*this.radius,2),b=a(i(this.points,f+2*v,d,g));return ki(u,h,b)||y},draw:function(u,h,f,d,g){var p=i(this.pointsTr,h,f,d);t.arrowShapeImpl(this.name)(u,p,d.x,d.y,this.radius*h)},spacing:function(u){return t.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,h){var f=this.baseCrossLinePts.slice(),d=h/u,g=3,p=5;return f[g]=f[g]-d,f[p]=f[p]-d,f},collide:function(u,h,f,d,g,p,v){var m=a(i(this.points,f+2*v,d,g)),y=a(i(this.crossLinePts(f,p),f+2*v,d,g)),b=ki(u,h,m)||ki(u,h,y);return b},draw:function(u,h,f,d,g){var p=i(this.points,h,f,d),v=i(this.crossLinePts(h,g),h,f,d);t.arrowShapeImpl(this.name)(u,p,v)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return s(u)*.525}}),o("circle",{radius:.15,collide:function(u,h,f,d,g,p,v){var m=g,y=Math.pow(m.x-u,2)+Math.pow(m.y-h,2)<=Math.pow((f+2*v)*this.radius,2);return y},draw:function(u,h,f,d,g){t.arrowShapeImpl(this.name)(u,d.x,d.y,this.radius*h)},spacing:function(u){return t.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var Mc={};Mc.projectIntoViewport=function(e,t){var r=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],s=n[4],o=r.pan(),l=r.zoom(),u=((e-i)/s-o.x)/l,h=((t-a)/s-o.y)/l;return[u,h]};Mc.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),n=function(y){return parseFloat(r.getPropertyValue(y))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},a={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=e.clientWidth,o=e.clientHeight,l=i.left+i.right,u=i.top+i.bottom,h=a.left+a.right,f=t.width/(s+h),d=s-l,g=o-u,p=t.left+i.left+a.left,v=t.top+i.top+a.top;return this.containerBB=[p,v,d,g,f]};Mc.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Mc.findNearestElement=function(e,t,r,n){return this.findNearestElements(e,t,r,n)[0]};Mc.findNearestElements=function(e,t,r,n){var i=this,a=this,s=a.getCachedZSortedEles(),o=[],l=a.cy.zoom(),u=a.cy.hasCompoundNodes(),h=(n?24:8)/l,f=(n?8:2)/l,d=(n?8:2)/l,g=1/0,p,v;r&&(s=s.interactive);function m(E,L){if(E.isNode()){if(v)return;v=E,o.push(E)}if(E.isEdge()&&(L==null||L<g))if(p){if(p.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value&&p.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value){for(var A=0;A<o.length;A++)if(o[A].isEdge()){o[A]=E,p=E,g=L??g;break}}}else o.push(E),p=E,g=L??g}function y(E){var L=E.outerWidth()+2*f,A=E.outerHeight()+2*f,R=L/2,C=A/2,D=E.position(),P=E.pstyle("corner-radius").value==="auto"?"auto":E.pstyle("corner-radius").pfValue,_=E._private.rscratch;if(D.x-R<=e&&e<=D.x+R&&D.y-C<=t&&t<=D.y+C){var I=a.nodeShapes[i.getNodeShape(E)];if(I.checkPoint(e,t,0,L,A,D.x,D.y,P,_))return m(E,0),!0}}function b(E){var L=E._private,A=L.rscratch,R=E.pstyle("width").pfValue,C=E.pstyle("arrow-scale").value,D=R/2+h,P=D*D,_=D*2,N=L.source,B=L.target,I;if(A.edgeType==="segments"||A.edgeType==="straight"||A.edgeType==="haystack"){for(var M=A.allpts,O=0;O+3<M.length;O+=2)if(LEt(e,t,M[O],M[O+1],M[O+2],M[O+3],_)&&P>(I=MEt(e,t,M[O],M[O+1],M[O+2],M[O+3])))return m(E,I),!0}else if(A.edgeType==="bezier"||A.edgeType==="multibezier"||A.edgeType==="self"||A.edgeType==="compound"){for(var M=A.allpts,O=0;O+5<A.allpts.length;O+=4)if(REt(e,t,M[O],M[O+1],M[O+2],M[O+3],M[O+4],M[O+5],_)&&P>(I=DEt(e,t,M[O],M[O+1],M[O+2],M[O+3],M[O+4],M[O+5])))return m(E,I),!0}for(var N=N||L.source,B=B||L.target,z=i.getArrowWidth(R,C),F=[{name:"source",x:A.arrowStartX,y:A.arrowStartY,angle:A.srcArrowAngle},{name:"target",x:A.arrowEndX,y:A.arrowEndY,angle:A.tgtArrowAngle},{name:"mid-source",x:A.midX,y:A.midY,angle:A.midsrcArrowAngle},{name:"mid-target",x:A.midX,y:A.midY,angle:A.midtgtArrowAngle}],O=0;O<F.length;O++){var V=F[O],G=a.arrowShapes[E.pstyle(V.name+"-arrow-shape").value],Y=E.pstyle("width").pfValue;if(G.roughCollide(e,t,z,V.angle,{x:V.x,y:V.y},Y,h)&&G.collide(e,t,z,V.angle,{x:V.x,y:V.y},Y,h))return m(E),!0}u&&o.length>0&&(y(N),y(B))}function T(E,L,A){return Ei(E,L,A)}function w(E,L){var A=E._private,R=d,C;L?C=L+"-":C="",E.boundingBox();var D=A.labelBounds[L||"main"],P=E.pstyle(C+"label").value,_=E.pstyle("text-events").strValue==="yes";if(!(!_||!P)){var I=T(A.rscratch,"labelX",L),M=T(A.rscratch,"labelY",L),O=T(A.rscratch,"labelAngle",L),N=E.pstyle(C+"text-margin-x").pfValue,B=E.pstyle(C+"text-margin-y").pfValue,z=D.x1-R-N,F=D.x2+R-N,V=D.y1-R-B,G=D.y2+R-B;if(O){var Y=Math.cos(O),Q=Math.sin(O),K=function(X,J){return X=X-I,J=J-M,{x:X*Y-J*Q+I,y:X*Q+J*Y+M}},it=K(z,V),ut=K(z,G),q=K(F,V),W=K(F,G),H=[it.x+N,it.y+B,q.x+N,q.y+B,W.x+N,W.y+B,ut.x+N,ut.y+B];if(ki(e,t,H))return m(E),!0}else if(Wh(D,e,t))return m(E),!0}}for(var k=s.length-1;k>=0;k--){var S=s[k];S.isNode()?y(S)||w(S):b(S)||w(S)||w(S,"source")||w(S,"target")}return o};Mc.getAllInBox=function(e,t,r,n){var i=this.getCachedZSortedEles().interactive,a=this.cy.zoom(),s=2/a,o=[],l=Math.min(e,r),u=Math.max(e,r),h=Math.min(t,n),f=Math.max(t,n);e=l,r=u,t=h,n=f;var d=Mi({x1:e,y1:t,x2:r,y2:n});function g(P,_,I){return Ei(P,_,I)}function p(P,_){var I=P._private,M=s,O="";P.boundingBox();var N=I.labelBounds.main,B=g(I.rscratch,"labelX",_),z=g(I.rscratch,"labelY",_),F=g(I.rscratch,"labelAngle",_),V=P.pstyle(O+"text-margin-x").pfValue,G=P.pstyle(O+"text-margin-y").pfValue,Y=N.x1-M-V,Q=N.x2+M-V,K=N.y1-M-G,it=N.y2+M-G;if(F){var ut=Math.cos(F),q=Math.sin(F),W=function(U,X){return U=U-B,X=X-z,{x:U*ut-X*q+B,y:U*q+X*ut+z}};return[W(Y,K),W(Q,K),W(Q,it),W(Y,it)]}else return[{x:Y,y:K},{x:Q,y:K},{x:Q,y:it},{x:Y,y:it}]}for(var v=0;v<i.length;v++){var m=i[v];if(m.isNode()){var y=m,b=y.pstyle("text-events").strValue==="yes",T=y.pstyle("box-select-labels").strValue==="yes",w=y.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:T&&b});if(m_(d,w)){var k=p(y),S=[{x:d.x1,y:d.y1},{x:d.x2,y:d.y1},{x:d.x2,y:d.y2},{x:d.x1,y:d.y2}];$Et(k,S)&&o.push(y)}}else{var E=m,L=E._private,A=L.rscratch;if(A.startX!=null&&A.startY!=null&&!Wh(d,A.startX,A.startY)||A.endX!=null&&A.endY!=null&&!Wh(d,A.endX,A.endY))continue;if(A.edgeType==="bezier"||A.edgeType==="multibezier"||A.edgeType==="self"||A.edgeType==="compound"||A.edgeType==="segments"||A.edgeType==="haystack"){for(var R=L.rstyle.bezierPts||L.rstyle.linePts||L.rstyle.haystackPts,C=!0,D=0;D<R.length;D++)if(!_Et(d,R[D])){C=!1;break}C&&o.push(E)}else(A.edgeType==="haystack"||A.edgeType==="straight")&&o.push(E)}}return o};var Im={};Im.calculateArrowAngles=function(e){var t=e._private.rscratch,r=t.edgeType==="haystack",n=t.edgeType==="bezier",i=t.edgeType==="multibezier",a=t.edgeType==="segments",s=t.edgeType==="compound",o=t.edgeType==="self",l,u,h,f,d,g,y,b;if(r?(h=t.haystackPts[0],f=t.haystackPts[1],d=t.haystackPts[2],g=t.haystackPts[3]):(h=t.arrowStartX,f=t.arrowStartY,d=t.arrowEndX,g=t.arrowEndY),y=t.midX,b=t.midY,a)l=h-t.segpts[0],u=f-t.segpts[1];else if(i||s||o||n){var p=t.allpts,v=mn(p[0],p[2],p[4],.1),m=mn(p[1],p[3],p[5],.1);l=h-v,u=f-m}else l=h-y,u=f-b;t.srcArrowAngle=R0(l,u);var y=t.midX,b=t.midY;if(r&&(y=(h+d)/2,b=(f+g)/2),l=d-h,u=g-f,a){var p=t.allpts;if(p.length/2%2===0){var T=p.length/2,w=T-2;l=p[T]-p[w],u=p[T+1]-p[w+1]}else if(t.isRound)l=t.midVector[1],u=-t.midVector[0];else{var T=p.length/2-1,w=T-2;l=p[T]-p[w],u=p[T+1]-p[w+1]}}else if(i||s||o){var p=t.allpts,k=t.ctrlpts,S,E,L,A;if(k.length/2%2===0){var R=p.length/2-1,C=R+2,D=C+2;S=mn(p[R],p[C],p[D],0),E=mn(p[R+1],p[C+1],p[D+1],0),L=mn(p[R],p[C],p[D],1e-4),A=mn(p[R+1],p[C+1],p[D+1],1e-4)}else{var C=p.length/2-1,R=C-2,D=C+2;S=mn(p[R],p[C],p[D],.4999),E=mn(p[R+1],p[C+1],p[D+1],.4999),L=mn(p[R],p[C],p[D],.5),A=mn(p[R+1],p[C+1],p[D+1],.5)}l=L-S,u=A-E}if(t.midtgtArrowAngle=R0(l,u),t.midDispX=l,t.midDispY=u,l*=-1,u*=-1,a){var p=t.allpts;if(p.length/2%2!==0){if(!t.isRound){var T=p.length/2-1,P=T+2;l=-(p[P]-p[T]),u=-(p[P+1]-p[T+1])}}}if(t.midsrcArrowAngle=R0(l,u),a)l=d-t.segpts[t.segpts.length-2],u=g-t.segpts[t.segpts.length-1];else if(i||s||o||n){var p=t.allpts,_=p.length,v=mn(p[_-6],p[_-4],p[_-2],.9),m=mn(p[_-5],p[_-3],p[_-1],.9);l=d-v,u=g-m}else l=d-y,u=g-b;t.tgtArrowAngle=R0(l,u)};Im.getArrowWidth=Im.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[e+", "+t];return n||(n=Math.max(Math.pow(e*13.37,.9),29)*t,r[e+", "+t]=n,n)};var jE,KE,Ka={},sa={},vN,mN,Ll,$1,Ss,vl,wl,Ha,Yc,F0,_G,AG,ZE,QE,yN,xN=function(t,r,n){n.x=r.x-t.x,n.y=r.y-t.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},KSt=function(t,r){r.x=t.x*-1,r.y=t.y*-1,r.nx=t.nx*-1,r.ny=t.ny*-1,r.ang=t.ang>0?-(Math.PI-t.ang):Math.PI+t.ang},ZSt=function(t,r,n,i,a){if(t!==yN?xN(r,t,Ka):KSt(sa,Ka),xN(r,n,sa),vN=Ka.nx*sa.ny-Ka.ny*sa.nx,mN=Ka.nx*sa.nx-Ka.ny*-sa.ny,Ss=Math.asin(Math.max(-1,Math.min(1,vN))),Math.abs(Ss)<1e-6){jE=r.x,KE=r.y,wl=Yc=0;return}Ll=1,$1=!1,mN<0?Ss<0?Ss=Math.PI+Ss:(Ss=Math.PI-Ss,Ll=-1,$1=!0):Ss>0&&(Ll=-1,$1=!0),r.radius!==void 0?Yc=r.radius:Yc=i,vl=Ss/2,F0=Math.min(Ka.len/2,sa.len/2),a?(Ha=Math.abs(Math.cos(vl)*Yc/Math.sin(vl)),Ha>F0?(Ha=F0,wl=Math.abs(Ha*Math.sin(vl)/Math.cos(vl))):wl=Yc):(Ha=Math.min(F0,Yc),wl=Math.abs(Ha*Math.sin(vl)/Math.cos(vl))),ZE=r.x+sa.nx*Ha,QE=r.y+sa.ny*Ha,jE=ZE-sa.ny*wl*Ll,KE=QE+sa.nx*wl*Ll,_G=r.x+Ka.nx*Ha,AG=r.y+Ka.ny*Ha,yN=r};function LG(e,t){t.radius===0?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function L_(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||t.radius===0?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(ZSt(e,t,r,n,i),{cx:jE,cy:KE,radius:wl,startX:_G,startY:AG,stopX:ZE,stopY:QE,startAngle:Ka.ang+Math.PI/2*Ll,endAngle:sa.ang-Math.PI/2*Ll,counterClockwise:$1})}var qg=.01,QSt=Math.sqrt(2*qg),ti={};ti.findMidptPtsEtc=function(e,t){var r=t.posPts,n=t.intersectionPts,i=t.vectorNormInverse,a,s=e.pstyle("source-endpoint"),o=e.pstyle("target-endpoint"),l=s.units!=null&&o.units!=null,u=function(k,S,E,L){var A=L-S,R=E-k,C=Math.sqrt(R*R+A*A);return{x:-A/C,y:R/C}},h=e.pstyle("edge-distances").value;switch(h){case"node-position":a=r;break;case"intersection":a=n;break;case"endpoints":{if(l){var f=this.manualEndptToPx(e.source()[0],s),d=tn(f,2),g=d[0],p=d[1],v=this.manualEndptToPx(e.target()[0],o),m=tn(v,2),y=m[0],b=m[1],T={x1:g,y1:p,x2:y,y2:b};i=u(g,p,y,b),a=T}else or("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=n;break}}return{midptPts:a,vectorNormInverse:i}};ti.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r._private,i=n.rscratch;if(!i.haystack){var a=Math.random()*2*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var s=n.source,o=n.target,l=s.position(),u=o.position(),h=s.width(),f=o.width(),d=s.height(),g=o.height(),p=r.pstyle("haystack-radius").value,v=p/2;i.haystackPts=i.allpts=[i.source.x*h*v+l.x,i.source.y*d*v+l.y,i.target.x*f*v+u.x,i.target.y*g*v+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};ti.findSegmentsPoints=function(e,t){var r=e._private.rscratch,n=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),a=e.pstyle("segment-radii"),s=e.pstyle("radius-type"),o=Math.min(n.pfValue.length,i.pfValue.length),l=a.pfValue[a.pfValue.length-1],u=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var h=0;h<o;h++){var f=n.pfValue[h],d=i.pfValue[h],g=1-f,p=f,v=this.findMidptPtsEtc(e,t),m=v.midptPts,y=v.vectorNormInverse,b={x:m.x1*g+m.x2*p,y:m.y1*g+m.y2*p};r.segpts.push(b.x+y.x*d,b.y+y.y*d),r.radii.push(a.pfValue[h]!==void 0?a.pfValue[h]:l),r.isArcRadius.push((s.pfValue[h]!==void 0?s.pfValue[h]:u)==="arc-radius")}};ti.findLoopPoints=function(e,t,r,n){var i=e._private.rscratch,a=t.dirCounts,s=t.srcPos,o=e.pstyle("control-point-distances"),l=o?o.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,h=e.pstyle("loop-sweep").pfValue,f=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=r,g=f;n&&(d=0,g=l);var p=u-Math.PI/2,v=p-h/2,m=p+h/2,y=u+"_"+h;d=a[y]===void 0?a[y]=0:++a[y],i.ctrlpts=[s.x+Math.cos(v)*1.4*g*(d/3+1),s.y+Math.sin(v)*1.4*g*(d/3+1),s.x+Math.cos(m)*1.4*g*(d/3+1),s.y+Math.sin(m)*1.4*g*(d/3+1)]};ti.findCompoundLoopPoints=function(e,t,r,n){var i=e._private.rscratch;i.edgeType="compound";var a=t.srcPos,s=t.tgtPos,o=t.srcW,l=t.srcH,u=t.tgtW,h=t.tgtH,f=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),g=d?d.pfValue[0]:void 0,p=r,v=f;n&&(p=0,v=g);var m=50,y={x:a.x-o/2,y:a.y-l/2},b={x:s.x-u/2,y:s.y-h/2},T={x:Math.min(y.x,b.x),y:Math.min(y.y,b.y)},w=.5,k=Math.max(w,Math.log(o*qg)),S=Math.max(w,Math.log(u*qg));i.ctrlpts=[T.x,T.y-(1+Math.pow(m,1.12)/100)*v*(p/3+1)*k,T.x-(1+Math.pow(m,1.12)/100)*v*(p/3+1)*S,T.y]};ti.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"};ti.findBezierPoints=function(e,t,r,n,i){var a=e._private.rscratch,s=e.pstyle("control-point-step-size").pfValue,o=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),u=o&&l?Math.min(o.value.length,l.value.length):1,h=o?o.pfValue[0]:void 0,f=l.value[0],d=n;a.edgeType=d?"multibezier":"bezier",a.ctrlpts=[];for(var g=0;g<u;g++){var p=(.5-t.eles.length/2+r)*s*(i?-1:1),v=void 0,m=v_(p);d&&(h=o?o.pfValue[g]:s,f=l.value[g]),n?v=h:v=h!==void 0?m*h:void 0;var y=v!==void 0?v:p,b=1-f,T=f,w=this.findMidptPtsEtc(e,t),k=w.midptPts,S=w.vectorNormInverse,E={x:k.x1*b+k.x2*T,y:k.y1*b+k.y2*T};a.ctrlpts.push(E.x+S.x*y,E.y+S.y*y)}};ti.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var n="vertical",i="horizontal",a="leftward",s="rightward",o="downward",l="upward",u="auto",h=t.posPts,f=t.srcW,d=t.srcH,g=t.tgtW,p=t.tgtH,v=e.pstyle("edge-distances").value,m=v!=="node-position",y=e.pstyle("taxi-direction").value,b=y,T=e.pstyle("taxi-turn"),w=T.units==="%",k=T.pfValue,S=k<0,E=e.pstyle("taxi-turn-min-distance").pfValue,L=m?(f+g)/2:0,A=m?(d+p)/2:0,R=h.x2-h.x1,C=h.y2-h.y1,D=function($,nt){return $>0?Math.max($-nt,0):Math.min($+nt,0)},P=D(R,L),_=D(C,A),I=!1;b===u?y=Math.abs(P)>Math.abs(_)?i:n:b===l||b===o?(y=n,I=!0):(b===a||b===s)&&(y=i,I=!0);var M=y===n,O=M?_:P,N=M?C:R,B=v_(N),z=!1;!(I&&(w||S))&&(b===o&&N<0||b===l&&N>0||b===a&&N>0||b===s&&N<0)&&(B*=-1,O=B*Math.abs(O),z=!0);var F;if(w){var V=k<0?1+k:k;F=V*O}else{var G=k<0?O:0;F=G+k*B}var Y=function($){return Math.abs($)<E||Math.abs($)>=Math.abs(O)},Q=Y(F),K=Y(Math.abs(O)-Math.abs(F)),it=Q||K;if(it&&!z)if(M){var ut=Math.abs(N)<=d/2,q=Math.abs(R)<=g/2;if(ut){var W=(h.x1+h.x2)/2,H=h.y1,U=h.y2;r.segpts=[W,H,W,U]}else if(q){var X=(h.y1+h.y2)/2,J=h.x1,j=h.x2;r.segpts=[J,X,j,X]}else r.segpts=[h.x1,h.y2]}else{var gt=Math.abs(N)<=f/2,at=Math.abs(C)<=p/2;if(gt){var tt=(h.y1+h.y2)/2,kt=h.x1,ft=h.x2;r.segpts=[kt,tt,ft,tt]}else if(at){var Dt=(h.x1+h.x2)/2,Ot=h.y1,Rt=h.y2;r.segpts=[Dt,Ot,Dt,Rt]}else r.segpts=[h.x2,h.y1]}else if(M){var Tt=h.y1+F+(m?d/2*B:0),At=h.x1,bt=h.x2;r.segpts=[At,Tt,bt,Tt]}else{var wt=h.x1+F+(m?f/2*B:0),Nt=h.y1,ht=h.y2;r.segpts=[wt,Nt,wt,ht]}if(r.isRound){var _t=e.pstyle("taxi-radius").value,Z=e.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(_t),r.isArcRadius=new Array(r.segpts.length/2).fill(Z)}};ti.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if(r.edgeType==="bezier"){var n=t.srcPos,i=t.tgtPos,a=t.srcW,s=t.srcH,o=t.tgtW,l=t.tgtH,u=t.srcShape,h=t.tgtShape,f=t.srcCornerRadius,d=t.tgtCornerRadius,g=t.srcRs,p=t.tgtRs,v=!ne(r.startX)||!ne(r.startY),m=!ne(r.arrowStartX)||!ne(r.arrowStartY),y=!ne(r.endX)||!ne(r.endY),b=!ne(r.arrowEndX)||!ne(r.arrowEndY),T=3,w=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth,k=T*w,S=uc({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),E=S<k,L=uc({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),A=L<k,R=!1;if(v||m||E){R=!0;var C={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},D=Math.sqrt(C.x*C.x+C.y*C.y),P={x:C.x/D,y:C.y/D},_=Math.max(a,s),I={x:r.ctrlpts[0]+P.x*2*_,y:r.ctrlpts[1]+P.y*2*_},M=u.intersectLine(n.x,n.y,a,s,I.x,I.y,0,f,g);E?(r.ctrlpts[0]=r.ctrlpts[0]+P.x*(k-S),r.ctrlpts[1]=r.ctrlpts[1]+P.y*(k-S)):(r.ctrlpts[0]=M[0]+P.x*k,r.ctrlpts[1]=M[1]+P.y*k)}if(y||b||A){R=!0;var O={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},N=Math.sqrt(O.x*O.x+O.y*O.y),B={x:O.x/N,y:O.y/N},z=Math.max(a,s),F={x:r.ctrlpts[0]+B.x*2*z,y:r.ctrlpts[1]+B.y*2*z},V=h.intersectLine(i.x,i.y,o,l,F.x,F.y,0,d,p);A?(r.ctrlpts[0]=r.ctrlpts[0]+B.x*(k-L),r.ctrlpts[1]=r.ctrlpts[1]+B.y*(k-L)):(r.ctrlpts[0]=V[0]+B.x*k,r.ctrlpts[1]=V[1]+B.y*k)}R&&this.findEndpoints(e)}};ti.storeAllpts=function(e){var t=e._private.rscratch;if(t.edgeType==="multibezier"||t.edgeType==="bezier"||t.edgeType==="self"||t.edgeType==="compound"){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);t.allpts.push(t.endX,t.endY);var n,i;t.ctrlpts.length/2%2===0?(n=t.allpts.length/2-1,t.midX=t.allpts[n],t.midY=t.allpts[n+1]):(n=t.allpts.length/2-3,i=.5,t.midX=mn(t.allpts[n],t.allpts[n+2],t.allpts[n+4],i),t.midY=mn(t.allpts[n+1],t.allpts[n+3],t.allpts[n+5],i))}else if(t.edgeType==="straight")t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if(t.edgeType==="segments"){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var a=2;a+3<t.allpts.length;a+=2){var s=t.radii[a/2-1],o=t.isArcRadius[a/2-1];t.roundCorners.push(L_({x:t.allpts[a-2],y:t.allpts[a-1]},{x:t.allpts[a],y:t.allpts[a+1],radius:s},{x:t.allpts[a+2],y:t.allpts[a+3]},s,o))}}if(t.segpts.length%4===0){var l=t.segpts.length/2,u=l-2;t.midX=(t.segpts[u]+t.segpts[l])/2,t.midY=(t.segpts[u+1]+t.segpts[l+1])/2}else{var h=t.segpts.length/2-1;if(!t.isRound)t.midX=t.segpts[h],t.midY=t.segpts[h+1];else{var f={x:t.segpts[h],y:t.segpts[h+1]},d=t.roundCorners[h/2];if(d.radius===0){var g={x:t.segpts[h+2],y:t.segpts[h+3]};t.midX=f.x,t.midY=f.y,t.midVector=[f.y-g.y,g.x-f.x]}else{var p=[f.x-d.cx,f.y-d.cy],v=d.radius/Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2));p=p.map(function(m){return m*v}),t.midX=d.cx+p[0],t.midY=d.cy+p[1],t.midVector=p}}}}};ti.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||ne(t.startX)&&ne(t.startY)&&ne(t.endX)&&ne(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,or("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};ti.findEdgeControlPoints=function(e){var t=this;if(!(!e||e.length===0)){for(var r=this,n=r.cy,i=n.hasCompoundNodes(),a=new Ws,s=function(A,R){return[].concat(Tm(A),[R?1:0]).join("-")},o=[],l=[],u=0;u<e.length;u++){var h=e[u],f=h._private,d=h.pstyle("curve-style").value;if(!(h.removed()||!h.takesUpSpace())){if(d==="haystack"){l.push(h);continue}var g=d==="unbundled-bezier"||d.endsWith("segments")||d==="straight"||d==="straight-triangle"||d.endsWith("taxi"),p=d==="unbundled-bezier"||d==="bezier",v=f.source,m=f.target,y=v.poolIndex(),b=m.poolIndex(),T=[y,b].sort(),w=s(T,g),k=a.get(w);k==null&&(k={eles:[]},o.push({pairId:T,edgeIsUnbundled:g}),a.set(w,k)),k.eles.push(h),g&&(k.hasUnbundled=!0),p&&(k.hasBezier=!0)}}for(var S=function(){var A=o[E],R=A.pairId,C=A.edgeIsUnbundled,D=s(R,C),P=a.get(D),_;if(!P.hasUnbundled){var I=P.eles[0].parallelEdges().filter(function(Z){return Z.isBundledBezier()});g_(P.eles),I.forEach(function(Z){return P.eles.push(Z)}),P.eles.sort(function(Z,st){return Z.poolIndex()-st.poolIndex()})}var M=P.eles[0],O=M.source(),N=M.target();if(O.poolIndex()>N.poolIndex()){var B=O;O=N,N=B}var z=P.srcPos=O.position(),F=P.tgtPos=N.position(),V=P.srcW=O.outerWidth(),G=P.srcH=O.outerHeight(),Y=P.tgtW=N.outerWidth(),Q=P.tgtH=N.outerHeight(),K=P.srcShape=r.nodeShapes[t.getNodeShape(O)],it=P.tgtShape=r.nodeShapes[t.getNodeShape(N)],ut=P.srcCornerRadius=O.pstyle("corner-radius").value==="auto"?"auto":O.pstyle("corner-radius").pfValue,q=P.tgtCornerRadius=N.pstyle("corner-radius").value==="auto"?"auto":N.pstyle("corner-radius").pfValue,W=P.tgtRs=N._private.rscratch,H=P.srcRs=O._private.rscratch;P.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var U=0;U<P.eles.length;U++){var X=P.eles[U],J=X[0]._private.rscratch,j=X.pstyle("curve-style").value,gt=j==="unbundled-bezier"||j.endsWith("segments")||j.endsWith("taxi"),at=!O.same(X.source());if(!P.calculatedIntersection&&O!==N&&(P.hasBezier||P.hasUnbundled)){P.calculatedIntersection=!0;var tt=K.intersectLine(z.x,z.y,V,G,F.x,F.y,0,ut,H),kt=P.srcIntn=tt,ft=it.intersectLine(F.x,F.y,Y,Q,z.x,z.y,0,q,W),Dt=P.tgtIntn=ft,Ot=P.intersectionPts={x1:tt[0],x2:ft[0],y1:tt[1],y2:ft[1]},Rt=P.posPts={x1:z.x,x2:F.x,y1:z.y,y2:F.y},Tt=ft[1]-tt[1],At=ft[0]-tt[0],bt=Math.sqrt(At*At+Tt*Tt);ne(bt)&&bt>=QSt||(bt=Math.sqrt(Math.max(At*At,qg)+Math.max(Tt*Tt,qg)));var wt=P.vector={x:At,y:Tt},Nt=P.vectorNorm={x:wt.x/bt,y:wt.y/bt},ht={x:-Nt.y,y:Nt.x};P.nodesOverlap=!ne(bt)||it.checkPoint(tt[0],tt[1],0,Y,Q,F.x,F.y,q,W)||K.checkPoint(ft[0],ft[1],0,V,G,z.x,z.y,ut,H),P.vectorNormInverse=ht,_={nodesOverlap:P.nodesOverlap,dirCounts:P.dirCounts,calculatedIntersection:!0,hasBezier:P.hasBezier,hasUnbundled:P.hasUnbundled,eles:P.eles,srcPos:F,srcRs:W,tgtPos:z,tgtRs:H,srcW:Y,srcH:Q,tgtW:V,tgtH:G,srcIntn:Dt,tgtIntn:kt,srcShape:it,tgtShape:K,posPts:{x1:Rt.x2,y1:Rt.y2,x2:Rt.x1,y2:Rt.y1},intersectionPts:{x1:Ot.x2,y1:Ot.y2,x2:Ot.x1,y2:Ot.y1},vector:{x:-wt.x,y:-wt.y},vectorNorm:{x:-Nt.x,y:-Nt.y},vectorNormInverse:{x:-ht.x,y:-ht.y}}}var _t=at?_:P;J.nodesOverlap=_t.nodesOverlap,J.srcIntn=_t.srcIntn,J.tgtIntn=_t.tgtIntn,J.isRound=j.startsWith("round"),i&&(O.isParent()||O.isChild()||N.isParent()||N.isChild())&&(O.parents().anySame(N)||N.parents().anySame(O)||O.same(N)&&O.isParent())?t.findCompoundLoopPoints(X,_t,U,gt):O===N?t.findLoopPoints(X,_t,U,gt):j.endsWith("segments")?t.findSegmentsPoints(X,_t):j.endsWith("taxi")?t.findTaxiPoints(X,_t):j==="straight"||!gt&&P.eles.length%2===1&&U===Math.floor(P.eles.length/2)?t.findStraightEdgePoints(X):t.findBezierPoints(X,_t,U,gt,at),t.findEndpoints(X),t.tryToCorrectInvalidPoints(X,_t),t.checkForInvalidEdgeWarning(X),t.storeAllpts(X),t.storeEdgeProjections(X),t.calculateArrowAngles(X),t.recalculateEdgeLabelProjections(X),t.calculateLabelAngles(X)}},E=0;E<o.length;E++)S();this.findHaystackPoints(l)}};function RG(e){var t=[];if(e!=null){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];t.push({x:n,y:i})}return t}}ti.getSegmentPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if(r==="segments")return RG(t.segpts)};ti.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return RG(t.ctrlpts)};ti.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var zp={};zp.manualEndptToPx=function(e,t){var r=this,n=e.position(),i=e.outerWidth(),a=e.outerHeight(),s=e._private.rscratch;if(t.value.length===2){var o=[t.pfValue[0],t.pfValue[1]];return t.units[0]==="%"&&(o[0]=o[0]*i),t.units[1]==="%"&&(o[1]=o[1]*a),o[0]+=n.x,o[1]+=n.y,o}else{var l=t.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(i,a),h=[n.x+Math.cos(l)*u,n.y+Math.sin(l)*u];return r.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,i,a,h[0],h[1],0,e.pstyle("corner-radius").value==="auto"?"auto":e.pstyle("corner-radius").pfValue,s)}};zp.findEndpoints=function(e){var t=this,r,n=e.source()[0],i=e.target()[0],a=n.position(),s=i.position(),o=e.pstyle("target-arrow-shape").value,l=e.pstyle("source-arrow-shape").value,u=e.pstyle("target-distance-from-node").pfValue,h=e.pstyle("source-distance-from-node").pfValue,f=n._private.rscratch,d=i._private.rscratch,g=e.pstyle("curve-style").value,p=e._private.rscratch,v=p.edgeType,m=g==="taxi",y=v==="self"||v==="compound",b=v==="bezier"||v==="multibezier"||y,T=v!=="bezier",w=v==="straight"||v==="segments",k=v==="segments",S=b||T||w,E=y||m,L=e.pstyle("source-endpoint"),A=E?"outside-to-node":L.value,R=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,C=e.pstyle("target-endpoint"),D=E?"outside-to-node":C.value,P=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue;p.srcManEndpt=L,p.tgtManEndpt=C;var _,I,M,O;if(b){var N=[p.ctrlpts[0],p.ctrlpts[1]],B=T?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:N;_=B,I=N}else if(w){var z=k?p.segpts.slice(0,2):[s.x,s.y],F=k?p.segpts.slice(p.segpts.length-2):[a.x,a.y];_=F,I=z}if(D==="inside-to-node")r=[s.x,s.y];else if(C.units)r=this.manualEndptToPx(i,C);else if(D==="outside-to-line")r=p.tgtIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?M=_:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(M=[a.x,a.y]),r=t.nodeShapes[this.getNodeShape(i)].intersectLine(s.x,s.y,i.outerWidth(),i.outerHeight(),M[0],M[1],0,P,d),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var V=i._private.rscratch,G=V.labelWidth,Y=V.labelHeight,Q=V.labelX,K=V.labelY,it=G/2,ut=Y/2,q=i.pstyle("text-valign").value;q==="top"?K-=ut:q==="bottom"&&(K+=ut);var W=i.pstyle("text-halign").value;W==="left"?Q-=it:W==="right"&&(Q+=it);var H=Gg(M[0],M[1],[Q-it,K-ut,Q+it,K-ut,Q+it,K+ut,Q-it,K+ut],s.x,s.y);if(H.length>0){var U=a,X=bl(U,su(r)),J=bl(U,su(H)),j=X;if(J<X&&(r=H,j=J),H.length>2){var gt=bl(U,{x:H[2],y:H[3]});gt<j&&(r=[H[2],H[3]])}}}var at=I0(r,_,t.arrowShapes[o].spacing(e)+u),tt=I0(r,_,t.arrowShapes[o].gap(e)+u);if(p.endX=tt[0],p.endY=tt[1],p.arrowEndX=at[0],p.arrowEndY=at[1],A==="inside-to-node")r=[a.x,a.y];else if(L.units)r=this.manualEndptToPx(n,L);else if(A==="outside-to-line")r=p.srcIntn;else if(A==="outside-to-node"||A==="outside-to-node-or-label"?O=I:(A==="outside-to-line"||A==="outside-to-line-or-label")&&(O=[s.x,s.y]),r=t.nodeShapes[this.getNodeShape(n)].intersectLine(a.x,a.y,n.outerWidth(),n.outerHeight(),O[0],O[1],0,R,f),A==="outside-to-node-or-label"||A==="outside-to-line-or-label"){var kt=n._private.rscratch,ft=kt.labelWidth,Dt=kt.labelHeight,Ot=kt.labelX,Rt=kt.labelY,Tt=ft/2,At=Dt/2,bt=n.pstyle("text-valign").value;bt==="top"?Rt-=At:bt==="bottom"&&(Rt+=At);var wt=n.pstyle("text-halign").value;wt==="left"?Ot-=Tt:wt==="right"&&(Ot+=Tt);var Nt=Gg(O[0],O[1],[Ot-Tt,Rt-At,Ot+Tt,Rt-At,Ot+Tt,Rt+At,Ot-Tt,Rt+At],a.x,a.y);if(Nt.length>0){var ht=s,_t=bl(ht,su(r)),Z=bl(ht,su(Nt)),st=_t;if(Z<_t&&(r=[Nt[0],Nt[1]],st=Z),Nt.length>2){var $=bl(ht,{x:Nt[2],y:Nt[3]});$<st&&(r=[Nt[2],Nt[3]])}}}var nt=I0(r,I,t.arrowShapes[l].spacing(e)+h),rt=I0(r,I,t.arrowShapes[l].gap(e)+h);p.startX=rt[0],p.startY=rt[1],p.arrowStartX=nt[0],p.arrowStartY=nt[1],S&&(!ne(p.startX)||!ne(p.startY)||!ne(p.endX)||!ne(p.endY)?p.badLine=!0:p.badLine=!1)};zp.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}};zp.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}};var R_={};function JSt(e,t,r){for(var n=function(u,h,f,d){return mn(u,h,f,d)},i=t._private,a=i.rstyle.bezierPts,s=0;s<e.bezierProjPcts.length;s++){var o=e.bezierProjPcts[s];a.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}R_.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,n=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){t.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)JSt(this,e,r.allpts.slice(i,i+6))}else if(n==="segments")for(var a=t.rstyle.linePts=[],i=0;i+1<r.allpts.length;i+=2)a.push({x:r.allpts[i],y:r.allpts[i+1]});else if(n==="haystack"){var s=r.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth};R_.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var xs={};xs.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(!Wo(t)){var r,n,i=e._private,a=e.width(),s=e.height(),o=e.padding(),l=e.position(),u=e.pstyle("text-halign").strValue,h=e.pstyle("text-valign").strValue,f=i.rscratch,d=i.rstyle;switch(u){case"left":r=l.x-a/2-o;break;case"right":r=l.x+a/2+o;break;default:r=l.x}switch(h){case"top":n=l.y-s/2-o;break;case"bottom":n=l.y+s/2+o;break;default:n=l.y}f.labelX=r,f.labelY=n,d.labelX=r,d.labelY=n,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}};var IG=function(t,r){var n=Math.atan(r/t);return t===0&&n<0&&(n=n*-1),n},NG=function(t,r){var n=r.x-t.x,i=r.y-t.y;return IG(n,i)},t_t=function(t,r,n,i){var a=Vg(0,i-.001,1),s=Vg(0,i+.001,1),o=bu(t,r,n,a),l=bu(t,r,n,s);return NG(o,l)};xs.recalculateEdgeLabelProjections=function(e){var t,r=e._private,n=r.rscratch,i=this,a={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(a.mid||a.source||a.target){t={x:n.midX,y:n.midY};var s=function(f,d,g){Ms(r.rscratch,f,d,g),Ms(r.rstyle,f,d,g)};s("labelX",null,t.x),s("labelY",null,t.y);var o=IG(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var l=function(){if(l.cache)return l.cache;for(var f=[],d=0;d+5<n.allpts.length;d+=4){var g={x:n.allpts[d],y:n.allpts[d+1]},p={x:n.allpts[d+2],y:n.allpts[d+3]},v={x:n.allpts[d+4],y:n.allpts[d+5]};f.push({p0:g,p1:p,p2:v,startDist:0,length:0,segments:[]})}var m=r.rstyle.bezierPts,y=i.bezierProjPcts.length;function b(E,L,A,R,C){var D=uc(L,A),P=E.segments[E.segments.length-1],_={p0:L,p1:A,t0:R,t1:C,startDist:P?P.startDist+P.length:0,length:D};E.segments.push(_),E.length+=D}for(var T=0;T<f.length;T++){var w=f[T],k=f[T-1];k&&(w.startDist=k.startDist+k.length),b(w,w.p0,m[T*y],0,i.bezierProjPcts[0]);for(var S=0;S<y-1;S++)b(w,m[T*y+S],m[T*y+S+1],i.bezierProjPcts[S],i.bezierProjPcts[S+1]);b(w,m[T*y+y-1],w.p2,i.bezierProjPcts[y-1],1)}return l.cache=f},u=function(f){var d,g=f==="source";if(a[f]){var p=e.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var v=l(),m,y=0,b=0,T=0;T<v.length;T++){for(var w=v[g?T:v.length-1-T],k=0;k<w.segments.length;k++){var S=w.segments[g?k:w.segments.length-1-k],E=T===v.length-1&&k===w.segments.length-1;if(y=b,b+=S.length,b>=p||E){m={cp:w,segment:S};break}}if(m)break}var L=m.cp,A=m.segment,R=(p-y)/A.length,C=A.t1-A.t0,D=g?A.t0+C*R:A.t1-C*R;D=Vg(0,D,1),t=bu(L.p0,L.p1,L.p2,D),d=t_t(L.p0,L.p1,L.p2,D);break}case"straight":case"segments":case"haystack":{for(var P=0,_,I,M,O,N=n.allpts.length,B=0;B+3<N&&(g?(M={x:n.allpts[B],y:n.allpts[B+1]},O={x:n.allpts[B+2],y:n.allpts[B+3]}):(M={x:n.allpts[N-2-B],y:n.allpts[N-1-B]},O={x:n.allpts[N-4-B],y:n.allpts[N-3-B]}),_=uc(M,O),I=P,P+=_,!(P>=p));B+=2);var z=p-I,F=z/_;F=Vg(0,F,1),t=wEt(M,O,F),d=NG(M,O);break}}s("labelX",f,t.x),s("labelY",f,t.y),s("labelAutoAngle",f,d)}};u("source"),u("target"),this.applyLabelDimensions(e)}};xs.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))};xs.applyPrefixedLabelDimensions=function(e,t){var r=e._private,n=this.getLabelText(e,t),i=cc(n,e._private.labelDimsKey);if(Ei(r.rscratch,"prefixedLabelDimsKey",t)!==i){Ms(r.rscratch,"prefixedLabelDimsKey",t,i);var a=this.calculateLabelDimensions(e,n),s=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,l=Ei(r.rscratch,"labelWrapCachedLines",t)||[],u=o!=="wrap"?1:Math.max(l.length,1),h=a.height/u,f=h*s,d=a.width,g=a.height+(u-1)*(s-1)*h;Ms(r.rstyle,"labelWidth",t,d),Ms(r.rscratch,"labelWidth",t,d),Ms(r.rstyle,"labelHeight",t,g),Ms(r.rscratch,"labelHeight",t,g),Ms(r.rscratch,"labelLineHeight",t,f)}};xs.getLabelText=function(e,t){var r=e._private,n=t?t+"-":"",i=e.pstyle(n+"label").strValue,a=e.pstyle("text-transform").value,s=function(G,Y){return Y?(Ms(r.rscratch,G,t,Y),Y):Ei(r.rscratch,G,t)};if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var o=e.pstyle("text-wrap").value;if(o==="wrap"){var l=s("labelKey");if(l!=null&&s("labelWrapKey")===l)return s("labelWrapCachedText");for(var u="​",h=i.split(`
`),f=e.pstyle("text-max-width").pfValue,d=e.pstyle("text-overflow-wrap").value,g=d==="anywhere",p=[],v=/[\s\u200b]+|$/g,m=0;m<h.length;m++){var y=h[m],b=this.calculateLabelDimensions(e,y),T=b.width;if(g){var w=y.split("").join(u);y=w}if(T>f){var k=y.matchAll(v),S="",E=0,L=_i(k),A;try{for(L.s();!(A=L.n()).done;){var R=A.value,C=R[0],D=y.substring(E,R.index);E=R.index+C.length;var P=S.length===0?D:S+D+C,_=this.calculateLabelDimensions(e,P),I=_.width;I<=f?S+=D+C:(S&&p.push(S),S=D+C)}}catch(V){L.e(V)}finally{L.f()}S.match(/^[\s\u200b]+$/)||p.push(S)}else p.push(y)}s("labelWrapCachedLines",p),i=s("labelWrapCachedText",p.join(`
`)),s("labelWrapKey",l)}else if(o==="ellipsis"){var M=e.pstyle("text-max-width").pfValue,O="",N="…",B=!1;if(this.calculateLabelDimensions(e,i).width<M)return i;for(var z=0;z<i.length;z++){var F=this.calculateLabelDimensions(e,O+i[z]+N).width;if(F>M)break;O+=i[z],z===i.length-1&&(B=!0)}return B||(O+=N),O}return i};xs.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if(t==="auto")if(e.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return t};xs.calculateLabelDimensions=function(e,t){var r=this,n=r.cy.window(),i=n.document,a=0,s=e.pstyle("font-style").strValue,o=e.pstyle("font-size").pfValue,l=e.pstyle("font-family").strValue,u=e.pstyle("font-weight").strValue,h=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=i.createElement("canvas"),f=this.labelCalcCanvasContext=h.getContext("2d");var d=h.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}f.font="".concat(s," ").concat(u," ").concat(o,"px ").concat(l);for(var g=0,p=0,v=t.split(`
`),m=0;m<v.length;m++){var y=v[m],b=f.measureText(y),T=Math.ceil(b.width),w=o;g=Math.max(T,g),p+=w}return g+=a,p+=a,{width:g,height:p}};xs.calculateLabelAngle=function(e,t){var r=e._private,n=r.rscratch,i=e.isEdge(),a=t?t+"-":"",s=e.pstyle(a+"text-rotation"),o=s.strValue;return o==="none"?0:i&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:s.pfValue};xs.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),n=e._private,i=n.rscratch;i.labelAngle=t.calculateLabelAngle(e),r&&(i.sourceLabelAngle=t.calculateLabelAngle(e,"source"),i.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var DG={},bN=28,TN=!1;DG.getNodeShape=function(e){var t=this,r=e.pstyle("shape").value;if(r==="cutrectangle"&&(e.width()<bN||e.height()<bN))return TN||(or("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),TN=!0),"rectangle";if(e.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(n).name}return r};var p2={};p2.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),r=this,n=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.merge(s),o)for(var l=0;l<s.length;l++){var u=s[l],h=u._private,f=h.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",function(s){var o=s.target;n(o)}).on("style.* background.*",function(s){var o=s.target;n(o,!1)});var i=function(s){if(s){var o=r.onUpdateEleCalcsFns;t.cleanStyle();for(var l=0;l<t.length;l++){var u=t[l],h=u._private.rstyle;u.isNode()&&!h.cleanConnected&&(n(u.connectedEdges()),h.cleanConnected=!0)}if(o)for(var f=0;f<o.length;f++){var d=o[f];d(s,t)}r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)};p2.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)};p2.recalculateRenderedStyle=function(e,t){var r=function(w){return w._private.rstyle.cleanConnected};if(e.length!==0){var n=[],i=[];if(!this.destroyed){t===void 0&&(t=!0);for(var a=0;a<e.length;a++){var s=e[a],o=s._private,l=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(l.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(T){return!T._private.rstyle.clean&&T.isBundledBezier()})&&(l.clean=!1),!(t&&l.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?i.push(s):n.push(s),l.clean=!0)}for(var u=0;u<i.length;u++){var h=i[u],f=h._private,d=f.rstyle,g=h.position();this.recalculateNodeLabelProjection(h),d.nodeX=g.x,d.nodeY=g.y,d.nodeW=h.pstyle("width").pfValue,d.nodeH=h.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var p=0;p<n.length;p++){var v=n[p],m=v._private,y=m.rstyle,b=m.rscratch;y.srcX=b.arrowStartX,y.srcY=b.arrowStartY,y.tgtX=b.arrowEndX,y.tgtY=b.arrowEndY,y.midX=b.midX,y.midY=b.midY,y.labelAngle=b.labelAngle,y.sourceLabelAngle=b.sourceLabelAngle,y.targetLabelAngle=b.targetLabelAngle}}}};var v2={};v2.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var n=e[r],i=n._private.rscratch;n.grabbed()&&!n.isParent()?t.push(n):i.inDragLayer?e.drag.push(n):e.nondrag.push(n)}for(var r=0;r<t.length;r++){var n=t[r];e.drag.push(n)}}};v2.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};v2.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(gG),t.interactive=t.filter(function(r){return r.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var MG={};[Mc,Im,ti,zp,R_,xs,DG,p2,v2].forEach(function(e){Ce(MG,e)});var OG={};OG.getCachedImage=function(e,t,r){var n=this,i=n.imageCache=n.imageCache||{},a=i[e];if(a)return a.image.complete||a.image.addEventListener("load",r),a.image;a=i[e]=i[e]||{};var s=a.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var o="data:",l=e.substring(0,o.length).toLowerCase()===o;return l||(t=t==="null"?null:t,s.crossOrigin=t),s.src=e,s};var vf={};vf.registerBinding=function(e,t,r,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var a=[],s=0;s<e.length;s++){var o=e[s];if(o!==void 0){var l=this.binder(o);a.push(l.on.apply(l,i))}}return a}var l=this.binder(e);return l.on.apply(l,i)};vf.binder=function(e){var t=this,r=t.cy.window(),n=e===r||e===r.document||e===r.document.body||pwt(e);if(t.supportsPassiveEvents==null){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});r.addEventListener("test",null,a)}catch{}t.supportsPassiveEvents=i}var s=function(l,u,h){var f=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(f[2]={capture:h??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:f}),(e.addEventListener||e.on).apply(e,f),this};return{on:s,addEventListener:s,addListener:s,bind:s}};vf.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()};vf.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()};vf.load=function(){var e=this,t=e.cy.window(),r=function($){return $.selected()},n=function($){var nt=$.getRootNode();if(nt&&nt.nodeType===11&&nt.host!==void 0)return nt},i=function($,nt,rt,ct){$==null&&($=e.cy);for(var ot=0;ot<nt.length;ot++){var vt=nt[ot];$.emit({originalEvent:rt,type:vt,position:ct})}},a=function($){return $.shiftKey||$.metaKey||$.ctrlKey},s=function($,nt){var rt=!0;if(e.cy.hasCompoundNodes()&&$&&$.pannable())for(var ct=0;nt&&ct<nt.length;ct++){var $=nt[ct];if($.isNode()&&$.isParent()&&!$.pannable()){rt=!1;break}}else rt=!0;return rt},o=function($){$[0]._private.grabbed=!0},l=function($){$[0]._private.grabbed=!1},u=function($){$[0]._private.rscratch.inDragLayer=!0},h=function($){$[0]._private.rscratch.inDragLayer=!1},f=function($){$[0]._private.rscratch.isGrabTarget=!0},d=function($){$[0]._private.rscratch.isGrabTarget=!1},g=function($,nt){var rt=nt.addToList,ct=rt.has($);!ct&&$.grabbable()&&!$.locked()&&(rt.merge($),o($))},p=function($,nt){if($.cy().hasCompoundNodes()&&!(nt.inDragLayer==null&&nt.addToList==null)){var rt=$.descendants();nt.inDragLayer&&(rt.forEach(u),rt.connectedEdges().forEach(u)),nt.addToList&&g(rt,nt)}},v=function($,nt){nt=nt||{};var rt=$.cy().hasCompoundNodes();nt.inDragLayer&&($.forEach(u),$.neighborhood().stdFilter(function(ct){return!rt||ct.isEdge()}).forEach(u)),nt.addToList&&$.forEach(function(ct){g(ct,nt)}),p($,nt),b($,{inDragLayer:nt.inDragLayer}),e.updateCachedGrabbedEles()},m=v,y=function($){$&&(e.getCachedZSortedEles().forEach(function(nt){l(nt),h(nt),d(nt)}),e.updateCachedGrabbedEles())},b=function($,nt){if(!(nt.inDragLayer==null&&nt.addToList==null)&&$.cy().hasCompoundNodes()){var rt=$.ancestors().orphans();if(!rt.same($)){var ct=rt.descendants().spawnSelf().merge(rt).unmerge($).unmerge($.descendants()),ot=ct.connectedEdges();nt.inDragLayer&&(ot.forEach(u),ct.forEach(u)),nt.addToList&&ct.forEach(function(vt){g(vt,nt)})}}},T=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},w=typeof MutationObserver<"u",k=typeof ResizeObserver<"u";w?(e.removeObserver=new MutationObserver(function(st){for(var $=0;$<st.length;$++){var nt=st[$],rt=nt.removedNodes;if(rt)for(var ct=0;ct<rt.length;ct++){var ot=rt[ct];if(ot===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(st){e.destroy()});var S=Pp(function(){e.cy.resize()},100);w&&(e.styleObserver=new MutationObserver(S),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",S),k&&(e.resizeObserver=new ResizeObserver(S),e.resizeObserver.observe(e.container));var E=function($,nt){for(;$!=null;)nt($),$=$.parentNode},L=function(){e.invalidateContainerClientCoordsCache()};E(e.container,function(st){e.registerBinding(st,"transitionend",L),e.registerBinding(st,"animationend",L),e.registerBinding(st,"scroll",L)}),e.registerBinding(e.container,"contextmenu",function(st){st.preventDefault()});var A=function(){return e.selection[4]!==0},R=function($){for(var nt=e.findContainerClientCoords(),rt=nt[0],ct=nt[1],ot=nt[2],vt=nt[3],yt=$.touches?$.touches:[$],mt=!1,Mt=0;Mt<yt.length;Mt++){var Yt=yt[Mt];if(rt<=Yt.clientX&&Yt.clientX<=rt+ot&&ct<=Yt.clientY&&Yt.clientY<=ct+vt){mt=!0;break}}if(!mt)return!1;for(var Bt=e.container,zt=$.target,Gt=zt.parentNode,It=!1;Gt;){if(Gt===Bt){It=!0;break}Gt=Gt.parentNode}return!!It};e.registerBinding(e.container,"mousedown",function($){if(R($)&&!(e.hoverData.which===1&&$.which!==1)){$.preventDefault(),T(),e.hoverData.capture=!0,e.hoverData.which=$.which;var nt=e.cy,rt=[$.clientX,$.clientY],ct=e.projectIntoViewport(rt[0],rt[1]),ot=e.selection,vt=e.findNearestElements(ct[0],ct[1],!0,!1),yt=vt[0],mt=e.dragData.possibleDragElements;e.hoverData.mdownPos=ct,e.hoverData.mdownGPos=rt;var Mt=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var Vt=e.hoverData.down;Vt?Vt.emit({originalEvent:$,type:"taphold",position:{x:ct[0],y:ct[1]}}):nt.emit({originalEvent:$,type:"taphold",position:{x:ct[0],y:ct[1]}})}},e.tapholdDuration)};if($.which==3){e.hoverData.cxtStarted=!0;var Yt={originalEvent:$,type:"cxttapstart",position:{x:ct[0],y:ct[1]}};yt?(yt.activate(),yt.emit(Yt),e.hoverData.down=yt):nt.emit(Yt),e.hoverData.downTime=new Date().getTime(),e.hoverData.cxtDragged=!1}else if($.which==1){yt&&yt.activate();{if(yt!=null&&e.nodeIsGrabbable(yt)){var Bt=function(Vt){return{originalEvent:$,type:Vt,position:{x:ct[0],y:ct[1]}}},zt=function(Vt){Vt.emit(Bt("grab"))};if(f(yt),!yt.selected())mt=e.dragData.possibleDragElements=nt.collection(),m(yt,{addToList:mt}),yt.emit(Bt("grabon")).emit(Bt("grab"));else{mt=e.dragData.possibleDragElements=nt.collection();var Gt=nt.$(function(It){return It.isNode()&&It.selected()&&e.nodeIsGrabbable(It)});v(Gt,{addToList:mt}),yt.emit(Bt("grabon")),Gt.forEach(zt)}e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=yt,e.hoverData.downs=vt,e.hoverData.downTime=new Date().getTime()}i(yt,["mousedown","tapstart","vmousedown"],$,{x:ct[0],y:ct[1]}),yt==null?(ot[4]=1,e.data.bgActivePosistion={x:ct[0],y:ct[1]},e.redrawHint("select",!0),e.redraw()):yt.pannable()&&(ot[4]=1),Mt()}ot[0]=ot[2]=ct[0],ot[1]=ot[3]=ct[1]}},!1);var C=n(e.container);e.registerBinding([t,C],"mousemove",function($){var nt=e.hoverData.capture;if(!(!nt&&!R($))){var rt=!1,ct=e.cy,ot=ct.zoom(),vt=[$.clientX,$.clientY],yt=e.projectIntoViewport(vt[0],vt[1]),mt=e.hoverData.mdownPos,Mt=e.hoverData.mdownGPos,Yt=e.selection,Bt=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(Bt=e.findNearestElement(yt[0],yt[1],!0,!1));var zt=e.hoverData.last,Gt=e.hoverData.down,It=[yt[0]-Yt[2],yt[1]-Yt[3]],Vt=e.dragData.possibleDragElements,Zt;if(Mt){var jt=vt[0]-Mt[0],Pt=jt*jt,ce=vt[1]-Mt[1],$t=ce*ce,Ut=Pt+$t;e.hoverData.isOverThresholdDrag=Zt=Ut>=e.desktopTapThreshold2}var te=a($);Zt&&(e.hoverData.tapholdCancelled=!0);var Qt=function(){var re=e.hoverData.dragDelta=e.hoverData.dragDelta||[];re.length===0?(re.push(It[0]),re.push(It[1])):(re[0]+=It[0],re[1]+=It[1])};rt=!0,i(Bt,["mousemove","vmousemove","tapdrag"],$,{x:yt[0],y:yt[1]});var Jt=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||ct.emit({originalEvent:$,type:"boxstart",position:{x:yt[0],y:yt[1]}}),Yt[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(e.hoverData.which===3){if(Zt){var ie={originalEvent:$,type:"cxtdrag",position:{x:yt[0],y:yt[1]}};Gt?Gt.emit(ie):ct.emit(ie),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||Bt!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:$,type:"cxtdragout",position:{x:yt[0],y:yt[1]}}),e.hoverData.cxtOver=Bt,Bt&&Bt.emit({originalEvent:$,type:"cxtdragover",position:{x:yt[0],y:yt[1]}}))}}else if(e.hoverData.dragging){if(rt=!0,ct.panningEnabled()&&ct.userPanningEnabled()){var Ge;if(e.hoverData.justStartedPan){var pe=e.hoverData.mdownPos;Ge={x:(yt[0]-pe[0])*ot,y:(yt[1]-pe[1])*ot},e.hoverData.justStartedPan=!1}else Ge={x:It[0]*ot,y:It[1]*ot};ct.panBy(Ge),ct.emit("dragpan"),e.hoverData.dragged=!0}yt=e.projectIntoViewport($.clientX,$.clientY)}else if(Yt[4]==1&&(Gt==null||Gt.pannable())){if(Zt){if(!e.hoverData.dragging&&ct.boxSelectionEnabled()&&(te||!ct.panningEnabled()||!ct.userPanningEnabled()))Jt();else if(!e.hoverData.selecting&&ct.panningEnabled()&&ct.userPanningEnabled()){var He=s(Gt,e.hoverData.downs);He&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,Yt[4]=0,e.data.bgActivePosistion=su(mt),e.redrawHint("select",!0),e.redraw())}Gt&&Gt.pannable()&&Gt.active()&&Gt.unactivate()}}else{if(Gt&&Gt.pannable()&&Gt.active()&&Gt.unactivate(),(!Gt||!Gt.grabbed())&&Bt!=zt&&(zt&&i(zt,["mouseout","tapdragout"],$,{x:yt[0],y:yt[1]}),Bt&&i(Bt,["mouseover","tapdragover"],$,{x:yt[0],y:yt[1]}),e.hoverData.last=Bt),Gt)if(Zt){if(ct.boxSelectionEnabled()&&te)Gt&&Gt.grabbed()&&(y(Vt),Gt.emit("freeon"),Vt.emit("free"),e.dragData.didDrag&&(Gt.emit("dragfreeon"),Vt.emit("dragfree"))),Jt();else if(Gt&&Gt.grabbed()&&e.nodeIsDraggable(Gt)){var Fe=!e.dragData.didDrag;Fe&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||v(Vt,{inDragLayer:!0});var Pe={x:0,y:0};if(ne(It[0])&&ne(It[1])&&(Pe.x+=It[0],Pe.y+=It[1],Fe)){var Le=e.hoverData.dragDelta;Le&&ne(Le[0])&&ne(Le[1])&&(Pe.x+=Le[0],Pe.y+=Le[1])}e.hoverData.draggingEles=!0,Vt.silentShift(Pe).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else Qt();rt=!0}if(Yt[2]=yt[0],Yt[3]=yt[1],rt)return $.stopPropagation&&$.stopPropagation(),$.preventDefault&&$.preventDefault(),!1}},!1);var D,P,_;e.registerBinding(t,"mouseup",function($){if(!(e.hoverData.which===1&&$.which!==1&&e.hoverData.capture)){var nt=e.hoverData.capture;if(nt){e.hoverData.capture=!1;var rt=e.cy,ct=e.projectIntoViewport($.clientX,$.clientY),ot=e.selection,vt=e.findNearestElement(ct[0],ct[1],!0,!1),yt=e.dragData.possibleDragElements,mt=e.hoverData.down,Mt=a($);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,mt&&mt.unactivate(),e.hoverData.which===3){var Yt={originalEvent:$,type:"cxttapend",position:{x:ct[0],y:ct[1]}};if(mt?mt.emit(Yt):rt.emit(Yt),!e.hoverData.cxtDragged){var Bt={originalEvent:$,type:"cxttap",position:{x:ct[0],y:ct[1]}};mt?mt.emit(Bt):rt.emit(Bt)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(e.hoverData.which===1){if(i(vt,["mouseup","tapend","vmouseup"],$,{x:ct[0],y:ct[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(i(mt,["click","tap","vclick"],$,{x:ct[0],y:ct[1]}),P=!1,$.timeStamp-_<=rt.multiClickDebounceTime()?(D&&clearTimeout(D),P=!0,_=null,i(mt,["dblclick","dbltap","vdblclick"],$,{x:ct[0],y:ct[1]})):(D=setTimeout(function(){P||i(mt,["oneclick","onetap","voneclick"],$,{x:ct[0],y:ct[1]})},rt.multiClickDebounceTime()),_=$.timeStamp)),mt==null&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!a($)&&(rt.$(r).unselect(["tapunselect"]),yt.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=yt=rt.collection()),vt==mt&&!e.dragData.didDrag&&!e.hoverData.selecting&&vt!=null&&vt._private.selectable&&(e.hoverData.dragging||(rt.selectionType()==="additive"||Mt?vt.selected()?vt.unselect(["tapunselect"]):vt.select(["tapselect"]):Mt||(rt.$(r).unmerge(vt).unselect(["tapunselect"]),vt.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var zt=rt.collection(e.getAllInBox(ot[0],ot[1],ot[2],ot[3]));e.redrawHint("select",!0),zt.length>0&&e.redrawHint("eles",!0),rt.emit({type:"boxend",originalEvent:$,position:{x:ct[0],y:ct[1]}});var Gt=function(Zt){return Zt.selectable()&&!Zt.selected()};rt.selectionType()==="additive"||Mt||rt.$(r).unmerge(zt).unselect(),zt.emit("box").stdFilter(Gt).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!ot[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var It=mt&&mt.grabbed();y(yt),It&&(mt.emit("freeon"),yt.emit("free"),e.dragData.didDrag&&(mt.emit("dragfreeon"),yt.emit("dragfree")))}}ot[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}}},!1);var I=[],M=4,O,N=1e5,B=function($,nt){for(var rt=0;rt<$.length;rt++)if($[rt]%nt!==0)return!1;return!0},z=function($){for(var nt=Math.abs($[0]),rt=1;rt<$.length;rt++)if(Math.abs($[rt])!==nt)return!1;return!0},F=function($){var nt=!1,rt=$.deltaY;if(rt==null&&($.wheelDeltaY!=null?rt=$.wheelDeltaY/4:$.wheelDelta!=null&&(rt=$.wheelDelta/4)),O==null)if(I.length>=M){var ct=I;if(O=B(ct,5),!O){var ot=Math.abs(ct[0]);O=z(ct)&&ot>5}if(O)for(var vt=0;vt<ct.length;vt++)N=Math.min(Math.abs(ct[vt]),N)}else I.push(rt),nt=!0;else O&&(N=Math.min(Math.abs(rt),N));if(!e.scrollingPage){var yt=e.cy,mt=yt.zoom(),Mt=yt.pan(),Yt=e.projectIntoViewport($.clientX,$.clientY),Bt=[Yt[0]*mt+Mt.x,Yt[1]*mt+Mt.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||A()){$.preventDefault();return}if(yt.panningEnabled()&&yt.userPanningEnabled()&&yt.zoomingEnabled()&&yt.userZoomingEnabled()){$.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var zt;nt&&Math.abs(rt)>5&&(rt=v_(rt)*5),zt=rt/-250,O&&(zt/=N,zt*=3),zt=zt*e.wheelSensitivity;var Gt=$.deltaMode===1;Gt&&(zt*=33);var It=yt.zoom()*Math.pow(10,zt);$.type==="gesturechange"&&(It=e.gestureStartZoom*$.scale),yt.zoom({level:It,renderedPosition:{x:Bt[0],y:Bt[1]}}),yt.emit($.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};e.registerBinding(e.container,"wheel",F,!0),e.registerBinding(t,"scroll",function($){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function($){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||$.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(st){e.hasTouchStarted||F(st)},!0),e.registerBinding(e.container,"mouseout",function($){var nt=e.projectIntoViewport($.clientX,$.clientY);e.cy.emit({originalEvent:$,type:"mouseout",position:{x:nt[0],y:nt[1]}})},!1),e.registerBinding(e.container,"mouseover",function($){var nt=e.projectIntoViewport($.clientX,$.clientY);e.cy.emit({originalEvent:$,type:"mouseover",position:{x:nt[0],y:nt[1]}})},!1);var V,G,Y,Q,K,it,ut,q,W,H,U,X,J,j=function($,nt,rt,ct){return Math.sqrt((rt-$)*(rt-$)+(ct-nt)*(ct-nt))},gt=function($,nt,rt,ct){return(rt-$)*(rt-$)+(ct-nt)*(ct-nt)},at;e.registerBinding(e.container,"touchstart",at=function($){if(e.hasTouchStarted=!0,!!R($)){T(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var nt=e.cy,rt=e.touchData.now,ct=e.touchData.earlier;if($.touches[0]){var ot=e.projectIntoViewport($.touches[0].clientX,$.touches[0].clientY);rt[0]=ot[0],rt[1]=ot[1]}if($.touches[1]){var ot=e.projectIntoViewport($.touches[1].clientX,$.touches[1].clientY);rt[2]=ot[0],rt[3]=ot[1]}if($.touches[2]){var ot=e.projectIntoViewport($.touches[2].clientX,$.touches[2].clientY);rt[4]=ot[0],rt[5]=ot[1]}if($.touches[1]){e.touchData.singleTouchMoved=!0,y(e.dragData.touchDragEles);var vt=e.findContainerClientCoords();W=vt[0],H=vt[1],U=vt[2],X=vt[3],V=$.touches[0].clientX-W,G=$.touches[0].clientY-H,Y=$.touches[1].clientX-W,Q=$.touches[1].clientY-H,J=0<=V&&V<=U&&0<=Y&&Y<=U&&0<=G&&G<=X&&0<=Q&&Q<=X;var yt=nt.pan(),mt=nt.zoom();K=j(V,G,Y,Q),it=gt(V,G,Y,Q),ut=[(V+Y)/2,(G+Q)/2],q=[(ut[0]-yt.x)/mt,(ut[1]-yt.y)/mt];var Mt=200,Yt=Mt*Mt;if(it<Yt&&!$.touches[2]){var Bt=e.findNearestElement(rt[0],rt[1],!0,!0),zt=e.findNearestElement(rt[2],rt[3],!0,!0);Bt&&Bt.isNode()?(Bt.activate().emit({originalEvent:$,type:"cxttapstart",position:{x:rt[0],y:rt[1]}}),e.touchData.start=Bt):zt&&zt.isNode()?(zt.activate().emit({originalEvent:$,type:"cxttapstart",position:{x:rt[0],y:rt[1]}}),e.touchData.start=zt):nt.emit({originalEvent:$,type:"cxttapstart",position:{x:rt[0],y:rt[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,e.redraw();return}}if($.touches[2])nt.boxSelectionEnabled()&&$.preventDefault();else if(!$.touches[1]){if($.touches[0]){var Gt=e.findNearestElements(rt[0],rt[1],!0,!0),It=Gt[0];if(It!=null&&(It.activate(),e.touchData.start=It,e.touchData.starts=Gt,e.nodeIsGrabbable(It))){var Vt=e.dragData.touchDragEles=nt.collection(),Zt=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),It.selected()?(Zt=nt.$(function(Ut){return Ut.selected()&&e.nodeIsGrabbable(Ut)}),v(Zt,{addToList:Vt})):m(It,{addToList:Vt}),f(It);var jt=function(te){return{originalEvent:$,type:te,position:{x:rt[0],y:rt[1]}}};It.emit(jt("grabon")),Zt?Zt.forEach(function(Ut){Ut.emit(jt("grab"))}):It.emit(jt("grab"))}i(It,["touchstart","tapstart","vmousedown"],$,{x:rt[0],y:rt[1]}),It==null&&(e.data.bgActivePosistion={x:ot[0],y:ot[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved===!1&&!e.pinching&&!e.touchData.selecting&&i(e.touchData.start,["taphold"],$,{x:rt[0],y:rt[1]})},e.tapholdDuration)}}if($.touches.length>=1){for(var Pt=e.touchData.startPosition=[null,null,null,null,null,null],ce=0;ce<rt.length;ce++)Pt[ce]=ct[ce]=rt[ce];var $t=$.touches[0];e.touchData.startGPosition=[$t.clientX,$t.clientY]}}},!1);var tt;e.registerBinding(t,"touchmove",tt=function($){var nt=e.touchData.capture;if(!(!nt&&!R($))){var rt=e.selection,ct=e.cy,ot=e.touchData.now,vt=e.touchData.earlier,yt=ct.zoom();if($.touches[0]){var mt=e.projectIntoViewport($.touches[0].clientX,$.touches[0].clientY);ot[0]=mt[0],ot[1]=mt[1]}if($.touches[1]){var mt=e.projectIntoViewport($.touches[1].clientX,$.touches[1].clientY);ot[2]=mt[0],ot[3]=mt[1]}if($.touches[2]){var mt=e.projectIntoViewport($.touches[2].clientX,$.touches[2].clientY);ot[4]=mt[0],ot[5]=mt[1]}var Mt=e.touchData.startGPosition,Yt;if(nt&&$.touches[0]&&Mt){for(var Bt=[],zt=0;zt<ot.length;zt++)Bt[zt]=ot[zt]-vt[zt];var Gt=$.touches[0].clientX-Mt[0],It=Gt*Gt,Vt=$.touches[0].clientY-Mt[1],Zt=Vt*Vt,jt=It+Zt;Yt=jt>=e.touchTapThreshold2}if(nt&&e.touchData.cxt){$.preventDefault();var Pt=$.touches[0].clientX-W,ce=$.touches[0].clientY-H,$t=$.touches[1].clientX-W,Ut=$.touches[1].clientY-H,te=gt(Pt,ce,$t,Ut),Qt=te/it,Jt=150,ie=Jt*Jt,Ge=1.5,pe=Ge*Ge;if(Qt>=pe||te>=ie){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var He={originalEvent:$,type:"cxttapend",position:{x:ot[0],y:ot[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(He),e.touchData.start=null):ct.emit(He)}}if(nt&&e.touchData.cxt){var He={originalEvent:$,type:"cxtdrag",position:{x:ot[0],y:ot[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(He):ct.emit(He),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Fe=e.findNearestElement(ot[0],ot[1],!0,!0);(!e.touchData.cxtOver||Fe!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:$,type:"cxtdragout",position:{x:ot[0],y:ot[1]}}),e.touchData.cxtOver=Fe,Fe&&Fe.emit({originalEvent:$,type:"cxtdragover",position:{x:ot[0],y:ot[1]}}))}else if(nt&&$.touches[2]&&ct.boxSelectionEnabled())$.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||ct.emit({originalEvent:$,type:"boxstart",position:{x:ot[0],y:ot[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,rt[4]=1,!rt||rt.length===0||rt[0]===void 0?(rt[0]=(ot[0]+ot[2]+ot[4])/3,rt[1]=(ot[1]+ot[3]+ot[5])/3,rt[2]=(ot[0]+ot[2]+ot[4])/3+1,rt[3]=(ot[1]+ot[3]+ot[5])/3+1):(rt[2]=(ot[0]+ot[2]+ot[4])/3,rt[3]=(ot[1]+ot[3]+ot[5])/3),e.redrawHint("select",!0),e.redraw();else if(nt&&$.touches[1]&&!e.touchData.didSelect&&ct.zoomingEnabled()&&ct.panningEnabled()&&ct.userZoomingEnabled()&&ct.userPanningEnabled()){$.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Pe=e.dragData.touchDragEles;if(Pe){e.redrawHint("drag",!0);for(var Le=0;Le<Pe.length;Le++){var _r=Pe[Le]._private;_r.grabbed=!1,_r.rscratch.inDragLayer=!1}}var re=e.touchData.start,Pt=$.touches[0].clientX-W,ce=$.touches[0].clientY-H,$t=$.touches[1].clientX-W,Ut=$.touches[1].clientY-H,xt=j(Pt,ce,$t,Ut),Wt=xt/K;if(J){var oe=Pt-V,Be=ce-G,pr=$t-Y,vr=Ut-Q,ur=(oe+pr)/2,jr=(Be+vr)/2,Vn=ct.zoom(),ei=Vn*Wt,qe=ct.pan(),fe=q[0]*Vn+qe.x,le=q[1]*Vn+qe.y,Kt={x:-ei/Vn*(fe-qe.x-ur)+fe,y:-ei/Vn*(le-qe.y-jr)+le};if(re&&re.active()){var Pe=e.dragData.touchDragEles;y(Pe),e.redrawHint("drag",!0),e.redrawHint("eles",!0),re.unactivate().emit("freeon"),Pe.emit("free"),e.dragData.didDrag&&(re.emit("dragfreeon"),Pe.emit("dragfree"))}ct.viewport({zoom:ei,pan:Kt,cancelOnFailedZoom:!0}),ct.emit("pinchzoom"),K=xt,V=Pt,G=ce,Y=$t,Q=Ut,e.pinching=!0}if($.touches[0]){var mt=e.projectIntoViewport($.touches[0].clientX,$.touches[0].clientY);ot[0]=mt[0],ot[1]=mt[1]}if($.touches[1]){var mt=e.projectIntoViewport($.touches[1].clientX,$.touches[1].clientY);ot[2]=mt[0],ot[3]=mt[1]}if($.touches[2]){var mt=e.projectIntoViewport($.touches[2].clientX,$.touches[2].clientY);ot[4]=mt[0],ot[5]=mt[1]}}else if($.touches[0]&&!e.touchData.didSelect){var Ft=e.touchData.start,Ve=e.touchData.last,Fe;if(!e.hoverData.draggingEles&&!e.swipePanning&&(Fe=e.findNearestElement(ot[0],ot[1],!0,!0)),nt&&Ft!=null&&$.preventDefault(),nt&&Ft!=null&&e.nodeIsDraggable(Ft))if(Yt){var Pe=e.dragData.touchDragEles,lt=!e.dragData.didDrag;lt&&v(Pe,{inDragLayer:!0}),e.dragData.didDrag=!0;var Ea={x:0,y:0};if(ne(Bt[0])&&ne(Bt[1])&&(Ea.x+=Bt[0],Ea.y+=Bt[1],lt)){e.redrawHint("eles",!0);var dt=e.touchData.dragDelta;dt&&ne(dt[0])&&ne(dt[1])&&(Ea.x+=dt[0],Ea.y+=dt[1])}e.hoverData.draggingEles=!0,Pe.silentShift(Ea).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==vt[0]&&e.touchData.startPosition[1]==vt[1]&&e.redrawHint("eles",!0),e.redraw()}else{var dt=e.touchData.dragDelta=e.touchData.dragDelta||[];dt.length===0?(dt.push(Bt[0]),dt.push(Bt[1])):(dt[0]+=Bt[0],dt[1]+=Bt[1])}if(i(Ft||Fe,["touchmove","tapdrag","vmousemove"],$,{x:ot[0],y:ot[1]}),(!Ft||!Ft.grabbed())&&Fe!=Ve&&(Ve&&Ve.emit({originalEvent:$,type:"tapdragout",position:{x:ot[0],y:ot[1]}}),Fe&&Fe.emit({originalEvent:$,type:"tapdragover",position:{x:ot[0],y:ot[1]}})),e.touchData.last=Fe,nt)for(var Le=0;Le<ot.length;Le++)ot[Le]&&e.touchData.startPosition[Le]&&Yt&&(e.touchData.singleTouchMoved=!0);if(nt&&(Ft==null||Ft.pannable())&&ct.panningEnabled()&&ct.userPanningEnabled()){var Or=s(Ft,e.touchData.starts);Or&&($.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=su(e.touchData.startPosition)),e.swipePanning?(ct.panBy({x:Bt[0]*yt,y:Bt[1]*yt}),ct.emit("dragpan")):Yt&&(e.swipePanning=!0,ct.panBy({x:Gt*yt,y:Vt*yt}),ct.emit("dragpan"),Ft&&(Ft.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));var mt=e.projectIntoViewport($.touches[0].clientX,$.touches[0].clientY);ot[0]=mt[0],ot[1]=mt[1]}}for(var zt=0;zt<ot.length;zt++)vt[zt]=ot[zt];nt&&$.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&e.data.bgActivePosistion!=null&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1);var kt;e.registerBinding(t,"touchcancel",kt=function($){var nt=e.touchData.start;e.touchData.capture=!1,nt&&nt.unactivate()});var ft,Dt,Ot,Rt;if(e.registerBinding(t,"touchend",ft=function($){var nt=e.touchData.start,rt=e.touchData.capture;if(rt)$.touches.length===0&&(e.touchData.capture=!1),$.preventDefault();else return;var ct=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var ot=e.cy,vt=ot.zoom(),yt=e.touchData.now,mt=e.touchData.earlier;if($.touches[0]){var Mt=e.projectIntoViewport($.touches[0].clientX,$.touches[0].clientY);yt[0]=Mt[0],yt[1]=Mt[1]}if($.touches[1]){var Mt=e.projectIntoViewport($.touches[1].clientX,$.touches[1].clientY);yt[2]=Mt[0],yt[3]=Mt[1]}if($.touches[2]){var Mt=e.projectIntoViewport($.touches[2].clientX,$.touches[2].clientY);yt[4]=Mt[0],yt[5]=Mt[1]}nt&&nt.unactivate();var Yt;if(e.touchData.cxt){if(Yt={originalEvent:$,type:"cxttapend",position:{x:yt[0],y:yt[1]}},nt?nt.emit(Yt):ot.emit(Yt),!e.touchData.cxtDragged){var Bt={originalEvent:$,type:"cxttap",position:{x:yt[0],y:yt[1]}};nt?nt.emit(Bt):ot.emit(Bt)}e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,e.redraw();return}if(!$.touches[2]&&ot.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var zt=ot.collection(e.getAllInBox(ct[0],ct[1],ct[2],ct[3]));ct[0]=void 0,ct[1]=void 0,ct[2]=void 0,ct[3]=void 0,ct[4]=0,e.redrawHint("select",!0),ot.emit({type:"boxend",originalEvent:$,position:{x:yt[0],y:yt[1]}});var Gt=function(ie){return ie.selectable()&&!ie.selected()};zt.emit("box").stdFilter(Gt).select().emit("boxselect"),zt.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(nt!=null&&nt.unactivate(),$.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!$.touches[1]){if(!$.touches[0]){if(!$.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var It=e.dragData.touchDragEles;if(nt!=null){var Vt=nt._private.grabbed;y(It),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Vt&&(nt.emit("freeon"),It.emit("free"),e.dragData.didDrag&&(nt.emit("dragfreeon"),It.emit("dragfree"))),i(nt,["touchend","tapend","vmouseup","tapdragout"],$,{x:yt[0],y:yt[1]}),nt.unactivate(),e.touchData.start=null}else{var Zt=e.findNearestElement(yt[0],yt[1],!0,!0);i(Zt,["touchend","tapend","vmouseup","tapdragout"],$,{x:yt[0],y:yt[1]})}var jt=e.touchData.startPosition[0]-yt[0],Pt=jt*jt,ce=e.touchData.startPosition[1]-yt[1],$t=ce*ce,Ut=Pt+$t,te=Ut*vt*vt;e.touchData.singleTouchMoved||(nt||ot.$(":selected").unselect(["tapunselect"]),i(nt,["tap","vclick"],$,{x:yt[0],y:yt[1]}),Dt=!1,$.timeStamp-Rt<=ot.multiClickDebounceTime()?(Ot&&clearTimeout(Ot),Dt=!0,Rt=null,i(nt,["dbltap","vdblclick"],$,{x:yt[0],y:yt[1]})):(Ot=setTimeout(function(){Dt||i(nt,["onetap","voneclick"],$,{x:yt[0],y:yt[1]})},ot.multiClickDebounceTime()),Rt=$.timeStamp)),nt!=null&&!e.dragData.didDrag&&nt._private.selectable&&te<e.touchTapThreshold2&&!e.pinching&&(ot.selectionType()==="single"?(ot.$(r).unmerge(nt).unselect(["tapunselect"]),nt.select(["tapselect"])):nt.selected()?nt.unselect(["tapunselect"]):nt.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}}}for(var Qt=0;Qt<yt.length;Qt++)mt[Qt]=yt[Qt];e.dragData.didDrag=!1,$.touches.length===0&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),$.touches.length<2&&($.touches.length===1&&(e.touchData.startGPosition=[$.touches[0].clientX,$.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())},!1),typeof TouchEvent>"u"){var Tt=[],At=function($){return{clientX:$.clientX,clientY:$.clientY,force:1,identifier:$.pointerId,pageX:$.pageX,pageY:$.pageY,radiusX:$.width/2,radiusY:$.height/2,screenX:$.screenX,screenY:$.screenY,target:$.target}},bt=function($){return{event:$,touch:At($)}},wt=function($){Tt.push(bt($))},Nt=function($){for(var nt=0;nt<Tt.length;nt++){var rt=Tt[nt];if(rt.event.pointerId===$.pointerId){Tt.splice(nt,1);return}}},ht=function($){var nt=Tt.filter(function(rt){return rt.event.pointerId===$.pointerId})[0];nt.event=$,nt.touch=At($)},_t=function($){$.touches=Tt.map(function(nt){return nt.touch})},Z=function($){return $.pointerType==="mouse"||$.pointerType===4};e.registerBinding(e.container,"pointerdown",function(st){Z(st)||(st.preventDefault(),wt(st),_t(st),at(st))}),e.registerBinding(e.container,"pointerup",function(st){Z(st)||(Nt(st),_t(st),ft(st))}),e.registerBinding(e.container,"pointercancel",function(st){Z(st)||(Nt(st),_t(st),kt(st))}),e.registerBinding(e.container,"pointermove",function(st){Z(st)||(st.preventDefault(),ht(st),_t(st),tt(st))})}};var fo={};fo.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(n,i,a,s,o,l){this.renderer.nodeShapeImpl("polygon",n,i,a,s,o,this.points)},intersectLine:function(n,i,a,s,o,l,u,h){return Gg(o,l,this.points,n,i,a/2,s/2,u)},checkPoint:function(n,i,a,s,o,l,u,h){return io(n,i,this.points,l,u,s,o,[0,-1],a)}}};fo.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,r,n,i,a,s){this.renderer.nodeShapeImpl(this.name,t,r,n,i,a)},intersectLine:function(t,r,n,i,a,s,o,l){return PEt(a,s,t,r,n/2+o,i/2+o)},checkPoint:function(t,r,n,i,a,s,o,l){return Fl(t,r,i,a,s,o,n)}}};fo.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(n,i,a,s,o,l,u){if(l[u]!==void 0&&l[u+"-cx"]===n&&l[u+"-cy"]===i)return l[u];l[u]=new Array(t.length/2),l[u+"-cx"]=n,l[u+"-cy"]=i;var h=a/2,f=s/2;o=o==="auto"?BV(a,s):o;for(var d=new Array(t.length/2),g=0;g<t.length/2;g++)d[g]={x:n+h*t[g*2],y:i+f*t[g*2+1]};var p,v,m,y,b=d.length;for(v=d[b-1],p=0;p<b;p++)m=d[p%b],y=d[(p+1)%b],l[u][p]=L_(v,m,y,o),v=m,m=y;return l[u]},draw:function(n,i,a,s,o,l,u){this.renderer.nodeShapeImpl("round-polygon",n,i,a,s,o,this.points,this.getOrCreateCorners(i,a,s,o,l,u,"drawCorners"))},intersectLine:function(n,i,a,s,o,l,u,h,f){return BEt(o,l,this.points,n,i,a,s,u,this.getOrCreateCorners(n,i,a,s,h,f,"corners"))},checkPoint:function(n,i,a,s,o,l,u,h,f){return OEt(n,i,this.points,l,u,s,o,this.getOrCreateCorners(l,u,s,o,h,f,"corners"))}}};fo.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:ii(4,0),draw:function(t,r,n,i,a,s){this.renderer.nodeShapeImpl(this.name,t,r,n,i,a,this.points,s)},intersectLine:function(t,r,n,i,a,s,o,l){return OV(a,s,t,r,n,i,o,l)},checkPoint:function(t,r,n,i,a,s,o,l){var u=i/2,h=a/2;l=l==="auto"?Ho(i,a):l,l=Math.min(u,h,l);var f=l*2;return!!(io(t,r,this.points,s,o,i,a-f,[0,-1],n)||io(t,r,this.points,s,o,i-f,a,[0,-1],n)||Fl(t,r,f,f,s-u+l,o-h+l,n)||Fl(t,r,f,f,s+u-l,o-h+l,n)||Fl(t,r,f,f,s+u-l,o+h-l,n)||Fl(t,r,f,f,s-u+l,o+h-l,n))}}};fo.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:y_(),points:ii(4,0),draw:function(t,r,n,i,a,s){this.renderer.nodeShapeImpl(this.name,t,r,n,i,a,null,s)},generateCutTrianglePts:function(t,r,n,i,a){var s=a==="auto"?this.cornerLength:a,o=r/2,l=t/2,u=n-l,h=n+l,f=i-o,d=i+o;return{topLeft:[u,f+s,u+s,f,u+s,f+s],topRight:[h-s,f,h,f+s,h-s,f+s],bottomRight:[h,d-s,h-s,d,h-s,d-s],bottomLeft:[u+s,d,u,d-s,u+s,d-s]}},intersectLine:function(t,r,n,i,a,s,o,l){var u=this.generateCutTrianglePts(n+2*o,i+2*o,t,r,l),h=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return Gg(a,s,h,t,r)},checkPoint:function(t,r,n,i,a,s,o,l){var u=l==="auto"?this.cornerLength:l;if(io(t,r,this.points,s,o,i,a-2*u,[0,-1],n)||io(t,r,this.points,s,o,i-2*u,a,[0,-1],n))return!0;var h=this.generateCutTrianglePts(i,a,s,o);return ki(t,r,h.topLeft)||ki(t,r,h.topRight)||ki(t,r,h.bottomRight)||ki(t,r,h.bottomLeft)}}};fo.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:ii(4,0),draw:function(t,r,n,i,a,s){this.renderer.nodeShapeImpl(this.name,t,r,n,i,a)},intersectLine:function(t,r,n,i,a,s,o,l){var u=.15,h=.5,f=.85,d=this.generateBarrelBezierPts(n+2*o,i+2*o,t,r),g=function(m){var y=bu({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},u),b=bu({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},h),T=bu({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},f);return[m[0],m[1],y.x,y.y,b.x,b.y,T.x,T.y,m[4],m[5]]},p=[].concat(g(d.topLeft),g(d.topRight),g(d.bottomRight),g(d.bottomLeft));return Gg(a,s,p,t,r)},generateBarrelBezierPts:function(t,r,n,i){var a=r/2,s=t/2,o=n-s,l=n+s,u=i-a,h=i+a,f=zE(t,r),d=f.heightOffset,g=f.widthOffset,p=f.ctrlPtOffsetPct*t,v={topLeft:[o,u+d,o+p,u,o+g,u],topRight:[l-g,u,l-p,u,l,u+d],bottomRight:[l,h-d,l-p,h,l-g,h],bottomLeft:[o+g,h,o+p,h,o,h-d]};return v.topLeft.isTop=!0,v.topRight.isTop=!0,v.bottomLeft.isBottom=!0,v.bottomRight.isBottom=!0,v},checkPoint:function(t,r,n,i,a,s,o,l){var u=zE(i,a),h=u.heightOffset,f=u.widthOffset;if(io(t,r,this.points,s,o,i,a-2*h,[0,-1],n)||io(t,r,this.points,s,o,i-2*f,a,[0,-1],n))return!0;for(var d=this.generateBarrelBezierPts(i,a,s,o),g=function(L,A,R){var C=R[4],D=R[2],P=R[0],_=R[5],I=R[1],M=Math.min(C,P),O=Math.max(C,P),N=Math.min(_,I),B=Math.max(_,I);if(M<=L&&L<=O&&N<=A&&A<=B){var z=FEt(C,D,P),F=IEt(z[0],z[1],z[2],L),V=F.filter(function(G){return 0<=G&&G<=1});if(V.length>0)return V[0]}return null},p=Object.keys(d),v=0;v<p.length;v++){var m=p[v],y=d[m],b=g(t,r,y);if(b!=null){var T=y[5],w=y[3],k=y[1],S=mn(T,w,k,b);if(y.isTop&&S<=r||y.isBottom&&r<=S)return!0}}return!1}}};fo.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:ii(4,0),draw:function(t,r,n,i,a,s){this.renderer.nodeShapeImpl(this.name,t,r,n,i,a,this.points,s)},intersectLine:function(t,r,n,i,a,s,o,l){var u=t-(n/2+o),h=r-(i/2+o),f=h,d=t+(n/2+o),g=Co(a,s,t,r,u,h,d,f,!1);return g.length>0?g:OV(a,s,t,r,n,i,o,l)},checkPoint:function(t,r,n,i,a,s,o,l){l=l==="auto"?Ho(i,a):l;var u=2*l;if(io(t,r,this.points,s,o,i,a-u,[0,-1],n)||io(t,r,this.points,s,o,i-u,a,[0,-1],n))return!0;var h=i/2+2*n,f=a/2+2*n,d=[s-h,o-f,s-h,o,s+h,o,s+h,o-f];return!!(ki(t,r,d)||Fl(t,r,u,u,s+i/2-l,o+a/2-l,n)||Fl(t,r,u,u,s-i/2+l,o+a/2-l,n))}}};fo.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",ii(3,0)),this.generateRoundPolygon("round-triangle",ii(3,0)),this.generatePolygon("rectangle",ii(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",ii(5,0)),this.generateRoundPolygon("round-pentagon",ii(5,0)),this.generatePolygon("hexagon",ii(6,0)),this.generateRoundPolygon("round-hexagon",ii(6,0)),this.generatePolygon("heptagon",ii(7,0)),this.generateRoundPolygon("round-heptagon",ii(7,0)),this.generatePolygon("octagon",ii(8,0)),this.generateRoundPolygon("round-octagon",ii(8,0));var n=new Array(20);{var i=$E(5,0),a=$E(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<a.length/2;o++)a[o*2]*=s,a[o*2+1]*=s;for(var o=0;o<20/4;o++)n[o*4]=i[o*2],n[o*4+1]=i[o*2+1],n[o*4+2]=a[o*2],n[o*4+3]=a[o*2+1]}n=PV(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}e.makePolygon=function(u){var h=u.join("$"),f="polygon-"+h,d;return(d=this[f])?d:t.generatePolygon(f,u)}};var Vp={};Vp.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Vp.redraw=function(e){e=e||NV();var t=this;t.averageRedrawTime===void 0&&(t.averageRedrawTime=0),t.lastRedrawTime===void 0&&(t.lastRedrawTime=0),t.lastDrawTime===void 0&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e};Vp.beforeRender=function(e,t){if(!this.destroyed){t==null&&Dr("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort(function(n,i){return i.priority-n.priority})}};var wN=function(t,r,n){for(var i=t.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(r,n)};Vp.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=function(i){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){wN(e,!0,i);var a=no();e.render(e.renderOptions);var s=e.lastDrawTime=no();e.averageRedrawTime===void 0&&(e.averageRedrawTime=s-a),e.redrawCount===void 0&&(e.redrawCount=0),e.redrawCount++,e.redrawTotalTime===void 0&&(e.redrawTotalTime=0);var o=s-a;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else wN(e,!1,i);e.skipFrame=!1,Em(r)}};Em(r)}};var e_t=function(t){this.init(t)},PG=e_t,mf=PG.prototype;mf.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];mf.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),n=t.cy.window();if(n){var i=n.document,a=i.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",l=i.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!l){var u=i.createElement("style");u.id=s,u.textContent="."+o+" { position: relative; }",a.insertBefore(u,a.children[0])}var h=n.getComputedStyle(r),f=h.getPropertyValue("position");f==="static"&&or("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=ne(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()};mf.notify=function(e,t){var r=this,n=r.cy;if(!this.destroyed){if(e==="init"){r.load();return}if(e==="destroy"){r.destroy();return}(e==="add"||e==="remove"||e==="move"&&n.hasCompoundNodes()||e==="load"||e==="zorder"||e==="mount")&&r.invalidateCachedZSortedEles(),e==="viewport"&&r.redrawHint("select",!0),e==="gc"&&r.redrawHint("gc",!0),(e==="load"||e==="resize"||e==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};mf.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],n=r,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}};mf.isHeadless=function(){return!1};[A_,MG,OG,vf,fo,Vp].forEach(function(e){Ce(mf,e)});var oT=1e3/60,BG={setupDequeueing:function(t){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var a=Pp(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},t.deqRedrawThreshold),s=function(u,h){var f=no(),d=i.averageRedrawTime,g=i.lastRedrawTime,p=[],v=i.cy.extent(),m=i.getPixelRatio();for(u||i.flushRenderedStyleQueue();;){var y=no(),b=y-f,T=y-h;if(g<oT){var w=oT-(u?d:0);if(T>=t.deqFastCost*w)break}else if(u){if(b>=t.deqCost*g||b>=t.deqAvgCost*d)break}else if(T>=t.deqNoDrawCost*oT)break;var k=t.deq(n,m,v);if(k.length>0)for(var S=0;S<k.length;S++)p.push(k[S]);else break}p.length>0&&(t.onDeqd(n,p),!u&&t.shouldRedraw(n,p,m,v)&&a())},o=t.priority||d_;i.beforeRender(s,o(n))}}}},r_t=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:km;il(this,e),this.idsByKey=new Ws,this.keyForId=new Ws,this.cachesByLvl=new Ws,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r}return al(e,[{key:"getIdsFor",value:function(r){r==null&&Dr("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(r);return i||(i=new ff,n.set(r,i)),i}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),i=this.keyForId.get(n),a=this.getKey(r);this.deleteIdForKey(i,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),i=this.keyForId.get(n),a=this.getKey(r);return i!==a}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,i=this.lvls,a=n.get(r);return a||(a=new Ws,n.set(r,a),i.push(r)),a}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var i=this.getKey(r),a=this.getCache(i,n);return a!=null&&this.updateKeyMappingFor(r),a}},{key:"getForCachedKey",value:function(r,n){var i=this.keyForId.get(r.id()),a=this.getCache(i,n);return a}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var i=this.getKey(r);return this.hasCache(i,n)}},{key:"setCache",value:function(r,n,i){i.key=r,this.getCachesAt(n).set(r,i)}},{key:"set",value:function(r,n,i){var a=this.getKey(r);this.setCache(a,n,i),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var i=this.getKey(r);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(i){return n.deleteCache(r,i)})}},{key:"invalidate",value:function(r){var n=r.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(r);var a=this.doesEleInvalidateKey(r);return a&&this.invalidateKey(i),a||this.getNumberOfIdsForKey(i)===0}}])}(),EN=25,$0=50,z1=-4,JE=3,FG=7.99,n_t=8,i_t=1024,a_t=1024,s_t=1024,o_t=.2,l_t=.8,c_t=10,u_t=.15,h_t=.1,f_t=.9,d_t=.9,g_t=100,p_t=1,lu={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},v_t=$n({getKey:null,doesEleInvalidateKey:km,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:LV,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Gd=function(t,r){var n=this;n.renderer=t,n.onDequeues=[];var i=v_t(r);Ce(n,i),n.lookup=new r_t(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},pn=Gd.prototype;pn.reasons=lu;pn.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]};pn.getRetiredTextureQueue=function(e){var t=this,r=t.eleImgCaches.retired=t.eleImgCaches.retired||{},n=r[e]=r[e]||[];return n};pn.getElementQueue=function(){var e=this,t=e.eleCacheQueue=e.eleCacheQueue||new Bp(function(r,n){return n.reqs-r.reqs});return t};pn.getElementKeyToQueue=function(){var e=this,t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t};pn.getElement=function(e,t,r,n,i){var a=this,s=this.renderer,o=s.cy.zoom(),l=this.lookup;if(!t||t.w===0||t.h===0||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!a.allowEdgeTxrCaching&&e.isEdge()||!a.allowParentTxrCaching&&e.isParent())return null;if(n==null&&(n=Math.ceil(p_(o*r))),n<z1)n=z1;else if(o>=FG||n>JE)return null;var u=Math.pow(2,n),h=t.h*u,f=t.w*u,d=s.eleTextBiggerThanMin(e,u);if(!this.isVisible(e,d))return null;var g=l.get(e,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;var p;if(h<=EN?p=EN:h<=$0?p=$0:p=Math.ceil(h/$0)*$0,h>s_t||f>a_t)return null;var v=a.getTextureQueue(p),m=v[v.length-2],y=function(){return a.recycleTexture(p,f)||a.addTexture(p,f)};m||(m=v[v.length-1]),m||(m=y()),m.width-m.usedWidth<f&&(m=y());for(var b=function(M){return M&&M.scaledLabelShown===d},T=i&&i===lu.dequeue,w=i&&i===lu.highQuality,k=i&&i===lu.downscale,S,E=n+1;E<=JE;E++){var L=l.get(e,E);if(L){S=L;break}}var A=S&&S.level===n+1?S:null,R=function(){m.context.drawImage(A.texture.canvas,A.x,0,A.width,A.height,m.usedWidth,0,f,h)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,f,p),b(A))R();else if(b(S))if(w){for(var C=S.level;C>n;C--)A=a.getElement(e,t,r,C,lu.downscale);R()}else return a.queueElement(e,S.level-1),S;else{var D;if(!T&&!w&&!k)for(var P=n-1;P>=z1;P--){var _=l.get(e,P);if(_){D=_;break}}if(b(D))return a.queueElement(e,n),D;m.context.translate(m.usedWidth,0),m.context.scale(u,u),this.drawElement(m.context,e,t,d,!1),m.context.scale(1/u,1/u),m.context.translate(-m.usedWidth,0)}return g={x:m.usedWidth,texture:m,level:n,scale:u,width:f,height:h,scaledLabelShown:d},m.usedWidth+=Math.ceil(f+n_t),m.eleCaches.push(g),l.set(e,n,g),a.checkTextureFullness(m),g};pn.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])};pn.invalidateElement=function(e){var t=this,r=t.lookup,n=[],i=r.isInvalid(e);if(i){for(var a=z1;a<=JE;a++){var s=r.getForCachedKey(e,a);s&&n.push(s)}var o=r.invalidate(e);if(o)for(var l=0;l<n.length;l++){var u=n[l],h=u.texture;h.invalidatedWidth+=u.width,u.invalidated=!0,t.checkTextureUtility(h)}t.removeFromQueue(e)}};pn.checkTextureUtility=function(e){e.invalidatedWidth>=o_t*e.width&&this.retireTexture(e)};pn.checkTextureFullness=function(e){var t=this,r=t.getTextureQueue(e.height);e.usedWidth/e.width>l_t&&e.fullnessChecks>=c_t?Yo(r,e):e.fullnessChecks++};pn.retireTexture=function(e){var t=this,r=e.height,n=t.getTextureQueue(r),i=this.lookup;Yo(n,e),e.retired=!0;for(var a=e.eleCaches,s=0;s<a.length;s++){var o=a[s];i.deleteCache(o.key,o.level)}g_(a);var l=t.getRetiredTextureQueue(r);l.push(e)};pn.addTexture=function(e,t){var r=this,n=r.getTextureQueue(e),i={};return n.push(i),i.eleCaches=[],i.height=e,i.width=Math.max(i_t,t),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=r.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};pn.recycleTexture=function(e,t){for(var r=this,n=r.getTextureQueue(e),i=r.getRetiredTextureQueue(e),a=0;a<i.length;a++){var s=i[a];if(s.width>=t)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,g_(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),Yo(i,s),n.push(s),s}};pn.queueElement=function(e,t){var r=this,n=r.getElementQueue(),i=r.getElementKeyToQueue(),a=this.getKey(e),s=i[a];if(s)s.level=Math.max(s.level,t),s.eles.merge(e),s.reqs++,n.updateItem(s);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:a};n.push(o),i[a]=o}};pn.dequeue=function(e){for(var t=this,r=t.getElementQueue(),n=t.getElementKeyToQueue(),i=[],a=t.lookup,s=0;s<p_t&&r.size()>0;s++){var o=r.pop(),l=o.key,u=o.eles[0],h=a.hasCache(u,o.level);if(n[l]=null,h)continue;i.push(o);var f=t.getBoundingBox(u);t.getElement(u,f,e,o.level,lu.dequeue)}return i};pn.removeFromQueue=function(e){var t=this,r=t.getElementQueue(),n=t.getElementKeyToQueue(),i=this.getKey(e),a=n[i];a!=null&&(a.eles.length===1?(a.reqs=f_,r.updateItem(a),r.pop(),n[i]=null):a.eles.unmerge(e))};pn.onDequeue=function(e){this.onDequeues.push(e)};pn.offDequeue=function(e){Yo(this.onDequeues,e)};pn.setupDequeueing=BG.setupDequeueing({deqRedrawThreshold:g_t,deqCost:u_t,deqAvgCost:h_t,deqNoDrawCost:f_t,deqFastCost:d_t,deq:function(t,r,n){return t.dequeue(r,n)},onDeqd:function(t,r){for(var n=0;n<t.onDequeues.length;n++){var i=t.onDequeues[n];i(r)}},shouldRedraw:function(t,r,n,i){for(var a=0;a<r.length;a++)for(var s=r[a].eles,o=0;o<s.length;o++){var l=s[o].boundingBox();if(m_(l,i))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var m_t=1,rg=-4,Nm=2,y_t=3.99,x_t=50,b_t=50,T_t=.15,w_t=.1,E_t=.9,k_t=.9,C_t=1,kN=250,S_t=4e3*4e3,CN=32767,__t=!0,$G=function(t){var r=this,n=r.renderer=t,i=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=no()-2*kN,r.skipping=!1,r.eleTxrDeqs=i.collection(),r.scheduleElementRefinement=Pp(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},b_t),n.beforeRender(function(s,o){o-r.lastInvalidationTime<=kN?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=function(o,l){return l.reqs-o.reqs};r.layersQueue=new Bp(a),r.setupDequeueing()},zn=$G.prototype,SN=0,A_t=Math.pow(2,53)-1;zn.makeLayer=function(e,t){var r=Math.pow(2,t),n=Math.ceil(e.w*r),i=Math.ceil(e.h*r),a=this.renderer.makeOffscreenCanvas(n,i),s={id:SN=++SN%A_t,bb:e,level:t,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,l=-s.bb.x1,u=-s.bb.y1;return o.scale(r,r),o.translate(l,u),s};zn.getLayers=function(e,t,r){var n=this,i=n.renderer,a=i.cy,s=a.zoom(),o=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(p_(s*t)),r<rg)r=rg;else if(s>=y_t||r>Nm)return null}n.validateLayersElesOrdering(r,e);var l=n.layersByLevel,u=Math.pow(2,r),h=l[r]=l[r]||[],f,d=n.levelIsComplete(r,e),g,p=function(){var R=function(I){if(n.validateLayersElesOrdering(I,e),n.levelIsComplete(I,e))return g=l[I],!0},C=function(I){if(!g)for(var M=r+I;rg<=M&&M<=Nm&&!R(M);M+=I);};C(1),C(-1);for(var D=h.length-1;D>=0;D--){var P=h[D];P.invalid&&Yo(h,P)}};if(!d)p();else return h;var v=function(){if(!f){f=Mi();for(var R=0;R<e.length;R++)MV(f,e[R].boundingBox())}return f},m=function(R){R=R||{};var C=R.after;v();var D=Math.ceil(f.w*u),P=Math.ceil(f.h*u);if(D>CN||P>CN)return null;var _=D*P;if(_>S_t)return null;var I=n.makeLayer(f,r);if(C!=null){var M=h.indexOf(C)+1;h.splice(M,0,I)}else(R.insert===void 0||R.insert)&&h.unshift(I);return I};if(n.skipping&&!o)return null;for(var y=null,b=e.length/m_t,T=!o,w=0;w<e.length;w++){var k=e[w],S=k._private.rscratch,E=S.imgLayerCaches=S.imgLayerCaches||{},L=E[r];if(L){y=L;continue}if((!y||y.eles.length>=b||!AEt(y.bb,k.boundingBox()))&&(y=m({insert:!0,after:y}),!y))return null;g||T?n.queueLayer(y,k):n.drawEleInLayer(y,k,r,t),y.eles.push(k),E[r]=y}return g||(T?null:h)};zn.getEleLevelForLayerLevel=function(e,t){return e};zn.drawEleInLayer=function(e,t,r,n){var i=this,a=this.renderer,s=e.context,o=t.boundingBox();o.w===0||o.h===0||!t.visible()||(r=i.getEleLevelForLayerLevel(r,n),a.setImgSmoothing(s,!1),a.drawCachedElement(s,t,null,null,r,__t),a.setImgSmoothing(s,!0))};zn.levelIsComplete=function(e,t){var r=this,n=r.layersByLevel[e];if(!n||n.length===0)return!1;for(var i=0,a=0;a<n.length;a++){var s=n[a];if(s.reqs>0||s.invalid)return!1;i+=s.eles.length}return i===t.length};zn.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var n=0;n<r.length;n++){for(var i=r[n],a=-1,s=0;s<t.length;s++)if(i.eles[0]===t[s]){a=s;break}if(a<0){this.invalidateLayer(i);continue}for(var o=a,s=0;s<i.eles.length;s++)if(i.eles[s]!==t[o+s]){this.invalidateLayer(i);break}}};zn.updateElementsInLayers=function(e,t){for(var r=this,n=Np(e[0]),i=0;i<e.length;i++)for(var a=n?null:e[i],s=n?e[i]:e[i].ele,o=s._private.rscratch,l=o.imgLayerCaches=o.imgLayerCaches||{},u=rg;u<=Nm;u++){var h=l[u];h&&(a&&r.getEleLevelForLayerLevel(h.level)!==a.level||t(h,s,a))}};zn.haveLayers=function(){for(var e=this,t=!1,r=rg;r<=Nm;r++){var n=e.layersByLevel[r];if(n&&n.length>0){t=!0;break}}return t};zn.invalidateElements=function(e){var t=this;e.length!==0&&(t.lastInvalidationTime=no(),!(e.length===0||!t.haveLayers())&&t.updateElementsInLayers(e,function(n,i,a){t.invalidateLayer(n)}))};zn.invalidateLayer=function(e){if(this.lastInvalidationTime=no(),!e.invalid){var t=e.level,r=e.eles,n=this.layersByLevel[t];Yo(n,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<r.length;i++){var a=r[i]._private.rscratch.imgLayerCaches;a&&(a[t]=null)}}};zn.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(n,i,a){var s=n.replacement;if(s||(s=n.replacement=t.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)t.queueLayer(s,s.eles[o])})};zn.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()};zn.queueLayer=function(e,t){var r=this,n=r.layersQueue,i=e.elesQueue,a=i.hasId=i.hasId||{};if(!e.replacement){if(t){if(a[t.id()])return;i.push(t),a[t.id()]=!0}e.reqs?(e.reqs++,n.updateItem(e)):(e.reqs=1,n.push(e))}};zn.dequeue=function(e){for(var t=this,r=t.layersQueue,n=[],i=0;i<C_t&&r.size()!==0;){var a=r.peek();if(a.replacement){r.pop();continue}if(a.replaces&&a!==a.replaces.replacement){r.pop();continue}if(a.invalid){r.pop();continue}var s=a.elesQueue.shift();s&&(t.drawEleInLayer(a,s,a.level,e),i++),n.length===0&&n.push(!0),a.elesQueue.length===0&&(r.pop(),a.reqs=0,a.replaces&&t.applyLayerReplacement(a),t.requestRedraw())}return n};zn.applyLayerReplacement=function(e){var t=this,r=t.layersByLevel[e.level],n=e.replaces,i=r.indexOf(n);if(!(i<0||n.invalid)){r[i]=e;for(var a=0;a<e.eles.length;a++){var s=e.eles[a]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[e.level]=e)}t.requestRedraw()}};zn.requestRedraw=Pp(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100);zn.setupDequeueing=BG.setupDequeueing({deqRedrawThreshold:x_t,deqCost:T_t,deqAvgCost:w_t,deqNoDrawCost:E_t,deqFastCost:k_t,deq:function(t,r){return t.dequeue(r)},onDeqd:d_,shouldRedraw:LV,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var zG={},_N;function L_t(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.lineTo(n.x,n.y)}}function R_t(e,t,r){for(var n,i=0;i<t.length;i++){var a=t[i];i===0&&(n=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(r.x,r.y,n.x,n.y)}function AN(e,t,r){e.beginPath&&e.beginPath();for(var n=t,i=0;i<n.length;i++){var a=n[i];e.lineTo(a.x,a.y)}var s=r,o=r[0];e.moveTo(o.x,o.y);for(var i=1;i<s.length;i++){var a=s[i];e.lineTo(a.x,a.y)}e.closePath&&e.closePath()}function I_t(e,t,r,n,i){e.beginPath&&e.beginPath(),e.arc(r,n,i,0,Math.PI*2,!1);var a=t,s=a[0];e.moveTo(s.x,s.y);for(var o=0;o<a.length;o++){var l=a[o];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}function N_t(e,t,r,n){e.arc(t,r,n,0,Math.PI*2,!1)}zG.arrowShapeImpl=function(e){return(_N||(_N={polygon:L_t,"triangle-backcurve":R_t,"triangle-tee":AN,"circle-triangle":I_t,"triangle-cross":AN,circle:N_t}))[e]};var bs={};bs.drawElement=function(e,t,r,n,i,a){var s=this;t.isNode()?s.drawNode(e,t,r,n,i,a):s.drawEdge(e,t,r,n,i,a)};bs.drawElementOverlay=function(e,t){var r=this;t.isNode()?r.drawNodeOverlay(e,t):r.drawEdgeOverlay(e,t)};bs.drawElementUnderlay=function(e,t){var r=this;t.isNode()?r.drawNodeUnderlay(e,t):r.drawEdgeUnderlay(e,t)};bs.drawCachedElementPortion=function(e,t,r,n,i,a,s,o){var l=this,u=r.getBoundingBox(t);if(!(u.w===0||u.h===0)){var h=r.getElement(t,u,n,i,a);if(h!=null){var f=o(l,t);if(f===0)return;var d=s(l,t),g=u.x1,p=u.y1,v=u.w,m=u.h,y,b,T,w,k;if(d!==0){var S=r.getRotationPoint(t);T=S.x,w=S.y,e.translate(T,w),e.rotate(d),k=l.getImgSmoothing(e),k||l.setImgSmoothing(e,!0);var E=r.getRotationOffset(t);y=E.x,b=E.y}else y=g,b=p;var L;f!==1&&(L=e.globalAlpha,e.globalAlpha=L*f),e.drawImage(h.texture.canvas,h.x,0,h.width,h.height,y,b,v,m),f!==1&&(e.globalAlpha=L),d!==0&&(e.rotate(-d),e.translate(-T,-w),k||l.setImgSmoothing(e,!1))}else r.drawElement(e,t)}};var D_t=function(){return 0},M_t=function(t,r){return t.getTextAngle(r,null)},O_t=function(t,r){return t.getTextAngle(r,"source")},P_t=function(t,r){return t.getTextAngle(r,"target")},B_t=function(t,r){return r.effectiveOpacity()},lT=function(t,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};bs.drawCachedElement=function(e,t,r,n,i,a){var s=this,o=s.data,l=o.eleTxrCache,u=o.lblTxrCache,h=o.slbTxrCache,f=o.tlbTxrCache,d=t.boundingBox(),g=a===!0?l.reasons.highQuality:null;if(!(d.w===0||d.h===0||!t.visible())&&(!n||m_(d,n))){var p=t.isEdge(),v=t.element()._private.rscratch.badLine;s.drawElementUnderlay(e,t),s.drawCachedElementPortion(e,t,l,r,i,g,D_t,B_t),(!p||!v)&&s.drawCachedElementPortion(e,t,u,r,i,g,M_t,lT),p&&!v&&(s.drawCachedElementPortion(e,t,h,r,i,g,O_t,lT),s.drawCachedElementPortion(e,t,f,r,i,g,P_t,lT)),s.drawElementOverlay(e,t)}};bs.drawElements=function(e,t){for(var r=this,n=0;n<t.length;n++){var i=t[n];r.drawElement(e,i)}};bs.drawCachedElements=function(e,t,r,n){for(var i=this,a=0;a<t.length;a++){var s=t[a];i.drawCachedElement(e,s,r,n)}};bs.drawCachedNodes=function(e,t,r,n){for(var i=this,a=0;a<t.length;a++){var s=t[a];s.isNode()&&i.drawCachedElement(e,s,r,n)}};bs.drawLayeredElements=function(e,t,r,n){var i=this,a=i.data.lyrTxrCache.getLayers(t,r);if(a)for(var s=0;s<a.length;s++){var o=a[s],l=o.bb;l.w===0||l.h===0||e.drawImage(o.canvas,l.x1,l.y1,l.w,l.h)}else i.drawCachedElements(e,t,r,n)};var go={};go.drawEdge=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=t._private.rscratch;if(!(a&&!t.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var l;r&&(l=r,e.translate(-l.x1,-l.y1));var u=a?t.pstyle("opacity").value:1,h=a?t.pstyle("line-opacity").value:1,f=t.pstyle("curve-style").value,d=t.pstyle("line-style").value,g=t.pstyle("width").pfValue,p=t.pstyle("line-cap").value,v=t.pstyle("line-outline-width").value,m=t.pstyle("line-outline-color").value,y=u*h,b=u*h,T=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;f==="straight-triangle"?(s.eleStrokeStyle(e,t,I),s.drawEdgeTrianglePath(t,e,o.allpts)):(e.lineWidth=g,e.lineCap=p,s.eleStrokeStyle(e,t,I),s.drawEdgePath(t,e,o.allpts,d),e.lineCap="butt")},w=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;if(e.lineWidth=g+v,e.lineCap=p,v>0)s.colorStrokeStyle(e,m[0],m[1],m[2],I);else{e.lineCap="butt";return}f==="straight-triangle"?s.drawEdgeTrianglePath(t,e,o.allpts):(s.drawEdgePath(t,e,o.allpts,d),e.lineCap="butt")},k=function(){i&&s.drawEdgeOverlay(e,t)},S=function(){i&&s.drawEdgeUnderlay(e,t)},E=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;s.drawArrowheads(e,t,I)},L=function(){s.drawElementText(e,t,null,n)};e.lineJoin="round";var A=t.pstyle("ghost").value==="yes";if(A){var R=t.pstyle("ghost-offset-x").pfValue,C=t.pstyle("ghost-offset-y").pfValue,D=t.pstyle("ghost-opacity").value,P=y*D;e.translate(R,C),T(P),E(P),e.translate(-R,-C)}else w();S(),T(),E(),k(),L(),r&&e.translate(l.x1,l.y1)}};var VG=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,n){if(n.visible()){var i=n.pstyle("".concat(t,"-opacity")).value;if(i!==0){var a=this,s=a.usePaths(),o=n._private.rscratch,l=n.pstyle("".concat(t,"-padding")).pfValue,u=2*l,h=n.pstyle("".concat(t,"-color")).value;r.lineWidth=u,o.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",a.colorStrokeStyle(r,h[0],h[1],h[2],i),a.drawEdgePath(n,r,o.allpts,"solid")}}}};go.drawEdgeOverlay=VG("overlay");go.drawEdgeUnderlay=VG("underlay");go.drawEdgePath=function(e,t,r,n){var i=e._private.rscratch,a=t,s,o=!1,l=this.usePaths(),u=e.pstyle("line-dash-pattern").pfValue,h=e.pstyle("line-dash-offset").pfValue;if(l){var f=r.join("$"),d=i.pathCacheKey&&i.pathCacheKey===f;d?(s=t=i.pathCache,o=!0):(s=t=new Path2D,i.pathCacheKey=f,i.pathCache=s)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(u),a.lineDashOffset=h;break;case"solid":a.setLineDash([]);break}if(!o&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var g=2;g+3<r.length;g+=4)t.quadraticCurveTo(r[g],r[g+1],r[g+2],r[g+3]);break;case"straight":case"haystack":for(var p=2;p+1<r.length;p+=2)t.lineTo(r[p],r[p+1]);break;case"segments":if(i.isRound){var v=_i(i.roundCorners),m;try{for(v.s();!(m=v.n()).done;){var y=m.value;LG(t,y)}}catch(T){v.e(T)}finally{v.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var b=2;b+1<r.length;b+=2)t.lineTo(r[b],r[b+1]);break}t=a,l?t.stroke(s):t.stroke(),t.setLineDash&&t.setLineDash([])};go.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var n=e.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var a=[r[i+2]-r[i],r[i+3]-r[i+1]],s=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=[a[1]/s,-a[0]/s],l=[o[0]*n/2,o[1]*n/2];t.beginPath(),t.moveTo(r[i]-l[0],r[i+1]-l[1]),t.lineTo(r[i]+l[0],r[i+1]+l[1]),t.lineTo(r[i+2],r[i+3]),t.closePath(),t.fill()}};go.drawArrowheads=function(e,t,r){var n=t._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(e,t,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),i||this.drawArrowhead(e,t,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};go.drawArrowhead=function(e,t,r,n,i,a,s){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(a)||a==null)){var o=this,l=t.pstyle(r+"-arrow-shape").value;if(l!=="none"){var u=t.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",h=t.pstyle(r+"-arrow-fill").value,f=t.pstyle("width").pfValue,d=t.pstyle(r+"-arrow-width"),g=d.value==="match-line"?f:d.pfValue;d.units==="%"&&(g*=f);var p=t.pstyle("opacity").value;s===void 0&&(s=p);var v=e.globalCompositeOperation;(s!==1||h==="hollow")&&(e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,1),o.colorStrokeStyle(e,255,255,255,1),o.drawArrowShape(t,e,u,f,l,g,n,i,a),e.globalCompositeOperation=v);var m=t.pstyle(r+"-arrow-color").value;o.colorFillStyle(e,m[0],m[1],m[2],s),o.colorStrokeStyle(e,m[0],m[1],m[2],s),o.drawArrowShape(t,e,h,f,l,g,n,i,a)}}};go.drawArrowShape=function(e,t,r,n,i,a,s,o,l){var u=this,h=this.usePaths()&&i!=="triangle-cross",f=!1,d,g=t,p={x:s,y:o},v=e.pstyle("arrow-scale").value,m=this.getArrowWidth(n,v),y=u.arrowShapes[i];if(h){var b=u.arrowPathCache=u.arrowPathCache||[],T=cc(i),w=b[T];w!=null?(d=t=w,f=!0):(d=t=new Path2D,b[T]=d)}f||(t.beginPath&&t.beginPath(),h?y.draw(t,1,0,{x:0,y:0},1):y.draw(t,m,l,p,n),t.closePath&&t.closePath()),t=g,h&&(t.translate(s,o),t.rotate(l),t.scale(m,m)),(r==="filled"||r==="both")&&(h?t.fill(d):t.fill()),(r==="hollow"||r==="both")&&(t.lineWidth=a/(h?m:1),t.lineJoin="miter",h?t.stroke(d):t.stroke()),h&&(t.scale(1/m,1/m),t.rotate(-l),t.translate(-s,-o))};var I_={};I_.safeDrawImage=function(e,t,r,n,i,a,s,o,l,u){if(!(i<=0||a<=0||l<=0||u<=0))try{e.drawImage(t,r,n,i,a,s,o,l,u)}catch(h){or(h)}};I_.drawInscribedImage=function(e,t,r,n,i){var a=this,s=r.position(),o=s.x,l=s.y,u=r.cy().style(),h=u.getIndexedStyle.bind(u),f=h(r,"background-fit","value",n),d=h(r,"background-repeat","value",n),g=r.width(),p=r.height(),v=r.padding()*2,m=g+(h(r,"background-width-relative-to","value",n)==="inner"?0:v),y=p+(h(r,"background-height-relative-to","value",n)==="inner"?0:v),b=r._private.rscratch,T=h(r,"background-clip","value",n),w=T==="node",k=h(r,"background-image-opacity","value",n)*i,S=h(r,"background-image-smoothing","value",n),E=r.pstyle("corner-radius").value;E!=="auto"&&(E=r.pstyle("corner-radius").pfValue);var L=t.width||t.cachedW,A=t.height||t.cachedH;(L==null||A==null)&&(document.body.appendChild(t),L=t.cachedW=t.width||t.offsetWidth,A=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var R=L,C=A;if(h(r,"background-width","value",n)!=="auto"&&(h(r,"background-width","units",n)==="%"?R=h(r,"background-width","pfValue",n)*m:R=h(r,"background-width","pfValue",n)),h(r,"background-height","value",n)!=="auto"&&(h(r,"background-height","units",n)==="%"?C=h(r,"background-height","pfValue",n)*y:C=h(r,"background-height","pfValue",n)),!(R===0||C===0)){if(f==="contain"){var D=Math.min(m/R,y/C);R*=D,C*=D}else if(f==="cover"){var D=Math.max(m/R,y/C);R*=D,C*=D}var P=o-m/2,_=h(r,"background-position-x","units",n),I=h(r,"background-position-x","pfValue",n);_==="%"?P+=(m-R)*I:P+=I;var M=h(r,"background-offset-x","units",n),O=h(r,"background-offset-x","pfValue",n);M==="%"?P+=(m-R)*O:P+=O;var N=l-y/2,B=h(r,"background-position-y","units",n),z=h(r,"background-position-y","pfValue",n);B==="%"?N+=(y-C)*z:N+=z;var F=h(r,"background-offset-y","units",n),V=h(r,"background-offset-y","pfValue",n);F==="%"?N+=(y-C)*V:N+=V,b.pathCache&&(P-=o,N-=l,o=0,l=0);var G=e.globalAlpha;e.globalAlpha=k;var Y=a.getImgSmoothing(e),Q=!1;if(S==="no"&&Y?(a.setImgSmoothing(e,!1),Q=!0):S==="yes"&&!Y&&(a.setImgSmoothing(e,!0),Q=!0),d==="no-repeat")w&&(e.save(),b.pathCache?e.clip(b.pathCache):(a.nodeShapes[a.getNodeShape(r)].draw(e,o,l,m,y,E,b),e.clip())),a.safeDrawImage(e,t,0,0,L,A,P,N,R,C),w&&e.restore();else{var K=e.createPattern(t,d);e.fillStyle=K,a.nodeShapes[a.getNodeShape(r)].draw(e,o,l,m,y,E,b),e.translate(P,N),e.fill(),e.translate(-P,-N)}e.globalAlpha=G,Q&&a.setImgSmoothing(e,Y)}};var Oc={};Oc.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(p_(r*n));t=Math.pow(2,i)}var a=e.pstyle("font-size").pfValue*t,s=e.pstyle("min-zoomed-font-size").pfValue;return!(a<s)};Oc.drawElementText=function(e,t,r,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(a&&!s.eleTextBiggerThanMin(t))return}else if(n===!1)return;if(t.isNode()){var o=t.pstyle("label");if(!o||!o.value)return;var l=s.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var u=t.element()._private.rscratch.badLine,h=t.pstyle("label"),f=t.pstyle("source-label"),d=t.pstyle("target-label");if(u||(!h||!h.value)&&(!f||!f.value)&&(!d||!d.value))return;e.textAlign="center",e.textBaseline="bottom"}var g=!r,p;r&&(p=r,e.translate(-p.x1,-p.y1)),i==null?(s.drawText(e,t,null,g,a),t.isEdge()&&(s.drawText(e,t,"source",g,a),s.drawText(e,t,"target",g,a))):s.drawText(e,t,i,g,a),r&&e.translate(p.x1,p.y1)};Oc.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(t=this.fontCaches[r],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t};Oc.setupTextStyle=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",a=t.pstyle("font-family").strValue,s=t.pstyle("font-weight").strValue,o=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*o,u=t.pstyle("color").value,h=t.pstyle("text-outline-color").value;e.font=n+" "+s+" "+i+" "+a,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],o),this.colorStrokeStyle(e,h[0],h[1],h[2],l)};function cT(e,t,r,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+n-a,r),e.quadraticCurveTo(t+n,r,t+n,r+a),e.lineTo(t+n,r+i-a),e.quadraticCurveTo(t+n,r+i,t+n-a,r+i),e.lineTo(t+a,r+i),e.quadraticCurveTo(t,r+i,t,r+i-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),s?e.stroke():e.fill()}Oc.getTextAngle=function(e,t){var r,n=e._private,i=n.rscratch,a=t?t+"-":"",s=e.pstyle(a+"text-rotation");if(s.strValue==="autorotate"){var o=Ei(i,"labelAngle",t);r=e.isEdge()?o:0}else s.strValue==="none"?r=0:r=s.pfValue;return r};Oc.drawText=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=t._private,s=a.rscratch,o=i?t.effectiveOpacity():1;if(!(i&&(o===0||t.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var l=Ei(s,"labelX",r),u=Ei(s,"labelY",r),h,f,d=this.getLabelText(t,r);if(d!=null&&d!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(e,t,i);var g=r?r+"-":"",p=Ei(s,"labelWidth",r),v=Ei(s,"labelHeight",r),m=t.pstyle(g+"text-margin-x").pfValue,y=t.pstyle(g+"text-margin-y").pfValue,b=t.isEdge(),T=t.pstyle("text-halign").value,w=t.pstyle("text-valign").value;b&&(T="center",w="center"),l+=m,u+=y;var k;switch(n?k=this.getTextAngle(t,r):k=0,k!==0&&(h=l,f=u,e.translate(h,f),e.rotate(k),l=0,u=0),w){case"top":break;case"center":u+=v/2;break;case"bottom":u+=v;break}var S=t.pstyle("text-background-opacity").value,E=t.pstyle("text-border-opacity").value,L=t.pstyle("text-border-width").pfValue,A=t.pstyle("text-background-padding").pfValue,R=t.pstyle("text-background-shape").strValue,C=R.indexOf("round")===0,D=2;if(S>0||L>0&&E>0){var P=l-A;switch(T){case"left":P-=p;break;case"center":P-=p/2;break}var _=u-v-A,I=p+2*A,M=v+2*A;if(S>0){var O=e.fillStyle,N=t.pstyle("text-background-color").value;e.fillStyle="rgba("+N[0]+","+N[1]+","+N[2]+","+S*o+")",C?cT(e,P,_,I,M,D):e.fillRect(P,_,I,M),e.fillStyle=O}if(L>0&&E>0){var B=e.strokeStyle,z=e.lineWidth,F=t.pstyle("text-border-color").value,V=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+F[0]+","+F[1]+","+F[2]+","+E*o+")",e.lineWidth=L,e.setLineDash)switch(V){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=L/4,e.setLineDash([]);break;case"solid":e.setLineDash([]);break}if(C?cT(e,P,_,I,M,D,"stroke"):e.strokeRect(P,_,I,M),V==="double"){var G=L/2;C?cT(e,P+G,_+G,I-G*2,M-G*2,D,"stroke"):e.strokeRect(P+G,_+G,I-G*2,M-G*2)}e.setLineDash&&e.setLineDash([]),e.lineWidth=z,e.strokeStyle=B}}var Y=2*t.pstyle("text-outline-width").pfValue;if(Y>0&&(e.lineWidth=Y),t.pstyle("text-wrap").value==="wrap"){var Q=Ei(s,"labelWrapCachedLines",r),K=Ei(s,"labelLineHeight",r),it=p/2,ut=this.getLabelJustification(t);switch(ut==="auto"||(T==="left"?ut==="left"?l+=-p:ut==="center"&&(l+=-it):T==="center"?ut==="left"?l+=-it:ut==="right"&&(l+=it):T==="right"&&(ut==="center"?l+=it:ut==="right"&&(l+=p))),w){case"top":u-=(Q.length-1)*K;break;case"center":case"bottom":u-=(Q.length-1)*K;break}for(var q=0;q<Q.length;q++)Y>0&&e.strokeText(Q[q],l,u),e.fillText(Q[q],l,u),u+=K}else Y>0&&e.strokeText(d,l,u),e.fillText(d,l,u);k!==0&&(e.rotate(-k),e.translate(-h,-f))}}};var ol={};ol.drawNode=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,l,u=t._private,h=u.rscratch,f=t.position();if(!(!ne(f.x)||!ne(f.y))&&!(a&&!t.visible())){var d=a?t.effectiveOpacity():1,g=s.usePaths(),p,v=!1,m=t.padding();o=t.width()+2*m,l=t.height()+2*m;var y;r&&(y=r,e.translate(-y.x1,-y.y1));for(var b=t.pstyle("background-image"),T=b.value,w=new Array(T.length),k=new Array(T.length),S=0,E=0;E<T.length;E++){var L=T[E],A=w[E]=L!=null&&L!=="none";if(A){var R=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",E);S++,k[E]=s.getCachedImage(L,R,function(){u.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var C=t.pstyle("background-blacken").value,D=t.pstyle("border-width").pfValue,P=t.pstyle("background-opacity").value*d,_=t.pstyle("border-color").value,I=t.pstyle("border-style").value,M=t.pstyle("border-join").value,O=t.pstyle("border-cap").value,N=t.pstyle("border-position").value,B=t.pstyle("border-dash-pattern").pfValue,z=t.pstyle("border-dash-offset").pfValue,F=t.pstyle("border-opacity").value*d,V=t.pstyle("outline-width").pfValue,G=t.pstyle("outline-color").value,Y=t.pstyle("outline-style").value,Q=t.pstyle("outline-opacity").value*d,K=t.pstyle("outline-offset").value,it=t.pstyle("corner-radius").value;it!=="auto"&&(it=t.pstyle("corner-radius").pfValue);var ut=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P;s.eleFillStyle(e,t,Z)},q=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F;s.colorStrokeStyle(e,_[0],_[1],_[2],Z)},W=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q;s.colorStrokeStyle(e,G[0],G[1],G[2],Z)},H=function(Z,st,$,nt){var rt=s.nodePathCache=s.nodePathCache||[],ct=AV($==="polygon"?$+","+nt.join(","):$,""+st,""+Z,""+it),ot=rt[ct],vt,yt=!1;return ot!=null?(vt=ot,yt=!0,h.pathCache=vt):(vt=new Path2D,rt[ct]=h.pathCache=vt),{path:vt,cacheHit:yt}},U=t.pstyle("shape").strValue,X=t.pstyle("shape-polygon-points").pfValue;if(g){e.translate(f.x,f.y);var J=H(o,l,U,X);p=J.path,v=J.cacheHit}var j=function(){if(!v){var Z=f;g&&(Z={x:0,y:0}),s.nodeShapes[s.getNodeShape(t)].draw(p||e,Z.x,Z.y,o,l,it,h)}g?e.fill(p):e.fill()},gt=function(){for(var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,$=u.backgrounding,nt=0,rt=0;rt<k.length;rt++){var ct=t.cy().style().getIndexedStyle(t,"background-image-containment","value",rt);if(st&&ct==="over"||!st&&ct==="inside"){nt++;continue}w[rt]&&k[rt].complete&&!k[rt].error&&(nt++,s.drawInscribedImage(e,k[rt],t,rt,Z))}u.backgrounding=nt!==S,$!==u.backgrounding&&t.updateStyle(!1)},at=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasPie(t)&&(s.drawPie(e,t,st),Z&&(g||s.nodeShapes[s.getNodeShape(t)].draw(e,f.x,f.y,o,l,it,h)))},tt=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasStripe(t)&&(e.save(),g?e.clip(h.pathCache):(s.nodeShapes[s.getNodeShape(t)].draw(e,f.x,f.y,o,l,it,h),e.clip()),s.drawStripe(e,t,st),e.restore(),Z&&(g||s.nodeShapes[s.getNodeShape(t)].draw(e,f.x,f.y,o,l,it,h)))},kt=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,st=(C>0?C:-C)*Z,$=C>0?0:255;C!==0&&(s.colorFillStyle(e,$,$,$,st),g?e.fill(p):e.fill())},ft=function(){if(D>0){if(e.lineWidth=D,e.lineCap=O,e.lineJoin=M,e.setLineDash)switch(I){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(B),e.lineDashOffset=z;break;case"solid":case"double":e.setLineDash([]);break}if(N!=="center"){if(e.save(),e.lineWidth*=2,N==="inside")g?e.clip(p):e.clip();else{var Z=new Path2D;Z.rect(-o/2-D,-l/2-D,o+2*D,l+2*D),Z.addPath(p),e.clip(Z,"evenodd")}g?e.stroke(p):e.stroke(),e.restore()}else g?e.stroke(p):e.stroke();if(I==="double"){e.lineWidth=D/3;var st=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",g?e.stroke(p):e.stroke(),e.globalCompositeOperation=st}e.setLineDash&&e.setLineDash([])}},Dt=function(){if(V>0){if(e.lineWidth=V,e.lineCap="butt",e.setLineDash)switch(Y){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([]);break}var Z=f;g&&(Z={x:0,y:0});var st=s.getNodeShape(t),$=D;N==="inside"&&($=0),N==="outside"&&($*=2);var nt=(o+$+(V+K))/o,rt=(l+$+(V+K))/l,ct=o*nt,ot=l*rt,vt=s.nodeShapes[st].points,yt;if(g){var mt=H(ct,ot,st,vt);yt=mt.path}if(st==="ellipse")s.drawEllipsePath(yt||e,Z.x,Z.y,ct,ot);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(st)){var Mt=0,Yt=0,Bt=0;st==="round-diamond"?Mt=($+K+V)*1.4:st==="round-heptagon"?(Mt=($+K+V)*1.075,Bt=-($/2+K+V)/35):st==="round-hexagon"?Mt=($+K+V)*1.12:st==="round-pentagon"?(Mt=($+K+V)*1.13,Bt=-($/2+K+V)/15):st==="round-tag"?(Mt=($+K+V)*1.12,Yt=($/2+V+K)*.07):st==="round-triangle"&&(Mt=($+K+V)*(Math.PI/2),Bt=-($+K/2+V)/Math.PI),Mt!==0&&(nt=(o+Mt)/o,ct=o*nt,["round-hexagon","round-tag"].includes(st)||(rt=(l+Mt)/l,ot=l*rt)),it=it==="auto"?BV(ct,ot):it;for(var zt=ct/2,Gt=ot/2,It=it+($+V+K)/2,Vt=new Array(vt.length/2),Zt=new Array(vt.length/2),jt=0;jt<vt.length/2;jt++)Vt[jt]={x:Z.x+Yt+zt*vt[jt*2],y:Z.y+Bt+Gt*vt[jt*2+1]};var Pt,ce,$t,Ut,te=Vt.length;for(ce=Vt[te-1],Pt=0;Pt<te;Pt++)$t=Vt[Pt%te],Ut=Vt[(Pt+1)%te],Zt[Pt]=L_(ce,$t,Ut,It),ce=$t,$t=Ut;s.drawRoundPolygonPath(yt||e,Z.x+Yt,Z.y+Bt,o*nt,l*rt,vt,Zt)}else if(["roundrectangle","round-rectangle"].includes(st))it=it==="auto"?Ho(ct,ot):it,s.drawRoundRectanglePath(yt||e,Z.x,Z.y,ct,ot,it+($+V+K)/2);else if(["cutrectangle","cut-rectangle"].includes(st))it=it==="auto"?y_():it,s.drawCutRectanglePath(yt||e,Z.x,Z.y,ct,ot,null,it+($+V+K)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(st))it=it==="auto"?Ho(ct,ot):it,s.drawBottomRoundRectanglePath(yt||e,Z.x,Z.y,ct,ot,it+($+V+K)/2);else if(st==="barrel")s.drawBarrelPath(yt||e,Z.x,Z.y,ct,ot);else if(st.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(st)){var Qt=($+V+K)/o;vt=Cm(Sm(vt,Qt)),s.drawPolygonPath(yt||e,Z.x,Z.y,o,l,vt)}else{var Jt=($+V+K)/o;vt=Cm(Sm(vt,-Jt)),s.drawPolygonPath(yt||e,Z.x,Z.y,o,l,vt)}if(g?e.stroke(yt):e.stroke(),Y==="double"){e.lineWidth=$/3;var ie=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",g?e.stroke(yt):e.stroke(),e.globalCompositeOperation=ie}e.setLineDash&&e.setLineDash([])}},Ot=function(){i&&s.drawNodeOverlay(e,t,f,o,l)},Rt=function(){i&&s.drawNodeUnderlay(e,t,f,o,l)},Tt=function(){s.drawElementText(e,t,null,n)},At=t.pstyle("ghost").value==="yes";if(At){var bt=t.pstyle("ghost-offset-x").pfValue,wt=t.pstyle("ghost-offset-y").pfValue,Nt=t.pstyle("ghost-opacity").value,ht=Nt*d;e.translate(bt,wt),W(),Dt(),ut(Nt*P),j(),gt(ht,!0),q(Nt*F),ft(),at(C!==0||D!==0),tt(C!==0||D!==0),gt(ht,!1),kt(ht),e.translate(-bt,-wt)}g&&e.translate(-f.x,-f.y),Rt(),g&&e.translate(f.x,f.y),W(),Dt(),ut(),j(),gt(d,!0),q(),ft(),at(C!==0||D!==0),tt(C!==0||D!==0),gt(d,!1),kt(),g&&e.translate(-f.x,-f.y),Tt(),Ot(),r&&e.translate(y.x1,y.y1)}};var GG=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,n,i,a,s){var o=this;if(n.visible()){var l=n.pstyle("".concat(t,"-padding")).pfValue,u=n.pstyle("".concat(t,"-opacity")).value,h=n.pstyle("".concat(t,"-color")).value,f=n.pstyle("".concat(t,"-shape")).value,d=n.pstyle("".concat(t,"-corner-radius")).value;if(u>0){if(i=i||n.position(),a==null||s==null){var g=n.padding();a=n.width()+2*g,s=n.height()+2*g}o.colorFillStyle(r,h[0],h[1],h[2],u),o.nodeShapes[f].draw(r,i.x,i.y,a+l*2,s+l*2,d),r.fill()}}}};ol.drawNodeOverlay=GG("overlay");ol.drawNodeUnderlay=GG("underlay");ol.hasPie=function(e){return e=e[0],e._private.hasPie};ol.hasStripe=function(e){return e=e[0],e._private.hasStripe};ol.drawPie=function(e,t,r,n){t=t[0],n=n||t.position();var i=t.cy().style(),a=t.pstyle("pie-size"),s=t.pstyle("pie-hole"),o=t.pstyle("pie-start-angle").pfValue,l=n.x,u=n.y,h=t.width(),f=t.height(),d=Math.min(h,f)/2,g,p=0,v=this.usePaths();if(v&&(l=0,u=0),a.units==="%"?d=d*a.pfValue:a.pfValue!==void 0&&(d=a.pfValue/2),s.units==="%"?g=d*s.pfValue:s.pfValue!==void 0&&(g=s.pfValue/2),!(g>=d))for(var m=1;m<=i.pieBackgroundN;m++){var y=t.pstyle("pie-"+m+"-background-size").value,b=t.pstyle("pie-"+m+"-background-color").value,T=t.pstyle("pie-"+m+"-background-opacity").value*r,w=y/100;w+p>1&&(w=1-p);var k=1.5*Math.PI+2*Math.PI*p;k+=o;var S=2*Math.PI*w,E=k+S;y===0||p>=1||p+w>1||(g===0?(e.beginPath(),e.moveTo(l,u),e.arc(l,u,d,k,E),e.closePath()):(e.beginPath(),e.arc(l,u,d,k,E),e.arc(l,u,g,E,k,!0),e.closePath()),this.colorFillStyle(e,b[0],b[1],b[2],T),e.fill(),p+=w)}};ol.drawStripe=function(e,t,r,n){t=t[0],n=n||t.position();var i=t.cy().style(),a=n.x,s=n.y,o=t.width(),l=t.height(),u=0,h=this.usePaths();e.save();var f=t.pstyle("stripe-direction").value,d=t.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":e.rotate(-Math.PI/2);break}var g=o,p=l;d.units==="%"?(g=g*d.pfValue,p=p*d.pfValue):d.pfValue!==void 0&&(g=d.pfValue,p=d.pfValue),h&&(a=0,s=0),s-=g/2,a-=p/2;for(var v=1;v<=i.stripeBackgroundN;v++){var m=t.pstyle("stripe-"+v+"-background-size").value,y=t.pstyle("stripe-"+v+"-background-color").value,b=t.pstyle("stripe-"+v+"-background-opacity").value*r,T=m/100;T+u>1&&(T=1-u),!(m===0||u>=1||u+T>1)&&(e.beginPath(),e.rect(a,s+p*u,g,p*T),e.closePath(),this.colorFillStyle(e,y[0],y[1],y[2],b),e.fill(),u+=T)}e.restore()};var yi={},F_t=100;yi.getPixelRatio=function(){var e=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var t=this.cy.window(),r=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/r};yi.paintCache=function(e){for(var t=this.paintCaches=this.paintCaches||[],r=!0,n,i=0;i<t.length;i++)if(n=t[i],n.context===e){r=!1;break}return r&&(n={context:e},t.push(n)),n};yi.createGradientStyleFor=function(e,t,r,n,i){var a,s=this.usePaths(),o=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var u=r.sourceEndpoint(),h=r.targetEndpoint(),f=r.midpoint(),d=uc(u,f),g=uc(h,f);a=e.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,g))}else{var p=s?{x:0,y:0}:r.position(),v=r.paddedWidth(),m=r.paddedHeight();a=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(v,m))}else if(r.isEdge()){var y=r.sourceEndpoint(),b=r.targetEndpoint();a=e.createLinearGradient(y.x,y.y,b.x,b.y)}else{var T=s?{x:0,y:0}:r.position(),w=r.paddedWidth(),k=r.paddedHeight(),S=w/2,E=k/2,L=r.pstyle("background-gradient-direction").value;switch(L){case"to-bottom":a=e.createLinearGradient(T.x,T.y-E,T.x,T.y+E);break;case"to-top":a=e.createLinearGradient(T.x,T.y+E,T.x,T.y-E);break;case"to-left":a=e.createLinearGradient(T.x+S,T.y,T.x-S,T.y);break;case"to-right":a=e.createLinearGradient(T.x-S,T.y,T.x+S,T.y);break;case"to-bottom-right":case"to-right-bottom":a=e.createLinearGradient(T.x-S,T.y-E,T.x+S,T.y+E);break;case"to-top-right":case"to-right-top":a=e.createLinearGradient(T.x-S,T.y+E,T.x+S,T.y-E);break;case"to-bottom-left":case"to-left-bottom":a=e.createLinearGradient(T.x+S,T.y-E,T.x-S,T.y+E);break;case"to-top-left":case"to-left-top":a=e.createLinearGradient(T.x+S,T.y+E,T.x-S,T.y-E);break}}if(!a)return null;for(var A=l.length===o.length,R=o.length,C=0;C<R;C++)a.addColorStop(A?l[C]:C/(R-1),"rgba("+o[C][0]+","+o[C][1]+","+o[C][2]+","+i+")");return a};yi.gradientFillStyle=function(e,t,r,n){var i=this.createGradientStyleFor(e,"background",t,r,n);if(!i)return null;e.fillStyle=i};yi.colorFillStyle=function(e,t,r,n,i){e.fillStyle="rgba("+t+","+r+","+n+","+i+")"};yi.eleFillStyle=function(e,t,r){var n=t.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(e,t,n,r);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],r)}};yi.gradientStrokeStyle=function(e,t,r,n){var i=this.createGradientStyleFor(e,"line",t,r,n);if(!i)return null;e.strokeStyle=i};yi.colorStrokeStyle=function(e,t,r,n,i){e.strokeStyle="rgba("+t+","+r+","+n+","+i+")"};yi.eleStrokeStyle=function(e,t,r){var n=t.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(e,t,n,r);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],r)}};yi.matchCanvasSize=function(e){var t=this,r=t.data,n=t.findContainerClientCoords(),i=n[2],a=n[3],s=t.getPixelRatio(),o=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var l=i*s,u=a*s,h;if(!(l===t.canvasWidth&&u===t.canvasHeight)){t.fontCaches=null;var f=r.canvasContainer;f.style.width=i+"px",f.style.height=a+"px";for(var d=0;d<t.CANVAS_LAYERS;d++)h=r.canvases[d],h.width=l,h.height=u,h.style.width=i+"px",h.style.height=a+"px";for(var d=0;d<t.BUFFER_COUNT;d++)h=r.bufferCanvases[d],h.width=l,h.height=u,h.style.width=i+"px",h.style.height=a+"px";t.textureMult=1,s<=1&&(h=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,h.width=l*t.textureMult,h.height=u*t.textureMult),t.canvasWidth=l,t.canvasHeight=u,t.pixelRatio=s}};yi.renderTo=function(e,t,r,n){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};yi.clearCanvas=function(){var e=this,t=e.data;function r(n){n.clearRect(0,0,e.canvasWidth,e.canvasHeight)}r(t.contexts[e.NODE]),r(t.contexts[e.DRAG])};yi.render=function(e){var t=this;e=e||NV();var r=t.cy,n=e.forcedContext,i=e.drawAllLayers,a=e.drawOnlyNodeLayer,s=e.forcedZoom,o=e.forcedPan,l=e.forcedPxRatio===void 0?this.getPixelRatio():e.forcedPxRatio,u=t.data,h=u.canvasNeedsRedraw,f=t.textureOnViewport&&!n&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),d=e.motionBlur!==void 0?e.motionBlur:t.motionBlur,g=t.motionBlurPxRatio,p=r.hasCompoundNodes(),v=t.hoverData.draggingEles,m=!!(t.hoverData.selecting||t.touchData.selecting);d=d&&!n&&t.motionBlurEnabled&&!m;var y=d;n||(t.prevPxRatio!==l&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=l),!n&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),d&&(t.mbFrames==null&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(y=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!f&&(h[t.NODE]=!0,h[t.SELECT_BOX]=!0);var b=r.style(),T=r.zoom(),w=s!==void 0?s:T,k=r.pan(),S={x:k.x,y:k.y},E={zoom:T,pan:{x:k.x,y:k.y}},L=t.prevViewport,A=L===void 0||E.zoom!==L.zoom||E.pan.x!==L.pan.x||E.pan.y!==L.pan.y;!A&&!(v&&!p)&&(t.motionBlurPxRatio=1),o&&(S=o),w*=l,S.x*=l,S.y*=l;var R=t.getCachedZSortedEles();function C(q,W,H,U,X){var J=q.globalCompositeOperation;q.globalCompositeOperation="destination-out",t.colorFillStyle(q,255,255,255,t.motionBlurTransparency),q.fillRect(W,H,U,X),q.globalCompositeOperation=J}function D(q,W){var H,U,X,J;!t.clearingMotionBlur&&(q===u.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]||q===u.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG])?(H={x:k.x*g,y:k.y*g},U=T*g,X=t.canvasWidth*g,J=t.canvasHeight*g):(H=S,U=w,X=t.canvasWidth,J=t.canvasHeight),q.setTransform(1,0,0,1,0,0),W==="motionBlur"?C(q,0,0,X,J):!n&&(W===void 0||W)&&q.clearRect(0,0,X,J),i||(q.translate(H.x,H.y),q.scale(U,U)),o&&q.translate(o.x,o.y),s&&q.scale(s,s)}if(f||(t.textureDrawLastFrame=!1),f){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=r.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var P=t.data.bufferContexts[t.TEXTURE_BUFFER];P.setTransform(1,0,0,1,0,0),P.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:P,drawOnlyNodeLayer:!0,forcedPxRatio:l*t.textureMult});var E=t.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:t.canvasWidth,height:t.canvasHeight};E.mpan={x:(0-E.pan.x)/E.zoom,y:(0-E.pan.y)/E.zoom}}h[t.DRAG]=!1,h[t.NODE]=!1;var _=u.contexts[t.NODE],I=t.textureCache.texture,E=t.textureCache.viewport;_.setTransform(1,0,0,1,0,0),d?C(_,0,0,E.width,E.height):_.clearRect(0,0,E.width,E.height);var M=b.core("outside-texture-bg-color").value,O=b.core("outside-texture-bg-opacity").value;t.colorFillStyle(_,M[0],M[1],M[2],O),_.fillRect(0,0,E.width,E.height);var T=r.zoom();D(_,!1),_.clearRect(E.mpan.x,E.mpan.y,E.width/E.zoom/l,E.height/E.zoom/l),_.drawImage(I,E.mpan.x,E.mpan.y,E.width/E.zoom/l,E.height/E.zoom/l)}else t.textureOnViewport&&!n&&(t.textureCache=null);var N=r.extent(),B=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),z=t.hideEdgesOnViewport&&B,F=[];if(F[t.NODE]=!h[t.NODE]&&d&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,F[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),F[t.DRAG]=!h[t.DRAG]&&d&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,F[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),h[t.NODE]||i||a||F[t.NODE]){var V=d&&!F[t.NODE]&&g!==1,_=n||(V?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:u.contexts[t.NODE]),G=d&&!V?"motionBlur":void 0;D(_,G),z?t.drawCachedNodes(_,R.nondrag,l,N):t.drawLayeredElements(_,R.nondrag,l,N),t.debug&&t.drawDebugPoints(_,R.nondrag),!i&&!d&&(h[t.NODE]=!1)}if(!a&&(h[t.DRAG]||i||F[t.DRAG])){var V=d&&!F[t.DRAG]&&g!==1,_=n||(V?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:u.contexts[t.DRAG]);D(_,d&&!V?"motionBlur":void 0),z?t.drawCachedNodes(_,R.drag,l,N):t.drawCachedElements(_,R.drag,l,N),t.debug&&t.drawDebugPoints(_,R.drag),!i&&!d&&(h[t.DRAG]=!1)}if(this.drawSelectionRectangle(e,D),d&&g!==1){var Y=u.contexts[t.NODE],Q=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],K=u.contexts[t.DRAG],it=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],ut=function(W,H,U){W.setTransform(1,0,0,1,0,0),U||!y?W.clearRect(0,0,t.canvasWidth,t.canvasHeight):C(W,0,0,t.canvasWidth,t.canvasHeight);var X=g;W.drawImage(H,0,0,t.canvasWidth*X,t.canvasHeight*X,0,0,t.canvasWidth,t.canvasHeight)};(h[t.NODE]||F[t.NODE])&&(ut(Y,Q,F[t.NODE]),h[t.NODE]=!1),(h[t.DRAG]||F[t.DRAG])&&(ut(K,it,F[t.DRAG]),h[t.DRAG]=!1)}t.prevViewport=E,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),d&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!f,t.mbFrames=0,h[t.NODE]=!0,h[t.DRAG]=!0,t.redraw()},F_t)),n||r.emit("render")};var Uf;yi.drawSelectionRectangle=function(e,t){var r=this,n=r.cy,i=r.data,a=n.style(),s=e.drawOnlyNodeLayer,o=e.drawAllLayers,l=i.canvasNeedsRedraw,u=e.forcedContext;if(r.showFps||!s&&l[r.SELECT_BOX]&&!o){var h=u||i.contexts[r.SELECT_BOX];if(t(h),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var f=r.cy.zoom(),d=a.core("selection-box-border-width").value/f;h.lineWidth=d,h.fillStyle="rgba("+a.core("selection-box-color").value[0]+","+a.core("selection-box-color").value[1]+","+a.core("selection-box-color").value[2]+","+a.core("selection-box-opacity").value+")",h.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),d>0&&(h.strokeStyle="rgba("+a.core("selection-box-border-color").value[0]+","+a.core("selection-box-border-color").value[1]+","+a.core("selection-box-border-color").value[2]+","+a.core("selection-box-opacity").value+")",h.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(i.bgActivePosistion&&!r.hoverData.selecting){var f=r.cy.zoom(),g=i.bgActivePosistion;h.fillStyle="rgba("+a.core("active-bg-color").value[0]+","+a.core("active-bg-color").value[1]+","+a.core("active-bg-color").value[2]+","+a.core("active-bg-opacity").value+")",h.beginPath(),h.arc(g.x,g.y,a.core("active-bg-size").pfValue/f,0,2*Math.PI),h.fill()}var p=r.lastRedrawTime;if(r.showFps&&p){p=Math.round(p);var v=Math.round(1e3/p),m="1 frame = "+p+" ms = "+v+" fps";if(h.setTransform(1,0,0,1,0,0),h.fillStyle="rgba(255, 0, 0, 0.75)",h.strokeStyle="rgba(255, 0, 0, 0.75)",h.font="30px Arial",!Uf){var y=h.measureText(m);Uf=y.actualBoundingBoxAscent}h.fillText(m,0,Uf);var b=60;h.strokeRect(0,Uf+10,250,20),h.fillRect(0,Uf+10,250*Math.min(v/b,1),20)}o||(l[r.SELECT_BOX]=!1)}};function LN(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(n));return n}function $_t(e,t,r){var n=LN(e,e.VERTEX_SHADER,t),i=LN(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,n),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Error("Could not initialize shaders");return a}function z_t(e,t,r){r===void 0&&(r=t);var n=e.makeOffscreenCanvas(t,r),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function N_(e){var t=e.pixelRatio,r=e.cy.zoom(),n=e.cy.pan();return{zoom:r*t,pan:{x:n.x*t,y:n.y*t}}}function V_t(e){var t=e.pixelRatio,r=e.cy.zoom();return r*t}function G_t(e,t,r,n,i){var a=n*r+t.x,s=i*r+t.y;return s=Math.round(e.canvasHeight-s),[a,s]}function U_t(e){return e.pstyle("background-fill").value!=="solid"||e.pstyle("background-image").strValue!=="none"?!1:e.pstyle("border-width").value===0||e.pstyle("border-opacity").value===0?!0:e.pstyle("border-style").value==="solid"}function W_t(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function ml(e,t,r){var n=e[0]/255,i=e[1]/255,a=e[2]/255,s=t,o=r||new Array(4);return o[0]=n*s,o[1]=i*s,o[2]=a*s,o[3]=s,o}function Hc(e,t){var r=t||new Array(4);return r[0]=(e>>0&255)/255,r[1]=(e>>8&255)/255,r[2]=(e>>16&255)/255,r[3]=(e>>24&255)/255,r}function Y_t(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function H_t(e,t){var r=e.createTexture();return r.buffer=function(n){e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},r.deleteTexture=function(){e.deleteTexture(r)},r}function UG(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function WG(e,t,r){switch(t){case e.FLOAT:return new Float32Array(r);case e.INT:return new Int32Array(r)}}function q_t(e,t,r,n,i,a){switch(t){case e.FLOAT:return new Float32Array(r.buffer,a*n,i);case e.INT:return new Int32Array(r.buffer,a*n,i)}}function X_t(e,t,r,n){var i=UG(e,t),a=tn(i,2),s=a[0],o=a[1],l=WG(e,o,n),u=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,l,e.STATIC_DRAW),o===e.FLOAT?e.vertexAttribPointer(r,s,o,!1,0,0):o===e.INT&&e.vertexAttribIPointer(r,s,o,0,0),e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,null),u}function qa(e,t,r,n){var i=UG(e,r),a=tn(i,3),s=a[0],o=a[1],l=a[2],u=WG(e,o,t*s),h=s*l,f=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,f),e.bufferData(e.ARRAY_BUFFER,t*h,e.DYNAMIC_DRAW),e.enableVertexAttribArray(n),o===e.FLOAT?e.vertexAttribPointer(n,s,o,!1,h,0):o===e.INT&&e.vertexAttribIPointer(n,s,o,h,0),e.vertexAttribDivisor(n,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var d=new Array(t),g=0;g<t;g++)d[g]=q_t(e,o,u,h,s,g);return f.dataArray=u,f.stride=h,f.size=s,f.getView=function(p){return d[p]},f.setPoint=function(p,v,m){var y=d[p];y[0]=v,y[1]=m},f.bufferSubData=function(p){e.bindBuffer(e.ARRAY_BUFFER,f),p?e.bufferSubData(e.ARRAY_BUFFER,0,u,0,p*s):e.bufferSubData(e.ARRAY_BUFFER,0,u)},f}function j_t(e,t,r){for(var n=9,i=new Float32Array(t*n),a=new Array(t),s=0;s<t;s++){var o=s*n*4;a[s]=new Float32Array(i.buffer,o,n)}var l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,i.byteLength,e.DYNAMIC_DRAW);for(var u=0;u<3;u++){var h=r+u;e.enableVertexAttribArray(h),e.vertexAttribPointer(h,3,e.FLOAT,!1,3*12,u*12),e.vertexAttribDivisor(h,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),l.getMatrixView=function(f){return a[f]},l.setData=function(f,d){a[d].set(f,0)},l.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferSubData(e.ARRAY_BUFFER,0,i)},l}function K_t(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(n,i){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n,i,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}var RN=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function uT(){var e=new RN(9);return RN!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function IN(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Z_t(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],h=t[7],f=t[8],d=r[0],g=r[1],p=r[2],v=r[3],m=r[4],y=r[5],b=r[6],T=r[7],w=r[8];return e[0]=d*n+g*s+p*u,e[1]=d*i+g*o+p*h,e[2]=d*a+g*l+p*f,e[3]=v*n+m*s+y*u,e[4]=v*i+m*o+y*h,e[5]=v*a+m*l+y*f,e[6]=b*n+T*s+w*u,e[7]=b*i+T*o+w*h,e[8]=b*a+T*l+w*f,e}function V1(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],h=t[7],f=t[8],d=r[0],g=r[1];return e[0]=n,e[1]=i,e[2]=a,e[3]=s,e[4]=o,e[5]=l,e[6]=d*n+g*s+u,e[7]=d*i+g*o+h,e[8]=d*a+g*l+f,e}function NN(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],h=t[7],f=t[8],d=Math.sin(r),g=Math.cos(r);return e[0]=g*n+d*s,e[1]=g*i+d*o,e[2]=g*a+d*l,e[3]=g*s-d*n,e[4]=g*o-d*i,e[5]=g*l-d*a,e[6]=u,e[7]=h,e[8]=f,e}function tk(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Q_t(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}var J_t=function(){function e(t,r,n,i){il(this,e),this.debugID=Math.floor(Math.random()*1e4),this.r=t,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(t,r,r),this.scratch=i(t,r,this.texHeight,"scratch")}return al(e,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,i=r.h,a=this.texHeight,s=this.texSize,o=a/i,l=n*o,u=i*o;return l>s&&(o=s/n,l=n*o,u=i*o),{scale:o,texW:l,texH:u}}},{key:"draw",value:function(r,n,i){var a=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,l=this.texHeight,u=this.getScale(n),h=u.scale,f=u.texW,d=u.texH,g=function(T,w){if(i&&w){var k=w.context,S=T.x,E=T.row,L=S,A=l*E;k.save(),k.translate(L,A),k.scale(h,h),i(k,n),k.restore()}},p=[null,null],v=function(){g(a.freePointer,a.canvas),p[0]={x:a.freePointer.x,y:a.freePointer.row*l,w:f,h:d},p[1]={x:a.freePointer.x+f,y:a.freePointer.row*l,w:0,h:d},a.freePointer.x+=f,a.freePointer.x==s&&(a.freePointer.x=0,a.freePointer.row++)},m=function(){var T=a.scratch,w=a.canvas;T.clear(),g({x:0,row:0},T);var k=s-a.freePointer.x,S=f-k,E=l;{var L=a.freePointer.x,A=a.freePointer.row*l,R=k;w.context.drawImage(T,0,0,R,E,L,A,R,E),p[0]={x:L,y:A,w:R,h:d}}{var C=k,D=(a.freePointer.row+1)*l,P=S;w&&w.context.drawImage(T,C,0,P,E,0,D,P,E),p[1]={x:0,y:D,w:P,h:d}}a.freePointer.x=S,a.freePointer.row++},y=function(){a.freePointer.x=0,a.freePointer.row++};if(this.freePointer.x+f<=s)v();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(y(),v()):this.enableWrapping?m():(y(),v())}return this.keyToLocation.set(r,p),this.needsBuffer=!0,p}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,i=this.texRows,a=this.getScale(r),s=a.texW;return this.freePointer.x+s>n?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=H_t(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),tAt=function(){function e(t,r,n,i){il(this,e),this.r=t,this.texSize=r,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return al(e,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,i=this.texRows,a=this.createTextureCanvas;return new J_t(r,n,i,a)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,i=this.texRows,a=this.createTextureCanvas,s=Math.floor(n/i);this.scratch=a(r,n,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,i){var a=this.styleKeyToAtlas.get(r);return a||(a=this.atlases[this.atlases.length-1],(!a||!a.canFit(n))&&(a&&a.lock(),a=this._createAtlas(),this.atlases.push(a)),a.draw(r,n,i),this.styleKeyToAtlas.set(r,a)),a}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var i=[],a=new Map,s=null,o=_i(this.atlases),l;try{var u=function(){var f=l.value,d=f.getKeys(),g=eAt(n,d);if(g.size===0)return i.push(f),d.forEach(function(k){return a.set(k,f)}),1;s||(s=r._createAtlas(),i.push(s));var p=_i(d),v;try{for(p.s();!(v=p.n()).done;){var m=v.value;if(!g.has(m)){var y=f.getOffsets(m),b=tn(y,2),T=b[0],w=b[1];s.canFit({w:T.w+w.w,h:T.h})||(s.lock(),s=r._createAtlas(),i.push(s)),f.canvas&&(r._copyTextureToNewAtlas(m,f,s),a.set(m,s))}}}catch(k){p.e(k)}finally{p.f()}f.dispose()};for(o.s();!(l=o.n()).done;)u()}catch(h){o.e(h)}finally{o.f()}this.atlases=i,this.styleKeyToAtlas=a,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,i){var a=n.getOffsets(r),s=tn(a,2),o=s[0],l=s[1];if(l.w===0)i.draw(r,o,function(d){d.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var u=this._getScratchCanvas();u.clear(),u.context.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),u.context.drawImage(n.canvas,l.x,l.y,l.w,l.h,o.w,0,l.w,l.h);var h=o.w+l.w,f=o.h;i.draw(r,{w:h,h:f},function(d){d.drawImage(u,0,0,h,f,0,0,h,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function eAt(e,t){return e.intersection?e.intersection(t):new Set(Tm(e).filter(function(r){return t.has(r)}))}var rAt=function(){function e(t,r){il(this,e),this.r=t,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return al(e,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var i=this.globalOptions,a=i.webglTexSize,s=i.createTextureCanvas,o=n.texRows,l=this._cacheScratchCanvas(s),u=new tAt(this.r,a,o,l);this.collections.set(r,u)}},{key:"addRenderType",value:function(r,n){var i=n.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var a=this.collections.get(i),s=Ce({type:r,atlasCollection:a},n);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,i=-1,a=null;return function(s,o,l,u){return u?((!a||o!=n||l!=i)&&(n=o,i=l,a=r(s,o,l)),a):r(s,o,l)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.forceRedraw,s=a===void 0?!1:a,o=i.filterEle,l=o===void 0?function(){return!0}:o,u=i.filterType,h=u===void 0?function(){return!0}:u,f=!1,d=!1,g=_i(r),p;try{for(g.s();!(p=g.n()).done;){var v=p.value;if(l(v)){var m=_i(this.renderTypes.values()),y;try{var b=function(){var w=y.value,k=w.type;if(h(k)){var S=n.collections.get(w.collection),E=w.getKey(v),L=Array.isArray(E)?E:[E];if(s)L.forEach(function(D){return S.markKeyForGC(D)}),d=!0;else{var A=w.getID?w.getID(v):v.id(),R=n._key(k,A),C=n.typeAndIdToKey.get(R);C!==void 0&&!W_t(L,C)&&(f=!0,n.typeAndIdToKey.delete(R),C.forEach(function(D){return S.markKeyForGC(D)}))}}};for(m.s();!(y=m.n()).done;)b()}catch(T){m.e(T)}finally{m.f()}}}}catch(T){g.e(T)}finally{g.f()}return d&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var r=_i(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;i.gc()}}catch(a){r.e(a)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,i,a){var s=this.renderTypes.get(n),o=this.collections.get(s.collection),l=!1,u=o.draw(a,i,function(d){s.drawClipped?(d.save(),d.beginPath(),d.rect(0,0,i.w,i.h),d.clip(),s.drawElement(d,r,i,!0,!0),d.restore()):s.drawElement(d,r,i,!0,!0),l=!0});if(l){var h=s.getID?s.getID(r):r.id(),f=this._key(n,h);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(a):this.typeAndIdToKey.set(f,[a])}return u}},{key:"getAtlasInfo",value:function(r,n){var i=this,a=this.renderTypes.get(n),s=a.getKey(r),o=Array.isArray(s)?s:[s];return o.map(function(l){var u=a.getBoundingBox(r,l),h=i.getOrCreateAtlas(r,n,u,l),f=h.getOffsets(l),d=tn(f,2),g=d[0],p=d[1];return{atlas:h,tex:g,tex1:g,tex2:p,bb:u}})}},{key:"getDebugInfo",value:function(){var r=[],n=_i(this.collections),i;try{for(n.s();!(i=n.n()).done;){var a=tn(i.value,2),s=a[0],o=a[1],l=o.getCounts(),u=l.keyCount,h=l.atlasCount;r.push({type:s,keyCount:u,atlasCount:h})}}catch(f){n.e(f)}finally{n.f()}return r}}])}(),nAt=function(){function e(t){il(this,e),this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.batchAtlases=[]}return al(e,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),iAt=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,aAt=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,sAt=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,oAt=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,ng={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Dm={IGNORE:1,USE_BB:2},hT=0,DN=1,MN=2,fT=3,qc=4,z0=5,Wf=6,Yf=7,lAt=function(){function e(t,r,n){il(this,e),this.r=t,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=z_t,this.atlasManager=new rAt(t,n),this.batchManager=new nAt(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(ng.SCREEN),this.pickingProgram=this._createShaderProgram(ng.PICKING),this.vao=this._createVAO()}return al(e,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.type,a=this.atlasManager;return i?a.invalidate(r,{filterType:function(o){return o===i},forceRedraw:!0}):a.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(hT,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(qc," || aVertType == ").concat(Yf,` 
             || aVertType == `).concat(z0," || aVertType == ").concat(Wf,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(DN,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(MN,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(fT,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),a=this.batchManager.getIndexArray(),s=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(a.map(function(u){return"uniform sampler2D uTexture".concat(u,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(iAt,`
      `).concat(aAt,`
      `).concat(sAt,`
      `).concat(oAt,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(hT,`) {
          // look up the texel from the texture unit
          `).concat(a.map(function(u){return"if(vAtlasId == ".concat(u,") outColor = texture(uTexture").concat(u,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(fT,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(qc,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(qc," || vVertType == ").concat(Yf,` 
          || vVertType == `).concat(z0," || vVertType == ").concat(Wf,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(qc,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(Yf,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(Yf,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=$_t(n,i,s);o.aPosition=n.getAttribLocation(o,"aPosition"),o.aIndex=n.getAttribLocation(o,"aIndex"),o.aVertType=n.getAttribLocation(o,"aVertType"),o.aTransform=n.getAttribLocation(o,"aTransform"),o.aAtlasId=n.getAttribLocation(o,"aAtlasId"),o.aTex=n.getAttribLocation(o,"aTex"),o.aPointAPointB=n.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=n.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=n.getAttribLocation(o,"aLineWidth"),o.aColor=n.getAttribLocation(o,"aColor"),o.aCornerRadius=n.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=n.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=n.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=n.getUniformLocation(o,"uAtlasSize"),o.uBGColor=n.getUniformLocation(o,"uBGColor"),o.uZoom=n.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var l=0;l<this.batchManager.getMaxAtlasesPerBatch();l++)o.uTextures.push(n.getUniformLocation(o,"uTexture".concat(l)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,i=this.gl,a=this.program,s=i.createVertexArray();return i.bindVertexArray(s),X_t(i,"vec2",a.aPosition,r),this.transformBuffer=j_t(i,n,a.aTransform),this.indexBuffer=qa(i,n,"vec4",a.aIndex),this.vertTypeBuffer=qa(i,n,"int",a.aVertType),this.atlasIdBuffer=qa(i,n,"int",a.aAtlasId),this.texBuffer=qa(i,n,"vec4",a.aTex),this.pointAPointBBuffer=qa(i,n,"vec4",a.aPointAPointB),this.pointCPointDBuffer=qa(i,n,"vec4",a.aPointCPointD),this.lineWidthBuffer=qa(i,n,"vec2",a.aLineWidth),this.colorBuffer=qa(i,n,"vec4",a.aColor),this.cornerRadiusBuffer=qa(i,n,"vec4",a.aCornerRadius),this.borderColorBuffer=qa(i,n,"vec4",a.aBorderColor),i.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ng.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,i){var a=this.atlasManager,s=this.batchManager,o=a.getRenderTypeOpts(i);if(this._isVisible(r,o)){if(this.renderTarget.picking&&o.getTexPickingMode){var l=o.getTexPickingMode(r);if(l===Dm.IGNORE)return;if(l==Dm.USE_BB){this.drawPickingRectangle(r,n,i);return}}var u=a.getAtlasInfo(r,i),h=_i(u),f;try{for(h.s();!(f=h.n()).done;){var d=f.value,g=d.atlas,p=d.tex1,v=d.tex2;s.canAddToCurrentBatch(g)||this.endBatch();for(var m=s.getAtlasIndexForBatch(g),y=0,b=[[p,!0],[v,!1]];y<b.length;y++){var T=tn(b[y],2),w=T[0],k=T[1];if(w.w!=0){var S=this.instanceCount;this.vertTypeBuffer.getView(S)[0]=hT;var E=this.indexBuffer.getView(S);Hc(n,E);var L=this.atlasIdBuffer.getView(S);L[0]=m;var A=this.texBuffer.getView(S);A[0]=w.x,A[1]=w.y,A[2]=w.w,A[3]=w.h;var R=this.transformBuffer.getMatrixView(S);this.setTransformMatrix(r,R,o,d,k),this.instanceCount++,k||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(C){h.e(C)}finally{h.f()}}}},{key:"setTransformMatrix",value:function(r,n,i,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(i.shapeProps&&i.shapeProps.padding&&(o=r.pstyle(i.shapeProps.padding).pfValue),a){var l=a.bb,u=a.tex1,h=a.tex2,f=u.w/(u.w+h.w);s||(f=1-f);var d=this._getAdjustedBB(l,o,s,f);this._applyTransformMatrix(n,d,i,r)}else{var g=i.getBoundingBox(r),p=this._getAdjustedBB(g,o,!0,1);this._applyTransformMatrix(n,p,i,r)}}},{key:"_applyTransformMatrix",value:function(r,n,i,a){var s,o;IN(r);var l=i.getRotation?i.getRotation(a):0;if(l!==0){var u=i.getRotationPoint(a),h=u.x,f=u.y;V1(r,r,[h,f]),NN(r,r,l);var d=i.getRotationOffset(a);s=d.x+(n.xOffset||0),o=d.y+(n.yOffset||0)}else s=n.x1,o=n.y1;V1(r,r,[s,o]),tk(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,i,a){var s=r.x1,o=r.y1,l=r.w,u=r.h,h=r.yOffset;n&&(s-=n,o-=n,l+=2*n,u+=2*n);var f=0,d=l*a;return i&&a<1?l=d:!i&&a<1&&(f=l-d,s+=f,l=d),{x1:s,y1:o,w:l,h:u,xOffset:f,yOffset:h}}},{key:"drawPickingRectangle",value:function(r,n,i){var a=this.atlasManager.getRenderTypeOpts(i),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=qc;var o=this.indexBuffer.getView(s);Hc(n,o);var l=this.colorBuffer.getView(s);ml([0,0,0],1,l);var u=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,u,a),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,i){var a=this.simpleShapeOptions.get(i);if(this._isVisible(r,a)){var s=a.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(o===void 0||a.isSimple&&!a.isSimple(r)){this.drawTexture(r,n,i);return}var l=this.instanceCount;if(this.vertTypeBuffer.getView(l)[0]=o,o===z0||o===Wf){var u=a.getBoundingBox(r),h=this._getCornerRadius(r,s.radius,u),f=this.cornerRadiusBuffer.getView(l);f[0]=h,f[1]=h,f[2]=h,f[3]=h,o===Wf&&(f[0]=0,f[2]=0)}var d=this.indexBuffer.getView(l);Hc(n,d);var g=r.pstyle(s.color).value,p=r.pstyle(s.opacity).value,v=this.colorBuffer.getView(l);ml(g,p,v);var m=this.lineWidthBuffer.getView(l);if(m[0]=0,m[1]=0,s.border){var y=r.pstyle("border-width").value;if(y>0){var b=r.pstyle("border-color").value,T=r.pstyle("border-opacity").value,w=this.borderColorBuffer.getView(l);ml(b,T,w);var k=r.pstyle("border-position").value;if(k==="inside")m[0]=0,m[1]=-y;else if(k==="outside")m[0]=y,m[1]=0;else{var S=y/2;m[0]=S,m[1]=-S}}}var E=this.transformBuffer.getMatrixView(l);this.setTransformMatrix(r,E,a),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var i=r.pstyle(n).value;switch(i){case"rectangle":return qc;case"ellipse":return Yf;case"roundrectangle":case"round-rectangle":return z0;case"bottom-round-rectangle":return Wf;default:return}}},{key:"_getCornerRadius",value:function(r,n,i){var a=i.w,s=i.h;if(r.pstyle(n).value==="auto")return Ho(a,s);var o=r.pstyle(n).pfValue,l=a/2,u=s/2;return Math.min(o,u,l)}},{key:"drawEdgeArrow",value:function(r,n,i){if(r.visible()){var a=r._private.rscratch,s,o,l;if(i==="source"?(s=a.arrowStartX,o=a.arrowStartY,l=a.srcArrowAngle):(s=a.arrowEndX,o=a.arrowEndY,l=a.tgtArrowAngle),!(isNaN(s)||s==null||isNaN(o)||o==null||isNaN(l)||l==null)){var u=r.pstyle(i+"-arrow-shape").value;if(u!=="none"){var h=r.pstyle(i+"-arrow-color").value,f=r.pstyle("opacity").value,d=r.pstyle("line-opacity").value,g=f*d,p=r.pstyle("width").pfValue,v=r.pstyle("arrow-scale").value,m=this.r.getArrowWidth(p,v),y=this.instanceCount,b=this.transformBuffer.getMatrixView(y);IN(b),V1(b,b,[s,o]),tk(b,b,[m,m]),NN(b,b,l),this.vertTypeBuffer.getView(y)[0]=fT;var T=this.indexBuffer.getView(y);Hc(n,T);var w=this.colorBuffer.getView(y);ml(h,g,w),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var i=this._getEdgePoints(r);if(i){var a=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,l=r.pstyle("line-color").value,u=a*s;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var h=this.instanceCount;this.vertTypeBuffer.getView(h)[0]=DN;var f=this.indexBuffer.getView(h);Hc(n,f);var d=this.colorBuffer.getView(h);ml(l,u,d);var g=this.lineWidthBuffer.getView(h);g[0]=o;var p=this.pointAPointBBuffer.getView(h);p[0]=i[0],p[1]=i[1],p[2]=i[2],p[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var v=0;v<i.length-2;v+=2){var m=this.instanceCount;this.vertTypeBuffer.getView(m)[0]=MN;var y=this.indexBuffer.getView(m);Hc(n,y);var b=this.colorBuffer.getView(m);ml(l,u,b);var T=this.lineWidthBuffer.getView(m);T[0]=o;var w=i[v-2],k=i[v-1],S=i[v],E=i[v+1],L=i[v+2],A=i[v+3],R=i[v+4],C=i[v+5];v==0&&(w=2*S-L+.001,k=2*E-A+.001),v==i.length-4&&(R=2*L-S+.001,C=2*A-E+.001);var D=this.pointAPointBBuffer.getView(m);D[0]=w,D[1]=k,D[2]=S,D[3]=E;var P=this.pointCPointDBuffer.getView(m);P[0]=L,P[1]=A,P[2]=R,P[3]=C,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var i=n.allpts;if(i.length==4)return i;var a=this._getNumSegments(r);return this._getCurveSegmentPoints(i,a)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var i=Array((n+1)*2),a=0;a<=n;a++)if(a==0)i[0]=r[0],i[1]=r[1];else if(a==n)i[a*2]=r[r.length-2],i[a*2+1]=r[r.length-1];else{var s=a/n;this._setCurvePoint(r,s,i,a*2)}return i}},{key:"_setCurvePoint",value:function(r,n,i,a){if(r.length<=2)i[a]=r[0],i[a+1]=r[1];else{for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var l=(1-n)*r[o]+n*r[o+2],u=(1-n)*r[o+1]+n*r[o+3];s[o]=l,s[o+1]=u}return this._setCurvePoint(s,n,i,a)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,i=this.vertexCount,a=this.instanceCount;if(a!==0){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(n);var o=_i(this.buffers),l;try{for(o.s();!(l=o.n()).done;){var u=l.value;u.bufferSubData(a)}}catch(p){o.e(p)}finally{o.f()}for(var h=this.batchManager.getAtlases(),f=0;f<h.length;f++)h[f].bufferIfNeeded(r);for(var d=0;d<h.length;d++)r.activeTexture(r.TEXTURE0+d),r.bindTexture(r.TEXTURE_2D,h[d].texture),r.uniform1i(s.uTextures[d],d);r.uniform1f(s.uZoom,V_t(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var g=ml(this.bgColor,1);r.uniform4fv(s.uBGColor,g),r.drawArraysInstanced(r.TRIANGLES,0,i,a),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:a,atlasCount:h.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(s,o){return s+o.atlasCount},0),i=this.batchDebugInfo,a=i.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:a}}}])}(),YG={};YG.initWebgl=function(e,t){var r=this,n=r.data.contexts[r.WEBGL];e.bgColor=cAt(r),e.webglTexSize=Math.min(e.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=e.webglDebug,r.webglDebugShowAtlases=e.webglDebugShowAtlases,r.pickingFrameBuffer=K_t(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new lAt(r,n,e);var i=function(f){return function(d){return r.getTextAngle(d,f)}},a=function(f){return function(d){var g=d.pstyle(f);return g&&g.value}},s=function(f){return function(d){return d.pstyle("".concat(f,"-opacity")).value>0}},o=function(f){var d=f.pstyle("text-events").strValue==="yes";return d?Dm.USE_BB:Dm.IGNORE},l=function(f){var d=f.position(),g=d.x,p=d.y,v=f.outerWidth(),m=f.outerHeight();return{w:v,h:m,x1:g-v/2,y1:p-m/2}};r.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:e.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:l,isSimple:U_t,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:l,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:l,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:dT(t.getLabelKey,null),getBoundingBox:gT(t.getLabelBox,null),drawClipped:!0,drawElement:t.drawLabel,getRotation:i(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:a("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:dT(t.getSourceLabelKey,"source"),getBoundingBox:gT(t.getSourceLabelBox,"source"),drawClipped:!0,drawElement:t.drawSourceLabel,getRotation:i("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:a("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:dT(t.getTargetLabelKey,"target"),getBoundingBox:gT(t.getTargetLabelBox,"target"),drawClipped:!0,drawElement:t.drawTargetLabel,getRotation:i("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:a("target-label")});var u=Pp(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(h,f){var d=!1;f&&f.length>0&&(d|=r.drawing.invalidate(f)),d&&u()}),uAt(r)};function cAt(e){var t=e.cy.container(),r=t&&t.style&&t.style.backgroundColor||"white";return TV(r)}function HG(e,t){var r=e._private.rscratch;return Ei(r,"labelWrapCachedLines",t)||[]}var dT=function(t,r){return function(n){var i=t(n),a=HG(n,r);return a.length>1?a.map(function(s,o){return"".concat(i,"_").concat(o)}):i}},gT=function(t,r){return function(n,i){var a=t(n);if(typeof i=="string"){var s=i.indexOf("_");if(s>0){var o=Number(i.substring(s+1)),l=HG(n,r),u=a.h/l.length,h=u*o,f=a.y1+h;return{x1:a.x1,w:a.w,y1:f,h:u,yOffset:h}}}return a}};function uAt(e){{var t=e.render;e.render=function(a){a=a||{};var s=e.cy;e.webgl&&(s.zoom()>FG?(hAt(e),t.call(e,a)):(fAt(e),XG(e,a,ng.SCREEN)))}}{var r=e.matchCanvasSize;e.matchCanvasSize=function(a){r.call(e,a),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0}}e.findNearestElements=function(a,s,o,l){return yAt(e,a,s)};{var n=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){n.call(e),e.pickingFrameBuffer.needsDraw=!0}}{var i=e.notify;e.notify=function(a,s){i.call(e,a,s),a==="viewport"||a==="bounds"?e.pickingFrameBuffer.needsDraw=!0:a==="background"&&e.drawing.invalidate(s,{type:"node-body"})}}}function hAt(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}function fAt(e){var t=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.canvasWidth,e.canvasHeight),n.restore()};t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}function dAt(e){var t=e.canvasWidth,r=e.canvasHeight,n=N_(e),i=n.pan,a=n.zoom,s=uT();V1(s,s,[i.x,i.y]),tk(s,s,[a,a]);var o=uT();Q_t(o,t,r);var l=uT();return Z_t(l,o,s),l}function qG(e,t){var r=e.canvasWidth,n=e.canvasHeight,i=N_(e),a=i.pan,s=i.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,r,n),t.translate(a.x,a.y),t.scale(s,s)}function gAt(e,t){e.drawSelectionRectangle(t,function(r){return qG(e,r)})}function pAt(e){var t=e.data.contexts[e.NODE];t.save(),qG(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}function vAt(e){var t=function(i,a,s){for(var o=i.atlasManager.getAtlasCollection(a),l=e.data.contexts[e.NODE],u=o.atlases,h=0;h<u.length;h++){var f=u[h],d=f.canvas;if(d){var g=d.width,p=d.height,v=g*h,m=d.height*s,y=.4;l.save(),l.scale(y,y),l.drawImage(d,v,m),l.strokeStyle="black",l.rect(v,m,g,p),l.stroke(),l.restore()}}},r=0;t(e.drawing,"node",r++),t(e.drawing,"label",r++)}function mAt(e,t,r,n,i){var a,s,o,l,u=N_(e),h=u.pan,f=u.zoom;{var d=G_t(e,h,f,t,r),g=tn(d,2),p=g[0],v=g[1],m=6;a=p-m/2,s=v-m/2,o=m,l=m}if(o===0||l===0)return[];var y=e.data.contexts[e.WEBGL];y.bindFramebuffer(y.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(y.viewport(0,0,y.canvas.width,y.canvas.height),XG(e,null,ng.PICKING),e.pickingFrameBuffer.needsDraw=!1);var b=o*l,T=new Uint8Array(b*4);y.readPixels(a,s,o,l,y.RGBA,y.UNSIGNED_BYTE,T),y.bindFramebuffer(y.FRAMEBUFFER,null);for(var w=new Set,k=0;k<b;k++){var S=T.slice(k*4,k*4+4),E=Y_t(S)-1;E>=0&&w.add(E)}return w}function yAt(e,t,r){var n=mAt(e,t,r),i=e.getCachedZSortedEles(),a,s,o=_i(n),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,h=i[u];if(!a&&h.isNode()&&(a=h),!s&&h.isEdge()&&(s=h),a&&s)break}}catch(f){o.e(f)}finally{o.f()}return[a,s].filter(Boolean)}function pT(e,t,r){var n=e.drawing;t+=1,r.isNode()?(n.drawNode(r,t,"node-underlay"),n.drawNode(r,t,"node-body"),n.drawTexture(r,t,"label"),n.drawNode(r,t,"node-overlay")):(n.drawEdgeLine(r,t),n.drawEdgeArrow(r,t,"source"),n.drawEdgeArrow(r,t,"target"),n.drawTexture(r,t,"label"),n.drawTexture(r,t,"edge-source-label"),n.drawTexture(r,t,"edge-target-label"))}function XG(e,t,r){var n;e.webglDebug&&(n=performance.now());var i=e.drawing,a=0;if(r.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&gAt(e,t),e.data.canvasNeedsRedraw[e.NODE]||r.picking){var s=e.data.contexts[e.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=dAt(e),l=e.getCachedZSortedEles();if(a=l.length,i.startFrame(o,r),r.screen){for(var u=0;u<l.nondrag.length;u++)pT(e,u,l.nondrag[u]);for(var h=0;h<l.drag.length;h++)pT(e,h,l.drag[h])}else if(r.picking)for(var f=0;f<l.length;f++)pT(e,f,l[f]);i.endFrame(),r.screen&&e.webglDebugShowAtlases&&(pAt(e),vAt(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var d=performance.now(),g=!1,p=Math.ceil(d-n),v=i.getDebugInfo(),m=["".concat(a," elements"),"".concat(v.totalInstances," instances"),"".concat(v.batchCount," batches"),"".concat(v.totalAtlases," atlases"),"".concat(v.wrappedCount," wrapped textures"),"".concat(v.simpleCount," simple shapes")].join(", ");if(g)console.log("WebGL (".concat(r.name,") - time ").concat(p,"ms, ").concat(m));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(p,"ms")),console.log("Totals:"),console.log("  ".concat(m)),console.log("Texture Atlases Used:");var y=v.atlasInfo,b=_i(y),T;try{for(b.s();!(T=b.n()).done;){var w=T.value;console.log("  ".concat(w.type,": ").concat(w.keyCount," keys, ").concat(w.atlasCount," atlases"))}}catch(k){b.e(k)}finally{b.f()}console.log("")}}e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,i.gc())}var ll={};ll.drawPolygonPath=function(e,t,r,n,i,a){var s=n/2,o=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+s*a[0],r+o*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+s*a[l*2],r+o*a[l*2+1]);e.closePath()};ll.drawRoundPolygonPath=function(e,t,r,n,i,a,s){s.forEach(function(o){return LG(e,o)}),e.closePath()};ll.drawRoundRectanglePath=function(e,t,r,n,i,a){var s=n/2,o=i/2,l=a==="auto"?Ho(n,i):Math.min(a,o,s);e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.arcTo(t+s,r-o,t+s,r,l),e.arcTo(t+s,r+o,t,r+o,l),e.arcTo(t-s,r+o,t-s,r,l),e.arcTo(t-s,r-o,t,r-o,l),e.lineTo(t,r-o),e.closePath()};ll.drawBottomRoundRectanglePath=function(e,t,r,n,i,a){var s=n/2,o=i/2,l=a==="auto"?Ho(n,i):a;e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.lineTo(t+s,r-o),e.lineTo(t+s,r),e.arcTo(t+s,r+o,t,r+o,l),e.arcTo(t-s,r+o,t-s,r,l),e.lineTo(t-s,r-o),e.lineTo(t,r-o),e.closePath()};ll.drawCutRectanglePath=function(e,t,r,n,i,a,s){var o=n/2,l=i/2,u=s==="auto"?y_():s;e.beginPath&&e.beginPath(),e.moveTo(t-o+u,r-l),e.lineTo(t+o-u,r-l),e.lineTo(t+o,r-l+u),e.lineTo(t+o,r+l-u),e.lineTo(t+o-u,r+l),e.lineTo(t-o+u,r+l),e.lineTo(t-o,r+l-u),e.lineTo(t-o,r-l+u),e.closePath()};ll.drawBarrelPath=function(e,t,r,n,i){var a=n/2,s=i/2,o=t-a,l=t+a,u=r-s,h=r+s,f=zE(n,i),d=f.widthOffset,g=f.heightOffset,p=f.ctrlPtOffsetPct*d;e.beginPath&&e.beginPath(),e.moveTo(o,u+g),e.lineTo(o,h-g),e.quadraticCurveTo(o+p,h,o+d,h),e.lineTo(l-d,h),e.quadraticCurveTo(l-p,h,l,h-g),e.lineTo(l,u+g),e.quadraticCurveTo(l-p,u,l-d,u),e.lineTo(o+d,u),e.quadraticCurveTo(o+p,u,o,u+g),e.closePath()};var ON=Math.sin(0),PN=Math.cos(0),ek={},rk={},jG=Math.PI/40;for(var Xc=0*Math.PI;Xc<2*Math.PI;Xc+=jG)ek[Xc]=Math.sin(Xc),rk[Xc]=Math.cos(Xc);ll.drawEllipsePath=function(e,t,r,n,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,n/2,i/2,0,0,2*Math.PI);else for(var a,s,o=n/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=jG)a=t-o*ek[u]*ON+o*rk[u]*PN,s=r+l*rk[u]*ON+l*ek[u]*PN,u===0?e.moveTo(a,s):e.lineTo(a,s);e.closePath()};var Gp={};Gp.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]};Gp.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements(),n=r.boundingBox(),i=this.findContainerClientCoords(),a=e.full?Math.ceil(n.w):i[2],s=e.full?Math.ceil(n.h):i[3],o=ne(e.maxWidth)||ne(e.maxHeight),l=this.getPixelRatio(),u=1;if(e.scale!==void 0)a*=e.scale,s*=e.scale,u=e.scale;else if(o){var h=1/0,f=1/0;ne(e.maxWidth)&&(h=u*e.maxWidth/a),ne(e.maxHeight)&&(f=u*e.maxHeight/s),u=Math.min(h,f),a*=u,s*=u}o||(a*=l,s*=l,u*=l);var d=document.createElement("canvas");d.width=a,d.height=s,d.style.width=a+"px",d.style.height=s+"px";var g=d.getContext("2d");if(a>0&&s>0){g.clearRect(0,0,a,s),g.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(e.full)g.translate(-n.x1*u,-n.y1*u),g.scale(u,u),this.drawElements(g,p),g.scale(1/u,1/u),g.translate(n.x1*u,n.y1*u);else{var v=t.pan(),m={x:v.x*u,y:v.y*u};u*=t.zoom(),g.translate(m.x,m.y),g.scale(u,u),this.drawElements(g,p),g.scale(1/u,1/u),g.translate(-m.x,-m.y)}e.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=e.bg,g.rect(0,0,a,s),g.fill())}return d};function xAt(e,t){for(var r=atob(e),n=new ArrayBuffer(r.length),i=new Uint8Array(n),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return new Blob([n],{type:t})}function BN(e){var t=e.indexOf(",");return e.substr(t+1)}function KG(e,t,r){var n=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new df(function(i,a){try{t.toBlob(function(s){s!=null?i(s):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,e.quality)}catch(s){a(s)}});case"blob":return xAt(BN(n()),r);case"base64":return BN(n());case"base64uri":default:return n()}}Gp.png=function(e){return KG(e,this.bufferCanvasImage(e),"image/png")};Gp.jpg=function(e){return KG(e,this.bufferCanvasImage(e),"image/jpeg")};var ZG={};ZG.nodeShapeImpl=function(e,t,r,n,i,a,s,o){switch(e){case"ellipse":return this.drawEllipsePath(t,r,n,i,a);case"polygon":return this.drawPolygonPath(t,r,n,i,a,s);case"round-polygon":return this.drawRoundPolygonPath(t,r,n,i,a,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,n,i,a,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,n,i,a,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,n,i,a,o);case"barrel":return this.drawBarrelPath(t,r,n,i,a)}};var bAt=QG,$e=QG.prototype;$e.CANVAS_LAYERS=3;$e.SELECT_BOX=0;$e.DRAG=1;$e.NODE=2;$e.WEBGL=3;$e.CANVAS_TYPES=["2d","2d","2d","webgl2"];$e.BUFFER_COUNT=3;$e.TEXTURE_BUFFER=0;$e.MOTIONBLUR_BUFFER_NODE=1;$e.MOTIONBLUR_BUFFER_DRAG=2;function QG(e){var t=this,r=t.cy.window(),n=r.document;e.webgl&&($e.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:new Array($e.CANVAS_LAYERS),contexts:new Array($e.CANVAS_LAYERS),canvasNeedsRedraw:new Array($e.CANVAS_LAYERS),bufferCanvases:new Array($e.BUFFER_COUNT),bufferContexts:new Array($e.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",a="rgba(0,0,0,0)";t.data.canvasContainer=n.createElement("div");var s=t.data.canvasContainer.style;t.data.canvasContainer.style[i]=a,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[i]=a;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ywt()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var u=0;u<$e.CANVAS_LAYERS;u++){var h=t.data.canvases[u]=n.createElement("canvas"),f=$e.CANVAS_TYPES[u];t.data.contexts[u]=h.getContext(f),t.data.contexts[u]||Dr("Could not create canvas of type "+f),Object.keys(l).forEach(function(q){h.style[q]=l[q]}),h.style.position="absolute",h.setAttribute("data-id","layer"+u),h.style.zIndex=String($e.CANVAS_LAYERS-u),t.data.canvasContainer.appendChild(h),t.data.canvasNeedsRedraw[u]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[$e.NODE].setAttribute("data-id","layer"+$e.NODE+"-node"),t.data.canvases[$e.SELECT_BOX].setAttribute("data-id","layer"+$e.SELECT_BOX+"-selectbox"),t.data.canvases[$e.DRAG].setAttribute("data-id","layer"+$e.DRAG+"-drag"),t.data.canvases[$e.WEBGL]&&t.data.canvases[$e.WEBGL].setAttribute("data-id","layer"+$e.WEBGL+"-webgl");for(var u=0;u<$e.BUFFER_COUNT;u++)t.data.bufferCanvases[u]=n.createElement("canvas"),t.data.bufferContexts[u]=t.data.bufferCanvases[u].getContext("2d"),t.data.bufferCanvases[u].style.position="absolute",t.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),t.data.bufferCanvases[u].style.zIndex=String(-u-1),t.data.bufferCanvases[u].style.visibility="hidden";t.pathsEnabled=!0;var d=Mi(),g=function(W){return{x:(W.x1+W.x2)/2,y:(W.y1+W.y2)/2}},p=function(W){return{x:-W.w/2,y:-W.h/2}},v=function(W){var H=W[0]._private,U=H.oldBackgroundTimestamp===H.backgroundTimestamp;return!U},m=function(W){return W[0]._private.nodeKey},y=function(W){return W[0]._private.labelStyleKey},b=function(W){return W[0]._private.sourceLabelStyleKey},T=function(W){return W[0]._private.targetLabelStyleKey},w=function(W,H,U,X,J){return t.drawElement(W,H,U,!1,!1,J)},k=function(W,H,U,X,J){return t.drawElementText(W,H,U,X,"main",J)},S=function(W,H,U,X,J){return t.drawElementText(W,H,U,X,"source",J)},E=function(W,H,U,X,J){return t.drawElementText(W,H,U,X,"target",J)},L=function(W){return W.boundingBox(),W[0]._private.bodyBounds},A=function(W){return W.boundingBox(),W[0]._private.labelBounds.main||d},R=function(W){return W.boundingBox(),W[0]._private.labelBounds.source||d},C=function(W){return W.boundingBox(),W[0]._private.labelBounds.target||d},D=function(W,H){return H},P=function(W){return g(L(W))},_=function(W,H,U){var X=W?W+"-":"";return{x:H.x+U.pstyle(X+"text-margin-x").pfValue,y:H.y+U.pstyle(X+"text-margin-y").pfValue}},I=function(W,H,U){var X=W[0]._private.rscratch;return{x:X[H],y:X[U]}},M=function(W){return _("",I(W,"labelX","labelY"),W)},O=function(W){return _("source",I(W,"sourceLabelX","sourceLabelY"),W)},N=function(W){return _("target",I(W,"targetLabelX","targetLabelY"),W)},B=function(W){return p(L(W))},z=function(W){return p(R(W))},F=function(W){return p(C(W))},V=function(W){var H=A(W),U=p(A(W));if(W.isNode()){switch(W.pstyle("text-halign").value){case"left":U.x=-H.w-(H.leftPad||0);break;case"right":U.x=-(H.rightPad||0);break}switch(W.pstyle("text-valign").value){case"top":U.y=-H.h-(H.topPad||0);break;case"bottom":U.y=-(H.botPad||0);break}}return U},G=t.data.eleTxrCache=new Gd(t,{getKey:m,doesEleInvalidateKey:v,drawElement:w,getBoundingBox:L,getRotationPoint:P,getRotationOffset:B,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Y=t.data.lblTxrCache=new Gd(t,{getKey:y,drawElement:k,getBoundingBox:A,getRotationPoint:M,getRotationOffset:V,isVisible:D}),Q=t.data.slbTxrCache=new Gd(t,{getKey:b,drawElement:S,getBoundingBox:R,getRotationPoint:O,getRotationOffset:z,isVisible:D}),K=t.data.tlbTxrCache=new Gd(t,{getKey:T,drawElement:E,getBoundingBox:C,getRotationPoint:N,getRotationOffset:F,isVisible:D}),it=t.data.lyrTxrCache=new $G(t);t.onUpdateEleCalcs(function(W,H){G.invalidateElements(H),Y.invalidateElements(H),Q.invalidateElements(H),K.invalidateElements(H),it.invalidateElements(H);for(var U=0;U<H.length;U++){var X=H[U]._private;X.oldBackgroundTimestamp=X.backgroundTimestamp}});var ut=function(W){for(var H=0;H<W.length;H++)it.enqueueElementRefinement(W[H].ele)};G.onDequeue(ut),Y.onDequeue(ut),Q.onDequeue(ut),K.onDequeue(ut),e.webgl&&t.initWebgl(e,{getStyleKey:m,getLabelKey:y,getSourceLabelKey:b,getTargetLabelKey:T,drawElement:w,drawLabel:k,drawSourceLabel:S,drawTargetLabel:E,getElementBox:L,getLabelBox:A,getSourceLabelBox:R,getTargetLabelBox:C,getElementRotationPoint:P,getElementRotationOffset:B,getLabelRotationPoint:M,getSourceLabelRotationPoint:O,getTargetLabelRotationPoint:N,getLabelRotationOffset:V,getSourceLabelRotationOffset:z,getTargetLabelRotationOffset:F})}$e.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[$e.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[$e.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[$e.SELECT_BOX]=t;break;case"gc":r.data.gc=!0;break}};var TAt=typeof Path2D<"u";$e.path2dEnabled=function(e){if(e===void 0)return this.pathsEnabled;this.pathsEnabled=!!e};$e.usePaths=function(){return TAt&&this.pathsEnabled};$e.setImgSmoothing=function(e,t){e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)};$e.getImgSmoothing=function(e){return e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled};$e.makeOffscreenCanvas=function(e,t){var r;if((typeof OffscreenCanvas>"u"?"undefined":hn(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(e,t);else{var n=this.cy.window(),i=n.document;r=i.createElement("canvas"),r.width=e,r.height=t}return r};[zG,bs,go,I_,Oc,ol,yi,YG,ll,Gp,ZG].forEach(function(e){Ce($e,e)});var wAt=[{name:"null",impl:SG},{name:"base",impl:PG},{name:"canvas",impl:bAt}],EAt=[{type:"layout",extensions:jSt},{type:"renderer",extensions:wAt}],JG={},tU={};function eU(e,t,r){var n=r,i=function(L){or("Can not register `"+t+"` for `"+e+"` since `"+L+"` already exists in the prototype and can not be overridden")};if(e==="core"){if(Hg.prototype[t])return i(t);Hg.prototype[t]=r}else if(e==="collection"){if(Bn.prototype[t])return i(t);Bn.prototype[t]=r}else if(e==="layout"){for(var a=function(L){this.options=L,r.call(this,L),Je(this._private)||(this._private={}),this._private.cy=L.cy,this._private.listeners=[],this.createEmitter()},s=a.prototype=Object.create(r.prototype),o=[],l=0;l<o.length;l++){var u=o[l];s[u]=s[u]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var h=r.prototype.stop;s.stop=function(){var E=this.options;if(E&&E.animate){var L=this.animations;if(L)for(var A=0;A<L.length;A++)L[A].stop()}return h?h.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var f=function(L){return L._private.cy},d={addEventFields:function(L,A){A.layout=L,A.cy=f(L),A.target=L},bubble:function(){return!0},parent:function(L){return f(L)}};Ce(s,{createEmitter:function(){return this._private.emitter=new c2(d,this),this},emitter:function(){return this._private.emitter},on:function(L,A){return this.emitter().on(L,A),this},one:function(L,A){return this.emitter().one(L,A),this},once:function(L,A){return this.emitter().one(L,A),this},removeListener:function(L,A){return this.emitter().removeListener(L,A),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(L,A){return this.emitter().emit(L,A),this}}),ir.eventAliasesOn(s),n=a}else if(e==="renderer"&&t!=="null"&&t!=="base"){var g=rU("renderer","base"),p=g.prototype,v=r,m=r.prototype,y=function(){g.apply(this,arguments),v.apply(this,arguments)},b=y.prototype;for(var T in p){var w=p[T],k=m[T]!=null;if(k)return i(T);b[T]=w}for(var S in m)b[S]=m[S];p.clientFunctions.forEach(function(E){b[E]=b[E]||function(){Dr("Renderer does not implement `renderer."+E+"()` on its prototype")}}),n=y}else if(e==="__proto__"||e==="constructor"||e==="prototype")return Dr(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return wV({map:JG,keys:[e,t],value:n})}function rU(e,t){return EV({map:JG,keys:[e,t]})}function kAt(e,t,r,n,i){return wV({map:tU,keys:[e,t,r,n],value:i})}function CAt(e,t,r,n){return EV({map:tU,keys:[e,t,r,n]})}var nk=function(){if(arguments.length===2)return rU.apply(null,arguments);if(arguments.length===3)return eU.apply(null,arguments);if(arguments.length===4)return CAt.apply(null,arguments);if(arguments.length===5)return kAt.apply(null,arguments);Dr("Invalid extension access syntax")};Hg.prototype.extension=nk;EAt.forEach(function(e){e.extensions.forEach(function(t){eU(e.type,t.name,t.impl)})});var Mm=function(){if(!(this instanceof Mm))return new Mm;this.length=0},dc=Mm.prototype;dc.instanceString=function(){return"stylesheet"};dc.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this};dc.css=function(e,t){var r=this.length-1;if(Ee(e))this[r].properties.push({name:e,value:t});else if(Je(e))for(var n=e,i=Object.keys(n),a=0;a<i.length;a++){var s=i[a],o=n[s];if(o!=null){var l=bn.properties[s]||bn.properties[Jy(s)];if(l!=null){var u=l.name,h=o;this[r].properties.push({name:u,value:h})}}}return this};dc.style=dc.css;dc.generateStyle=function(e){var t=new bn(e);return this.appendToStyle(t)};dc.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],n=r.selector,i=r.properties;e.selector(n);for(var a=0;a<i.length;a++){var s=i[a];e.css(s.name,s.value)}}return e};var SAt="3.32.0",ds=function(t){if(t===void 0&&(t={}),Je(t))return new Hg(t);if(Ee(t))return nk.apply(nk,arguments)};ds.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(ds),e.apply(null,t),this};ds.warnings=function(e){return RV(e)};ds.version=SAt;ds.stylesheet=ds.Stylesheet=Mm;var G1={exports:{}},U1={exports:{}},W1={exports:{}},_At=W1.exports,FN;function AAt(){return FN||(FN=1,function(e,t){(function(n,i){e.exports=i()})(_At,function(){return function(r){var n={};function i(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return r[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=r,i.c=n,i.i=function(a){return a},i.d=function(a,s,o){i.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:o})},i.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(s,"a",s),s},i.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},i.p="",i(i.s=26)}([function(r,n,i){function a(){}a.QUALITY=1,a.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,a.DEFAULT_INCREMENTAL=!1,a.DEFAULT_ANIMATION_ON_LAYOUT=!0,a.DEFAULT_ANIMATION_DURING_LAYOUT=!1,a.DEFAULT_ANIMATION_PERIOD=50,a.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,a.DEFAULT_GRAPH_MARGIN=15,a.NODE_DIMENSIONS_INCLUDE_LABELS=!1,a.SIMPLE_NODE_SIZE=40,a.SIMPLE_NODE_HALF_SIZE=a.SIMPLE_NODE_SIZE/2,a.EMPTY_COMPOUND_NODE_SIZE=40,a.MIN_EDGE_LENGTH=1,a.WORLD_BOUNDARY=1e6,a.INITIAL_WORLD_BOUNDARY=a.WORLD_BOUNDARY/1e3,a.WORLD_CENTER_X=1200,a.WORLD_CENTER_Y=900,r.exports=a},function(r,n,i){var a=i(2),s=i(8),o=i(9);function l(h,f,d){a.call(this,d),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=d,this.bendpoints=[],this.source=h,this.target=f}l.prototype=Object.create(a.prototype);for(var u in a)l[u]=a[u];l.prototype.getSource=function(){return this.source},l.prototype.getTarget=function(){return this.target},l.prototype.isInterGraph=function(){return this.isInterGraph},l.prototype.getLength=function(){return this.length},l.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},l.prototype.getBendpoints=function(){return this.bendpoints},l.prototype.getLca=function(){return this.lca},l.prototype.getSourceInLca=function(){return this.sourceInLca},l.prototype.getTargetInLca=function(){return this.targetInLca},l.prototype.getOtherEnd=function(h){if(this.source===h)return this.target;if(this.target===h)return this.source;throw"Node is not incident with this edge"},l.prototype.getOtherEndInGraph=function(h,f){for(var d=this.getOtherEnd(h),g=f.getGraphManager().getRoot();;){if(d.getOwner()==f)return d;if(d.getOwner()==g)break;d=d.getOwner().getParent()}return null},l.prototype.updateLength=function(){var h=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),h),this.isOverlapingSourceAndTarget||(this.lengthX=h[0]-h[2],this.lengthY=h[1]-h[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},l.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=l},function(r,n,i){function a(s){this.vGraphObject=s}r.exports=a},function(r,n,i){var a=i(2),s=i(10),o=i(13),l=i(0),u=i(16),h=i(4);function f(g,p,v,m){v==null&&m==null&&(m=p),a.call(this,m),g.graphManager!=null&&(g=g.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=m,this.edges=[],this.graphManager=g,v!=null&&p!=null?this.rect=new o(p.x,p.y,v.width,v.height):this.rect=new o}f.prototype=Object.create(a.prototype);for(var d in a)f[d]=a[d];f.prototype.getEdges=function(){return this.edges},f.prototype.getChild=function(){return this.child},f.prototype.getOwner=function(){return this.owner},f.prototype.getWidth=function(){return this.rect.width},f.prototype.setWidth=function(g){this.rect.width=g},f.prototype.getHeight=function(){return this.rect.height},f.prototype.setHeight=function(g){this.rect.height=g},f.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},f.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},f.prototype.getCenter=function(){return new h(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},f.prototype.getLocation=function(){return new h(this.rect.x,this.rect.y)},f.prototype.getRect=function(){return this.rect},f.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},f.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},f.prototype.setRect=function(g,p){this.rect.x=g.x,this.rect.y=g.y,this.rect.width=p.width,this.rect.height=p.height},f.prototype.setCenter=function(g,p){this.rect.x=g-this.rect.width/2,this.rect.y=p-this.rect.height/2},f.prototype.setLocation=function(g,p){this.rect.x=g,this.rect.y=p},f.prototype.moveBy=function(g,p){this.rect.x+=g,this.rect.y+=p},f.prototype.getEdgeListToNode=function(g){var p=[],v=this;return v.edges.forEach(function(m){if(m.target==g){if(m.source!=v)throw"Incorrect edge source!";p.push(m)}}),p},f.prototype.getEdgesBetween=function(g){var p=[],v=this;return v.edges.forEach(function(m){if(!(m.source==v||m.target==v))throw"Incorrect edge source and/or target";(m.target==g||m.source==g)&&p.push(m)}),p},f.prototype.getNeighborsList=function(){var g=new Set,p=this;return p.edges.forEach(function(v){if(v.source==p)g.add(v.target);else{if(v.target!=p)throw"Incorrect incidency!";g.add(v.source)}}),g},f.prototype.withChildren=function(){var g=new Set,p,v;if(g.add(this),this.child!=null)for(var m=this.child.getNodes(),y=0;y<m.length;y++)p=m[y],v=p.withChildren(),v.forEach(function(b){g.add(b)});return g},f.prototype.getNoOfChildren=function(){var g=0,p;if(this.child==null)g=1;else for(var v=this.child.getNodes(),m=0;m<v.length;m++)p=v[m],g+=p.getNoOfChildren();return g==0&&(g=1),g},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},f.prototype.scatter=function(){var g,p,v=-l.INITIAL_WORLD_BOUNDARY,m=l.INITIAL_WORLD_BOUNDARY;g=l.WORLD_CENTER_X+u.nextDouble()*(m-v)+v;var y=-l.INITIAL_WORLD_BOUNDARY,b=l.INITIAL_WORLD_BOUNDARY;p=l.WORLD_CENTER_Y+u.nextDouble()*(b-y)+y,this.rect.x=g,this.rect.y=p},f.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var g=this.getChild();if(g.updateBounds(!0),this.rect.x=g.getLeft(),this.rect.y=g.getTop(),this.setWidth(g.getRight()-g.getLeft()),this.setHeight(g.getBottom()-g.getTop()),l.NODE_DIMENSIONS_INCLUDE_LABELS){var p=g.getRight()-g.getLeft(),v=g.getBottom()-g.getTop();this.labelWidth>p&&(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)),this.labelHeight>v&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-v)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-v),this.setHeight(this.labelHeight))}}},f.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},f.prototype.transform=function(g){var p=this.rect.x;p>l.WORLD_BOUNDARY?p=l.WORLD_BOUNDARY:p<-l.WORLD_BOUNDARY&&(p=-l.WORLD_BOUNDARY);var v=this.rect.y;v>l.WORLD_BOUNDARY?v=l.WORLD_BOUNDARY:v<-l.WORLD_BOUNDARY&&(v=-l.WORLD_BOUNDARY);var m=new h(p,v),y=g.inverseTransformPoint(m);this.setLocation(y.x,y.y)},f.prototype.getLeft=function(){return this.rect.x},f.prototype.getRight=function(){return this.rect.x+this.rect.width},f.prototype.getTop=function(){return this.rect.y},f.prototype.getBottom=function(){return this.rect.y+this.rect.height},f.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=f},function(r,n,i){function a(s,o){s==null&&o==null?(this.x=0,this.y=0):(this.x=s,this.y=o)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(s){this.x=s},a.prototype.setY=function(s){this.y=s},a.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},a.prototype.getCopy=function(){return new a(this.x,this.y)},a.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},r.exports=a},function(r,n,i){var a=i(2),s=i(10),o=i(0),l=i(6),u=i(3),h=i(1),f=i(13),d=i(12),g=i(11);function p(m,y,b){a.call(this,b),this.estimatedSize=s.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=m,y!=null&&y instanceof l?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}p.prototype=Object.create(a.prototype);for(var v in a)p[v]=a[v];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(m,y,b){if(y==null&&b==null){var T=m;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(T)>-1)throw"Node already in graph!";return T.owner=this,this.getNodes().push(T),T}else{var w=m;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(b)>-1))throw"Source or target not in graph!";if(!(y.owner==b.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner!=b.owner?null:(w.source=y,w.target=b,w.isInterGraph=!1,this.getEdges().push(w),y.edges.push(w),b!=y&&b.edges.push(w),w)}},p.prototype.remove=function(m){var y=m;if(m instanceof u){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var b=y.edges.slice(),T,w=b.length,k=0;k<w;k++)T=b[k],T.isInterGraph?this.graphManager.remove(T):T.source.owner.remove(T);var S=this.nodes.indexOf(y);if(S==-1)throw"Node not in owner node list!";this.nodes.splice(S,1)}else if(m instanceof h){var T=m;if(T==null)throw"Edge is null!";if(!(T.source!=null&&T.target!=null))throw"Source and/or target is null!";if(!(T.source.owner!=null&&T.target.owner!=null&&T.source.owner==this&&T.target.owner==this))throw"Source and/or target owner is invalid!";var E=T.source.edges.indexOf(T),L=T.target.edges.indexOf(T);if(!(E>-1&&L>-1))throw"Source and/or target doesn't know this edge!";T.source.edges.splice(E,1),T.target!=T.source&&T.target.edges.splice(L,1);var S=T.source.owner.getEdges().indexOf(T);if(S==-1)throw"Not in owner's edge list!";T.source.owner.getEdges().splice(S,1)}},p.prototype.updateLeftTop=function(){for(var m=s.MAX_VALUE,y=s.MAX_VALUE,b,T,w,k=this.getNodes(),S=k.length,E=0;E<S;E++){var L=k[E];b=L.getTop(),T=L.getLeft(),m>b&&(m=b),y>T&&(y=T)}return m==s.MAX_VALUE?null:(k[0].getParent().paddingLeft!=null?w=k[0].getParent().paddingLeft:w=this.margin,this.left=y-w,this.top=m-w,new d(this.left,this.top))},p.prototype.updateBounds=function(m){for(var y=s.MAX_VALUE,b=-s.MAX_VALUE,T=s.MAX_VALUE,w=-s.MAX_VALUE,k,S,E,L,A,R=this.nodes,C=R.length,D=0;D<C;D++){var P=R[D];m&&P.child!=null&&P.updateBounds(),k=P.getLeft(),S=P.getRight(),E=P.getTop(),L=P.getBottom(),y>k&&(y=k),b<S&&(b=S),T>E&&(T=E),w<L&&(w=L)}var _=new f(y,T,b-y,w-T);y==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),R[0].getParent().paddingLeft!=null?A=R[0].getParent().paddingLeft:A=this.margin,this.left=_.x-A,this.right=_.x+_.width+A,this.top=_.y-A,this.bottom=_.y+_.height+A},p.calculateBounds=function(m){for(var y=s.MAX_VALUE,b=-s.MAX_VALUE,T=s.MAX_VALUE,w=-s.MAX_VALUE,k,S,E,L,A=m.length,R=0;R<A;R++){var C=m[R];k=C.getLeft(),S=C.getRight(),E=C.getTop(),L=C.getBottom(),y>k&&(y=k),b<S&&(b=S),T>E&&(T=E),w<L&&(w=L)}var D=new f(y,T,b-y,w-T);return D},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var m=0,y=this.nodes,b=y.length,T=0;T<b;T++){var w=y[T];m+=w.calcEstimatedSize()}return m==0?this.estimatedSize=o.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=m/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var m=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new g,b=new Set,T=this.nodes[0],w,k,S=T.withChildren();for(S.forEach(function(D){y.push(D),b.add(D)});y.length!==0;){T=y.shift(),w=T.getEdges();for(var E=w.length,L=0;L<E;L++){var A=w[L];if(k=A.getOtherEndInGraph(T,this),k!=null&&!b.has(k)){var R=k.withChildren();R.forEach(function(D){y.push(D),b.add(D)})}}}if(this.isConnected=!1,b.size>=this.nodes.length){var C=0;b.forEach(function(D){D.owner==m&&C++}),C==this.nodes.length&&(this.isConnected=!0)}},r.exports=p},function(r,n,i){var a,s=i(1);function o(l){a=i(5),this.layout=l,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var l=this.layout.newGraph(),u=this.layout.newNode(null),h=this.add(l,u);return this.setRootGraph(h),this.rootGraph},o.prototype.add=function(l,u,h,f,d){if(h==null&&f==null&&d==null){if(l==null)throw"Graph is null!";if(u==null)throw"Parent node is null!";if(this.graphs.indexOf(l)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(l),l.parent!=null)throw"Already has a parent!";if(u.child!=null)throw"Already has a child!";return l.parent=u,u.child=l,l}else{d=h,f=u,h=l;var g=f.getOwner(),p=d.getOwner();if(!(g!=null&&g.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(p!=null&&p.getGraphManager()==this))throw"Target not in this graph mgr!";if(g==p)return h.isInterGraph=!1,g.add(h,f,d);if(h.isInterGraph=!0,h.source=f,h.target=d,this.edges.indexOf(h)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(h),!(h.source!=null&&h.target!=null))throw"Edge source and/or target is null!";if(!(h.source.edges.indexOf(h)==-1&&h.target.edges.indexOf(h)==-1))throw"Edge already in source and/or target incidency list!";return h.source.edges.push(h),h.target.edges.push(h),h}},o.prototype.remove=function(l){if(l instanceof a){var u=l;if(u.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(u==this.rootGraph||u.parent!=null&&u.parent.graphManager==this))throw"Invalid parent node!";var h=[];h=h.concat(u.getEdges());for(var f,d=h.length,g=0;g<d;g++)f=h[g],u.remove(f);var p=[];p=p.concat(u.getNodes());var v;d=p.length;for(var g=0;g<d;g++)v=p[g],u.remove(v);u==this.rootGraph&&this.setRootGraph(null);var m=this.graphs.indexOf(u);this.graphs.splice(m,1),u.parent=null}else if(l instanceof s){if(f=l,f==null)throw"Edge is null!";if(!f.isInterGraph)throw"Not an inter-graph edge!";if(!(f.source!=null&&f.target!=null))throw"Source and/or target is null!";if(!(f.source.edges.indexOf(f)!=-1&&f.target.edges.indexOf(f)!=-1))throw"Source and/or target doesn't know this edge!";var m=f.source.edges.indexOf(f);if(f.source.edges.splice(m,1),m=f.target.edges.indexOf(f),f.target.edges.splice(m,1),!(f.source.owner!=null&&f.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(f.source.owner.getGraphManager().edges.indexOf(f)==-1)throw"Not in owner graph manager's edge list!";var m=f.source.owner.getGraphManager().edges.indexOf(f);f.source.owner.getGraphManager().edges.splice(m,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var l=[],u=this.getGraphs(),h=u.length,f=0;f<h;f++)l=l.concat(u[f].getNodes());this.allNodes=l}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){var l=[],u=this.getGraphs();u.length;for(var h=0;h<u.length;h++)l=l.concat(u[h].getEdges());l=l.concat(this.edges),this.allEdges=l}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(l){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=l},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(l){if(l.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=l,l.parent==null&&(l.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(l,u){if(!(l!=null&&u!=null))throw"assert failed";if(l==u)return!0;var h=l.getOwner(),f;do{if(f=h.getParent(),f==null)break;if(f==u)return!0;if(h=f.getOwner(),h==null)break}while(!0);h=u.getOwner();do{if(f=h.getParent(),f==null)break;if(f==l)return!0;if(h=f.getOwner(),h==null)break}while(!0);return!1},o.prototype.calcLowestCommonAncestors=function(){for(var l,u,h,f,d,g=this.getAllEdges(),p=g.length,v=0;v<p;v++){if(l=g[v],u=l.source,h=l.target,l.lca=null,l.sourceInLca=u,l.targetInLca=h,u==h){l.lca=u.getOwner();continue}for(f=u.getOwner();l.lca==null;){for(l.targetInLca=h,d=h.getOwner();l.lca==null;){if(d==f){l.lca=d;break}if(d==this.rootGraph)break;if(l.lca!=null)throw"assert failed";l.targetInLca=d.getParent(),d=l.targetInLca.getOwner()}if(f==this.rootGraph)break;l.lca==null&&(l.sourceInLca=f.getParent(),f=l.sourceInLca.getOwner())}if(l.lca==null)throw"assert failed"}},o.prototype.calcLowestCommonAncestor=function(l,u){if(l==u)return l.getOwner();var h=l.getOwner();do{if(h==null)break;var f=u.getOwner();do{if(f==null)break;if(f==h)return f;f=f.getParent().getOwner()}while(!0);h=h.getParent().getOwner()}while(!0);return h},o.prototype.calcInclusionTreeDepths=function(l,u){l==null&&u==null&&(l=this.rootGraph,u=1);for(var h,f=l.getNodes(),d=f.length,g=0;g<d;g++)h=f[g],h.inclusionTreeDepth=u,h.child!=null&&this.calcInclusionTreeDepths(h.child,u+1)},o.prototype.includesInvalidEdge=function(){for(var l,u=this.edges.length,h=0;h<u;h++)if(l=this.edges[h],this.isOneAncestorOfOther(l.source,l.target))return!0;return!1},r.exports=o},function(r,n,i){var a=i(0);function s(){}for(var o in a)s[o]=a[o];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=s.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=s},function(r,n,i){var a=i(12);function s(){}s.calcSeparationAmount=function(o,l,u,h){if(!o.intersects(l))throw"assert failed";var f=new Array(2);this.decideDirectionsForOverlappingNodes(o,l,f),u[0]=Math.min(o.getRight(),l.getRight())-Math.max(o.x,l.x),u[1]=Math.min(o.getBottom(),l.getBottom())-Math.max(o.y,l.y),o.getX()<=l.getX()&&o.getRight()>=l.getRight()?u[0]+=Math.min(l.getX()-o.getX(),o.getRight()-l.getRight()):l.getX()<=o.getX()&&l.getRight()>=o.getRight()&&(u[0]+=Math.min(o.getX()-l.getX(),l.getRight()-o.getRight())),o.getY()<=l.getY()&&o.getBottom()>=l.getBottom()?u[1]+=Math.min(l.getY()-o.getY(),o.getBottom()-l.getBottom()):l.getY()<=o.getY()&&l.getBottom()>=o.getBottom()&&(u[1]+=Math.min(o.getY()-l.getY(),l.getBottom()-o.getBottom()));var d=Math.abs((l.getCenterY()-o.getCenterY())/(l.getCenterX()-o.getCenterX()));l.getCenterY()===o.getCenterY()&&l.getCenterX()===o.getCenterX()&&(d=1);var g=d*u[0],p=u[1]/d;u[0]<p?p=u[0]:g=u[1],u[0]=-1*f[0]*(p/2+h),u[1]=-1*f[1]*(g/2+h)},s.decideDirectionsForOverlappingNodes=function(o,l,u){o.getCenterX()<l.getCenterX()?u[0]=-1:u[0]=1,o.getCenterY()<l.getCenterY()?u[1]=-1:u[1]=1},s.getIntersection2=function(o,l,u){var h=o.getCenterX(),f=o.getCenterY(),d=l.getCenterX(),g=l.getCenterY();if(o.intersects(l))return u[0]=h,u[1]=f,u[2]=d,u[3]=g,!0;var p=o.getX(),v=o.getY(),m=o.getRight(),y=o.getX(),b=o.getBottom(),T=o.getRight(),w=o.getWidthHalf(),k=o.getHeightHalf(),S=l.getX(),E=l.getY(),L=l.getRight(),A=l.getX(),R=l.getBottom(),C=l.getRight(),D=l.getWidthHalf(),P=l.getHeightHalf(),_=!1,I=!1;if(h===d){if(f>g)return u[0]=h,u[1]=v,u[2]=d,u[3]=R,!1;if(f<g)return u[0]=h,u[1]=b,u[2]=d,u[3]=E,!1}else if(f===g){if(h>d)return u[0]=p,u[1]=f,u[2]=L,u[3]=g,!1;if(h<d)return u[0]=m,u[1]=f,u[2]=S,u[3]=g,!1}else{var M=o.height/o.width,O=l.height/l.width,N=(g-f)/(d-h),B=void 0,z=void 0,F=void 0,V=void 0,G=void 0,Y=void 0;if(-M===N?h>d?(u[0]=y,u[1]=b,_=!0):(u[0]=m,u[1]=v,_=!0):M===N&&(h>d?(u[0]=p,u[1]=v,_=!0):(u[0]=T,u[1]=b,_=!0)),-O===N?d>h?(u[2]=A,u[3]=R,I=!0):(u[2]=L,u[3]=E,I=!0):O===N&&(d>h?(u[2]=S,u[3]=E,I=!0):(u[2]=C,u[3]=R,I=!0)),_&&I)return!1;if(h>d?f>g?(B=this.getCardinalDirection(M,N,4),z=this.getCardinalDirection(O,N,2)):(B=this.getCardinalDirection(-M,N,3),z=this.getCardinalDirection(-O,N,1)):f>g?(B=this.getCardinalDirection(-M,N,1),z=this.getCardinalDirection(-O,N,3)):(B=this.getCardinalDirection(M,N,2),z=this.getCardinalDirection(O,N,4)),!_)switch(B){case 1:V=v,F=h+-k/N,u[0]=F,u[1]=V;break;case 2:F=T,V=f+w*N,u[0]=F,u[1]=V;break;case 3:V=b,F=h+k/N,u[0]=F,u[1]=V;break;case 4:F=y,V=f+-w*N,u[0]=F,u[1]=V;break}if(!I)switch(z){case 1:Y=E,G=d+-P/N,u[2]=G,u[3]=Y;break;case 2:G=C,Y=g+D*N,u[2]=G,u[3]=Y;break;case 3:Y=R,G=d+P/N,u[2]=G,u[3]=Y;break;case 4:G=A,Y=g+-D*N,u[2]=G,u[3]=Y;break}}return!1},s.getCardinalDirection=function(o,l,u){return o>l?u:1+u%4},s.getIntersection=function(o,l,u,h){if(h==null)return this.getIntersection2(o,l,u);var f=o.x,d=o.y,g=l.x,p=l.y,v=u.x,m=u.y,y=h.x,b=h.y,T=void 0,w=void 0,k=void 0,S=void 0,E=void 0,L=void 0,A=void 0,R=void 0,C=void 0;return k=p-d,E=f-g,A=g*d-f*p,S=b-m,L=v-y,R=y*m-v*b,C=k*L-S*E,C===0?null:(T=(E*R-L*A)/C,w=(S*A-k*R)/C,new a(T,w))},s.angleOfVector=function(o,l,u,h){var f=void 0;return o!==u?(f=Math.atan((h-l)/(u-o)),u<o?f+=Math.PI:h<l&&(f+=this.TWO_PI)):h<l?f=this.ONE_AND_HALF_PI:f=this.HALF_PI,f},s.doIntersect=function(o,l,u,h){var f=o.x,d=o.y,g=l.x,p=l.y,v=u.x,m=u.y,y=h.x,b=h.y,T=(g-f)*(b-m)-(y-v)*(p-d);if(T===0)return!1;var w=((b-m)*(y-f)+(v-y)*(b-d))/T,k=((d-p)*(y-f)+(g-f)*(b-d))/T;return 0<w&&w<1&&0<k&&k<1},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,r.exports=s},function(r,n,i){function a(){}a.sign=function(s){return s>0?1:s<0?-1:0},a.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},a.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},r.exports=a},function(r,n,i){function a(){}a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,r.exports=a},function(r,n,i){var a=function(){function f(d,g){for(var p=0;p<g.length;p++){var v=g[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}return function(d,g,p){return g&&f(d.prototype,g),p&&f(d,p),d}}();function s(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(d){return{value:d,next:null,prev:null}},l=function(d,g,p,v){return d!==null?d.next=g:v.head=g,p!==null?p.prev=g:v.tail=g,g.prev=d,g.next=p,v.length++,g},u=function(d,g){var p=d.prev,v=d.next;return p!==null?p.next=v:g.head=v,v!==null?v.prev=p:g.tail=p,d.prev=d.next=null,g.length--,d},h=function(){function f(d){var g=this;s(this,f),this.length=0,this.head=null,this.tail=null,d!=null&&d.forEach(function(p){return g.push(p)})}return a(f,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(g,p){return l(p.prev,o(g),p,this)}},{key:"insertAfter",value:function(g,p){return l(p,o(g),p.next,this)}},{key:"insertNodeBefore",value:function(g,p){return l(p.prev,g,p,this)}},{key:"insertNodeAfter",value:function(g,p){return l(p,g,p.next,this)}},{key:"push",value:function(g){return l(this.tail,o(g),null,this)}},{key:"unshift",value:function(g){return l(null,o(g),this.head,this)}},{key:"remove",value:function(g){return u(g,this)}},{key:"pop",value:function(){return u(this.tail,this).value}},{key:"popNode",value:function(){return u(this.tail,this)}},{key:"shift",value:function(){return u(this.head,this).value}},{key:"shiftNode",value:function(){return u(this.head,this)}},{key:"get_object_at",value:function(g){if(g<=this.length()){for(var p=1,v=this.head;p<g;)v=v.next,p++;return v.value}}},{key:"set_object_at",value:function(g,p){if(g<=this.length()){for(var v=1,m=this.head;v<g;)m=m.next,v++;m.value=p}}}]),f}();r.exports=h},function(r,n,i){function a(s,o,l){this.x=null,this.y=null,s==null&&o==null&&l==null?(this.x=0,this.y=0):typeof s=="number"&&typeof o=="number"&&l==null?(this.x=s,this.y=o):s.constructor.name=="Point"&&o==null&&l==null&&(l=s,this.x=l.x,this.y=l.y)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getLocation=function(){return new a(this.x,this.y)},a.prototype.setLocation=function(s,o,l){s.constructor.name=="Point"&&o==null&&l==null?(l=s,this.setLocation(l.x,l.y)):typeof s=="number"&&typeof o=="number"&&l==null&&(parseInt(s)==s&&parseInt(o)==o?this.move(s,o):(this.x=Math.floor(s+.5),this.y=Math.floor(o+.5)))},a.prototype.move=function(s,o){this.x=s,this.y=o},a.prototype.translate=function(s,o){this.x+=s,this.y+=o},a.prototype.equals=function(s){if(s.constructor.name=="Point"){var o=s;return this.x==o.x&&this.y==o.y}return this==s},a.prototype.toString=function(){return new a().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=a},function(r,n,i){function a(s,o,l,u){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&o!=null&&l!=null&&u!=null&&(this.x=s,this.y=o,this.width=l,this.height=u)}a.prototype.getX=function(){return this.x},a.prototype.setX=function(s){this.x=s},a.prototype.getY=function(){return this.y},a.prototype.setY=function(s){this.y=s},a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.intersects=function(s){return!(this.getRight()<s.x||this.getBottom()<s.y||s.getRight()<this.x||s.getBottom()<this.y)},a.prototype.getCenterX=function(){return this.x+this.width/2},a.prototype.getMinX=function(){return this.getX()},a.prototype.getMaxX=function(){return this.getX()+this.width},a.prototype.getCenterY=function(){return this.y+this.height/2},a.prototype.getMinY=function(){return this.getY()},a.prototype.getMaxY=function(){return this.getY()+this.height},a.prototype.getWidthHalf=function(){return this.width/2},a.prototype.getHeightHalf=function(){return this.height/2},r.exports=a},function(r,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function s(){}s.lastID=0,s.createID=function(o){return s.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=s.getString(),s.lastID++),o.uniqueID)},s.getString=function(o){return o==null&&(o=s.lastID),"Object#"+o},s.isPrimitive=function(o){var l=typeof o>"u"?"undefined":a(o);return o==null||l!="object"&&l!="function"},r.exports=s},function(r,n,i){function a(v){if(Array.isArray(v)){for(var m=0,y=Array(v.length);m<v.length;m++)y[m]=v[m];return y}else return Array.from(v)}var s=i(0),o=i(6),l=i(3),u=i(1),h=i(5),f=i(4),d=i(17),g=i(27);function p(v){g.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,v!=null&&(this.isRemoteUse=v)}p.RANDOM_SEED=1,p.prototype=Object.create(g.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var v=new o(this);return this.graphManager=v,v},p.prototype.newGraph=function(v){return new h(null,this.graphManager,v)},p.prototype.newNode=function(v){return new l(this.graphManager,v)},p.prototype.newEdge=function(v){return new u(null,null,v)},p.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var v;return this.checkLayoutSuccess()?v=!1:v=this.layout(),s.ANIMATE==="during"?!1:(v&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,v)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var v=this.graphManager.getAllEdges(),m=0;m<v.length;m++)v[m];for(var y=this.graphManager.getRoot().getNodes(),m=0;m<y.length;m++)y[m];this.update(this.graphManager.getRoot())}},p.prototype.update=function(v){if(v==null)this.update2();else if(v instanceof l){var m=v;if(m.getChild()!=null)for(var y=m.getChild().getNodes(),b=0;b<y.length;b++)update(y[b]);if(m.vGraphObject!=null){var T=m.vGraphObject;T.update(m)}}else if(v instanceof u){var w=v;if(w.vGraphObject!=null){var k=w.vGraphObject;k.update(w)}}else if(v instanceof h){var S=v;if(S.vGraphObject!=null){var E=S.vGraphObject;E.update(S)}}},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(v){if(v==null)this.transform(new f(0,0));else{var m=new d,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){m.setWorldOrgX(v.x),m.setWorldOrgY(v.y),m.setDeviceOrgX(y.x),m.setDeviceOrgY(y.y);for(var b=this.getAllNodes(),T,w=0;w<b.length;w++)T=b[w],T.transform(m)}}},p.prototype.positionNodesRandomly=function(v){if(v==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var m,y,b=v.getNodes(),T=0;T<b.length;T++)m=b[T],y=m.getChild(),y==null||y.getNodes().length==0?m.scatter():(this.positionNodesRandomly(y),m.updateBounds())},p.prototype.getFlatForest=function(){for(var v=[],m=!0,y=this.graphManager.getRoot().getNodes(),b=!0,T=0;T<y.length;T++)y[T].getChild()!=null&&(b=!1);if(!b)return v;var w=new Set,k=[],S=new Map,E=[];for(E=E.concat(y);E.length>0&&m;){for(k.push(E[0]);k.length>0&&m;){var L=k[0];k.splice(0,1),w.add(L);for(var A=L.getEdges(),T=0;T<A.length;T++){var R=A[T].getOtherEnd(L);if(S.get(L)!=R)if(!w.has(R))k.push(R),S.set(R,L);else{m=!1;break}}}if(!m)v=[];else{var C=[].concat(a(w));v.push(C);for(var T=0;T<C.length;T++){var D=C[T],P=E.indexOf(D);P>-1&&E.splice(P,1)}w=new Set,S=new Map}}return v},p.prototype.createDummyNodesForBendpoints=function(v){for(var m=[],y=v.source,b=this.graphManager.calcLowestCommonAncestor(v.source,v.target),T=0;T<v.bendpoints.length;T++){var w=this.newNode(null);w.setRect(new Point(0,0),new Dimension(1,1)),b.add(w);var k=this.newEdge(null);this.graphManager.add(k,y,w),m.add(w),y=w}var k=this.newEdge(null);return this.graphManager.add(k,y,v.target),this.edgeToDummyNodes.set(v,m),v.isInterGraph()?this.graphManager.remove(v):b.remove(v),m},p.prototype.createBendpointsFromDummyNodes=function(){var v=[];v=v.concat(this.graphManager.getAllEdges()),v=[].concat(a(this.edgeToDummyNodes.keys())).concat(v);for(var m=0;m<v.length;m++){var y=v[m];if(y.bendpoints.length>0){for(var b=this.edgeToDummyNodes.get(y),T=0;T<b.length;T++){var w=b[T],k=new f(w.getCenterX(),w.getCenterY()),S=y.bendpoints.get(T);S.x=k.x,S.y=k.y,w.getOwner().remove(w)}this.graphManager.add(y,y.source,y.target)}}},p.transform=function(v,m,y,b){if(y!=null&&b!=null){var T=m;if(v<=50){var w=m/y;T-=(m-w)/50*(50-v)}else{var k=m*b;T+=(k-m)/50*(v-50)}return T}else{var S,E;return v<=50?(S=9*m/500,E=m/10):(S=9*m/50,E=-8*m),S*v+E}},p.findCenterOfTree=function(v){var m=[];m=m.concat(v);var y=[],b=new Map,T=!1,w=null;(m.length==1||m.length==2)&&(T=!0,w=m[0]);for(var k=0;k<m.length;k++){var S=m[k],E=S.getNeighborsList().size;b.set(S,S.getNeighborsList().size),E==1&&y.push(S)}var L=[];for(L=L.concat(y);!T;){var A=[];A=A.concat(L),L=[];for(var k=0;k<m.length;k++){var S=m[k],R=m.indexOf(S);R>=0&&m.splice(R,1);var C=S.getNeighborsList();C.forEach(function(_){if(y.indexOf(_)<0){var I=b.get(_),M=I-1;M==1&&L.push(_),b.set(_,M)}})}y=y.concat(L),(m.length==1||m.length==2)&&(T=!0,w=m[0])}return w},p.prototype.setGraphManager=function(v){this.graphManager=v},r.exports=p},function(r,n,i){function a(){}a.seed=1,a.x=0,a.nextDouble=function(){return a.x=Math.sin(a.seed++)*1e4,a.x-Math.floor(a.x)},r.exports=a},function(r,n,i){var a=i(4);function s(o,l){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(o){this.lworldExtX=o},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(o){this.lworldExtY=o},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},s.prototype.transformX=function(o){var l=0,u=this.lworldExtX;return u!=0&&(l=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/u),l},s.prototype.transformY=function(o){var l=0,u=this.lworldExtY;return u!=0&&(l=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/u),l},s.prototype.inverseTransformX=function(o){var l=0,u=this.ldeviceExtX;return u!=0&&(l=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/u),l},s.prototype.inverseTransformY=function(o){var l=0,u=this.ldeviceExtY;return u!=0&&(l=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/u),l},s.prototype.inverseTransformPoint=function(o){var l=new a(this.inverseTransformX(o.x),this.inverseTransformY(o.y));return l},r.exports=s},function(r,n,i){function a(g){if(Array.isArray(g)){for(var p=0,v=Array(g.length);p<g.length;p++)v[p]=g[p];return v}else return Array.from(g)}var s=i(15),o=i(7),l=i(0),u=i(8),h=i(9);function f(){s.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.springConstant=o.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=o.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}f.prototype=Object.create(s.prototype);for(var d in s)f[d]=s[d];f.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},f.prototype.calcIdealEdgeLengths=function(){for(var g,p,v,m,y,b,T=this.getGraphManager().getAllEdges(),w=0;w<T.length;w++)g=T[w],g.idealLength=this.idealEdgeLength,g.isInterGraph&&(v=g.getSource(),m=g.getTarget(),y=g.getSourceInLca().getEstimatedSize(),b=g.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(g.idealLength+=y+b-2*l.SIMPLE_NODE_SIZE),p=g.getLca().getInclusionTreeDepth(),g.idealLength+=o.DEFAULT_EDGE_LENGTH*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(v.getInclusionTreeDepth()+m.getInclusionTreeDepth()-2*p))},f.prototype.initSpringEmbedder=function(){var g=this.getAllNodes().length;this.incremental?(g>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(g-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(g>o.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(o.COOLING_ADAPTATION_FACTOR,1-(g-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},f.prototype.calcSpringForces=function(){for(var g=this.getAllEdges(),p,v=0;v<g.length;v++)p=g[v],this.calcSpringForce(p,p.idealLength)},f.prototype.calcRepulsionForces=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v,m,y,b,T=this.getAllNodes(),w;if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&g&&this.updateGrid(),w=new Set,v=0;v<T.length;v++)y=T[v],this.calculateRepulsionForceOfANode(y,w,g,p),w.add(y);else for(v=0;v<T.length;v++)for(y=T[v],m=v+1;m<T.length;m++)b=T[m],y.getOwner()==b.getOwner()&&this.calcRepulsionForce(y,b)},f.prototype.calcGravitationalForces=function(){for(var g,p=this.getAllNodesToApplyGravitation(),v=0;v<p.length;v++)g=p[v],this.calcGravitationalForce(g)},f.prototype.moveNodes=function(){for(var g=this.getAllNodes(),p,v=0;v<g.length;v++)p=g[v],p.move()},f.prototype.calcSpringForce=function(g,p){var v=g.getSource(),m=g.getTarget(),y,b,T,w;if(this.uniformLeafNodeSizes&&v.getChild()==null&&m.getChild()==null)g.updateLengthSimple();else if(g.updateLength(),g.isOverlapingSourceAndTarget)return;y=g.getLength(),y!=0&&(b=this.springConstant*(y-p),T=b*(g.lengthX/y),w=b*(g.lengthY/y),v.springForceX+=T,v.springForceY+=w,m.springForceX-=T,m.springForceY-=w)},f.prototype.calcRepulsionForce=function(g,p){var v=g.getRect(),m=p.getRect(),y=new Array(2),b=new Array(4),T,w,k,S,E,L,A;if(v.intersects(m)){u.calcSeparationAmount(v,m,y,o.DEFAULT_EDGE_LENGTH/2),L=2*y[0],A=2*y[1];var R=g.noOfChildren*p.noOfChildren/(g.noOfChildren+p.noOfChildren);g.repulsionForceX-=R*L,g.repulsionForceY-=R*A,p.repulsionForceX+=R*L,p.repulsionForceY+=R*A}else this.uniformLeafNodeSizes&&g.getChild()==null&&p.getChild()==null?(T=m.getCenterX()-v.getCenterX(),w=m.getCenterY()-v.getCenterY()):(u.getIntersection(v,m,b),T=b[2]-b[0],w=b[3]-b[1]),Math.abs(T)<o.MIN_REPULSION_DIST&&(T=h.sign(T)*o.MIN_REPULSION_DIST),Math.abs(w)<o.MIN_REPULSION_DIST&&(w=h.sign(w)*o.MIN_REPULSION_DIST),k=T*T+w*w,S=Math.sqrt(k),E=this.repulsionConstant*g.noOfChildren*p.noOfChildren/k,L=E*T/S,A=E*w/S,g.repulsionForceX-=L,g.repulsionForceY-=A,p.repulsionForceX+=L,p.repulsionForceY+=A},f.prototype.calcGravitationalForce=function(g){var p,v,m,y,b,T,w,k;p=g.getOwner(),v=(p.getRight()+p.getLeft())/2,m=(p.getTop()+p.getBottom())/2,y=g.getCenterX()-v,b=g.getCenterY()-m,T=Math.abs(y)+g.getWidth()/2,w=Math.abs(b)+g.getHeight()/2,g.getOwner()==this.graphManager.getRoot()?(k=p.getEstimatedSize()*this.gravityRangeFactor,(T>k||w>k)&&(g.gravitationForceX=-this.gravityConstant*y,g.gravitationForceY=-this.gravityConstant*b)):(k=p.getEstimatedSize()*this.compoundGravityRangeFactor,(T>k||w>k)&&(g.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,g.gravitationForceY=-this.gravityConstant*b*this.compoundGravityConstant))},f.prototype.isConverged=function(){var g,p=!1;return this.totalIterations>this.maxIterations/3&&(p=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),g=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,g||p},f.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},f.prototype.calcNoOfChildrenForAllNodes=function(){for(var g,p=this.graphManager.getAllNodes(),v=0;v<p.length;v++)g=p[v],g.noOfChildren=g.getNoOfChildren()},f.prototype.calcGrid=function(g){var p=0,v=0;p=parseInt(Math.ceil((g.getRight()-g.getLeft())/this.repulsionRange)),v=parseInt(Math.ceil((g.getBottom()-g.getTop())/this.repulsionRange));for(var m=new Array(p),y=0;y<p;y++)m[y]=new Array(v);for(var y=0;y<p;y++)for(var b=0;b<v;b++)m[y][b]=new Array;return m},f.prototype.addNodeToGrid=function(g,p,v){var m=0,y=0,b=0,T=0;m=parseInt(Math.floor((g.getRect().x-p)/this.repulsionRange)),y=parseInt(Math.floor((g.getRect().width+g.getRect().x-p)/this.repulsionRange)),b=parseInt(Math.floor((g.getRect().y-v)/this.repulsionRange)),T=parseInt(Math.floor((g.getRect().height+g.getRect().y-v)/this.repulsionRange));for(var w=m;w<=y;w++)for(var k=b;k<=T;k++)this.grid[w][k].push(g),g.setGridCoordinates(m,y,b,T)},f.prototype.updateGrid=function(){var g,p,v=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),g=0;g<v.length;g++)p=v[g],this.addNodeToGrid(p,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},f.prototype.calculateRepulsionForceOfANode=function(g,p,v,m){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&v||m){var y=new Set;g.surrounding=new Array;for(var b,T=this.grid,w=g.startX-1;w<g.finishX+2;w++)for(var k=g.startY-1;k<g.finishY+2;k++)if(!(w<0||k<0||w>=T.length||k>=T[0].length)){for(var S=0;S<T[w][k].length;S++)if(b=T[w][k][S],!(g.getOwner()!=b.getOwner()||g==b)&&!p.has(b)&&!y.has(b)){var E=Math.abs(g.getCenterX()-b.getCenterX())-(g.getWidth()/2+b.getWidth()/2),L=Math.abs(g.getCenterY()-b.getCenterY())-(g.getHeight()/2+b.getHeight()/2);E<=this.repulsionRange&&L<=this.repulsionRange&&y.add(b)}}g.surrounding=[].concat(a(y))}for(w=0;w<g.surrounding.length;w++)this.calcRepulsionForce(g,g.surrounding[w])},f.prototype.calcRepulsionRange=function(){return 0},r.exports=f},function(r,n,i){var a=i(1),s=i(7);function o(u,h,f){a.call(this,u,h,f),this.idealLength=s.DEFAULT_EDGE_LENGTH}o.prototype=Object.create(a.prototype);for(var l in a)o[l]=a[l];r.exports=o},function(r,n,i){var a=i(3);function s(l,u,h,f){a.call(this,l,u,h,f),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}s.prototype=Object.create(a.prototype);for(var o in a)s[o]=a[o];s.prototype.setGridCoordinates=function(l,u,h,f){this.startX=l,this.finishX=u,this.startY=h,this.finishY=f},r.exports=s},function(r,n,i){function a(s,o){this.width=0,this.height=0,s!==null&&o!==null&&(this.height=o,this.width=s)}a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},r.exports=a},function(r,n,i){var a=i(14);function s(){this.map={},this.keys=[]}s.prototype.put=function(o,l){var u=a.createID(o);this.contains(u)||(this.map[u]=l,this.keys.push(o))},s.prototype.contains=function(o){return a.createID(o),this.map[o]!=null},s.prototype.get=function(o){var l=a.createID(o);return this.map[l]},s.prototype.keySet=function(){return this.keys},r.exports=s},function(r,n,i){var a=i(14);function s(){this.set={}}s.prototype.add=function(o){var l=a.createID(o);this.contains(l)||(this.set[l]=o)},s.prototype.remove=function(o){delete this.set[a.createID(o)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(o){return this.set[a.createID(o)]==o},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(o){for(var l=Object.keys(this.set),u=l.length,h=0;h<u;h++)o.push(this.set[l[h]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(o){for(var l=o.length,u=0;u<l;u++){var h=o[u];this.add(h)}},r.exports=s},function(r,n,i){var a=function(){function u(h,f){for(var d=0;d<f.length;d++){var g=f[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}return function(h,f,d){return f&&u(h.prototype,f),d&&u(h,d),h}}();function s(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var o=i(11),l=function(){function u(h,f){s(this,u),(f!==null||f!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var d=void 0;h instanceof o?d=h.size():d=h.length,this._quicksort(h,0,d-1)}return a(u,[{key:"_quicksort",value:function(f,d,g){if(d<g){var p=this._partition(f,d,g);this._quicksort(f,d,p),this._quicksort(f,p+1,g)}}},{key:"_partition",value:function(f,d,g){for(var p=this._get(f,d),v=d,m=g;;){for(;this.compareFunction(p,this._get(f,m));)m--;for(;this.compareFunction(this._get(f,v),p);)v++;if(v<m)this._swap(f,v,m),v++,m--;else return m}}},{key:"_get",value:function(f,d){return f instanceof o?f.get_object_at(d):f[d]}},{key:"_set",value:function(f,d,g){f instanceof o?f.set_object_at(d,g):f[d]=g}},{key:"_swap",value:function(f,d,g){var p=this._get(f,d);this._set(f,d,this._get(f,g)),this._set(f,g,p)}},{key:"_defaultCompareFunction",value:function(f,d){return d>f}}]),u}();r.exports=l},function(r,n,i){var a=function(){function l(u,h){for(var f=0;f<h.length;f++){var d=h[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}return function(u,h,f){return h&&l(u.prototype,h),f&&l(u,f),u}}();function s(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(u,h){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,l),this.sequence1=u,this.sequence2=h,this.match_score=f,this.mismatch_penalty=d,this.gap_penalty=g,this.iMax=u.length+1,this.jMax=h.length+1,this.grid=new Array(this.iMax);for(var p=0;p<this.iMax;p++){this.grid[p]=new Array(this.jMax);for(var v=0;v<this.jMax;v++)this.grid[p][v]=0}this.tracebackGrid=new Array(this.iMax);for(var m=0;m<this.iMax;m++){this.tracebackGrid[m]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.tracebackGrid[m][y]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return a(l,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var h=1;h<this.jMax;h++)this.grid[0][h]=this.grid[0][h-1]+this.gap_penalty,this.tracebackGrid[0][h]=[!1,!1,!0];for(var f=1;f<this.iMax;f++)this.grid[f][0]=this.grid[f-1][0]+this.gap_penalty,this.tracebackGrid[f][0]=[!1,!0,!1];for(var d=1;d<this.iMax;d++)for(var g=1;g<this.jMax;g++){var p=void 0;this.sequence1[d-1]===this.sequence2[g-1]?p=this.grid[d-1][g-1]+this.match_score:p=this.grid[d-1][g-1]+this.mismatch_penalty;var v=this.grid[d-1][g]+this.gap_penalty,m=this.grid[d][g-1]+this.gap_penalty,y=[p,v,m],b=this.arrayAllMaxIndexes(y);this.grid[d][g]=y[b[0]],this.tracebackGrid[d][g]=[b.includes(0),b.includes(1),b.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var h=[];for(h.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});h[0];){var f=h[0],d=this.tracebackGrid[f.pos[0]][f.pos[1]];d[0]&&h.push({pos:[f.pos[0]-1,f.pos[1]-1],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),d[1]&&h.push({pos:[f.pos[0]-1,f.pos[1]],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:"-"+f.seq2}),d[2]&&h.push({pos:[f.pos[0],f.pos[1]-1],seq1:"-"+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),f.pos[0]===0&&f.pos[1]===0&&this.alignments.push({sequence1:f.seq1,sequence2:f.seq2}),h.shift()}return this.alignments}},{key:"getAllIndexes",value:function(h,f){for(var d=[],g=-1;(g=h.indexOf(f,g+1))!==-1;)d.push(g);return d}},{key:"arrayAllMaxIndexes",value:function(h){return this.getAllIndexes(h,Math.max.apply(null,h))}}]),l}();r.exports=o},function(r,n,i){var a=function(){};a.FDLayout=i(18),a.FDLayoutConstants=i(7),a.FDLayoutEdge=i(19),a.FDLayoutNode=i(20),a.DimensionD=i(21),a.HashMap=i(22),a.HashSet=i(23),a.IGeometry=i(8),a.IMath=i(9),a.Integer=i(10),a.Point=i(12),a.PointD=i(4),a.RandomSeed=i(16),a.RectangleD=i(13),a.Transform=i(17),a.UniqueIDGeneretor=i(14),a.Quicksort=i(24),a.LinkedList=i(11),a.LGraphObject=i(2),a.LGraph=i(5),a.LEdge=i(1),a.LGraphManager=i(6),a.LNode=i(3),a.Layout=i(15),a.LayoutConstants=i(0),a.NeedlemanWunsch=i(25),r.exports=a},function(r,n,i){function a(){this.listeners=[]}var s=a.prototype;s.addListener=function(o,l){this.listeners.push({event:o,callback:l})},s.removeListener=function(o,l){for(var u=this.listeners.length;u>=0;u--){var h=this.listeners[u];h.event===o&&h.callback===l&&this.listeners.splice(u,1)}},s.emit=function(o,l){for(var u=0;u<this.listeners.length;u++){var h=this.listeners[u];o===h.event&&h.callback(l)}},r.exports=a}])})}(W1)),W1.exports}var LAt=U1.exports,$N;function RAt(){return $N||($N=1,function(e,t){(function(n,i){e.exports=i(AAt())})(LAt,function(r){return function(n){var i={};function a(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=n,a.c=i,a.i=function(s){return s},a.d=function(s,o,l){a.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:l})},a.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(o,"a",o),o},a.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},a.p="",a(a.s=7)}([function(n,i){n.exports=r},function(n,i,a){var s=a(0).FDLayoutConstants;function o(){}for(var l in s)o[l]=s[l];o.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,o.DEFAULT_RADIAL_SEPARATION=s.DEFAULT_EDGE_LENGTH,o.DEFAULT_COMPONENT_SEPERATION=60,o.TILE=!0,o.TILING_PADDING_VERTICAL=10,o.TILING_PADDING_HORIZONTAL=10,o.TREE_REDUCTION_ON_INCREMENTAL=!1,n.exports=o},function(n,i,a){var s=a(0).FDLayoutEdge;function o(u,h,f){s.call(this,u,h,f)}o.prototype=Object.create(s.prototype);for(var l in s)o[l]=s[l];n.exports=o},function(n,i,a){var s=a(0).LGraph;function o(u,h,f){s.call(this,u,h,f)}o.prototype=Object.create(s.prototype);for(var l in s)o[l]=s[l];n.exports=o},function(n,i,a){var s=a(0).LGraphManager;function o(u){s.call(this,u)}o.prototype=Object.create(s.prototype);for(var l in s)o[l]=s[l];n.exports=o},function(n,i,a){var s=a(0).FDLayoutNode,o=a(0).IMath;function l(h,f,d,g){s.call(this,h,f,d,g)}l.prototype=Object.create(s.prototype);for(var u in s)l[u]=s[u];l.prototype.move=function(){var h=this.graphManager.getLayout();this.displacementX=h.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=h.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>h.coolingFactor*h.maxNodeDisplacement&&(this.displacementX=h.coolingFactor*h.maxNodeDisplacement*o.sign(this.displacementX)),Math.abs(this.displacementY)>h.coolingFactor*h.maxNodeDisplacement&&(this.displacementY=h.coolingFactor*h.maxNodeDisplacement*o.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),h.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},l.prototype.propogateDisplacementToChildren=function(h,f){for(var d=this.getChild().getNodes(),g,p=0;p<d.length;p++)g=d[p],g.getChild()==null?(g.moveBy(h,f),g.displacementX+=h,g.displacementY+=f):g.propogateDisplacementToChildren(h,f)},l.prototype.setPred1=function(h){this.pred1=h},l.prototype.getPred1=function(){return pred1},l.prototype.getPred2=function(){return pred2},l.prototype.setNext=function(h){this.next=h},l.prototype.getNext=function(){return next},l.prototype.setProcessed=function(h){this.processed=h},l.prototype.isProcessed=function(){return processed},n.exports=l},function(n,i,a){var s=a(0).FDLayout,o=a(4),l=a(3),u=a(5),h=a(2),f=a(1),d=a(0).FDLayoutConstants,g=a(0).LayoutConstants,p=a(0).Point,v=a(0).PointD,m=a(0).Layout,y=a(0).Integer,b=a(0).IGeometry,T=a(0).LGraph,w=a(0).Transform;function k(){s.call(this),this.toBeTiled={}}k.prototype=Object.create(s.prototype);for(var S in s)k[S]=s[S];k.prototype.newGraphManager=function(){var E=new o(this);return this.graphManager=E,E},k.prototype.newGraph=function(E){return new l(null,this.graphManager,E)},k.prototype.newNode=function(E){return new u(this.graphManager,E)},k.prototype.newEdge=function(E){return new h(null,null,E)},k.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.isSubLayout||(f.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=f.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=f.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=d.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=d.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=d.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=d.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=d.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=d.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/d.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=d.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},k.prototype.layout=function(){var E=g.DEFAULT_CREATE_BENDS_AS_NEEDED;return E&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},k.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(f.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var L=new Set(this.getAllNodes()),A=this.nodesWithGravity.filter(function(D){return L.has(D)});this.graphManager.setAllNodesToApplyGravitation(A)}}else{var E=this.getFlatForest();if(E.length>0)this.positionNodesRadially(E);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var L=new Set(this.getAllNodes()),A=this.nodesWithGravity.filter(function(R){return L.has(R)});this.graphManager.setAllNodesToApplyGravitation(A),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},k.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%d.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),L=this.nodesWithGravity.filter(function(C){return E.has(C)});this.graphManager.setAllNodesToApplyGravitation(L),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var A=!this.isTreeGrowing&&!this.isGrowthFinished,R=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(A,R),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},k.prototype.getPositionsData=function(){for(var E=this.graphManager.getAllNodes(),L={},A=0;A<E.length;A++){var R=E[A].rect,C=E[A].id;L[C]={id:C,x:R.getCenterX(),y:R.getCenterY(),w:R.width,h:R.height}}return L},k.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var E=!1;if(d.ANIMATE==="during")this.emit("layoutstarted");else{for(;!E;)E=this.tick();this.graphManager.updateBounds()}},k.prototype.calculateNodesToApplyGravitationTo=function(){var E=[],L,A=this.graphManager.getGraphs(),R=A.length,C;for(C=0;C<R;C++)L=A[C],L.updateConnected(),L.isConnected||(E=E.concat(L.getNodes()));return E},k.prototype.createBendpoints=function(){var E=[];E=E.concat(this.graphManager.getAllEdges());var L=new Set,A;for(A=0;A<E.length;A++){var R=E[A];if(!L.has(R)){var C=R.getSource(),D=R.getTarget();if(C==D)R.getBendpoints().push(new v),R.getBendpoints().push(new v),this.createDummyNodesForBendpoints(R),L.add(R);else{var P=[];if(P=P.concat(C.getEdgeListToNode(D)),P=P.concat(D.getEdgeListToNode(C)),!L.has(P[0])){if(P.length>1){var _;for(_=0;_<P.length;_++){var I=P[_];I.getBendpoints().push(new v),this.createDummyNodesForBendpoints(I)}}P.forEach(function(M){L.add(M)})}}}if(L.size==E.length)break}},k.prototype.positionNodesRadially=function(E){for(var L=new p(0,0),A=Math.ceil(Math.sqrt(E.length)),R=0,C=0,D=0,P=new v(0,0),_=0;_<E.length;_++){_%A==0&&(D=0,C=R,_!=0&&(C+=f.DEFAULT_COMPONENT_SEPERATION),R=0);var I=E[_],M=m.findCenterOfTree(I);L.x=D,L.y=C,P=k.radialLayout(I,M,L),P.y>R&&(R=Math.floor(P.y)),D=Math.floor(P.x+f.DEFAULT_COMPONENT_SEPERATION)}this.transform(new v(g.WORLD_CENTER_X-P.x/2,g.WORLD_CENTER_Y-P.y/2))},k.radialLayout=function(E,L,A){var R=Math.max(this.maxDiagonalInTree(E),f.DEFAULT_RADIAL_SEPARATION);k.branchRadialLayout(L,null,0,359,0,R);var C=T.calculateBounds(E),D=new w;D.setDeviceOrgX(C.getMinX()),D.setDeviceOrgY(C.getMinY()),D.setWorldOrgX(A.x),D.setWorldOrgY(A.y);for(var P=0;P<E.length;P++){var _=E[P];_.transform(D)}var I=new v(C.getMaxX(),C.getMaxY());return D.inverseTransformPoint(I)},k.branchRadialLayout=function(E,L,A,R,C,D){var P=(R-A+1)/2;P<0&&(P+=180);var _=(P+A)%360,I=_*b.TWO_PI/360,M=C*Math.cos(I),O=C*Math.sin(I);E.setCenter(M,O);var N=[];N=N.concat(E.getEdges());var B=N.length;L!=null&&B--;for(var z=0,F=N.length,V,G=E.getEdgesBetween(L);G.length>1;){var Y=G[0];G.splice(0,1);var Q=N.indexOf(Y);Q>=0&&N.splice(Q,1),F--,B--}L!=null?V=(N.indexOf(G[0])+1)%F:V=0;for(var K=Math.abs(R-A)/B,it=V;z!=B;it=++it%F){var ut=N[it].getOtherEnd(E);if(ut!=L){var q=(A+z*K)%360,W=(q+K)%360;k.branchRadialLayout(ut,E,q,W,C+D,D),z++}}},k.maxDiagonalInTree=function(E){for(var L=y.MIN_VALUE,A=0;A<E.length;A++){var R=E[A],C=R.getDiagonal();C>L&&(L=C)}return L},k.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},k.prototype.groupZeroDegreeMembers=function(){var E=this,L={};this.memberGroups={},this.idToDummyNode={};for(var A=[],R=this.graphManager.getAllNodes(),C=0;C<R.length;C++){var D=R[C],P=D.getParent();this.getNodeDegreeWithChildren(D)===0&&(P.id==null||!this.getToBeTiled(P))&&A.push(D)}for(var C=0;C<A.length;C++){var D=A[C],_=D.getParent().id;typeof L[_]>"u"&&(L[_]=[]),L[_]=L[_].concat(D)}Object.keys(L).forEach(function(I){if(L[I].length>1){var M="DummyCompound_"+I;E.memberGroups[M]=L[I];var O=L[I][0].getParent(),N=new u(E.graphManager);N.id=M,N.paddingLeft=O.paddingLeft||0,N.paddingRight=O.paddingRight||0,N.paddingBottom=O.paddingBottom||0,N.paddingTop=O.paddingTop||0,E.idToDummyNode[M]=N;var B=E.getGraphManager().add(E.newGraph(),N),z=O.getChild();z.add(N);for(var F=0;F<L[I].length;F++){var V=L[I][F];z.remove(V),B.add(V)}}})},k.prototype.clearCompounds=function(){var E={},L={};this.performDFSOnCompounds();for(var A=0;A<this.compoundOrder.length;A++)L[this.compoundOrder[A].id]=this.compoundOrder[A],E[this.compoundOrder[A].id]=[].concat(this.compoundOrder[A].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[A].getChild()),this.compoundOrder[A].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(E,L)},k.prototype.clearZeroDegreeMembers=function(){var E=this,L=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(A){var R=E.idToDummyNode[A];L[A]=E.tileNodes(E.memberGroups[A],R.paddingLeft+R.paddingRight),R.rect.width=L[A].width,R.rect.height=L[A].height})},k.prototype.repopulateCompounds=function(){for(var E=this.compoundOrder.length-1;E>=0;E--){var L=this.compoundOrder[E],A=L.id,R=L.paddingLeft,C=L.paddingTop;this.adjustLocations(this.tiledMemberPack[A],L.rect.x,L.rect.y,R,C)}},k.prototype.repopulateZeroDegreeMembers=function(){var E=this,L=this.tiledZeroDegreePack;Object.keys(L).forEach(function(A){var R=E.idToDummyNode[A],C=R.paddingLeft,D=R.paddingTop;E.adjustLocations(L[A],R.rect.x,R.rect.y,C,D)})},k.prototype.getToBeTiled=function(E){var L=E.id;if(this.toBeTiled[L]!=null)return this.toBeTiled[L];var A=E.getChild();if(A==null)return this.toBeTiled[L]=!1,!1;for(var R=A.getNodes(),C=0;C<R.length;C++){var D=R[C];if(this.getNodeDegree(D)>0)return this.toBeTiled[L]=!1,!1;if(D.getChild()==null){this.toBeTiled[D.id]=!1;continue}if(!this.getToBeTiled(D))return this.toBeTiled[L]=!1,!1}return this.toBeTiled[L]=!0,!0},k.prototype.getNodeDegree=function(E){E.id;for(var L=E.getEdges(),A=0,R=0;R<L.length;R++){var C=L[R];C.getSource().id!==C.getTarget().id&&(A=A+1)}return A},k.prototype.getNodeDegreeWithChildren=function(E){var L=this.getNodeDegree(E);if(E.getChild()==null)return L;for(var A=E.getChild().getNodes(),R=0;R<A.length;R++){var C=A[R];L+=this.getNodeDegreeWithChildren(C)}return L},k.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},k.prototype.fillCompexOrderByDFS=function(E){for(var L=0;L<E.length;L++){var A=E[L];A.getChild()!=null&&this.fillCompexOrderByDFS(A.getChild().getNodes()),this.getToBeTiled(A)&&this.compoundOrder.push(A)}},k.prototype.adjustLocations=function(E,L,A,R,C){L+=R,A+=C;for(var D=L,P=0;P<E.rows.length;P++){var _=E.rows[P];L=D;for(var I=0,M=0;M<_.length;M++){var O=_[M];O.rect.x=L,O.rect.y=A,L+=O.rect.width+E.horizontalPadding,O.rect.height>I&&(I=O.rect.height)}A+=I+E.verticalPadding}},k.prototype.tileCompoundMembers=function(E,L){var A=this;this.tiledMemberPack=[],Object.keys(E).forEach(function(R){var C=L[R];A.tiledMemberPack[R]=A.tileNodes(E[R],C.paddingLeft+C.paddingRight),C.rect.width=A.tiledMemberPack[R].width,C.rect.height=A.tiledMemberPack[R].height})},k.prototype.tileNodes=function(E,L){var A=f.TILING_PADDING_VERTICAL,R=f.TILING_PADDING_HORIZONTAL,C={rows:[],rowWidth:[],rowHeight:[],width:0,height:L,verticalPadding:A,horizontalPadding:R};E.sort(function(_,I){return _.rect.width*_.rect.height>I.rect.width*I.rect.height?-1:_.rect.width*_.rect.height<I.rect.width*I.rect.height?1:0});for(var D=0;D<E.length;D++){var P=E[D];C.rows.length==0?this.insertNodeToRow(C,P,0,L):this.canAddHorizontal(C,P.rect.width,P.rect.height)?this.insertNodeToRow(C,P,this.getShortestRowIndex(C),L):this.insertNodeToRow(C,P,C.rows.length,L),this.shiftToLastRow(C)}return C},k.prototype.insertNodeToRow=function(E,L,A,R){var C=R;if(A==E.rows.length){var D=[];E.rows.push(D),E.rowWidth.push(C),E.rowHeight.push(0)}var P=E.rowWidth[A]+L.rect.width;E.rows[A].length>0&&(P+=E.horizontalPadding),E.rowWidth[A]=P,E.width<P&&(E.width=P);var _=L.rect.height;A>0&&(_+=E.verticalPadding);var I=0;_>E.rowHeight[A]&&(I=E.rowHeight[A],E.rowHeight[A]=_,I=E.rowHeight[A]-I),E.height+=I,E.rows[A].push(L)},k.prototype.getShortestRowIndex=function(E){for(var L=-1,A=Number.MAX_VALUE,R=0;R<E.rows.length;R++)E.rowWidth[R]<A&&(L=R,A=E.rowWidth[R]);return L},k.prototype.getLongestRowIndex=function(E){for(var L=-1,A=Number.MIN_VALUE,R=0;R<E.rows.length;R++)E.rowWidth[R]>A&&(L=R,A=E.rowWidth[R]);return L},k.prototype.canAddHorizontal=function(E,L,A){var R=this.getShortestRowIndex(E);if(R<0)return!0;var C=E.rowWidth[R];if(C+E.horizontalPadding+L<=E.width)return!0;var D=0;E.rowHeight[R]<A&&R>0&&(D=A+E.verticalPadding-E.rowHeight[R]);var P;E.width-C>=L+E.horizontalPadding?P=(E.height+D)/(C+L+E.horizontalPadding):P=(E.height+D)/E.width,D=A+E.verticalPadding;var _;return E.width<L?_=(E.height+D)/L:_=(E.height+D)/E.width,_<1&&(_=1/_),P<1&&(P=1/P),P<_},k.prototype.shiftToLastRow=function(E){var L=this.getLongestRowIndex(E),A=E.rowWidth.length-1,R=E.rows[L],C=R[R.length-1],D=C.width+E.horizontalPadding;if(E.width-E.rowWidth[A]>D&&L!=A){R.splice(-1,1),E.rows[A].push(C),E.rowWidth[L]=E.rowWidth[L]-D,E.rowWidth[A]=E.rowWidth[A]+D,E.width=E.rowWidth[instance.getLongestRowIndex(E)];for(var P=Number.MIN_VALUE,_=0;_<R.length;_++)R[_].height>P&&(P=R[_].height);L>0&&(P+=E.verticalPadding);var I=E.rowHeight[L]+E.rowHeight[A];E.rowHeight[L]=P,E.rowHeight[A]<C.height+E.verticalPadding&&(E.rowHeight[A]=C.height+E.verticalPadding);var M=E.rowHeight[L]+E.rowHeight[A];E.height+=M-I,this.shiftToLastRow(E)}},k.prototype.tilingPreLayout=function(){f.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},k.prototype.tilingPostLayout=function(){f.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},k.prototype.reduceTrees=function(){for(var E=[],L=!0,A;L;){var R=this.graphManager.getAllNodes(),C=[];L=!1;for(var D=0;D<R.length;D++)A=R[D],A.getEdges().length==1&&!A.getEdges()[0].isInterGraph&&A.getChild()==null&&(C.push([A,A.getEdges()[0],A.getOwner()]),L=!0);if(L==!0){for(var P=[],_=0;_<C.length;_++)C[_][0].getEdges().length==1&&(P.push(C[_]),C[_][0].getOwner().remove(C[_][0]));E.push(P),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=E},k.prototype.growTree=function(E){for(var L=E.length,A=E[L-1],R,C=0;C<A.length;C++)R=A[C],this.findPlaceforPrunedNode(R),R[2].add(R[0]),R[2].add(R[1],R[1].source,R[1].target);E.splice(E.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},k.prototype.findPlaceforPrunedNode=function(E){var L,A,R=E[0];R==E[1].source?A=E[1].target:A=E[1].source;var C=A.startX,D=A.finishX,P=A.startY,_=A.finishY,I=0,M=0,O=0,N=0,B=[I,O,M,N];if(P>0)for(var z=C;z<=D;z++)B[0]+=this.grid[z][P-1].length+this.grid[z][P].length-1;if(D<this.grid.length-1)for(var z=P;z<=_;z++)B[1]+=this.grid[D+1][z].length+this.grid[D][z].length-1;if(_<this.grid[0].length-1)for(var z=C;z<=D;z++)B[2]+=this.grid[z][_+1].length+this.grid[z][_].length-1;if(C>0)for(var z=P;z<=_;z++)B[3]+=this.grid[C-1][z].length+this.grid[C][z].length-1;for(var F=y.MAX_VALUE,V,G,Y=0;Y<B.length;Y++)B[Y]<F?(F=B[Y],V=1,G=Y):B[Y]==F&&V++;if(V==3&&F==0)B[0]==0&&B[1]==0&&B[2]==0?L=1:B[0]==0&&B[1]==0&&B[3]==0?L=0:B[0]==0&&B[2]==0&&B[3]==0?L=3:B[1]==0&&B[2]==0&&B[3]==0&&(L=2);else if(V==2&&F==0){var Q=Math.floor(Math.random()*2);B[0]==0&&B[1]==0?Q==0?L=0:L=1:B[0]==0&&B[2]==0?Q==0?L=0:L=2:B[0]==0&&B[3]==0?Q==0?L=0:L=3:B[1]==0&&B[2]==0?Q==0?L=1:L=2:B[1]==0&&B[3]==0?Q==0?L=1:L=3:Q==0?L=2:L=3}else if(V==4&&F==0){var Q=Math.floor(Math.random()*4);L=Q}else L=G;L==0?R.setCenter(A.getCenterX(),A.getCenterY()-A.getHeight()/2-d.DEFAULT_EDGE_LENGTH-R.getHeight()/2):L==1?R.setCenter(A.getCenterX()+A.getWidth()/2+d.DEFAULT_EDGE_LENGTH+R.getWidth()/2,A.getCenterY()):L==2?R.setCenter(A.getCenterX(),A.getCenterY()+A.getHeight()/2+d.DEFAULT_EDGE_LENGTH+R.getHeight()/2):R.setCenter(A.getCenterX()-A.getWidth()/2-d.DEFAULT_EDGE_LENGTH-R.getWidth()/2,A.getCenterY())},n.exports=k},function(n,i,a){var s={};s.layoutBase=a(0),s.CoSEConstants=a(1),s.CoSEEdge=a(2),s.CoSEGraph=a(3),s.CoSEGraphManager=a(4),s.CoSELayout=a(6),s.CoSENode=a(5),n.exports=s}])})}(U1)),U1.exports}var IAt=G1.exports,zN;function NAt(){return zN||(zN=1,function(e,t){(function(n,i){e.exports=i(RAt())})(IAt,function(r){return function(n){var i={};function a(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=n,a.c=i,a.i=function(s){return s},a.d=function(s,o,l){a.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:l})},a.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(o,"a",o),o},a.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},a.p="",a(a.s=1)}([function(n,i){n.exports=r},function(n,i,a){var s=a(0).layoutBase.LayoutConstants,o=a(0).layoutBase.FDLayoutConstants,l=a(0).CoSEConstants,u=a(0).CoSELayout,h=a(0).CoSENode,f=a(0).layoutBase.PointD,d=a(0).layoutBase.DimensionD,g={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function p(b,T){var w={};for(var k in b)w[k]=b[k];for(var k in T)w[k]=T[k];return w}function v(b){this.options=p(g,b),m(this.options)}var m=function(T){T.nodeRepulsion!=null&&(l.DEFAULT_REPULSION_STRENGTH=o.DEFAULT_REPULSION_STRENGTH=T.nodeRepulsion),T.idealEdgeLength!=null&&(l.DEFAULT_EDGE_LENGTH=o.DEFAULT_EDGE_LENGTH=T.idealEdgeLength),T.edgeElasticity!=null&&(l.DEFAULT_SPRING_STRENGTH=o.DEFAULT_SPRING_STRENGTH=T.edgeElasticity),T.nestingFactor!=null&&(l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=T.nestingFactor),T.gravity!=null&&(l.DEFAULT_GRAVITY_STRENGTH=o.DEFAULT_GRAVITY_STRENGTH=T.gravity),T.numIter!=null&&(l.MAX_ITERATIONS=o.MAX_ITERATIONS=T.numIter),T.gravityRange!=null&&(l.DEFAULT_GRAVITY_RANGE_FACTOR=o.DEFAULT_GRAVITY_RANGE_FACTOR=T.gravityRange),T.gravityCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=T.gravityCompound),T.gravityRangeCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=T.gravityRangeCompound),T.initialEnergyOnIncremental!=null&&(l.DEFAULT_COOLING_FACTOR_INCREMENTAL=o.DEFAULT_COOLING_FACTOR_INCREMENTAL=T.initialEnergyOnIncremental),T.quality=="draft"?s.QUALITY=0:T.quality=="proof"?s.QUALITY=2:s.QUALITY=1,l.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=T.nodeDimensionsIncludeLabels,l.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!T.randomize,l.ANIMATE=o.ANIMATE=s.ANIMATE=T.animate,l.TILE=T.tile,l.TILING_PADDING_VERTICAL=typeof T.tilingPaddingVertical=="function"?T.tilingPaddingVertical.call():T.tilingPaddingVertical,l.TILING_PADDING_HORIZONTAL=typeof T.tilingPaddingHorizontal=="function"?T.tilingPaddingHorizontal.call():T.tilingPaddingHorizontal};v.prototype.run=function(){var b,T,w=this.options;this.idToLNode={};var k=this.layout=new u,S=this;S.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var E=k.newGraphManager();this.gm=E;var L=this.options.eles.nodes(),A=this.options.eles.edges();this.root=E.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(L),k);for(var R=0;R<A.length;R++){var C=A[R],D=this.idToLNode[C.data("source")],P=this.idToLNode[C.data("target")];if(D!==P&&D.getEdgesBetween(P).length==0){var _=E.add(k.newEdge(),D,P);_.id=C.id()}}var I=function(N,B){typeof N=="number"&&(N=B);var z=N.data("id"),F=S.idToLNode[z];return{x:F.getRect().getCenterX(),y:F.getRect().getCenterY()}},M=function O(){for(var N=function(){w.fit&&w.cy.fit(w.eles,w.padding),b||(b=!0,S.cy.one("layoutready",w.ready),S.cy.trigger({type:"layoutready",layout:S}))},B=S.options.refresh,z,F=0;F<B&&!z;F++)z=S.stopped||S.layout.tick();if(z){k.checkLayoutSuccess()&&!k.isSubLayout&&k.doPostLayout(),k.tilingPostLayout&&k.tilingPostLayout(),k.isLayoutFinished=!0,S.options.eles.nodes().positions(I),N(),S.cy.one("layoutstop",S.options.stop),S.cy.trigger({type:"layoutstop",layout:S}),T&&cancelAnimationFrame(T),b=!1;return}var V=S.layout.getPositionsData();w.eles.nodes().positions(function(G,Y){if(typeof G=="number"&&(G=Y),!G.isParent()){for(var Q=G.id(),K=V[Q],it=G;K==null&&(K=V[it.data("parent")]||V["DummyCompound_"+it.data("parent")],V[Q]=K,it=it.parent()[0],it!=null););return K!=null?{x:K.x,y:K.y}:{x:G.position("x"),y:G.position("y")}}}),N(),T=requestAnimationFrame(O)};return k.addListener("layoutstarted",function(){S.options.animate==="during"&&(T=requestAnimationFrame(M))}),k.runLayout(),this.options.animate!=="during"&&(S.options.eles.nodes().not(":parent").layoutPositions(S,S.options,I),b=!1),this},v.prototype.getTopMostNodes=function(b){for(var T={},w=0;w<b.length;w++)T[b[w].id()]=!0;var k=b.filter(function(S,E){typeof S=="number"&&(S=E);for(var L=S.parent()[0];L!=null;){if(T[L.id()])return!1;L=L.parent()[0]}return!0});return k},v.prototype.processChildrenList=function(b,T,w){for(var k=T.length,S=0;S<k;S++){var E=T[S],L=E.children(),A,R=E.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(E.outerWidth()!=null&&E.outerHeight()!=null?A=b.add(new h(w.graphManager,new f(E.position("x")-R.w/2,E.position("y")-R.h/2),new d(parseFloat(R.w),parseFloat(R.h)))):A=b.add(new h(this.graphManager)),A.id=E.data("id"),A.paddingLeft=parseInt(E.css("padding")),A.paddingTop=parseInt(E.css("padding")),A.paddingRight=parseInt(E.css("padding")),A.paddingBottom=parseInt(E.css("padding")),this.options.nodeDimensionsIncludeLabels&&E.isParent()){var C=E.boundingBox({includeLabels:!0,includeNodes:!1}).w,D=E.boundingBox({includeLabels:!0,includeNodes:!1}).h,P=E.css("text-halign");A.labelWidth=C,A.labelHeight=D,A.labelPos=P}if(this.idToLNode[E.data("id")]=A,isNaN(A.rect.x)&&(A.rect.x=0),isNaN(A.rect.y)&&(A.rect.y=0),L!=null&&L.length>0){var _;_=w.getGraphManager().add(w.newGraph(),A),this.processChildrenList(_,L,w)}}},v.prototype.stop=function(){return this.stopped=!0,this};var y=function(T){T("layout","cose-bilkent",v)};typeof cytoscape<"u"&&y(cytoscape),n.exports=y}])})}(G1)),G1.exports}var DAt=NAt();const MAt=qh(DAt);var ik=function(){var e=x(function(w,k,S,E){for(S=S||{},E=w.length;E--;S[w[E]]=k);return S},"o"),t=[1,4],r=[1,13],n=[1,12],i=[1,15],a=[1,16],s=[1,20],o=[1,19],l=[6,7,8],u=[1,26],h=[1,24],f=[1,25],d=[6,7,11],g=[1,6,13,15,16,19,22],p=[1,33],v=[1,34],m=[1,6,7,11,13,15,16,19,22],y={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:x(function(k,S,E,L,A,R,C){var D=R.length-1;switch(A){case 6:case 7:return L;case 8:L.getLogger().trace("Stop NL ");break;case 9:L.getLogger().trace("Stop EOF ");break;case 11:L.getLogger().trace("Stop NL2 ");break;case 12:L.getLogger().trace("Stop EOF2 ");break;case 15:L.getLogger().info("Node: ",R[D].id),L.addNode(R[D-1].length,R[D].id,R[D].descr,R[D].type);break;case 16:L.getLogger().trace("Icon: ",R[D]),L.decorateNode({icon:R[D]});break;case 17:case 21:L.decorateNode({class:R[D]});break;case 18:L.getLogger().trace("SPACELIST");break;case 19:L.getLogger().trace("Node: ",R[D].id),L.addNode(0,R[D].id,R[D].descr,R[D].type);break;case 20:L.decorateNode({icon:R[D]});break;case 25:L.getLogger().trace("node found ..",R[D-2]),this.$={id:R[D-1],descr:R[D-1],type:L.getType(R[D-2],R[D])};break;case 26:this.$={id:R[D],descr:R[D],type:L.nodeType.DEFAULT};break;case 27:L.getLogger().trace("node found ..",R[D-3]),this.$={id:R[D-3],descr:R[D-1],type:L.getType(R[D-2],R[D])};break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:r,7:[1,10],9:9,12:11,13:n,14:14,15:i,16:a,17:17,18:18,19:s,22:o},e(l,[2,3]),{1:[2,2]},e(l,[2,4]),e(l,[2,5]),{1:[2,6],6:r,12:21,13:n,14:14,15:i,16:a,17:17,18:18,19:s,22:o},{6:r,9:22,12:11,13:n,14:14,15:i,16:a,17:17,18:18,19:s,22:o},{6:u,7:h,10:23,11:f},e(d,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:s,22:o}),e(d,[2,18]),e(d,[2,19]),e(d,[2,20]),e(d,[2,21]),e(d,[2,23]),e(d,[2,24]),e(d,[2,26],{19:[1,30]}),{20:[1,31]},{6:u,7:h,10:32,11:f},{1:[2,7],6:r,12:21,13:n,14:14,15:i,16:a,17:17,18:18,19:s,22:o},e(g,[2,14],{7:p,11:v}),e(m,[2,8]),e(m,[2,9]),e(m,[2,10]),e(d,[2,15]),e(d,[2,16]),e(d,[2,17]),{20:[1,35]},{21:[1,36]},e(g,[2,13],{7:p,11:v}),e(m,[2,11]),e(m,[2,12]),{21:[1,37]},e(d,[2,25]),e(d,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:x(function(k,S){if(S.recoverable)this.trace(k);else{var E=new Error(k);throw E.hash=S,E}},"parseError"),parse:x(function(k){var S=this,E=[0],L=[],A=[null],R=[],C=this.table,D="",P=0,_=0,I=2,M=1,O=R.slice.call(arguments,1),N=Object.create(this.lexer),B={yy:{}};for(var z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,z)&&(B.yy[z]=this.yy[z]);N.setInput(k,B.yy),B.yy.lexer=N,B.yy.parser=this,typeof N.yylloc>"u"&&(N.yylloc={});var F=N.yylloc;R.push(F);var V=N.options&&N.options.ranges;typeof B.yy.parseError=="function"?this.parseError=B.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function G(j){E.length=E.length-2*j,A.length=A.length-j,R.length=R.length-j}x(G,"popStack");function Y(){var j;return j=L.pop()||N.lex()||M,typeof j!="number"&&(j instanceof Array&&(L=j,j=L.pop()),j=S.symbols_[j]||j),j}x(Y,"lex");for(var Q,K,it,ut,q={},W,H,U,X;;){if(K=E[E.length-1],this.defaultActions[K]?it=this.defaultActions[K]:((Q===null||typeof Q>"u")&&(Q=Y()),it=C[K]&&C[K][Q]),typeof it>"u"||!it.length||!it[0]){var J="";X=[];for(W in C[K])this.terminals_[W]&&W>I&&X.push("'"+this.terminals_[W]+"'");N.showPosition?J="Parse error on line "+(P+1)+`:
`+N.showPosition()+`
Expecting `+X.join(", ")+", got '"+(this.terminals_[Q]||Q)+"'":J="Parse error on line "+(P+1)+": Unexpected "+(Q==M?"end of input":"'"+(this.terminals_[Q]||Q)+"'"),this.parseError(J,{text:N.match,token:this.terminals_[Q]||Q,line:N.yylineno,loc:F,expected:X})}if(it[0]instanceof Array&&it.length>1)throw new Error("Parse Error: multiple actions possible at state: "+K+", token: "+Q);switch(it[0]){case 1:E.push(Q),A.push(N.yytext),R.push(N.yylloc),E.push(it[1]),Q=null,_=N.yyleng,D=N.yytext,P=N.yylineno,F=N.yylloc;break;case 2:if(H=this.productions_[it[1]][1],q.$=A[A.length-H],q._$={first_line:R[R.length-(H||1)].first_line,last_line:R[R.length-1].last_line,first_column:R[R.length-(H||1)].first_column,last_column:R[R.length-1].last_column},V&&(q._$.range=[R[R.length-(H||1)].range[0],R[R.length-1].range[1]]),ut=this.performAction.apply(q,[D,_,P,B.yy,it[1],A,R].concat(O)),typeof ut<"u")return ut;H&&(E=E.slice(0,-1*H*2),A=A.slice(0,-1*H),R=R.slice(0,-1*H)),E.push(this.productions_[it[1]][0]),A.push(q.$),R.push(q._$),U=C[E[E.length-2]][E[E.length-1]],E.push(U);break;case 3:return!0}}return!0},"parse")},b=function(){var w={EOF:1,parseError:x(function(S,E){if(this.yy.parser)this.yy.parser.parseError(S,E);else throw new Error(S)},"parseError"),setInput:x(function(k,S){return this.yy=S||this.yy||{},this._input=k,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var k=this._input[0];this.yytext+=k,this.yyleng++,this.offset++,this.match+=k,this.matched+=k;var S=k.match(/(?:\r\n?|\n).*/g);return S?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),k},"input"),unput:x(function(k){var S=k.length,E=k.split(/(?:\r\n?|\n)/g);this._input=k+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-S),this.offset-=S;var L=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),E.length-1&&(this.yylineno-=E.length-1);var A=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:E?(E.length===L.length?this.yylloc.first_column:0)+L[L.length-E.length].length-E[0].length:this.yylloc.first_column-S},this.options.ranges&&(this.yylloc.range=[A[0],A[0]+this.yyleng-S]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(k){this.unput(this.match.slice(k))},"less"),pastInput:x(function(){var k=this.matched.substr(0,this.matched.length-this.match.length);return(k.length>20?"...":"")+k.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var k=this.match;return k.length<20&&(k+=this._input.substr(0,20-k.length)),(k.substr(0,20)+(k.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var k=this.pastInput(),S=new Array(k.length+1).join("-");return k+this.upcomingInput()+`
`+S+"^"},"showPosition"),test_match:x(function(k,S){var E,L,A;if(this.options.backtrack_lexer&&(A={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(A.yylloc.range=this.yylloc.range.slice(0))),L=k[0].match(/(?:\r\n?|\n).*/g),L&&(this.yylineno+=L.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:L?L[L.length-1].length-L[L.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+k[0].length},this.yytext+=k[0],this.match+=k[0],this.matches=k,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(k[0].length),this.matched+=k[0],E=this.performAction.call(this,this.yy,this,S,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),E)return E;if(this._backtrack){for(var R in A)this[R]=A[R];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var k,S,E,L;this._more||(this.yytext="",this.match="");for(var A=this._currentRules(),R=0;R<A.length;R++)if(E=this._input.match(this.rules[A[R]]),E&&(!S||E[0].length>S[0].length)){if(S=E,L=R,this.options.backtrack_lexer){if(k=this.test_match(E,A[R]),k!==!1)return k;if(this._backtrack){S=!1;continue}else return!1}else if(!this.options.flex)break}return S?(k=this.test_match(S,A[L]),k!==!1?k:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var S=this.next();return S||this.lex()},"lex"),begin:x(function(S){this.conditionStack.push(S)},"begin"),popState:x(function(){var S=this.conditionStack.length-1;return S>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(S){return S=this.conditionStack.length-1-Math.abs(S||0),S>=0?this.conditionStack[S]:"INITIAL"},"topState"),pushState:x(function(S){this.begin(S)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(S,E,L,A){switch(L){case 0:return S.getLogger().trace("Found comment",E.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:S.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return S.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:S.getLogger().trace("end icon"),this.popState();break;case 10:return S.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return S.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return S.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return S.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:S.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return S.getLogger().trace("description:",E.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),S.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),S.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),S.getLogger().trace("node end ...",E.yytext),"NODE_DEND";case 30:return this.popState(),S.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),S.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),S.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),S.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),S.getLogger().trace("node end (("),"NODE_DEND";case 35:return S.getLogger().trace("Long description:",E.yytext),20;case 36:return S.getLogger().trace("Long description:",E.yytext),20}},"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return w}();y.lexer=b;function T(){this.yy={}}return x(T,"Parser"),T.prototype=y,y.Parser=T,new T}();ik.parser=ik;var OAt=ik,Pa=[],nU=0,D_={},PAt=x(()=>{Pa=[],nU=0,D_={}},"clear"),BAt=x(function(e){for(let t=Pa.length-1;t>=0;t--)if(Pa[t].level<e)return Pa[t];return null},"getParent"),FAt=x(()=>Pa.length>0?Pa[0]:null,"getMindmap"),$At=x((e,t,r,n)=>{var l,u;et.info("addNode",e,t,r,n);const i=pt();let a=((l=i.mindmap)==null?void 0:l.padding)??Xe.mindmap.padding;switch(n){case en.ROUNDED_RECT:case en.RECT:case en.HEXAGON:a*=2}const s={id:nU++,nodeId:xr(t,i),level:e,descr:xr(r,i),type:n,children:[],width:((u=i.mindmap)==null?void 0:u.maxNodeWidth)??Xe.mindmap.maxNodeWidth,padding:a},o=BAt(e);if(o)o.children.push(s),Pa.push(s);else if(Pa.length===0)Pa.push(s);else throw new Error('There can be only one root. No parent could be found for ("'+s.descr+'")')},"addNode"),en={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},zAt=x((e,t)=>{switch(et.debug("In get type",e,t),e){case"[":return en.RECT;case"(":return t===")"?en.ROUNDED_RECT:en.CLOUD;case"((":return en.CIRCLE;case")":return en.CLOUD;case"))":return en.BANG;case"{{":return en.HEXAGON;default:return en.DEFAULT}},"getType"),VAt=x((e,t)=>{D_[e]=t},"setElementForId"),GAt=x(e=>{if(!e)return;const t=pt(),r=Pa[Pa.length-1];e.icon&&(r.icon=xr(e.icon,t)),e.class&&(r.class=xr(e.class,t))},"decorateNode"),UAt=x(e=>{switch(e){case en.DEFAULT:return"no-border";case en.RECT:return"rect";case en.ROUNDED_RECT:return"rounded-rect";case en.CIRCLE:return"circle";case en.CLOUD:return"cloud";case en.BANG:return"bang";case en.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),WAt=x(()=>et,"getLogger"),YAt=x(e=>D_[e],"getElementById"),HAt={clear:PAt,addNode:$At,getMindmap:FAt,nodeType:en,getType:zAt,setElementForId:VAt,decorateNode:GAt,type2Str:UAt,getLogger:WAt,getElementById:YAt},qAt=HAt,XAt=12,jAt=x(function(e,t,r,n){t.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("d",`M0 ${r.height-5} v${-r.height+2*5} q0,-5 5,-5 h${r.width-2*5} q5,0 5,5 v${r.height-5} H0 Z`),t.append("line").attr("class","node-line-"+n).attr("x1",0).attr("y1",r.height).attr("x2",r.width).attr("y2",r.height)},"defaultBkg"),KAt=x(function(e,t,r){t.append("rect").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("height",r.height).attr("width",r.width)},"rectBkg"),ZAt=x(function(e,t,r){const n=r.width,i=r.height,a=.15*n,s=.25*n,o=.35*n,l=.2*n;t.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("d",`M0 0 a${a},${a} 0 0,1 ${n*.25},${-1*n*.1}
      a${o},${o} 1 0,1 ${n*.4},${-1*n*.1}
      a${s},${s} 1 0,1 ${n*.35},${1*n*.2}

      a${a},${a} 1 0,1 ${n*.15},${1*i*.35}
      a${l},${l} 1 0,1 ${-1*n*.15},${1*i*.65}

      a${s},${a} 1 0,1 ${-1*n*.25},${n*.15}
      a${o},${o} 1 0,1 ${-1*n*.5},0
      a${a},${a} 1 0,1 ${-1*n*.25},${-1*n*.15}

      a${a},${a} 1 0,1 ${-1*n*.1},${-1*i*.35}
      a${l},${l} 1 0,1 ${n*.1},${-1*i*.65}

    H0 V0 Z`)},"cloudBkg"),QAt=x(function(e,t,r){const n=r.width,i=r.height,a=.15*n;t.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("d",`M0 0 a${a},${a} 1 0,0 ${n*.25},${-1*i*.1}
      a${a},${a} 1 0,0 ${n*.25},0
      a${a},${a} 1 0,0 ${n*.25},0
      a${a},${a} 1 0,0 ${n*.25},${1*i*.1}

      a${a},${a} 1 0,0 ${n*.15},${1*i*.33}
      a${a*.8},${a*.8} 1 0,0 0,${1*i*.34}
      a${a},${a} 1 0,0 ${-1*n*.15},${1*i*.33}

      a${a},${a} 1 0,0 ${-1*n*.25},${i*.15}
      a${a},${a} 1 0,0 ${-1*n*.25},0
      a${a},${a} 1 0,0 ${-1*n*.25},0
      a${a},${a} 1 0,0 ${-1*n*.25},${-1*i*.15}

      a${a},${a} 1 0,0 ${-1*n*.1},${-1*i*.33}
      a${a*.8},${a*.8} 1 0,0 0,${-1*i*.34}
      a${a},${a} 1 0,0 ${n*.1},${-1*i*.33}

    H0 V0 Z`)},"bangBkg"),JAt=x(function(e,t,r){t.append("circle").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("r",r.width/2)},"circleBkg");function iU(e,t,r,n,i){return e.insert("polygon",":first-child").attr("points",n.map(function(a){return a.x+","+a.y}).join(" ")).attr("transform","translate("+(i.width-t)/2+", "+r+")")}x(iU,"insertPolygonShape");var t3t=x(function(e,t,r){const n=r.height,a=n/4,s=r.width-r.padding+2*a,o=[{x:a,y:0},{x:s-a,y:0},{x:s,y:-n/2},{x:s-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}];iU(t,s,n,o,r)},"hexagonBkg"),e3t=x(function(e,t,r){t.append("rect").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("height",r.height).attr("rx",r.padding).attr("ry",r.padding).attr("width",r.width)},"roundedRectBkg"),r3t=x(async function(e,t,r,n,i){const a=i.htmlLabels,s=n%(XAt-1),o=t.append("g");r.section=s;let l="section-"+s;s<0&&(l+=" section-root"),o.attr("class",(r.class?r.class+" ":"")+"mindmap-node "+l);const u=o.append("g"),h=o.append("g"),f=r.descr.replace(/(<br\/*>)/g,`
`);await Pi(h,f,{useHtmlLabels:a,width:r.width,classes:"mindmap-node-label"},i),a||h.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const d=h.node().getBBox(),[g]=tl(i.fontSize);if(r.height=d.height+g*1.1*.5+r.padding,r.width=d.width+2*r.padding,r.icon)if(r.type===e.nodeType.CIRCLE)r.height+=50,r.width+=50,o.append("foreignObject").attr("height","50px").attr("width",r.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+r.icon),h.attr("transform","translate("+r.width/2+", "+(r.height/2-1.5*r.padding)+")");else{r.width+=50;const p=r.height;r.height=Math.max(p,60);const v=Math.abs(r.height-p);o.append("foreignObject").attr("width","60px").attr("height",r.height).attr("style","text-align: center;margin-top:"+v/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+r.icon),h.attr("transform","translate("+(25+r.width/2)+", "+(v/2+r.padding/2)+")")}else if(a){const p=(r.width-d.width)/2,v=(r.height-d.height)/2;h.attr("transform","translate("+p+", "+v+")")}else{const p=r.width/2,v=r.padding/2;h.attr("transform","translate("+p+", "+v+")")}switch(r.type){case e.nodeType.DEFAULT:jAt(e,u,r,s);break;case e.nodeType.ROUNDED_RECT:e3t(e,u,r,s);break;case e.nodeType.RECT:KAt(e,u,r,s);break;case e.nodeType.CIRCLE:u.attr("transform","translate("+r.width/2+", "+ +r.height/2+")"),JAt(e,u,r,s);break;case e.nodeType.CLOUD:ZAt(e,u,r,s);break;case e.nodeType.BANG:QAt(e,u,r,s);break;case e.nodeType.HEXAGON:t3t(e,u,r,s);break}return e.setElementForId(r.id,o),r.height},"drawNode"),n3t=x(function(e,t){const r=e.getElementById(t.id),n=t.x||0,i=t.y||0;r.attr("transform","translate("+n+","+i+")")},"positionNode");ds.use(MAt);async function M_(e,t,r,n,i){await r3t(e,t,r,n,i),r.children&&await Promise.all(r.children.map((a,s)=>M_(e,t,a,n<0?s:n,i)))}x(M_,"drawNodes");function aU(e,t){t.edges().map((r,n)=>{const i=r.data();if(r[0]._private.bodyBounds){const a=r[0]._private.rscratch;et.trace("Edge: ",n,i),e.insert("path").attr("d",`M ${a.startX},${a.startY} L ${a.midX},${a.midY} L${a.endX},${a.endY} `).attr("class","edge section-edge-"+i.section+" edge-depth-"+i.depth)}})}x(aU,"drawEdges");function O_(e,t,r,n){t.add({group:"nodes",data:{id:e.id.toString(),labelText:e.descr,height:e.height,width:e.width,level:n,nodeId:e.id,padding:e.padding,type:e.type},position:{x:e.x,y:e.y}}),e.children&&e.children.forEach(i=>{O_(i,t,r,n+1),t.add({group:"edges",data:{id:`${e.id}_${i.id}`,source:e.id,target:i.id,depth:n,section:i.section}})})}x(O_,"addNodes");function sU(e,t){return new Promise(r=>{const n=qt("body").append("div").attr("id","cy").attr("style","display:none"),i=ds({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});n.remove(),O_(e,i,t,0),i.nodes().forEach(function(a){a.layoutDimensions=()=>{const s=a.data();return{w:s.width,h:s.height}}}),i.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),i.ready(a=>{et.info("Ready",a),r(i)})})}x(sU,"layoutMindmap");function oU(e,t){t.nodes().map((r,n)=>{const i=r.data();i.x=r.position().x,i.y=r.position().y,n3t(e,i);const a=e.getElementById(i.nodeId);et.info("Id:",n,"Position: (",r.position().x,", ",r.position().y,")",i),a.attr("transform",`translate(${r.position().x-i.width/2}, ${r.position().y-i.height/2})`),a.attr("attr",`apa-${n})`)})}x(oU,"positionNodes");var i3t=x(async(e,t,r,n)=>{var f,d;et.debug(`Rendering mindmap diagram
`+e);const i=n.db,a=i.getMindmap();if(!a)return;const s=pt();s.htmlLabels=!1;const o=ho(t),l=o.append("g");l.attr("class","mindmap-edges");const u=o.append("g");u.attr("class","mindmap-nodes"),await M_(i,u,a,-1,s);const h=await sU(a,s);aU(l,h),oU(i,h),Kh(void 0,o,((f=s.mindmap)==null?void 0:f.padding)??Xe.mindmap.padding,((d=s.mindmap)==null?void 0:d.useMaxWidth)??Xe.mindmap.useMaxWidth)},"draw"),a3t={draw:i3t},s3t=x(e=>{let t="";for(let r=0;r<e.THEME_COLOR_LIMIT;r++)e["lineColor"+r]=e["lineColor"+r]||e["cScaleInv"+r],Jo(e["lineColor"+r])?e["lineColor"+r]=he(e["lineColor"+r],20):e["lineColor"+r]=xe(e["lineColor"+r],20);for(let r=0;r<e.THEME_COLOR_LIMIT;r++){const n=""+(17-3*r);t+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} polygon, .section-${r-1} path  {
      fill: ${e["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${e["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${e["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${n};
    }
    .section-${r-1} line {
      stroke: ${e["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return t},"genSections"),o3t=x(e=>`
  .edge {
    stroke-width: 3;
  }
  ${s3t(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,"getStyles"),l3t=o3t,c3t={db:qAt,renderer:a3t,parser:OAt,styles:l3t};const u3t=Object.freeze(Object.defineProperty({__proto__:null,diagram:c3t},Symbol.toStringTag,{value:"Module"}));var ak=function(){var e=x(function(E,L,A,R){for(A=A||{},R=E.length;R--;A[E[R]]=L);return A},"o"),t=[1,4],r=[1,13],n=[1,12],i=[1,15],a=[1,16],s=[1,20],o=[1,19],l=[6,7,8],u=[1,26],h=[1,24],f=[1,25],d=[6,7,11],g=[1,31],p=[6,7,11,24],v=[1,6,13,16,17,20,23],m=[1,35],y=[1,36],b=[1,6,7,11,13,16,17,20,23],T=[1,38],w={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:x(function(L,A,R,C,D,P,_){var I=P.length-1;switch(D){case 6:case 7:return C;case 8:C.getLogger().trace("Stop NL ");break;case 9:C.getLogger().trace("Stop EOF ");break;case 11:C.getLogger().trace("Stop NL2 ");break;case 12:C.getLogger().trace("Stop EOF2 ");break;case 15:C.getLogger().info("Node: ",P[I-1].id),C.addNode(P[I-2].length,P[I-1].id,P[I-1].descr,P[I-1].type,P[I]);break;case 16:C.getLogger().info("Node: ",P[I].id),C.addNode(P[I-1].length,P[I].id,P[I].descr,P[I].type);break;case 17:C.getLogger().trace("Icon: ",P[I]),C.decorateNode({icon:P[I]});break;case 18:case 23:C.decorateNode({class:P[I]});break;case 19:C.getLogger().trace("SPACELIST");break;case 20:C.getLogger().trace("Node: ",P[I-1].id),C.addNode(0,P[I-1].id,P[I-1].descr,P[I-1].type,P[I]);break;case 21:C.getLogger().trace("Node: ",P[I].id),C.addNode(0,P[I].id,P[I].descr,P[I].type);break;case 22:C.decorateNode({icon:P[I]});break;case 27:C.getLogger().trace("node found ..",P[I-2]),this.$={id:P[I-1],descr:P[I-1],type:C.getType(P[I-2],P[I])};break;case 28:this.$={id:P[I],descr:P[I],type:0};break;case 29:C.getLogger().trace("node found ..",P[I-3]),this.$={id:P[I-3],descr:P[I-1],type:C.getType(P[I-2],P[I])};break;case 30:this.$=P[I-1]+P[I];break;case 31:this.$=P[I];break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:r,7:[1,10],9:9,12:11,13:n,14:14,16:i,17:a,18:17,19:18,20:s,23:o},e(l,[2,3]),{1:[2,2]},e(l,[2,4]),e(l,[2,5]),{1:[2,6],6:r,12:21,13:n,14:14,16:i,17:a,18:17,19:18,20:s,23:o},{6:r,9:22,12:11,13:n,14:14,16:i,17:a,18:17,19:18,20:s,23:o},{6:u,7:h,10:23,11:f},e(d,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:s,23:o}),e(d,[2,19]),e(d,[2,21],{15:30,24:g}),e(d,[2,22]),e(d,[2,23]),e(p,[2,25]),e(p,[2,26]),e(p,[2,28],{20:[1,32]}),{21:[1,33]},{6:u,7:h,10:34,11:f},{1:[2,7],6:r,12:21,13:n,14:14,16:i,17:a,18:17,19:18,20:s,23:o},e(v,[2,14],{7:m,11:y}),e(b,[2,8]),e(b,[2,9]),e(b,[2,10]),e(d,[2,16],{15:37,24:g}),e(d,[2,17]),e(d,[2,18]),e(d,[2,20],{24:T}),e(p,[2,31]),{21:[1,39]},{22:[1,40]},e(v,[2,13],{7:m,11:y}),e(b,[2,11]),e(b,[2,12]),e(d,[2,15],{24:T}),e(p,[2,30]),{22:[1,41]},e(p,[2,27]),e(p,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:x(function(L,A){if(A.recoverable)this.trace(L);else{var R=new Error(L);throw R.hash=A,R}},"parseError"),parse:x(function(L){var A=this,R=[0],C=[],D=[null],P=[],_=this.table,I="",M=0,O=0,N=2,B=1,z=P.slice.call(arguments,1),F=Object.create(this.lexer),V={yy:{}};for(var G in this.yy)Object.prototype.hasOwnProperty.call(this.yy,G)&&(V.yy[G]=this.yy[G]);F.setInput(L,V.yy),V.yy.lexer=F,V.yy.parser=this,typeof F.yylloc>"u"&&(F.yylloc={});var Y=F.yylloc;P.push(Y);var Q=F.options&&F.options.ranges;typeof V.yy.parseError=="function"?this.parseError=V.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function K(tt){R.length=R.length-2*tt,D.length=D.length-tt,P.length=P.length-tt}x(K,"popStack");function it(){var tt;return tt=C.pop()||F.lex()||B,typeof tt!="number"&&(tt instanceof Array&&(C=tt,tt=C.pop()),tt=A.symbols_[tt]||tt),tt}x(it,"lex");for(var ut,q,W,H,U={},X,J,j,gt;;){if(q=R[R.length-1],this.defaultActions[q]?W=this.defaultActions[q]:((ut===null||typeof ut>"u")&&(ut=it()),W=_[q]&&_[q][ut]),typeof W>"u"||!W.length||!W[0]){var at="";gt=[];for(X in _[q])this.terminals_[X]&&X>N&&gt.push("'"+this.terminals_[X]+"'");F.showPosition?at="Parse error on line "+(M+1)+`:
`+F.showPosition()+`
Expecting `+gt.join(", ")+", got '"+(this.terminals_[ut]||ut)+"'":at="Parse error on line "+(M+1)+": Unexpected "+(ut==B?"end of input":"'"+(this.terminals_[ut]||ut)+"'"),this.parseError(at,{text:F.match,token:this.terminals_[ut]||ut,line:F.yylineno,loc:Y,expected:gt})}if(W[0]instanceof Array&&W.length>1)throw new Error("Parse Error: multiple actions possible at state: "+q+", token: "+ut);switch(W[0]){case 1:R.push(ut),D.push(F.yytext),P.push(F.yylloc),R.push(W[1]),ut=null,O=F.yyleng,I=F.yytext,M=F.yylineno,Y=F.yylloc;break;case 2:if(J=this.productions_[W[1]][1],U.$=D[D.length-J],U._$={first_line:P[P.length-(J||1)].first_line,last_line:P[P.length-1].last_line,first_column:P[P.length-(J||1)].first_column,last_column:P[P.length-1].last_column},Q&&(U._$.range=[P[P.length-(J||1)].range[0],P[P.length-1].range[1]]),H=this.performAction.apply(U,[I,O,M,V.yy,W[1],D,P].concat(z)),typeof H<"u")return H;J&&(R=R.slice(0,-1*J*2),D=D.slice(0,-1*J),P=P.slice(0,-1*J)),R.push(this.productions_[W[1]][0]),D.push(U.$),P.push(U._$),j=_[R[R.length-2]][R[R.length-1]],R.push(j);break;case 3:return!0}}return!0},"parse")},k=function(){var E={EOF:1,parseError:x(function(A,R){if(this.yy.parser)this.yy.parser.parseError(A,R);else throw new Error(A)},"parseError"),setInput:x(function(L,A){return this.yy=A||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var A=L.match(/(?:\r\n?|\n).*/g);return A?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},"input"),unput:x(function(L){var A=L.length,R=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-A),this.offset-=A;var C=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),R.length-1&&(this.yylineno-=R.length-1);var D=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:R?(R.length===C.length?this.yylloc.first_column:0)+C[C.length-R.length].length-R[0].length:this.yylloc.first_column-A},this.options.ranges&&(this.yylloc.range=[D[0],D[0]+this.yyleng-A]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(L){this.unput(this.match.slice(L))},"less"),pastInput:x(function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var L=this.pastInput(),A=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+A+"^"},"showPosition"),test_match:x(function(L,A){var R,C,D;if(this.options.backtrack_lexer&&(D={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(D.yylloc.range=this.yylloc.range.slice(0))),C=L[0].match(/(?:\r\n?|\n).*/g),C&&(this.yylineno+=C.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:C?C[C.length-1].length-C[C.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],R=this.performAction.call(this,this.yy,this,A,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),R)return R;if(this._backtrack){for(var P in D)this[P]=D[P];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,A,R,C;this._more||(this.yytext="",this.match="");for(var D=this._currentRules(),P=0;P<D.length;P++)if(R=this._input.match(this.rules[D[P]]),R&&(!A||R[0].length>A[0].length)){if(A=R,C=P,this.options.backtrack_lexer){if(L=this.test_match(R,D[P]),L!==!1)return L;if(this._backtrack){A=!1;continue}else return!1}else if(!this.options.flex)break}return A?(L=this.test_match(A,D[C]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var A=this.next();return A||this.lex()},"lex"),begin:x(function(A){this.conditionStack.push(A)},"begin"),popState:x(function(){var A=this.conditionStack.length-1;return A>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(A){return A=this.conditionStack.length-1-Math.abs(A||0),A>=0?this.conditionStack[A]:"INITIAL"},"topState"),pushState:x(function(A){this.begin(A)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(A,R,C,D){switch(C){case 0:return this.pushState("shapeData"),R.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:const P=/\n\s*/g;return R.yytext=R.yytext.replace(P,"<br/>"),24;case 4:return 24;case 5:this.popState();break;case 6:return A.getLogger().trace("Found comment",R.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 10:this.popState();break;case 11:A.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return A.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:A.getLogger().trace("end icon"),this.popState();break;case 16:return A.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return A.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return A.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return A.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:return this.begin("NODE"),20;case 21:return this.begin("NODE"),20;case 22:return this.begin("NODE"),20;case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 29:this.popState();break;case 30:A.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return A.getLogger().trace("description:",R.yytext),"NODE_DESCR";case 32:this.popState();break;case 33:return this.popState(),A.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),A.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),A.getLogger().trace("node end ...",R.yytext),"NODE_DEND";case 36:return this.popState(),A.getLogger().trace("node end (("),"NODE_DEND";case 37:return this.popState(),A.getLogger().trace("node end (-"),"NODE_DEND";case 38:return this.popState(),A.getLogger().trace("node end (-"),"NODE_DEND";case 39:return this.popState(),A.getLogger().trace("node end (("),"NODE_DEND";case 40:return this.popState(),A.getLogger().trace("node end (("),"NODE_DEND";case 41:return A.getLogger().trace("Long description:",R.yytext),21;case 42:return A.getLogger().trace("Long description:",R.yytext),21}},"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}};return E}();w.lexer=k;function S(){this.yy={}}return x(S,"Parser"),S.prototype=w,w.Parser=S,new S}();ak.parser=ak;var h3t=ak,la=[],P_=[],sk=0,B_={},f3t=x(()=>{la=[],P_=[],sk=0,B_={}},"clear"),d3t=x(e=>{if(la.length===0)return null;const t=la[0].level;let r=null;for(let n=la.length-1;n>=0;n--)if(la[n].level===t&&!r&&(r=la[n]),la[n].level<t)throw new Error('Items without section detected, found section ("'+la[n].label+'")');return e===(r==null?void 0:r.level)?null:r},"getSection"),lU=x(function(){return P_},"getSections"),g3t=x(function(){const e=[],t=[],r=lU(),n=pt();for(const i of r){const a={id:i.id,label:xr(i.label??"",n),isGroup:!0,ticket:i.ticket,shape:"kanbanSection",level:i.level,look:n.look};t.push(a);const s=la.filter(o=>o.parentId===i.id);for(const o of s){const l={id:o.id,parentId:i.id,label:xr(o.label??"",n),isGroup:!1,ticket:o==null?void 0:o.ticket,priority:o==null?void 0:o.priority,assigned:o==null?void 0:o.assigned,icon:o==null?void 0:o.icon,shape:"kanbanItem",level:o.level,rx:5,ry:5,cssStyles:["text-align: left"]};t.push(l)}}return{nodes:t,edges:e,other:{},config:pt()}},"getData"),p3t=x((e,t,r,n,i)=>{var u,h;const a=pt();let s=((u=a.mindmap)==null?void 0:u.padding)??Xe.mindmap.padding;switch(n){case rn.ROUNDED_RECT:case rn.RECT:case rn.HEXAGON:s*=2}const o={id:xr(t,a)||"kbn"+sk++,level:e,label:xr(r,a),width:((h=a.mindmap)==null?void 0:h.maxNodeWidth)??Xe.mindmap.maxNodeWidth,padding:s,isGroup:!1};if(i!==void 0){let f;i.includes(`
`)?f=i+`
`:f=`{
`+i+`
}`;const d=eC(f,{schema:tC});if(d.shape&&(d.shape!==d.shape.toLowerCase()||d.shape.includes("_")))throw new Error(`No such shape: ${d.shape}. Shape names should be lowercase.`);d!=null&&d.shape&&d.shape==="kanbanItem"&&(o.shape=d==null?void 0:d.shape),d!=null&&d.label&&(o.label=d==null?void 0:d.label),d!=null&&d.icon&&(o.icon=d==null?void 0:d.icon.toString()),d!=null&&d.assigned&&(o.assigned=d==null?void 0:d.assigned.toString()),d!=null&&d.ticket&&(o.ticket=d==null?void 0:d.ticket.toString()),d!=null&&d.priority&&(o.priority=d==null?void 0:d.priority)}const l=d3t(e);l?o.parentId=l.id||"kbn"+sk++:P_.push(o),la.push(o)},"addNode"),rn={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},v3t=x((e,t)=>{switch(et.debug("In get type",e,t),e){case"[":return rn.RECT;case"(":return t===")"?rn.ROUNDED_RECT:rn.CLOUD;case"((":return rn.CIRCLE;case")":return rn.CLOUD;case"))":return rn.BANG;case"{{":return rn.HEXAGON;default:return rn.DEFAULT}},"getType"),m3t=x((e,t)=>{B_[e]=t},"setElementForId"),y3t=x(e=>{if(!e)return;const t=pt(),r=la[la.length-1];e.icon&&(r.icon=xr(e.icon,t)),e.class&&(r.cssClasses=xr(e.class,t))},"decorateNode"),x3t=x(e=>{switch(e){case rn.DEFAULT:return"no-border";case rn.RECT:return"rect";case rn.ROUNDED_RECT:return"rounded-rect";case rn.CIRCLE:return"circle";case rn.CLOUD:return"cloud";case rn.BANG:return"bang";case rn.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),b3t=x(()=>et,"getLogger"),T3t=x(e=>B_[e],"getElementById"),w3t={clear:f3t,addNode:p3t,getSections:lU,getData:g3t,nodeType:rn,getType:v3t,setElementForId:m3t,decorateNode:y3t,type2Str:x3t,getLogger:b3t,getElementById:T3t},E3t=w3t,k3t=x(async(e,t,r,n)=>{var m,y,b,T,w;et.debug(`Rendering kanban diagram
`+e);const a=n.db.getData(),s=pt();s.htmlLabels=!1;const o=ho(t),l=o.append("g");l.attr("class","sections");const u=o.append("g");u.attr("class","items");const h=a.nodes.filter(k=>k.isGroup);let f=0;const d=10,g=[];let p=25;for(const k of h){const S=((m=s==null?void 0:s.kanban)==null?void 0:m.sectionWidth)||200;f=f+1,k.x=S*f+(f-1)*d/2,k.width=S,k.y=0,k.height=S*3,k.rx=5,k.ry=5,k.cssClasses=k.cssClasses+" section-"+f;const E=await IC(l,k);p=Math.max(p,(y=E==null?void 0:E.labelBBox)==null?void 0:y.height),g.push(E)}let v=0;for(const k of h){const S=g[v];v=v+1;const E=((b=s==null?void 0:s.kanban)==null?void 0:b.sectionWidth)||200,L=-E*3/2+p;let A=L;const R=a.nodes.filter(P=>P.parentId===k.id);for(const P of R){if(P.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");P.x=k.x,P.width=E-1.5*d;const I=(await xy(u,P,{config:s})).node().getBBox();P.y=A+I.height/2,await yw(P),A=P.y+I.height/2+d/2}const C=S.cluster.select("rect"),D=Math.max(A-L+3*d,50)+(p-25);C.attr("height",D)}Kh(void 0,o,((T=s.mindmap)==null?void 0:T.padding)??Xe.kanban.padding,((w=s.mindmap)==null?void 0:w.useMaxWidth)??Xe.kanban.useMaxWidth)},"draw"),C3t={draw:k3t},S3t=x(e=>{let t="";for(let n=0;n<e.THEME_COLOR_LIMIT;n++)e["lineColor"+n]=e["lineColor"+n]||e["cScaleInv"+n],Jo(e["lineColor"+n])?e["lineColor"+n]=he(e["lineColor"+n],20):e["lineColor"+n]=xe(e["lineColor"+n],20);const r=x((n,i)=>e.darkMode?xe(n,i):he(n,i),"adjuster");for(let n=0;n<e.THEME_COLOR_LIMIT;n++){const i=""+(17-3*n);t+=`
    .section-${n-1} rect, .section-${n-1} path, .section-${n-1} circle, .section-${n-1} polygon, .section-${n-1} path  {
      fill: ${r(e["cScale"+n],10)};
      stroke: ${r(e["cScale"+n],10)};

    }
    .section-${n-1} text {
     fill: ${e["cScaleLabel"+n]};
    }
    .node-icon-${n-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+n]};
    }
    .section-edge-${n-1}{
      stroke: ${e["cScale"+n]};
    }
    .edge-depth-${n-1}{
      stroke-width: ${i};
    }
    .section-${n-1} line {
      stroke: ${e["cScaleInv"+n]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.background};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .kanban-ticket-link {
    fill: ${e.background};
    stroke: ${e.nodeBorder};
    text-decoration: underline;
  }
    `}return t},"genSections"),_3t=x(e=>`
  .edge {
    stroke-width: 3;
  }
  ${S3t(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .cluster-label, .label {
    color: ${e.textColor};
    fill: ${e.textColor};
    }
  .kanban-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,"getStyles"),A3t=_3t,L3t={db:E3t,renderer:C3t,parser:h3t,styles:A3t};const R3t=Object.freeze(Object.defineProperty({__proto__:null,diagram:L3t},Symbol.toStringTag,{value:"Module"}));function VN(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function cU(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function vT(e,t){let r=0;if(t===void 0)for(let n of e)(n=+n)&&(r+=n);else{let n=-1;for(let i of e)(i=+t(i,++n,e))&&(r+=i)}return r}function I3t(e){return e.target.depth}function N3t(e){return e.depth}function D3t(e,t){return t-1-e.height}function uU(e,t){return e.sourceLinks.length?e.depth:t-1}function M3t(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?cU(e.sourceLinks,I3t)-1:0}function V0(e){return function(){return e}}function GN(e,t){return Om(e.source,t.source)||e.index-t.index}function UN(e,t){return Om(e.target,t.target)||e.index-t.index}function Om(e,t){return e.y0-t.y0}function mT(e){return e.value}function O3t(e){return e.index}function P3t(e){return e.nodes}function B3t(e){return e.links}function WN(e,t){const r=e.get(t);if(!r)throw new Error("missing: "+t);return r}function YN({nodes:e}){for(const t of e){let r=t.y0,n=r;for(const i of t.sourceLinks)i.y0=r+i.width/2,r+=i.width;for(const i of t.targetLinks)i.y1=n+i.width/2,n+=i.width}}function F3t(){let e=0,t=0,r=1,n=1,i=24,a=8,s,o=O3t,l=uU,u,h,f=P3t,d=B3t,g=6;function p(){const I={nodes:f.apply(null,arguments),links:d.apply(null,arguments)};return v(I),m(I),y(I),b(I),k(I),YN(I),I}p.update=function(I){return YN(I),I},p.nodeId=function(I){return arguments.length?(o=typeof I=="function"?I:V0(I),p):o},p.nodeAlign=function(I){return arguments.length?(l=typeof I=="function"?I:V0(I),p):l},p.nodeSort=function(I){return arguments.length?(u=I,p):u},p.nodeWidth=function(I){return arguments.length?(i=+I,p):i},p.nodePadding=function(I){return arguments.length?(a=s=+I,p):a},p.nodes=function(I){return arguments.length?(f=typeof I=="function"?I:V0(I),p):f},p.links=function(I){return arguments.length?(d=typeof I=="function"?I:V0(I),p):d},p.linkSort=function(I){return arguments.length?(h=I,p):h},p.size=function(I){return arguments.length?(e=t=0,r=+I[0],n=+I[1],p):[r-e,n-t]},p.extent=function(I){return arguments.length?(e=+I[0][0],r=+I[1][0],t=+I[0][1],n=+I[1][1],p):[[e,t],[r,n]]},p.iterations=function(I){return arguments.length?(g=+I,p):g};function v({nodes:I,links:M}){for(const[N,B]of I.entries())B.index=N,B.sourceLinks=[],B.targetLinks=[];const O=new Map(I.map((N,B)=>[o(N,B,I),N]));for(const[N,B]of M.entries()){B.index=N;let{source:z,target:F}=B;typeof z!="object"&&(z=B.source=WN(O,z)),typeof F!="object"&&(F=B.target=WN(O,F)),z.sourceLinks.push(B),F.targetLinks.push(B)}if(h!=null)for(const{sourceLinks:N,targetLinks:B}of I)N.sort(h),B.sort(h)}function m({nodes:I}){for(const M of I)M.value=M.fixedValue===void 0?Math.max(vT(M.sourceLinks,mT),vT(M.targetLinks,mT)):M.fixedValue}function y({nodes:I}){const M=I.length;let O=new Set(I),N=new Set,B=0;for(;O.size;){for(const z of O){z.depth=B;for(const{target:F}of z.sourceLinks)N.add(F)}if(++B>M)throw new Error("circular link");O=N,N=new Set}}function b({nodes:I}){const M=I.length;let O=new Set(I),N=new Set,B=0;for(;O.size;){for(const z of O){z.height=B;for(const{source:F}of z.targetLinks)N.add(F)}if(++B>M)throw new Error("circular link");O=N,N=new Set}}function T({nodes:I}){const M=VN(I,B=>B.depth)+1,O=(r-e-i)/(M-1),N=new Array(M);for(const B of I){const z=Math.max(0,Math.min(M-1,Math.floor(l.call(null,B,M))));B.layer=z,B.x0=e+z*O,B.x1=B.x0+i,N[z]?N[z].push(B):N[z]=[B]}if(u)for(const B of N)B.sort(u);return N}function w(I){const M=cU(I,O=>(n-t-(O.length-1)*s)/vT(O,mT));for(const O of I){let N=t;for(const B of O){B.y0=N,B.y1=N+B.value*M,N=B.y1+s;for(const z of B.sourceLinks)z.width=z.value*M}N=(n-N+s)/(O.length+1);for(let B=0;B<O.length;++B){const z=O[B];z.y0+=N*(B+1),z.y1+=N*(B+1)}D(O)}}function k(I){const M=T(I);s=Math.min(a,(n-t)/(VN(M,O=>O.length)-1)),w(M);for(let O=0;O<g;++O){const N=Math.pow(.99,O),B=Math.max(1-N,(O+1)/g);E(M,N,B),S(M,N,B)}}function S(I,M,O){for(let N=1,B=I.length;N<B;++N){const z=I[N];for(const F of z){let V=0,G=0;for(const{source:Q,value:K}of F.targetLinks){let it=K*(F.layer-Q.layer);V+=P(Q,F)*it,G+=it}if(!(G>0))continue;let Y=(V/G-F.y0)*M;F.y0+=Y,F.y1+=Y,C(F)}u===void 0&&z.sort(Om),L(z,O)}}function E(I,M,O){for(let N=I.length,B=N-2;B>=0;--B){const z=I[B];for(const F of z){let V=0,G=0;for(const{target:Q,value:K}of F.sourceLinks){let it=K*(Q.layer-F.layer);V+=_(F,Q)*it,G+=it}if(!(G>0))continue;let Y=(V/G-F.y0)*M;F.y0+=Y,F.y1+=Y,C(F)}u===void 0&&z.sort(Om),L(z,O)}}function L(I,M){const O=I.length>>1,N=I[O];R(I,N.y0-s,O-1,M),A(I,N.y1+s,O+1,M),R(I,n,I.length-1,M),A(I,t,0,M)}function A(I,M,O,N){for(;O<I.length;++O){const B=I[O],z=(M-B.y0)*N;z>1e-6&&(B.y0+=z,B.y1+=z),M=B.y1+s}}function R(I,M,O,N){for(;O>=0;--O){const B=I[O],z=(B.y1-M)*N;z>1e-6&&(B.y0-=z,B.y1-=z),M=B.y0-s}}function C({sourceLinks:I,targetLinks:M}){if(h===void 0){for(const{source:{sourceLinks:O}}of M)O.sort(UN);for(const{target:{targetLinks:O}}of I)O.sort(GN)}}function D(I){if(h===void 0)for(const{sourceLinks:M,targetLinks:O}of I)M.sort(UN),O.sort(GN)}function P(I,M){let O=I.y0-(I.sourceLinks.length-1)*s/2;for(const{target:N,width:B}of I.sourceLinks){if(N===M)break;O+=B+s}for(const{source:N,width:B}of M.targetLinks){if(N===I)break;O-=B}return O}function _(I,M){let O=M.y0-(M.targetLinks.length-1)*s/2;for(const{source:N,width:B}of M.targetLinks){if(N===I)break;O+=B+s}for(const{target:N,width:B}of I.sourceLinks){if(N===M)break;O-=B}return O}return p}var ok=Math.PI,lk=2*ok,El=1e-6,$3t=lk-El;function ck(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function hU(){return new ck}ck.prototype=hU.prototype={constructor:ck,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,n){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+n)},bezierCurveTo:function(e,t,r,n,i,a){this._+="C"+ +e+","+ +t+","+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,r,n,i){e=+e,t=+t,r=+r,n=+n,i=+i;var a=this._x1,s=this._y1,o=r-e,l=n-t,u=a-e,h=s-t,f=u*u+h*h;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>El)if(!(Math.abs(h*o-l*u)>El)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var d=r-a,g=n-s,p=o*o+l*l,v=d*d+g*g,m=Math.sqrt(p),y=Math.sqrt(f),b=i*Math.tan((ok-Math.acos((p+f-v)/(2*m*y)))/2),T=b/y,w=b/m;Math.abs(T-1)>El&&(this._+="L"+(e+T*u)+","+(t+T*h)),this._+="A"+i+","+i+",0,0,"+ +(h*d>u*g)+","+(this._x1=e+w*o)+","+(this._y1=t+w*l)}},arc:function(e,t,r,n,i,a){e=+e,t=+t,r=+r,a=!!a;var s=r*Math.cos(n),o=r*Math.sin(n),l=e+s,u=t+o,h=1^a,f=a?n-i:i-n;if(r<0)throw new Error("negative radius: "+r);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>El||Math.abs(this._y1-u)>El)&&(this._+="L"+l+","+u),r&&(f<0&&(f=f%lk+lk),f>$3t?this._+="A"+r+","+r+",0,1,"+h+","+(e-s)+","+(t-o)+"A"+r+","+r+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u):f>El&&(this._+="A"+r+","+r+",0,"+ +(f>=ok)+","+h+","+(this._x1=e+r*Math.cos(i))+","+(this._y1=t+r*Math.sin(i))))},rect:function(e,t,r,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +n+"h"+-r+"Z"},toString:function(){return this._}};function HN(e){return function(){return e}}function z3t(e){return e[0]}function V3t(e){return e[1]}var G3t=Array.prototype.slice;function U3t(e){return e.source}function W3t(e){return e.target}function Y3t(e){var t=U3t,r=W3t,n=z3t,i=V3t,a=null;function s(){var o,l=G3t.call(arguments),u=t.apply(this,l),h=r.apply(this,l);if(a||(a=o=hU()),e(a,+n.apply(this,(l[0]=u,l)),+i.apply(this,l),+n.apply(this,(l[0]=h,l)),+i.apply(this,l)),o)return a=null,o+""||null}return s.source=function(o){return arguments.length?(t=o,s):t},s.target=function(o){return arguments.length?(r=o,s):r},s.x=function(o){return arguments.length?(n=typeof o=="function"?o:HN(+o),s):n},s.y=function(o){return arguments.length?(i=typeof o=="function"?o:HN(+o),s):i},s.context=function(o){return arguments.length?(a=o??null,s):a},s}function H3t(e,t,r,n,i){e.moveTo(t,r),e.bezierCurveTo(t=(t+n)/2,r,t,i,n,i)}function q3t(){return Y3t(H3t)}function X3t(e){return[e.source.x1,e.y0]}function j3t(e){return[e.target.x0,e.y1]}function K3t(){return q3t().source(X3t).target(j3t)}var uk=function(){var e=x(function(o,l,u,h){for(u=u||{},h=o.length;h--;u[o[h]]=l);return u},"o"),t=[1,9],r=[1,10],n=[1,5,10,12],i={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:x(function(l,u,h,f,d,g,p){var v=g.length-1;switch(d){case 7:const m=f.findOrCreateNode(g[v-4].trim().replaceAll('""','"')),y=f.findOrCreateNode(g[v-2].trim().replaceAll('""','"')),b=parseFloat(g[v].trim());f.addLink(m,y,b);break;case 8:case 9:case 11:this.$=g[v];break;case 10:this.$=g[v-1];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:t,20:r},{1:[2,6],7:11,10:[1,12]},e(r,[2,4],{9:13,5:[1,14]}),{12:[1,15]},e(n,[2,8]),e(n,[2,9]),{19:[1,16]},e(n,[2,11]),{1:[2,1]},{1:[2,5]},e(r,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:t,20:r},{15:18,16:7,17:8,18:t,20:r},{18:[1,19]},e(r,[2,3]),{12:[1,20]},e(n,[2,10]),{15:21,16:7,17:8,18:t,20:r},e([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:x(function(l,u){if(u.recoverable)this.trace(l);else{var h=new Error(l);throw h.hash=u,h}},"parseError"),parse:x(function(l){var u=this,h=[0],f=[],d=[null],g=[],p=this.table,v="",m=0,y=0,b=2,T=1,w=g.slice.call(arguments,1),k=Object.create(this.lexer),S={yy:{}};for(var E in this.yy)Object.prototype.hasOwnProperty.call(this.yy,E)&&(S.yy[E]=this.yy[E]);k.setInput(l,S.yy),S.yy.lexer=k,S.yy.parser=this,typeof k.yylloc>"u"&&(k.yylloc={});var L=k.yylloc;g.push(L);var A=k.options&&k.options.ranges;typeof S.yy.parseError=="function"?this.parseError=S.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function R(V){h.length=h.length-2*V,d.length=d.length-V,g.length=g.length-V}x(R,"popStack");function C(){var V;return V=f.pop()||k.lex()||T,typeof V!="number"&&(V instanceof Array&&(f=V,V=f.pop()),V=u.symbols_[V]||V),V}x(C,"lex");for(var D,P,_,I,M={},O,N,B,z;;){if(P=h[h.length-1],this.defaultActions[P]?_=this.defaultActions[P]:((D===null||typeof D>"u")&&(D=C()),_=p[P]&&p[P][D]),typeof _>"u"||!_.length||!_[0]){var F="";z=[];for(O in p[P])this.terminals_[O]&&O>b&&z.push("'"+this.terminals_[O]+"'");k.showPosition?F="Parse error on line "+(m+1)+`:
`+k.showPosition()+`
Expecting `+z.join(", ")+", got '"+(this.terminals_[D]||D)+"'":F="Parse error on line "+(m+1)+": Unexpected "+(D==T?"end of input":"'"+(this.terminals_[D]||D)+"'"),this.parseError(F,{text:k.match,token:this.terminals_[D]||D,line:k.yylineno,loc:L,expected:z})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+P+", token: "+D);switch(_[0]){case 1:h.push(D),d.push(k.yytext),g.push(k.yylloc),h.push(_[1]),D=null,y=k.yyleng,v=k.yytext,m=k.yylineno,L=k.yylloc;break;case 2:if(N=this.productions_[_[1]][1],M.$=d[d.length-N],M._$={first_line:g[g.length-(N||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(N||1)].first_column,last_column:g[g.length-1].last_column},A&&(M._$.range=[g[g.length-(N||1)].range[0],g[g.length-1].range[1]]),I=this.performAction.apply(M,[v,y,m,S.yy,_[1],d,g].concat(w)),typeof I<"u")return I;N&&(h=h.slice(0,-1*N*2),d=d.slice(0,-1*N),g=g.slice(0,-1*N)),h.push(this.productions_[_[1]][0]),d.push(M.$),g.push(M._$),B=p[h[h.length-2]][h[h.length-1]],h.push(B);break;case 3:return!0}}return!0},"parse")},a=function(){var o={EOF:1,parseError:x(function(u,h){if(this.yy.parser)this.yy.parser.parseError(u,h);else throw new Error(u)},"parseError"),setInput:x(function(l,u){return this.yy=u||this.yy||{},this._input=l,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var l=this._input[0];this.yytext+=l,this.yyleng++,this.offset++,this.match+=l,this.matched+=l;var u=l.match(/(?:\r\n?|\n).*/g);return u?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),l},"input"),unput:x(function(l){var u=l.length,h=l.split(/(?:\r\n?|\n)/g);this._input=l+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-u),this.offset-=u;var f=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),h.length-1&&(this.yylineno-=h.length-1);var d=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:h?(h.length===f.length?this.yylloc.first_column:0)+f[f.length-h.length].length-h[0].length:this.yylloc.first_column-u},this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-u]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(l){this.unput(this.match.slice(l))},"less"),pastInput:x(function(){var l=this.matched.substr(0,this.matched.length-this.match.length);return(l.length>20?"...":"")+l.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var l=this.match;return l.length<20&&(l+=this._input.substr(0,20-l.length)),(l.substr(0,20)+(l.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var l=this.pastInput(),u=new Array(l.length+1).join("-");return l+this.upcomingInput()+`
`+u+"^"},"showPosition"),test_match:x(function(l,u){var h,f,d;if(this.options.backtrack_lexer&&(d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0))),f=l[0].match(/(?:\r\n?|\n).*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-f[f.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+l[0].length},this.yytext+=l[0],this.match+=l[0],this.matches=l,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(l[0].length),this.matched+=l[0],h=this.performAction.call(this,this.yy,this,u,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),h)return h;if(this._backtrack){for(var g in d)this[g]=d[g];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var l,u,h,f;this._more||(this.yytext="",this.match="");for(var d=this._currentRules(),g=0;g<d.length;g++)if(h=this._input.match(this.rules[d[g]]),h&&(!u||h[0].length>u[0].length)){if(u=h,f=g,this.options.backtrack_lexer){if(l=this.test_match(h,d[g]),l!==!1)return l;if(this._backtrack){u=!1;continue}else return!1}else if(!this.options.flex)break}return u?(l=this.test_match(u,d[f]),l!==!1?l:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var u=this.next();return u||this.lex()},"lex"),begin:x(function(u){this.conditionStack.push(u)},"begin"),popState:x(function(){var u=this.conditionStack.length-1;return u>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(u){return u=this.conditionStack.length-1-Math.abs(u||0),u>=0?this.conditionStack[u]:"INITIAL"},"topState"),pushState:x(function(u){this.begin(u)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:x(function(u,h,f,d){switch(f){case 0:return this.pushState("csv"),4;case 1:return 10;case 2:return 5;case 3:return 12;case 4:return this.pushState("escaped_text"),18;case 5:return 20;case 6:return this.popState("escaped_text"),18;case 7:return 19}},"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[1,2,3,4,5,6,7],inclusive:!1},escaped_text:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return o}();i.lexer=a;function s(){this.yy={}}return x(s,"Parser"),s.prototype=i,i.Parser=s,new s}();uk.parser=uk;var Pm=uk,m2=[],y2=[],Bm=new Map,Z3t=x(()=>{m2=[],y2=[],Bm=new Map,dn()},"clear"),dh,Q3t=(dh=class{constructor(t,r,n=0){this.source=t,this.target=r,this.value=n}},x(dh,"SankeyLink"),dh),J3t=x((e,t,r)=>{m2.push(new Q3t(e,t,r))},"addLink"),gh,t4t=(gh=class{constructor(t){this.ID=t}},x(gh,"SankeyNode"),gh),e4t=x(e=>{e=Xt.sanitizeText(e,pt());let t=Bm.get(e);return t===void 0&&(t=new t4t(e),Bm.set(e,t),y2.push(t)),t},"findOrCreateNode"),r4t=x(()=>y2,"getNodes"),n4t=x(()=>m2,"getLinks"),i4t=x(()=>({nodes:y2.map(e=>({id:e.ID})),links:m2.map(e=>({source:e.source.ID,target:e.target.ID,value:e.value}))}),"getGraph"),a4t={nodesMap:Bm,getConfig:x(()=>pt().sankey,"getConfig"),getNodes:r4t,getLinks:n4t,getGraph:i4t,addLink:J3t,findOrCreateNode:e4t,getAccTitle:wn,setAccTitle:cn,getAccDescription:kn,setAccDescription:En,getDiagramTitle:gn,setDiagramTitle:Fn,clear:Z3t},Ys,qN=(Ys=class{static next(t){return new Ys(t+ ++Ys.count)}constructor(t){this.id=t,this.href=`#${t}`}toString(){return"url("+this.href+")"}},x(Ys,"Uid"),Ys.count=0,Ys),s4t={left:N3t,right:D3t,center:M3t,justify:uU},o4t=x(function(e,t,r,n){const{securityLevel:i,sankey:a}=pt(),s=JD.sankey;let o;i==="sandbox"&&(o=qt("#i"+t));const l=qt(i==="sandbox"?o.nodes()[0].contentDocument.body:"body"),u=i==="sandbox"?l.select(`[id="${t}"]`):qt(`[id="${t}"]`),h=(a==null?void 0:a.width)??s.width,f=(a==null?void 0:a.height)??s.width,d=(a==null?void 0:a.useMaxWidth)??s.useMaxWidth,g=(a==null?void 0:a.nodeAlignment)??s.nodeAlignment,p=(a==null?void 0:a.prefix)??s.prefix,v=(a==null?void 0:a.suffix)??s.suffix,m=(a==null?void 0:a.showValues)??s.showValues,y=n.db.getGraph(),b=s4t[g];F3t().nodeId(R=>R.id).nodeWidth(10).nodePadding(10+(m?15:0)).nodeAlign(b).extent([[0,0],[h,f]])(y);const k=Kg(rJ);u.append("g").attr("class","nodes").selectAll(".node").data(y.nodes).join("g").attr("class","node").attr("id",R=>(R.uid=qN.next("node-")).id).attr("transform",function(R){return"translate("+R.x0+","+R.y0+")"}).attr("x",R=>R.x0).attr("y",R=>R.y0).append("rect").attr("height",R=>R.y1-R.y0).attr("width",R=>R.x1-R.x0).attr("fill",R=>k(R.id));const S=x(({id:R,value:C})=>m?`${R}
${p}${Math.round(C*100)/100}${v}`:R,"getText");u.append("g").attr("class","node-labels").attr("font-size",14).selectAll("text").data(y.nodes).join("text").attr("x",R=>R.x0<h/2?R.x1+6:R.x0-6).attr("y",R=>(R.y1+R.y0)/2).attr("dy",`${m?"0":"0.35"}em`).attr("text-anchor",R=>R.x0<h/2?"start":"end").text(S);const E=u.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(y.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),L=(a==null?void 0:a.linkColor)??"gradient";if(L==="gradient"){const R=E.append("linearGradient").attr("id",C=>(C.uid=qN.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",C=>C.source.x1).attr("x2",C=>C.target.x0);R.append("stop").attr("offset","0%").attr("stop-color",C=>k(C.source.id)),R.append("stop").attr("offset","100%").attr("stop-color",C=>k(C.target.id))}let A;switch(L){case"gradient":A=x(R=>R.uid,"coloring");break;case"source":A=x(R=>k(R.source.id),"coloring");break;case"target":A=x(R=>k(R.target.id),"coloring");break;default:A=L}E.append("path").attr("d",K3t()).attr("stroke",A).attr("stroke-width",R=>Math.max(1,R.width)),Kh(void 0,u,0,d)},"draw"),l4t={draw:o4t},c4t=x(e=>e.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),"prepareTextForParsing"),u4t=x(e=>`.label {
      font-family: ${e.fontFamily};
    }`,"getStyles"),h4t=u4t,f4t=Pm.parse.bind(Pm);Pm.parse=e=>f4t(c4t(e));var d4t={styles:h4t,parser:Pm,db:a4t,renderer:l4t};const g4t=Object.freeze(Object.defineProperty({__proto__:null,diagram:d4t},Symbol.toStringTag,{value:"Module"}));var fU={packet:[]},F_=structuredClone(fU),p4t=Xe.packet,v4t=x(()=>{const e=xa({...p4t,...gr().packet});return e.showBits&&(e.paddingY+=10),e},"getConfig"),m4t=x(()=>F_.packet,"getPacket"),y4t=x(e=>{e.length>0&&F_.packet.push(e)},"pushWord"),x4t=x(()=>{dn(),F_=structuredClone(fU)},"clear"),eu={pushWord:y4t,getPacket:m4t,getConfig:v4t,clear:x4t,setAccTitle:cn,getAccTitle:wn,setDiagramTitle:Fn,getDiagramTitle:gn,getAccDescription:kn,setAccDescription:En},b4t=1e4,T4t=x(e=>{af(e,eu);let t=-1,r=[],n=1;const{bitsPerRow:i}=eu.getConfig();for(let{start:a,end:s,label:o}of e.blocks){if(s&&s<a)throw new Error(`Packet block ${a} - ${s} is invalid. End must be greater than start.`);if(a!==t+1)throw new Error(`Packet block ${a} - ${s??a} is not contiguous. It should start from ${t+1}.`);for(t=s??a,et.debug(`Packet block ${a} - ${t} with label ${o}`);r.length<=i+1&&eu.getPacket().length<b4t;){const[l,u]=w4t({start:a,end:s,label:o},n,i);if(r.push(l),l.end+1===n*i&&(eu.pushWord(r),r=[],n++),!u)break;({start:a,end:s,label:o}=u)}}eu.pushWord(r)},"populate"),w4t=x((e,t,r)=>{if(e.end===void 0&&(e.end=e.start),e.start>e.end)throw new Error(`Block start ${e.start} is greater than block end ${e.end}.`);return e.end+1<=t*r?[e,void 0]:[{start:e.start,end:t*r-1,label:e.label},{start:t*r,end:e.end,label:e.label}]},"getNextFittingBlock"),E4t={parse:x(async e=>{const t=await Ic("packet",e);et.debug(t),T4t(t)},"parse")},k4t=x((e,t,r,n)=>{const i=n.db,a=i.getConfig(),{rowHeight:s,paddingY:o,bitWidth:l,bitsPerRow:u}=a,h=i.getPacket(),f=i.getDiagramTitle(),d=s+o,g=d*(h.length+1)-(f?0:s),p=l*u+2,v=ho(t);v.attr("viewbox",`0 0 ${p} ${g}`),Oi(v,g,p,a.useMaxWidth);for(const[m,y]of h.entries())C4t(v,y,m,a);v.append("text").text(f).attr("x",p/2).attr("y",g-d/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),C4t=x((e,t,r,{rowHeight:n,paddingX:i,paddingY:a,bitWidth:s,bitsPerRow:o,showBits:l})=>{const u=e.append("g"),h=r*(n+a)+a;for(const f of t){const d=f.start%o*s+1,g=(f.end-f.start+1)*s-i;if(u.append("rect").attr("x",d).attr("y",h).attr("width",g).attr("height",n).attr("class","packetBlock"),u.append("text").attr("x",d+g/2).attr("y",h+n/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(f.label),!l)continue;const p=f.end===f.start,v=h-2;u.append("text").attr("x",d+(p?g/2:0)).attr("y",v).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",p?"middle":"start").text(f.start),p||u.append("text").attr("x",d+g).attr("y",v).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(f.end)}},"drawWord"),S4t={draw:k4t},_4t={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},A4t=x(({packet:e}={})=>{const t=xa(_4t,e);return`
	.packetByte {
		font-size: ${t.byteFontSize};
	}
	.packetByte.start {
		fill: ${t.startByteColor};
	}
	.packetByte.end {
		fill: ${t.endByteColor};
	}
	.packetLabel {
		fill: ${t.labelColor};
		font-size: ${t.labelFontSize};
	}
	.packetTitle {
		fill: ${t.titleColor};
		font-size: ${t.titleFontSize};
	}
	.packetBlock {
		stroke: ${t.blockStrokeColor};
		stroke-width: ${t.blockStrokeWidth};
		fill: ${t.blockFillColor};
	}
	`},"styles"),L4t={parser:E4t,db:eu,renderer:S4t,styles:A4t};const R4t=Object.freeze(Object.defineProperty({__proto__:null,diagram:L4t},Symbol.toStringTag,{value:"Module"}));var ru={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"},dU={axes:[],curves:[],options:ru},Pc=structuredClone(dU),I4t=Xe.radar,N4t=x(()=>xa({...I4t,...gr().radar}),"getConfig"),gU=x(()=>Pc.axes,"getAxes"),D4t=x(()=>Pc.curves,"getCurves"),M4t=x(()=>Pc.options,"getOptions"),O4t=x(e=>{Pc.axes=e.map(t=>({name:t.name,label:t.label??t.name}))},"setAxes"),P4t=x(e=>{Pc.curves=e.map(t=>({name:t.name,label:t.label??t.name,entries:B4t(t.entries)}))},"setCurves"),B4t=x(e=>{if(e[0].axis==null)return e.map(r=>r.value);const t=gU();if(t.length===0)throw new Error("Axes must be populated before curves for reference entries");return t.map(r=>{const n=e.find(i=>{var a;return((a=i.axis)==null?void 0:a.$refText)===r.name});if(n===void 0)throw new Error("Missing entry for axis "+r.label);return n.value})},"computeCurveEntries"),F4t=x(e=>{var r,n,i,a,s;const t=e.reduce((o,l)=>(o[l.name]=l,o),{});Pc.options={showLegend:((r=t.showLegend)==null?void 0:r.value)??ru.showLegend,ticks:((n=t.ticks)==null?void 0:n.value)??ru.ticks,max:((i=t.max)==null?void 0:i.value)??ru.max,min:((a=t.min)==null?void 0:a.value)??ru.min,graticule:((s=t.graticule)==null?void 0:s.value)??ru.graticule}},"setOptions"),$4t=x(()=>{dn(),Pc=structuredClone(dU)},"clear"),Ud={getAxes:gU,getCurves:D4t,getOptions:M4t,setAxes:O4t,setCurves:P4t,setOptions:F4t,getConfig:N4t,clear:$4t,setAccTitle:cn,getAccTitle:wn,setDiagramTitle:Fn,getDiagramTitle:gn,getAccDescription:kn,setAccDescription:En},z4t=x(e=>{af(e,Ud);const{axes:t,curves:r,options:n}=e;Ud.setAxes(t),Ud.setCurves(r),Ud.setOptions(n)},"populate"),V4t={parse:x(async e=>{const t=await Ic("radar",e);et.debug(t),z4t(t)},"parse")},G4t=x((e,t,r,n)=>{const i=n.db,a=i.getAxes(),s=i.getCurves(),o=i.getOptions(),l=i.getConfig(),u=i.getDiagramTitle(),h=ho(t),f=U4t(h,l),d=o.max??Math.max(...s.map(v=>Math.max(...v.entries))),g=o.min,p=Math.min(l.width,l.height)/2;W4t(f,a,p,o.ticks,o.graticule),Y4t(f,a,p,l),pU(f,a,s,g,d,o.graticule,l),yU(f,s,o.showLegend,l),f.append("text").attr("class","radarTitle").text(u).attr("x",0).attr("y",-l.height/2-l.marginTop)},"draw"),U4t=x((e,t)=>{const r=t.width+t.marginLeft+t.marginRight,n=t.height+t.marginTop+t.marginBottom,i={x:t.marginLeft+t.width/2,y:t.marginTop+t.height/2};return e.attr("viewbox",`0 0 ${r} ${n}`).attr("width",r).attr("height",n),e.append("g").attr("transform",`translate(${i.x}, ${i.y})`)},"drawFrame"),W4t=x((e,t,r,n,i)=>{if(i==="circle")for(let a=0;a<n;a++){const s=r*(a+1)/n;e.append("circle").attr("r",s).attr("class","radarGraticule")}else if(i==="polygon"){const a=t.length;for(let s=0;s<n;s++){const o=r*(s+1)/n,l=t.map((u,h)=>{const f=2*h*Math.PI/a-Math.PI/2,d=o*Math.cos(f),g=o*Math.sin(f);return`${d},${g}`}).join(" ");e.append("polygon").attr("points",l).attr("class","radarGraticule")}}},"drawGraticule"),Y4t=x((e,t,r,n)=>{const i=t.length;for(let a=0;a<i;a++){const s=t[a].label,o=2*a*Math.PI/i-Math.PI/2;e.append("line").attr("x1",0).attr("y1",0).attr("x2",r*n.axisScaleFactor*Math.cos(o)).attr("y2",r*n.axisScaleFactor*Math.sin(o)).attr("class","radarAxisLine"),e.append("text").text(s).attr("x",r*n.axisLabelFactor*Math.cos(o)).attr("y",r*n.axisLabelFactor*Math.sin(o)).attr("class","radarAxisLabel")}},"drawAxes");function pU(e,t,r,n,i,a,s){const o=t.length,l=Math.min(s.width,s.height)/2;r.forEach((u,h)=>{if(u.entries.length!==o)return;const f=u.entries.map((d,g)=>{const p=2*Math.PI*g/o-Math.PI/2,v=vU(d,n,i,l),m=v*Math.cos(p),y=v*Math.sin(p);return{x:m,y}});a==="circle"?e.append("path").attr("d",mU(f,s.curveTension)).attr("class",`radarCurve-${h}`):a==="polygon"&&e.append("polygon").attr("points",f.map(d=>`${d.x},${d.y}`).join(" ")).attr("class",`radarCurve-${h}`)})}x(pU,"drawCurves");function vU(e,t,r,n){const i=Math.min(Math.max(e,t),r);return n*(i-t)/(r-t)}x(vU,"relativeRadius");function mU(e,t){const r=e.length;let n=`M${e[0].x},${e[0].y}`;for(let i=0;i<r;i++){const a=e[(i-1+r)%r],s=e[i],o=e[(i+1)%r],l=e[(i+2)%r],u={x:s.x+(o.x-a.x)*t,y:s.y+(o.y-a.y)*t},h={x:o.x-(l.x-s.x)*t,y:o.y-(l.y-s.y)*t};n+=` C${u.x},${u.y} ${h.x},${h.y} ${o.x},${o.y}`}return`${n} Z`}x(mU,"closedRoundCurve");function yU(e,t,r,n){if(!r)return;const i=(n.width/2+n.marginRight)*3/4,a=-(n.height/2+n.marginTop)*3/4,s=20;t.forEach((o,l)=>{const u=e.append("g").attr("transform",`translate(${i}, ${a+l*s})`);u.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${l}`),u.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(o.label)})}x(yU,"drawLegend");var H4t={draw:G4t},q4t=x((e,t)=>{let r="";for(let n=0;n<e.THEME_COLOR_LIMIT;n++){const i=e[`cScale${n}`];r+=`
		.radarCurve-${n} {
			color: ${i};
			fill: ${i};
			fill-opacity: ${t.curveOpacity};
			stroke: ${i};
			stroke-width: ${t.curveStrokeWidth};
		}
		.radarLegendBox-${n} {
			fill: ${i};
			fill-opacity: ${t.curveOpacity};
			stroke: ${i};
		}
		`}return r},"genIndexStyles"),X4t=x(e=>{const t=ry(),r=gr(),n=xa(t,r.themeVariables),i=xa(n.radar,e);return{themeVariables:n,radarOptions:i}},"buildRadarStyleOptions"),j4t=x(({radar:e}={})=>{const{themeVariables:t,radarOptions:r}=X4t(e);return`
	.radarTitle {
		font-size: ${t.fontSize};
		color: ${t.titleColor};
		dominant-baseline: hanging;
		text-anchor: middle;
	}
	.radarAxisLine {
		stroke: ${r.axisColor};
		stroke-width: ${r.axisStrokeWidth};
	}
	.radarAxisLabel {
		dominant-baseline: middle;
		text-anchor: middle;
		font-size: ${r.axisLabelFontSize}px;
		color: ${r.axisColor};
	}
	.radarGraticule {
		fill: ${r.graticuleColor};
		fill-opacity: ${r.graticuleOpacity};
		stroke: ${r.graticuleColor};
		stroke-width: ${r.graticuleStrokeWidth};
	}
	.radarLegendText {
		text-anchor: start;
		font-size: ${r.legendFontSize}px;
		dominant-baseline: hanging;
	}
	${q4t(t,r)}
	`},"styles"),K4t={parser:V4t,db:Ud,renderer:H4t,styles:j4t};const Z4t=Object.freeze(Object.defineProperty({__proto__:null,diagram:K4t},Symbol.toStringTag,{value:"Module"}));var hk=function(){var e=x(function(T,w,k,S){for(k=k||{},S=T.length;S--;k[T[S]]=w);return k},"o"),t=[1,7],r=[1,13],n=[1,14],i=[1,15],a=[1,19],s=[1,16],o=[1,17],l=[1,18],u=[8,30],h=[8,21,28,29,30,31,32,40,44,47],f=[1,23],d=[1,24],g=[8,15,16,21,28,29,30,31,32,40,44,47],p=[8,15,16,21,27,28,29,30,31,32,40,44,47],v=[1,49],m={trace:x(function(){},"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,block:31,NODE_ID:32,nodeShapeNLabel:33,dirList:34,DIR:35,NODE_DSTART:36,NODE_DEND:37,BLOCK_ARROW_START:38,BLOCK_ARROW_END:39,classDef:40,CLASSDEF_ID:41,CLASSDEF_STYLEOPTS:42,DEFAULT:43,class:44,CLASSENTITY_IDS:45,STYLECLASS:46,style:47,STYLE_ENTITY_IDS:48,STYLE_DEFINITION_DATA:49,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"block",32:"NODE_ID",35:"DIR",36:"NODE_DSTART",37:"NODE_DEND",38:"BLOCK_ARROW_START",39:"BLOCK_ARROW_END",40:"classDef",41:"CLASSDEF_ID",42:"CLASSDEF_STYLEOPTS",43:"DEFAULT",44:"class",45:"CLASSENTITY_IDS",46:"STYLECLASS",47:"style",48:"STYLE_ENTITY_IDS",49:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[34,1],[34,2],[33,3],[33,4],[23,3],[23,3],[24,3],[25,3]],performAction:x(function(w,k,S,E,L,A,R){var C=A.length-1;switch(L){case 4:E.getLogger().debug("Rule: separator (NL) ");break;case 5:E.getLogger().debug("Rule: separator (Space) ");break;case 6:E.getLogger().debug("Rule: separator (EOF) ");break;case 7:E.getLogger().debug("Rule: hierarchy: ",A[C-1]),E.setHierarchy(A[C-1]);break;case 8:E.getLogger().debug("Stop NL ");break;case 9:E.getLogger().debug("Stop EOF ");break;case 10:E.getLogger().debug("Stop NL2 ");break;case 11:E.getLogger().debug("Stop EOF2 ");break;case 12:E.getLogger().debug("Rule: statement: ",A[C]),typeof A[C].length=="number"?this.$=A[C]:this.$=[A[C]];break;case 13:E.getLogger().debug("Rule: statement #2: ",A[C-1]),this.$=[A[C-1]].concat(A[C]);break;case 14:E.getLogger().debug("Rule: link: ",A[C],w),this.$={edgeTypeStr:A[C],label:""};break;case 15:E.getLogger().debug("Rule: LABEL link: ",A[C-3],A[C-1],A[C]),this.$={edgeTypeStr:A[C],label:A[C-1]};break;case 18:const D=parseInt(A[C]),P=E.generateId();this.$={id:P,type:"space",label:"",width:D,children:[]};break;case 23:E.getLogger().debug("Rule: (nodeStatement link node) ",A[C-2],A[C-1],A[C]," typestr: ",A[C-1].edgeTypeStr);const _=E.edgeStrToEdgeData(A[C-1].edgeTypeStr);this.$=[{id:A[C-2].id,label:A[C-2].label,type:A[C-2].type,directions:A[C-2].directions},{id:A[C-2].id+"-"+A[C].id,start:A[C-2].id,end:A[C].id,label:A[C-1].label,type:"edge",directions:A[C].directions,arrowTypeEnd:_,arrowTypeStart:"arrow_open"},{id:A[C].id,label:A[C].label,type:E.typeStr2Type(A[C].typeStr),directions:A[C].directions}];break;case 24:E.getLogger().debug("Rule: nodeStatement (abc88 node size) ",A[C-1],A[C]),this.$={id:A[C-1].id,label:A[C-1].label,type:E.typeStr2Type(A[C-1].typeStr),directions:A[C-1].directions,widthInColumns:parseInt(A[C],10)};break;case 25:E.getLogger().debug("Rule: nodeStatement (node) ",A[C]),this.$={id:A[C].id,label:A[C].label,type:E.typeStr2Type(A[C].typeStr),directions:A[C].directions,widthInColumns:1};break;case 26:E.getLogger().debug("APA123",this?this:"na"),E.getLogger().debug("COLUMNS: ",A[C]),this.$={type:"column-setting",columns:A[C]==="auto"?-1:parseInt(A[C])};break;case 27:E.getLogger().debug("Rule: id-block statement : ",A[C-2],A[C-1]),E.generateId(),this.$={...A[C-2],type:"composite",children:A[C-1]};break;case 28:E.getLogger().debug("Rule: blockStatement : ",A[C-2],A[C-1],A[C]);const I=E.generateId();this.$={id:I,type:"composite",label:"",children:A[C-1]};break;case 29:E.getLogger().debug("Rule: node (NODE_ID separator): ",A[C]),this.$={id:A[C]};break;case 30:E.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",A[C-1],A[C]),this.$={id:A[C-1],label:A[C].label,typeStr:A[C].typeStr,directions:A[C].directions};break;case 31:E.getLogger().debug("Rule: dirList: ",A[C]),this.$=[A[C]];break;case 32:E.getLogger().debug("Rule: dirList: ",A[C-1],A[C]),this.$=[A[C-1]].concat(A[C]);break;case 33:E.getLogger().debug("Rule: nodeShapeNLabel: ",A[C-2],A[C-1],A[C]),this.$={typeStr:A[C-2]+A[C],label:A[C-1]};break;case 34:E.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",A[C-3],A[C-2]," #3:",A[C-1],A[C]),this.$={typeStr:A[C-3]+A[C],label:A[C-2],directions:A[C-1]};break;case 35:case 36:this.$={type:"classDef",id:A[C-1].trim(),css:A[C].trim()};break;case 37:this.$={type:"applyClass",id:A[C-1].trim(),styleClass:A[C].trim()};break;case 38:this.$={type:"applyStyles",id:A[C-1].trim(),stylesStr:A[C].trim()};break}},"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{11:3,13:4,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:r,29:n,31:i,32:a,40:s,44:o,47:l},{8:[1,20]},e(u,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,21:t,28:r,29:n,31:i,32:a,40:s,44:o,47:l}),e(h,[2,16],{14:22,15:f,16:d}),e(h,[2,17]),e(h,[2,18]),e(h,[2,19]),e(h,[2,20]),e(h,[2,21]),e(h,[2,22]),e(g,[2,25],{27:[1,25]}),e(h,[2,26]),{19:26,26:12,32:a},{11:27,13:4,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:r,29:n,31:i,32:a,40:s,44:o,47:l},{41:[1,28],43:[1,29]},{45:[1,30]},{48:[1,31]},e(p,[2,29],{33:32,36:[1,33],38:[1,34]}),{1:[2,7]},e(u,[2,13]),{26:35,32:a},{32:[2,14]},{17:[1,36]},e(g,[2,24]),{11:37,13:4,14:22,15:f,16:d,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:r,29:n,31:i,32:a,40:s,44:o,47:l},{30:[1,38]},{42:[1,39]},{42:[1,40]},{46:[1,41]},{49:[1,42]},e(p,[2,30]),{18:[1,43]},{18:[1,44]},e(g,[2,23]),{18:[1,45]},{30:[1,46]},e(h,[2,28]),e(h,[2,35]),e(h,[2,36]),e(h,[2,37]),e(h,[2,38]),{37:[1,47]},{34:48,35:v},{15:[1,50]},e(h,[2,27]),e(p,[2,33]),{39:[1,51]},{34:52,35:v,39:[2,31]},{32:[2,15]},e(p,[2,34]),{39:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:x(function(w,k){if(k.recoverable)this.trace(w);else{var S=new Error(w);throw S.hash=k,S}},"parseError"),parse:x(function(w){var k=this,S=[0],E=[],L=[null],A=[],R=this.table,C="",D=0,P=0,_=2,I=1,M=A.slice.call(arguments,1),O=Object.create(this.lexer),N={yy:{}};for(var B in this.yy)Object.prototype.hasOwnProperty.call(this.yy,B)&&(N.yy[B]=this.yy[B]);O.setInput(w,N.yy),N.yy.lexer=O,N.yy.parser=this,typeof O.yylloc>"u"&&(O.yylloc={});var z=O.yylloc;A.push(z);var F=O.options&&O.options.ranges;typeof N.yy.parseError=="function"?this.parseError=N.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function V(J){S.length=S.length-2*J,L.length=L.length-J,A.length=A.length-J}x(V,"popStack");function G(){var J;return J=E.pop()||O.lex()||I,typeof J!="number"&&(J instanceof Array&&(E=J,J=E.pop()),J=k.symbols_[J]||J),J}x(G,"lex");for(var Y,Q,K,it,ut={},q,W,H,U;;){if(Q=S[S.length-1],this.defaultActions[Q]?K=this.defaultActions[Q]:((Y===null||typeof Y>"u")&&(Y=G()),K=R[Q]&&R[Q][Y]),typeof K>"u"||!K.length||!K[0]){var X="";U=[];for(q in R[Q])this.terminals_[q]&&q>_&&U.push("'"+this.terminals_[q]+"'");O.showPosition?X="Parse error on line "+(D+1)+`:
`+O.showPosition()+`
Expecting `+U.join(", ")+", got '"+(this.terminals_[Y]||Y)+"'":X="Parse error on line "+(D+1)+": Unexpected "+(Y==I?"end of input":"'"+(this.terminals_[Y]||Y)+"'"),this.parseError(X,{text:O.match,token:this.terminals_[Y]||Y,line:O.yylineno,loc:z,expected:U})}if(K[0]instanceof Array&&K.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Q+", token: "+Y);switch(K[0]){case 1:S.push(Y),L.push(O.yytext),A.push(O.yylloc),S.push(K[1]),Y=null,P=O.yyleng,C=O.yytext,D=O.yylineno,z=O.yylloc;break;case 2:if(W=this.productions_[K[1]][1],ut.$=L[L.length-W],ut._$={first_line:A[A.length-(W||1)].first_line,last_line:A[A.length-1].last_line,first_column:A[A.length-(W||1)].first_column,last_column:A[A.length-1].last_column},F&&(ut._$.range=[A[A.length-(W||1)].range[0],A[A.length-1].range[1]]),it=this.performAction.apply(ut,[C,P,D,N.yy,K[1],L,A].concat(M)),typeof it<"u")return it;W&&(S=S.slice(0,-1*W*2),L=L.slice(0,-1*W),A=A.slice(0,-1*W)),S.push(this.productions_[K[1]][0]),L.push(ut.$),A.push(ut._$),H=R[S[S.length-2]][S[S.length-1]],S.push(H);break;case 3:return!0}}return!0},"parse")},y=function(){var T={EOF:1,parseError:x(function(k,S){if(this.yy.parser)this.yy.parser.parseError(k,S);else throw new Error(k)},"parseError"),setInput:x(function(w,k){return this.yy=k||this.yy||{},this._input=w,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:x(function(){var w=this._input[0];this.yytext+=w,this.yyleng++,this.offset++,this.match+=w,this.matched+=w;var k=w.match(/(?:\r\n?|\n).*/g);return k?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),w},"input"),unput:x(function(w){var k=w.length,S=w.split(/(?:\r\n?|\n)/g);this._input=w+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-k),this.offset-=k;var E=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),S.length-1&&(this.yylineno-=S.length-1);var L=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:S?(S.length===E.length?this.yylloc.first_column:0)+E[E.length-S.length].length-S[0].length:this.yylloc.first_column-k},this.options.ranges&&(this.yylloc.range=[L[0],L[0]+this.yyleng-k]),this.yyleng=this.yytext.length,this},"unput"),more:x(function(){return this._more=!0,this},"more"),reject:x(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:x(function(w){this.unput(this.match.slice(w))},"less"),pastInput:x(function(){var w=this.matched.substr(0,this.matched.length-this.match.length);return(w.length>20?"...":"")+w.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:x(function(){var w=this.match;return w.length<20&&(w+=this._input.substr(0,20-w.length)),(w.substr(0,20)+(w.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:x(function(){var w=this.pastInput(),k=new Array(w.length+1).join("-");return w+this.upcomingInput()+`
`+k+"^"},"showPosition"),test_match:x(function(w,k){var S,E,L;if(this.options.backtrack_lexer&&(L={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(L.yylloc.range=this.yylloc.range.slice(0))),E=w[0].match(/(?:\r\n?|\n).*/g),E&&(this.yylineno+=E.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+w[0].length},this.yytext+=w[0],this.match+=w[0],this.matches=w,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(w[0].length),this.matched+=w[0],S=this.performAction.call(this,this.yy,this,k,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),S)return S;if(this._backtrack){for(var A in L)this[A]=L[A];return!1}return!1},"test_match"),next:x(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var w,k,S,E;this._more||(this.yytext="",this.match="");for(var L=this._currentRules(),A=0;A<L.length;A++)if(S=this._input.match(this.rules[L[A]]),S&&(!k||S[0].length>k[0].length)){if(k=S,E=A,this.options.backtrack_lexer){if(w=this.test_match(S,L[A]),w!==!1)return w;if(this._backtrack){k=!1;continue}else return!1}else if(!this.options.flex)break}return k?(w=this.test_match(k,L[E]),w!==!1?w:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:x(function(){var k=this.next();return k||this.lex()},"lex"),begin:x(function(k){this.conditionStack.push(k)},"begin"),popState:x(function(){var k=this.conditionStack.length-1;return k>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:x(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:x(function(k){return k=this.conditionStack.length-1-Math.abs(k||0),k>=0?this.conditionStack[k]:"INITIAL"},"topState"),pushState:x(function(k){this.begin(k)},"pushState"),stateStackSize:x(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:x(function(k,S,E,L){switch(E){case 0:return 10;case 1:return k.getLogger().debug("Found space-block"),31;case 2:return k.getLogger().debug("Found nl-block"),31;case 3:return k.getLogger().debug("Found space-block"),29;case 4:k.getLogger().debug(".",S.yytext);break;case 5:k.getLogger().debug("_",S.yytext);break;case 6:return 5;case 7:return S.yytext=-1,28;case 8:return S.yytext=S.yytext.replace(/columns\s+/,""),k.getLogger().debug("COLUMNS (LEX)",S.yytext),28;case 9:this.pushState("md_string");break;case 10:return"MD_STR";case 11:this.popState();break;case 12:this.pushState("string");break;case 13:k.getLogger().debug("LEX: POPPING STR:",S.yytext),this.popState();break;case 14:return k.getLogger().debug("LEX: STR end:",S.yytext),"STR";case 15:return S.yytext=S.yytext.replace(/space\:/,""),k.getLogger().debug("SPACE NUM (LEX)",S.yytext),21;case 16:return S.yytext="1",k.getLogger().debug("COLUMNS (LEX)",S.yytext),21;case 17:return 43;case 18:return"LINKSTYLE";case 19:return"INTERPOLATE";case 20:return this.pushState("CLASSDEF"),40;case 21:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 22:return this.popState(),this.pushState("CLASSDEFID"),41;case 23:return this.popState(),42;case 24:return this.pushState("CLASS"),44;case 25:return this.popState(),this.pushState("CLASS_STYLE"),45;case 26:return this.popState(),46;case 27:return this.pushState("STYLE_STMNT"),47;case 28:return this.popState(),this.pushState("STYLE_DEFINITION"),48;case 29:return this.popState(),49;case 30:return this.pushState("acc_title"),"acc_title";case 31:return this.popState(),"acc_title_value";case 32:return this.pushState("acc_descr"),"acc_descr";case 33:return this.popState(),"acc_descr_value";case 34:this.pushState("acc_descr_multiline");break;case 35:this.popState();break;case 36:return"acc_descr_multiline_value";case 37:return 30;case 38:return this.popState(),k.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),k.getLogger().debug("Lex: (("),"NODE_DEND";case 40:return this.popState(),k.getLogger().debug("Lex: ))"),"NODE_DEND";case 41:return this.popState(),k.getLogger().debug("Lex: (("),"NODE_DEND";case 42:return this.popState(),k.getLogger().debug("Lex: (("),"NODE_DEND";case 43:return this.popState(),k.getLogger().debug("Lex: (-"),"NODE_DEND";case 44:return this.popState(),k.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),k.getLogger().debug("Lex: (("),"NODE_DEND";case 46:return this.popState(),k.getLogger().debug("Lex: ]]"),"NODE_DEND";case 47:return this.popState(),k.getLogger().debug("Lex: ("),"NODE_DEND";case 48:return this.popState(),k.getLogger().debug("Lex: ])"),"NODE_DEND";case 49:return this.popState(),k.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),k.getLogger().debug("Lex: /]"),"NODE_DEND";case 51:return this.popState(),k.getLogger().debug("Lex: )]"),"NODE_DEND";case 52:return this.popState(),k.getLogger().debug("Lex: )"),"NODE_DEND";case 53:return this.popState(),k.getLogger().debug("Lex: ]>"),"NODE_DEND";case 54:return this.popState(),k.getLogger().debug("Lex: ]"),"NODE_DEND";case 55:return k.getLogger().debug("Lexa: -)"),this.pushState("NODE"),36;case 56:return k.getLogger().debug("Lexa: (-"),this.pushState("NODE"),36;case 57:return k.getLogger().debug("Lexa: ))"),this.pushState("NODE"),36;case 58:return k.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 59:return k.getLogger().debug("Lex: ((("),this.pushState("NODE"),36;case 60:return k.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 61:return k.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 62:return k.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 63:return k.getLogger().debug("Lexc: >"),this.pushState("NODE"),36;case 64:return k.getLogger().debug("Lexa: (["),this.pushState("NODE"),36;case 65:return k.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 66:return this.pushState("NODE"),36;case 67:return this.pushState("NODE"),36;case 68:return this.pushState("NODE"),36;case 69:return this.pushState("NODE"),36;case 70:return this.pushState("NODE"),36;case 71:return this.pushState("NODE"),36;case 72:return this.pushState("NODE"),36;case 73:return k.getLogger().debug("Lexa: ["),this.pushState("NODE"),36;case 74:return this.pushState("BLOCK_ARROW"),k.getLogger().debug("LEX ARR START"),38;case 75:return k.getLogger().debug("Lex: NODE_ID",S.yytext),32;case 76:return k.getLogger().debug("Lex: EOF",S.yytext),8;case 77:this.pushState("md_string");break;case 78:this.pushState("md_string");break;case 79:return"NODE_DESCR";case 80:this.popState();break;case 81:k.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 82:k.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 83:return k.getLogger().debug("LEX: NODE_DESCR:",S.yytext),"NODE_DESCR";case 84:k.getLogger().debug("LEX POPPING"),this.popState();break;case 85:k.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 86:return S.yytext=S.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (right): dir:",S.yytext),"DIR";case 87:return S.yytext=S.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (left):",S.yytext),"DIR";case 88:return S.yytext=S.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (x):",S.yytext),"DIR";case 89:return S.yytext=S.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (y):",S.yytext),"DIR";case 90:return S.yytext=S.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (up):",S.yytext),"DIR";case 91:return S.yytext=S.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (down):",S.yytext),"DIR";case 92:return S.yytext="]>",k.getLogger().debug("Lex (ARROW_DIR end):",S.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 93:return k.getLogger().debug("Lex: LINK","#"+S.yytext+"#"),15;case 94:return k.getLogger().debug("Lex: LINK",S.yytext),15;case 95:return k.getLogger().debug("Lex: LINK",S.yytext),15;case 96:return k.getLogger().debug("Lex: LINK",S.yytext),15;case 97:return k.getLogger().debug("Lex: START_LINK",S.yytext),this.pushState("LLABEL"),16;case 98:return k.getLogger().debug("Lex: START_LINK",S.yytext),this.pushState("LLABEL"),16;case 99:return k.getLogger().debug("Lex: START_LINK",S.yytext),this.pushState("LLABEL"),16;case 100:this.pushState("md_string");break;case 101:return k.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 102:return this.popState(),k.getLogger().debug("Lex: LINK","#"+S.yytext+"#"),15;case 103:return this.popState(),k.getLogger().debug("Lex: LINK",S.yytext),15;case 104:return this.popState(),k.getLogger().debug("Lex: LINK",S.yytext),15;case 105:return k.getLogger().debug("Lex: COLON",S.yytext),S.yytext=S.yytext.slice(1),27}},"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block\s+)/,/^(?:block\n+)/,/^(?:block:)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[29],inclusive:!1},STYLE_STMNT:{rules:[28],inclusive:!1},CLASSDEFID:{rules:[23],inclusive:!1},CLASSDEF:{rules:[21,22],inclusive:!1},CLASS_STYLE:{rules:[26],inclusive:!1},CLASS:{rules:[25],inclusive:!1},LLABEL:{rules:[100,101,102,103,104],inclusive:!1},ARROW_DIR:{rules:[86,87,88,89,90,91,92],inclusive:!1},BLOCK_ARROW:{rules:[77,82,85],inclusive:!1},NODE:{rules:[38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,78,81],inclusive:!1},md_string:{rules:[10,11,79,80],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[13,14,83,84],inclusive:!1},acc_descr_multiline:{rules:[35,36],inclusive:!1},acc_descr:{rules:[33],inclusive:!1},acc_title:{rules:[31],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,12,15,16,17,18,19,20,24,27,30,32,34,37,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,93,94,95,96,97,98,99,105],inclusive:!0}}};return T}();m.lexer=y;function b(){this.yy={}}return x(b,"Parser"),b.prototype=m,m.Parser=b,new b}();hk.parser=hk;var Q4t=hk,Ba=new Map,$_=[],fk=new Map,XN="color",jN="fill",J4t="bgFill",xU=",",t5t=pt(),Fm=new Map,e5t=x(e=>Xt.sanitizeText(e,t5t),"sanitizeText"),r5t=x(function(e,t=""){let r=Fm.get(e);r||(r={id:e,styles:[],textStyles:[]},Fm.set(e,r)),t!=null&&t.split(xU).forEach(n=>{const i=n.replace(/([^;]*);/,"$1").trim();if(RegExp(XN).exec(n)){const s=i.replace(jN,J4t).replace(XN,jN);r.textStyles.push(s)}r.styles.push(i)})},"addStyleClass"),n5t=x(function(e,t=""){const r=Ba.get(e);t!=null&&(r.styles=t.split(xU))},"addStyle2Node"),i5t=x(function(e,t){e.split(",").forEach(function(r){let n=Ba.get(r);if(n===void 0){const i=r.trim();n={id:i,type:"na",children:[]},Ba.set(i,n)}n.classes||(n.classes=[]),n.classes.push(t)})},"setCssClass"),bU=x((e,t)=>{const r=e.flat(),n=[];for(const i of r){if(i.label&&(i.label=e5t(i.label)),i.type==="classDef"){r5t(i.id,i.css);continue}if(i.type==="applyClass"){i5t(i.id,(i==null?void 0:i.styleClass)??"");continue}if(i.type==="applyStyles"){i!=null&&i.stylesStr&&n5t(i.id,i==null?void 0:i.stylesStr);continue}if(i.type==="column-setting")t.columns=i.columns??-1;else if(i.type==="edge"){const a=(fk.get(i.id)??0)+1;fk.set(i.id,a),i.id=a+"-"+i.id,$_.push(i)}else{i.label||(i.type==="composite"?i.label="":i.label=i.id);const a=Ba.get(i.id);if(a===void 0?Ba.set(i.id,i):(i.type!=="na"&&(a.type=i.type),i.label!==i.id&&(a.label=i.label)),i.children&&bU(i.children,i),i.type==="space"){const s=i.width??1;for(let o=0;o<s;o++){const l=un(i);l.id=l.id+"-"+o,Ba.set(l.id,l),n.push(l)}}else a===void 0&&n.push(i)}}t.children=n},"populateBlockDatabase"),z_=[],ig={id:"root",type:"composite",children:[],columns:-1},a5t=x(()=>{et.debug("Clear called"),dn(),ig={id:"root",type:"composite",children:[],columns:-1},Ba=new Map([["root",ig]]),z_=[],Fm=new Map,$_=[],fk=new Map},"clear");function TU(e){switch(et.debug("typeStr2Type",e),e){case"[]":return"square";case"()":return et.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}x(TU,"typeStr2Type");function wU(e){switch(et.debug("typeStr2Type",e),e){case"==":return"thick";default:return"normal"}}x(wU,"edgeTypeStr2Type");function EU(e){switch(e.trim()){case"--x":return"arrow_cross";case"--o":return"arrow_circle";default:return"arrow_point"}}x(EU,"edgeStrToEdgeData");var KN=0,s5t=x(()=>(KN++,"id-"+Math.random().toString(36).substr(2,12)+"-"+KN),"generateId"),o5t=x(e=>{ig.children=e,bU(e,ig),z_=ig.children},"setHierarchy"),l5t=x(e=>{const t=Ba.get(e);return t?t.columns?t.columns:t.children?t.children.length:-1:-1},"getColumns"),c5t=x(()=>[...Ba.values()],"getBlocksFlat"),u5t=x(()=>z_||[],"getBlocks"),h5t=x(()=>$_,"getEdges"),f5t=x(e=>Ba.get(e),"getBlock"),d5t=x(e=>{Ba.set(e.id,e)},"setBlock"),g5t=x(()=>console,"getLogger"),p5t=x(function(){return Fm},"getClasses"),v5t={getConfig:x(()=>gr().block,"getConfig"),typeStr2Type:TU,edgeTypeStr2Type:wU,edgeStrToEdgeData:EU,getLogger:g5t,getBlocksFlat:c5t,getBlocks:u5t,getEdges:h5t,setHierarchy:o5t,getBlock:f5t,setBlock:d5t,getColumns:l5t,getClasses:p5t,clear:a5t,generateId:s5t},m5t=v5t,G0=x((e,t)=>{const r=Fk,n=r(e,"r"),i=r(e,"g"),a=r(e,"b");return Ao(n,i,a,t)},"fade"),y5t=x(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span,p {
    color: ${e.titleColor};
  }



  .label text,span,p {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${G0(e.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${G0(e.mainBkg,.5)};
    fill: ${G0(e.clusterBkg,.5)};
    stroke: ${G0(e.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span,p {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,"getStyles"),x5t=y5t,b5t=x((e,t,r,n)=>{t.forEach(i=>{R5t[i](e,r,n)})},"insertMarkers"),T5t=x((e,t,r)=>{et.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),w5t=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),E5t=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),k5t=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),C5t=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),S5t=x((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),_5t=x((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),A5t=x((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),L5t=x((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),R5t={extension:T5t,composition:w5t,aggregation:E5t,dependency:k5t,lollipop:C5t,point:S5t,circle:_5t,cross:A5t,barb:L5t},I5t=b5t,c6,u6,Gr=((u6=(c6=pt())==null?void 0:c6.block)==null?void 0:u6.padding)??8;function kU(e,t){if(e===0||!Number.isInteger(e))throw new Error("Columns must be an integer !== 0.");if(t<0||!Number.isInteger(t))throw new Error("Position must be a non-negative integer."+t);if(e<0)return{px:t,py:0};if(e===1)return{px:0,py:t};const r=t%e,n=Math.floor(t/e);return{px:r,py:n}}x(kU,"calculateBlockPosition");var N5t=x(e=>{let t=0,r=0;for(const n of e.children){const{width:i,height:a,x:s,y:o}=n.size??{width:0,height:0,x:0,y:0};et.debug("getMaxChildSize abc95 child:",n.id,"width:",i,"height:",a,"x:",s,"y:",o,n.type),n.type!=="space"&&(i>t&&(t=i/(e.widthInColumns??1)),a>r&&(r=a))}return{width:t,height:r}},"getMaxChildSize");function $m(e,t,r=0,n=0){var s,o,l,u,h,f,d,g,p,v,m;et.debug("setBlockSizes abc95 (start)",e.id,(s=e==null?void 0:e.size)==null?void 0:s.x,"block width =",e==null?void 0:e.size,"sieblingWidth",r),(o=e==null?void 0:e.size)!=null&&o.width||(e.size={width:r,height:n,x:0,y:0});let i=0,a=0;if(((l=e.children)==null?void 0:l.length)>0){for(const L of e.children)$m(L,t);const y=N5t(e);i=y.width,a=y.height,et.debug("setBlockSizes abc95 maxWidth of",e.id,":s children is ",i,a);for(const L of e.children)L.size&&(et.debug(`abc95 Setting size of children of ${e.id} id=${L.id} ${i} ${a} ${JSON.stringify(L.size)}`),L.size.width=i*(L.widthInColumns??1)+Gr*((L.widthInColumns??1)-1),L.size.height=a,L.size.x=0,L.size.y=0,et.debug(`abc95 updating size of ${e.id} children child:${L.id} maxWidth:${i} maxHeight:${a}`));for(const L of e.children)$m(L,t,i,a);const b=e.columns??-1;let T=0;for(const L of e.children)T+=L.widthInColumns??1;let w=e.children.length;b>0&&b<T&&(w=b);const k=Math.ceil(T/w);let S=w*(i+Gr)+Gr,E=k*(a+Gr)+Gr;if(S<r){et.debug(`Detected to small siebling: abc95 ${e.id} sieblingWidth ${r} sieblingHeight ${n} width ${S}`),S=r,E=n;const L=(r-w*Gr-Gr)/w,A=(n-k*Gr-Gr)/k;et.debug("Size indata abc88",e.id,"childWidth",L,"maxWidth",i),et.debug("Size indata abc88",e.id,"childHeight",A,"maxHeight",a),et.debug("Size indata abc88 xSize",w,"padding",Gr);for(const R of e.children)R.size&&(R.size.width=L,R.size.height=A,R.size.x=0,R.size.y=0)}if(et.debug(`abc95 (finale calc) ${e.id} xSize ${w} ySize ${k} columns ${b}${e.children.length} width=${Math.max(S,((u=e.size)==null?void 0:u.width)||0)}`),S<(((h=e==null?void 0:e.size)==null?void 0:h.width)||0)){S=((f=e==null?void 0:e.size)==null?void 0:f.width)||0;const L=b>0?Math.min(e.children.length,b):e.children.length;if(L>0){const A=(S-L*Gr-Gr)/L;et.debug("abc95 (growing to fit) width",e.id,S,(d=e.size)==null?void 0:d.width,A);for(const R of e.children)R.size&&(R.size.width=A)}}e.size={width:S,height:E,x:0,y:0}}et.debug("setBlockSizes abc94 (done)",e.id,(g=e==null?void 0:e.size)==null?void 0:g.x,(p=e==null?void 0:e.size)==null?void 0:p.width,(v=e==null?void 0:e.size)==null?void 0:v.y,(m=e==null?void 0:e.size)==null?void 0:m.height)}x($m,"setBlockSizes");function V_(e,t){var n,i,a,s,o,l,u,h,f,d,g,p,v,m,y,b,T;et.debug(`abc85 layout blocks (=>layoutBlocks) ${e.id} x: ${(n=e==null?void 0:e.size)==null?void 0:n.x} y: ${(i=e==null?void 0:e.size)==null?void 0:i.y} width: ${(a=e==null?void 0:e.size)==null?void 0:a.width}`);const r=e.columns??-1;if(et.debug("layoutBlocks columns abc95",e.id,"=>",r,e),e.children&&e.children.length>0){const w=((o=(s=e==null?void 0:e.children[0])==null?void 0:s.size)==null?void 0:o.width)??0,k=e.children.length*w+(e.children.length-1)*Gr;et.debug("widthOfChildren 88",k,"posX");let S=0;et.debug("abc91 block?.size?.x",e.id,(l=e==null?void 0:e.size)==null?void 0:l.x);let E=(u=e==null?void 0:e.size)!=null&&u.x?((h=e==null?void 0:e.size)==null?void 0:h.x)+(-((f=e==null?void 0:e.size)==null?void 0:f.width)/2||0):-Gr,L=0;for(const A of e.children){const R=e;if(!A.size)continue;const{width:C,height:D}=A.size,{px:P,py:_}=kU(r,S);if(_!=L&&(L=_,E=(d=e==null?void 0:e.size)!=null&&d.x?((g=e==null?void 0:e.size)==null?void 0:g.x)+(-((p=e==null?void 0:e.size)==null?void 0:p.width)/2||0):-Gr,et.debug("New row in layout for block",e.id," and child ",A.id,L)),et.debug(`abc89 layout blocks (child) id: ${A.id} Pos: ${S} (px, py) ${P},${_} (${(v=R==null?void 0:R.size)==null?void 0:v.x},${(m=R==null?void 0:R.size)==null?void 0:m.y}) parent: ${R.id} width: ${C}${Gr}`),R.size){const I=C/2;A.size.x=E+Gr+I,et.debug(`abc91 layout blocks (calc) px, pyid:${A.id} startingPos=X${E} new startingPosX${A.size.x} ${I} padding=${Gr} width=${C} halfWidth=${I} => x:${A.size.x} y:${A.size.y} ${A.widthInColumns} (width * (child?.w || 1)) / 2 ${C*((A==null?void 0:A.widthInColumns)??1)/2}`),E=A.size.x+I,A.size.y=R.size.y-R.size.height/2+_*(D+Gr)+D/2+Gr,et.debug(`abc88 layout blocks (calc) px, pyid:${A.id}startingPosX${E}${Gr}${I}=>x:${A.size.x}y:${A.size.y}${A.widthInColumns}(width * (child?.w || 1)) / 2${C*((A==null?void 0:A.widthInColumns)??1)/2}`)}A.children&&V_(A),S+=(A==null?void 0:A.widthInColumns)??1,et.debug("abc88 columnsPos",A,S)}}et.debug(`layout blocks (<==layoutBlocks) ${e.id} x: ${(y=e==null?void 0:e.size)==null?void 0:y.x} y: ${(b=e==null?void 0:e.size)==null?void 0:b.y} width: ${(T=e==null?void 0:e.size)==null?void 0:T.width}`)}x(V_,"layoutBlocks");function G_(e,{minX:t,minY:r,maxX:n,maxY:i}={minX:0,minY:0,maxX:0,maxY:0}){if(e.size&&e.id!=="root"){const{x:a,y:s,width:o,height:l}=e.size;a-o/2<t&&(t=a-o/2),s-l/2<r&&(r=s-l/2),a+o/2>n&&(n=a+o/2),s+l/2>i&&(i=s+l/2)}if(e.children)for(const a of e.children)({minX:t,minY:r,maxX:n,maxY:i}=G_(a,{minX:t,minY:r,maxX:n,maxY:i}));return{minX:t,minY:r,maxX:n,maxY:i}}x(G_,"findBounds");function CU(e){const t=e.getBlock("root");if(!t)return;$m(t,e,0,0),V_(t),et.debug("getBlocks",JSON.stringify(t,null,2));const{minX:r,minY:n,maxX:i,maxY:a}=G_(t),s=a-n,o=i-r;return{x:r,y:n,width:o,height:s}}x(CU,"layout");function dk(e,t){t&&e.attr("style",t)}x(dk,"applyStyle");function SU(e){const t=qt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),n=e.label,i=e.isNode?"nodeLabel":"edgeLabel",a=r.append("span");return a.html(n),dk(a,e.labelStyle),a.attr("class",i),dk(r,e.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}x(SU,"addHtmlLabel");var D5t=x((e,t,r,n)=>{let i=e||"";if(typeof i=="object"&&(i=i[0]),dr(pt().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),et.debug("vertexText"+i);const a={isNode:n,label:_C(cs(i)),labelStyle:t.replace("fill:","color:")};return SU(a)}else{const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",t.replace("color:","fill:"));let s=[];typeof i=="string"?s=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?s=i:s=[];for(const o of s){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o.trim(),a.appendChild(l)}return a}},"createLabel"),ha=D5t,M5t=x((e,t,r,n,i)=>{t.arrowTypeStart&&ZN(e,"start",t.arrowTypeStart,r,n,i),t.arrowTypeEnd&&ZN(e,"end",t.arrowTypeEnd,r,n,i)},"addEdgeMarkers"),O5t={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},ZN=x((e,t,r,n,i,a)=>{const s=O5t[r];if(!s){et.warn(`Unknown arrow type: ${r}`);return}const o=t==="start"?"Start":"End";e.attr(`marker-${t}`,`url(${n}#${i}_${a}-${s}${o})`)},"addEdgeMarker"),gk={},Yn={},P5t=x((e,t)=>{const r=pt(),n=dr(r.flowchart.htmlLabels),i=t.labelType==="markdown"?Pi(e,t.label,{style:t.labelStyle,useHtmlLabels:n,addSvgBackground:!0},r):ha(t.label,t.labelStyle),a=e.insert("g").attr("class","edgeLabel"),s=a.insert("g").attr("class","label");s.node().appendChild(i);let o=i.getBBox();if(n){const u=i.children[0],h=qt(i);o=u.getBoundingClientRect(),h.attr("width",o.width),h.attr("height",o.height)}s.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),gk[t.id]=a,t.width=o.width,t.height=o.height;let l;if(t.startLabelLeft){const u=ha(t.startLabelLeft,t.labelStyle),h=e.insert("g").attr("class","edgeTerminals"),f=h.insert("g").attr("class","inner");l=f.node().appendChild(u);const d=u.getBBox();f.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),Yn[t.id]||(Yn[t.id]={}),Yn[t.id].startLeft=h,Wd(l,t.startLabelLeft)}if(t.startLabelRight){const u=ha(t.startLabelRight,t.labelStyle),h=e.insert("g").attr("class","edgeTerminals"),f=h.insert("g").attr("class","inner");l=h.node().appendChild(u),f.node().appendChild(u);const d=u.getBBox();f.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),Yn[t.id]||(Yn[t.id]={}),Yn[t.id].startRight=h,Wd(l,t.startLabelRight)}if(t.endLabelLeft){const u=ha(t.endLabelLeft,t.labelStyle),h=e.insert("g").attr("class","edgeTerminals"),f=h.insert("g").attr("class","inner");l=f.node().appendChild(u);const d=u.getBBox();f.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),h.node().appendChild(u),Yn[t.id]||(Yn[t.id]={}),Yn[t.id].endLeft=h,Wd(l,t.endLabelLeft)}if(t.endLabelRight){const u=ha(t.endLabelRight,t.labelStyle),h=e.insert("g").attr("class","edgeTerminals"),f=h.insert("g").attr("class","inner");l=f.node().appendChild(u);const d=u.getBBox();f.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),h.node().appendChild(u),Yn[t.id]||(Yn[t.id]={}),Yn[t.id].endRight=h,Wd(l,t.endLabelRight)}return i},"insertEdgeLabel");function Wd(e,t){pt().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}x(Wd,"setTerminalWidth");var B5t=x((e,t)=>{et.debug("Moving label abc88 ",e.id,e.label,gk[e.id],t);let r=t.updatedPath?t.updatedPath:t.originalPath;const n=pt(),{subGraphTitleTotalMargin:i}=np(n);if(e.label){const a=gk[e.id];let s=e.x,o=e.y;if(r){const l=De.calcLabelPosition(r);et.debug("Moving label "+e.label+" from (",s,",",o,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(s=l.x,o=l.y)}a.attr("transform",`translate(${s}, ${o+i/2})`)}if(e.startLabelLeft){const a=Yn[e.id].startLeft;let s=e.x,o=e.y;if(r){const l=De.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);s=l.x,o=l.y}a.attr("transform",`translate(${s}, ${o})`)}if(e.startLabelRight){const a=Yn[e.id].startRight;let s=e.x,o=e.y;if(r){const l=De.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);s=l.x,o=l.y}a.attr("transform",`translate(${s}, ${o})`)}if(e.endLabelLeft){const a=Yn[e.id].endLeft;let s=e.x,o=e.y;if(r){const l=De.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);s=l.x,o=l.y}a.attr("transform",`translate(${s}, ${o})`)}if(e.endLabelRight){const a=Yn[e.id].endRight;let s=e.x,o=e.y;if(r){const l=De.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);s=l.x,o=l.y}a.attr("transform",`translate(${s}, ${o})`)}},"positionEdgeLabel"),F5t=x((e,t)=>{const r=e.x,n=e.y,i=Math.abs(t.x-r),a=Math.abs(t.y-n),s=e.width/2,o=e.height/2;return i>=s||a>=o},"outsideNode"),$5t=x((e,t,r)=>{et.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const n=e.x,i=e.y,a=Math.abs(n-r.x),s=e.width/2;let o=r.x<t.x?s-a:s+a;const l=e.height/2,u=Math.abs(t.y-r.y),h=Math.abs(t.x-r.x);if(Math.abs(i-t.y)*s>Math.abs(n-t.x)*l){let f=r.y<t.y?t.y-l-i:i-l-t.y;o=h*f/u;const d={x:r.x<t.x?r.x+o:r.x-h+o,y:r.y<t.y?r.y+u-f:r.y-u+f};return o===0&&(d.x=t.x,d.y=t.y),h===0&&(d.x=t.x),u===0&&(d.y=t.y),et.debug(`abc89 topp/bott calc, Q ${u}, q ${f}, R ${h}, r ${o}`,d),d}else{r.x<t.x?o=t.x-s-n:o=n-s-t.x;let f=u*o/h,d=r.x<t.x?r.x+h-o:r.x-h+o,g=r.y<t.y?r.y+f:r.y-f;return et.debug(`sides calc abc89, Q ${u}, q ${f}, R ${h}, r ${o}`,{_x:d,_y:g}),o===0&&(d=t.x,g=t.y),h===0&&(d=t.x),u===0&&(g=t.y),{x:d,y:g}}},"intersection"),QN=x((e,t)=>{et.debug("abc88 cutPathAtIntersect",e,t);let r=[],n=e[0],i=!1;return e.forEach(a=>{if(!F5t(t,a)&&!i){const s=$5t(t,n,a);let o=!1;r.forEach(l=>{o=o||l.x===s.x&&l.y===s.y}),r.some(l=>l.x===s.x&&l.y===s.y)||r.push(s),i=!0}else n=a,i||r.push(a)}),r},"cutPathAtIntersect"),z5t=x(function(e,t,r,n,i,a,s){let o=r.points;et.debug("abc88 InsertEdge: edge=",r,"e=",t);let l=!1;const u=a.node(t.v);var h=a.node(t.w);h!=null&&h.intersect&&(u!=null&&u.intersect)&&(o=o.slice(1,r.points.length-1),o.unshift(u.intersect(o[0])),o.push(h.intersect(o[o.length-1]))),r.toCluster&&(et.debug("to cluster abc88",n[r.toCluster]),o=QN(r.points,n[r.toCluster].node),l=!0),r.fromCluster&&(et.debug("from cluster abc88",n[r.fromCluster]),o=QN(o.reverse(),n[r.fromCluster].node).reverse(),l=!0);const f=o.filter(w=>!Number.isNaN(w.y));let d=uu;r.curve&&(i==="graph"||i==="flowchart")&&(d=r.curve);const{x:g,y:p}=PO(r),v=vh().x(g).y(p).curve(d);let m;switch(r.thickness){case"normal":m="edge-thickness-normal";break;case"thick":m="edge-thickness-thick";break;case"invisible":m="edge-thickness-thick";break;default:m=""}switch(r.pattern){case"solid":m+=" edge-pattern-solid";break;case"dotted":m+=" edge-pattern-dotted";break;case"dashed":m+=" edge-pattern-dashed";break}const y=e.append("path").attr("d",v(f)).attr("id",r.id).attr("class"," "+m+(r.classes?" "+r.classes:"")).attr("style",r.style);let b="";(pt().flowchart.arrowMarkerAbsolute||pt().state.arrowMarkerAbsolute)&&(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,b=b.replace(/\(/g,"\\("),b=b.replace(/\)/g,"\\)")),M5t(y,r,b,s,i);let T={};return l&&(T.updatedPath=o),T.originalPath=r.points,T},"insertEdge"),V5t=x(e=>{const t=new Set;for(const r of e)switch(r){case"x":t.add("right"),t.add("left");break;case"y":t.add("up"),t.add("down");break;default:t.add(r);break}return t},"expandAndDeduplicateDirections"),G5t=x((e,t,r)=>{const n=V5t(e),i=2,a=t.height+2*r.padding,s=a/i,o=t.width+2*s+r.padding,l=r.padding/2;return n.has("right")&&n.has("left")&&n.has("up")&&n.has("down")?[{x:0,y:0},{x:s,y:0},{x:o/2,y:2*l},{x:o-s,y:0},{x:o,y:0},{x:o,y:-a/3},{x:o+2*l,y:-a/2},{x:o,y:-2*a/3},{x:o,y:-a},{x:o-s,y:-a},{x:o/2,y:-a-2*l},{x:s,y:-a},{x:0,y:-a},{x:0,y:-2*a/3},{x:-2*l,y:-a/2},{x:0,y:-a/3}]:n.has("right")&&n.has("left")&&n.has("up")?[{x:s,y:0},{x:o-s,y:0},{x:o,y:-a/2},{x:o-s,y:-a},{x:s,y:-a},{x:0,y:-a/2}]:n.has("right")&&n.has("left")&&n.has("down")?[{x:0,y:0},{x:s,y:-a},{x:o-s,y:-a},{x:o,y:0}]:n.has("right")&&n.has("up")&&n.has("down")?[{x:0,y:0},{x:o,y:-s},{x:o,y:-a+s},{x:0,y:-a}]:n.has("left")&&n.has("up")&&n.has("down")?[{x:o,y:0},{x:0,y:-s},{x:0,y:-a+s},{x:o,y:-a}]:n.has("right")&&n.has("left")?[{x:s,y:0},{x:s,y:-l},{x:o-s,y:-l},{x:o-s,y:0},{x:o,y:-a/2},{x:o-s,y:-a},{x:o-s,y:-a+l},{x:s,y:-a+l},{x:s,y:-a},{x:0,y:-a/2}]:n.has("up")&&n.has("down")?[{x:o/2,y:0},{x:0,y:-l},{x:s,y:-l},{x:s,y:-a+l},{x:0,y:-a+l},{x:o/2,y:-a},{x:o,y:-a+l},{x:o-s,y:-a+l},{x:o-s,y:-l},{x:o,y:-l}]:n.has("right")&&n.has("up")?[{x:0,y:0},{x:o,y:-s},{x:0,y:-a}]:n.has("right")&&n.has("down")?[{x:0,y:0},{x:o,y:0},{x:0,y:-a}]:n.has("left")&&n.has("up")?[{x:o,y:0},{x:0,y:-s},{x:o,y:-a}]:n.has("left")&&n.has("down")?[{x:o,y:0},{x:0,y:0},{x:o,y:-a}]:n.has("right")?[{x:s,y:-l},{x:s,y:-l},{x:o-s,y:-l},{x:o-s,y:0},{x:o,y:-a/2},{x:o-s,y:-a},{x:o-s,y:-a+l},{x:s,y:-a+l},{x:s,y:-a+l}]:n.has("left")?[{x:s,y:0},{x:s,y:-l},{x:o-s,y:-l},{x:o-s,y:-a+l},{x:s,y:-a+l},{x:s,y:-a},{x:0,y:-a/2}]:n.has("up")?[{x:s,y:-l},{x:s,y:-a+l},{x:0,y:-a+l},{x:o/2,y:-a},{x:o,y:-a+l},{x:o-s,y:-a+l},{x:o-s,y:-l}]:n.has("down")?[{x:o/2,y:0},{x:0,y:-l},{x:s,y:-l},{x:s,y:-a+l},{x:o-s,y:-a+l},{x:o-s,y:-l},{x:o,y:-l}]:[{x:0,y:0}]},"getArrowPoints");function _U(e,t){return e.intersect(t)}x(_U,"intersectNode");var U5t=_U;function AU(e,t,r,n){var i=e.x,a=e.y,s=i-n.x,o=a-n.y,l=Math.sqrt(t*t*o*o+r*r*s*s),u=Math.abs(t*r*s/l);n.x<i&&(u=-u);var h=Math.abs(t*r*o/l);return n.y<a&&(h=-h),{x:i+u,y:a+h}}x(AU,"intersectEllipse");var LU=AU;function RU(e,t,r){return LU(e,t,t,r)}x(RU,"intersectCircle");var W5t=RU;function IU(e,t,r,n){var i,a,s,o,l,u,h,f,d,g,p,v,m,y,b;if(i=t.y-e.y,s=e.x-t.x,l=t.x*e.y-e.x*t.y,d=i*r.x+s*r.y+l,g=i*n.x+s*n.y+l,!(d!==0&&g!==0&&pk(d,g))&&(a=n.y-r.y,o=r.x-n.x,u=n.x*r.y-r.x*n.y,h=a*e.x+o*e.y+u,f=a*t.x+o*t.y+u,!(h!==0&&f!==0&&pk(h,f))&&(p=i*o-a*s,p!==0)))return v=Math.abs(p/2),m=s*u-o*l,y=m<0?(m-v)/p:(m+v)/p,m=a*l-i*u,b=m<0?(m-v)/p:(m+v)/p,{x:y,y:b}}x(IU,"intersectLine");function pk(e,t){return e*t>0}x(pk,"sameSign");var Y5t=IU,H5t=NU;function NU(e,t,r){var n=e.x,i=e.y,a=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(p){s=Math.min(s,p.x),o=Math.min(o,p.y)}):(s=Math.min(s,t.x),o=Math.min(o,t.y));for(var l=n-e.width/2-s,u=i-e.height/2-o,h=0;h<t.length;h++){var f=t[h],d=t[h<t.length-1?h+1:0],g=Y5t(e,r,{x:l+f.x,y:u+f.y},{x:l+d.x,y:u+d.y});g&&a.push(g)}return a.length?(a.length>1&&a.sort(function(p,v){var m=p.x-r.x,y=p.y-r.y,b=Math.sqrt(m*m+y*y),T=v.x-r.x,w=v.y-r.y,k=Math.sqrt(T*T+w*w);return b<k?-1:b===k?0:1}),a[0]):e}x(NU,"intersectPolygon");var q5t=x((e,t)=>{var r=e.x,n=e.y,i=t.x-r,a=t.y-n,s=e.width/2,o=e.height/2,l,u;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),l=a===0?0:o*i/a,u=o):(i<0&&(s=-s),l=s,u=i===0?0:s*a/i),{x:r+l,y:n+u}},"intersectRect"),X5t=q5t,Rr={node:U5t,circle:W5t,ellipse:LU,polygon:H5t,rect:X5t},Sn=x(async(e,t,r,n)=>{const i=pt();let a;const s=t.useHtmlLabels||dr(i.flowchart.htmlLabels);r?a=r:a="node default";const o=e.insert("g").attr("class",a).attr("id",t.domId||t.id),l=o.insert("g").attr("class","label").attr("style",t.labelStyle);let u;t.labelText===void 0?u="":u=typeof t.labelText=="string"?t.labelText:t.labelText[0];const h=l.node();let f;t.labelType==="markdown"?f=Pi(l,xr(cs(u),i),{useHtmlLabels:s,width:t.width||i.flowchart.wrappingWidth,classes:"markdown-node-label"},i):f=h.appendChild(ha(xr(cs(u),i),t.labelStyle,!1,n));let d=f.getBBox();const g=t.padding/2;if(dr(i.flowchart.htmlLabels)){const p=f.children[0],v=qt(f),m=p.getElementsByTagName("img");if(m){const y=u.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(b=>new Promise(T=>{function w(){if(b.style.display="flex",b.style.flexDirection="column",y){const k=i.fontSize?i.fontSize:window.getComputedStyle(document.body).fontSize,E=parseInt(k,10)*5+"px";b.style.minWidth=E,b.style.maxWidth=E}else b.style.width="100%";T(b)}x(w,"setupImage"),setTimeout(()=>{b.complete&&w()}),b.addEventListener("error",w),b.addEventListener("load",w)})))}d=p.getBoundingClientRect(),v.attr("width",d.width),v.attr("height",d.height)}return s?l.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"):l.attr("transform","translate(0, "+-d.height/2+")"),t.centerLabel&&l.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),l.insert("rect",":first-child"),{shapeSvg:o,bbox:d,halfPadding:g,label:l}},"labelHelper"),zr=x((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds");function Ya(e,t,r,n){return e.insert("polygon",":first-child").attr("points",n.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}x(Ya,"insertPolygonShape");var j5t=x(async(e,t)=>{t.useHtmlLabels||pt().flowchart.htmlLabels||(t.centerLabel=!0);const{shapeSvg:n,bbox:i,halfPadding:a}=await Sn(e,t,"node "+t.classes,!0);et.info("Classes = ",t.classes);const s=n.insert("rect",":first-child");return s.attr("rx",t.rx).attr("ry",t.ry).attr("x",-i.width/2-a).attr("y",-i.height/2-a).attr("width",i.width+t.padding).attr("height",i.height+t.padding),zr(t,s),t.intersect=function(o){return Rr.rect(t,o)},n},"note"),K5t=j5t,JN=x(e=>e?" "+e:"","formatClass"),Ji=x((e,t)=>`${t||"node default"}${JN(e.classes)} ${JN(e.class)}`,"getClassesFromNode"),t6=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t,void 0),!0),i=n.width+t.padding,a=n.height+t.padding,s=i+a,o=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}];et.info("Question main (Circle)");const l=Ya(r,s,s,o);return l.attr("style",t.style),zr(t,l),t.intersect=function(u){return et.warn("Intersect called"),Rr.polygon(t,o,u)},r},"question"),Z5t=x((e,t)=>{const r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),n=28,i=[{x:0,y:n/2},{x:n/2,y:0},{x:0,y:-n/2},{x:-n/2,y:0}];return r.insert("polygon",":first-child").attr("points",i.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),t.width=28,t.height=28,t.intersect=function(s){return Rr.circle(t,14,s)},r},"choice"),Q5t=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t,void 0),!0),i=4,a=n.height+t.padding,s=a/i,o=n.width+2*s+t.padding,l=[{x:s,y:0},{x:o-s,y:0},{x:o,y:-a/2},{x:o-s,y:-a},{x:s,y:-a},{x:0,y:-a/2}],u=Ya(r,o,a,l);return u.attr("style",t.style),zr(t,u),t.intersect=function(h){return Rr.polygon(t,l,h)},r},"hexagon"),J5t=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,void 0,!0),i=2,a=n.height+2*t.padding,s=a/i,o=n.width+2*s+t.padding,l=G5t(t.directions,n,t),u=Ya(r,o,a,l);return u.attr("style",t.style),zr(t,u),t.intersect=function(h){return Rr.polygon(t,l,h)},r},"block_arrow"),tLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t,void 0),!0),i=n.width+t.padding,a=n.height+t.padding,s=[{x:-a/2,y:0},{x:i,y:0},{x:i,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return Ya(r,i,a,s).attr("style",t.style),t.width=i+a,t.height=a,t.intersect=function(l){return Rr.polygon(t,s,l)},r},"rect_left_inv_arrow"),eLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t),!0),i=n.width+t.padding,a=n.height+t.padding,s=[{x:-2*a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:a/6,y:-a}],o=Ya(r,i,a,s);return o.attr("style",t.style),zr(t,o),t.intersect=function(l){return Rr.polygon(t,s,l)},r},"lean_right"),rLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t,void 0),!0),i=n.width+t.padding,a=n.height+t.padding,s=[{x:2*a/6,y:0},{x:i+a/6,y:0},{x:i-2*a/6,y:-a},{x:-a/6,y:-a}],o=Ya(r,i,a,s);return o.attr("style",t.style),zr(t,o),t.intersect=function(l){return Rr.polygon(t,s,l)},r},"lean_left"),nLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t,void 0),!0),i=n.width+t.padding,a=n.height+t.padding,s=[{x:-2*a/6,y:0},{x:i+2*a/6,y:0},{x:i-a/6,y:-a},{x:a/6,y:-a}],o=Ya(r,i,a,s);return o.attr("style",t.style),zr(t,o),t.intersect=function(l){return Rr.polygon(t,s,l)},r},"trapezoid"),iLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t,void 0),!0),i=n.width+t.padding,a=n.height+t.padding,s=[{x:a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:-2*a/6,y:-a}],o=Ya(r,i,a,s);return o.attr("style",t.style),zr(t,o),t.intersect=function(l){return Rr.polygon(t,s,l)},r},"inv_trapezoid"),aLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t,void 0),!0),i=n.width+t.padding,a=n.height+t.padding,s=[{x:0,y:0},{x:i+a/2,y:0},{x:i,y:-a/2},{x:i+a/2,y:-a},{x:0,y:-a}],o=Ya(r,i,a,s);return o.attr("style",t.style),zr(t,o),t.intersect=function(l){return Rr.polygon(t,s,l)},r},"rect_right_inv_arrow"),sLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t,void 0),!0),i=n.width+t.padding,a=i/2,s=a/(2.5+i/50),o=n.height+s+t.padding,l="M 0,"+s+" a "+a+","+s+" 0,0,0 "+i+" 0 a "+a+","+s+" 0,0,0 "+-i+" 0 l 0,"+o+" a "+a+","+s+" 0,0,0 "+i+" 0 l 0,"+-o,u=r.attr("label-offset-y",s).insert("path",":first-child").attr("style",t.style).attr("d",l).attr("transform","translate("+-i/2+","+-(o/2+s)+")");return zr(t,u),t.intersect=function(h){const f=Rr.rect(t,h),d=f.x-t.x;if(a!=0&&(Math.abs(d)<t.width/2||Math.abs(d)==t.width/2&&Math.abs(f.y-t.y)>t.height/2-s)){let g=s*s*(1-d*d/(a*a));g!=0&&(g=Math.sqrt(g)),g=s-g,h.y-t.y>0&&(g=-g),f.y+=g}return f},r},"cylinder"),oLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n,halfPadding:i}=await Sn(e,t,"node "+t.classes+" "+t.class,!0),a=r.insert("rect",":first-child"),s=t.positioned?t.width:n.width+t.padding,o=t.positioned?t.height:n.height+t.padding,l=t.positioned?-s/2:-n.width/2-i,u=t.positioned?-o/2:-n.height/2-i;if(a.attr("class","basic label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",l).attr("y",u).attr("width",s).attr("height",o),t.props){const h=new Set(Object.keys(t.props));t.props.borders&&(x2(a,t.props.borders,s,o),h.delete("borders")),h.forEach(f=>{et.warn(`Unknown node property ${f}`)})}return zr(t,a),t.intersect=function(h){return Rr.rect(t,h)},r},"rect"),lLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n,halfPadding:i}=await Sn(e,t,"node "+t.classes,!0),a=r.insert("rect",":first-child"),s=t.positioned?t.width:n.width+t.padding,o=t.positioned?t.height:n.height+t.padding,l=t.positioned?-s/2:-n.width/2-i,u=t.positioned?-o/2:-n.height/2-i;if(a.attr("class","basic cluster composite label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",l).attr("y",u).attr("width",s).attr("height",o),t.props){const h=new Set(Object.keys(t.props));t.props.borders&&(x2(a,t.props.borders,s,o),h.delete("borders")),h.forEach(f=>{et.warn(`Unknown node property ${f}`)})}return zr(t,a),t.intersect=function(h){return Rr.rect(t,h)},r},"composite"),cLt=x(async(e,t)=>{const{shapeSvg:r}=await Sn(e,t,"label",!0);et.trace("Classes = ",t.class);const n=r.insert("rect",":first-child"),i=0,a=0;if(n.attr("width",i).attr("height",a),r.attr("class","label edgeLabel"),t.props){const s=new Set(Object.keys(t.props));t.props.borders&&(x2(n,t.props.borders,i,a),s.delete("borders")),s.forEach(o=>{et.warn(`Unknown node property ${o}`)})}return zr(t,n),t.intersect=function(s){return Rr.rect(t,s)},r},"labelRect");function x2(e,t,r,n){const i=[],a=x(o=>{i.push(o,0)},"addBorder"),s=x(o=>{i.push(0,o)},"skipBorder");t.includes("t")?(et.debug("add top border"),a(r)):s(r),t.includes("r")?(et.debug("add right border"),a(n)):s(n),t.includes("b")?(et.debug("add bottom border"),a(r)):s(r),t.includes("l")?(et.debug("add left border"),a(n)):s(n),e.attr("stroke-dasharray",i.join(" "))}x(x2,"applyNodePropertyBorders");var uLt=x((e,t)=>{let r;t.classes?r="node "+t.classes:r="node default";const n=e.insert("g").attr("class",r).attr("id",t.domId||t.id),i=n.insert("rect",":first-child"),a=n.insert("line"),s=n.insert("g").attr("class","label"),o=t.labelText.flat?t.labelText.flat():t.labelText;let l="";typeof o=="object"?l=o[0]:l=o,et.info("Label text abc79",l,o,typeof o=="object");const u=s.node().appendChild(ha(l,t.labelStyle,!0,!0));let h={width:0,height:0};if(dr(pt().flowchart.htmlLabels)){const v=u.children[0],m=qt(u);h=v.getBoundingClientRect(),m.attr("width",h.width),m.attr("height",h.height)}et.info("Text 2",o);const f=o.slice(1,o.length);let d=u.getBBox();const g=s.node().appendChild(ha(f.join?f.join("<br/>"):f,t.labelStyle,!0,!0));if(dr(pt().flowchart.htmlLabels)){const v=g.children[0],m=qt(g);h=v.getBoundingClientRect(),m.attr("width",h.width),m.attr("height",h.height)}const p=t.padding/2;return qt(g).attr("transform","translate( "+(h.width>d.width?0:(d.width-h.width)/2)+", "+(d.height+p+5)+")"),qt(u).attr("transform","translate( "+(h.width<d.width?0:-(d.width-h.width)/2)+", 0)"),h=s.node().getBBox(),s.attr("transform","translate("+-h.width/2+", "+(-h.height/2-p+3)+")"),i.attr("class","outer title-state").attr("x",-h.width/2-p).attr("y",-h.height/2-p).attr("width",h.width+t.padding).attr("height",h.height+t.padding),a.attr("class","divider").attr("x1",-h.width/2-p).attr("x2",h.width/2+p).attr("y1",-h.height/2-p+d.height+p).attr("y2",-h.height/2-p+d.height+p),zr(t,i),t.intersect=function(v){return Rr.rect(t,v)},n},"rectWithTitle"),hLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t,void 0),!0),i=n.height+t.padding,a=n.width+i/4+t.padding,s=r.insert("rect",":first-child").attr("style",t.style).attr("rx",i/2).attr("ry",i/2).attr("x",-a/2).attr("y",-i/2).attr("width",a).attr("height",i);return zr(t,s),t.intersect=function(o){return Rr.rect(t,o)},r},"stadium"),fLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n,halfPadding:i}=await Sn(e,t,Ji(t,void 0),!0),a=r.insert("circle",":first-child");return a.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",n.width/2+i).attr("width",n.width+t.padding).attr("height",n.height+t.padding),et.info("Circle main"),zr(t,a),t.intersect=function(s){return et.info("Circle intersect",t,n.width/2+i,s),Rr.circle(t,n.width/2+i,s)},r},"circle"),dLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n,halfPadding:i}=await Sn(e,t,Ji(t,void 0),!0),a=5,s=r.insert("g",":first-child"),o=s.insert("circle"),l=s.insert("circle");return s.attr("class",t.class),o.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",n.width/2+i+a).attr("width",n.width+t.padding+a*2).attr("height",n.height+t.padding+a*2),l.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",n.width/2+i).attr("width",n.width+t.padding).attr("height",n.height+t.padding),et.info("DoubleCircle main"),zr(t,o),t.intersect=function(u){return et.info("DoubleCircle intersect",t,n.width/2+i+a,u),Rr.circle(t,n.width/2+i+a,u)},r},"doublecircle"),gLt=x(async(e,t)=>{const{shapeSvg:r,bbox:n}=await Sn(e,t,Ji(t,void 0),!0),i=n.width+t.padding,a=n.height+t.padding,s=[{x:0,y:0},{x:i,y:0},{x:i,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],o=Ya(r,i,a,s);return o.attr("style",t.style),zr(t,o),t.intersect=function(l){return Rr.polygon(t,s,l)},r},"subroutine"),pLt=x((e,t)=>{const r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),n=r.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),zr(t,n),t.intersect=function(i){return Rr.circle(t,7,i)},r},"start"),e6=x((e,t,r)=>{const n=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let i=70,a=10;r==="LR"&&(i=10,a=70);const s=n.append("rect").attr("x",-1*i/2).attr("y",-1*a/2).attr("width",i).attr("height",a).attr("class","fork-join");return zr(t,s),t.height=t.height+t.padding/2,t.width=t.width+t.padding/2,t.intersect=function(o){return Rr.rect(t,o)},n},"forkJoin"),vLt=x((e,t)=>{const r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),n=r.insert("circle",":first-child"),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),n.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),zr(t,i),t.intersect=function(a){return Rr.circle(t,7,a)},r},"end"),mLt=x((e,t)=>{var L;const r=t.padding/2,n=4,i=8;let a;t.classes?a="node "+t.classes:a="node default";const s=e.insert("g").attr("class",a).attr("id",t.domId||t.id),o=s.insert("rect",":first-child"),l=s.insert("line"),u=s.insert("line");let h=0,f=n;const d=s.insert("g").attr("class","label");let g=0;const p=(L=t.classData.annotations)==null?void 0:L[0],v=t.classData.annotations[0]?"«"+t.classData.annotations[0]+"»":"",m=d.node().appendChild(ha(v,t.labelStyle,!0,!0));let y=m.getBBox();if(dr(pt().flowchart.htmlLabels)){const A=m.children[0],R=qt(m);y=A.getBoundingClientRect(),R.attr("width",y.width),R.attr("height",y.height)}t.classData.annotations[0]&&(f+=y.height+n,h+=y.width);let b=t.classData.label;t.classData.type!==void 0&&t.classData.type!==""&&(pt().flowchart.htmlLabels?b+="&lt;"+t.classData.type+"&gt;":b+="<"+t.classData.type+">");const T=d.node().appendChild(ha(b,t.labelStyle,!0,!0));qt(T).attr("class","classTitle");let w=T.getBBox();if(dr(pt().flowchart.htmlLabels)){const A=T.children[0],R=qt(T);w=A.getBoundingClientRect(),R.attr("width",w.width),R.attr("height",w.height)}f+=w.height+n,w.width>h&&(h=w.width);const k=[];t.classData.members.forEach(A=>{const R=A.getDisplayDetails();let C=R.displayText;pt().flowchart.htmlLabels&&(C=C.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const D=d.node().appendChild(ha(C,R.cssStyle?R.cssStyle:t.labelStyle,!0,!0));let P=D.getBBox();if(dr(pt().flowchart.htmlLabels)){const _=D.children[0],I=qt(D);P=_.getBoundingClientRect(),I.attr("width",P.width),I.attr("height",P.height)}P.width>h&&(h=P.width),f+=P.height+n,k.push(D)}),f+=i;const S=[];if(t.classData.methods.forEach(A=>{const R=A.getDisplayDetails();let C=R.displayText;pt().flowchart.htmlLabels&&(C=C.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const D=d.node().appendChild(ha(C,R.cssStyle?R.cssStyle:t.labelStyle,!0,!0));let P=D.getBBox();if(dr(pt().flowchart.htmlLabels)){const _=D.children[0],I=qt(D);P=_.getBoundingClientRect(),I.attr("width",P.width),I.attr("height",P.height)}P.width>h&&(h=P.width),f+=P.height+n,S.push(D)}),f+=i,p){let A=(h-y.width)/2;qt(m).attr("transform","translate( "+(-1*h/2+A)+", "+-1*f/2+")"),g=y.height+n}let E=(h-w.width)/2;return qt(T).attr("transform","translate( "+(-1*h/2+E)+", "+(-1*f/2+g)+")"),g+=w.height+n,l.attr("class","divider").attr("x1",-h/2-r).attr("x2",h/2+r).attr("y1",-f/2-r+i+g).attr("y2",-f/2-r+i+g),g+=i,k.forEach(A=>{qt(A).attr("transform","translate( "+-h/2+", "+(-1*f/2+g+i/2)+")");const R=A==null?void 0:A.getBBox();g+=((R==null?void 0:R.height)??0)+n}),g+=i,u.attr("class","divider").attr("x1",-h/2-r).attr("x2",h/2+r).attr("y1",-f/2-r+i+g).attr("y2",-f/2-r+i+g),g+=i,S.forEach(A=>{qt(A).attr("transform","translate( "+-h/2+", "+(-1*f/2+g)+")");const R=A==null?void 0:A.getBBox();g+=((R==null?void 0:R.height)??0)+n}),o.attr("style",t.style).attr("class","outer title-state").attr("x",-h/2-r).attr("y",-(f/2)-r).attr("width",h+t.padding).attr("height",f+t.padding),zr(t,o),t.intersect=function(A){return Rr.rect(t,A)},s},"class_box"),r6={rhombus:t6,composite:lLt,question:t6,rect:oLt,labelRect:cLt,rectWithTitle:uLt,choice:Z5t,circle:fLt,doublecircle:dLt,stadium:hLt,hexagon:Q5t,block_arrow:J5t,rect_left_inv_arrow:tLt,lean_right:eLt,lean_left:rLt,trapezoid:nLt,inv_trapezoid:iLt,rect_right_inv_arrow:aLt,cylinder:sLt,start:pLt,end:vLt,note:K5t,subroutine:gLt,fork:e6,join:e6,class_box:mLt},Y1={},DU=x(async(e,t,r)=>{let n,i;if(t.link){let a;pt().securityLevel==="sandbox"?a="_top":t.linkTarget&&(a=t.linkTarget||"_blank"),n=e.insert("svg:a").attr("xlink:href",t.link).attr("target",a),i=await r6[t.shape](n,t,r)}else i=await r6[t.shape](e,t,r),n=i;return t.tooltip&&i.attr("title",t.tooltip),t.class&&i.attr("class","node default "+t.class),Y1[t.id]=n,t.haveCallback&&Y1[t.id].attr("class",Y1[t.id].attr("class")+" clickable"),n},"insertNode"),yLt=x(e=>{const t=Y1[e.id];et.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,n=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+n-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),n},"positionNode");function U_(e,t,r=!1){var d,g,p;const n=e;let i="default";(((d=n==null?void 0:n.classes)==null?void 0:d.length)||0)>0&&(i=((n==null?void 0:n.classes)??[]).join(" ")),i=i+" flowchart-label";let a=0,s="",o;switch(n.type){case"round":a=5,s="rect";break;case"composite":a=0,s="composite",o=0;break;case"square":s="rect";break;case"diamond":s="question";break;case"hexagon":s="hexagon";break;case"block_arrow":s="block_arrow";break;case"odd":s="rect_left_inv_arrow";break;case"lean_right":s="lean_right";break;case"lean_left":s="lean_left";break;case"trapezoid":s="trapezoid";break;case"inv_trapezoid":s="inv_trapezoid";break;case"rect_left_inv_arrow":s="rect_left_inv_arrow";break;case"circle":s="circle";break;case"ellipse":s="ellipse";break;case"stadium":s="stadium";break;case"subroutine":s="subroutine";break;case"cylinder":s="cylinder";break;case"group":s="rect";break;case"doublecircle":s="doublecircle";break;default:s="rect"}const l=gC((n==null?void 0:n.styles)??[]),u=n.label,h=n.size??{width:0,height:0,x:0,y:0};return{labelStyle:l.labelStyle,shape:s,labelText:u,rx:a,ry:a,class:i,style:l.style,id:n.id,directions:n.directions,width:h.width,height:h.height,x:h.x,y:h.y,positioned:r,intersect:void 0,type:n.type,padding:o??((p=(g=gr())==null?void 0:g.block)==null?void 0:p.padding)??0}}x(U_,"getNodeFromBlock");async function MU(e,t,r){const n=U_(t,r,!1);if(n.type==="group")return;const i=gr(),a=await DU(e,n,{config:i}),s=a.node().getBBox(),o=r.getBlock(n.id);o.size={width:s.width,height:s.height,x:0,y:0,node:a},r.setBlock(o),a.remove()}x(MU,"calculateBlockSize");async function OU(e,t,r){const n=U_(t,r,!0);if(r.getBlock(n.id).type!=="space"){const a=gr();await DU(e,n,{config:a}),t.intersect=n==null?void 0:n.intersect,yLt(n)}}x(OU,"insertBlockPositioned");async function b2(e,t,r,n){for(const i of t)await n(e,i,r),i.children&&await b2(e,i.children,r,n)}x(b2,"performOperations");async function PU(e,t,r){await b2(e,t,r,MU)}x(PU,"calculateBlockSizes");async function BU(e,t,r){await b2(e,t,r,OU)}x(BU,"insertBlocks");async function FU(e,t,r,n,i){const a=new Fi({multigraph:!0,compound:!0});a.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const s of r)s.size&&a.setNode(s.id,{width:s.size.width,height:s.size.height,intersect:s.intersect});for(const s of t)if(s.start&&s.end){const o=n.getBlock(s.start),l=n.getBlock(s.end);if(o!=null&&o.size&&(l!=null&&l.size)){const u=o.size,h=l.size,f=[{x:u.x,y:u.y},{x:u.x+(h.x-u.x)/2,y:u.y+(h.y-u.y)/2},{x:h.x,y:h.y}];z5t(e,{v:s.start,w:s.end,name:s.id},{...s,arrowTypeEnd:s.arrowTypeEnd,arrowTypeStart:s.arrowTypeStart,points:f,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",a,i),s.label&&(await P5t(e,{...s,label:s.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:s.arrowTypeEnd,arrowTypeStart:s.arrowTypeStart,points:f,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),B5t({...s,x:f[1].x,y:f[1].y},{originalPath:f}))}}}x(FU,"insertEdges");var xLt=x(function(e,t){return t.db.getClasses()},"getClasses"),bLt=x(async function(e,t,r,n){const{securityLevel:i,block:a}=gr(),s=n.db;let o;i==="sandbox"&&(o=qt("#i"+t));const l=qt(i==="sandbox"?o.nodes()[0].contentDocument.body:"body"),u=i==="sandbox"?l.select(`[id="${t}"]`):qt(`[id="${t}"]`);I5t(u,["point","circle","cross"],n.type,t);const f=s.getBlocks(),d=s.getBlocksFlat(),g=s.getEdges(),p=u.insert("g").attr("class","block");await PU(p,f,s);const v=CU(s);if(await BU(p,f,s),await FU(p,g,d,s,t),v){const m=v,y=Math.max(1,Math.round(.125*(m.width/m.height))),b=m.height+y+10,T=m.width+10,{useMaxWidth:w}=a;Oi(u,b,T,!!w),et.debug("Here Bounds",v,m),u.attr("viewBox",`${m.x-5} ${m.y-5} ${m.width+10} ${m.height+10}`)}},"draw"),TLt={draw:bLt,getClasses:xLt},wLt={parser:Q4t,db:m5t,renderer:TLt,styles:x5t};const ELt=Object.freeze(Object.defineProperty({__proto__:null,diagram:wLt},Symbol.toStringTag,{value:"Module"}));var H1={exports:{}},q1={exports:{}},X1={exports:{}},kLt=X1.exports,n6;function CLt(){return n6||(n6=1,function(e,t){(function(n,i){e.exports=i()})(kLt,function(){return function(r){var n={};function i(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return r[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=r,i.c=n,i.i=function(a){return a},i.d=function(a,s,o){i.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:o})},i.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(s,"a",s),s},i.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},i.p="",i(i.s=28)}([function(r,n,i){function a(){}a.QUALITY=1,a.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,a.DEFAULT_INCREMENTAL=!1,a.DEFAULT_ANIMATION_ON_LAYOUT=!0,a.DEFAULT_ANIMATION_DURING_LAYOUT=!1,a.DEFAULT_ANIMATION_PERIOD=50,a.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,a.DEFAULT_GRAPH_MARGIN=15,a.NODE_DIMENSIONS_INCLUDE_LABELS=!1,a.SIMPLE_NODE_SIZE=40,a.SIMPLE_NODE_HALF_SIZE=a.SIMPLE_NODE_SIZE/2,a.EMPTY_COMPOUND_NODE_SIZE=40,a.MIN_EDGE_LENGTH=1,a.WORLD_BOUNDARY=1e6,a.INITIAL_WORLD_BOUNDARY=a.WORLD_BOUNDARY/1e3,a.WORLD_CENTER_X=1200,a.WORLD_CENTER_Y=900,r.exports=a},function(r,n,i){var a=i(2),s=i(8),o=i(9);function l(h,f,d){a.call(this,d),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=d,this.bendpoints=[],this.source=h,this.target=f}l.prototype=Object.create(a.prototype);for(var u in a)l[u]=a[u];l.prototype.getSource=function(){return this.source},l.prototype.getTarget=function(){return this.target},l.prototype.isInterGraph=function(){return this.isInterGraph},l.prototype.getLength=function(){return this.length},l.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},l.prototype.getBendpoints=function(){return this.bendpoints},l.prototype.getLca=function(){return this.lca},l.prototype.getSourceInLca=function(){return this.sourceInLca},l.prototype.getTargetInLca=function(){return this.targetInLca},l.prototype.getOtherEnd=function(h){if(this.source===h)return this.target;if(this.target===h)return this.source;throw"Node is not incident with this edge"},l.prototype.getOtherEndInGraph=function(h,f){for(var d=this.getOtherEnd(h),g=f.getGraphManager().getRoot();;){if(d.getOwner()==f)return d;if(d.getOwner()==g)break;d=d.getOwner().getParent()}return null},l.prototype.updateLength=function(){var h=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),h),this.isOverlapingSourceAndTarget||(this.lengthX=h[0]-h[2],this.lengthY=h[1]-h[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},l.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=l},function(r,n,i){function a(s){this.vGraphObject=s}r.exports=a},function(r,n,i){var a=i(2),s=i(10),o=i(13),l=i(0),u=i(16),h=i(5);function f(g,p,v,m){v==null&&m==null&&(m=p),a.call(this,m),g.graphManager!=null&&(g=g.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=m,this.edges=[],this.graphManager=g,v!=null&&p!=null?this.rect=new o(p.x,p.y,v.width,v.height):this.rect=new o}f.prototype=Object.create(a.prototype);for(var d in a)f[d]=a[d];f.prototype.getEdges=function(){return this.edges},f.prototype.getChild=function(){return this.child},f.prototype.getOwner=function(){return this.owner},f.prototype.getWidth=function(){return this.rect.width},f.prototype.setWidth=function(g){this.rect.width=g},f.prototype.getHeight=function(){return this.rect.height},f.prototype.setHeight=function(g){this.rect.height=g},f.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},f.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},f.prototype.getCenter=function(){return new h(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},f.prototype.getLocation=function(){return new h(this.rect.x,this.rect.y)},f.prototype.getRect=function(){return this.rect},f.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},f.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},f.prototype.setRect=function(g,p){this.rect.x=g.x,this.rect.y=g.y,this.rect.width=p.width,this.rect.height=p.height},f.prototype.setCenter=function(g,p){this.rect.x=g-this.rect.width/2,this.rect.y=p-this.rect.height/2},f.prototype.setLocation=function(g,p){this.rect.x=g,this.rect.y=p},f.prototype.moveBy=function(g,p){this.rect.x+=g,this.rect.y+=p},f.prototype.getEdgeListToNode=function(g){var p=[],v=this;return v.edges.forEach(function(m){if(m.target==g){if(m.source!=v)throw"Incorrect edge source!";p.push(m)}}),p},f.prototype.getEdgesBetween=function(g){var p=[],v=this;return v.edges.forEach(function(m){if(!(m.source==v||m.target==v))throw"Incorrect edge source and/or target";(m.target==g||m.source==g)&&p.push(m)}),p},f.prototype.getNeighborsList=function(){var g=new Set,p=this;return p.edges.forEach(function(v){if(v.source==p)g.add(v.target);else{if(v.target!=p)throw"Incorrect incidency!";g.add(v.source)}}),g},f.prototype.withChildren=function(){var g=new Set,p,v;if(g.add(this),this.child!=null)for(var m=this.child.getNodes(),y=0;y<m.length;y++)p=m[y],v=p.withChildren(),v.forEach(function(b){g.add(b)});return g},f.prototype.getNoOfChildren=function(){var g=0,p;if(this.child==null)g=1;else for(var v=this.child.getNodes(),m=0;m<v.length;m++)p=v[m],g+=p.getNoOfChildren();return g==0&&(g=1),g},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},f.prototype.scatter=function(){var g,p,v=-l.INITIAL_WORLD_BOUNDARY,m=l.INITIAL_WORLD_BOUNDARY;g=l.WORLD_CENTER_X+u.nextDouble()*(m-v)+v;var y=-l.INITIAL_WORLD_BOUNDARY,b=l.INITIAL_WORLD_BOUNDARY;p=l.WORLD_CENTER_Y+u.nextDouble()*(b-y)+y,this.rect.x=g,this.rect.y=p},f.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var g=this.getChild();if(g.updateBounds(!0),this.rect.x=g.getLeft(),this.rect.y=g.getTop(),this.setWidth(g.getRight()-g.getLeft()),this.setHeight(g.getBottom()-g.getTop()),l.NODE_DIMENSIONS_INCLUDE_LABELS){var p=g.getRight()-g.getLeft(),v=g.getBottom()-g.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(p+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>p?(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(p+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(v+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>v?(this.rect.y-=(this.labelHeight-v)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(v+this.labelHeight))}}},f.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},f.prototype.transform=function(g){var p=this.rect.x;p>l.WORLD_BOUNDARY?p=l.WORLD_BOUNDARY:p<-l.WORLD_BOUNDARY&&(p=-l.WORLD_BOUNDARY);var v=this.rect.y;v>l.WORLD_BOUNDARY?v=l.WORLD_BOUNDARY:v<-l.WORLD_BOUNDARY&&(v=-l.WORLD_BOUNDARY);var m=new h(p,v),y=g.inverseTransformPoint(m);this.setLocation(y.x,y.y)},f.prototype.getLeft=function(){return this.rect.x},f.prototype.getRight=function(){return this.rect.x+this.rect.width},f.prototype.getTop=function(){return this.rect.y},f.prototype.getBottom=function(){return this.rect.y+this.rect.height},f.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=f},function(r,n,i){var a=i(0);function s(){}for(var o in a)s[o]=a[o];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=s.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=s},function(r,n,i){function a(s,o){s==null&&o==null?(this.x=0,this.y=0):(this.x=s,this.y=o)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(s){this.x=s},a.prototype.setY=function(s){this.y=s},a.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},a.prototype.getCopy=function(){return new a(this.x,this.y)},a.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},r.exports=a},function(r,n,i){var a=i(2),s=i(10),o=i(0),l=i(7),u=i(3),h=i(1),f=i(13),d=i(12),g=i(11);function p(m,y,b){a.call(this,b),this.estimatedSize=s.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=m,y!=null&&y instanceof l?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}p.prototype=Object.create(a.prototype);for(var v in a)p[v]=a[v];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(m,y,b){if(y==null&&b==null){var T=m;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(T)>-1)throw"Node already in graph!";return T.owner=this,this.getNodes().push(T),T}else{var w=m;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(b)>-1))throw"Source or target not in graph!";if(!(y.owner==b.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner!=b.owner?null:(w.source=y,w.target=b,w.isInterGraph=!1,this.getEdges().push(w),y.edges.push(w),b!=y&&b.edges.push(w),w)}},p.prototype.remove=function(m){var y=m;if(m instanceof u){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var b=y.edges.slice(),T,w=b.length,k=0;k<w;k++)T=b[k],T.isInterGraph?this.graphManager.remove(T):T.source.owner.remove(T);var S=this.nodes.indexOf(y);if(S==-1)throw"Node not in owner node list!";this.nodes.splice(S,1)}else if(m instanceof h){var T=m;if(T==null)throw"Edge is null!";if(!(T.source!=null&&T.target!=null))throw"Source and/or target is null!";if(!(T.source.owner!=null&&T.target.owner!=null&&T.source.owner==this&&T.target.owner==this))throw"Source and/or target owner is invalid!";var E=T.source.edges.indexOf(T),L=T.target.edges.indexOf(T);if(!(E>-1&&L>-1))throw"Source and/or target doesn't know this edge!";T.source.edges.splice(E,1),T.target!=T.source&&T.target.edges.splice(L,1);var S=T.source.owner.getEdges().indexOf(T);if(S==-1)throw"Not in owner's edge list!";T.source.owner.getEdges().splice(S,1)}},p.prototype.updateLeftTop=function(){for(var m=s.MAX_VALUE,y=s.MAX_VALUE,b,T,w,k=this.getNodes(),S=k.length,E=0;E<S;E++){var L=k[E];b=L.getTop(),T=L.getLeft(),m>b&&(m=b),y>T&&(y=T)}return m==s.MAX_VALUE?null:(k[0].getParent().paddingLeft!=null?w=k[0].getParent().paddingLeft:w=this.margin,this.left=y-w,this.top=m-w,new d(this.left,this.top))},p.prototype.updateBounds=function(m){for(var y=s.MAX_VALUE,b=-s.MAX_VALUE,T=s.MAX_VALUE,w=-s.MAX_VALUE,k,S,E,L,A,R=this.nodes,C=R.length,D=0;D<C;D++){var P=R[D];m&&P.child!=null&&P.updateBounds(),k=P.getLeft(),S=P.getRight(),E=P.getTop(),L=P.getBottom(),y>k&&(y=k),b<S&&(b=S),T>E&&(T=E),w<L&&(w=L)}var _=new f(y,T,b-y,w-T);y==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),R[0].getParent().paddingLeft!=null?A=R[0].getParent().paddingLeft:A=this.margin,this.left=_.x-A,this.right=_.x+_.width+A,this.top=_.y-A,this.bottom=_.y+_.height+A},p.calculateBounds=function(m){for(var y=s.MAX_VALUE,b=-s.MAX_VALUE,T=s.MAX_VALUE,w=-s.MAX_VALUE,k,S,E,L,A=m.length,R=0;R<A;R++){var C=m[R];k=C.getLeft(),S=C.getRight(),E=C.getTop(),L=C.getBottom(),y>k&&(y=k),b<S&&(b=S),T>E&&(T=E),w<L&&(w=L)}var D=new f(y,T,b-y,w-T);return D},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var m=0,y=this.nodes,b=y.length,T=0;T<b;T++){var w=y[T];m+=w.calcEstimatedSize()}return m==0?this.estimatedSize=o.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=m/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var m=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new g,b=new Set,T=this.nodes[0],w,k,S=T.withChildren();for(S.forEach(function(D){y.push(D),b.add(D)});y.length!==0;){T=y.shift(),w=T.getEdges();for(var E=w.length,L=0;L<E;L++){var A=w[L];if(k=A.getOtherEndInGraph(T,this),k!=null&&!b.has(k)){var R=k.withChildren();R.forEach(function(D){y.push(D),b.add(D)})}}}if(this.isConnected=!1,b.size>=this.nodes.length){var C=0;b.forEach(function(D){D.owner==m&&C++}),C==this.nodes.length&&(this.isConnected=!0)}},r.exports=p},function(r,n,i){var a,s=i(1);function o(l){a=i(6),this.layout=l,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var l=this.layout.newGraph(),u=this.layout.newNode(null),h=this.add(l,u);return this.setRootGraph(h),this.rootGraph},o.prototype.add=function(l,u,h,f,d){if(h==null&&f==null&&d==null){if(l==null)throw"Graph is null!";if(u==null)throw"Parent node is null!";if(this.graphs.indexOf(l)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(l),l.parent!=null)throw"Already has a parent!";if(u.child!=null)throw"Already has a child!";return l.parent=u,u.child=l,l}else{d=h,f=u,h=l;var g=f.getOwner(),p=d.getOwner();if(!(g!=null&&g.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(p!=null&&p.getGraphManager()==this))throw"Target not in this graph mgr!";if(g==p)return h.isInterGraph=!1,g.add(h,f,d);if(h.isInterGraph=!0,h.source=f,h.target=d,this.edges.indexOf(h)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(h),!(h.source!=null&&h.target!=null))throw"Edge source and/or target is null!";if(!(h.source.edges.indexOf(h)==-1&&h.target.edges.indexOf(h)==-1))throw"Edge already in source and/or target incidency list!";return h.source.edges.push(h),h.target.edges.push(h),h}},o.prototype.remove=function(l){if(l instanceof a){var u=l;if(u.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(u==this.rootGraph||u.parent!=null&&u.parent.graphManager==this))throw"Invalid parent node!";var h=[];h=h.concat(u.getEdges());for(var f,d=h.length,g=0;g<d;g++)f=h[g],u.remove(f);var p=[];p=p.concat(u.getNodes());var v;d=p.length;for(var g=0;g<d;g++)v=p[g],u.remove(v);u==this.rootGraph&&this.setRootGraph(null);var m=this.graphs.indexOf(u);this.graphs.splice(m,1),u.parent=null}else if(l instanceof s){if(f=l,f==null)throw"Edge is null!";if(!f.isInterGraph)throw"Not an inter-graph edge!";if(!(f.source!=null&&f.target!=null))throw"Source and/or target is null!";if(!(f.source.edges.indexOf(f)!=-1&&f.target.edges.indexOf(f)!=-1))throw"Source and/or target doesn't know this edge!";var m=f.source.edges.indexOf(f);if(f.source.edges.splice(m,1),m=f.target.edges.indexOf(f),f.target.edges.splice(m,1),!(f.source.owner!=null&&f.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(f.source.owner.getGraphManager().edges.indexOf(f)==-1)throw"Not in owner graph manager's edge list!";var m=f.source.owner.getGraphManager().edges.indexOf(f);f.source.owner.getGraphManager().edges.splice(m,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var l=[],u=this.getGraphs(),h=u.length,f=0;f<h;f++)l=l.concat(u[f].getNodes());this.allNodes=l}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){var l=[],u=this.getGraphs();u.length;for(var h=0;h<u.length;h++)l=l.concat(u[h].getEdges());l=l.concat(this.edges),this.allEdges=l}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(l){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=l},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(l){if(l.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=l,l.parent==null&&(l.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(l,u){if(!(l!=null&&u!=null))throw"assert failed";if(l==u)return!0;var h=l.getOwner(),f;do{if(f=h.getParent(),f==null)break;if(f==u)return!0;if(h=f.getOwner(),h==null)break}while(!0);h=u.getOwner();do{if(f=h.getParent(),f==null)break;if(f==l)return!0;if(h=f.getOwner(),h==null)break}while(!0);return!1},o.prototype.calcLowestCommonAncestors=function(){for(var l,u,h,f,d,g=this.getAllEdges(),p=g.length,v=0;v<p;v++){if(l=g[v],u=l.source,h=l.target,l.lca=null,l.sourceInLca=u,l.targetInLca=h,u==h){l.lca=u.getOwner();continue}for(f=u.getOwner();l.lca==null;){for(l.targetInLca=h,d=h.getOwner();l.lca==null;){if(d==f){l.lca=d;break}if(d==this.rootGraph)break;if(l.lca!=null)throw"assert failed";l.targetInLca=d.getParent(),d=l.targetInLca.getOwner()}if(f==this.rootGraph)break;l.lca==null&&(l.sourceInLca=f.getParent(),f=l.sourceInLca.getOwner())}if(l.lca==null)throw"assert failed"}},o.prototype.calcLowestCommonAncestor=function(l,u){if(l==u)return l.getOwner();var h=l.getOwner();do{if(h==null)break;var f=u.getOwner();do{if(f==null)break;if(f==h)return f;f=f.getParent().getOwner()}while(!0);h=h.getParent().getOwner()}while(!0);return h},o.prototype.calcInclusionTreeDepths=function(l,u){l==null&&u==null&&(l=this.rootGraph,u=1);for(var h,f=l.getNodes(),d=f.length,g=0;g<d;g++)h=f[g],h.inclusionTreeDepth=u,h.child!=null&&this.calcInclusionTreeDepths(h.child,u+1)},o.prototype.includesInvalidEdge=function(){for(var l,u=[],h=this.edges.length,f=0;f<h;f++)l=this.edges[f],this.isOneAncestorOfOther(l.source,l.target)&&u.push(l);for(var f=0;f<u.length;f++)this.remove(u[f]);return!1},r.exports=o},function(r,n,i){var a=i(12);function s(){}s.calcSeparationAmount=function(o,l,u,h){if(!o.intersects(l))throw"assert failed";var f=new Array(2);this.decideDirectionsForOverlappingNodes(o,l,f),u[0]=Math.min(o.getRight(),l.getRight())-Math.max(o.x,l.x),u[1]=Math.min(o.getBottom(),l.getBottom())-Math.max(o.y,l.y),o.getX()<=l.getX()&&o.getRight()>=l.getRight()?u[0]+=Math.min(l.getX()-o.getX(),o.getRight()-l.getRight()):l.getX()<=o.getX()&&l.getRight()>=o.getRight()&&(u[0]+=Math.min(o.getX()-l.getX(),l.getRight()-o.getRight())),o.getY()<=l.getY()&&o.getBottom()>=l.getBottom()?u[1]+=Math.min(l.getY()-o.getY(),o.getBottom()-l.getBottom()):l.getY()<=o.getY()&&l.getBottom()>=o.getBottom()&&(u[1]+=Math.min(o.getY()-l.getY(),l.getBottom()-o.getBottom()));var d=Math.abs((l.getCenterY()-o.getCenterY())/(l.getCenterX()-o.getCenterX()));l.getCenterY()===o.getCenterY()&&l.getCenterX()===o.getCenterX()&&(d=1);var g=d*u[0],p=u[1]/d;u[0]<p?p=u[0]:g=u[1],u[0]=-1*f[0]*(p/2+h),u[1]=-1*f[1]*(g/2+h)},s.decideDirectionsForOverlappingNodes=function(o,l,u){o.getCenterX()<l.getCenterX()?u[0]=-1:u[0]=1,o.getCenterY()<l.getCenterY()?u[1]=-1:u[1]=1},s.getIntersection2=function(o,l,u){var h=o.getCenterX(),f=o.getCenterY(),d=l.getCenterX(),g=l.getCenterY();if(o.intersects(l))return u[0]=h,u[1]=f,u[2]=d,u[3]=g,!0;var p=o.getX(),v=o.getY(),m=o.getRight(),y=o.getX(),b=o.getBottom(),T=o.getRight(),w=o.getWidthHalf(),k=o.getHeightHalf(),S=l.getX(),E=l.getY(),L=l.getRight(),A=l.getX(),R=l.getBottom(),C=l.getRight(),D=l.getWidthHalf(),P=l.getHeightHalf(),_=!1,I=!1;if(h===d){if(f>g)return u[0]=h,u[1]=v,u[2]=d,u[3]=R,!1;if(f<g)return u[0]=h,u[1]=b,u[2]=d,u[3]=E,!1}else if(f===g){if(h>d)return u[0]=p,u[1]=f,u[2]=L,u[3]=g,!1;if(h<d)return u[0]=m,u[1]=f,u[2]=S,u[3]=g,!1}else{var M=o.height/o.width,O=l.height/l.width,N=(g-f)/(d-h),B=void 0,z=void 0,F=void 0,V=void 0,G=void 0,Y=void 0;if(-M===N?h>d?(u[0]=y,u[1]=b,_=!0):(u[0]=m,u[1]=v,_=!0):M===N&&(h>d?(u[0]=p,u[1]=v,_=!0):(u[0]=T,u[1]=b,_=!0)),-O===N?d>h?(u[2]=A,u[3]=R,I=!0):(u[2]=L,u[3]=E,I=!0):O===N&&(d>h?(u[2]=S,u[3]=E,I=!0):(u[2]=C,u[3]=R,I=!0)),_&&I)return!1;if(h>d?f>g?(B=this.getCardinalDirection(M,N,4),z=this.getCardinalDirection(O,N,2)):(B=this.getCardinalDirection(-M,N,3),z=this.getCardinalDirection(-O,N,1)):f>g?(B=this.getCardinalDirection(-M,N,1),z=this.getCardinalDirection(-O,N,3)):(B=this.getCardinalDirection(M,N,2),z=this.getCardinalDirection(O,N,4)),!_)switch(B){case 1:V=v,F=h+-k/N,u[0]=F,u[1]=V;break;case 2:F=T,V=f+w*N,u[0]=F,u[1]=V;break;case 3:V=b,F=h+k/N,u[0]=F,u[1]=V;break;case 4:F=y,V=f+-w*N,u[0]=F,u[1]=V;break}if(!I)switch(z){case 1:Y=E,G=d+-P/N,u[2]=G,u[3]=Y;break;case 2:G=C,Y=g+D*N,u[2]=G,u[3]=Y;break;case 3:Y=R,G=d+P/N,u[2]=G,u[3]=Y;break;case 4:G=A,Y=g+-D*N,u[2]=G,u[3]=Y;break}}return!1},s.getCardinalDirection=function(o,l,u){return o>l?u:1+u%4},s.getIntersection=function(o,l,u,h){if(h==null)return this.getIntersection2(o,l,u);var f=o.x,d=o.y,g=l.x,p=l.y,v=u.x,m=u.y,y=h.x,b=h.y,T=void 0,w=void 0,k=void 0,S=void 0,E=void 0,L=void 0,A=void 0,R=void 0,C=void 0;return k=p-d,E=f-g,A=g*d-f*p,S=b-m,L=v-y,R=y*m-v*b,C=k*L-S*E,C===0?null:(T=(E*R-L*A)/C,w=(S*A-k*R)/C,new a(T,w))},s.angleOfVector=function(o,l,u,h){var f=void 0;return o!==u?(f=Math.atan((h-l)/(u-o)),u<o?f+=Math.PI:h<l&&(f+=this.TWO_PI)):h<l?f=this.ONE_AND_HALF_PI:f=this.HALF_PI,f},s.doIntersect=function(o,l,u,h){var f=o.x,d=o.y,g=l.x,p=l.y,v=u.x,m=u.y,y=h.x,b=h.y,T=(g-f)*(b-m)-(y-v)*(p-d);if(T===0)return!1;var w=((b-m)*(y-f)+(v-y)*(b-d))/T,k=((d-p)*(y-f)+(g-f)*(b-d))/T;return 0<w&&w<1&&0<k&&k<1},s.findCircleLineIntersections=function(o,l,u,h,f,d,g){var p=(u-o)*(u-o)+(h-l)*(h-l),v=2*((o-f)*(u-o)+(l-d)*(h-l)),m=(o-f)*(o-f)+(l-d)*(l-d)-g*g,y=v*v-4*p*m;if(y>=0){var b=(-v+Math.sqrt(v*v-4*p*m))/(2*p),T=(-v-Math.sqrt(v*v-4*p*m))/(2*p),w=null;return b>=0&&b<=1?[b]:T>=0&&T<=1?[T]:w}else return null},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,r.exports=s},function(r,n,i){function a(){}a.sign=function(s){return s>0?1:s<0?-1:0},a.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},a.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},r.exports=a},function(r,n,i){function a(){}a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,r.exports=a},function(r,n,i){var a=function(){function f(d,g){for(var p=0;p<g.length;p++){var v=g[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}return function(d,g,p){return g&&f(d.prototype,g),p&&f(d,p),d}}();function s(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(d){return{value:d,next:null,prev:null}},l=function(d,g,p,v){return d!==null?d.next=g:v.head=g,p!==null?p.prev=g:v.tail=g,g.prev=d,g.next=p,v.length++,g},u=function(d,g){var p=d.prev,v=d.next;return p!==null?p.next=v:g.head=v,v!==null?v.prev=p:g.tail=p,d.prev=d.next=null,g.length--,d},h=function(){function f(d){var g=this;s(this,f),this.length=0,this.head=null,this.tail=null,d!=null&&d.forEach(function(p){return g.push(p)})}return a(f,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(g,p){return l(p.prev,o(g),p,this)}},{key:"insertAfter",value:function(g,p){return l(p,o(g),p.next,this)}},{key:"insertNodeBefore",value:function(g,p){return l(p.prev,g,p,this)}},{key:"insertNodeAfter",value:function(g,p){return l(p,g,p.next,this)}},{key:"push",value:function(g){return l(this.tail,o(g),null,this)}},{key:"unshift",value:function(g){return l(null,o(g),this.head,this)}},{key:"remove",value:function(g){return u(g,this)}},{key:"pop",value:function(){return u(this.tail,this).value}},{key:"popNode",value:function(){return u(this.tail,this)}},{key:"shift",value:function(){return u(this.head,this).value}},{key:"shiftNode",value:function(){return u(this.head,this)}},{key:"get_object_at",value:function(g){if(g<=this.length()){for(var p=1,v=this.head;p<g;)v=v.next,p++;return v.value}}},{key:"set_object_at",value:function(g,p){if(g<=this.length()){for(var v=1,m=this.head;v<g;)m=m.next,v++;m.value=p}}}]),f}();r.exports=h},function(r,n,i){function a(s,o,l){this.x=null,this.y=null,s==null&&o==null&&l==null?(this.x=0,this.y=0):typeof s=="number"&&typeof o=="number"&&l==null?(this.x=s,this.y=o):s.constructor.name=="Point"&&o==null&&l==null&&(l=s,this.x=l.x,this.y=l.y)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getLocation=function(){return new a(this.x,this.y)},a.prototype.setLocation=function(s,o,l){s.constructor.name=="Point"&&o==null&&l==null?(l=s,this.setLocation(l.x,l.y)):typeof s=="number"&&typeof o=="number"&&l==null&&(parseInt(s)==s&&parseInt(o)==o?this.move(s,o):(this.x=Math.floor(s+.5),this.y=Math.floor(o+.5)))},a.prototype.move=function(s,o){this.x=s,this.y=o},a.prototype.translate=function(s,o){this.x+=s,this.y+=o},a.prototype.equals=function(s){if(s.constructor.name=="Point"){var o=s;return this.x==o.x&&this.y==o.y}return this==s},a.prototype.toString=function(){return new a().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=a},function(r,n,i){function a(s,o,l,u){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&o!=null&&l!=null&&u!=null&&(this.x=s,this.y=o,this.width=l,this.height=u)}a.prototype.getX=function(){return this.x},a.prototype.setX=function(s){this.x=s},a.prototype.getY=function(){return this.y},a.prototype.setY=function(s){this.y=s},a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.intersects=function(s){return!(this.getRight()<s.x||this.getBottom()<s.y||s.getRight()<this.x||s.getBottom()<this.y)},a.prototype.getCenterX=function(){return this.x+this.width/2},a.prototype.getMinX=function(){return this.getX()},a.prototype.getMaxX=function(){return this.getX()+this.width},a.prototype.getCenterY=function(){return this.y+this.height/2},a.prototype.getMinY=function(){return this.getY()},a.prototype.getMaxY=function(){return this.getY()+this.height},a.prototype.getWidthHalf=function(){return this.width/2},a.prototype.getHeightHalf=function(){return this.height/2},r.exports=a},function(r,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function s(){}s.lastID=0,s.createID=function(o){return s.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=s.getString(),s.lastID++),o.uniqueID)},s.getString=function(o){return o==null&&(o=s.lastID),"Object#"+o},s.isPrimitive=function(o){var l=typeof o>"u"?"undefined":a(o);return o==null||l!="object"&&l!="function"},r.exports=s},function(r,n,i){function a(v){if(Array.isArray(v)){for(var m=0,y=Array(v.length);m<v.length;m++)y[m]=v[m];return y}else return Array.from(v)}var s=i(0),o=i(7),l=i(3),u=i(1),h=i(6),f=i(5),d=i(17),g=i(29);function p(v){g.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,v!=null&&(this.isRemoteUse=v)}p.RANDOM_SEED=1,p.prototype=Object.create(g.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var v=new o(this);return this.graphManager=v,v},p.prototype.newGraph=function(v){return new h(null,this.graphManager,v)},p.prototype.newNode=function(v){return new l(this.graphManager,v)},p.prototype.newEdge=function(v){return new u(null,null,v)},p.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var v;return this.checkLayoutSuccess()?v=!1:v=this.layout(),s.ANIMATE==="during"?!1:(v&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,v)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var v=this.graphManager.getAllEdges(),m=0;m<v.length;m++)v[m];for(var y=this.graphManager.getRoot().getNodes(),m=0;m<y.length;m++)y[m];this.update(this.graphManager.getRoot())}},p.prototype.update=function(v){if(v==null)this.update2();else if(v instanceof l){var m=v;if(m.getChild()!=null)for(var y=m.getChild().getNodes(),b=0;b<y.length;b++)update(y[b]);if(m.vGraphObject!=null){var T=m.vGraphObject;T.update(m)}}else if(v instanceof u){var w=v;if(w.vGraphObject!=null){var k=w.vGraphObject;k.update(w)}}else if(v instanceof h){var S=v;if(S.vGraphObject!=null){var E=S.vGraphObject;E.update(S)}}},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(v){if(v==null)this.transform(new f(0,0));else{var m=new d,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){m.setWorldOrgX(v.x),m.setWorldOrgY(v.y),m.setDeviceOrgX(y.x),m.setDeviceOrgY(y.y);for(var b=this.getAllNodes(),T,w=0;w<b.length;w++)T=b[w],T.transform(m)}}},p.prototype.positionNodesRandomly=function(v){if(v==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var m,y,b=v.getNodes(),T=0;T<b.length;T++)m=b[T],y=m.getChild(),y==null||y.getNodes().length==0?m.scatter():(this.positionNodesRandomly(y),m.updateBounds())},p.prototype.getFlatForest=function(){for(var v=[],m=!0,y=this.graphManager.getRoot().getNodes(),b=!0,T=0;T<y.length;T++)y[T].getChild()!=null&&(b=!1);if(!b)return v;var w=new Set,k=[],S=new Map,E=[];for(E=E.concat(y);E.length>0&&m;){for(k.push(E[0]);k.length>0&&m;){var L=k[0];k.splice(0,1),w.add(L);for(var A=L.getEdges(),T=0;T<A.length;T++){var R=A[T].getOtherEnd(L);if(S.get(L)!=R)if(!w.has(R))k.push(R),S.set(R,L);else{m=!1;break}}}if(!m)v=[];else{var C=[].concat(a(w));v.push(C);for(var T=0;T<C.length;T++){var D=C[T],P=E.indexOf(D);P>-1&&E.splice(P,1)}w=new Set,S=new Map}}return v},p.prototype.createDummyNodesForBendpoints=function(v){for(var m=[],y=v.source,b=this.graphManager.calcLowestCommonAncestor(v.source,v.target),T=0;T<v.bendpoints.length;T++){var w=this.newNode(null);w.setRect(new Point(0,0),new Dimension(1,1)),b.add(w);var k=this.newEdge(null);this.graphManager.add(k,y,w),m.add(w),y=w}var k=this.newEdge(null);return this.graphManager.add(k,y,v.target),this.edgeToDummyNodes.set(v,m),v.isInterGraph()?this.graphManager.remove(v):b.remove(v),m},p.prototype.createBendpointsFromDummyNodes=function(){var v=[];v=v.concat(this.graphManager.getAllEdges()),v=[].concat(a(this.edgeToDummyNodes.keys())).concat(v);for(var m=0;m<v.length;m++){var y=v[m];if(y.bendpoints.length>0){for(var b=this.edgeToDummyNodes.get(y),T=0;T<b.length;T++){var w=b[T],k=new f(w.getCenterX(),w.getCenterY()),S=y.bendpoints.get(T);S.x=k.x,S.y=k.y,w.getOwner().remove(w)}this.graphManager.add(y,y.source,y.target)}}},p.transform=function(v,m,y,b){if(y!=null&&b!=null){var T=m;if(v<=50){var w=m/y;T-=(m-w)/50*(50-v)}else{var k=m*b;T+=(k-m)/50*(v-50)}return T}else{var S,E;return v<=50?(S=9*m/500,E=m/10):(S=9*m/50,E=-8*m),S*v+E}},p.findCenterOfTree=function(v){var m=[];m=m.concat(v);var y=[],b=new Map,T=!1,w=null;(m.length==1||m.length==2)&&(T=!0,w=m[0]);for(var k=0;k<m.length;k++){var S=m[k],E=S.getNeighborsList().size;b.set(S,S.getNeighborsList().size),E==1&&y.push(S)}var L=[];for(L=L.concat(y);!T;){var A=[];A=A.concat(L),L=[];for(var k=0;k<m.length;k++){var S=m[k],R=m.indexOf(S);R>=0&&m.splice(R,1);var C=S.getNeighborsList();C.forEach(function(_){if(y.indexOf(_)<0){var I=b.get(_),M=I-1;M==1&&L.push(_),b.set(_,M)}})}y=y.concat(L),(m.length==1||m.length==2)&&(T=!0,w=m[0])}return w},p.prototype.setGraphManager=function(v){this.graphManager=v},r.exports=p},function(r,n,i){function a(){}a.seed=1,a.x=0,a.nextDouble=function(){return a.x=Math.sin(a.seed++)*1e4,a.x-Math.floor(a.x)},r.exports=a},function(r,n,i){var a=i(5);function s(o,l){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(o){this.lworldExtX=o},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(o){this.lworldExtY=o},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},s.prototype.transformX=function(o){var l=0,u=this.lworldExtX;return u!=0&&(l=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/u),l},s.prototype.transformY=function(o){var l=0,u=this.lworldExtY;return u!=0&&(l=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/u),l},s.prototype.inverseTransformX=function(o){var l=0,u=this.ldeviceExtX;return u!=0&&(l=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/u),l},s.prototype.inverseTransformY=function(o){var l=0,u=this.ldeviceExtY;return u!=0&&(l=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/u),l},s.prototype.inverseTransformPoint=function(o){var l=new a(this.inverseTransformX(o.x),this.inverseTransformY(o.y));return l},r.exports=s},function(r,n,i){function a(g){if(Array.isArray(g)){for(var p=0,v=Array(g.length);p<g.length;p++)v[p]=g[p];return v}else return Array.from(g)}var s=i(15),o=i(4),l=i(0),u=i(8),h=i(9);function f(){s.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}f.prototype=Object.create(s.prototype);for(var d in s)f[d]=s[d];f.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},f.prototype.calcIdealEdgeLengths=function(){for(var g,p,v,m,y,b,T,w=this.getGraphManager().getAllEdges(),k=0;k<w.length;k++)g=w[k],p=g.idealLength,g.isInterGraph&&(m=g.getSource(),y=g.getTarget(),b=g.getSourceInLca().getEstimatedSize(),T=g.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(g.idealLength+=b+T-2*l.SIMPLE_NODE_SIZE),v=g.getLca().getInclusionTreeDepth(),g.idealLength+=p*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(m.getInclusionTreeDepth()+y.getInclusionTreeDepth()-2*v))},f.prototype.initSpringEmbedder=function(){var g=this.getAllNodes().length;this.incremental?(g>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(g-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(g>o.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(o.COOLING_ADAPTATION_FACTOR,1-(g-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},f.prototype.calcSpringForces=function(){for(var g=this.getAllEdges(),p,v=0;v<g.length;v++)p=g[v],this.calcSpringForce(p,p.idealLength)},f.prototype.calcRepulsionForces=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v,m,y,b,T=this.getAllNodes(),w;if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&g&&this.updateGrid(),w=new Set,v=0;v<T.length;v++)y=T[v],this.calculateRepulsionForceOfANode(y,w,g,p),w.add(y);else for(v=0;v<T.length;v++)for(y=T[v],m=v+1;m<T.length;m++)b=T[m],y.getOwner()==b.getOwner()&&this.calcRepulsionForce(y,b)},f.prototype.calcGravitationalForces=function(){for(var g,p=this.getAllNodesToApplyGravitation(),v=0;v<p.length;v++)g=p[v],this.calcGravitationalForce(g)},f.prototype.moveNodes=function(){for(var g=this.getAllNodes(),p,v=0;v<g.length;v++)p=g[v],p.move()},f.prototype.calcSpringForce=function(g,p){var v=g.getSource(),m=g.getTarget(),y,b,T,w;if(this.uniformLeafNodeSizes&&v.getChild()==null&&m.getChild()==null)g.updateLengthSimple();else if(g.updateLength(),g.isOverlapingSourceAndTarget)return;y=g.getLength(),y!=0&&(b=g.edgeElasticity*(y-p),T=b*(g.lengthX/y),w=b*(g.lengthY/y),v.springForceX+=T,v.springForceY+=w,m.springForceX-=T,m.springForceY-=w)},f.prototype.calcRepulsionForce=function(g,p){var v=g.getRect(),m=p.getRect(),y=new Array(2),b=new Array(4),T,w,k,S,E,L,A;if(v.intersects(m)){u.calcSeparationAmount(v,m,y,o.DEFAULT_EDGE_LENGTH/2),L=2*y[0],A=2*y[1];var R=g.noOfChildren*p.noOfChildren/(g.noOfChildren+p.noOfChildren);g.repulsionForceX-=R*L,g.repulsionForceY-=R*A,p.repulsionForceX+=R*L,p.repulsionForceY+=R*A}else this.uniformLeafNodeSizes&&g.getChild()==null&&p.getChild()==null?(T=m.getCenterX()-v.getCenterX(),w=m.getCenterY()-v.getCenterY()):(u.getIntersection(v,m,b),T=b[2]-b[0],w=b[3]-b[1]),Math.abs(T)<o.MIN_REPULSION_DIST&&(T=h.sign(T)*o.MIN_REPULSION_DIST),Math.abs(w)<o.MIN_REPULSION_DIST&&(w=h.sign(w)*o.MIN_REPULSION_DIST),k=T*T+w*w,S=Math.sqrt(k),E=(g.nodeRepulsion/2+p.nodeRepulsion/2)*g.noOfChildren*p.noOfChildren/k,L=E*T/S,A=E*w/S,g.repulsionForceX-=L,g.repulsionForceY-=A,p.repulsionForceX+=L,p.repulsionForceY+=A},f.prototype.calcGravitationalForce=function(g){var p,v,m,y,b,T,w,k;p=g.getOwner(),v=(p.getRight()+p.getLeft())/2,m=(p.getTop()+p.getBottom())/2,y=g.getCenterX()-v,b=g.getCenterY()-m,T=Math.abs(y)+g.getWidth()/2,w=Math.abs(b)+g.getHeight()/2,g.getOwner()==this.graphManager.getRoot()?(k=p.getEstimatedSize()*this.gravityRangeFactor,(T>k||w>k)&&(g.gravitationForceX=-this.gravityConstant*y,g.gravitationForceY=-this.gravityConstant*b)):(k=p.getEstimatedSize()*this.compoundGravityRangeFactor,(T>k||w>k)&&(g.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,g.gravitationForceY=-this.gravityConstant*b*this.compoundGravityConstant))},f.prototype.isConverged=function(){var g,p=!1;return this.totalIterations>this.maxIterations/3&&(p=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),g=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,g||p},f.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},f.prototype.calcNoOfChildrenForAllNodes=function(){for(var g,p=this.graphManager.getAllNodes(),v=0;v<p.length;v++)g=p[v],g.noOfChildren=g.getNoOfChildren()},f.prototype.calcGrid=function(g){var p=0,v=0;p=parseInt(Math.ceil((g.getRight()-g.getLeft())/this.repulsionRange)),v=parseInt(Math.ceil((g.getBottom()-g.getTop())/this.repulsionRange));for(var m=new Array(p),y=0;y<p;y++)m[y]=new Array(v);for(var y=0;y<p;y++)for(var b=0;b<v;b++)m[y][b]=new Array;return m},f.prototype.addNodeToGrid=function(g,p,v){var m=0,y=0,b=0,T=0;m=parseInt(Math.floor((g.getRect().x-p)/this.repulsionRange)),y=parseInt(Math.floor((g.getRect().width+g.getRect().x-p)/this.repulsionRange)),b=parseInt(Math.floor((g.getRect().y-v)/this.repulsionRange)),T=parseInt(Math.floor((g.getRect().height+g.getRect().y-v)/this.repulsionRange));for(var w=m;w<=y;w++)for(var k=b;k<=T;k++)this.grid[w][k].push(g),g.setGridCoordinates(m,y,b,T)},f.prototype.updateGrid=function(){var g,p,v=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),g=0;g<v.length;g++)p=v[g],this.addNodeToGrid(p,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},f.prototype.calculateRepulsionForceOfANode=function(g,p,v,m){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&v||m){var y=new Set;g.surrounding=new Array;for(var b,T=this.grid,w=g.startX-1;w<g.finishX+2;w++)for(var k=g.startY-1;k<g.finishY+2;k++)if(!(w<0||k<0||w>=T.length||k>=T[0].length)){for(var S=0;S<T[w][k].length;S++)if(b=T[w][k][S],!(g.getOwner()!=b.getOwner()||g==b)&&!p.has(b)&&!y.has(b)){var E=Math.abs(g.getCenterX()-b.getCenterX())-(g.getWidth()/2+b.getWidth()/2),L=Math.abs(g.getCenterY()-b.getCenterY())-(g.getHeight()/2+b.getHeight()/2);E<=this.repulsionRange&&L<=this.repulsionRange&&y.add(b)}}g.surrounding=[].concat(a(y))}for(w=0;w<g.surrounding.length;w++)this.calcRepulsionForce(g,g.surrounding[w])},f.prototype.calcRepulsionRange=function(){return 0},r.exports=f},function(r,n,i){var a=i(1),s=i(4);function o(u,h,f){a.call(this,u,h,f),this.idealLength=s.DEFAULT_EDGE_LENGTH,this.edgeElasticity=s.DEFAULT_SPRING_STRENGTH}o.prototype=Object.create(a.prototype);for(var l in a)o[l]=a[l];r.exports=o},function(r,n,i){var a=i(3),s=i(4);function o(u,h,f,d){a.call(this,u,h,f,d),this.nodeRepulsion=s.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}o.prototype=Object.create(a.prototype);for(var l in a)o[l]=a[l];o.prototype.setGridCoordinates=function(u,h,f,d){this.startX=u,this.finishX=h,this.startY=f,this.finishY=d},r.exports=o},function(r,n,i){function a(s,o){this.width=0,this.height=0,s!==null&&o!==null&&(this.height=o,this.width=s)}a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},r.exports=a},function(r,n,i){var a=i(14);function s(){this.map={},this.keys=[]}s.prototype.put=function(o,l){var u=a.createID(o);this.contains(u)||(this.map[u]=l,this.keys.push(o))},s.prototype.contains=function(o){return a.createID(o),this.map[o]!=null},s.prototype.get=function(o){var l=a.createID(o);return this.map[l]},s.prototype.keySet=function(){return this.keys},r.exports=s},function(r,n,i){var a=i(14);function s(){this.set={}}s.prototype.add=function(o){var l=a.createID(o);this.contains(l)||(this.set[l]=o)},s.prototype.remove=function(o){delete this.set[a.createID(o)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(o){return this.set[a.createID(o)]==o},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(o){for(var l=Object.keys(this.set),u=l.length,h=0;h<u;h++)o.push(this.set[l[h]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(o){for(var l=o.length,u=0;u<l;u++){var h=o[u];this.add(h)}},r.exports=s},function(r,n,i){function a(){}a.multMat=function(s,o){for(var l=[],u=0;u<s.length;u++){l[u]=[];for(var h=0;h<o[0].length;h++){l[u][h]=0;for(var f=0;f<s[0].length;f++)l[u][h]+=s[u][f]*o[f][h]}}return l},a.transpose=function(s){for(var o=[],l=0;l<s[0].length;l++){o[l]=[];for(var u=0;u<s.length;u++)o[l][u]=s[u][l]}return o},a.multCons=function(s,o){for(var l=[],u=0;u<s.length;u++)l[u]=s[u]*o;return l},a.minusOp=function(s,o){for(var l=[],u=0;u<s.length;u++)l[u]=s[u]-o[u];return l},a.dotProduct=function(s,o){for(var l=0,u=0;u<s.length;u++)l+=s[u]*o[u];return l},a.mag=function(s){return Math.sqrt(this.dotProduct(s,s))},a.normalize=function(s){for(var o=[],l=this.mag(s),u=0;u<s.length;u++)o[u]=s[u]/l;return o},a.multGamma=function(s){for(var o=[],l=0,u=0;u<s.length;u++)l+=s[u];l*=-1/s.length;for(var h=0;h<s.length;h++)o[h]=l+s[h];return o},a.multL=function(s,o,l){for(var u=[],h=[],f=[],d=0;d<o[0].length;d++){for(var g=0,p=0;p<o.length;p++)g+=-.5*o[p][d]*s[p];h[d]=g}for(var v=0;v<l.length;v++){for(var m=0,y=0;y<l.length;y++)m+=l[v][y]*h[y];f[v]=m}for(var b=0;b<o.length;b++){for(var T=0,w=0;w<o[0].length;w++)T+=o[b][w]*f[w];u[b]=T}return u},r.exports=a},function(r,n,i){var a=function(){function u(h,f){for(var d=0;d<f.length;d++){var g=f[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}return function(h,f,d){return f&&u(h.prototype,f),d&&u(h,d),h}}();function s(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var o=i(11),l=function(){function u(h,f){s(this,u),(f!==null||f!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var d=void 0;h instanceof o?d=h.size():d=h.length,this._quicksort(h,0,d-1)}return a(u,[{key:"_quicksort",value:function(f,d,g){if(d<g){var p=this._partition(f,d,g);this._quicksort(f,d,p),this._quicksort(f,p+1,g)}}},{key:"_partition",value:function(f,d,g){for(var p=this._get(f,d),v=d,m=g;;){for(;this.compareFunction(p,this._get(f,m));)m--;for(;this.compareFunction(this._get(f,v),p);)v++;if(v<m)this._swap(f,v,m),v++,m--;else return m}}},{key:"_get",value:function(f,d){return f instanceof o?f.get_object_at(d):f[d]}},{key:"_set",value:function(f,d,g){f instanceof o?f.set_object_at(d,g):f[d]=g}},{key:"_swap",value:function(f,d,g){var p=this._get(f,d);this._set(f,d,this._get(f,g)),this._set(f,g,p)}},{key:"_defaultCompareFunction",value:function(f,d){return d>f}}]),u}();r.exports=l},function(r,n,i){function a(){}a.svd=function(s){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=s.length,this.n=s[0].length;var o=Math.min(this.m,this.n);this.s=function($t){for(var Ut=[];$t-- >0;)Ut.push(0);return Ut}(Math.min(this.m+1,this.n)),this.U=function($t){var Ut=function te(Qt){if(Qt.length==0)return 0;for(var Jt=[],ie=0;ie<Qt[0];ie++)Jt.push(te(Qt.slice(1)));return Jt};return Ut($t)}([this.m,o]),this.V=function($t){var Ut=function te(Qt){if(Qt.length==0)return 0;for(var Jt=[],ie=0;ie<Qt[0];ie++)Jt.push(te(Qt.slice(1)));return Jt};return Ut($t)}([this.n,this.n]);for(var l=function($t){for(var Ut=[];$t-- >0;)Ut.push(0);return Ut}(this.n),u=function($t){for(var Ut=[];$t-- >0;)Ut.push(0);return Ut}(this.m),h=!0,f=Math.min(this.m-1,this.n),d=Math.max(0,Math.min(this.n-2,this.m)),g=0;g<Math.max(f,d);g++){if(g<f){this.s[g]=0;for(var p=g;p<this.m;p++)this.s[g]=a.hypot(this.s[g],s[p][g]);if(this.s[g]!==0){s[g][g]<0&&(this.s[g]=-this.s[g]);for(var v=g;v<this.m;v++)s[v][g]/=this.s[g];s[g][g]+=1}this.s[g]=-this.s[g]}for(var m=g+1;m<this.n;m++){if(function($t,Ut){return $t&&Ut}(g<f,this.s[g]!==0)){for(var y=0,b=g;b<this.m;b++)y+=s[b][g]*s[b][m];y=-y/s[g][g];for(var T=g;T<this.m;T++)s[T][m]+=y*s[T][g]}l[m]=s[g][m]}if(function($t,Ut){return Ut}(h,g<f))for(var w=g;w<this.m;w++)this.U[w][g]=s[w][g];if(g<d){l[g]=0;for(var k=g+1;k<this.n;k++)l[g]=a.hypot(l[g],l[k]);if(l[g]!==0){l[g+1]<0&&(l[g]=-l[g]);for(var S=g+1;S<this.n;S++)l[S]/=l[g];l[g+1]+=1}if(l[g]=-l[g],function($t,Ut){return $t&&Ut}(g+1<this.m,l[g]!==0)){for(var E=g+1;E<this.m;E++)u[E]=0;for(var L=g+1;L<this.n;L++)for(var A=g+1;A<this.m;A++)u[A]+=l[L]*s[A][L];for(var R=g+1;R<this.n;R++)for(var C=-l[R]/l[g+1],D=g+1;D<this.m;D++)s[D][R]+=C*u[D]}for(var P=g+1;P<this.n;P++)this.V[P][g]=l[P]}}var _=Math.min(this.n,this.m+1);f<this.n&&(this.s[f]=s[f][f]),this.m<_&&(this.s[_-1]=0),d+1<_&&(l[d]=s[d][_-1]),l[_-1]=0;{for(var I=f;I<o;I++){for(var M=0;M<this.m;M++)this.U[M][I]=0;this.U[I][I]=1}for(var O=f-1;O>=0;O--)if(this.s[O]!==0){for(var N=O+1;N<o;N++){for(var B=0,z=O;z<this.m;z++)B+=this.U[z][O]*this.U[z][N];B=-B/this.U[O][O];for(var F=O;F<this.m;F++)this.U[F][N]+=B*this.U[F][O]}for(var V=O;V<this.m;V++)this.U[V][O]=-this.U[V][O];this.U[O][O]=1+this.U[O][O];for(var G=0;G<O-1;G++)this.U[G][O]=0}else{for(var Y=0;Y<this.m;Y++)this.U[Y][O]=0;this.U[O][O]=1}}for(var Q=this.n-1;Q>=0;Q--){if(function($t,Ut){return $t&&Ut}(Q<d,l[Q]!==0))for(var K=Q+1;K<o;K++){for(var it=0,ut=Q+1;ut<this.n;ut++)it+=this.V[ut][Q]*this.V[ut][K];it=-it/this.V[Q+1][Q];for(var q=Q+1;q<this.n;q++)this.V[q][K]+=it*this.V[q][Q]}for(var W=0;W<this.n;W++)this.V[W][Q]=0;this.V[Q][Q]=1}for(var H=_-1,U=Math.pow(2,-52),X=Math.pow(2,-966);_>0;){var J=void 0,j=void 0;for(J=_-2;J>=-1&&J!==-1;J--)if(Math.abs(l[J])<=X+U*(Math.abs(this.s[J])+Math.abs(this.s[J+1]))){l[J]=0;break}if(J===_-2)j=4;else{var gt=void 0;for(gt=_-1;gt>=J&&gt!==J;gt--){var at=(gt!==_?Math.abs(l[gt]):0)+(gt!==J+1?Math.abs(l[gt-1]):0);if(Math.abs(this.s[gt])<=X+U*at){this.s[gt]=0;break}}gt===J?j=3:gt===_-1?j=1:(j=2,J=gt)}switch(J++,j){case 1:{var tt=l[_-2];l[_-2]=0;for(var kt=_-2;kt>=J;kt--){var ft=a.hypot(this.s[kt],tt),Dt=this.s[kt]/ft,Ot=tt/ft;this.s[kt]=ft,kt!==J&&(tt=-Ot*l[kt-1],l[kt-1]=Dt*l[kt-1]);for(var Rt=0;Rt<this.n;Rt++)ft=Dt*this.V[Rt][kt]+Ot*this.V[Rt][_-1],this.V[Rt][_-1]=-Ot*this.V[Rt][kt]+Dt*this.V[Rt][_-1],this.V[Rt][kt]=ft}}break;case 2:{var Tt=l[J-1];l[J-1]=0;for(var At=J;At<_;At++){var bt=a.hypot(this.s[At],Tt),wt=this.s[At]/bt,Nt=Tt/bt;this.s[At]=bt,Tt=-Nt*l[At],l[At]=wt*l[At];for(var ht=0;ht<this.m;ht++)bt=wt*this.U[ht][At]+Nt*this.U[ht][J-1],this.U[ht][J-1]=-Nt*this.U[ht][At]+wt*this.U[ht][J-1],this.U[ht][At]=bt}}break;case 3:{var _t=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[_-1]),Math.abs(this.s[_-2])),Math.abs(l[_-2])),Math.abs(this.s[J])),Math.abs(l[J])),Z=this.s[_-1]/_t,st=this.s[_-2]/_t,$=l[_-2]/_t,nt=this.s[J]/_t,rt=l[J]/_t,ct=((st+Z)*(st-Z)+$*$)/2,ot=Z*$*(Z*$),vt=0;(function($t,Ut){return $t||Ut})(ct!==0,ot!==0)&&(vt=Math.sqrt(ct*ct+ot),ct<0&&(vt=-vt),vt=ot/(ct+vt));for(var yt=(nt+Z)*(nt-Z)+vt,mt=nt*rt,Mt=J;Mt<_-1;Mt++){var Yt=a.hypot(yt,mt),Bt=yt/Yt,zt=mt/Yt;Mt!==J&&(l[Mt-1]=Yt),yt=Bt*this.s[Mt]+zt*l[Mt],l[Mt]=Bt*l[Mt]-zt*this.s[Mt],mt=zt*this.s[Mt+1],this.s[Mt+1]=Bt*this.s[Mt+1];for(var Gt=0;Gt<this.n;Gt++)Yt=Bt*this.V[Gt][Mt]+zt*this.V[Gt][Mt+1],this.V[Gt][Mt+1]=-zt*this.V[Gt][Mt]+Bt*this.V[Gt][Mt+1],this.V[Gt][Mt]=Yt;if(Yt=a.hypot(yt,mt),Bt=yt/Yt,zt=mt/Yt,this.s[Mt]=Yt,yt=Bt*l[Mt]+zt*this.s[Mt+1],this.s[Mt+1]=-zt*l[Mt]+Bt*this.s[Mt+1],mt=zt*l[Mt+1],l[Mt+1]=Bt*l[Mt+1],Mt<this.m-1)for(var It=0;It<this.m;It++)Yt=Bt*this.U[It][Mt]+zt*this.U[It][Mt+1],this.U[It][Mt+1]=-zt*this.U[It][Mt]+Bt*this.U[It][Mt+1],this.U[It][Mt]=Yt}l[_-2]=yt}break;case 4:{if(this.s[J]<=0){this.s[J]=this.s[J]<0?-this.s[J]:0;for(var Vt=0;Vt<=H;Vt++)this.V[Vt][J]=-this.V[Vt][J]}for(;J<H&&!(this.s[J]>=this.s[J+1]);){var Zt=this.s[J];if(this.s[J]=this.s[J+1],this.s[J+1]=Zt,J<this.n-1)for(var jt=0;jt<this.n;jt++)Zt=this.V[jt][J+1],this.V[jt][J+1]=this.V[jt][J],this.V[jt][J]=Zt;if(J<this.m-1)for(var Pt=0;Pt<this.m;Pt++)Zt=this.U[Pt][J+1],this.U[Pt][J+1]=this.U[Pt][J],this.U[Pt][J]=Zt;J++}_--}break}}var ce={U:this.U,V:this.V,S:this.s};return ce},a.hypot=function(s,o){var l=void 0;return Math.abs(s)>Math.abs(o)?(l=o/s,l=Math.abs(s)*Math.sqrt(1+l*l)):o!=0?(l=s/o,l=Math.abs(o)*Math.sqrt(1+l*l)):l=0,l},r.exports=a},function(r,n,i){var a=function(){function l(u,h){for(var f=0;f<h.length;f++){var d=h[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}return function(u,h,f){return h&&l(u.prototype,h),f&&l(u,f),u}}();function s(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(u,h){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,l),this.sequence1=u,this.sequence2=h,this.match_score=f,this.mismatch_penalty=d,this.gap_penalty=g,this.iMax=u.length+1,this.jMax=h.length+1,this.grid=new Array(this.iMax);for(var p=0;p<this.iMax;p++){this.grid[p]=new Array(this.jMax);for(var v=0;v<this.jMax;v++)this.grid[p][v]=0}this.tracebackGrid=new Array(this.iMax);for(var m=0;m<this.iMax;m++){this.tracebackGrid[m]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.tracebackGrid[m][y]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return a(l,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var h=1;h<this.jMax;h++)this.grid[0][h]=this.grid[0][h-1]+this.gap_penalty,this.tracebackGrid[0][h]=[!1,!1,!0];for(var f=1;f<this.iMax;f++)this.grid[f][0]=this.grid[f-1][0]+this.gap_penalty,this.tracebackGrid[f][0]=[!1,!0,!1];for(var d=1;d<this.iMax;d++)for(var g=1;g<this.jMax;g++){var p=void 0;this.sequence1[d-1]===this.sequence2[g-1]?p=this.grid[d-1][g-1]+this.match_score:p=this.grid[d-1][g-1]+this.mismatch_penalty;var v=this.grid[d-1][g]+this.gap_penalty,m=this.grid[d][g-1]+this.gap_penalty,y=[p,v,m],b=this.arrayAllMaxIndexes(y);this.grid[d][g]=y[b[0]],this.tracebackGrid[d][g]=[b.includes(0),b.includes(1),b.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var h=[];for(h.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});h[0];){var f=h[0],d=this.tracebackGrid[f.pos[0]][f.pos[1]];d[0]&&h.push({pos:[f.pos[0]-1,f.pos[1]-1],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),d[1]&&h.push({pos:[f.pos[0]-1,f.pos[1]],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:"-"+f.seq2}),d[2]&&h.push({pos:[f.pos[0],f.pos[1]-1],seq1:"-"+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),f.pos[0]===0&&f.pos[1]===0&&this.alignments.push({sequence1:f.seq1,sequence2:f.seq2}),h.shift()}return this.alignments}},{key:"getAllIndexes",value:function(h,f){for(var d=[],g=-1;(g=h.indexOf(f,g+1))!==-1;)d.push(g);return d}},{key:"arrayAllMaxIndexes",value:function(h){return this.getAllIndexes(h,Math.max.apply(null,h))}}]),l}();r.exports=o},function(r,n,i){var a=function(){};a.FDLayout=i(18),a.FDLayoutConstants=i(4),a.FDLayoutEdge=i(19),a.FDLayoutNode=i(20),a.DimensionD=i(21),a.HashMap=i(22),a.HashSet=i(23),a.IGeometry=i(8),a.IMath=i(9),a.Integer=i(10),a.Point=i(12),a.PointD=i(5),a.RandomSeed=i(16),a.RectangleD=i(13),a.Transform=i(17),a.UniqueIDGeneretor=i(14),a.Quicksort=i(25),a.LinkedList=i(11),a.LGraphObject=i(2),a.LGraph=i(6),a.LEdge=i(1),a.LGraphManager=i(7),a.LNode=i(3),a.Layout=i(15),a.LayoutConstants=i(0),a.NeedlemanWunsch=i(27),a.Matrix=i(24),a.SVD=i(26),r.exports=a},function(r,n,i){function a(){this.listeners=[]}var s=a.prototype;s.addListener=function(o,l){this.listeners.push({event:o,callback:l})},s.removeListener=function(o,l){for(var u=this.listeners.length;u>=0;u--){var h=this.listeners[u];h.event===o&&h.callback===l&&this.listeners.splice(u,1)}},s.emit=function(o,l){for(var u=0;u<this.listeners.length;u++){var h=this.listeners[u];o===h.event&&h.callback(l)}},r.exports=a}])})}(X1)),X1.exports}var SLt=q1.exports,i6;function _Lt(){return i6||(i6=1,function(e,t){(function(n,i){e.exports=i(CLt())})(SLt,function(r){return(()=>{var n={45:(o,l,u)=>{var h={};h.layoutBase=u(551),h.CoSEConstants=u(806),h.CoSEEdge=u(767),h.CoSEGraph=u(880),h.CoSEGraphManager=u(578),h.CoSELayout=u(765),h.CoSENode=u(991),h.ConstraintHandler=u(902),o.exports=h},806:(o,l,u)=>{var h=u(551).FDLayoutConstants;function f(){}for(var d in h)f[d]=h[d];f.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,f.DEFAULT_RADIAL_SEPARATION=h.DEFAULT_EDGE_LENGTH,f.DEFAULT_COMPONENT_SEPERATION=60,f.TILE=!0,f.TILING_PADDING_VERTICAL=10,f.TILING_PADDING_HORIZONTAL=10,f.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,f.ENFORCE_CONSTRAINTS=!0,f.APPLY_LAYOUT=!0,f.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,f.TREE_REDUCTION_ON_INCREMENTAL=!0,f.PURE_INCREMENTAL=f.DEFAULT_INCREMENTAL,o.exports=f},767:(o,l,u)=>{var h=u(551).FDLayoutEdge;function f(g,p,v){h.call(this,g,p,v)}f.prototype=Object.create(h.prototype);for(var d in h)f[d]=h[d];o.exports=f},880:(o,l,u)=>{var h=u(551).LGraph;function f(g,p,v){h.call(this,g,p,v)}f.prototype=Object.create(h.prototype);for(var d in h)f[d]=h[d];o.exports=f},578:(o,l,u)=>{var h=u(551).LGraphManager;function f(g){h.call(this,g)}f.prototype=Object.create(h.prototype);for(var d in h)f[d]=h[d];o.exports=f},765:(o,l,u)=>{var h=u(551).FDLayout,f=u(578),d=u(880),g=u(991),p=u(767),v=u(806),m=u(902),y=u(551).FDLayoutConstants,b=u(551).LayoutConstants,T=u(551).Point,w=u(551).PointD,k=u(551).DimensionD,S=u(551).Layout,E=u(551).Integer,L=u(551).IGeometry,A=u(551).LGraph,R=u(551).Transform,C=u(551).LinkedList;function D(){h.call(this),this.toBeTiled={},this.constraints={}}D.prototype=Object.create(h.prototype);for(var P in h)D[P]=h[P];D.prototype.newGraphManager=function(){var _=new f(this);return this.graphManager=_,_},D.prototype.newGraph=function(_){return new d(null,this.graphManager,_)},D.prototype.newNode=function(_){return new g(this.graphManager,_)},D.prototype.newEdge=function(_){return new p(null,null,_)},D.prototype.initParameters=function(){h.prototype.initParameters.call(this,arguments),this.isSubLayout||(v.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=v.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=v.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=y.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=y.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=y.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=y.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},D.prototype.initSpringEmbedder=function(){h.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/y.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},D.prototype.layout=function(){var _=b.DEFAULT_CREATE_BENDS_AS_NEEDED;return _&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},D.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(v.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var I=new Set(this.getAllNodes()),M=this.nodesWithGravity.filter(function(B){return I.has(B)});this.graphManager.setAllNodesToApplyGravitation(M)}}else{var _=this.getFlatForest();if(_.length>0)this.positionNodesRadially(_);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var I=new Set(this.getAllNodes()),M=this.nodesWithGravity.filter(function(O){return I.has(O)});this.graphManager.setAllNodesToApplyGravitation(M),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(m.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),v.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},D.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%y.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var _=new Set(this.getAllNodes()),I=this.nodesWithGravity.filter(function(N){return _.has(N)});this.graphManager.setAllNodesToApplyGravitation(I),this.graphManager.updateBounds(),this.updateGrid(),v.PURE_INCREMENTAL?this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),v.PURE_INCREMENTAL?this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var M=!this.isTreeGrowing&&!this.isGrowthFinished,O=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(M,O),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},D.prototype.getPositionsData=function(){for(var _=this.graphManager.getAllNodes(),I={},M=0;M<_.length;M++){var O=_[M].rect,N=_[M].id;I[N]={id:N,x:O.getCenterX(),y:O.getCenterY(),w:O.width,h:O.height}}return I},D.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var _=!1;if(y.ANIMATE==="during")this.emit("layoutstarted");else{for(;!_;)_=this.tick();this.graphManager.updateBounds()}},D.prototype.moveNodes=function(){for(var _=this.getAllNodes(),I,M=0;M<_.length;M++)I=_[M],I.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var M=0;M<_.length;M++)I=_[M],I.move()},D.prototype.initConstraintVariables=function(){var _=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var I=this.graphManager.getAllNodes(),M=0;M<I.length;M++){var O=I[M];this.idToNodeMap.set(O.id,O)}var N=function q(W){for(var H=W.getChild().getNodes(),U,X=0,J=0;J<H.length;J++)U=H[J],U.getChild()==null?_.fixedNodeSet.has(U.id)&&(X+=100):X+=q(U);return X};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(H){_.fixedNodeSet.add(H.nodeId)});for(var I=this.graphManager.getAllNodes(),O,M=0;M<I.length;M++)if(O=I[M],O.getChild()!=null){var B=N(O);B>0&&(O.fixedNodeWeight=B)}}if(this.constraints.relativePlacementConstraint){var z=new Map,F=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(q){_.fixedNodesOnHorizontal.add(q),_.fixedNodesOnVertical.add(q)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var V=this.constraints.alignmentConstraint.vertical,M=0;M<V.length;M++)this.dummyToNodeForVerticalAlignment.set("dummy"+M,[]),V[M].forEach(function(W){z.set(W,"dummy"+M),_.dummyToNodeForVerticalAlignment.get("dummy"+M).push(W),_.fixedNodeSet.has(W)&&_.fixedNodesOnHorizontal.add("dummy"+M)});if(this.constraints.alignmentConstraint.horizontal)for(var G=this.constraints.alignmentConstraint.horizontal,M=0;M<G.length;M++)this.dummyToNodeForHorizontalAlignment.set("dummy"+M,[]),G[M].forEach(function(W){F.set(W,"dummy"+M),_.dummyToNodeForHorizontalAlignment.get("dummy"+M).push(W),_.fixedNodeSet.has(W)&&_.fixedNodesOnVertical.add("dummy"+M)})}if(v.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(q){var W,H,U;for(U=q.length-1;U>=2*q.length/3;U--)W=Math.floor(Math.random()*(U+1)),H=q[U],q[U]=q[W],q[W]=H;return q},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(q){if(q.left){var W=z.has(q.left)?z.get(q.left):q.left,H=z.has(q.right)?z.get(q.right):q.right;_.nodesInRelativeHorizontal.includes(W)||(_.nodesInRelativeHorizontal.push(W),_.nodeToRelativeConstraintMapHorizontal.set(W,[]),_.dummyToNodeForVerticalAlignment.has(W)?_.nodeToTempPositionMapHorizontal.set(W,_.idToNodeMap.get(_.dummyToNodeForVerticalAlignment.get(W)[0]).getCenterX()):_.nodeToTempPositionMapHorizontal.set(W,_.idToNodeMap.get(W).getCenterX())),_.nodesInRelativeHorizontal.includes(H)||(_.nodesInRelativeHorizontal.push(H),_.nodeToRelativeConstraintMapHorizontal.set(H,[]),_.dummyToNodeForVerticalAlignment.has(H)?_.nodeToTempPositionMapHorizontal.set(H,_.idToNodeMap.get(_.dummyToNodeForVerticalAlignment.get(H)[0]).getCenterX()):_.nodeToTempPositionMapHorizontal.set(H,_.idToNodeMap.get(H).getCenterX())),_.nodeToRelativeConstraintMapHorizontal.get(W).push({right:H,gap:q.gap}),_.nodeToRelativeConstraintMapHorizontal.get(H).push({left:W,gap:q.gap})}else{var U=F.has(q.top)?F.get(q.top):q.top,X=F.has(q.bottom)?F.get(q.bottom):q.bottom;_.nodesInRelativeVertical.includes(U)||(_.nodesInRelativeVertical.push(U),_.nodeToRelativeConstraintMapVertical.set(U,[]),_.dummyToNodeForHorizontalAlignment.has(U)?_.nodeToTempPositionMapVertical.set(U,_.idToNodeMap.get(_.dummyToNodeForHorizontalAlignment.get(U)[0]).getCenterY()):_.nodeToTempPositionMapVertical.set(U,_.idToNodeMap.get(U).getCenterY())),_.nodesInRelativeVertical.includes(X)||(_.nodesInRelativeVertical.push(X),_.nodeToRelativeConstraintMapVertical.set(X,[]),_.dummyToNodeForHorizontalAlignment.has(X)?_.nodeToTempPositionMapVertical.set(X,_.idToNodeMap.get(_.dummyToNodeForHorizontalAlignment.get(X)[0]).getCenterY()):_.nodeToTempPositionMapVertical.set(X,_.idToNodeMap.get(X).getCenterY())),_.nodeToRelativeConstraintMapVertical.get(U).push({bottom:X,gap:q.gap}),_.nodeToRelativeConstraintMapVertical.get(X).push({top:U,gap:q.gap})}});else{var Y=new Map,Q=new Map;this.constraints.relativePlacementConstraint.forEach(function(q){if(q.left){var W=z.has(q.left)?z.get(q.left):q.left,H=z.has(q.right)?z.get(q.right):q.right;Y.has(W)?Y.get(W).push(H):Y.set(W,[H]),Y.has(H)?Y.get(H).push(W):Y.set(H,[W])}else{var U=F.has(q.top)?F.get(q.top):q.top,X=F.has(q.bottom)?F.get(q.bottom):q.bottom;Q.has(U)?Q.get(U).push(X):Q.set(U,[X]),Q.has(X)?Q.get(X).push(U):Q.set(X,[U])}});var K=function(W,H){var U=[],X=[],J=new C,j=new Set,gt=0;return W.forEach(function(at,tt){if(!j.has(tt)){U[gt]=[],X[gt]=!1;var kt=tt;for(J.push(kt),j.add(kt),U[gt].push(kt);J.length!=0;){kt=J.shift(),H.has(kt)&&(X[gt]=!0);var ft=W.get(kt);ft.forEach(function(Dt){j.has(Dt)||(J.push(Dt),j.add(Dt),U[gt].push(Dt))})}gt++}}),{components:U,isFixed:X}},it=K(Y,_.fixedNodesOnHorizontal);this.componentsOnHorizontal=it.components,this.fixedComponentsOnHorizontal=it.isFixed;var ut=K(Q,_.fixedNodesOnVertical);this.componentsOnVertical=ut.components,this.fixedComponentsOnVertical=ut.isFixed}}},D.prototype.updateDisplacements=function(){var _=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(ut){var q=_.idToNodeMap.get(ut.nodeId);q.displacementX=0,q.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var I=this.constraints.alignmentConstraint.vertical,M=0;M<I.length;M++){for(var O=0,N=0;N<I[M].length;N++){if(this.fixedNodeSet.has(I[M][N])){O=0;break}O+=this.idToNodeMap.get(I[M][N]).displacementX}for(var B=O/I[M].length,N=0;N<I[M].length;N++)this.idToNodeMap.get(I[M][N]).displacementX=B}if(this.constraints.alignmentConstraint.horizontal)for(var z=this.constraints.alignmentConstraint.horizontal,M=0;M<z.length;M++){for(var F=0,N=0;N<z[M].length;N++){if(this.fixedNodeSet.has(z[M][N])){F=0;break}F+=this.idToNodeMap.get(z[M][N]).displacementY}for(var V=F/z[M].length,N=0;N<z[M].length;N++)this.idToNodeMap.get(z[M][N]).displacementY=V}}if(this.constraints.relativePlacementConstraint)if(v.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(ut){if(!_.fixedNodesOnHorizontal.has(ut)){var q=0;_.dummyToNodeForVerticalAlignment.has(ut)?q=_.idToNodeMap.get(_.dummyToNodeForVerticalAlignment.get(ut)[0]).displacementX:q=_.idToNodeMap.get(ut).displacementX,_.nodeToRelativeConstraintMapHorizontal.get(ut).forEach(function(W){if(W.right){var H=_.nodeToTempPositionMapHorizontal.get(W.right)-_.nodeToTempPositionMapHorizontal.get(ut)-q;H<W.gap&&(q-=W.gap-H)}else{var H=_.nodeToTempPositionMapHorizontal.get(ut)-_.nodeToTempPositionMapHorizontal.get(W.left)+q;H<W.gap&&(q+=W.gap-H)}}),_.nodeToTempPositionMapHorizontal.set(ut,_.nodeToTempPositionMapHorizontal.get(ut)+q),_.dummyToNodeForVerticalAlignment.has(ut)?_.dummyToNodeForVerticalAlignment.get(ut).forEach(function(W){_.idToNodeMap.get(W).displacementX=q}):_.idToNodeMap.get(ut).displacementX=q}}),this.nodesInRelativeVertical.forEach(function(ut){if(!_.fixedNodesOnHorizontal.has(ut)){var q=0;_.dummyToNodeForHorizontalAlignment.has(ut)?q=_.idToNodeMap.get(_.dummyToNodeForHorizontalAlignment.get(ut)[0]).displacementY:q=_.idToNodeMap.get(ut).displacementY,_.nodeToRelativeConstraintMapVertical.get(ut).forEach(function(W){if(W.bottom){var H=_.nodeToTempPositionMapVertical.get(W.bottom)-_.nodeToTempPositionMapVertical.get(ut)-q;H<W.gap&&(q-=W.gap-H)}else{var H=_.nodeToTempPositionMapVertical.get(ut)-_.nodeToTempPositionMapVertical.get(W.top)+q;H<W.gap&&(q+=W.gap-H)}}),_.nodeToTempPositionMapVertical.set(ut,_.nodeToTempPositionMapVertical.get(ut)+q),_.dummyToNodeForHorizontalAlignment.has(ut)?_.dummyToNodeForHorizontalAlignment.get(ut).forEach(function(W){_.idToNodeMap.get(W).displacementY=q}):_.idToNodeMap.get(ut).displacementY=q}});else{for(var M=0;M<this.componentsOnHorizontal.length;M++){var G=this.componentsOnHorizontal[M];if(this.fixedComponentsOnHorizontal[M])for(var N=0;N<G.length;N++)this.dummyToNodeForVerticalAlignment.has(G[N])?this.dummyToNodeForVerticalAlignment.get(G[N]).forEach(function(W){_.idToNodeMap.get(W).displacementX=0}):this.idToNodeMap.get(G[N]).displacementX=0;else{for(var Y=0,Q=0,N=0;N<G.length;N++)if(this.dummyToNodeForVerticalAlignment.has(G[N])){var K=this.dummyToNodeForVerticalAlignment.get(G[N]);Y+=K.length*this.idToNodeMap.get(K[0]).displacementX,Q+=K.length}else Y+=this.idToNodeMap.get(G[N]).displacementX,Q++;for(var it=Y/Q,N=0;N<G.length;N++)this.dummyToNodeForVerticalAlignment.has(G[N])?this.dummyToNodeForVerticalAlignment.get(G[N]).forEach(function(W){_.idToNodeMap.get(W).displacementX=it}):this.idToNodeMap.get(G[N]).displacementX=it}}for(var M=0;M<this.componentsOnVertical.length;M++){var G=this.componentsOnVertical[M];if(this.fixedComponentsOnVertical[M])for(var N=0;N<G.length;N++)this.dummyToNodeForHorizontalAlignment.has(G[N])?this.dummyToNodeForHorizontalAlignment.get(G[N]).forEach(function(H){_.idToNodeMap.get(H).displacementY=0}):this.idToNodeMap.get(G[N]).displacementY=0;else{for(var Y=0,Q=0,N=0;N<G.length;N++)if(this.dummyToNodeForHorizontalAlignment.has(G[N])){var K=this.dummyToNodeForHorizontalAlignment.get(G[N]);Y+=K.length*this.idToNodeMap.get(K[0]).displacementY,Q+=K.length}else Y+=this.idToNodeMap.get(G[N]).displacementY,Q++;for(var it=Y/Q,N=0;N<G.length;N++)this.dummyToNodeForHorizontalAlignment.has(G[N])?this.dummyToNodeForHorizontalAlignment.get(G[N]).forEach(function(J){_.idToNodeMap.get(J).displacementY=it}):this.idToNodeMap.get(G[N]).displacementY=it}}}},D.prototype.calculateNodesToApplyGravitationTo=function(){var _=[],I,M=this.graphManager.getGraphs(),O=M.length,N;for(N=0;N<O;N++)I=M[N],I.updateConnected(),I.isConnected||(_=_.concat(I.getNodes()));return _},D.prototype.createBendpoints=function(){var _=[];_=_.concat(this.graphManager.getAllEdges());var I=new Set,M;for(M=0;M<_.length;M++){var O=_[M];if(!I.has(O)){var N=O.getSource(),B=O.getTarget();if(N==B)O.getBendpoints().push(new w),O.getBendpoints().push(new w),this.createDummyNodesForBendpoints(O),I.add(O);else{var z=[];if(z=z.concat(N.getEdgeListToNode(B)),z=z.concat(B.getEdgeListToNode(N)),!I.has(z[0])){if(z.length>1){var F;for(F=0;F<z.length;F++){var V=z[F];V.getBendpoints().push(new w),this.createDummyNodesForBendpoints(V)}}z.forEach(function(G){I.add(G)})}}}if(I.size==_.length)break}},D.prototype.positionNodesRadially=function(_){for(var I=new T(0,0),M=Math.ceil(Math.sqrt(_.length)),O=0,N=0,B=0,z=new w(0,0),F=0;F<_.length;F++){F%M==0&&(B=0,N=O,F!=0&&(N+=v.DEFAULT_COMPONENT_SEPERATION),O=0);var V=_[F],G=S.findCenterOfTree(V);I.x=B,I.y=N,z=D.radialLayout(V,G,I),z.y>O&&(O=Math.floor(z.y)),B=Math.floor(z.x+v.DEFAULT_COMPONENT_SEPERATION)}this.transform(new w(b.WORLD_CENTER_X-z.x/2,b.WORLD_CENTER_Y-z.y/2))},D.radialLayout=function(_,I,M){var O=Math.max(this.maxDiagonalInTree(_),v.DEFAULT_RADIAL_SEPARATION);D.branchRadialLayout(I,null,0,359,0,O);var N=A.calculateBounds(_),B=new R;B.setDeviceOrgX(N.getMinX()),B.setDeviceOrgY(N.getMinY()),B.setWorldOrgX(M.x),B.setWorldOrgY(M.y);for(var z=0;z<_.length;z++){var F=_[z];F.transform(B)}var V=new w(N.getMaxX(),N.getMaxY());return B.inverseTransformPoint(V)},D.branchRadialLayout=function(_,I,M,O,N,B){var z=(O-M+1)/2;z<0&&(z+=180);var F=(z+M)%360,V=F*L.TWO_PI/360,G=N*Math.cos(V),Y=N*Math.sin(V);_.setCenter(G,Y);var Q=[];Q=Q.concat(_.getEdges());var K=Q.length;I!=null&&K--;for(var it=0,ut=Q.length,q,W=_.getEdgesBetween(I);W.length>1;){var H=W[0];W.splice(0,1);var U=Q.indexOf(H);U>=0&&Q.splice(U,1),ut--,K--}I!=null?q=(Q.indexOf(W[0])+1)%ut:q=0;for(var X=Math.abs(O-M)/K,J=q;it!=K;J=++J%ut){var j=Q[J].getOtherEnd(_);if(j!=I){var gt=(M+it*X)%360,at=(gt+X)%360;D.branchRadialLayout(j,_,gt,at,N+B,B),it++}}},D.maxDiagonalInTree=function(_){for(var I=E.MIN_VALUE,M=0;M<_.length;M++){var O=_[M],N=O.getDiagonal();N>I&&(I=N)}return I},D.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},D.prototype.groupZeroDegreeMembers=function(){var _=this,I={};this.memberGroups={},this.idToDummyNode={};for(var M=[],O=this.graphManager.getAllNodes(),N=0;N<O.length;N++){var B=O[N],z=B.getParent();this.getNodeDegreeWithChildren(B)===0&&(z.id==null||!this.getToBeTiled(z))&&M.push(B)}for(var N=0;N<M.length;N++){var B=M[N],F=B.getParent().id;typeof I[F]>"u"&&(I[F]=[]),I[F]=I[F].concat(B)}Object.keys(I).forEach(function(V){if(I[V].length>1){var G="DummyCompound_"+V;_.memberGroups[G]=I[V];var Y=I[V][0].getParent(),Q=new g(_.graphManager);Q.id=G,Q.paddingLeft=Y.paddingLeft||0,Q.paddingRight=Y.paddingRight||0,Q.paddingBottom=Y.paddingBottom||0,Q.paddingTop=Y.paddingTop||0,_.idToDummyNode[G]=Q;var K=_.getGraphManager().add(_.newGraph(),Q),it=Y.getChild();it.add(Q);for(var ut=0;ut<I[V].length;ut++){var q=I[V][ut];it.remove(q),K.add(q)}}})},D.prototype.clearCompounds=function(){var _={},I={};this.performDFSOnCompounds();for(var M=0;M<this.compoundOrder.length;M++)I[this.compoundOrder[M].id]=this.compoundOrder[M],_[this.compoundOrder[M].id]=[].concat(this.compoundOrder[M].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[M].getChild()),this.compoundOrder[M].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(_,I)},D.prototype.clearZeroDegreeMembers=function(){var _=this,I=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(M){var O=_.idToDummyNode[M];if(I[M]=_.tileNodes(_.memberGroups[M],O.paddingLeft+O.paddingRight),O.rect.width=I[M].width,O.rect.height=I[M].height,O.setCenter(I[M].centerX,I[M].centerY),O.labelMarginLeft=0,O.labelMarginTop=0,v.NODE_DIMENSIONS_INCLUDE_LABELS){var N=O.rect.width,B=O.rect.height;O.labelWidth&&(O.labelPosHorizontal=="left"?(O.rect.x-=O.labelWidth,O.setWidth(N+O.labelWidth),O.labelMarginLeft=O.labelWidth):O.labelPosHorizontal=="center"&&O.labelWidth>N?(O.rect.x-=(O.labelWidth-N)/2,O.setWidth(O.labelWidth),O.labelMarginLeft=(O.labelWidth-N)/2):O.labelPosHorizontal=="right"&&O.setWidth(N+O.labelWidth)),O.labelHeight&&(O.labelPosVertical=="top"?(O.rect.y-=O.labelHeight,O.setHeight(B+O.labelHeight),O.labelMarginTop=O.labelHeight):O.labelPosVertical=="center"&&O.labelHeight>B?(O.rect.y-=(O.labelHeight-B)/2,O.setHeight(O.labelHeight),O.labelMarginTop=(O.labelHeight-B)/2):O.labelPosVertical=="bottom"&&O.setHeight(B+O.labelHeight))}})},D.prototype.repopulateCompounds=function(){for(var _=this.compoundOrder.length-1;_>=0;_--){var I=this.compoundOrder[_],M=I.id,O=I.paddingLeft,N=I.paddingTop,B=I.labelMarginLeft,z=I.labelMarginTop;this.adjustLocations(this.tiledMemberPack[M],I.rect.x,I.rect.y,O,N,B,z)}},D.prototype.repopulateZeroDegreeMembers=function(){var _=this,I=this.tiledZeroDegreePack;Object.keys(I).forEach(function(M){var O=_.idToDummyNode[M],N=O.paddingLeft,B=O.paddingTop,z=O.labelMarginLeft,F=O.labelMarginTop;_.adjustLocations(I[M],O.rect.x,O.rect.y,N,B,z,F)})},D.prototype.getToBeTiled=function(_){var I=_.id;if(this.toBeTiled[I]!=null)return this.toBeTiled[I];var M=_.getChild();if(M==null)return this.toBeTiled[I]=!1,!1;for(var O=M.getNodes(),N=0;N<O.length;N++){var B=O[N];if(this.getNodeDegree(B)>0)return this.toBeTiled[I]=!1,!1;if(B.getChild()==null){this.toBeTiled[B.id]=!1;continue}if(!this.getToBeTiled(B))return this.toBeTiled[I]=!1,!1}return this.toBeTiled[I]=!0,!0},D.prototype.getNodeDegree=function(_){_.id;for(var I=_.getEdges(),M=0,O=0;O<I.length;O++){var N=I[O];N.getSource().id!==N.getTarget().id&&(M=M+1)}return M},D.prototype.getNodeDegreeWithChildren=function(_){var I=this.getNodeDegree(_);if(_.getChild()==null)return I;for(var M=_.getChild().getNodes(),O=0;O<M.length;O++){var N=M[O];I+=this.getNodeDegreeWithChildren(N)}return I},D.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},D.prototype.fillCompexOrderByDFS=function(_){for(var I=0;I<_.length;I++){var M=_[I];M.getChild()!=null&&this.fillCompexOrderByDFS(M.getChild().getNodes()),this.getToBeTiled(M)&&this.compoundOrder.push(M)}},D.prototype.adjustLocations=function(_,I,M,O,N,B,z){I+=O+B,M+=N+z;for(var F=I,V=0;V<_.rows.length;V++){var G=_.rows[V];I=F;for(var Y=0,Q=0;Q<G.length;Q++){var K=G[Q];K.rect.x=I,K.rect.y=M,I+=K.rect.width+_.horizontalPadding,K.rect.height>Y&&(Y=K.rect.height)}M+=Y+_.verticalPadding}},D.prototype.tileCompoundMembers=function(_,I){var M=this;this.tiledMemberPack=[],Object.keys(_).forEach(function(O){var N=I[O];if(M.tiledMemberPack[O]=M.tileNodes(_[O],N.paddingLeft+N.paddingRight),N.rect.width=M.tiledMemberPack[O].width,N.rect.height=M.tiledMemberPack[O].height,N.setCenter(M.tiledMemberPack[O].centerX,M.tiledMemberPack[O].centerY),N.labelMarginLeft=0,N.labelMarginTop=0,v.NODE_DIMENSIONS_INCLUDE_LABELS){var B=N.rect.width,z=N.rect.height;N.labelWidth&&(N.labelPosHorizontal=="left"?(N.rect.x-=N.labelWidth,N.setWidth(B+N.labelWidth),N.labelMarginLeft=N.labelWidth):N.labelPosHorizontal=="center"&&N.labelWidth>B?(N.rect.x-=(N.labelWidth-B)/2,N.setWidth(N.labelWidth),N.labelMarginLeft=(N.labelWidth-B)/2):N.labelPosHorizontal=="right"&&N.setWidth(B+N.labelWidth)),N.labelHeight&&(N.labelPosVertical=="top"?(N.rect.y-=N.labelHeight,N.setHeight(z+N.labelHeight),N.labelMarginTop=N.labelHeight):N.labelPosVertical=="center"&&N.labelHeight>z?(N.rect.y-=(N.labelHeight-z)/2,N.setHeight(N.labelHeight),N.labelMarginTop=(N.labelHeight-z)/2):N.labelPosVertical=="bottom"&&N.setHeight(z+N.labelHeight))}})},D.prototype.tileNodes=function(_,I){var M=this.tileNodesByFavoringDim(_,I,!0),O=this.tileNodesByFavoringDim(_,I,!1),N=this.getOrgRatio(M),B=this.getOrgRatio(O),z;return B<N?z=O:z=M,z},D.prototype.getOrgRatio=function(_){var I=_.width,M=_.height,O=I/M;return O<1&&(O=1/O),O},D.prototype.calcIdealRowWidth=function(_,I){var M=v.TILING_PADDING_VERTICAL,O=v.TILING_PADDING_HORIZONTAL,N=_.length,B=0,z=0,F=0;_.forEach(function(ut){B+=ut.getWidth(),z+=ut.getHeight(),ut.getWidth()>F&&(F=ut.getWidth())});var V=B/N,G=z/N,Y=Math.pow(M-O,2)+4*(V+O)*(G+M)*N,Q=(O-M+Math.sqrt(Y))/(2*(V+O)),K;I?(K=Math.ceil(Q),K==Q&&K++):K=Math.floor(Q);var it=K*(V+O)-O;return F>it&&(it=F),it+=O*2,it},D.prototype.tileNodesByFavoringDim=function(_,I,M){var O=v.TILING_PADDING_VERTICAL,N=v.TILING_PADDING_HORIZONTAL,B=v.TILING_COMPARE_BY,z={rows:[],rowWidth:[],rowHeight:[],width:0,height:I,verticalPadding:O,horizontalPadding:N,centerX:0,centerY:0};B&&(z.idealRowWidth=this.calcIdealRowWidth(_,M));var F=function(q){return q.rect.width*q.rect.height},V=function(q,W){return F(W)-F(q)};_.sort(function(ut,q){var W=V;return z.idealRowWidth?(W=B,W(ut.id,q.id)):W(ut,q)});for(var G=0,Y=0,Q=0;Q<_.length;Q++){var K=_[Q];G+=K.getCenterX(),Y+=K.getCenterY()}z.centerX=G/_.length,z.centerY=Y/_.length;for(var Q=0;Q<_.length;Q++){var K=_[Q];if(z.rows.length==0)this.insertNodeToRow(z,K,0,I);else if(this.canAddHorizontal(z,K.rect.width,K.rect.height)){var it=z.rows.length-1;z.idealRowWidth||(it=this.getShortestRowIndex(z)),this.insertNodeToRow(z,K,it,I)}else this.insertNodeToRow(z,K,z.rows.length,I);this.shiftToLastRow(z)}return z},D.prototype.insertNodeToRow=function(_,I,M,O){var N=O;if(M==_.rows.length){var B=[];_.rows.push(B),_.rowWidth.push(N),_.rowHeight.push(0)}var z=_.rowWidth[M]+I.rect.width;_.rows[M].length>0&&(z+=_.horizontalPadding),_.rowWidth[M]=z,_.width<z&&(_.width=z);var F=I.rect.height;M>0&&(F+=_.verticalPadding);var V=0;F>_.rowHeight[M]&&(V=_.rowHeight[M],_.rowHeight[M]=F,V=_.rowHeight[M]-V),_.height+=V,_.rows[M].push(I)},D.prototype.getShortestRowIndex=function(_){for(var I=-1,M=Number.MAX_VALUE,O=0;O<_.rows.length;O++)_.rowWidth[O]<M&&(I=O,M=_.rowWidth[O]);return I},D.prototype.getLongestRowIndex=function(_){for(var I=-1,M=Number.MIN_VALUE,O=0;O<_.rows.length;O++)_.rowWidth[O]>M&&(I=O,M=_.rowWidth[O]);return I},D.prototype.canAddHorizontal=function(_,I,M){if(_.idealRowWidth){var O=_.rows.length-1,N=_.rowWidth[O];return N+I+_.horizontalPadding<=_.idealRowWidth}var B=this.getShortestRowIndex(_);if(B<0)return!0;var z=_.rowWidth[B];if(z+_.horizontalPadding+I<=_.width)return!0;var F=0;_.rowHeight[B]<M&&B>0&&(F=M+_.verticalPadding-_.rowHeight[B]);var V;_.width-z>=I+_.horizontalPadding?V=(_.height+F)/(z+I+_.horizontalPadding):V=(_.height+F)/_.width,F=M+_.verticalPadding;var G;return _.width<I?G=(_.height+F)/I:G=(_.height+F)/_.width,G<1&&(G=1/G),V<1&&(V=1/V),V<G},D.prototype.shiftToLastRow=function(_){var I=this.getLongestRowIndex(_),M=_.rowWidth.length-1,O=_.rows[I],N=O[O.length-1],B=N.width+_.horizontalPadding;if(_.width-_.rowWidth[M]>B&&I!=M){O.splice(-1,1),_.rows[M].push(N),_.rowWidth[I]=_.rowWidth[I]-B,_.rowWidth[M]=_.rowWidth[M]+B,_.width=_.rowWidth[instance.getLongestRowIndex(_)];for(var z=Number.MIN_VALUE,F=0;F<O.length;F++)O[F].height>z&&(z=O[F].height);I>0&&(z+=_.verticalPadding);var V=_.rowHeight[I]+_.rowHeight[M];_.rowHeight[I]=z,_.rowHeight[M]<N.height+_.verticalPadding&&(_.rowHeight[M]=N.height+_.verticalPadding);var G=_.rowHeight[I]+_.rowHeight[M];_.height+=G-V,this.shiftToLastRow(_)}},D.prototype.tilingPreLayout=function(){v.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},D.prototype.tilingPostLayout=function(){v.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},D.prototype.reduceTrees=function(){for(var _=[],I=!0,M;I;){var O=this.graphManager.getAllNodes(),N=[];I=!1;for(var B=0;B<O.length;B++)if(M=O[B],M.getEdges().length==1&&!M.getEdges()[0].isInterGraph&&M.getChild()==null){if(v.PURE_INCREMENTAL){var z=M.getEdges()[0].getOtherEnd(M),F=new k(M.getCenterX()-z.getCenterX(),M.getCenterY()-z.getCenterY());N.push([M,M.getEdges()[0],M.getOwner(),F])}else N.push([M,M.getEdges()[0],M.getOwner()]);I=!0}if(I==!0){for(var V=[],G=0;G<N.length;G++)N[G][0].getEdges().length==1&&(V.push(N[G]),N[G][0].getOwner().remove(N[G][0]));_.push(V),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=_},D.prototype.growTree=function(_){for(var I=_.length,M=_[I-1],O,N=0;N<M.length;N++)O=M[N],this.findPlaceforPrunedNode(O),O[2].add(O[0]),O[2].add(O[1],O[1].source,O[1].target);_.splice(_.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},D.prototype.findPlaceforPrunedNode=function(_){var I,M,O=_[0];if(O==_[1].source?M=_[1].target:M=_[1].source,v.PURE_INCREMENTAL)O.setCenter(M.getCenterX()+_[3].getWidth(),M.getCenterY()+_[3].getHeight());else{var N=M.startX,B=M.finishX,z=M.startY,F=M.finishY,V=0,G=0,Y=0,Q=0,K=[V,Y,G,Q];if(z>0)for(var it=N;it<=B;it++)K[0]+=this.grid[it][z-1].length+this.grid[it][z].length-1;if(B<this.grid.length-1)for(var it=z;it<=F;it++)K[1]+=this.grid[B+1][it].length+this.grid[B][it].length-1;if(F<this.grid[0].length-1)for(var it=N;it<=B;it++)K[2]+=this.grid[it][F+1].length+this.grid[it][F].length-1;if(N>0)for(var it=z;it<=F;it++)K[3]+=this.grid[N-1][it].length+this.grid[N][it].length-1;for(var ut=E.MAX_VALUE,q,W,H=0;H<K.length;H++)K[H]<ut?(ut=K[H],q=1,W=H):K[H]==ut&&q++;if(q==3&&ut==0)K[0]==0&&K[1]==0&&K[2]==0?I=1:K[0]==0&&K[1]==0&&K[3]==0?I=0:K[0]==0&&K[2]==0&&K[3]==0?I=3:K[1]==0&&K[2]==0&&K[3]==0&&(I=2);else if(q==2&&ut==0){var U=Math.floor(Math.random()*2);K[0]==0&&K[1]==0?U==0?I=0:I=1:K[0]==0&&K[2]==0?U==0?I=0:I=2:K[0]==0&&K[3]==0?U==0?I=0:I=3:K[1]==0&&K[2]==0?U==0?I=1:I=2:K[1]==0&&K[3]==0?U==0?I=1:I=3:U==0?I=2:I=3}else if(q==4&&ut==0){var U=Math.floor(Math.random()*4);I=U}else I=W;I==0?O.setCenter(M.getCenterX(),M.getCenterY()-M.getHeight()/2-y.DEFAULT_EDGE_LENGTH-O.getHeight()/2):I==1?O.setCenter(M.getCenterX()+M.getWidth()/2+y.DEFAULT_EDGE_LENGTH+O.getWidth()/2,M.getCenterY()):I==2?O.setCenter(M.getCenterX(),M.getCenterY()+M.getHeight()/2+y.DEFAULT_EDGE_LENGTH+O.getHeight()/2):O.setCenter(M.getCenterX()-M.getWidth()/2-y.DEFAULT_EDGE_LENGTH-O.getWidth()/2,M.getCenterY())}},o.exports=D},991:(o,l,u)=>{var h=u(551).FDLayoutNode,f=u(551).IMath;function d(p,v,m,y){h.call(this,p,v,m,y)}d.prototype=Object.create(h.prototype);for(var g in h)d[g]=h[g];d.prototype.calculateDisplacement=function(){var p=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=p.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=p.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=p.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=p.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>p.coolingFactor*p.maxNodeDisplacement&&(this.displacementX=p.coolingFactor*p.maxNodeDisplacement*f.sign(this.displacementX)),Math.abs(this.displacementY)>p.coolingFactor*p.maxNodeDisplacement&&(this.displacementY=p.coolingFactor*p.maxNodeDisplacement*f.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},d.prototype.propogateDisplacementToChildren=function(p,v){for(var m=this.getChild().getNodes(),y,b=0;b<m.length;b++)y=m[b],y.getChild()==null?(y.displacementX+=p,y.displacementY+=v):y.propogateDisplacementToChildren(p,v)},d.prototype.move=function(){var p=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),p.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},d.prototype.setPred1=function(p){this.pred1=p},d.prototype.getPred1=function(){return pred1},d.prototype.getPred2=function(){return pred2},d.prototype.setNext=function(p){this.next=p},d.prototype.getNext=function(){return next},d.prototype.setProcessed=function(p){this.processed=p},d.prototype.isProcessed=function(){return processed},o.exports=d},902:(o,l,u)=>{function h(m){if(Array.isArray(m)){for(var y=0,b=Array(m.length);y<m.length;y++)b[y]=m[y];return b}else return Array.from(m)}var f=u(806),d=u(551).LinkedList,g=u(551).Matrix,p=u(551).SVD;function v(){}v.handleConstraints=function(m){var y={};y.fixedNodeConstraint=m.constraints.fixedNodeConstraint,y.alignmentConstraint=m.constraints.alignmentConstraint,y.relativePlacementConstraint=m.constraints.relativePlacementConstraint;for(var b=new Map,T=new Map,w=[],k=[],S=m.getAllNodes(),E=0,L=0;L<S.length;L++){var A=S[L];A.getChild()==null&&(T.set(A.id,E++),w.push(A.getCenterX()),k.push(A.getCenterY()),b.set(A.id,A))}y.relativePlacementConstraint&&y.relativePlacementConstraint.forEach(function(st){!st.gap&&st.gap!=0&&(st.left?st.gap=f.DEFAULT_EDGE_LENGTH+b.get(st.left).getWidth()/2+b.get(st.right).getWidth()/2:st.gap=f.DEFAULT_EDGE_LENGTH+b.get(st.top).getHeight()/2+b.get(st.bottom).getHeight()/2)});var R=function($,nt){return{x:$.x-nt.x,y:$.y-nt.y}},C=function($){var nt=0,rt=0;return $.forEach(function(ct){nt+=w[T.get(ct)],rt+=k[T.get(ct)]}),{x:nt/$.size,y:rt/$.size}},D=function($,nt,rt,ct,ot){function vt(It,Vt){var Zt=new Set(It),jt=!0,Pt=!1,ce=void 0;try{for(var $t=Vt[Symbol.iterator](),Ut;!(jt=(Ut=$t.next()).done);jt=!0){var te=Ut.value;Zt.add(te)}}catch(Qt){Pt=!0,ce=Qt}finally{try{!jt&&$t.return&&$t.return()}finally{if(Pt)throw ce}}return Zt}var yt=new Map;$.forEach(function(It,Vt){yt.set(Vt,0)}),$.forEach(function(It,Vt){It.forEach(function(Zt){yt.set(Zt.id,yt.get(Zt.id)+1)})});var mt=new Map,Mt=new Map,Yt=new d;yt.forEach(function(It,Vt){It==0?(Yt.push(Vt),rt||(nt=="horizontal"?mt.set(Vt,T.has(Vt)?w[T.get(Vt)]:ct.get(Vt)):mt.set(Vt,T.has(Vt)?k[T.get(Vt)]:ct.get(Vt)))):mt.set(Vt,Number.NEGATIVE_INFINITY),rt&&Mt.set(Vt,new Set([Vt]))}),rt&&ot.forEach(function(It){var Vt=[];if(It.forEach(function(Pt){rt.has(Pt)&&Vt.push(Pt)}),Vt.length>0){var Zt=0;Vt.forEach(function(Pt){nt=="horizontal"?(mt.set(Pt,T.has(Pt)?w[T.get(Pt)]:ct.get(Pt)),Zt+=mt.get(Pt)):(mt.set(Pt,T.has(Pt)?k[T.get(Pt)]:ct.get(Pt)),Zt+=mt.get(Pt))}),Zt=Zt/Vt.length,It.forEach(function(Pt){rt.has(Pt)||mt.set(Pt,Zt)})}else{var jt=0;It.forEach(function(Pt){nt=="horizontal"?jt+=T.has(Pt)?w[T.get(Pt)]:ct.get(Pt):jt+=T.has(Pt)?k[T.get(Pt)]:ct.get(Pt)}),jt=jt/It.length,It.forEach(function(Pt){mt.set(Pt,jt)})}});for(var Bt=function(){var Vt=Yt.shift(),Zt=$.get(Vt);Zt.forEach(function(jt){if(mt.get(jt.id)<mt.get(Vt)+jt.gap)if(rt&&rt.has(jt.id)){var Pt=void 0;if(nt=="horizontal"?Pt=T.has(jt.id)?w[T.get(jt.id)]:ct.get(jt.id):Pt=T.has(jt.id)?k[T.get(jt.id)]:ct.get(jt.id),mt.set(jt.id,Pt),Pt<mt.get(Vt)+jt.gap){var ce=mt.get(Vt)+jt.gap-Pt;Mt.get(Vt).forEach(function($t){mt.set($t,mt.get($t)-ce)})}}else mt.set(jt.id,mt.get(Vt)+jt.gap);yt.set(jt.id,yt.get(jt.id)-1),yt.get(jt.id)==0&&Yt.push(jt.id),rt&&Mt.set(jt.id,vt(Mt.get(Vt),Mt.get(jt.id)))})};Yt.length!=0;)Bt();if(rt){var zt=new Set;$.forEach(function(It,Vt){It.length==0&&zt.add(Vt)});var Gt=[];Mt.forEach(function(It,Vt){if(zt.has(Vt)){var Zt=!1,jt=!0,Pt=!1,ce=void 0;try{for(var $t=It[Symbol.iterator](),Ut;!(jt=(Ut=$t.next()).done);jt=!0){var te=Ut.value;rt.has(te)&&(Zt=!0)}}catch(ie){Pt=!0,ce=ie}finally{try{!jt&&$t.return&&$t.return()}finally{if(Pt)throw ce}}if(!Zt){var Qt=!1,Jt=void 0;Gt.forEach(function(ie,Ge){ie.has([].concat(h(It))[0])&&(Qt=!0,Jt=Ge)}),Qt?It.forEach(function(ie){Gt[Jt].add(ie)}):Gt.push(new Set(It))}}}),Gt.forEach(function(It,Vt){var Zt=Number.POSITIVE_INFINITY,jt=Number.POSITIVE_INFINITY,Pt=Number.NEGATIVE_INFINITY,ce=Number.NEGATIVE_INFINITY,$t=!0,Ut=!1,te=void 0;try{for(var Qt=It[Symbol.iterator](),Jt;!($t=(Jt=Qt.next()).done);$t=!0){var ie=Jt.value,Ge=void 0;nt=="horizontal"?Ge=T.has(ie)?w[T.get(ie)]:ct.get(ie):Ge=T.has(ie)?k[T.get(ie)]:ct.get(ie);var pe=mt.get(ie);Ge<Zt&&(Zt=Ge),Ge>Pt&&(Pt=Ge),pe<jt&&(jt=pe),pe>ce&&(ce=pe)}}catch(Wt){Ut=!0,te=Wt}finally{try{!$t&&Qt.return&&Qt.return()}finally{if(Ut)throw te}}var He=(Zt+Pt)/2-(jt+ce)/2,Fe=!0,Pe=!1,Le=void 0;try{for(var _r=It[Symbol.iterator](),re;!(Fe=(re=_r.next()).done);Fe=!0){var xt=re.value;mt.set(xt,mt.get(xt)+He)}}catch(Wt){Pe=!0,Le=Wt}finally{try{!Fe&&_r.return&&_r.return()}finally{if(Pe)throw Le}}})}return mt},P=function($){var nt=0,rt=0,ct=0,ot=0;if($.forEach(function(Mt){Mt.left?w[T.get(Mt.left)]-w[T.get(Mt.right)]>=0?nt++:rt++:k[T.get(Mt.top)]-k[T.get(Mt.bottom)]>=0?ct++:ot++}),nt>rt&&ct>ot)for(var vt=0;vt<T.size;vt++)w[vt]=-1*w[vt],k[vt]=-1*k[vt];else if(nt>rt)for(var yt=0;yt<T.size;yt++)w[yt]=-1*w[yt];else if(ct>ot)for(var mt=0;mt<T.size;mt++)k[mt]=-1*k[mt]},_=function($){var nt=[],rt=new d,ct=new Set,ot=0;return $.forEach(function(vt,yt){if(!ct.has(yt)){nt[ot]=[];var mt=yt;for(rt.push(mt),ct.add(mt),nt[ot].push(mt);rt.length!=0;){mt=rt.shift();var Mt=$.get(mt);Mt.forEach(function(Yt){ct.has(Yt.id)||(rt.push(Yt.id),ct.add(Yt.id),nt[ot].push(Yt.id))})}ot++}}),nt},I=function($){var nt=new Map;return $.forEach(function(rt,ct){nt.set(ct,[])}),$.forEach(function(rt,ct){rt.forEach(function(ot){nt.get(ct).push(ot),nt.get(ot.id).push({id:ct,gap:ot.gap,direction:ot.direction})})}),nt},M=function($){var nt=new Map;return $.forEach(function(rt,ct){nt.set(ct,[])}),$.forEach(function(rt,ct){rt.forEach(function(ot){nt.get(ot.id).push({id:ct,gap:ot.gap,direction:ot.direction})})}),nt},O=[],N=[],B=!1,z=!1,F=new Set,V=new Map,G=new Map,Y=[];if(y.fixedNodeConstraint&&y.fixedNodeConstraint.forEach(function(st){F.add(st.nodeId)}),y.relativePlacementConstraint&&(y.relativePlacementConstraint.forEach(function(st){st.left?(V.has(st.left)?V.get(st.left).push({id:st.right,gap:st.gap,direction:"horizontal"}):V.set(st.left,[{id:st.right,gap:st.gap,direction:"horizontal"}]),V.has(st.right)||V.set(st.right,[])):(V.has(st.top)?V.get(st.top).push({id:st.bottom,gap:st.gap,direction:"vertical"}):V.set(st.top,[{id:st.bottom,gap:st.gap,direction:"vertical"}]),V.has(st.bottom)||V.set(st.bottom,[]))}),G=I(V),Y=_(G)),f.TRANSFORM_ON_CONSTRAINT_HANDLING){if(y.fixedNodeConstraint&&y.fixedNodeConstraint.length>1)y.fixedNodeConstraint.forEach(function(st,$){O[$]=[st.position.x,st.position.y],N[$]=[w[T.get(st.nodeId)],k[T.get(st.nodeId)]]}),B=!0;else if(y.alignmentConstraint)(function(){var st=0;if(y.alignmentConstraint.vertical){for(var $=y.alignmentConstraint.vertical,nt=function(mt){var Mt=new Set;$[mt].forEach(function(zt){Mt.add(zt)});var Yt=new Set([].concat(h(Mt)).filter(function(zt){return F.has(zt)})),Bt=void 0;Yt.size>0?Bt=w[T.get(Yt.values().next().value)]:Bt=C(Mt).x,$[mt].forEach(function(zt){O[st]=[Bt,k[T.get(zt)]],N[st]=[w[T.get(zt)],k[T.get(zt)]],st++})},rt=0;rt<$.length;rt++)nt(rt);B=!0}if(y.alignmentConstraint.horizontal){for(var ct=y.alignmentConstraint.horizontal,ot=function(mt){var Mt=new Set;ct[mt].forEach(function(zt){Mt.add(zt)});var Yt=new Set([].concat(h(Mt)).filter(function(zt){return F.has(zt)})),Bt=void 0;Yt.size>0?Bt=w[T.get(Yt.values().next().value)]:Bt=C(Mt).y,ct[mt].forEach(function(zt){O[st]=[w[T.get(zt)],Bt],N[st]=[w[T.get(zt)],k[T.get(zt)]],st++})},vt=0;vt<ct.length;vt++)ot(vt);B=!0}y.relativePlacementConstraint&&(z=!0)})();else if(y.relativePlacementConstraint){for(var Q=0,K=0,it=0;it<Y.length;it++)Y[it].length>Q&&(Q=Y[it].length,K=it);if(Q<G.size/2)P(y.relativePlacementConstraint),B=!1,z=!1;else{var ut=new Map,q=new Map,W=[];Y[K].forEach(function(st){V.get(st).forEach(function($){$.direction=="horizontal"?(ut.has(st)?ut.get(st).push($):ut.set(st,[$]),ut.has($.id)||ut.set($.id,[]),W.push({left:st,right:$.id})):(q.has(st)?q.get(st).push($):q.set(st,[$]),q.has($.id)||q.set($.id,[]),W.push({top:st,bottom:$.id}))})}),P(W),z=!1;var H=D(ut,"horizontal"),U=D(q,"vertical");Y[K].forEach(function(st,$){N[$]=[w[T.get(st)],k[T.get(st)]],O[$]=[],H.has(st)?O[$][0]=H.get(st):O[$][0]=w[T.get(st)],U.has(st)?O[$][1]=U.get(st):O[$][1]=k[T.get(st)]}),B=!0}}if(B){for(var X=void 0,J=g.transpose(O),j=g.transpose(N),gt=0;gt<J.length;gt++)J[gt]=g.multGamma(J[gt]),j[gt]=g.multGamma(j[gt]);var at=g.multMat(J,g.transpose(j)),tt=p.svd(at);X=g.multMat(tt.V,g.transpose(tt.U));for(var kt=0;kt<T.size;kt++){var ft=[w[kt],k[kt]],Dt=[X[0][0],X[1][0]],Ot=[X[0][1],X[1][1]];w[kt]=g.dotProduct(ft,Dt),k[kt]=g.dotProduct(ft,Ot)}z&&P(y.relativePlacementConstraint)}}if(f.ENFORCE_CONSTRAINTS){if(y.fixedNodeConstraint&&y.fixedNodeConstraint.length>0){var Rt={x:0,y:0};y.fixedNodeConstraint.forEach(function(st,$){var nt={x:w[T.get(st.nodeId)],y:k[T.get(st.nodeId)]},rt=st.position,ct=R(rt,nt);Rt.x+=ct.x,Rt.y+=ct.y}),Rt.x/=y.fixedNodeConstraint.length,Rt.y/=y.fixedNodeConstraint.length,w.forEach(function(st,$){w[$]+=Rt.x}),k.forEach(function(st,$){k[$]+=Rt.y}),y.fixedNodeConstraint.forEach(function(st){w[T.get(st.nodeId)]=st.position.x,k[T.get(st.nodeId)]=st.position.y})}if(y.alignmentConstraint){if(y.alignmentConstraint.vertical)for(var Tt=y.alignmentConstraint.vertical,At=function($){var nt=new Set;Tt[$].forEach(function(ot){nt.add(ot)});var rt=new Set([].concat(h(nt)).filter(function(ot){return F.has(ot)})),ct=void 0;rt.size>0?ct=w[T.get(rt.values().next().value)]:ct=C(nt).x,nt.forEach(function(ot){F.has(ot)||(w[T.get(ot)]=ct)})},bt=0;bt<Tt.length;bt++)At(bt);if(y.alignmentConstraint.horizontal)for(var wt=y.alignmentConstraint.horizontal,Nt=function($){var nt=new Set;wt[$].forEach(function(ot){nt.add(ot)});var rt=new Set([].concat(h(nt)).filter(function(ot){return F.has(ot)})),ct=void 0;rt.size>0?ct=k[T.get(rt.values().next().value)]:ct=C(nt).y,nt.forEach(function(ot){F.has(ot)||(k[T.get(ot)]=ct)})},ht=0;ht<wt.length;ht++)Nt(ht)}y.relativePlacementConstraint&&function(){var st=new Map,$=new Map,nt=new Map,rt=new Map,ct=new Map,ot=new Map,vt=new Set,yt=new Set;if(F.forEach(function(le){vt.add(le),yt.add(le)}),y.alignmentConstraint){if(y.alignmentConstraint.vertical)for(var mt=y.alignmentConstraint.vertical,Mt=function(Kt){nt.set("dummy"+Kt,[]),mt[Kt].forEach(function(Ft){st.set(Ft,"dummy"+Kt),nt.get("dummy"+Kt).push(Ft),F.has(Ft)&&vt.add("dummy"+Kt)}),ct.set("dummy"+Kt,w[T.get(mt[Kt][0])])},Yt=0;Yt<mt.length;Yt++)Mt(Yt);if(y.alignmentConstraint.horizontal)for(var Bt=y.alignmentConstraint.horizontal,zt=function(Kt){rt.set("dummy"+Kt,[]),Bt[Kt].forEach(function(Ft){$.set(Ft,"dummy"+Kt),rt.get("dummy"+Kt).push(Ft),F.has(Ft)&&yt.add("dummy"+Kt)}),ot.set("dummy"+Kt,k[T.get(Bt[Kt][0])])},Gt=0;Gt<Bt.length;Gt++)zt(Gt)}var It=new Map,Vt=new Map,Zt=function(Kt){V.get(Kt).forEach(function(Ft){var Ve=void 0,lt=void 0;Ft.direction=="horizontal"?(Ve=st.get(Kt)?st.get(Kt):Kt,st.get(Ft.id)?lt={id:st.get(Ft.id),gap:Ft.gap,direction:Ft.direction}:lt=Ft,It.has(Ve)?It.get(Ve).push(lt):It.set(Ve,[lt]),It.has(lt.id)||It.set(lt.id,[])):(Ve=$.get(Kt)?$.get(Kt):Kt,$.get(Ft.id)?lt={id:$.get(Ft.id),gap:Ft.gap,direction:Ft.direction}:lt=Ft,Vt.has(Ve)?Vt.get(Ve).push(lt):Vt.set(Ve,[lt]),Vt.has(lt.id)||Vt.set(lt.id,[]))})},jt=!0,Pt=!1,ce=void 0;try{for(var $t=V.keys()[Symbol.iterator](),Ut;!(jt=(Ut=$t.next()).done);jt=!0){var te=Ut.value;Zt(te)}}catch(le){Pt=!0,ce=le}finally{try{!jt&&$t.return&&$t.return()}finally{if(Pt)throw ce}}var Qt=I(It),Jt=I(Vt),ie=_(Qt),Ge=_(Jt),pe=M(It),He=M(Vt),Fe=[],Pe=[];ie.forEach(function(le,Kt){Fe[Kt]=[],le.forEach(function(Ft){pe.get(Ft).length==0&&Fe[Kt].push(Ft)})}),Ge.forEach(function(le,Kt){Pe[Kt]=[],le.forEach(function(Ft){He.get(Ft).length==0&&Pe[Kt].push(Ft)})});var Le=D(It,"horizontal",vt,ct,Fe),_r=D(Vt,"vertical",yt,ot,Pe),re=function(Kt){nt.get(Kt)?nt.get(Kt).forEach(function(Ft){w[T.get(Ft)]=Le.get(Kt)}):w[T.get(Kt)]=Le.get(Kt)},xt=!0,Wt=!1,oe=void 0;try{for(var Be=Le.keys()[Symbol.iterator](),pr;!(xt=(pr=Be.next()).done);xt=!0){var vr=pr.value;re(vr)}}catch(le){Wt=!0,oe=le}finally{try{!xt&&Be.return&&Be.return()}finally{if(Wt)throw oe}}var ur=function(Kt){rt.get(Kt)?rt.get(Kt).forEach(function(Ft){k[T.get(Ft)]=_r.get(Kt)}):k[T.get(Kt)]=_r.get(Kt)},jr=!0,Vn=!1,ei=void 0;try{for(var qe=_r.keys()[Symbol.iterator](),fe;!(jr=(fe=qe.next()).done);jr=!0){var vr=fe.value;ur(vr)}}catch(le){Vn=!0,ei=le}finally{try{!jr&&qe.return&&qe.return()}finally{if(Vn)throw ei}}}()}for(var _t=0;_t<S.length;_t++){var Z=S[_t];Z.getChild()==null&&Z.setCenter(w[T.get(Z.id)],k[T.get(Z.id)])}},o.exports=v},551:o=>{o.exports=r}},i={};function a(o){var l=i[o];if(l!==void 0)return l.exports;var u=i[o]={exports:{}};return n[o](u,u.exports,a),u.exports}var s=a(45);return s})()})}(q1)),q1.exports}var ALt=H1.exports,a6;function LLt(){return a6||(a6=1,function(e,t){(function(n,i){e.exports=i(_Lt())})(ALt,function(r){return(()=>{var n={658:o=>{o.exports=Object.assign!=null?Object.assign.bind(Object):function(l){for(var u=arguments.length,h=Array(u>1?u-1:0),f=1;f<u;f++)h[f-1]=arguments[f];return h.forEach(function(d){Object.keys(d).forEach(function(g){return l[g]=d[g]})}),l}},548:(o,l,u)=>{var h=function(){function g(p,v){var m=[],y=!0,b=!1,T=void 0;try{for(var w=p[Symbol.iterator](),k;!(y=(k=w.next()).done)&&(m.push(k.value),!(v&&m.length===v));y=!0);}catch(S){b=!0,T=S}finally{try{!y&&w.return&&w.return()}finally{if(b)throw T}}return m}return function(p,v){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return g(p,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=u(140).layoutBase.LinkedList,d={};d.getTopMostNodes=function(g){for(var p={},v=0;v<g.length;v++)p[g[v].id()]=!0;var m=g.filter(function(y,b){typeof y=="number"&&(y=b);for(var T=y.parent()[0];T!=null;){if(p[T.id()])return!1;T=T.parent()[0]}return!0});return m},d.connectComponents=function(g,p,v,m){var y=new f,b=new Set,T=[],w=void 0,k=void 0,S=void 0,E=!1,L=1,A=[],R=[],C=function(){var P=g.collection();R.push(P);var _=v[0],I=g.collection();I.merge(_).merge(_.descendants().intersection(p)),T.push(_),I.forEach(function(N){y.push(N),b.add(N),P.merge(N)});for(var M=function(){_=y.shift();var B=g.collection();_.neighborhood().nodes().forEach(function(G){p.intersection(_.edgesWith(G)).length>0&&B.merge(G)});for(var z=0;z<B.length;z++){var F=B[z];if(w=v.intersection(F.union(F.ancestors())),w!=null&&!b.has(w[0])){var V=w.union(w.descendants());V.forEach(function(G){y.push(G),b.add(G),P.merge(G),v.has(G)&&T.push(G)})}}};y.length!=0;)M();if(P.forEach(function(N){p.intersection(N.connectedEdges()).forEach(function(B){P.has(B.source())&&P.has(B.target())&&P.merge(B)})}),T.length==v.length&&(E=!0),!E||E&&L>1){k=T[0],S=k.connectedEdges().length,T.forEach(function(N){N.connectedEdges().length<S&&(S=N.connectedEdges().length,k=N)}),A.push(k.id());var O=g.collection();O.merge(T[0]),T.forEach(function(N){O.merge(N)}),T=[],v=v.difference(O),L++}};do C();while(!E);return m&&A.length>0&&m.set("dummy"+(m.size+1),A),R},d.relocateComponent=function(g,p,v){if(!v.fixedNodeConstraint){var m=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,b=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY;if(v.quality=="draft"){var w=!0,k=!1,S=void 0;try{for(var E=p.nodeIndexes[Symbol.iterator](),L;!(w=(L=E.next()).done);w=!0){var A=L.value,R=h(A,2),C=R[0],D=R[1],P=v.cy.getElementById(C);if(P){var _=P.boundingBox(),I=p.xCoords[D]-_.w/2,M=p.xCoords[D]+_.w/2,O=p.yCoords[D]-_.h/2,N=p.yCoords[D]+_.h/2;I<m&&(m=I),M>y&&(y=M),O<b&&(b=O),N>T&&(T=N)}}}catch(G){k=!0,S=G}finally{try{!w&&E.return&&E.return()}finally{if(k)throw S}}var B=g.x-(y+m)/2,z=g.y-(T+b)/2;p.xCoords=p.xCoords.map(function(G){return G+B}),p.yCoords=p.yCoords.map(function(G){return G+z})}else{Object.keys(p).forEach(function(G){var Y=p[G],Q=Y.getRect().x,K=Y.getRect().x+Y.getRect().width,it=Y.getRect().y,ut=Y.getRect().y+Y.getRect().height;Q<m&&(m=Q),K>y&&(y=K),it<b&&(b=it),ut>T&&(T=ut)});var F=g.x-(y+m)/2,V=g.y-(T+b)/2;Object.keys(p).forEach(function(G){var Y=p[G];Y.setCenter(Y.getCenterX()+F,Y.getCenterY()+V)})}}},d.calcBoundingBox=function(g,p,v,m){for(var y=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER,T=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER,k=void 0,S=void 0,E=void 0,L=void 0,A=g.descendants().not(":parent"),R=A.length,C=0;C<R;C++){var D=A[C];k=p[m.get(D.id())]-D.width()/2,S=p[m.get(D.id())]+D.width()/2,E=v[m.get(D.id())]-D.height()/2,L=v[m.get(D.id())]+D.height()/2,y>k&&(y=k),b<S&&(b=S),T>E&&(T=E),w<L&&(w=L)}var P={};return P.topLeftX=y,P.topLeftY=T,P.width=b-y,P.height=w-T,P},d.calcParentsWithoutChildren=function(g,p){var v=g.collection();return p.nodes(":parent").forEach(function(m){var y=!1;m.children().forEach(function(b){b.css("display")!="none"&&(y=!0)}),y||v.merge(m)}),v},o.exports=d},816:(o,l,u)=>{var h=u(548),f=u(140).CoSELayout,d=u(140).CoSENode,g=u(140).layoutBase.PointD,p=u(140).layoutBase.DimensionD,v=u(140).layoutBase.LayoutConstants,m=u(140).layoutBase.FDLayoutConstants,y=u(140).CoSEConstants,b=function(w,k){var S=w.cy,E=w.eles,L=E.nodes(),A=E.edges(),R=void 0,C=void 0,D=void 0,P={};w.randomize&&(R=k.nodeIndexes,C=k.xCoords,D=k.yCoords);var _=function(G){return typeof G=="function"},I=function(G,Y){return _(G)?G(Y):G},M=h.calcParentsWithoutChildren(S,E),O=function V(G,Y,Q,K){for(var it=Y.length,ut=0;ut<it;ut++){var q=Y[ut],W=null;q.intersection(M).length==0&&(W=q.children());var H=void 0,U=q.layoutDimensions({nodeDimensionsIncludeLabels:K.nodeDimensionsIncludeLabels});if(q.outerWidth()!=null&&q.outerHeight()!=null)if(K.randomize)if(!q.isParent())H=G.add(new d(Q.graphManager,new g(C[R.get(q.id())]-U.w/2,D[R.get(q.id())]-U.h/2),new p(parseFloat(U.w),parseFloat(U.h))));else{var X=h.calcBoundingBox(q,C,D,R);q.intersection(M).length==0?H=G.add(new d(Q.graphManager,new g(X.topLeftX,X.topLeftY),new p(X.width,X.height))):H=G.add(new d(Q.graphManager,new g(X.topLeftX,X.topLeftY),new p(parseFloat(U.w),parseFloat(U.h))))}else H=G.add(new d(Q.graphManager,new g(q.position("x")-U.w/2,q.position("y")-U.h/2),new p(parseFloat(U.w),parseFloat(U.h))));else H=G.add(new d(this.graphManager));if(H.id=q.data("id"),H.nodeRepulsion=I(K.nodeRepulsion,q),H.paddingLeft=parseInt(q.css("padding")),H.paddingTop=parseInt(q.css("padding")),H.paddingRight=parseInt(q.css("padding")),H.paddingBottom=parseInt(q.css("padding")),K.nodeDimensionsIncludeLabels&&(H.labelWidth=q.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,H.labelHeight=q.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,H.labelPosVertical=q.css("text-valign"),H.labelPosHorizontal=q.css("text-halign")),P[q.data("id")]=H,isNaN(H.rect.x)&&(H.rect.x=0),isNaN(H.rect.y)&&(H.rect.y=0),W!=null&&W.length>0){var J=void 0;J=Q.getGraphManager().add(Q.newGraph(),H),V(J,W,Q,K)}}},N=function(G,Y,Q){for(var K=0,it=0,ut=0;ut<Q.length;ut++){var q=Q[ut],W=P[q.data("source")],H=P[q.data("target")];if(W&&H&&W!==H&&W.getEdgesBetween(H).length==0){var U=Y.add(G.newEdge(),W,H);U.id=q.id(),U.idealLength=I(w.idealEdgeLength,q),U.edgeElasticity=I(w.edgeElasticity,q),K+=U.idealLength,it++}}w.idealEdgeLength!=null&&(it>0?y.DEFAULT_EDGE_LENGTH=m.DEFAULT_EDGE_LENGTH=K/it:_(w.idealEdgeLength)?y.DEFAULT_EDGE_LENGTH=m.DEFAULT_EDGE_LENGTH=50:y.DEFAULT_EDGE_LENGTH=m.DEFAULT_EDGE_LENGTH=w.idealEdgeLength,y.MIN_REPULSION_DIST=m.MIN_REPULSION_DIST=m.DEFAULT_EDGE_LENGTH/10,y.DEFAULT_RADIAL_SEPARATION=m.DEFAULT_EDGE_LENGTH)},B=function(G,Y){Y.fixedNodeConstraint&&(G.constraints.fixedNodeConstraint=Y.fixedNodeConstraint),Y.alignmentConstraint&&(G.constraints.alignmentConstraint=Y.alignmentConstraint),Y.relativePlacementConstraint&&(G.constraints.relativePlacementConstraint=Y.relativePlacementConstraint)};w.nestingFactor!=null&&(y.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=m.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=w.nestingFactor),w.gravity!=null&&(y.DEFAULT_GRAVITY_STRENGTH=m.DEFAULT_GRAVITY_STRENGTH=w.gravity),w.numIter!=null&&(y.MAX_ITERATIONS=m.MAX_ITERATIONS=w.numIter),w.gravityRange!=null&&(y.DEFAULT_GRAVITY_RANGE_FACTOR=m.DEFAULT_GRAVITY_RANGE_FACTOR=w.gravityRange),w.gravityCompound!=null&&(y.DEFAULT_COMPOUND_GRAVITY_STRENGTH=m.DEFAULT_COMPOUND_GRAVITY_STRENGTH=w.gravityCompound),w.gravityRangeCompound!=null&&(y.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=m.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=w.gravityRangeCompound),w.initialEnergyOnIncremental!=null&&(y.DEFAULT_COOLING_FACTOR_INCREMENTAL=m.DEFAULT_COOLING_FACTOR_INCREMENTAL=w.initialEnergyOnIncremental),w.tilingCompareBy!=null&&(y.TILING_COMPARE_BY=w.tilingCompareBy),w.quality=="proof"?v.QUALITY=2:v.QUALITY=0,y.NODE_DIMENSIONS_INCLUDE_LABELS=m.NODE_DIMENSIONS_INCLUDE_LABELS=v.NODE_DIMENSIONS_INCLUDE_LABELS=w.nodeDimensionsIncludeLabels,y.DEFAULT_INCREMENTAL=m.DEFAULT_INCREMENTAL=v.DEFAULT_INCREMENTAL=!w.randomize,y.ANIMATE=m.ANIMATE=v.ANIMATE=w.animate,y.TILE=w.tile,y.TILING_PADDING_VERTICAL=typeof w.tilingPaddingVertical=="function"?w.tilingPaddingVertical.call():w.tilingPaddingVertical,y.TILING_PADDING_HORIZONTAL=typeof w.tilingPaddingHorizontal=="function"?w.tilingPaddingHorizontal.call():w.tilingPaddingHorizontal,y.DEFAULT_INCREMENTAL=m.DEFAULT_INCREMENTAL=v.DEFAULT_INCREMENTAL=!0,y.PURE_INCREMENTAL=!w.randomize,v.DEFAULT_UNIFORM_LEAF_NODE_SIZES=w.uniformNodeDimensions,w.step=="transformed"&&(y.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,y.ENFORCE_CONSTRAINTS=!1,y.APPLY_LAYOUT=!1),w.step=="enforced"&&(y.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,y.ENFORCE_CONSTRAINTS=!0,y.APPLY_LAYOUT=!1),w.step=="cose"&&(y.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,y.ENFORCE_CONSTRAINTS=!1,y.APPLY_LAYOUT=!0),w.step=="all"&&(w.randomize?y.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:y.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,y.ENFORCE_CONSTRAINTS=!0,y.APPLY_LAYOUT=!0),w.fixedNodeConstraint||w.alignmentConstraint||w.relativePlacementConstraint?y.TREE_REDUCTION_ON_INCREMENTAL=!1:y.TREE_REDUCTION_ON_INCREMENTAL=!0;var z=new f,F=z.newGraphManager();return O(F.addRoot(),h.getTopMostNodes(L),z,w),N(z,F,A),B(z,w),z.runLayout(),P};o.exports={coseLayout:b}},212:(o,l,u)=>{var h=function(){function w(k,S){for(var E=0;E<S.length;E++){var L=S[E];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(k,L.key,L)}}return function(k,S,E){return S&&w(k.prototype,S),E&&w(k,E),k}}();function f(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}var d=u(658),g=u(548),p=u(657),v=p.spectralLayout,m=u(816),y=m.coseLayout,b=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(k){return 4500},idealEdgeLength:function(k){return 50},edgeElasticity:function(k){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),T=function(){function w(k){f(this,w),this.options=d({},b,k)}return h(w,[{key:"run",value:function(){var S=this,E=this.options,L=E.cy,A=E.eles,R=[],C=[],D=void 0,P=[];E.fixedNodeConstraint&&(!Array.isArray(E.fixedNodeConstraint)||E.fixedNodeConstraint.length==0)&&(E.fixedNodeConstraint=void 0),E.alignmentConstraint&&(E.alignmentConstraint.vertical&&(!Array.isArray(E.alignmentConstraint.vertical)||E.alignmentConstraint.vertical.length==0)&&(E.alignmentConstraint.vertical=void 0),E.alignmentConstraint.horizontal&&(!Array.isArray(E.alignmentConstraint.horizontal)||E.alignmentConstraint.horizontal.length==0)&&(E.alignmentConstraint.horizontal=void 0)),E.relativePlacementConstraint&&(!Array.isArray(E.relativePlacementConstraint)||E.relativePlacementConstraint.length==0)&&(E.relativePlacementConstraint=void 0);var _=E.fixedNodeConstraint||E.alignmentConstraint||E.relativePlacementConstraint;_&&(E.tile=!1,E.packComponents=!1);var I=void 0,M=!1;if(L.layoutUtilities&&E.packComponents&&(I=L.layoutUtilities("get"),I||(I=L.layoutUtilities()),M=!0),A.nodes().length>0)if(M){var B=g.getTopMostNodes(E.eles.nodes());if(D=g.connectComponents(L,E.eles,B),D.forEach(function(at){var tt=at.boundingBox();P.push({x:tt.x1+tt.w/2,y:tt.y1+tt.h/2})}),E.randomize&&D.forEach(function(at){E.eles=at,R.push(v(E))}),E.quality=="default"||E.quality=="proof"){var z=L.collection();if(E.tile){var F=new Map,V=[],G=[],Y=0,Q={nodeIndexes:F,xCoords:V,yCoords:G},K=[];if(D.forEach(function(at,tt){at.edges().length==0&&(at.nodes().forEach(function(kt,ft){z.merge(at.nodes()[ft]),kt.isParent()||(Q.nodeIndexes.set(at.nodes()[ft].id(),Y++),Q.xCoords.push(at.nodes()[0].position().x),Q.yCoords.push(at.nodes()[0].position().y))}),K.push(tt))}),z.length>1){var it=z.boundingBox();P.push({x:it.x1+it.w/2,y:it.y1+it.h/2}),D.push(z),R.push(Q);for(var ut=K.length-1;ut>=0;ut--)D.splice(K[ut],1),R.splice(K[ut],1),P.splice(K[ut],1)}}D.forEach(function(at,tt){E.eles=at,C.push(y(E,R[tt])),g.relocateComponent(P[tt],C[tt],E)})}else D.forEach(function(at,tt){g.relocateComponent(P[tt],R[tt],E)});var q=new Set;if(D.length>1){var W=[],H=A.filter(function(at){return at.css("display")=="none"});D.forEach(function(at,tt){var kt=void 0;if(E.quality=="draft"&&(kt=R[tt].nodeIndexes),at.nodes().not(H).length>0){var ft={};ft.edges=[],ft.nodes=[];var Dt=void 0;at.nodes().not(H).forEach(function(Ot){if(E.quality=="draft")if(!Ot.isParent())Dt=kt.get(Ot.id()),ft.nodes.push({x:R[tt].xCoords[Dt]-Ot.boundingbox().w/2,y:R[tt].yCoords[Dt]-Ot.boundingbox().h/2,width:Ot.boundingbox().w,height:Ot.boundingbox().h});else{var Rt=g.calcBoundingBox(Ot,R[tt].xCoords,R[tt].yCoords,kt);ft.nodes.push({x:Rt.topLeftX,y:Rt.topLeftY,width:Rt.width,height:Rt.height})}else C[tt][Ot.id()]&&ft.nodes.push({x:C[tt][Ot.id()].getLeft(),y:C[tt][Ot.id()].getTop(),width:C[tt][Ot.id()].getWidth(),height:C[tt][Ot.id()].getHeight()})}),at.edges().forEach(function(Ot){var Rt=Ot.source(),Tt=Ot.target();if(Rt.css("display")!="none"&&Tt.css("display")!="none")if(E.quality=="draft"){var At=kt.get(Rt.id()),bt=kt.get(Tt.id()),wt=[],Nt=[];if(Rt.isParent()){var ht=g.calcBoundingBox(Rt,R[tt].xCoords,R[tt].yCoords,kt);wt.push(ht.topLeftX+ht.width/2),wt.push(ht.topLeftY+ht.height/2)}else wt.push(R[tt].xCoords[At]),wt.push(R[tt].yCoords[At]);if(Tt.isParent()){var _t=g.calcBoundingBox(Tt,R[tt].xCoords,R[tt].yCoords,kt);Nt.push(_t.topLeftX+_t.width/2),Nt.push(_t.topLeftY+_t.height/2)}else Nt.push(R[tt].xCoords[bt]),Nt.push(R[tt].yCoords[bt]);ft.edges.push({startX:wt[0],startY:wt[1],endX:Nt[0],endY:Nt[1]})}else C[tt][Rt.id()]&&C[tt][Tt.id()]&&ft.edges.push({startX:C[tt][Rt.id()].getCenterX(),startY:C[tt][Rt.id()].getCenterY(),endX:C[tt][Tt.id()].getCenterX(),endY:C[tt][Tt.id()].getCenterY()})}),ft.nodes.length>0&&(W.push(ft),q.add(tt))}});var U=I.packComponents(W,E.randomize).shifts;if(E.quality=="draft")R.forEach(function(at,tt){var kt=at.xCoords.map(function(Dt){return Dt+U[tt].dx}),ft=at.yCoords.map(function(Dt){return Dt+U[tt].dy});at.xCoords=kt,at.yCoords=ft});else{var X=0;q.forEach(function(at){Object.keys(C[at]).forEach(function(tt){var kt=C[at][tt];kt.setCenter(kt.getCenterX()+U[X].dx,kt.getCenterY()+U[X].dy)}),X++})}}}else{var O=E.eles.boundingBox();if(P.push({x:O.x1+O.w/2,y:O.y1+O.h/2}),E.randomize){var N=v(E);R.push(N)}E.quality=="default"||E.quality=="proof"?(C.push(y(E,R[0])),g.relocateComponent(P[0],C[0],E)):g.relocateComponent(P[0],R[0],E)}var J=function(tt,kt){if(E.quality=="default"||E.quality=="proof"){typeof tt=="number"&&(tt=kt);var ft=void 0,Dt=void 0,Ot=tt.data("id");return C.forEach(function(Tt){Ot in Tt&&(ft={x:Tt[Ot].getRect().getCenterX(),y:Tt[Ot].getRect().getCenterY()},Dt=Tt[Ot])}),E.nodeDimensionsIncludeLabels&&(Dt.labelWidth&&(Dt.labelPosHorizontal=="left"?ft.x+=Dt.labelWidth/2:Dt.labelPosHorizontal=="right"&&(ft.x-=Dt.labelWidth/2)),Dt.labelHeight&&(Dt.labelPosVertical=="top"?ft.y+=Dt.labelHeight/2:Dt.labelPosVertical=="bottom"&&(ft.y-=Dt.labelHeight/2))),ft==null&&(ft={x:tt.position("x"),y:tt.position("y")}),{x:ft.x,y:ft.y}}else{var Rt=void 0;return R.forEach(function(Tt){var At=Tt.nodeIndexes.get(tt.id());At!=null&&(Rt={x:Tt.xCoords[At],y:Tt.yCoords[At]})}),Rt==null&&(Rt={x:tt.position("x"),y:tt.position("y")}),{x:Rt.x,y:Rt.y}}};if(E.quality=="default"||E.quality=="proof"||E.randomize){var j=g.calcParentsWithoutChildren(L,A),gt=A.filter(function(at){return at.css("display")=="none"});E.eles=A.not(gt),A.nodes().not(":parent").not(gt).layoutPositions(S,E,J),j.length>0&&j.forEach(function(at){at.position(J(at))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),w}();o.exports=T},657:(o,l,u)=>{var h=u(548),f=u(140).layoutBase.Matrix,d=u(140).layoutBase.SVD,g=function(v){var m=v.cy,y=v.eles,b=y.nodes(),T=y.nodes(":parent"),w=new Map,k=new Map,S=new Map,E=[],L=[],A=[],R=[],C=[],D=[],P=[],_=[],I=void 0,M=1e8,O=1e-9,N=v.piTol,B=v.samplingType,z=v.nodeSeparation,F=void 0,V=function(){for(var $=0,nt=0,rt=!1;nt<F;){$=Math.floor(Math.random()*I),rt=!1;for(var ct=0;ct<nt;ct++)if(R[ct]==$){rt=!0;break}if(!rt)R[nt]=$,nt++;else continue}},G=function($,nt,rt){for(var ct=[],ot=0,vt=0,yt=0,mt=void 0,Mt=[],Yt=0,Bt=1,zt=0;zt<I;zt++)Mt[zt]=M;for(ct[vt]=$,Mt[$]=0;vt>=ot;){yt=ct[ot++];for(var Gt=E[yt],It=0;It<Gt.length;It++)mt=k.get(Gt[It]),Mt[mt]==M&&(Mt[mt]=Mt[yt]+1,ct[++vt]=mt);D[yt][nt]=Mt[yt]*z}if(rt){for(var Vt=0;Vt<I;Vt++)D[Vt][nt]<C[Vt]&&(C[Vt]=D[Vt][nt]);for(var Zt=0;Zt<I;Zt++)C[Zt]>Yt&&(Yt=C[Zt],Bt=Zt)}return Bt},Y=function($){var nt=void 0;if($){nt=Math.floor(Math.random()*I);for(var ct=0;ct<I;ct++)C[ct]=M;for(var ot=0;ot<F;ot++)R[ot]=nt,nt=G(nt,ot,$)}else{V();for(var rt=0;rt<F;rt++)G(R[rt],rt,$)}for(var vt=0;vt<I;vt++)for(var yt=0;yt<F;yt++)D[vt][yt]*=D[vt][yt];for(var mt=0;mt<F;mt++)P[mt]=[];for(var Mt=0;Mt<F;Mt++)for(var Yt=0;Yt<F;Yt++)P[Mt][Yt]=D[R[Yt]][Mt]},Q=function(){for(var $=d.svd(P),nt=$.S,rt=$.U,ct=$.V,ot=nt[0]*nt[0]*nt[0],vt=[],yt=0;yt<F;yt++){vt[yt]=[];for(var mt=0;mt<F;mt++)vt[yt][mt]=0,yt==mt&&(vt[yt][mt]=nt[yt]/(nt[yt]*nt[yt]+ot/(nt[yt]*nt[yt])))}_=f.multMat(f.multMat(ct,vt),f.transpose(rt))},K=function(){for(var $=void 0,nt=void 0,rt=[],ct=[],ot=[],vt=[],yt=0;yt<I;yt++)rt[yt]=Math.random(),ct[yt]=Math.random();rt=f.normalize(rt),ct=f.normalize(ct);for(var mt=O,Mt=O,Yt=void 0;;){for(var Bt=0;Bt<I;Bt++)ot[Bt]=rt[Bt];if(rt=f.multGamma(f.multL(f.multGamma(ot),D,_)),$=f.dotProduct(ot,rt),rt=f.normalize(rt),mt=f.dotProduct(ot,rt),Yt=Math.abs(mt/Mt),Yt<=1+N&&Yt>=1)break;Mt=mt}for(var zt=0;zt<I;zt++)ot[zt]=rt[zt];for(Mt=O;;){for(var Gt=0;Gt<I;Gt++)vt[Gt]=ct[Gt];if(vt=f.minusOp(vt,f.multCons(ot,f.dotProduct(ot,vt))),ct=f.multGamma(f.multL(f.multGamma(vt),D,_)),nt=f.dotProduct(vt,ct),ct=f.normalize(ct),mt=f.dotProduct(vt,ct),Yt=Math.abs(mt/Mt),Yt<=1+N&&Yt>=1)break;Mt=mt}for(var It=0;It<I;It++)vt[It]=ct[It];L=f.multCons(ot,Math.sqrt(Math.abs($))),A=f.multCons(vt,Math.sqrt(Math.abs(nt)))};h.connectComponents(m,y,h.getTopMostNodes(b),w),T.forEach(function(st){h.connectComponents(m,y,h.getTopMostNodes(st.descendants().intersection(y)),w)});for(var it=0,ut=0;ut<b.length;ut++)b[ut].isParent()||k.set(b[ut].id(),it++);var q=!0,W=!1,H=void 0;try{for(var U=w.keys()[Symbol.iterator](),X;!(q=(X=U.next()).done);q=!0){var J=X.value;k.set(J,it++)}}catch(st){W=!0,H=st}finally{try{!q&&U.return&&U.return()}finally{if(W)throw H}}for(var j=0;j<k.size;j++)E[j]=[];T.forEach(function(st){for(var $=st.children().intersection(y);$.nodes(":childless").length==0;)$=$.nodes()[0].children().intersection(y);var nt=0,rt=$.nodes(":childless")[0].connectedEdges().length;$.nodes(":childless").forEach(function(ct,ot){ct.connectedEdges().length<rt&&(rt=ct.connectedEdges().length,nt=ot)}),S.set(st.id(),$.nodes(":childless")[nt].id())}),b.forEach(function(st){var $=void 0;st.isParent()?$=k.get(S.get(st.id())):$=k.get(st.id()),st.neighborhood().nodes().forEach(function(nt){y.intersection(st.edgesWith(nt)).length>0&&(nt.isParent()?E[$].push(S.get(nt.id())):E[$].push(nt.id()))})});var gt=function($){var nt=k.get($),rt=void 0;w.get($).forEach(function(ct){m.getElementById(ct).isParent()?rt=S.get(ct):rt=ct,E[nt].push(rt),E[k.get(rt)].push($)})},at=!0,tt=!1,kt=void 0;try{for(var ft=w.keys()[Symbol.iterator](),Dt;!(at=(Dt=ft.next()).done);at=!0){var Ot=Dt.value;gt(Ot)}}catch(st){tt=!0,kt=st}finally{try{!at&&ft.return&&ft.return()}finally{if(tt)throw kt}}I=k.size;var Rt=void 0;if(I>2){F=I<v.sampleSize?I:v.sampleSize;for(var Tt=0;Tt<I;Tt++)D[Tt]=[];for(var At=0;At<F;At++)_[At]=[];return v.quality=="draft"||v.step=="all"?(Y(B),Q(),K(),Rt={nodeIndexes:k,xCoords:L,yCoords:A}):(k.forEach(function(st,$){L.push(m.getElementById($).position("x")),A.push(m.getElementById($).position("y"))}),Rt={nodeIndexes:k,xCoords:L,yCoords:A}),Rt}else{var bt=k.keys(),wt=m.getElementById(bt.next().value),Nt=wt.position(),ht=wt.outerWidth();if(L.push(Nt.x),A.push(Nt.y),I==2){var _t=m.getElementById(bt.next().value),Z=_t.outerWidth();L.push(Nt.x+ht/2+Z/2+v.idealEdgeLength),A.push(Nt.y)}return Rt={nodeIndexes:k,xCoords:L,yCoords:A},Rt}};o.exports={spectralLayout:g}},579:(o,l,u)=>{var h=u(212),f=function(g){g&&g("layout","fcose",h)};typeof cytoscape<"u"&&f(cytoscape),o.exports=f},140:o=>{o.exports=r}},i={};function a(o){var l=i[o];if(l!==void 0)return l.exports;var u=i[o]={exports:{}};return n[o](u,u.exports,a),u.exports}var s=a(579);return s})()})}(H1)),H1.exports}var RLt=LLt();const ILt=qh(RLt);var s6={L:"left",R:"right",T:"top",B:"bottom"},o6={L:x(e=>`${e},${e/2} 0,${e} 0,0`,"L"),R:x(e=>`0,${e/2} ${e},0 ${e},${e}`,"R"),T:x(e=>`0,0 ${e},0 ${e/2},${e}`,"T"),B:x(e=>`${e/2},0 ${e},${e} 0,${e}`,"B")},U0={L:x((e,t)=>e-t+2,"L"),R:x((e,t)=>e-2,"R"),T:x((e,t)=>e-t+2,"T"),B:x((e,t)=>e-2,"B")},NLt=x(function(e){return ai(e)?e==="L"?"R":"L":e==="T"?"B":"T"},"getOppositeArchitectureDirection"),l6=x(function(e){const t=e;return t==="L"||t==="R"||t==="T"||t==="B"},"isArchitectureDirection"),ai=x(function(e){const t=e;return t==="L"||t==="R"},"isArchitectureDirectionX"),Ko=x(function(e){const t=e;return t==="T"||t==="B"},"isArchitectureDirectionY"),W_=x(function(e,t){const r=ai(e)&&Ko(t),n=Ko(e)&&ai(t);return r||n},"isArchitectureDirectionXY"),DLt=x(function(e){const t=e[0],r=e[1],n=ai(t)&&Ko(r),i=Ko(t)&&ai(r);return n||i},"isArchitecturePairXY"),MLt=x(function(e){return e!=="LL"&&e!=="RR"&&e!=="TT"&&e!=="BB"},"isValidArchitectureDirectionPair"),vk=x(function(e,t){const r=`${e}${t}`;return MLt(r)?r:void 0},"getArchitectureDirectionPair"),OLt=x(function([e,t],r){const n=r[0],i=r[1];return ai(n)?Ko(i)?[e+(n==="L"?-1:1),t+(i==="T"?1:-1)]:[e+(n==="L"?-1:1),t]:ai(i)?[e+(i==="L"?1:-1),t+(n==="T"?1:-1)]:[e,t+(n==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),PLt=x(function(e){return e==="LT"||e==="TL"?[1,1]:e==="BL"||e==="LB"?[1,-1]:e==="BR"||e==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),BLt=x(function(e,t){return W_(e,t)?"bend":ai(e)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),FLt=x(function(e){return e.type==="service"},"isArchitectureService"),$Lt=x(function(e){return e.type==="junction"},"isArchitectureJunction"),$U=x(e=>e.data(),"edgeData"),cu=x(e=>e.data(),"nodeData"),zU=Xe.architecture,Me=new oS(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:zU,dataStructures:void 0,elements:{}})),zLt=x(()=>{Me.reset(),dn()},"clear"),VLt=x(function({id:e,icon:t,in:r,title:n,iconText:i}){if(Me.records.registeredIds[e]!==void 0)throw new Error(`The service id [${e}] is already in use by another ${Me.records.registeredIds[e]}`);if(r!==void 0){if(e===r)throw new Error(`The service [${e}] cannot be placed within itself`);if(Me.records.registeredIds[r]===void 0)throw new Error(`The service [${e}]'s parent does not exist. Please make sure the parent is created before this service`);if(Me.records.registeredIds[r]==="node")throw new Error(`The service [${e}]'s parent is not a group`)}Me.records.registeredIds[e]="node",Me.records.nodes[e]={id:e,type:"service",icon:t,iconText:i,title:n,edges:[],in:r}},"addService"),GLt=x(()=>Object.values(Me.records.nodes).filter(FLt),"getServices"),ULt=x(function({id:e,in:t}){Me.records.registeredIds[e]="node",Me.records.nodes[e]={id:e,type:"junction",edges:[],in:t}},"addJunction"),WLt=x(()=>Object.values(Me.records.nodes).filter($Lt),"getJunctions"),YLt=x(()=>Object.values(Me.records.nodes),"getNodes"),mk=x(e=>Me.records.nodes[e],"getNode"),HLt=x(function({id:e,icon:t,in:r,title:n}){if(Me.records.registeredIds[e]!==void 0)throw new Error(`The group id [${e}] is already in use by another ${Me.records.registeredIds[e]}`);if(r!==void 0){if(e===r)throw new Error(`The group [${e}] cannot be placed within itself`);if(Me.records.registeredIds[r]===void 0)throw new Error(`The group [${e}]'s parent does not exist. Please make sure the parent is created before this group`);if(Me.records.registeredIds[r]==="node")throw new Error(`The group [${e}]'s parent is not a group`)}Me.records.registeredIds[e]="group",Me.records.groups[e]={id:e,icon:t,title:n,in:r}},"addGroup"),qLt=x(()=>Object.values(Me.records.groups),"getGroups"),XLt=x(function({lhsId:e,rhsId:t,lhsDir:r,rhsDir:n,lhsInto:i,rhsInto:a,lhsGroup:s,rhsGroup:o,title:l}){if(!l6(r))throw new Error(`Invalid direction given for left hand side of edge ${e}--${t}. Expected (L,R,T,B) got ${r}`);if(!l6(n))throw new Error(`Invalid direction given for right hand side of edge ${e}--${t}. Expected (L,R,T,B) got ${n}`);if(Me.records.nodes[e]===void 0&&Me.records.groups[e]===void 0)throw new Error(`The left-hand id [${e}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(Me.records.nodes[t]===void 0&&Me.records.groups[e]===void 0)throw new Error(`The right-hand id [${t}] does not yet exist. Please create the service/group before declaring an edge to it.`);const u=Me.records.nodes[e].in,h=Me.records.nodes[t].in;if(s&&u&&h&&u==h)throw new Error(`The left-hand id [${e}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(o&&u&&h&&u==h)throw new Error(`The right-hand id [${t}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);const f={lhsId:e,lhsDir:r,lhsInto:i,lhsGroup:s,rhsId:t,rhsDir:n,rhsInto:a,rhsGroup:o,title:l};Me.records.edges.push(f),Me.records.nodes[e]&&Me.records.nodes[t]&&(Me.records.nodes[e].edges.push(Me.records.edges[Me.records.edges.length-1]),Me.records.nodes[t].edges.push(Me.records.edges[Me.records.edges.length-1]))},"addEdge"),jLt=x(()=>Me.records.edges,"getEdges"),KLt=x(()=>{if(Me.records.dataStructures===void 0){const e={},t=Object.entries(Me.records.nodes).reduce((o,[l,u])=>(o[l]=u.edges.reduce((h,f)=>{var p,v;const d=(p=mk(f.lhsId))==null?void 0:p.in,g=(v=mk(f.rhsId))==null?void 0:v.in;if(d&&g&&d!==g){const m=BLt(f.lhsDir,f.rhsDir);m!=="bend"&&(e[d]??(e[d]={}),e[d][g]=m,e[g]??(e[g]={}),e[g][d]=m)}if(f.lhsId===l){const m=vk(f.lhsDir,f.rhsDir);m&&(h[m]=f.rhsId)}else{const m=vk(f.rhsDir,f.lhsDir);m&&(h[m]=f.lhsId)}return h},{}),o),{}),r=Object.keys(t)[0],n={[r]:1},i=Object.keys(t).reduce((o,l)=>l===r?o:{...o,[l]:1},{}),a=x(o=>{const l={[o]:[0,0]},u=[o];for(;u.length>0;){const h=u.shift();if(h){n[h]=1,delete i[h];const f=t[h],[d,g]=l[h];Object.entries(f).forEach(([p,v])=>{n[v]||(l[v]=OLt([d,g],p),u.push(v))})}}return l},"BFS"),s=[a(r)];for(;Object.keys(i).length>0;)s.push(a(Object.keys(i)[0]));Me.records.dataStructures={adjList:t,spatialMaps:s,groupAlignments:e}}return Me.records.dataStructures},"getDataStructures"),ZLt=x((e,t)=>{Me.records.elements[e]=t},"setElementForId"),QLt=x(e=>Me.records.elements[e],"getElementById"),zm={clear:zLt,setDiagramTitle:Fn,getDiagramTitle:gn,setAccTitle:cn,getAccTitle:wn,setAccDescription:En,getAccDescription:kn,addService:VLt,getServices:GLt,addJunction:ULt,getJunctions:WLt,getNodes:YLt,getNode:mk,addGroup:HLt,getGroups:qLt,addEdge:XLt,getEdges:jLt,setElementForId:ZLt,getElementById:QLt,getDataStructures:KLt};function ln(e){const t=pt().architecture;return t!=null&&t[e]?t[e]:zU[e]}x(ln,"getConfigField");var JLt=x((e,t)=>{af(e,t),e.groups.map(t.addGroup),e.services.map(r=>t.addService({...r,type:"service"})),e.junctions.map(r=>t.addJunction({...r,type:"junction"})),e.edges.map(t.addEdge)},"populateDb"),tRt={parse:x(async e=>{const t=await Ic("architecture",e);et.debug(t),JLt(t,zm)},"parse")},eRt=x(e=>`
  .edge {
    stroke-width: ${e.archEdgeWidth};
    stroke: ${e.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${e.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${e.archGroupBorderColor};
    stroke-width: ${e.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),rRt=eRt,jc=x(e=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${e}</g>`,"wrapIcon"),Xg={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:jc('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:jc('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:jc('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:jc('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:jc('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:FO,blank:{body:jc("")}}},nRt=x(async function(e,t){const r=ln("padding"),n=ln("iconSize"),i=n/2,a=n/6,s=a/2;await Promise.all(t.edges().map(async o=>{var L,A;const{source:l,sourceDir:u,sourceArrow:h,sourceGroup:f,target:d,targetDir:g,targetArrow:p,targetGroup:v,label:m}=$U(o);let{x:y,y:b}=o[0].sourceEndpoint();const{x:T,y:w}=o[0].midpoint();let{x:k,y:S}=o[0].targetEndpoint();const E=r+4;if(f&&(ai(u)?y+=u==="L"?-E:E:b+=u==="T"?-E:E+18),v&&(ai(g)?k+=g==="L"?-E:E:S+=g==="T"?-E:E+18),!f&&((L=zm.getNode(l))==null?void 0:L.type)==="junction"&&(ai(u)?y+=u==="L"?i:-i:b+=u==="T"?i:-i),!v&&((A=zm.getNode(d))==null?void 0:A.type)==="junction"&&(ai(g)?k+=g==="L"?i:-i:S+=g==="T"?i:-i),o[0]._private.rscratch){const R=e.insert("g");if(R.insert("path").attr("d",`M ${y},${b} L ${T},${w} L${k},${S} `).attr("class","edge"),h){const C=ai(u)?U0[u](y,a):y-s,D=Ko(u)?U0[u](b,a):b-s;R.insert("polygon").attr("points",o6[u](a)).attr("transform",`translate(${C},${D})`).attr("class","arrow")}if(p){const C=ai(g)?U0[g](k,a):k-s,D=Ko(g)?U0[g](S,a):S-s;R.insert("polygon").attr("points",o6[g](a)).attr("transform",`translate(${C},${D})`).attr("class","arrow")}if(m){const C=W_(u,g)?"XY":ai(u)?"X":"Y";let D=0;C==="X"?D=Math.abs(y-k):C==="Y"?D=Math.abs(b-S)/1.5:D=Math.abs(y-k)/2;const P=R.append("g");if(await Pi(P,m,{useHtmlLabels:!1,width:D,classes:"architecture-service-label"},pt()),P.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),C==="X")P.attr("transform","translate("+T+", "+w+")");else if(C==="Y")P.attr("transform","translate("+T+", "+w+") rotate(-90)");else if(C==="XY"){const _=vk(u,g);if(_&&DLt(_)){const I=P.node().getBoundingClientRect(),[M,O]=PLt(_);P.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*M*O*45})`);const N=P.node().getBoundingClientRect();P.attr("transform",`
                translate(${T}, ${w-I.height/2})
                translate(${M*N.width/2}, ${O*N.height/2})
                rotate(${-1*M*O*45}, 0, ${I.height/2})
              `)}}}}}))},"drawEdges"),iRt=x(async function(e,t){const n=ln("padding")*.75,i=ln("fontSize"),s=ln("iconSize")/2;await Promise.all(t.nodes().map(async o=>{const l=cu(o);if(l.type==="group"){const{h:u,w:h,x1:f,y1:d}=o.boundingBox();e.append("rect").attr("x",f+s).attr("y",d+s).attr("width",h).attr("height",u).attr("class","node-bkg");const g=e.append("g");let p=f,v=d;if(l.icon){const m=g.append("g");m.html(`<g>${await jl(l.icon,{height:n,width:n,fallbackPrefix:Xg.prefix})}</g>`),m.attr("transform","translate("+(p+s+1)+", "+(v+s+1)+")"),p+=n,v+=i/2-1-2}if(l.label){const m=g.append("g");await Pi(m,l.label,{useHtmlLabels:!1,width:h,classes:"architecture-service-label"},pt()),m.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),m.attr("transform","translate("+(p+s+4)+", "+(v+s+2)+")")}}}))},"drawGroups"),aRt=x(async function(e,t,r){for(const n of r){const i=t.append("g"),a=ln("iconSize");if(n.title){const u=i.append("g");await Pi(u,n.title,{useHtmlLabels:!1,width:a*1.5,classes:"architecture-service-label"},pt()),u.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),u.attr("transform","translate("+a/2+", "+a+")")}const s=i.append("g");if(n.icon)s.html(`<g>${await jl(n.icon,{height:a,width:a,fallbackPrefix:Xg.prefix})}</g>`);else if(n.iconText){s.html(`<g>${await jl("blank",{height:a,width:a,fallbackPrefix:Xg.prefix})}</g>`);const f=s.append("g").append("foreignObject").attr("width",a).attr("height",a).append("div").attr("class","node-icon-text").attr("style",`height: ${a}px;`).append("div").html(n.iconText),d=parseInt(window.getComputedStyle(f.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;f.attr("style",`-webkit-line-clamp: ${Math.floor((a-2)/d)};`)}else s.append("path").attr("class","node-bkg").attr("id","node-"+n.id).attr("d",`M0 ${a} v${-a} q0,-5 5,-5 h${a} q5,0 5,5 v${a} H0 Z`);i.attr("class","architecture-service");const{width:o,height:l}=i._groups[0][0].getBBox();n.width=o,n.height=l,e.setElementForId(n.id,i)}return 0},"drawServices"),sRt=x(function(e,t,r){r.forEach(n=>{const i=t.append("g"),a=ln("iconSize");i.append("g").append("rect").attr("id","node-"+n.id).attr("fill-opacity","0").attr("width",a).attr("height",a),i.attr("class","architecture-junction");const{width:o,height:l}=i._groups[0][0].getBBox();i.width=o,i.height=l,e.setElementForId(n.id,i)})},"drawJunctions");zO([{name:Xg.prefix,icons:Xg}]);ds.use(ILt);function VU(e,t){e.forEach(r=>{t.add({group:"nodes",data:{type:"service",id:r.id,icon:r.icon,label:r.title,parent:r.in,width:ln("iconSize"),height:ln("iconSize")},classes:"node-service"})})}x(VU,"addServices");function GU(e,t){e.forEach(r=>{t.add({group:"nodes",data:{type:"junction",id:r.id,parent:r.in,width:ln("iconSize"),height:ln("iconSize")},classes:"node-junction"})})}x(GU,"addJunctions");function UU(e,t){t.nodes().map(r=>{const n=cu(r);if(n.type==="group")return;n.x=r.position().x,n.y=r.position().y,e.getElementById(n.id).attr("transform","translate("+(n.x||0)+","+(n.y||0)+")")})}x(UU,"positionNodes");function WU(e,t){e.forEach(r=>{t.add({group:"nodes",data:{type:"group",id:r.id,icon:r.icon,label:r.title,parent:r.in},classes:"node-group"})})}x(WU,"addGroups");function YU(e,t){e.forEach(r=>{const{lhsId:n,rhsId:i,lhsInto:a,lhsGroup:s,rhsInto:o,lhsDir:l,rhsDir:u,rhsGroup:h,title:f}=r,d=W_(r.lhsDir,r.rhsDir)?"segments":"straight",g={id:`${n}-${i}`,label:f,source:n,sourceDir:l,sourceArrow:a,sourceGroup:s,sourceEndpoint:l==="L"?"0 50%":l==="R"?"100% 50%":l==="T"?"50% 0":"50% 100%",target:i,targetDir:u,targetArrow:o,targetGroup:h,targetEndpoint:u==="L"?"0 50%":u==="R"?"100% 50%":u==="T"?"50% 0":"50% 100%"};t.add({group:"edges",data:g,classes:d})})}x(YU,"addEdges");function HU(e,t,r){const n=x((o,l)=>Object.entries(o).reduce((u,[h,f])=>{var p;let d=0;const g=Object.entries(f);if(g.length===1)return u[h]=g[0][1],u;for(let v=0;v<g.length-1;v++)for(let m=v+1;m<g.length;m++){const[y,b]=g[v],[T,w]=g[m];if(((p=r[y])==null?void 0:p[T])===l)u[h]??(u[h]=[]),u[h]=[...u[h],...b,...w];else if(y==="default"||T==="default")u[h]??(u[h]=[]),u[h]=[...u[h],...b,...w];else{const S=`${h}-${d++}`;u[S]=b;const E=`${h}-${d++}`;u[E]=w}}return u},{}),"flattenAlignments"),i=t.map(o=>{const l={},u={};return Object.entries(o).forEach(([h,[f,d]])=>{var p,v,m;const g=((p=e.getNode(h))==null?void 0:p.in)??"default";l[d]??(l[d]={}),(v=l[d])[g]??(v[g]=[]),l[d][g].push(h),u[f]??(u[f]={}),(m=u[f])[g]??(m[g]=[]),u[f][g].push(h)}),{horiz:Object.values(n(l,"horizontal")).filter(h=>h.length>1),vert:Object.values(n(u,"vertical")).filter(h=>h.length>1)}}),[a,s]=i.reduce(([o,l],{horiz:u,vert:h})=>[[...o,...u],[...l,...h]],[[],[]]);return{horizontal:a,vertical:s}}x(HU,"getAlignments");function qU(e){const t=[],r=x(i=>`${i[0]},${i[1]}`,"posToStr"),n=x(i=>i.split(",").map(a=>parseInt(a)),"strToPos");return e.forEach(i=>{const a=Object.fromEntries(Object.entries(i).map(([u,h])=>[r(h),u])),s=[r([0,0])],o={},l={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;s.length>0;){const u=s.shift();if(u){o[u]=1;const h=a[u];if(h){const f=n(u);Object.entries(l).forEach(([d,g])=>{const p=r([f[0]+g[0],f[1]+g[1]]),v=a[p];v&&!o[p]&&(s.push(p),t.push({[s6[d]]:v,[s6[NLt(d)]]:h,gap:1.5*ln("iconSize")}))})}}}}),t}x(qU,"getRelativeConstraints");function XU(e,t,r,n,i,{spatialMaps:a,groupAlignments:s}){return new Promise(o=>{const l=qt("body").append("div").attr("id","cy").attr("style","display:none"),u=ds({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${ln("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${ln("padding")}px`}}]});l.remove(),WU(r,u),VU(e,u),GU(t,u),YU(n,u);const h=HU(i,a,s),f=qU(a),d=u.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(g){const[p,v]=g.connectedNodes(),{parent:m}=cu(p),{parent:y}=cu(v);return m===y?1.5*ln("iconSize"):.5*ln("iconSize")},edgeElasticity(g){const[p,v]=g.connectedNodes(),{parent:m}=cu(p),{parent:y}=cu(v);return m===y?.45:.001},alignmentConstraint:h,relativePlacementConstraint:f});d.one("layoutstop",()=>{var p;function g(v,m,y,b){let T,w;const{x:k,y:S}=v,{x:E,y:L}=m;w=(b-S+(k-y)*(S-L)/(k-E))/Math.sqrt(1+Math.pow((S-L)/(k-E),2)),T=Math.sqrt(Math.pow(b-S,2)+Math.pow(y-k,2)-Math.pow(w,2));const A=Math.sqrt(Math.pow(E-k,2)+Math.pow(L-S,2));T=T/A;let R=(E-k)*(b-S)-(L-S)*(y-k);switch(!0){case R>=0:R=1;break;case R<0:R=-1;break}let C=(E-k)*(y-k)+(L-S)*(b-S);switch(!0){case C>=0:C=1;break;case C<0:C=-1;break}return w=Math.abs(w)*R,T=T*C,{distances:w,weights:T}}x(g,"getSegmentWeights"),u.startBatch();for(const v of Object.values(u.edges()))if((p=v.data)!=null&&p.call(v)){const{x:m,y}=v.source().position(),{x:b,y:T}=v.target().position();if(m!==b&&y!==T){const w=v.sourceEndpoint(),k=v.targetEndpoint(),{sourceDir:S}=$U(v),[E,L]=Ko(S)?[w.x,k.y]:[k.x,w.y],{weights:A,distances:R}=g(w,k,E,L);v.style("segment-distances",R),v.style("segment-weights",A)}}u.endBatch(),d.run()}),d.run(),u.ready(g=>{et.info("Ready",g),o(u)})})}x(XU,"layoutArchitecture");var oRt=x(async(e,t,r,n)=>{const i=n.db,a=i.getServices(),s=i.getJunctions(),o=i.getGroups(),l=i.getEdges(),u=i.getDataStructures(),h=ho(t),f=h.append("g");f.attr("class","architecture-edges");const d=h.append("g");d.attr("class","architecture-services");const g=h.append("g");g.attr("class","architecture-groups"),await aRt(i,d,a),sRt(i,d,s);const p=await XU(a,s,o,l,i,u);await nRt(f,p),await iRt(g,p),UU(i,p),Kh(void 0,h,ln("padding"),ln("useMaxWidth"))},"draw"),lRt={draw:oRt},cRt={parser:tRt,db:zm,renderer:lRt,styles:rRt};const uRt=Object.freeze(Object.defineProperty({__proto__:null,diagram:cRt},Symbol.toStringTag,{value:"Module"})),hRt=Object.freeze(Object.defineProperty({__proto__:null,InfoModule:p$,createInfoServices:v$},Symbol.toStringTag,{value:"Module"})),fRt=Object.freeze(Object.defineProperty({__proto__:null,PacketModule:m$,createPacketServices:y$},Symbol.toStringTag,{value:"Module"})),dRt=Object.freeze(Object.defineProperty({__proto__:null,PieModule:x$,createPieServices:b$},Symbol.toStringTag,{value:"Module"})),gRt=Object.freeze(Object.defineProperty({__proto__:null,ArchitectureModule:T$,createArchitectureServices:w$},Symbol.toStringTag,{value:"Module"})),pRt=Object.freeze(Object.defineProperty({__proto__:null,GitGraphModule:d$,createGitGraphServices:g$},Symbol.toStringTag,{value:"Module"})),vRt=Object.freeze(Object.defineProperty({__proto__:null,RadarModule:E$,createRadarServices:k$},Symbol.toStringTag,{value:"Module"}));export{AW as A,m6 as B,v6 as C,uu as D,wW as E,TW as F,FRt as G,MRt as H,_Rt as S,je as _,CRt as a,kRt as b,ERt as c,wRt as d,TRt as e,pW as f,og as g,NRt as h,ARt as i,eA as j,IRt as k,Wl as l,RRt as m,sg as n,LRt as o,YW as p,bRt as q,vh as r,SRt as s,P6 as t,B6 as u,O6 as v,M6 as w,N6 as x,I6 as y,ag as z};
